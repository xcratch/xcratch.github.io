"use strict";
(self["webpackChunkGUI"] = self["webpackChunkGUI"] || []).push([["preload_https_3A_2F_2Fyokobond_2Egithub_2Eio_2Fxcx-vpen_2Fdist_2FxcxVPen_2Emjs_extension_mjs"],{

/***/ "./preload/https%3A%2F%2Fyokobond%2Egithub%2Eio%2Fxcx-vpen%2Fdist%2FxcxVPen%2Emjs/extension.mjs":
/*!******************************************************************************************************!*\
  !*** ./preload/https%3A%2F%2Fyokobond%2Egithub%2Eio%2Fxcx-vpen%2Fdist%2FxcxVPen%2Emjs/extension.mjs ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   blockClass: () => (/* binding */ VPenBlocks),
/* harmony export */   entry: () => (/* binding */ entry)
/* harmony export */ });
var img$2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAF0CAYAAAD/4EcMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAIABJREFUeJzt3XmQnGlh5/nfe+SddUoqle67pVYf9EE30M0NxhxhM7Y5hsaAZ8zueGZgPGPmiJmN3XDEboRjvOsBxoTXw7rHwdjGxuC2wUODoblMd0ObPuhb6JZKaqmkKtWV93vtH2+n+lKV6s16M988vp+IihZSvpmPpFTll+d93uc1Pn53EAgAAACxMZMeAAAAQL8hsAAAAGJGYAEAAMSMwAIAAIgZgQUAABAzAgsAACBmBBYAAEDMCCwAAICYEVgAAAAxI7AAAABiRmABAADEjMACAACIGYEFAAAQMwILAAAgZgQWAABAzAgsAACAmBFYAAAAMSOwAAAAYkZgAQAAxIzAAgAAiBmBBQAAEDMCCwAAIGYEFgAAQMwILAAAgJgRWAAAADEjsAAAAGJGYAEAAMSMwAIAAIgZgQUAABAzAgsAACBmBBYAAEDMCCwAAICYEVgAAAAxI7AAAABiRmABAADEjMACAACIGYEFAAAQMwILAAAgZgQWAABAzAgsAACAmBFYAAAAMSOwAAAAYkZgAQAAxIzAAgAAiBmBBQAAEDMCCwAAIGYEFgAAQMwILAAAgJgRWAAAADEjsAAAAGJGYAEAAMSMwAIAAIgZgQUAABAzAgsAACBmBBYAAEDMCCwAAICYEVgAAAAxI7AAAABiRmABAADEjMACAACIGYEFAAAQMwILAAAgZgQWAABAzAgsAACAmBFYAAAAMSOwAAAAYkZgAQAAxIzAAgAAiBmBBQAAEDMCCwAAIGYEFgAAQMwILAAAgJgRWAAAADEjsAAAAGJGYAEAAMSMwAIAAIgZgQUAABAzAgsAACBmBBYAAEDMCCwAAICYEVgAAAAxI7AAAABiRmABAADEjMACAACIGYEFAAAQMwILAAAgZgQWAABAzAgsAACAmBFYAAAAMSOwAAAAYkZgAQAAxIzAAgAAiBmBBQAAEDM76QEAGFx5r6L1tRmtr89otDGvoltS0SlpyFlSwS1LkqzAU8arS5IcMyXHTEmSqlZOi+lhleyiSnZRC+kRzWTWaya7XiW7mNjvCQAkAgtAB2T8uraVp7S1ckbbS6e1rTKlidoF5d1KW16vaud0MbNBpwvbdSa/VVOFbZrKb1PVzrXl9QDg5QgsALHLexVds3BY1ywe1t6lo9pROiVTfsdeP+dWtd09re3l05d/zjdMnclv1ZHhfTo8fI2ODO3TUmqoY2MCMFiMj98dBEkPAkDv21C7qBvnn9CrLj2uaxYPywq8pIe0okCGThe269mRa/X4+Kt0rLhHgWEkPSwAfYLAAtCydfVZ3Tb7E9154QFNVs8nPZw1uZQZ12PjN+vBDXfodGF70sMB0OMILACRZPy6Xnvxx7rzwgPaVTqR9HDaYqqwTQ9suFMPTtyhqsW6LQDREVgAVmWyel5vnv6+7rjwoHJeNenhdETdyuih9a/R9ze+WVOFbUkPB0APIbAArGh36bjefeZe3Tj/hIwB/nbxzMhB3bv13frZ8P6khwKgB3AVIYArOrBwSO85+3UdWDiU9FC6wsGFZ3Rw4RkdG9qjr295j54cuyHpIQHoYsxgAXiJbeUp/fLpe3T9/FNJD6WrHR6+Rl/Z8T6dKO5KeigAuhCBBUCSNNqY1y+fvkevvfhjGeLbwmoEhqFHx2/RX23/FV3Mbkh6OAC6CIEFDDhTvt5y/nt679RXlXMHY/F63BwzpW9ufqe+seVdl2/lA2CwEVjAANuzdEy/evxPtbVyJrlB+L5ULktLS+F/a7Xwq16XGg0pCF74Mk3JMKR0OvzK5aRMRioUpKEhqVgMH5OQ6exG/dnuD+vZkWsTGwOA7kBgAQPIDly9d+qresdz35IZdO4WNqrXpelpaXZWunQp/G+pFEZWHAwjjKzxcWnduvBrYiIMsQ4JDEM/2PgmfWX7+1S3Mh17XQDdhcACBsy28pR+/ejd2lI52/4XcxzpzBnp7NkwrObm2v+aVzIyIk1OSps3S1u3hrNebXYhO6H/vvef6tjQnra/FoDuQ2ABA+St57+r95/6smzfbd+LVKvS8ePSqVPS+fPxzU7FxTCkjRulHTuk3bvD04tt4humvrbtF3Xv5ndzn0NgwBBYwADIejV97NgX9OrZh9vzAq4rnTghHT0qPfdcuF6qFxhGOLO1d28YW6n2LFB/cuwG3b3311W22xdzALoLgQX0uU3Vc/oXP/uD9tyMeWFBOnRIOnw4XF/Vy1Ipad8+6dprpbGx2J9+NrNOf7D/X3AjaWBAEFhAH7t24Vn9xuE/VN6txPvEs7PSU0+FM1b9+C1kclK68UZpe7wxVLcyunvvr+ux8ZtjfV4A3YfAAvrU6y/cr189/qeyAi++J71wQXrkkXDR+iCYnJRuvVXatCm2pwxk6Cs73qdvbX5HbM8JoPsQWEAf+sUzX9MvTP1tfE+4sCA9/HC4zmoQbdsm3XZbuP1DTL47+Vb9xc5/zOJ3oE9xs2egjxhBoA+c+ku9/dx98Tyh40iPPio9/XT3XQ3YSVNT4XYT+/eHoRXDNg9vPf9dZb2avrDnY/KN5DZHBdAeBBbQJ8zA10eO/4lef+H+eJ7wxAnpxz8Od1dHuNbs0KFw+4nbbw8XxK/RHRcfVMav64/2flyuybdjoJ/wLxroA4YCfezYF3THxQfX/mS1mnT//dLJk2t/rn5UrUo/+IF07Jj0hjeseR+tW2cfkRV4+n/3/3P5YiYL6Bf8awb6wIdO/Hk8cXX6tPRXf0VcrcaZM9I994ShtUY3Xfqp/umR/y5DLIkF+gUzWECP++XT9+gt57+3tifx/fDqwMcfj2dQg6Jel773vTC27rxTslv/lvqamYfkmra+sPtjLHwH+gCBBfSwt53/jt519htre5JyWfrud8N7BaI1R46EN69+29uk4eGWn+bOCw9oLj2mr257b4yDA5AEThECPeqGuSf1gZN/ubYnuXhR+pu/Ia7iMDsrffWr4a2C1uA9Z7+u1138UUyDApAUAgvoQdvLp/XPDv83mcEatk44eVL6+tfDRduIR70uffOb0rPPtvwURhBesHBg4VCMAwPQaQQW0GOGnCV94tDnlPHXcO+/p5+WvvOd8CbNiJfvSw88EO4f1iIr8PTPDv83jTcuxTgwAJ1EYAE9xAx8/S9H/j+NNeZaf5LHHpN+9KP+vIdgN3n0Uemhh1o+vOiW9Bs/+0PZPhEM9CICC+ghv3Dmb3XtQuunn/STn4RXC6Iznnwy3FOsRbtKJ/T+U1+OcUAAOoXAAnrEwYVn9J4zX2/9CR59lG0YknDoUDhj2KK3nv+uXj37cIwDAtAJBBbQA/JuRR879oXWN6J8+uk1rQnCGj39dHiz7BZ95PifrO20MICOI7CAHnDXiS9qvN7igucjR9Y0g4KY/PSn0lNPtXRo3q3oI8f/RAbr5oCeQWABXe7W2Uf0mpkWF0ufOyf98IfxDgite+ih8GbRLbhh7km9/mJMN/IG0HYEFtDFcl5VHzr5560dvLAg3XdfuG0AukMQhLfWmZ1t6fD3n/yyRhoLMQ8KQDsQWEAX+6XTf93aB6rrhnFVX8NeWWgP15W+/e2W/m5yXpWrCoEeQWABXWpH+ZTeNP2D1g5+4AFpjkXRXatUkr7//Zb2InvNzENr26oDQEcQWEAXMoJAdx3/Ymu3wjl0KFzYju42NSU98URLh9514osyxalfoJsRWEAXuvXSI9pdOh79wKWlNe0ejg575BFpZibyYZPV83rDNBcvAN2MwAK6jBV4+qXTfx39wCCQfvADyXHiHxTaw/fDU4WeF/nQ9059VVmvFv+YAMSCwAK6zBun/14TtQvRD3zySen8+fgHhPaan29pE9ghZ0lvP3dfGwYEIA4EFtBF7MDVu8/eG/3Acjm8iTN605NPSpeibyT7jue+pbxbacOAAKwVgQV0kTsuPKjRxnz0Ax98kFODvcz3w7/DiHJetfUrTQG0FYEFdAkz8PXO574Z/cAzZ1reHRxd5Px56dixyIe9/dx9SvnENdBtCCygS9x66RFtqF2MdlAQSP/wD+0ZEDrv4YcjL3gfdhb1+gvcQgfoNgQW0CXedu470Q86cqSltTvoUktL0rPRNxF96/nvciNooMsQWEAX2Fae0p6liKeHfL+lq8/Q5R57LPJ6usnqee1f/FmbBgSgFQQW0AXecv570Q86ejS85Qr6S73e0izWm6e/H/9YALSMwAISlvVqun024jqqIJAef7w9A0Lynnoq8lqsm2cf07Cz2KYBAYiKwAISdvOlx5Tx6tEOOnlSWlhoy3jQBSqVyPeTNOXrtpmftGlAAKIisICE3T7TwlWATz8d/0DQXZ56KvIhr5nhPpRAtyCwgAQNOUs6OP9MtIPm57klziBo4e95V+lEa7dZAhA7AgtI0C2XHpUpP9pBz0QMMvSuFha7v3rm4TYMBEBUBBaQoBvnnoh2gO+3tNs3etTJk1KjEemQG+afbM9YAERCYAEJSfmODiwcinbQmTPhZfwYDJ4X+TZIu0vHVXTZvgNIGoEFJOTahWeV9qPNTjB7NYCOHo30cDPwdf1c9AXyAOJFYAEJuW4+4pWAniedPt2ewaB7nTsXedbyugWuMgWSRmABCdm3FG2fI507F/kWKugDvh+eGo7gmsXDbRoMgNUisIAE5LyqtlTORjuI2avBNTUV6eHj9UtaV59t02AArAaBBSRg7+JRmUHE7RnORgwy9I+IM1gSs1hA0ggsIAG7S8ejHVCtcmucQVarhRuPRrB7KeJ7DECsCCwgAdvK0U75sHM7or4Htlaiz3oBiA+BBSSAwEJkLQSWEQRtGgyAqyGwgA4rOiWNNy5FO2hmpj2DQe+I+B7IejWtr/O+AZJCYAEdNllrYTbqUsQgQ/9ZWJBcN9Ihm6vPtWkwAK6GwAI6bEPtYrQDFhfZ/wpSEERe6M4MFpAcAgvosMgfehE/VNHHIr4XIsc8gNgQWECHra9FDKylpfYMBL1ncTHSwyO/1wDEhsACOizyAncCC00R3wuR32sAYkNgAR025EQMplKpPQNB74kYWJHfawBiQ2ABHVZ0IwZTtdqegaD31GqRHl50iHMgKQQW0EFGEET/0Iv4oYo+FvG9YAeuMn69TYMBsBICC+igjF+XFXjRDiKw0FSvh9s1RFBwym0aDICVEFhAB9lBtI0iJbEHFl4QBJIXLdAjBz2AWBBYQAfZfguB5fvxDwS9K2JgpXwCHUgCgQV0UOTZhIgfphgAEd8TLc2aAlgzAgvoIDOIOBsVcb0NBkDEGU1OEQLJILCADvJMK9oBJv9E8TJWtPeQa9htGgiAlfDdG+ggTwQW1ihqYJkEFpAEvnsDHeRYqegHRfxARZ+LGN3MYAHJILCADnKMFgIrnY5/IOhNpinZ0YLJMVt4zwFYMwIL6CDHTKlhRgymbLY9g0HvaeG9UEoV2zAQAFdDYAEdVrIjfuARWGiK+F6oWVlOEQIJIbCADos8o5DLtWcg6D0R3wtlu9CmgQC4GgIL6LDF1HC0A4aG2jMQ9J6I74WlFO8dICkEFtBhs5l10Q4gsNAU8b0wk1nfpoEAuBoCC+iwyB96BBaahqPNfhJYQHIILKDDZrIRP/TGx9szEPSesbFID7+Y3dCmgQC4GgIL6LDIH3q5HAvdEe5/NTIS6RACC0gOgQV02HO5zfKj/tNbF3HdFvrP2JhkGJEOOZvf0qbBALgaAgvoMMdMaTq3MdpBG5iJGHjro51aXkwNR79iFUBsCCwgAVOFbdEOmJxsz0DQOyK+ByK/xwDEisACEjCVj/jhNzER+Sa/6DMEFtBT+I4NJODo8N5oB6RSrMMaZCMjUiHaruxHhyK+xwDEisACEnCyuFOOmYp20DZmJAZWxL/7wDB0rLinTYMBsBoEFpAA17B1orgr2kHbt7dnMOh+EQPrbG5L9HteAogVgQUk5PDwNdEOWL9eyufbMxh0r1Qq8vqryO8tALEjsICEPDV6ffSDdkWc9ULv27FDsqxIh7T03gIQKwILSMjxod1aSkW8z+Ae1tUMnIh/5w0zrUMjB9o0GACrRWABCQlkRJ9pmJiIfLsU9LBsVtoSbTf2Z0eujX4BBYDYEVhAgh4fe1X0g/bti38g6E779kXe/+yJsRvbNBgAURBYQIKeGLtRVSvijZwPHIi8Jgc96kC0U32eYenR8VvaNBgAURBYQIIcM6Wfjt8U7aBsVtq5sy3jQRfZujXy6eCnRq9newagSxBYQMIeWv+a6Addd138A0F3OXgw8iEPbWjhvQSgLQgsIGHPjl6r+fRotIMmJqRNm9ozICRvfDzyxrJVK9famj4AbUFgAQnzZeqHE2+IfuBNEU8tone08Hf7ow2vU8NMt2EwAFpBYAFd4O83vlF+1H+OW7aEM1noL6OjkTeUDQxD3598c3vGA6AlBBbQBebTo3ps3c3RD7z99vgHg2TddptkGJEO+dnwfp3LccoY6CYEFtAl7tv09ugHTU5yE+h+snFjeGuciL4z+bY2DAbAWhBYQJc4OrRXR4Zb2ET09tsjb0aJLvWa6FcBns1vYXE70IX4rgx0kXu3vDv6QaOj0vXc3Lfn7d/f0pq6b2x5l4KIpxQBtB+BBbTMlxG4ku9c/jLkSwpafsanRq/X6UILp/xuuUUqssFkz8pmW1pPdzG7QT9Zf1sbBgRgreykBwB0OyNwZfh1mUFdRuBcjqoVJw0MS35gSmZKgUwFhq3ASCkwUwqMlKTlD/7r7b+k33z2s9EGadvSHXdI3/pWtOPQHV77WimTiXzY17b+YvSrTwF0BIEFXIHp12X6ZZl+VUbgSJIsUxrJSUM5qZiRMraUsiXLkGxLcj3J8aSGJ1Ubnip1T+WGo0pDqjsvfnZDvizJTCswM/KNtHwzo+aE8lOj1+vZkWt17cKz0Qa9fbt0zTXS4cOx/BmgQ3bskPbujXzYVGEbO7cDXYzAApoCX5ZfkuUtyQgcWYY0MSJtGZM2Dkujecl80cSTYRgyTFOmEYaR7/sKFCjw/Vc8tRdIi1VpoSLNVwItVFzNV10tVSuXTygGRkq+kVFg5XTP9n+k//TUIRlBxNONr3uddP68tLjY4h8COiqblV7/+pYO/cqO9ylYYSYUQLIILCDwZftLsrxFKfC0vijt3SjtXC+lrDCk0pms7FRa6XRGpmXLsmyZK1y55/ueXMdREPhyXVee5yqfc7R+yJHnuZcf53jSxSVppiTNLDmaWXJUd0o6lzJ134ab9OpLTyrrecoGq/woTaWkN75Ruvde6Qqhhy5iGNKb3iTlcpEPfXr0Oj0zEv1ehQA6h8DCQLO8kmxvXgpcbR2XrtsiTQxJhmkqk8kpmysoncmuGFNXYpqW0hlLkvTylTVBEMhzHTUadblOQ7lsXVvGHAVBoEDSbEk6Ny/9NP8WbX/shDJuVWYQKO/7Kvq+skEgrTSzNTkZblb50EPR/jDQWa96lbRtW+TDXMPWX+z8x20YEIA4EVgYSEbgynZnZfpVrS9Kt+4Kw8qybOWLw8oXhmS06dJ3wzBkp9KyUy/cNy4IAjmNuhqNmjKZmtYXa9LWnKrXfkyZk8/IP31apTNnVHJdWZLynqei5ymzXGjdcIM0PS2dPNmW3wPWaPNm6dZbWzr0G1vepfO5yZgHBCBuBBYGjulXZDszSlm+btklXbNJsixLxaFR5QtDiYypeRoynclKQ+F6rka9qkZ9SL7lytyxQ/I86exZeadOaWlqSkuep3QQaMjzVPC8V15L9qY3hWuxLl1K4reE5QwPS299a+Tb4UjSheyEvrHlXW0YFIC4EVgYHEEg25uX5S1oXVF6435pKGsomy9qeGS8bTNWrTBNU9lcQdlcQamhosYWp1StVVXeuVPe9u1SoyGdOKHGkSOanZvTnG2r4Hka8TzZzVmtVEp65zulr35VKpeT/Q2tUWAYqqfTctJpOamUXNuWb1nyTPNyqJi+L8vzZLmubMdRttFQql6XGfVCgXZKpaSf+7lwcXtEgQx9Yc/H5JipNgwMQNyMj9/dTd99gHYJZDsXZfkV7ZuUbtslpSxLY+smlEpH33+o00acBY025hUEgWqNhkrVqir1uoIgkGZmwq0ZTp6U4XnK+76GPU+Z5iL3mRnp61+XHGflF+kyjVRK1UJB1WxW9Uzmhd3KMxlp3bpwY9Vi8YWZIMcJZ+sWFqSlpfDngkC5el25SkX5clm25yXzm5EkywqDd1NrN2X+1uZ36Ms73h/zoAC0C4GF/hf4SjkXZAU13bwjXMieyeY0MrpepmUlPbpVm6ydV8arX/7fnu+rXK2qVK2q4bpStSodOiQdOSLV68r4vsY8T1nfl86dk/7u7yTXXeEVkudZlkrFosqFghrpdBhPW7aEt5HZvz/88fj41e+9uLgonTghHT0qPfFEuHVFEKhQrWpocVHZWq0zv6EmwwhPC+7a1dLh53Kb9H/e+L8zewX0EAIL/e1FcfW6vdKeCSlfGNLw6LqkRxaZHbjaVD0nM3jl9gvVel0L5bJqjUY4k3P0qPTMM1Klopzva9R1lTl9Wvr2t7ty+4ZGJqPFoSGVCwUFphmGyG23hbcAGh2VFM44pixLacuSbVmyDEP284HsP/9tzPU8ub6vhuuq4XlymjNW09PS/feHX5WKMrWaxubmlK3XrzieWBmG9OY3S3v2tHS4Y6b0O9f/R00Vol9xCCA5BBb6liHJakzLDqq6c5+0a4NUHB5VcWg06aG1LO9VtKF2cdlfbziOFisVlarVcLbqZz+Tnn5aqteV9zyNnjih9H33hQvmE+YbhsqFgpaGhtTIZMJTf697XRgjmzbJkJRLp5VPp5VNpWRH3CpDklzfV7XRUKleV911w/i8//5wn7DFRRUqFY3PzsqK6c9jZsLS//U76/TjN+Y0PO/rf/2vC3rf6Zulfftafs7/sfuj+uHGN8QyPgCdQ2Chb9nurCxvSbfvkvZvkoaGx1QYGkl6WGs21pjTsLPyTu2u52m+VFK5VlPQaISzWc88I8N1lX/uOY1+85tKVasdGvFLOamUloaGVCoW5ZtmuCbpTW8K4yqbVca2VcxkVMhkZMZ44UHDdbVUr2upVpPqdem++6R775XZaGj80iUVS6U1Pf/MhKWPfm2Tju5Pv+Tn/9W3dusT397Z0nM+uOEO/fHef7KmcQFIhnXLe3/7t5MeBBC35gai122RbtgqFYZGVBzu3ZmrF6tbWWX9muxg+VkX0zSVz2ZVyGblSXLWr788i+I4jpZ27FB9fl6m68p23bbfcKWRTmtpaEhz4+OaGxtTvVBQcOut0oc+JP3Kr8jYtUvFQkHrikWN5vPK2HbsV3Vapql8Oq1iNivPMOTs2SO9+tUKzpxRpVaTm0opW6229GexXFxJ0kN75mTI0O3Ho73/pgrb9Af7/6V8o3fWCQJ4AYGFvmMGjlLORU2OBLpzn5TLFbpuG4a1MVSx8ip4lSuux3oxyzRVyOWUy2TkGobcjRvD0BoakjsyovLiokrZrFzblgxDtudFv//hFbiWpXoup6WhIc2uW6eFkRHVcjl5+/ZJb3mL9Gu/Jt1xh+wNGzSSy2l9sahiJtPSacCoTMNQIZNRJpVSPZOR/9rXSqapxsmTqubzytVqMiOsU7swaelX/3azjl/zyrhqemjPnMxg9ZG1kBrR7x38lMqp4qrHAaC7cIoQfcVQoFTjOeVtR++5SRrKpbRuYnMfxdULUoGjyer5q0bWi9UaDS2Wy6o2Ggo8T5qaCq8ufOCB8LRZECjtOMrU60o7jmzHke26snxfhue9ZHbHN00FpinHsuTbthqplOrptBqZjLzm1Zm2LR08KN14Y3hrmOFhSQpnkjIZ5VKpRP9uAkkzS0sqNxrSs89Kf/RHMhcWtPHCBWVWsQB+pZmrK1nN6cK6ldH/fd2/06nCjlU9J4DuRGChr6TcGVleSW+/Tto0amjdxGbZdv9e2p71apqoXZChaP+MHdfVUqWiSr0u1/PCjUifeirc5uHEifAWO1G3MjCM8D6I27eHXzt2hP/NZF6yYD2fTse6tioOS7WaLpXLCqanpc9+VubMjDZcuKDcCuvULkxa+sjXNuvEvmjvr9/8u936l/ftvOKv+YapP7zmN/TY+M2RnhNA9yGw0DdMv6KUc0E3bpNetU0aHl2X2K1vOulqVxauJAgC1R1H1Xpd1XJZjcXFF24kPTcnXbwYbt5ZLodfzX20TFPK5aR8XhoZkcbGpImJ8EpAhafhmlsq5DMZZduwpipuddfV9OKi/IUF6bOflTE1pYllIivqzNXLXWkmKzAMfWH3x/TAxJ0tPSeA7kJgoT8EvtLOcxrLunrPTVKhUNTI2PqkR9UxBbes9fWZNT+P57pqzM2pXq3K9X05nifP9+X5/ivmyAw9f+Nq05RlmmFQ2bYytq1UD23g+mKN5yPLK5elz3xGxsmTmpieVu5Fs3mrmbm6Nn2dTrunVPaXvzLx5TNZX97xfn1r8zti+X0ASB73IkRfsLwFmYGr2/dItm1peGQ86SF1VNkuyJSv8frabuxs2bZyGzaEszaVyguzWc9rbujZjKt+k7ZtTY6M6Lwk75OfVPBf/osuBIE2nT+vdKOhmQlLv/Y3m1aMqxvSN+nn8u/UvD+nL5W+qLK/dMXHffbnjyswpE98e6fu2f7LxBXQZ7iKEL3Pd5R2Z7Rrg3RwszQ0Mq50JvrNdHtdw8zINVPKe5W1P1kqFd6Q2PdfsimpYRiXv/qVZZoqZDKqSPJvukl69FFVDUOVYl2/9jcbVzwt2IwrQ4ZyRk57Unt12DksJ2hc8fEP7ZnT06PX67A+2abfDYCktP+aaKDNbPeSbCvQLTukVDqjXH5wL20v2wVdzG5QEMfOVqYpDQ2FV/716Cm/VtmmqYmhIZmjo9InP6mL2wv66P/csuq4ahozx/XB4l0qmMuvBfzu7X+rUwd+P9bxA0gegYWeZgYNWUFV12+RChmjz/YxVAIwAAAR0ElEQVS7ak3FyscXWZKUToeL2AuFq99kuY+kbVsbhoY0t6Oof//nwzq5wn2arxRXTauJrJMHP0NkAX1mcL5boi9Z7rxSlrR/UkpnckqlM0kPqStUrZzO5yblxbkLeC4XhlY+PxihZRgqjwf6jzd8TqeGlr+AYKW4aiKygMEzAN8l0a+MwJXpV3Vgk5S21Te3wolLw0zrXG6TGmZrWwlckWGEgdXPM1qmKeXzmllv6KPr/zcdt6eWfehq4qqJyAIGSx9+d8SgsPySDAXat1FKZ7JKpWIMiT7hGZbO5yZVtgvxPrFhhDNa4+PhGq10H/zZp1LhmrPxcc0U6/po8VM6ap5a9uFR4qqJyAIGB4GF3hQEsrySNo9JhYxUKA4nPaKuFcjQTGa9LmXG41uX9WLpdBhZzdOHvbQg3rJemJEbGZEyGc2Yc/po4bdij6smIgsYDAQWepIR1KXA1c71kmlZSmdySQ+p6y3ZQ5rObZRrtGn7uxfHyuho+GO7C7fas+1wbKOjr4jCdsdVE5EF9D8CCz3J8quyDGnbuJTJ5Ab+ysHVqpsZnctvUinV5q0sXhwx4+PhqbdsNpnZLcsKX/v503/LxV+n4qqJyAL6Wxf+30vg6ky/qg3DUsqSMrl80sPpKb5MzabXqWLlta4+Kyvwrn7QWphmeI/C5+9TqCCQHCe8r6Hrhj+O445dphnGVPPLtsOvVcR3p+OqqRlZK+34fvLgZyRJOw6xGSnQSwgs9CBfRuBoYjjcWTydHrxd2+NQtXJ6Lr9Zo415DTlX/nBvC8MI1229eGF8vR7eTNr3w8Xmtn3lKxSbsWQY4ZdpvvS/LUgqrpqILKA/EVjoOabfkBRow5Bk2SmZ/bhVQIf4MnUpPa6yXdB4/ZLS/pVv6dJ2mUwYVkHQ0dOIScdVE5EF9B8+mdBzjMCRJI3mJdte/qa7WL26mdG53CbNZtbFuzlpFM1TfB3SLXHVxJosoL8QWOg5RuDItqR8msCKW8ku6mx+i+bTo/KN/v320G1x1URkAf2jf7+Dom8Zgafc88t3rG7cBqDHBTK0kBrR2fwWLaRH+i60ujWumogsoD/013dODARDvrLPd5XRZx/+3cSXqfnUqM7kt2ouPZbcqcMYdXtcNRFZQO/j0wk9KJD1/DuXBe7tF8jQYmpYZ/NbdDG7QTWrN6/a7JW4aiKygN7GpxN6ThC05YYvuIpAhipWXtPZjXouv1mLqeGemdXqtbhqIrKA3kVgoQcZ8vzwR0EcG1QiMsdIaS49pjP5rZrObVTJLnZtbPVqXDURWUBvIrDQe0xLDTf8oe+3eRdyXFXNzGo2s05n8lt1PjephdSIGmb66gd2QK/HVRORBfQeAgs9J5Cp6vP7YQa+n+xg8BJ1M6P59KjO5TZpKr9NF7ITWkwNq25mtNKJ3UDGir/ein6JqyYiC+gtXOOOnhPIVt2T6q7kOAntPI6r8g1TVSunqpWTJBkKlPYbSvsNZby6rMBTIEN1K6OSXVQqcLSuPivbd1t+zUCGXNPWtLWoj+f+rY4b/RFXTez4DvQOAgu9x0xLnjRflYp5J+nRYJUCGaqbGdXNjJbsV87CeIals7ktynlVpf2GzODKs5O+YYYzXoYhX6Z8w5RnWJe/5owZ/TvrN3VKJ5YdSy/GVRORBfQGAgs9xzfC9T0zi9LkcCO8qrDFG/2i+7x41iuqMK4+rFM6uuxjejmumogsoPuxBgs9JzAs+bJ1YSm8irBRryU9JHSBQYmrJtZkAd2NwEJPCqyczs9LXiDV69Wkh4OEDVpcNRFZQPcisNCTfDMv15fOzUu1Spn9sAbYoMZVE5EFdCcCCz3JN7MKZOrExXAvLE4TDqZBj6smIgvoPgQWepQhzyxoajbcrqFaKSU9IHQYcfVSRBbQXQgs9CzfHpIXSEempXqtIs9rff8k9Bbi6sqILKB7EFjoWYGRlm9kdeic5PqBSovzSQ8JHUBcrYzIAroDgYWe5qVGVW1IR8+Hpwldl41H+xlxtTpEFpA8Ags9zTey8o2MHj8jOZ60tDCX9JDQJsRVNEQWkCwCCz3Ps8dVd6Snz4Zrseq1ZPfFqqqiY8YzqosrG+Myq2n9lvmhFePqxvTNxNXLjJnj+kDhQyqYxWUfE0bW5zo4KmAwEFjoeb6ZkW8V9fRZab4iLczNJLYv1j3mH+sD9u36DesX9EH7tfq2cU8i4+gns5rWv7V+VWeM48s+5sb0zXp7/ueJqysYt9bpA4W7rhJZnyaygJhZt7z3t3876UEAaxUYGZl+WXPlQLsnAvmep2wu39ExfMn8vD5v/o5chVczOmroQfM+jQRj2q9XdXQs/WLOmNG/tz+iKePYso/htODV5cy89qT26bBzWE7QuOJj5jf8WEZganTmNR0eHdCfCCz0B8OUZKlWq8g0pPFcQ3YqJTuV7sjL/6n5Of2x+f9c8dd+Yv5AY8F6XaMbOjKWfjGraX3K+vCKccVpwdXLGTnttvfoiPuzq0SWpdGZ2zs8OqD/EFjoG4GZlhk4ujDvaHJUslVTJpuTZVltfd0vmZ9fNq6a/sH8PjNZETBz1R7MZAGdQ2Chr/hWTqZf0XNzvnauC+Q3KsrlizLM9iw3XGnm6uWYyVodZq7ai5ksoDMILPQZQ4GZk1cvaXpR2rUhUKNeVS5XiD2yVjNz9XLMZK2MmavOYCYLaD8CC30nMCzJzKheq2h2Sdq+zpfr1JXNFWQY8Xwof8n8vP7I/M8tHfsT8wdE1hWwz1Vn5Yyc9qT2EllAmxBY6EuBkZIMW5VqVfMVaeuoJ6dRUzabX/NM1tVOCxbMon4u905NuacuX1H4cpwufClOCyaD04VA+xBY6FuBmZYMU6VyVZfK0pZRT069qnQ2J9NsbeH71U4LFoyC3l+8S9tTO7UztVuHnUPLRhanC0OcFkwWpwuB9iCw0NcCMyMZlsqVmi4sSltGfbmNilKpjCzbjvRcVzst2Iyrddb68H+bRe1M7Voxsgb9dCGnBbsDpwuB+BFY6HuBmVFgpFSrVnV6Vto4HChwSjIMQ+lMdlXPETWuLv88kbUs4qq7EFlAvAgsDITATCuwcnLqVZ24GGgkL2XNmhynrkwmt+K6rFbj6vKvE1mvQFx1JyILiA+BhYERGLZ8qyD5dZ2+6KnmSBuKrmrVkizLUuoKu76vNa4uP47Iuoy46m5EFhAPAguDxTDlWUVJgS4t1TU1K40XAll+RY7bUCqVvrwAPq64uvx4Iou46hFEFrB2BBYGkCHfzCkw0mo0ajp2IZDjSWM5R/XKknzf01/n/ofutn532WeIGleXjxvgyCKueguRBawNgYWBFZgpefaQFHiaXWzoyLQUSLp/4k/0p/nfX/a4VuPq8vEDGFnEVW8isoDWEVgYcIZ8K6/AystzHf1485/phzs/v+yj1xpXl59ngCKLuOptRBbQGgILUHh7nVPXflHHbvyvyz4mrri6/HwDEFnEVX8gsoDoCCxA0tQ1n9fx6+Nb0L5a/RxZxFV/IbKAaAgsDLyk4ury8/dhZBFX/YnIAlaPwMJASzquLr9OH0UWcdXfiCxgdQgsDKxuiavLr9cHkUVcDQYiC7g6AgsDqdvi6vLrrjKyhoNRHeiyyCKuBguRBayMwMLA6da4uvz6q4qsv++qyCKuBhORBSyPwMJA6fa4ujyOHoos4mqwEVnAlRFYGBi9EldNvRBZxBUkIgu4EgILA6HX4qpptZFV9IZ0QDfJMDoXMcQVXozIAl6KwELf69W4alpNZD1s/VDGQqDNc1tVr1XUqNfkug15nivPdRUokBTINM1YxkRc4UqILOAFBBb6Wq/HVdNqIuuJ3E9UnStq3dxeOU5DvltTo1ZRrVpWtbykSmlR5dKCKuUlVSvlyyHWaNTkOPXwGM+V53kKfF++7ysIfCkIb4LdnB0jrrASIgsIGR+/OwiSHgTQDv0SVy92wZvWl0t/rlpQXeYRhq59+BPaduQfyZBUyEj5tJRNSbm0lE2/8L+bP5e2pdQqJ7YWrDn9zuSndNY+texjiCtI0px/SV8qfVFlf2nZx+x85l9rx6FPdnBUQOcQWOhL/RhXTauJrGse+w/aduR9MuRJvhv+N/BkyL/yEYaUsaWULWWsMLrSz/9vS5JlSfXcnP7y+k9pJkdcYXWILAwyAgt9p5/jqmk1kbXv8f9Dm4999GU/H8gIPClwZcgPfyxfRuBL8sMIC3wZRiAFfvilQI3sJT3ytt9SaZi4QjREFgYVa7DQVwYhrqTVrcm6NPn3SjdGNTT34i0cDMkwJcNWYKQUmBkFZla+mZNv5uVbBflWUZ41JM8almePqFp09Ohb/rnKwyeWHQ9xheWwJguDisBC3xiUuGpqPbJWr5Gd0eNv+LAqQyxoR+uILAwiAgt9YdDiqqmdkUVcIU5EFgYNgYWeN6hx1dSOyCKu0A5EFgYJgYWeNuhx1RRnZBFXaCciC4OCwELPIq5eKo7IIq7QCUQWBgGBhZ5EXF3ZWiKLuEInEVnodwQWeg5xtbJWIou4QhKILPQzAgs9hbhanSiRlaluIa6QGCIL/Yqd3NEzTh34nE4e/PSyv14wi/pA4S6NW+s6OKruNu2d01dKf6FaUFvmEYbStQk1stPLPseN6Zv19vzPE1doq0verP6y/EWV/dKyj9n5zL/RjkOf6OCogNat8havQLKmrvn8ynFlFPT+woeIq5fZaG3S+4t3KWvklnlEsGJc3ZC+ibhCR4xb6/TB4odVMIeWfczJg5/WqQO/38FRAa0jsND1Th343MqnBc2iPlD88MCfFlzOhLVR7yt+UFkjG+m4G9M3c1oQHTVmjusDhQ+pYBaXfczJg5/RqQOf6+CogNYQWOhqzFzF4+ozWS/FzBWSwkwW+gWBha7FzFW8VjuTxcwVksZMFvoBgYWuxMxVe1xtJouZK3QLZrLQ6wgsdB1mrtrrhZmsl0bWTZlbmLlCV2EmC72MbRrQVdiKoXOW/CU92fipqkFVO+xd2pval/SQgCtiCwf0IgILXYNNRAEsZ86/pC+Vvqiyv7TsY3Y+86+149AnOzgqYHmcIkRXIK4ArGTMHNcHi3ddZU3WZ1iTha5BYCFxxBWA1SCy0EsILCSKuAIQBZGFXkFgITHEFYBWEFnoBQQWEkFcAVgLIgvdjsBCxxFXAOJAZKGbEVjoKOIKQJyILHQrAgsdQ1wBaAciC92IwEJHEFcA2onIQrchsNB2xBWATiCy0E0ILLQVcQWgk4gsdAsCC21DXAFIApGFbkBgoS2IKwBJIrKQNAILsSOuAHQDIgtJIrAQK+IKQDchspAUAguxIa4AdCMiC0kgsBAL4gpANyOy0GkEFtaMuALQC4gsdBKBhTUhrgD0EiILnUJgoWXEFYBeRGShEwgstIS4AtDLiCy0G4GFyIgrAP2AyEI7EViIhLgC0E+ILLQLgYVVI64A9CMiC+1AYGFViCsA/YzIQtwILFwVcQVgEBBZiBOBhRURVwAGCZGFuBBYWBZxBWAQEVmIA4GFKyKuAAwyIgtrRWDhFYgrACCysDYEFl6CuAKAFxBZaBWBhcuIKwB4JSILrSCwIIm4AoCVEFmIisACcQUAq0BkIQoCa8ARVwCwekQWVstOegBIzqkDn9PJg59e8TFFc1g/qt3foREBQG8oGkWVtbTsr588+BlJhnYc+kTnBoWuQmANqOd2/dlV40qSpr1zmvbOdWBEANBfTh78tFL1MW0+8eGkh4IEcIpwAAWmp5PX/V7SwwCAvnfyut9TYHpJDwMJILAGkJtalJNeSHoYAND3nPSC3NRi0sNAAgisAZSqjypX2pH0MACg7+VKO5SqjyY9DCSAwBpIhvY/8ruyneGkBwIAfct2hrX/kd+VZCQ9FCTA+PjdQZD0IJAMNz2vSxM/lJcqJz0UAOgrllPQ+IU3yG4wezWouIpwgNmNUU2c+YWkhwEAQN/hFCEAAEDMCCwAAICYEVgAAAAxI7AAAABiRmABAADEjMACAACIGYEFAAAQMwILAAAgZgQWAABAzAgsAACAmBFYAAAAMSOwAAAAYkZgAQAAxIzAAgAAiBmBBQAAEDMCCwAAIGYEFgAAQMz+f70FRvmTmo4QAAAAAElFTkSuQmCC";var img$1="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8' standalone='no'%3f%3e%3csvg version='1.1' width='14.022916mm' height='14.022916mm' viewBox='0 0 28.045832 28.045832' id='svg4' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3e %3cdefs id='defs4' /%3e %3cg id='g4' transform='matrix(0.11400745%2c0%2c0%2c0.11400745%2c-12.540819%2c-10.7167)'%3e %3cg id='rect' style='display:none'%3e %3cpath d='m 120%2c340 q 10%2c0 113%2c0 103%2c0 113%2c0 10%2c0 10%2c-10 0%2c-10 0%2c-113 0%2c-103 0%2c-113 0%2c-10 -10%2c-10 -10%2c0 -113%2c0 -103%2c0 -113%2c0 -10%2c0 -10%2c10 0%2c10 0%2c113 0%2c103 0%2c113 0%2c10 10%2c10 z' fill-opacity='1' fill='%23649dff' stroke-linejoin='round' stroke-linecap='round' stroke-opacity='1' stroke-width='0' stroke='black' id='path1' /%3e %3c/g%3e %3cg id='sun'%3e %3cpath d='m 230%2c240 q 0%2c0 2.5%2c0 2.5%2c0 4.9863%2c-0.26132 2.48631%2c-0.26132 4.93168%2c-0.7811 2.44537%2c-0.51978 4.82301%2c-1.29232 2.37764%2c-0.77255 4.6615%2c-1.78939 2.28387%2c-1.01684 4.44893%2c-2.26684 2.16506%2c-1.25 4.18761%2c-2.71946 2.02254%2c-1.46947 3.8804%2c-3.14229 1.85786%2c-1.67283 3.53069%2c-3.53069 1.67283%2c-1.85786 3.14229%2c-3.8804 1.46946%2c-2.02255 2.71946%2c-4.18761 1.25%2c-2.16506 2.26684%2c-4.44893 1.01685%2c-2.28386 1.78939%2c-4.6615 0.77254%2c-2.37764 1.29232%2c-4.82301 0.51978%2c-2.44537 0.7811%2c-4.93168 0.26132%2c-2.4863 0.26132%2c-4.9863 0%2c-2.5 -0.26132%2c-4.98631 -0.26132%2c-2.4863 -0.7811%2c-4.93167 -0.51978%2c-2.44537 -1.29232%2c-4.82301 -0.77254%2c-2.37764 -1.78939%2c-4.66151 -1.01684%2c-2.28386 -2.26684%2c-4.44892 -1.25%2c-2.16507 -2.71946%2c-4.18761 -1.46946%2c-2.02254 -3.14229%2c-3.8804 -1.67283%2c-1.85787 -3.53069%2c-3.53069 -1.85786%2c-1.67283 -3.8804%2c-3.14229 -2.02255%2c-1.46946 -4.18761%2c-2.71946 -2.16506%2c-1.25 -4.44893%2c-2.26685 -2.28386%2c-1.01684 -4.6615%2c-1.78938 -2.37764%2c-0.77254 -4.82301%2c-1.29232 -2.44537%2c-0.51978 -4.93168%2c-0.7811 -2.4863%2c-0.26132 -4.9863%2c-0.26132 -2.5%2c0 -4.9863%2c0.26132 -2.48631%2c0.26132 -4.93168%2c0.7811 -2.44537%2c0.51978 -4.82301%2c1.29232 -2.37764%2c0.77254 -4.6615%2c1.78938 -2.28387%2c1.01685 -4.44893%2c2.26685 -2.16506%2c1.25 -4.18761%2c2.71946 -2.02254%2c1.46946 -3.8804%2c3.14229 -1.85786%2c1.67282 -3.53069%2c3.53069 -1.67283%2c1.85786 -3.14229%2c3.8804 -1.46946%2c2.02254 -2.71946%2c4.18761 -1.25%2c2.16506 -2.26684%2c4.44892 -1.01685%2c2.28387 -1.78939%2c4.66151 -0.77254%2c2.37764 -1.29232%2c4.82301 -0.51978%2c2.44537 -0.7811%2c4.93167 -0.26132%2c2.48631 -0.26132%2c4.98631 0%2c2.5 0.26132%2c4.9863 0.26132%2c2.48631 0.7811%2c4.93168 0.51978%2c2.44537 1.29232%2c4.82301 0.77254%2c2.37764 1.78939%2c4.6615 1.01684%2c2.28387 2.26684%2c4.44893 1.25%2c2.16506 2.71946%2c4.18761 1.46946%2c2.02254 3.14229%2c3.8804 1.67283%2c1.85786 3.53069%2c3.53069 1.85786%2c1.67282 3.8804%2c3.14229 2.02255%2c1.46946 4.18761%2c2.71946 2.16506%2c1.25 4.44893%2c2.26684 2.28386%2c1.01684 4.6615%2c1.78939 2.37764%2c0.77254 4.82301%2c1.29232 2.44537%2c0.51978 2.44537%2c0.51978' fill-opacity='1' fill='red' stroke-linejoin='round' stroke-linecap='round' stroke-opacity='1' stroke-width='8' stroke='%23ff6464' id='path2' /%3e %3c/g%3e %3cg id='cloud'%3e %3cpath d='m 219.24084%2c271.8692 q 20.24083%2c-0.13079 32.801%2c-13.80309 12.56017%2c-13.67229 1.37931%2c-27.38375 -11.18086%2c-13.71146 -26.10309%2c-6.8054 -14.92222%2c6.90606 -26.43448%2c0.5 -11.51227%2c-6.40607 -24.86381%2c-7.53504 -13.35153%2c-1.12898 -21.4001%2c10.78438 -8.04857%2c11.91335 -1.1315%2c23.6516 6.91708%2c11.73825 26.21446%2c16.23017 Q 199%2c272 219.24084%2c271.8692 Z' fill-opacity='0.8' fill='white' stroke-linejoin='round' stroke-linecap='round' stroke-opacity='0.25' stroke-width='2' stroke='grey' id='path3' /%3e %3c/g%3e %3cg id='mountain'%3e %3cpath d='m 120%2c310 56.56854%2c-56.56854 28.28427%2c28.28427 56.56855%2c-56.56854 L 346.27417%2c310 Z' fill-opacity='1' fill='%2398ff9b' stroke-linejoin='round' stroke-linecap='round' stroke-opacity='1' stroke-width='4' stroke='%2325ef22' id='path4' /%3e %3c/g%3e %3c/g%3e%3c/svg%3e";var en$1={"xcxVPen.entry.name":"Vector Pen","xcxVPen.entry.description":"Draw SVG paths like the pen extension"};var ja$1={"xcxVPen.entry.name":"ベクター ペン","xcxVPen.entry.description":"ペン拡張機能のようにSVGパスを描く"};var translations$1={en:en$1,ja:ja$1,"ja-Hira":{"xcxVPen.entry.name":"ベクター ペン","xcxVPen.entry.description":"ペン ブロック の ように SVG パス を えがく"}};/**
 * This is an extension for Xcratch.
 *//**
 * Formatter to translate the messages in this extension.
 * This will be replaced which is used in the React component.
 * @param {object} messageData - data for format-message
 * @returns {string} - translated message for the current locale
 */var formatMessage$1=function formatMessage(messageData){return messageData.defaultMessage;};var entry={get name(){return formatMessage$1({id:'xcxVPen.entry.name',defaultMessage:'Vector Pen',description:'name of the extension'});},extensionId:'xcxVPen',extensionURL:'https://yokobond.github.io/xcx-vpen/dist/xcxVPen.mjs',collaborator:'yokobond',iconURL:img$2,insetIconURL:img$1,get description(){return formatMessage$1({defaultMessage:'Draw SVG paths like the pen extension',description:'Description for this extension',id:'xcxVPen.entry.description'});},tags:['image','vector','pen','svg'],featured:true,disabled:false,bluetoothRequired:false,internetConnectionRequired:false,helpLink:'https://yokobond.github.io/xcx-vpen/',setFormatMessage:function setFormatMessage(formatter){formatMessage$1=formatter;},translationMap:translations$1};function _arrayLikeToArray$6(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray$6(r);}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r);}function _unsupportedIterableToArray$6(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray$6(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$6(r,a):void 0;}}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray$6(r)||_nonIterableSpread();}function _arrayWithHoles(r){if(Array.isArray(r))return r;}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t["return"]&&(u=t["return"](),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray$6(r,e)||_nonIterableRest();}function _classCallCheck$1(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function");}function _typeof$1(o){"@babel/helpers - typeof";return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof$1(o);}function toPrimitive$1(t,r){if("object"!=_typeof$1(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof$1(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function toPropertyKey$1(t){var i=toPrimitive$1(t,"string");return"symbol"==_typeof$1(i)?i:i+"";}function _defineProperties$1(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,toPropertyKey$1(o.key),o);}}function _createClass$1(e,r,t){return r&&_defineProperties$1(e.prototype,r),t&&_defineProperties$1(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;}var commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,'default')?x['default']:x;}function getAugmentedNamespace(n){if(n.__esModule)return n;var f=n.default;if(typeof f=="function"){var a=function a(){if(this instanceof a){return Reflect.construct(f,arguments,this.constructor);}return f.apply(this,arguments);};a.prototype=f.prototype;}else a={};Object.defineProperty(a,'__esModule',{value:true});Object.keys(n).forEach(function(k){var d=Object.getOwnPropertyDescriptor(n,k);Object.defineProperty(a,k,d.get?d:{enumerable:true,get:function(){return n[k];}});});return a;}/**
 * Types of block
 * @enum {string}
 */var BlockType={/**
   * Boolean reporter with hexagonal shape
   */BOOLEAN:'Boolean',/**
   * A button (not an actual block) for some special action, like making a variable
   */BUTTON:'button',/**
   * Command block
   */COMMAND:'command',/**
   * Specialized command block which may or may not run a child branch
   * The thread continues with the next block whether or not a child branch ran.
   */CONDITIONAL:'conditional',/**
   * Specialized hat block with no implementation function
   * This stack only runs if the corresponding event is emitted by other code.
   */EVENT:'event',/**
   * Hat block which conditionally starts a block stack
   */HAT:'hat',/**
   * Specialized command block which may or may not run a child branch
   * If a child branch runs, the thread evaluates the loop block again.
   */LOOP:'loop',/**
   * General reporter with numeric or string value
   */REPORTER:'reporter'};var blockType=BlockType;var BlockType$1=/*@__PURE__*/getDefaultExportFromCjs(blockType);/**
 * Block argument types
 * @enum {string}
 */var ArgumentType={/**
   * Numeric value with angle picker
   */ANGLE:'angle',/**
   * Boolean value with hexagonal placeholder
   */BOOLEAN:'Boolean',/**
   * Numeric value with color picker
   */COLOR:'color',/**
   * Numeric value with text field
   */NUMBER:'number',/**
   * String value with text field
   */STRING:'string',/**
   * String value with matrix field
   */MATRIX:'matrix',/**
   * MIDI note number with note picker (piano) field
   */NOTE:'note',/**
   * Inline image on block (as part of the label)
   */IMAGE:'image'};var argumentType=ArgumentType;var ArgumentType$1=/*@__PURE__*/getDefaultExportFromCjs(argumentType);function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function");}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}function toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r);if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return String(t);}function toPropertyKey(t){var i=toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+"";}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,toPropertyKey(o.key),o);}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;}var Color$2=/*#__PURE__*/function(){function Color(){_classCallCheck(this,Color);}return _createClass(Color,null,[{key:"RGB_BLACK",get:/**
     * @typedef {object} RGBObject - An object representing a color in RGB format.
     * @property {number} r - the red component, in the range [0, 255].
     * @property {number} g - the green component, in the range [0, 255].
     * @property {number} b - the blue component, in the range [0, 255].
     *//**
     * @typedef {object} HSVObject - An object representing a color in HSV format.
     * @property {number} h - hue, in the range [0-359).
     * @property {number} s - saturation, in the range [0,1].
     * @property {number} v - value, in the range [0,1].
     *//** @type {RGBObject} */function get(){return{r:0,g:0,b:0};}/** @type {RGBObject} */},{key:"RGB_WHITE",get:function get(){return{r:255,g:255,b:255};}/**
     * Convert a Scratch decimal color to a hex string, #RRGGBB.
     * @param {number} decimal RGB color as a decimal.
     * @return {string} RGB color as #RRGGBB hex string.
     */},{key:"decimalToHex",value:function decimalToHex(decimal){if(decimal<0){decimal+=0xFFFFFF+1;}var hex=Number(decimal).toString(16);hex="#".concat('000000'.substr(0,6-hex.length)).concat(hex);return hex;}/**
     * Convert a Scratch decimal color to an RGB color object.
     * @param {number} decimal RGB color as decimal.
     * @return {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
     */},{key:"decimalToRgb",value:function decimalToRgb(decimal){var a=decimal>>24&0xFF;var r=decimal>>16&0xFF;var g=decimal>>8&0xFF;var b=decimal&0xFF;return{r:r,g:g,b:b,a:a>0?a:255};}/**
     * Convert a hex color (e.g., F00, #03F, #0033FF) to an RGB color object.
     * CC-BY-SA Tim Down:
     * https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb
     * @param {!string} hex Hex representation of the color.
     * @return {RGBObject} null on failure, or rgb: {r: red [0,255], g: green [0,255], b: blue [0,255]}.
     */},{key:"hexToRgb",value:function hexToRgb(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b;});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;}/**
     * Convert an RGB color object to a hex color.
     * @param {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
     * @return {!string} Hex representation of the color.
     */},{key:"rgbToHex",value:function rgbToHex(rgb){return Color.decimalToHex(Color.rgbToDecimal(rgb));}/**
     * Convert an RGB color object to a Scratch decimal color.
     * @param {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
     * @return {!number} Number representing the color.
     */},{key:"rgbToDecimal",value:function rgbToDecimal(rgb){return(rgb.r<<16)+(rgb.g<<8)+rgb.b;}/**
    * Convert a hex color (e.g., F00, #03F, #0033FF) to a decimal color number.
    * @param {!string} hex Hex representation of the color.
    * @return {!number} Number representing the color.
    */},{key:"hexToDecimal",value:function hexToDecimal(hex){return Color.rgbToDecimal(Color.hexToRgb(hex));}/**
     * Convert an HSV color to RGB format.
     * @param {HSVObject} hsv - {h: hue [0,360), s: saturation [0,1], v: value [0,1]}
     * @return {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
     */},{key:"hsvToRgb",value:function hsvToRgb(hsv){var h=hsv.h%360;if(h<0)h+=360;var s=Math.max(0,Math.min(hsv.s,1));var v=Math.max(0,Math.min(hsv.v,1));var i=Math.floor(h/60);var f=h/60-i;var p=v*(1-s);var q=v*(1-s*f);var t=v*(1-s*(1-f));var r;var g;var b;switch(i){default:case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;case 4:r=t;g=p;b=v;break;case 5:r=v;g=p;b=q;break;}return{r:Math.floor(r*255),g:Math.floor(g*255),b:Math.floor(b*255)};}/**
     * Convert an RGB color to HSV format.
     * @param {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
     * @return {HSVObject} hsv - {h: hue [0,360), s: saturation [0,1], v: value [0,1]}
     */},{key:"rgbToHsv",value:function rgbToHsv(rgb){var r=rgb.r/255;var g=rgb.g/255;var b=rgb.b/255;var x=Math.min(Math.min(r,g),b);var v=Math.max(Math.max(r,g),b);// For grays, hue will be arbitrarily reported as zero. Otherwise, calculate
var h=0;var s=0;if(x!==v){var f=r===x?g-b:g===x?b-r:r-g;var i=r===x?3:g===x?5:1;h=(i-f/(v-x))*60%360;s=(v-x)/v;}return{h:h,s:s,v:v};}/**
     * Linear interpolation between rgb0 and rgb1.
     * @param {RGBObject} rgb0 - the color corresponding to fraction1 <= 0.
     * @param {RGBObject} rgb1 - the color corresponding to fraction1 >= 1.
     * @param {number} fraction1 - the interpolation parameter. If this is 0.5, for example, mix the two colors equally.
     * @return {RGBObject} the interpolated color.
     */},{key:"mixRgb",value:function mixRgb(rgb0,rgb1,fraction1){if(fraction1<=0)return rgb0;if(fraction1>=1)return rgb1;var fraction0=1-fraction1;return{r:fraction0*rgb0.r+fraction1*rgb1.r,g:fraction0*rgb0.g+fraction1*rgb1.g,b:fraction0*rgb0.b+fraction1*rgb1.b};}}]);}();var color$3=Color$2;var Color$1=color$3;/**
 * @fileoverview
 * Utilities for casting and comparing Scratch data-types.
 * Scratch behaves slightly differently from JavaScript in many respects,
 * and these differences should be encapsulated below.
 * For example, in Scratch, add(1, join("hello", world")) -> 1.
 * This is because "hello world" is cast to 0.
 * In JavaScript, 1 + Number("hello" + "world") would give you NaN.
 * Use when coercing a value before computation.
 */var Cast$1=/*#__PURE__*/function(){function Cast(){_classCallCheck(this,Cast);}return _createClass(Cast,null,[{key:"toNumber",value:/**
     * Scratch cast to number.
     * Treats NaN as 0.
     * In Scratch 2.0, this is captured by `interp.numArg.`
     * @param {*} value Value to cast to number.
     * @return {number} The Scratch-casted number value.
     */function toNumber(value){// If value is already a number we don't need to coerce it with
// Number().
if(typeof value==='number'){// Scratch treats NaN as 0, when needed as a number.
// E.g., 0 + NaN -> 0.
if(Number.isNaN(value)){return 0;}return value;}if(typeof value==='string'){// Replace full-width numbers with half-width ones.
value=value.replace(/[０-９＋．ｅ]/g,function(s){return String.fromCharCode(s.charCodeAt(0)-0xFEE0);});value=value.replace(/[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]/g,'-');}var n=Number(value);if(Number.isNaN(n)){// Scratch treats NaN as 0, when needed as a number.
// E.g., 0 + NaN -> 0.
return 0;}return n;}/**
     * Scratch cast to boolean.
     * In Scratch 2.0, this is captured by `interp.boolArg.`
     * Treats some string values differently from JavaScript.
     * @param {*} value Value to cast to boolean.
     * @return {boolean} The Scratch-casted boolean value.
     */},{key:"toBoolean",value:function toBoolean(value){// Already a boolean?
if(typeof value==='boolean'){return value;}if(typeof value==='string'){// These specific strings are treated as false in Scratch.
if(value===''||value==='0'||value.toLowerCase()==='false'){return false;}// All other strings treated as true.
return true;}// Coerce other values and numbers.
return Boolean(value);}/**
     * Scratch cast to string.
     * @param {*} value Value to cast to string.
     * @return {string} The Scratch-casted string value.
     */},{key:"toString",value:function toString(value){return String(value).replace(/\\n/g,'\n').replace(/\\t/g,'\t');}/**
     * Cast any Scratch argument to an RGB color array to be used for the renderer.
     * @param {*} value Value to convert to RGB color array.
     * @return {Array.<number>} [r,g,b], values between 0-255.
     */},{key:"toRgbColorList",value:function toRgbColorList(value){var color=Cast.toRgbColorObject(value);return[color.r,color.g,color.b];}/**
     * Cast any Scratch argument to an RGB color object to be used for the renderer.
     * @param {*} value Value to convert to RGB color object.
     * @return {RGBOject} [r,g,b], values between 0-255.
     */},{key:"toRgbColorObject",value:function toRgbColorObject(value){var color;if(typeof value==='string'&&value.substring(0,1)==='#'){color=Color$1.hexToRgb(value);// If the color wasn't *actually* a hex color, cast to black
if(!color)color={r:0,g:0,b:0,a:255};}else{color=Color$1.decimalToRgb(Cast.toNumber(value));}return color;}/**
     * Determine if a Scratch argument is a white space string (or null / empty).
     * @param {*} val value to check.
     * @return {boolean} True if the argument is all white spaces or null / empty.
     */},{key:"isWhiteSpace",value:function isWhiteSpace(val){return val===null||typeof val==='string'&&val.trim().length===0;}/**
     * Compare two values, using Scratch cast, case-insensitive string compare, etc.
     * In Scratch 2.0, this is captured by `interp.compare.`
     * @param {*} v1 First value to compare.
     * @param {*} v2 Second value to compare.
     * @returns {number} Negative number if v1 < v2; 0 if equal; positive otherwise.
     */},{key:"compare",value:function compare(v1,v2){var n1=Number(v1);var n2=Number(v2);if(n1===0&&Cast.isWhiteSpace(v1)){n1=NaN;}else if(n2===0&&Cast.isWhiteSpace(v2)){n2=NaN;}if(isNaN(n1)||isNaN(n2)){// At least one argument can't be converted to a number.
// Scratch compares strings as case insensitive.
var s1=Cast.toString(v1).toLowerCase();var s2=Cast.toString(v2).toLowerCase();if(s1<s2){return-1;}else if(s1>s2){return 1;}return 0;}// Handle the special case of Infinity
if(n1===Infinity&&n2===Infinity||n1===-Infinity&&n2===-Infinity){return 0;}// Compare as numbers.
return n1-n2;}/**
     * Determine if a Scratch argument number represents a round integer.
     * @param {*} val Value to check.
     * @return {boolean} True if number looks like an integer.
     */},{key:"isInt",value:function isInt(val){// Values that are already numbers.
if(typeof val==='number'){if(isNaN(val)){// NaN is considered an integer.
return true;}// True if it's "round" (e.g., 2.0 and 2).
return val===parseInt(val,10);}else if(typeof val==='boolean'){// `True` and `false` always represent integer after Scratch cast.
return true;}else if(typeof val==='string'){// If it contains a decimal point, don't consider it an int.
return val.indexOf('.')<0;}return false;}},{key:"LIST_INVALID",get:function get(){return'INVALID';}},{key:"LIST_ALL",get:function get(){return'ALL';}/**
     * Compute a 1-based index into a list, based on a Scratch argument.
     * Two special cases may be returned:
     * LIST_ALL: if the block is referring to all of the items in the list.
     * LIST_INVALID: if the index was invalid in any way.
     * @param {*} index Scratch arg, including 1-based numbers or special cases.
     * @param {number} length Length of the list.
     * @param {boolean} acceptAll Whether it should accept "all" or not.
     * @return {(number|string)} 1-based index for list, LIST_ALL, or LIST_INVALID.
     */},{key:"toListIndex",value:function toListIndex(index,length,acceptAll){if(typeof index!=='number'){if(index==='all'){return acceptAll?Cast.LIST_ALL:Cast.LIST_INVALID;}if(index==='last'){if(length>0){return length;}return Cast.LIST_INVALID;}else if(index==='random'||index==='any'){if(length>0){return 1+Math.floor(Math.random()*length);}return Cast.LIST_INVALID;}}index=Math.floor(Cast.toNumber(index));if(index<1||index>length){return Cast.LIST_INVALID;}return index;}}]);}();var cast=Cast$1;var Cast$2=/*@__PURE__*/getDefaultExportFromCjs(cast);/**
 * Default types of Target supported by the VM
 * @enum {string}
 */var TargetType={/**
   * Rendered target which can move, change costumes, etc.
   */SPRITE:'sprite',/**
   * Rendered target which cannot move but can change backdrops
   */STAGE:'stage'};var targetType=TargetType;var TargetType$1=/*@__PURE__*/getDefaultExportFromCjs(targetType);function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}function _possibleConstructorReturn$1(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(t);}function _getPrototypeOf$1(t){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t);},_getPrototypeOf$1(t);}function _setPrototypeOf$1(t,e){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t;},_setPrototypeOf$1(t,e);}function _inherits$1(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$1(t,e);}var MathUtil$1=/*#__PURE__*/function(){function MathUtil(){_classCallCheck(this,MathUtil);}return _createClass(MathUtil,null,[{key:"degToRad",value:/**
     * Convert a value from degrees to radians.
     * @param {!number} deg Value in degrees.
     * @return {!number} Equivalent value in radians.
     */function degToRad(deg){return deg*Math.PI/180;}/**
     * Convert a value from radians to degrees.
     * @param {!number} rad Value in radians.
     * @return {!number} Equivalent value in degrees.
     */},{key:"radToDeg",value:function radToDeg(rad){return rad*180/Math.PI;}/**
     * Clamp a number between two limits.
     * If n < min, return min. If n > max, return max. Else, return n.
     * @param {!number} n Number to clamp.
     * @param {!number} min Minimum limit.
     * @param {!number} max Maximum limit.
     * @return {!number} Value of n clamped to min and max.
     */},{key:"clamp",value:function clamp(n,min,max){return Math.min(Math.max(n,min),max);}/**
     * Keep a number between two limits, wrapping "extra" into the range.
     * e.g., wrapClamp(7, 1, 5) == 2
     * wrapClamp(0, 1, 5) == 5
     * wrapClamp(-11, -10, 6) == 6, etc.
     * @param {!number} n Number to wrap.
     * @param {!number} min Minimum limit.
     * @param {!number} max Maximum limit.
     * @return {!number} Value of n wrapped between min and max.
     */},{key:"wrapClamp",value:function wrapClamp(n,min,max){var range=max-min+1;return n-Math.floor((n-min)/range)*range;}/**
     * Convert a value from tan function in degrees.
     * @param {!number} angle in degrees
     * @return {!number} Correct tan value
     */},{key:"tan",value:function tan(angle){angle=angle%360;switch(angle){case-270:case 90:return Infinity;case-90:case 270:return-Infinity;default:return parseFloat(Math.tan(Math.PI*angle/180).toFixed(10));}}/**
     * Given an array of unique numbers,
     * returns a reduced array such that each element of the reduced array
     * represents the position of that element in a sorted version of the
     * original array.
     * E.g. [5, 19. 13, 1] => [1, 3, 2, 0]
     * @param {Array<number>} elts The elements to sort and reduce
     * @return {Array<number>} The array of reduced orderings
     */},{key:"reducedSortOrdering",value:function reducedSortOrdering(elts){var sorted=elts.slice(0).sort(function(a,b){return a-b;});return elts.map(function(e){return sorted.indexOf(e);});}/**
     * Return a random number given an inclusive range and a number in that
     * range that should be excluded.
     *
     * For instance, (1, 5, 3) will only pick 1, 2, 4, or 5 (with equal
     * probability)
     *
     * @param {number} lower - The lower bound (inlcusive)
     * @param {number} upper - The upper bound (inclusive), such that lower <= upper
     * @param {number} excluded - The number to exclude (MUST be in the range)
     * @return {number} A random integer in the range [lower, upper] that is not "excluded"
     */},{key:"inclusiveRandIntWithout",value:function inclusiveRandIntWithout(lower,upper,excluded){// Note that subtraction is the number of items in the
// inclusive range [lower, upper] minus 1 already
// (e.g. in the set {3, 4, 5}, 5 - 3 = 2).
var possibleOptions=upper-lower;var randInt=lower+Math.floor(Math.random()*possibleOptions);if(randInt>=excluded){return randInt+1;}return randInt;}/**
     * Scales a number from one range to another.
     * @param {number} i number to be scaled
     * @param {number} iMin input range minimum
     * @param {number} iMax input range maximum
     * @param {number} oMin output range minimum
     * @param {number} oMax output range maximum
     * @return {number} scaled number
     */},{key:"scale",value:function scale(i,iMin,iMax,oMin,oMax){var p=(i-iMin)/(iMax-iMin);return p*(oMax-oMin)+oMin;}}]);}();var mathUtil=MathUtil$1;var web={exports:{}};var minilog$2={exports:{}};function M(){this._events={};}M.prototype={on:function on(ev,cb){this._events||(this._events={});var e=this._events;(e[ev]||(e[ev]=[])).push(cb);return this;},removeListener:function removeListener(ev,cb){var e=this._events[ev]||[],i;for(i=e.length-1;i>=0&&e[i];i--){if(e[i]===cb||e[i].cb===cb){e.splice(i,1);}}},removeAllListeners:function removeAllListeners(ev){if(!ev){this._events={};}else{this._events[ev]&&(this._events[ev]=[]);}},listeners:function listeners(ev){return this._events?this._events[ev]||[]:[];},emit:function emit(ev){this._events||(this._events={});var args=Array.prototype.slice.call(arguments,1),i,e=this._events[ev]||[];for(i=e.length-1;i>=0&&e[i];i--){e[i].apply(this,args);}return this;},when:function when(ev,cb){return this.once(ev,cb,true);},once:function once(ev,cb,when){if(!cb)return this;function c(){if(!when)this.removeListener(ev,c);if(cb.apply(this,arguments)&&when)this.removeListener(ev,c);}c.cb=cb;this.on(ev,c);return this;}};M.mixin=function(dest){var o=M.prototype,k;for(k in o){o.hasOwnProperty(k)&&(dest.prototype[k]=o[k]);}};var microee$1=M;var microee=microee$1;// Implements a subset of Node's stream.Transform - in a cross-platform manner.
function Transform$4(){}microee.mixin(Transform$4);// The write() signature is different from Node's
// --> makes it much easier to work with objects in logs.
// One of the lessons from v1 was that it's better to target
// a good browser rather than the lowest common denominator
// internally.
// If you want to use external streams, pipe() to ./stringify.js first.
Transform$4.prototype.write=function(name,level,args){this.emit('item',name,level,args);};Transform$4.prototype.end=function(){this.emit('end');this.removeAllListeners();};Transform$4.prototype.pipe=function(dest){var s=this;// prevent double piping
s.emit('unpipe',dest);// tell the dest that it's being piped to
dest.emit('pipe',s);function onItem(){dest.write.apply(dest,Array.prototype.slice.call(arguments));}function onEnd(){!dest._isStdio&&dest.end();}s.on('item',onItem);s.on('end',onEnd);s.when('unpipe',function(from){var match=from===dest||typeof from=='undefined';if(match){s.removeListener('item',onItem);s.removeListener('end',onEnd);dest.emit('unpipe');}return match;});return dest;};Transform$4.prototype.unpipe=function(from){this.emit('unpipe',from);return this;};Transform$4.prototype.format=function(dest){throw new Error(['Warning: .format() is deprecated in Minilog v2! Use .pipe() instead. For example:','var Minilog = require(\'minilog\');','Minilog','  .pipe(Minilog.backends.console.formatClean)','  .pipe(Minilog.backends.console);'].join('\n'));};Transform$4.mixin=function(dest){var o=Transform$4.prototype,k;for(k in o){o.hasOwnProperty(k)&&(dest.prototype[k]=o[k]);}};var transform$1=Transform$4;// default filter
var Transform$3=transform$1;var levelMap={debug:1,info:2,warn:3,error:4};function Filter(){this.enabled=true;this.defaultResult=true;this.clear();}Transform$3.mixin(Filter);// allow all matching, with level >= given level
Filter.prototype.allow=function(name,level){this._white.push({n:name,l:levelMap[level]});return this;};// deny all matching, with level <= given level
Filter.prototype.deny=function(name,level){this._black.push({n:name,l:levelMap[level]});return this;};Filter.prototype.clear=function(){this._white=[];this._black=[];return this;};function test(rule,name){// use .test for RegExps
return rule.n.test?rule.n.test(name):rule.n==name;}Filter.prototype.test=function(name,level){var i,len=Math.max(this._white.length,this._black.length);for(i=0;i<len;i++){if(this._white[i]&&test(this._white[i],name)&&levelMap[level]>=this._white[i].l){return true;}if(this._black[i]&&test(this._black[i],name)&&levelMap[level]<=this._black[i].l){return false;}}return this.defaultResult;};Filter.prototype.write=function(name,level,args){if(!this.enabled||this.test(name,level)){return this.emit('item',name,level,args);}};var filter$1=Filter;(function(module,exports){var Transform=transform$1,Filter=filter$1;var log=new Transform(),slice=Array.prototype.slice;exports=module.exports=function create(name){var o=function o(){log.write(name,undefined,slice.call(arguments));return o;};o.debug=function(){log.write(name,'debug',slice.call(arguments));return o;};o.info=function(){log.write(name,'info',slice.call(arguments));return o;};o.warn=function(){log.write(name,'warn',slice.call(arguments));return o;};o.error=function(){log.write(name,'error',slice.call(arguments));return o;};o.log=o.debug;// for interface compliance with Node and browser consoles
o.suggest=exports.suggest;o.format=log.format;return o;};// filled in separately
exports.defaultBackend=exports.defaultFormatter=null;exports.pipe=function(dest){return log.pipe(dest);};exports.end=exports.unpipe=exports.disable=function(from){return log.unpipe(from);};exports.Transform=Transform;exports.Filter=Filter;// this is the default filter that's applied when .enable() is called normally
// you can bypass it completely and set up your own pipes
exports.suggest=new Filter();exports.enable=function(){if(exports.defaultFormatter){return log.pipe(exports.suggest)// filter
.pipe(exports.defaultFormatter)// formatter
.pipe(exports.defaultBackend);// backend
}return log.pipe(exports.suggest)// filter
.pipe(exports.defaultBackend);// formatter
};})(minilog$2,minilog$2.exports);var minilogExports=minilog$2.exports;var hex$1={black:'#000',red:'#c23621',green:'#25bc26',yellow:'#bbbb00',blue:'#492ee1',magenta:'#d338d3',cyan:'#33bbc8',gray:'#808080',purple:'#708'};function color$2(fg,isInverse){if(isInverse){return'color: #fff; background: '+hex$1[fg]+';';}else{return'color: '+hex$1[fg]+';';}}var util=color$2;var Transform$2=transform$1,color$1=util;var colors$1={debug:['cyan'],info:['purple'],warn:['yellow',true],error:['red',true]},logger$2=new Transform$2();logger$2.write=function(name,level,args){var fn=console.log;if(console[level]&&console[level].apply){fn=console[level];fn.apply(console,['%c'+name+' %c'+level,color$1('gray'),color$1.apply(color$1,colors$1[level])].concat(args));}};// NOP, because piping the formatted logs can only cause trouble.
logger$2.pipe=function(){};var color_1=logger$2;var Transform$1=transform$1,color=util,colors={debug:['gray'],info:['purple'],warn:['yellow',true],error:['red',true]},logger$1=new Transform$1();logger$1.write=function(name,level,args){var fn=console.log;if(level!='debug'&&console[level]){fn=console[level];}var i=0;if(level!='info'){for(;i<args.length;i++){if(typeof args[i]!='string')break;}fn.apply(console,['%c'+name+' '+args.slice(0,i).join(' '),color.apply(color,colors[level])].concat(args.slice(i)));}else{fn.apply(console,['%c'+name,color.apply(color,colors[level])].concat(args));}};// NOP, because piping the formatted logs can only cause trouble.
logger$1.pipe=function(){};var minilog$1=logger$1;var Transform=transform$1;var newlines=/\n+$/,logger=new Transform();logger.write=function(name,level,args){var i=args.length-1;if(typeof console==='undefined'||!console.log){return;}if(console.log.apply){return console.log.apply(console,[name,level].concat(args));}else if(JSON&&JSON.stringify){// console.log.apply is undefined in IE8 and IE9
// for IE8/9: make console.log at least a bit less awful
if(args[i]&&typeof args[i]=='string'){args[i]=args[i].replace(newlines,'');}try{for(i=0;i<args.length;i++){args[i]=JSON.stringify(args[i]);}}catch(e){}console.log(args.join(' '));}};logger.formatters=['color','minilog'];logger.color=color_1;logger.minilog=minilog$1;var console_1=logger;var array$1;var hasRequiredArray;function requireArray(){if(hasRequiredArray)return array$1;hasRequiredArray=1;var Transform=transform$1,cache=[];var logger=new Transform();logger.write=function(name,level,args){cache.push([name,level,args]);};// utility functions
logger.get=function(){return cache;};logger.empty=function(){cache=[];};array$1=logger;return array$1;}var localstorage;var hasRequiredLocalstorage;function requireLocalstorage(){if(hasRequiredLocalstorage)return localstorage;hasRequiredLocalstorage=1;var Transform=transform$1,cache=false;var logger=new Transform();logger.write=function(name,level,args){if(typeof window=='undefined'||typeof JSON=='undefined'||!JSON.stringify||!JSON.parse)return;try{if(!cache){cache=window.localStorage.minilog?JSON.parse(window.localStorage.minilog):[];}cache.push([new Date().toString(),name,level,args]);window.localStorage.minilog=JSON.stringify(cache);}catch(e){}};localstorage=logger;return localstorage;}var jquery_simple;var hasRequiredJquery_simple;function requireJquery_simple(){if(hasRequiredJquery_simple)return jquery_simple;hasRequiredJquery_simple=1;var Transform=transform$1;var cid=new Date().valueOf().toString(36);function AjaxLogger(options){this.url=options.url||'';this.cache=[];this.timer=null;this.interval=options.interval||30*1000;this.enabled=true;this.jQuery=window.jQuery;this.extras={};}Transform.mixin(AjaxLogger);AjaxLogger.prototype.write=function(name,level,args){if(!this.timer){this.init();}this.cache.push([name,level].concat(args));};AjaxLogger.prototype.init=function(){if(!this.enabled||!this.jQuery)return;var self=this;this.timer=setTimeout(function(){var i,logs=[],ajaxData,url=self.url;if(self.cache.length==0)return self.init();// Test each log line and only log the ones that are valid (e.g. don't have circular references).
// Slight performance hit but benefit is we log all valid lines.
for(i=0;i<self.cache.length;i++){try{JSON.stringify(self.cache[i]);logs.push(self.cache[i]);}catch(e){}}if(self.jQuery.isEmptyObject(self.extras)){ajaxData=JSON.stringify({logs:logs});url=self.url+'?client_id='+cid;}else{ajaxData=JSON.stringify(self.jQuery.extend({logs:logs},self.extras));}self.jQuery.ajax(url,{type:'POST',cache:false,processData:false,data:ajaxData,contentType:'application/json',timeout:10000}).success(function(data,status,jqxhr){if(data.interval){self.interval=Math.max(1000,data.interval);}}).error(function(){self.interval=30000;}).always(function(){self.init();});self.cache=[];},this.interval);};AjaxLogger.prototype.end=function(){};// wait until jQuery is defined. Useful if you don't control the load order.
AjaxLogger.jQueryWait=function(onDone){if(typeof window!=='undefined'&&(window.jQuery||window.$)){return onDone(window.jQuery||window.$);}else if(typeof window!=='undefined'){setTimeout(function(){AjaxLogger.jQueryWait(onDone);},200);}};jquery_simple=AjaxLogger;return jquery_simple;}(function(module,exports){var Minilog=minilogExports;var oldEnable=Minilog.enable,oldDisable=Minilog.disable,isChrome=typeof navigator!='undefined'&&/chrome/i.test(navigator.userAgent),console=console_1;// Use a more capable logging backend if on Chrome
Minilog.defaultBackend=isChrome?console.minilog:console;// apply enable inputs from localStorage and from the URL
if(typeof window!='undefined'){try{Minilog.enable(JSON.parse(window.localStorage['minilogSettings']));}catch(e){}if(window.location&&window.location.search){var match=RegExp('[?&]minilog=([^&]*)').exec(window.location.search);match&&Minilog.enable(decodeURIComponent(match[1]));}}// Make enable also add to localStorage
Minilog.enable=function(){oldEnable.call(Minilog,true);try{window.localStorage['minilogSettings']=JSON.stringify(true);}catch(e){}return this;};Minilog.disable=function(){oldDisable.call(Minilog);try{delete window.localStorage.minilogSettings;}catch(e){}return this;};exports=module.exports=Minilog;exports.backends={array:requireArray(),browser:Minilog.defaultBackend,localStorage:requireLocalstorage(),jQuery:requireJquery_simple()};})(web,web.exports);var webExports=web.exports;var minilog=webExports;minilog.enable();var log$3=minilog('vm');var log$2=log$3;var StringUtil$2=/*#__PURE__*/function(){function StringUtil(){_classCallCheck(this,StringUtil);}return _createClass(StringUtil,null,[{key:"withoutTrailingDigits",value:function withoutTrailingDigits(s){var i=s.length-1;while(i>=0&&'0123456789'.indexOf(s.charAt(i))>-1)i--;return s.slice(0,i+1);}},{key:"unusedName",value:function unusedName(name,existingNames){if(existingNames.indexOf(name)<0)return name;name=StringUtil.withoutTrailingDigits(name);var i=2;while(existingNames.indexOf(name+i)>=0)i++;return name+i;}/**
     * Split a string on the first occurrence of a split character.
     * @param {string} text - the string to split.
     * @param {string} separator - split the text on this character.
     * @returns {string[]} - the two parts of the split string, or [text, null] if no split character found.
     * @example
     * // returns ['foo', 'tar.gz']
     * splitFirst('foo.tar.gz', '.');
     * @example
     * // returns ['foo', null]
     * splitFirst('foo', '.');
     * @example
     * // returns ['foo', '']
     * splitFirst('foo.', '.');
     */},{key:"splitFirst",value:function splitFirst(text,separator){var index=text.indexOf(separator);if(index>=0){return[text.substring(0,index),text.substring(index+1)];}return[text,null];}/**
     * A customized version of JSON.stringify that sets Infinity/NaN to 0,
     * instead of the default (null).
     * Needed because null is not of type number, but Infinity/NaN are, which
     * can lead to serialization producing JSON that isn't valid based on the parser schema.
     * It is also consistent with the behavior of saving 2.0 projects.
     * This is only needed when stringifying an object for saving.
     *
     * @param {!object} obj - The object to serialize
     * @return {!string} The JSON.stringified string with Infinity/NaN replaced with 0
     */},{key:"stringify",value:function stringify(obj){return JSON.stringify(obj,function(_key,value){if(typeof value==='number'&&(value===Infinity||value===-Infinity||isNaN(value))){return 0;}return value;});}/**
     * A function to replace unsafe characters (not allowed in XML) with safe ones. This is used
     * in cases where we're replacing non-user facing strings (e.g. variable IDs).
     * When replacing user facing strings, the xmlEscape utility function should be used
     * instead so that the user facing string does not change how it displays.
     * @param {!string | !Array.<string>} unsafe Unsafe string possibly containing unicode control characters.
     * In some cases this argument may be an array (e.g. hacked inputs from 2.0)
     * @return {string} String with control characters replaced.
     */},{key:"replaceUnsafeChars",value:function replaceUnsafeChars(unsafe){if(typeof unsafe!=='string'){if(Array.isArray(unsafe)){// This happens when we have hacked blocks from 2.0
// See #1030
unsafe=String(unsafe);}else{log$2.error('Unexpected input recieved in replaceUnsafeChars');return unsafe;}}return unsafe.replace(/[<>&'"]/g,function(c){switch(c){case'<':return'lt';case'>':return'gt';case'&':return'amp';case'\'':return'apos';case'"':return'quot';}});}}]);}();var stringUtil=StringUtil$2;var Clone$1=/*#__PURE__*/function(){function Clone(){_classCallCheck(this,Clone);}return _createClass(Clone,null,[{key:"simple",value:/**
     * Deep-clone a "simple" object: one which can be fully expressed with JSON.
     * Non-JSON values, such as functions, will be stripped from the clone.
     * @param {object} original - the object to be cloned.
     * @returns {object} a deep clone of the original object.
     */function simple(original){return JSON.parse(JSON.stringify(original));}}]);}();var clone=Clone$1;var Clone$2=/*@__PURE__*/getDefaultExportFromCjs(clone);var domain;// This constructor is used to store event handlers. Instantiating this is
// faster than explicitly calling `Object.create(null)` to get a "clean" empty
// object (tested with v8 v4.9).
function EventHandlers(){}EventHandlers.prototype=Object.create(null);function EventEmitter$1(){EventEmitter$1.init.call(this);}// nodejs oddity
// require('events') === require('events').EventEmitter
EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.usingDomains=false;EventEmitter$1.prototype.domain=undefined;EventEmitter$1.prototype._events=undefined;EventEmitter$1.prototype._maxListeners=undefined;// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter$1.defaultMaxListeners=10;EventEmitter$1.init=function(){this.domain=null;if(EventEmitter$1.usingDomains){// if there is an active domain, then attach to it.
if(domain.active);}if(!this._events||this._events===Object.getPrototypeOf(this)._events){this._events=new EventHandlers();this._eventsCount=0;}this._maxListeners=this._maxListeners||undefined;};// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter$1.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=='number'||n<0||isNaN(n))throw new TypeError('"n" argument must be a positive number');this._maxListeners=n;return this;};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter$1.defaultMaxListeners;return that._maxListeners;}EventEmitter$1.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this);};// These standalone emit* functions are used to optimize calling of event
// handlers for fast cases because emit() itself often has a variable number of
// arguments and can be deoptimized because of that. These functions always have
// the same number of arguments and thus do not get deoptimized, so the code
// inside them can execute faster.
function emitNone(handler,isFn,self){if(isFn)handler.call(self);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self);}}function emitOne(handler,isFn,self,arg1){if(isFn)handler.call(self,arg1);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1);}}function emitTwo(handler,isFn,self,arg1,arg2){if(isFn)handler.call(self,arg1,arg2);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2);}}function emitThree(handler,isFn,self,arg1,arg2,arg3){if(isFn)handler.call(self,arg1,arg2,arg3);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2,arg3);}}function emitMany(handler,isFn,self,args){if(isFn)handler.apply(self,args);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].apply(self,args);}}EventEmitter$1.prototype.emit=function emit(type){var er,handler,len,args,i,events,domain;var doError=type==='error';events=this._events;if(events)doError=doError&&events.error==null;else if(!doError)return false;domain=this.domain;// If there is no 'error' event listener then throw.
if(doError){er=arguments[1];if(domain){if(!er)er=new Error('Uncaught, unspecified "error" event');er.domainEmitter=this;er.domain=domain;er.domainThrown=false;domain.emit('error',er);}else if(er instanceof Error){throw er;// Unhandled 'error' event
}else{// At least give some kind of context to the user
var err=new Error('Uncaught, unspecified "error" event. ('+er+')');err.context=er;throw err;}return false;}handler=events[type];if(!handler)return false;var isFn=typeof handler==='function';len=arguments.length;switch(len){// fast cases
case 1:emitNone(handler,isFn,this);break;case 2:emitOne(handler,isFn,this,arguments[1]);break;case 3:emitTwo(handler,isFn,this,arguments[1],arguments[2]);break;case 4:emitThree(handler,isFn,this,arguments[1],arguments[2],arguments[3]);break;// slower
default:args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];emitMany(handler,isFn,this,args);}return true;};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=='function')throw new TypeError('"listener" argument must be a function');events=target._events;if(!events){events=target._events=new EventHandlers();target._eventsCount=0;}else{// To avoid recursion in the case that type === "newListener"! Before
// adding it to the listeners, first emit "newListener".
if(events.newListener){target.emit('newListener',type,listener.listener?listener.listener:listener);// Re-assign `events` because a newListener handler could have caused the
// this._events to be assigned to a new object
events=target._events;}existing=events[type];}if(!existing){// Optimize the case of one listener. Don't need the extra array object.
existing=events[type]=listener;++target._eventsCount;}else{if(typeof existing==='function'){// Adding the second element, need to change to array.
existing=events[type]=prepend?[listener,existing]:[existing,listener];}else{// If we've already got an array, just append.
if(prepend){existing.unshift(listener);}else{existing.push(listener);}}// Check for listener leak
if(!existing.warned){m=$getMaxListeners(target);if(m&&m>0&&existing.length>m){existing.warned=true;var w=new Error('Possible EventEmitter memory leak detected. '+existing.length+' '+type+' listeners added. '+'Use emitter.setMaxListeners() to increase limit');w.name='MaxListenersExceededWarning';w.emitter=target;w.type=type;w.count=existing.length;emitWarning(w);}}}return target;}function emitWarning(e){typeof console.warn==='function'?console.warn(e):console.log(e);}EventEmitter$1.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false);};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true);};function _onceWrap(target,type,listener){var fired=false;function g(){target.removeListener(type,g);if(!fired){fired=true;listener.apply(target,arguments);}}g.listener=listener;return g;}EventEmitter$1.prototype.once=function once(type,listener){if(typeof listener!=='function')throw new TypeError('"listener" argument must be a function');this.on(type,_onceWrap(this,type,listener));return this;};EventEmitter$1.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=='function')throw new TypeError('"listener" argument must be a function');this.prependListener(type,_onceWrap(this,type,listener));return this;};// emits a 'removeListener' event iff the listener was removed
EventEmitter$1.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=='function')throw new TypeError('"listener" argument must be a function');events=this._events;if(!events)return this;list=events[type];if(!list)return this;if(list===listener||list.listener&&list.listener===listener){if(--this._eventsCount===0)this._events=new EventHandlers();else{delete events[type];if(events.removeListener)this.emit('removeListener',type,list.listener||listener);}}else if(typeof list!=='function'){position=-1;for(i=list.length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){originalListener=list[i].listener;position=i;break;}}if(position<0)return this;if(list.length===1){list[0]=undefined;if(--this._eventsCount===0){this._events=new EventHandlers();return this;}else{delete events[type];}}else{spliceOne(list,position);}if(events.removeListener)this.emit('removeListener',type,originalListener||listener);}return this;};// Alias for removeListener added in NodeJS 10.0
// https://nodejs.org/api/events.html#events_emitter_off_eventname_listener
EventEmitter$1.prototype.off=function(type,listener){return this.removeListener(type,listener);};EventEmitter$1.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events;events=this._events;if(!events)return this;// not listening for removeListener, no need to emit
if(!events.removeListener){if(arguments.length===0){this._events=new EventHandlers();this._eventsCount=0;}else if(events[type]){if(--this._eventsCount===0)this._events=new EventHandlers();else delete events[type];}return this;}// emit removeListener for all listeners on all events
if(arguments.length===0){var keys=Object.keys(events);for(var i=0,key;i<keys.length;++i){key=keys[i];if(key==='removeListener')continue;this.removeAllListeners(key);}this.removeAllListeners('removeListener');this._events=new EventHandlers();this._eventsCount=0;return this;}listeners=events[type];if(typeof listeners==='function'){this.removeListener(type,listeners);}else if(listeners){// LIFO order
do{this.removeListener(type,listeners[listeners.length-1]);}while(listeners[0]);}return this;};EventEmitter$1.prototype.listeners=function listeners(type){var evlistener;var ret;var events=this._events;if(!events)ret=[];else{evlistener=events[type];if(!evlistener)ret=[];else if(typeof evlistener==='function')ret=[evlistener.listener||evlistener];else ret=unwrapListeners(evlistener);}return ret;};EventEmitter$1.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==='function'){return emitter.listenerCount(type);}else{return listenerCount.call(emitter,type);}};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events){var evlistener=events[type];if(typeof evlistener==='function'){return 1;}else if(evlistener){return evlistener.length;}}return 0;}EventEmitter$1.prototype.eventNames=function eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[];};// About 1.5x faster than the two-arg version of Array#splice().
function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1)list[i]=list[k];list.pop();}function arrayClone(arr,i){var copy=new Array(i);while(i--)copy[i]=arr[i];return copy;}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i];}return ret;}var _polyfillNode_events=/*#__PURE__*/Object.freeze({__proto__:null,EventEmitter:EventEmitter$1,default:EventEmitter$1});var require$$0$3=/*@__PURE__*/getAugmentedNamespace(_polyfillNode_events);var lib$2={exports:{}};var require$$0$2={"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376};var decodeMap=require$$0$2;var decode_codepoint$1=decodeCodePoint$1;// modified version of https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119
function decodeCodePoint$1(codePoint){if(codePoint>=0xd800&&codePoint<=0xdfff||codePoint>0x10ffff){return"\uFFFD";}if(codePoint in decodeMap){codePoint=decodeMap[codePoint];}var output="";if(codePoint>0xffff){codePoint-=0x10000;output+=String.fromCharCode(codePoint>>>10&0x3ff|0xd800);codePoint=0xdc00|codePoint&0x3ff;}output+=String.fromCharCode(codePoint);return output;}var Aacute$3="Á";var aacute$3="á";var Abreve$1="Ă";var abreve$1="ă";var ac$1="∾";var acd$1="∿";var acE$1="∾̳";var Acirc$3="Â";var acirc$3="â";var acute$3="´";var Acy$1="А";var acy$1="а";var AElig$3="Æ";var aelig$3="æ";var af$1="⁡";var Afr$1="𝔄";var afr$1="𝔞";var Agrave$3="À";var agrave$3="à";var alefsym$1="ℵ";var aleph$1="ℵ";var Alpha$1="Α";var alpha$1="α";var Amacr$1="Ā";var amacr$1="ā";var amalg$1="⨿";var amp$5="&";var AMP$3="&";var andand$1="⩕";var And$1="⩓";var and$1="∧";var andd$1="⩜";var andslope$1="⩘";var andv$1="⩚";var ang$1="∠";var ange$1="⦤";var angle$1="∠";var angmsdaa$1="⦨";var angmsdab$1="⦩";var angmsdac$1="⦪";var angmsdad$1="⦫";var angmsdae$1="⦬";var angmsdaf$1="⦭";var angmsdag$1="⦮";var angmsdah$1="⦯";var angmsd$1="∡";var angrt$1="∟";var angrtvb$1="⊾";var angrtvbd$1="⦝";var angsph$1="∢";var angst$1="Å";var angzarr$1="⍼";var Aogon$1="Ą";var aogon$1="ą";var Aopf$1="𝔸";var aopf$1="𝕒";var apacir$1="⩯";var ap$1="≈";var apE$1="⩰";var ape$1="≊";var apid$1="≋";var apos$3="'";var ApplyFunction$1="⁡";var approx$1="≈";var approxeq$1="≊";var Aring$3="Å";var aring$3="å";var Ascr$1="𝒜";var ascr$1="𝒶";var Assign$1="≔";var ast$1="*";var asymp$1="≈";var asympeq$1="≍";var Atilde$3="Ã";var atilde$3="ã";var Auml$3="Ä";var auml$3="ä";var awconint$1="∳";var awint$1="⨑";var backcong$1="≌";var backepsilon$1="϶";var backprime$1="‵";var backsim$1="∽";var backsimeq$1="⋍";var Backslash$1="∖";var Barv$1="⫧";var barvee$1="⊽";var barwed$1="⌅";var Barwed$1="⌆";var barwedge$1="⌅";var bbrk$1="⎵";var bbrktbrk$1="⎶";var bcong$1="≌";var Bcy$1="Б";var bcy$1="б";var bdquo$1="„";var becaus$1="∵";var because$1="∵";var Because$1="∵";var bemptyv$1="⦰";var bepsi$1="϶";var bernou$1="ℬ";var Bernoullis$1="ℬ";var Beta$1="Β";var beta$1="β";var beth$1="ℶ";var between$1="≬";var Bfr$1="𝔅";var bfr$1="𝔟";var bigcap$1="⋂";var bigcirc$1="◯";var bigcup$1="⋃";var bigodot$1="⨀";var bigoplus$1="⨁";var bigotimes$1="⨂";var bigsqcup$1="⨆";var bigstar$1="★";var bigtriangledown$1="▽";var bigtriangleup$1="△";var biguplus$1="⨄";var bigvee$1="⋁";var bigwedge$1="⋀";var bkarow$1="⤍";var blacklozenge$1="⧫";var blacksquare$1="▪";var blacktriangle$1="▴";var blacktriangledown$1="▾";var blacktriangleleft$1="◂";var blacktriangleright$1="▸";var blank$1="␣";var blk12$1="▒";var blk14$1="░";var blk34$1="▓";var block$1="█";var bne$1="=⃥";var bnequiv$1="≡⃥";var bNot$1="⫭";var bnot$1="⌐";var Bopf$1="𝔹";var bopf$1="𝕓";var bot$1="⊥";var bottom$1="⊥";var bowtie$1="⋈";var boxbox$1="⧉";var boxdl$1="┐";var boxdL$1="╕";var boxDl$1="╖";var boxDL$1="╗";var boxdr$1="┌";var boxdR$1="╒";var boxDr$1="╓";var boxDR$1="╔";var boxh$1="─";var boxH$1="═";var boxhd$1="┬";var boxHd$1="╤";var boxhD$1="╥";var boxHD$1="╦";var boxhu$1="┴";var boxHu$1="╧";var boxhU$1="╨";var boxHU$1="╩";var boxminus$1="⊟";var boxplus$1="⊞";var boxtimes$1="⊠";var boxul$1="┘";var boxuL$1="╛";var boxUl$1="╜";var boxUL$1="╝";var boxur$1="└";var boxuR$1="╘";var boxUr$1="╙";var boxUR$1="╚";var boxv$1="│";var boxV$1="║";var boxvh$1="┼";var boxvH$1="╪";var boxVh$1="╫";var boxVH$1="╬";var boxvl$1="┤";var boxvL$1="╡";var boxVl$1="╢";var boxVL$1="╣";var boxvr$1="├";var boxvR$1="╞";var boxVr$1="╟";var boxVR$1="╠";var bprime$1="‵";var breve$1="˘";var Breve$1="˘";var brvbar$3="¦";var bscr$1="𝒷";var Bscr$1="ℬ";var bsemi$1="⁏";var bsim$1="∽";var bsime$1="⋍";var bsolb$1="⧅";var bsol$1="\\";var bsolhsub$1="⟈";var bull$1="•";var bullet$1="•";var bump$1="≎";var bumpE$1="⪮";var bumpe$1="≏";var Bumpeq$1="≎";var bumpeq$1="≏";var Cacute$1="Ć";var cacute$1="ć";var capand$1="⩄";var capbrcup$1="⩉";var capcap$1="⩋";var cap$1="∩";var Cap$1="⋒";var capcup$1="⩇";var capdot$1="⩀";var CapitalDifferentialD$1="ⅅ";var caps$1="∩︀";var caret$1="⁁";var caron$1="ˇ";var Cayleys$1="ℭ";var ccaps$1="⩍";var Ccaron$1="Č";var ccaron$1="č";var Ccedil$3="Ç";var ccedil$3="ç";var Ccirc$1="Ĉ";var ccirc$1="ĉ";var Cconint$1="∰";var ccups$1="⩌";var ccupssm$1="⩐";var Cdot$1="Ċ";var cdot$1="ċ";var cedil$3="¸";var Cedilla$1="¸";var cemptyv$1="⦲";var cent$3="¢";var centerdot$1="·";var CenterDot$1="·";var cfr$1="𝔠";var Cfr$1="ℭ";var CHcy$1="Ч";var chcy$1="ч";var check$1="✓";var checkmark$1="✓";var Chi$1="Χ";var chi$1="χ";var circ$1="ˆ";var circeq$1="≗";var circlearrowleft$1="↺";var circlearrowright$1="↻";var circledast$1="⊛";var circledcirc$1="⊚";var circleddash$1="⊝";var CircleDot$1="⊙";var circledR$1="®";var circledS$1="Ⓢ";var CircleMinus$1="⊖";var CirclePlus$1="⊕";var CircleTimes$1="⊗";var cir$1="○";var cirE$1="⧃";var cire$1="≗";var cirfnint$1="⨐";var cirmid$1="⫯";var cirscir$1="⧂";var ClockwiseContourIntegral$1="∲";var CloseCurlyDoubleQuote$1="”";var CloseCurlyQuote$1="’";var clubs$1="♣";var clubsuit$1="♣";var colon$1=":";var Colon$1="∷";var Colone$1="⩴";var colone$1="≔";var coloneq$1="≔";var comma$1=",";var commat$1="@";var comp$1="∁";var compfn$1="∘";var complement$1="∁";var complexes$1="ℂ";var cong$1="≅";var congdot$1="⩭";var Congruent$1="≡";var conint$1="∮";var Conint$1="∯";var ContourIntegral$1="∮";var copf$1="𝕔";var Copf$1="ℂ";var coprod$1="∐";var Coproduct$1="∐";var copy$3="©";var COPY$3="©";var copysr$1="℗";var CounterClockwiseContourIntegral$1="∳";var crarr$1="↵";var cross$1="✗";var Cross$1="⨯";var Cscr$1="𝒞";var cscr$1="𝒸";var csub$1="⫏";var csube$1="⫑";var csup$1="⫐";var csupe$1="⫒";var ctdot$1="⋯";var cudarrl$1="⤸";var cudarrr$1="⤵";var cuepr$1="⋞";var cuesc$1="⋟";var cularr$1="↶";var cularrp$1="⤽";var cupbrcap$1="⩈";var cupcap$1="⩆";var CupCap$1="≍";var cup$1="∪";var Cup$1="⋓";var cupcup$1="⩊";var cupdot$1="⊍";var cupor$1="⩅";var cups$1="∪︀";var curarr$1="↷";var curarrm$1="⤼";var curlyeqprec$1="⋞";var curlyeqsucc$1="⋟";var curlyvee$1="⋎";var curlywedge$1="⋏";var curren$3="¤";var curvearrowleft$1="↶";var curvearrowright$1="↷";var cuvee$1="⋎";var cuwed$1="⋏";var cwconint$1="∲";var cwint$1="∱";var cylcty$1="⌭";var dagger$1="†";var Dagger$1="‡";var daleth$1="ℸ";var darr$1="↓";var Darr$1="↡";var dArr$1="⇓";var dash$1="‐";var Dashv$1="⫤";var dashv$1="⊣";var dbkarow$1="⤏";var dblac$1="˝";var Dcaron$1="Ď";var dcaron$1="ď";var Dcy$1="Д";var dcy$1="д";var ddagger$1="‡";var ddarr$1="⇊";var DD$1="ⅅ";var dd$1="ⅆ";var DDotrahd$1="⤑";var ddotseq$1="⩷";var deg$3="°";var Del$1="∇";var Delta$1="Δ";var delta$1="δ";var demptyv$1="⦱";var dfisht$1="⥿";var Dfr$1="𝔇";var dfr$1="𝔡";var dHar$1="⥥";var dharl$1="⇃";var dharr$1="⇂";var DiacriticalAcute$1="´";var DiacriticalDot$1="˙";var DiacriticalDoubleAcute$1="˝";var DiacriticalGrave$1="`";var DiacriticalTilde$1="˜";var diam$1="⋄";var diamond$1="⋄";var Diamond$1="⋄";var diamondsuit$1="♦";var diams$1="♦";var die$1="¨";var DifferentialD$1="ⅆ";var digamma$1="ϝ";var disin$1="⋲";var div$1="÷";var divide$3="÷";var divideontimes$1="⋇";var divonx$1="⋇";var DJcy$1="Ђ";var djcy$1="ђ";var dlcorn$1="⌞";var dlcrop$1="⌍";var dollar$1="$";var Dopf$1="𝔻";var dopf$1="𝕕";var Dot$1="¨";var dot$1="˙";var DotDot$1="⃜";var doteq$1="≐";var doteqdot$1="≑";var DotEqual$1="≐";var dotminus$1="∸";var dotplus$1="∔";var dotsquare$1="⊡";var doublebarwedge$1="⌆";var DoubleContourIntegral$1="∯";var DoubleDot$1="¨";var DoubleDownArrow$1="⇓";var DoubleLeftArrow$1="⇐";var DoubleLeftRightArrow$1="⇔";var DoubleLeftTee$1="⫤";var DoubleLongLeftArrow$1="⟸";var DoubleLongLeftRightArrow$1="⟺";var DoubleLongRightArrow$1="⟹";var DoubleRightArrow$1="⇒";var DoubleRightTee$1="⊨";var DoubleUpArrow$1="⇑";var DoubleUpDownArrow$1="⇕";var DoubleVerticalBar$1="∥";var DownArrowBar$1="⤓";var downarrow$1="↓";var DownArrow$1="↓";var Downarrow$1="⇓";var DownArrowUpArrow$1="⇵";var DownBreve$1="̑";var downdownarrows$1="⇊";var downharpoonleft$1="⇃";var downharpoonright$1="⇂";var DownLeftRightVector$1="⥐";var DownLeftTeeVector$1="⥞";var DownLeftVectorBar$1="⥖";var DownLeftVector$1="↽";var DownRightTeeVector$1="⥟";var DownRightVectorBar$1="⥗";var DownRightVector$1="⇁";var DownTeeArrow$1="↧";var DownTee$1="⊤";var drbkarow$1="⤐";var drcorn$1="⌟";var drcrop$1="⌌";var Dscr$1="𝒟";var dscr$1="𝒹";var DScy$1="Ѕ";var dscy$1="ѕ";var dsol$1="⧶";var Dstrok$1="Đ";var dstrok$1="đ";var dtdot$1="⋱";var dtri$1="▿";var dtrif$1="▾";var duarr$1="⇵";var duhar$1="⥯";var dwangle$1="⦦";var DZcy$1="Џ";var dzcy$1="џ";var dzigrarr$1="⟿";var Eacute$3="É";var eacute$3="é";var easter$1="⩮";var Ecaron$1="Ě";var ecaron$1="ě";var Ecirc$3="Ê";var ecirc$3="ê";var ecir$1="≖";var ecolon$1="≕";var Ecy$1="Э";var ecy$1="э";var eDDot$1="⩷";var Edot$1="Ė";var edot$1="ė";var eDot$1="≑";var ee$1="ⅇ";var efDot$1="≒";var Efr$1="𝔈";var efr$1="𝔢";var eg$1="⪚";var Egrave$3="È";var egrave$3="è";var egs$1="⪖";var egsdot$1="⪘";var el$1="⪙";var Element$2="∈";var elinters$1="⏧";var ell$1="ℓ";var els$1="⪕";var elsdot$1="⪗";var Emacr$1="Ē";var emacr$1="ē";var empty$1="∅";var emptyset$1="∅";var EmptySmallSquare$1="◻";var emptyv$1="∅";var EmptyVerySmallSquare$1="▫";var emsp13$1=" ";var emsp14$1=" ";var emsp$1=" ";var ENG$1="Ŋ";var eng$1="ŋ";var ensp$1=" ";var Eogon$1="Ę";var eogon$1="ę";var Eopf$1="𝔼";var eopf$1="𝕖";var epar$1="⋕";var eparsl$1="⧣";var eplus$1="⩱";var epsi$1="ε";var Epsilon$1="Ε";var epsilon$1="ε";var epsiv$1="ϵ";var eqcirc$1="≖";var eqcolon$1="≕";var eqsim$1="≂";var eqslantgtr$1="⪖";var eqslantless$1="⪕";var Equal$1="⩵";var equals$1="=";var EqualTilde$1="≂";var equest$1="≟";var Equilibrium$1="⇌";var equiv$1="≡";var equivDD$1="⩸";var eqvparsl$1="⧥";var erarr$1="⥱";var erDot$1="≓";var escr$1="ℯ";var Escr$1="ℰ";var esdot$1="≐";var Esim$1="⩳";var esim$1="≂";var Eta$1="Η";var eta$1="η";var ETH$3="Ð";var eth$3="ð";var Euml$3="Ë";var euml$3="ë";var euro$1="€";var excl$1="!";var exist$1="∃";var Exists$1="∃";var expectation$1="ℰ";var exponentiale$1="ⅇ";var ExponentialE$1="ⅇ";var fallingdotseq$1="≒";var Fcy$1="Ф";var fcy$1="ф";var female$1="♀";var ffilig$1="ﬃ";var fflig$1="ﬀ";var ffllig$1="ﬄ";var Ffr$1="𝔉";var ffr$1="𝔣";var filig$1="ﬁ";var FilledSmallSquare$1="◼";var FilledVerySmallSquare$1="▪";var fjlig$1="fj";var flat$1="♭";var fllig$1="ﬂ";var fltns$1="▱";var fnof$1="ƒ";var Fopf$1="𝔽";var fopf$1="𝕗";var forall$1="∀";var ForAll$1="∀";var fork$1="⋔";var forkv$1="⫙";var Fouriertrf$1="ℱ";var fpartint$1="⨍";var frac12$3="½";var frac13$1="⅓";var frac14$3="¼";var frac15$1="⅕";var frac16$1="⅙";var frac18$1="⅛";var frac23$1="⅔";var frac25$1="⅖";var frac34$3="¾";var frac35$1="⅗";var frac38$1="⅜";var frac45$1="⅘";var frac56$1="⅚";var frac58$1="⅝";var frac78$1="⅞";var frasl$1="⁄";var frown$1="⌢";var fscr$1="𝒻";var Fscr$1="ℱ";var gacute$1="ǵ";var Gamma$1="Γ";var gamma$1="γ";var Gammad$1="Ϝ";var gammad$1="ϝ";var gap$1="⪆";var Gbreve$1="Ğ";var gbreve$1="ğ";var Gcedil$1="Ģ";var Gcirc$1="Ĝ";var gcirc$1="ĝ";var Gcy$1="Г";var gcy$1="г";var Gdot$1="Ġ";var gdot$1="ġ";var ge$1="≥";var gE$1="≧";var gEl$1="⪌";var gel$1="⋛";var geq$1="≥";var geqq$1="≧";var geqslant$1="⩾";var gescc$1="⪩";var ges$1="⩾";var gesdot$1="⪀";var gesdoto$1="⪂";var gesdotol$1="⪄";var gesl$1="⋛︀";var gesles$1="⪔";var Gfr$1="𝔊";var gfr$1="𝔤";var gg$1="≫";var Gg$1="⋙";var ggg$1="⋙";var gimel$1="ℷ";var GJcy$1="Ѓ";var gjcy$1="ѓ";var gla$1="⪥";var gl$1="≷";var glE$1="⪒";var glj$1="⪤";var gnap$1="⪊";var gnapprox$1="⪊";var gne$1="⪈";var gnE$1="≩";var gneq$1="⪈";var gneqq$1="≩";var gnsim$1="⋧";var Gopf$1="𝔾";var gopf$1="𝕘";var grave$1="`";var GreaterEqual$1="≥";var GreaterEqualLess$1="⋛";var GreaterFullEqual$1="≧";var GreaterGreater$1="⪢";var GreaterLess$1="≷";var GreaterSlantEqual$1="⩾";var GreaterTilde$1="≳";var Gscr$1="𝒢";var gscr$1="ℊ";var gsim$1="≳";var gsime$1="⪎";var gsiml$1="⪐";var gtcc$1="⪧";var gtcir$1="⩺";var gt$5=">";var GT$3=">";var Gt$1="≫";var gtdot$1="⋗";var gtlPar$1="⦕";var gtquest$1="⩼";var gtrapprox$1="⪆";var gtrarr$1="⥸";var gtrdot$1="⋗";var gtreqless$1="⋛";var gtreqqless$1="⪌";var gtrless$1="≷";var gtrsim$1="≳";var gvertneqq$1="≩︀";var gvnE$1="≩︀";var Hacek$1="ˇ";var hairsp$1=" ";var half$1="½";var hamilt$1="ℋ";var HARDcy$1="Ъ";var hardcy$1="ъ";var harrcir$1="⥈";var harr$1="↔";var hArr$1="⇔";var harrw$1="↭";var Hat$1="^";var hbar$1="ℏ";var Hcirc$1="Ĥ";var hcirc$1="ĥ";var hearts$1="♥";var heartsuit$1="♥";var hellip$1="…";var hercon$1="⊹";var hfr$1="𝔥";var Hfr$1="ℌ";var HilbertSpace$1="ℋ";var hksearow$1="⤥";var hkswarow$1="⤦";var hoarr$1="⇿";var homtht$1="∻";var hookleftarrow$1="↩";var hookrightarrow$1="↪";var hopf$1="𝕙";var Hopf$1="ℍ";var horbar$1="―";var HorizontalLine$1="─";var hscr$1="𝒽";var Hscr$1="ℋ";var hslash$1="ℏ";var Hstrok$1="Ħ";var hstrok$1="ħ";var HumpDownHump$1="≎";var HumpEqual$1="≏";var hybull$1="⁃";var hyphen$1="‐";var Iacute$3="Í";var iacute$3="í";var ic$1="⁣";var Icirc$3="Î";var icirc$3="î";var Icy$1="И";var icy$1="и";var Idot$1="İ";var IEcy$1="Е";var iecy$1="е";var iexcl$3="¡";var iff$1="⇔";var ifr$1="𝔦";var Ifr$1="ℑ";var Igrave$3="Ì";var igrave$3="ì";var ii$1="ⅈ";var iiiint$1="⨌";var iiint$1="∭";var iinfin$1="⧜";var iiota$1="℩";var IJlig$1="Ĳ";var ijlig$1="ĳ";var Imacr$1="Ī";var imacr$1="ī";var image$1="ℑ";var ImaginaryI$1="ⅈ";var imagline$1="ℐ";var imagpart$1="ℑ";var imath$1="ı";var Im$1="ℑ";var imof$1="⊷";var imped$1="Ƶ";var Implies$1="⇒";var incare$1="℅";var infin$1="∞";var infintie$1="⧝";var inodot$1="ı";var intcal$1="⊺";var int$1="∫";var Int$1="∬";var integers$1="ℤ";var Integral$1="∫";var intercal$1="⊺";var Intersection$1="⋂";var intlarhk$1="⨗";var intprod$1="⨼";var InvisibleComma$1="⁣";var InvisibleTimes$1="⁢";var IOcy$1="Ё";var iocy$1="ё";var Iogon$1="Į";var iogon$1="į";var Iopf$1="𝕀";var iopf$1="𝕚";var Iota$1="Ι";var iota$1="ι";var iprod$1="⨼";var iquest$3="¿";var iscr$1="𝒾";var Iscr$1="ℐ";var isin$1="∈";var isindot$1="⋵";var isinE$1="⋹";var isins$1="⋴";var isinsv$1="⋳";var isinv$1="∈";var it$1="⁢";var Itilde$1="Ĩ";var itilde$1="ĩ";var Iukcy$1="І";var iukcy$1="і";var Iuml$3="Ï";var iuml$3="ï";var Jcirc$1="Ĵ";var jcirc$1="ĵ";var Jcy$1="Й";var jcy$1="й";var Jfr$1="𝔍";var jfr$1="𝔧";var jmath$1="ȷ";var Jopf$1="𝕁";var jopf$1="𝕛";var Jscr$1="𝒥";var jscr$1="𝒿";var Jsercy$1="Ј";var jsercy$1="ј";var Jukcy$1="Є";var jukcy$1="є";var Kappa$1="Κ";var kappa$1="κ";var kappav$1="ϰ";var Kcedil$1="Ķ";var kcedil$1="ķ";var Kcy$1="К";var kcy$1="к";var Kfr$1="𝔎";var kfr$1="𝔨";var kgreen$1="ĸ";var KHcy$1="Х";var khcy$1="х";var KJcy$1="Ќ";var kjcy$1="ќ";var Kopf$1="𝕂";var kopf$1="𝕜";var Kscr$1="𝒦";var kscr$1="𝓀";var lAarr$1="⇚";var Lacute$1="Ĺ";var lacute$1="ĺ";var laemptyv$1="⦴";var lagran$1="ℒ";var Lambda$1="Λ";var lambda$1="λ";var lang$1="⟨";var Lang$1="⟪";var langd$1="⦑";var langle$1="⟨";var lap$1="⪅";var Laplacetrf$1="ℒ";var laquo$3="«";var larrb$1="⇤";var larrbfs$1="⤟";var larr$1="←";var Larr$1="↞";var lArr$1="⇐";var larrfs$1="⤝";var larrhk$1="↩";var larrlp$1="↫";var larrpl$1="⤹";var larrsim$1="⥳";var larrtl$1="↢";var latail$1="⤙";var lAtail$1="⤛";var lat$1="⪫";var late$1="⪭";var lates$1="⪭︀";var lbarr$1="⤌";var lBarr$1="⤎";var lbbrk$1="❲";var lbrace$1="{";var lbrack$1="[";var lbrke$1="⦋";var lbrksld$1="⦏";var lbrkslu$1="⦍";var Lcaron$1="Ľ";var lcaron$1="ľ";var Lcedil$1="Ļ";var lcedil$1="ļ";var lceil$1="⌈";var lcub$1="{";var Lcy$1="Л";var lcy$1="л";var ldca$1="⤶";var ldquo$1="“";var ldquor$1="„";var ldrdhar$1="⥧";var ldrushar$1="⥋";var ldsh$1="↲";var le$1="≤";var lE$1="≦";var LeftAngleBracket$1="⟨";var LeftArrowBar$1="⇤";var leftarrow$1="←";var LeftArrow$1="←";var Leftarrow$1="⇐";var LeftArrowRightArrow$1="⇆";var leftarrowtail$1="↢";var LeftCeiling$1="⌈";var LeftDoubleBracket$1="⟦";var LeftDownTeeVector$1="⥡";var LeftDownVectorBar$1="⥙";var LeftDownVector$1="⇃";var LeftFloor$1="⌊";var leftharpoondown$1="↽";var leftharpoonup$1="↼";var leftleftarrows$1="⇇";var leftrightarrow$1="↔";var LeftRightArrow$1="↔";var Leftrightarrow$1="⇔";var leftrightarrows$1="⇆";var leftrightharpoons$1="⇋";var leftrightsquigarrow$1="↭";var LeftRightVector$1="⥎";var LeftTeeArrow$1="↤";var LeftTee$1="⊣";var LeftTeeVector$1="⥚";var leftthreetimes$1="⋋";var LeftTriangleBar$1="⧏";var LeftTriangle$1="⊲";var LeftTriangleEqual$1="⊴";var LeftUpDownVector$1="⥑";var LeftUpTeeVector$1="⥠";var LeftUpVectorBar$1="⥘";var LeftUpVector$1="↿";var LeftVectorBar$1="⥒";var LeftVector$1="↼";var lEg$1="⪋";var leg$1="⋚";var leq$1="≤";var leqq$1="≦";var leqslant$1="⩽";var lescc$1="⪨";var les$1="⩽";var lesdot$1="⩿";var lesdoto$1="⪁";var lesdotor$1="⪃";var lesg$1="⋚︀";var lesges$1="⪓";var lessapprox$1="⪅";var lessdot$1="⋖";var lesseqgtr$1="⋚";var lesseqqgtr$1="⪋";var LessEqualGreater$1="⋚";var LessFullEqual$1="≦";var LessGreater$1="≶";var lessgtr$1="≶";var LessLess$1="⪡";var lesssim$1="≲";var LessSlantEqual$1="⩽";var LessTilde$1="≲";var lfisht$1="⥼";var lfloor$1="⌊";var Lfr$1="𝔏";var lfr$1="𝔩";var lg$1="≶";var lgE$1="⪑";var lHar$1="⥢";var lhard$1="↽";var lharu$1="↼";var lharul$1="⥪";var lhblk$1="▄";var LJcy$1="Љ";var ljcy$1="љ";var llarr$1="⇇";var ll$1="≪";var Ll$1="⋘";var llcorner$1="⌞";var Lleftarrow$1="⇚";var llhard$1="⥫";var lltri$1="◺";var Lmidot$1="Ŀ";var lmidot$1="ŀ";var lmoustache$1="⎰";var lmoust$1="⎰";var lnap$1="⪉";var lnapprox$1="⪉";var lne$1="⪇";var lnE$1="≨";var lneq$1="⪇";var lneqq$1="≨";var lnsim$1="⋦";var loang$1="⟬";var loarr$1="⇽";var lobrk$1="⟦";var longleftarrow$1="⟵";var LongLeftArrow$1="⟵";var Longleftarrow$1="⟸";var longleftrightarrow$1="⟷";var LongLeftRightArrow$1="⟷";var Longleftrightarrow$1="⟺";var longmapsto$1="⟼";var longrightarrow$1="⟶";var LongRightArrow$1="⟶";var Longrightarrow$1="⟹";var looparrowleft$1="↫";var looparrowright$1="↬";var lopar$1="⦅";var Lopf$1="𝕃";var lopf$1="𝕝";var loplus$1="⨭";var lotimes$1="⨴";var lowast$1="∗";var lowbar$1="_";var LowerLeftArrow$1="↙";var LowerRightArrow$1="↘";var loz$1="◊";var lozenge$1="◊";var lozf$1="⧫";var lpar$1="(";var lparlt$1="⦓";var lrarr$1="⇆";var lrcorner$1="⌟";var lrhar$1="⇋";var lrhard$1="⥭";var lrm$1="‎";var lrtri$1="⊿";var lsaquo$1="‹";var lscr$1="𝓁";var Lscr$1="ℒ";var lsh$1="↰";var Lsh$1="↰";var lsim$1="≲";var lsime$1="⪍";var lsimg$1="⪏";var lsqb$1="[";var lsquo$1="‘";var lsquor$1="‚";var Lstrok$1="Ł";var lstrok$1="ł";var ltcc$1="⪦";var ltcir$1="⩹";var lt$5="<";var LT$3="<";var Lt$1="≪";var ltdot$1="⋖";var lthree$1="⋋";var ltimes$1="⋉";var ltlarr$1="⥶";var ltquest$1="⩻";var ltri$1="◃";var ltrie$1="⊴";var ltrif$1="◂";var ltrPar$1="⦖";var lurdshar$1="⥊";var luruhar$1="⥦";var lvertneqq$1="≨︀";var lvnE$1="≨︀";var macr$3="¯";var male$1="♂";var malt$1="✠";var maltese$1="✠";var map$2="↦";var mapsto$1="↦";var mapstodown$1="↧";var mapstoleft$1="↤";var mapstoup$1="↥";var marker$1="▮";var mcomma$1="⨩";var Mcy$1="М";var mcy$1="м";var mdash$1="—";var mDDot$1="∺";var measuredangle$1="∡";var MediumSpace$1=" ";var Mellintrf$1="ℳ";var Mfr$1="𝔐";var mfr$1="𝔪";var mho$1="℧";var micro$3="µ";var midast$1="*";var midcir$1="⫰";var mid$1="∣";var middot$3="·";var minusb$1="⊟";var minus$1="−";var minusd$1="∸";var minusdu$1="⨪";var MinusPlus$1="∓";var mlcp$1="⫛";var mldr$1="…";var mnplus$1="∓";var models$1="⊧";var Mopf$1="𝕄";var mopf$1="𝕞";var mp$1="∓";var mscr$1="𝓂";var Mscr$1="ℳ";var mstpos$1="∾";var Mu$1="Μ";var mu$1="μ";var multimap$1="⊸";var mumap$1="⊸";var nabla$1="∇";var Nacute$1="Ń";var nacute$1="ń";var nang$1="∠⃒";var nap$1="≉";var napE$1="⩰̸";var napid$1="≋̸";var napos$1="ŉ";var napprox$1="≉";var natural$1="♮";var naturals$1="ℕ";var natur$1="♮";var nbsp$3=" ";var nbump$1="≎̸";var nbumpe$1="≏̸";var ncap$1="⩃";var Ncaron$1="Ň";var ncaron$1="ň";var Ncedil$1="Ņ";var ncedil$1="ņ";var ncong$1="≇";var ncongdot$1="⩭̸";var ncup$1="⩂";var Ncy$1="Н";var ncy$1="н";var ndash$1="–";var nearhk$1="⤤";var nearr$1="↗";var neArr$1="⇗";var nearrow$1="↗";var ne$1="≠";var nedot$1="≐̸";var NegativeMediumSpace$1="​";var NegativeThickSpace$1="​";var NegativeThinSpace$1="​";var NegativeVeryThinSpace$1="​";var nequiv$1="≢";var nesear$1="⤨";var nesim$1="≂̸";var NestedGreaterGreater$1="≫";var NestedLessLess$1="≪";var NewLine$1="\n";var nexist$1="∄";var nexists$1="∄";var Nfr$1="𝔑";var nfr$1="𝔫";var ngE$1="≧̸";var nge$1="≱";var ngeq$1="≱";var ngeqq$1="≧̸";var ngeqslant$1="⩾̸";var nges$1="⩾̸";var nGg$1="⋙̸";var ngsim$1="≵";var nGt$1="≫⃒";var ngt$1="≯";var ngtr$1="≯";var nGtv$1="≫̸";var nharr$1="↮";var nhArr$1="⇎";var nhpar$1="⫲";var ni$1="∋";var nis$1="⋼";var nisd$1="⋺";var niv$1="∋";var NJcy$1="Њ";var njcy$1="њ";var nlarr$1="↚";var nlArr$1="⇍";var nldr$1="‥";var nlE$1="≦̸";var nle$1="≰";var nleftarrow$1="↚";var nLeftarrow$1="⇍";var nleftrightarrow$1="↮";var nLeftrightarrow$1="⇎";var nleq$1="≰";var nleqq$1="≦̸";var nleqslant$1="⩽̸";var nles$1="⩽̸";var nless$1="≮";var nLl$1="⋘̸";var nlsim$1="≴";var nLt$1="≪⃒";var nlt$1="≮";var nltri$1="⋪";var nltrie$1="⋬";var nLtv$1="≪̸";var nmid$1="∤";var NoBreak$1="⁠";var NonBreakingSpace$1=" ";var nopf$1="𝕟";var Nopf$1="ℕ";var Not$1="⫬";var not$3="¬";var NotCongruent$1="≢";var NotCupCap$1="≭";var NotDoubleVerticalBar$1="∦";var NotElement$1="∉";var NotEqual$1="≠";var NotEqualTilde$1="≂̸";var NotExists$1="∄";var NotGreater$1="≯";var NotGreaterEqual$1="≱";var NotGreaterFullEqual$1="≧̸";var NotGreaterGreater$1="≫̸";var NotGreaterLess$1="≹";var NotGreaterSlantEqual$1="⩾̸";var NotGreaterTilde$1="≵";var NotHumpDownHump$1="≎̸";var NotHumpEqual$1="≏̸";var notin$1="∉";var notindot$1="⋵̸";var notinE$1="⋹̸";var notinva$1="∉";var notinvb$1="⋷";var notinvc$1="⋶";var NotLeftTriangleBar$1="⧏̸";var NotLeftTriangle$1="⋪";var NotLeftTriangleEqual$1="⋬";var NotLess$1="≮";var NotLessEqual$1="≰";var NotLessGreater$1="≸";var NotLessLess$1="≪̸";var NotLessSlantEqual$1="⩽̸";var NotLessTilde$1="≴";var NotNestedGreaterGreater$1="⪢̸";var NotNestedLessLess$1="⪡̸";var notni$1="∌";var notniva$1="∌";var notnivb$1="⋾";var notnivc$1="⋽";var NotPrecedes$1="⊀";var NotPrecedesEqual$1="⪯̸";var NotPrecedesSlantEqual$1="⋠";var NotReverseElement$1="∌";var NotRightTriangleBar$1="⧐̸";var NotRightTriangle$1="⋫";var NotRightTriangleEqual$1="⋭";var NotSquareSubset$1="⊏̸";var NotSquareSubsetEqual$1="⋢";var NotSquareSuperset$1="⊐̸";var NotSquareSupersetEqual$1="⋣";var NotSubset$1="⊂⃒";var NotSubsetEqual$1="⊈";var NotSucceeds$1="⊁";var NotSucceedsEqual$1="⪰̸";var NotSucceedsSlantEqual$1="⋡";var NotSucceedsTilde$1="≿̸";var NotSuperset$1="⊃⃒";var NotSupersetEqual$1="⊉";var NotTilde$1="≁";var NotTildeEqual$1="≄";var NotTildeFullEqual$1="≇";var NotTildeTilde$1="≉";var NotVerticalBar$1="∤";var nparallel$1="∦";var npar$1="∦";var nparsl$1="⫽⃥";var npart$1="∂̸";var npolint$1="⨔";var npr$1="⊀";var nprcue$1="⋠";var nprec$1="⊀";var npreceq$1="⪯̸";var npre$1="⪯̸";var nrarrc$1="⤳̸";var nrarr$1="↛";var nrArr$1="⇏";var nrarrw$1="↝̸";var nrightarrow$1="↛";var nRightarrow$1="⇏";var nrtri$1="⋫";var nrtrie$1="⋭";var nsc$1="⊁";var nsccue$1="⋡";var nsce$1="⪰̸";var Nscr$1="𝒩";var nscr$1="𝓃";var nshortmid$1="∤";var nshortparallel$1="∦";var nsim$1="≁";var nsime$1="≄";var nsimeq$1="≄";var nsmid$1="∤";var nspar$1="∦";var nsqsube$1="⋢";var nsqsupe$1="⋣";var nsub$1="⊄";var nsubE$1="⫅̸";var nsube$1="⊈";var nsubset$1="⊂⃒";var nsubseteq$1="⊈";var nsubseteqq$1="⫅̸";var nsucc$1="⊁";var nsucceq$1="⪰̸";var nsup$1="⊅";var nsupE$1="⫆̸";var nsupe$1="⊉";var nsupset$1="⊃⃒";var nsupseteq$1="⊉";var nsupseteqq$1="⫆̸";var ntgl$1="≹";var Ntilde$3="Ñ";var ntilde$3="ñ";var ntlg$1="≸";var ntriangleleft$1="⋪";var ntrianglelefteq$1="⋬";var ntriangleright$1="⋫";var ntrianglerighteq$1="⋭";var Nu$1="Ν";var nu$1="ν";var num$1="#";var numero$1="№";var numsp$1=" ";var nvap$1="≍⃒";var nvdash$1="⊬";var nvDash$1="⊭";var nVdash$1="⊮";var nVDash$1="⊯";var nvge$1="≥⃒";var nvgt$1=">⃒";var nvHarr$1="⤄";var nvinfin$1="⧞";var nvlArr$1="⤂";var nvle$1="≤⃒";var nvlt$1="<⃒";var nvltrie$1="⊴⃒";var nvrArr$1="⤃";var nvrtrie$1="⊵⃒";var nvsim$1="∼⃒";var nwarhk$1="⤣";var nwarr$1="↖";var nwArr$1="⇖";var nwarrow$1="↖";var nwnear$1="⤧";var Oacute$3="Ó";var oacute$3="ó";var oast$1="⊛";var Ocirc$3="Ô";var ocirc$3="ô";var ocir$1="⊚";var Ocy$1="О";var ocy$1="о";var odash$1="⊝";var Odblac$1="Ő";var odblac$1="ő";var odiv$1="⨸";var odot$1="⊙";var odsold$1="⦼";var OElig$1="Œ";var oelig$1="œ";var ofcir$1="⦿";var Ofr$1="𝔒";var ofr$1="𝔬";var ogon$1="˛";var Ograve$3="Ò";var ograve$3="ò";var ogt$1="⧁";var ohbar$1="⦵";var ohm$1="Ω";var oint$1="∮";var olarr$1="↺";var olcir$1="⦾";var olcross$1="⦻";var oline$1="‾";var olt$1="⧀";var Omacr$1="Ō";var omacr$1="ō";var Omega$1="Ω";var omega$1="ω";var Omicron$1="Ο";var omicron$1="ο";var omid$1="⦶";var ominus$1="⊖";var Oopf$1="𝕆";var oopf$1="𝕠";var opar$1="⦷";var OpenCurlyDoubleQuote$1="“";var OpenCurlyQuote$1="‘";var operp$1="⦹";var oplus$1="⊕";var orarr$1="↻";var Or$1="⩔";var or$1="∨";var ord$1="⩝";var order$1="ℴ";var orderof$1="ℴ";var ordf$3="ª";var ordm$3="º";var origof$1="⊶";var oror$1="⩖";var orslope$1="⩗";var orv$1="⩛";var oS$1="Ⓢ";var Oscr$1="𝒪";var oscr$1="ℴ";var Oslash$3="Ø";var oslash$3="ø";var osol$1="⊘";var Otilde$3="Õ";var otilde$3="õ";var otimesas$1="⨶";var Otimes$1="⨷";var otimes$1="⊗";var Ouml$3="Ö";var ouml$3="ö";var ovbar$1="⌽";var OverBar$1="‾";var OverBrace$1="⏞";var OverBracket$1="⎴";var OverParenthesis$1="⏜";var para$3="¶";var parallel$1="∥";var par$1="∥";var parsim$1="⫳";var parsl$1="⫽";var part$1="∂";var PartialD$1="∂";var Pcy$1="П";var pcy$1="п";var percnt$1="%";var period$1=".";var permil$1="‰";var perp$1="⊥";var pertenk$1="‱";var Pfr$1="𝔓";var pfr$1="𝔭";var Phi$1="Φ";var phi$1="φ";var phiv$1="ϕ";var phmmat$1="ℳ";var phone$1="☎";var Pi$1="Π";var pi$1="π";var pitchfork$1="⋔";var piv$1="ϖ";var planck$1="ℏ";var planckh$1="ℎ";var plankv$1="ℏ";var plusacir$1="⨣";var plusb$1="⊞";var pluscir$1="⨢";var plus$1="+";var plusdo$1="∔";var plusdu$1="⨥";var pluse$1="⩲";var PlusMinus$1="±";var plusmn$3="±";var plussim$1="⨦";var plustwo$1="⨧";var pm$1="±";var Poincareplane$1="ℌ";var pointint$1="⨕";var popf$1="𝕡";var Popf$1="ℙ";var pound$3="£";var prap$1="⪷";var Pr$1="⪻";var pr$1="≺";var prcue$1="≼";var precapprox$1="⪷";var prec$1="≺";var preccurlyeq$1="≼";var Precedes$1="≺";var PrecedesEqual$1="⪯";var PrecedesSlantEqual$1="≼";var PrecedesTilde$1="≾";var preceq$1="⪯";var precnapprox$1="⪹";var precneqq$1="⪵";var precnsim$1="⋨";var pre$1="⪯";var prE$1="⪳";var precsim$1="≾";var prime$1="′";var Prime$1="″";var primes$1="ℙ";var prnap$1="⪹";var prnE$1="⪵";var prnsim$1="⋨";var prod$1="∏";var Product$1="∏";var profalar$1="⌮";var profline$1="⌒";var profsurf$1="⌓";var prop$1="∝";var Proportional$1="∝";var Proportion$1="∷";var propto$1="∝";var prsim$1="≾";var prurel$1="⊰";var Pscr$1="𝒫";var pscr$1="𝓅";var Psi$1="Ψ";var psi$1="ψ";var puncsp$1=" ";var Qfr$1="𝔔";var qfr$1="𝔮";var qint$1="⨌";var qopf$1="𝕢";var Qopf$1="ℚ";var qprime$1="⁗";var Qscr$1="𝒬";var qscr$1="𝓆";var quaternions$1="ℍ";var quatint$1="⨖";var quest$1="?";var questeq$1="≟";var quot$5="\"";var QUOT$3="\"";var rAarr$1="⇛";var race$1="∽̱";var Racute$1="Ŕ";var racute$1="ŕ";var radic$1="√";var raemptyv$1="⦳";var rang$1="⟩";var Rang$1="⟫";var rangd$1="⦒";var range$1="⦥";var rangle$1="⟩";var raquo$3="»";var rarrap$1="⥵";var rarrb$1="⇥";var rarrbfs$1="⤠";var rarrc$1="⤳";var rarr$1="→";var Rarr$1="↠";var rArr$1="⇒";var rarrfs$1="⤞";var rarrhk$1="↪";var rarrlp$1="↬";var rarrpl$1="⥅";var rarrsim$1="⥴";var Rarrtl$1="⤖";var rarrtl$1="↣";var rarrw$1="↝";var ratail$1="⤚";var rAtail$1="⤜";var ratio$1="∶";var rationals$1="ℚ";var rbarr$1="⤍";var rBarr$1="⤏";var RBarr$1="⤐";var rbbrk$1="❳";var rbrace$1="}";var rbrack$1="]";var rbrke$1="⦌";var rbrksld$1="⦎";var rbrkslu$1="⦐";var Rcaron$1="Ř";var rcaron$1="ř";var Rcedil$1="Ŗ";var rcedil$1="ŗ";var rceil$1="⌉";var rcub$1="}";var Rcy$1="Р";var rcy$1="р";var rdca$1="⤷";var rdldhar$1="⥩";var rdquo$1="”";var rdquor$1="”";var rdsh$1="↳";var real$1="ℜ";var realine$1="ℛ";var realpart$1="ℜ";var reals$1="ℝ";var Re$1="ℜ";var rect$1="▭";var reg$3="®";var REG$3="®";var ReverseElement$1="∋";var ReverseEquilibrium$1="⇋";var ReverseUpEquilibrium$1="⥯";var rfisht$1="⥽";var rfloor$1="⌋";var rfr$1="𝔯";var Rfr$1="ℜ";var rHar$1="⥤";var rhard$1="⇁";var rharu$1="⇀";var rharul$1="⥬";var Rho$1="Ρ";var rho$1="ρ";var rhov$1="ϱ";var RightAngleBracket$1="⟩";var RightArrowBar$1="⇥";var rightarrow$1="→";var RightArrow$1="→";var Rightarrow$1="⇒";var RightArrowLeftArrow$1="⇄";var rightarrowtail$1="↣";var RightCeiling$1="⌉";var RightDoubleBracket$1="⟧";var RightDownTeeVector$1="⥝";var RightDownVectorBar$1="⥕";var RightDownVector$1="⇂";var RightFloor$1="⌋";var rightharpoondown$1="⇁";var rightharpoonup$1="⇀";var rightleftarrows$1="⇄";var rightleftharpoons$1="⇌";var rightrightarrows$1="⇉";var rightsquigarrow$1="↝";var RightTeeArrow$1="↦";var RightTee$1="⊢";var RightTeeVector$1="⥛";var rightthreetimes$1="⋌";var RightTriangleBar$1="⧐";var RightTriangle$1="⊳";var RightTriangleEqual$1="⊵";var RightUpDownVector$1="⥏";var RightUpTeeVector$1="⥜";var RightUpVectorBar$1="⥔";var RightUpVector$1="↾";var RightVectorBar$1="⥓";var RightVector$1="⇀";var ring$1="˚";var risingdotseq$1="≓";var rlarr$1="⇄";var rlhar$1="⇌";var rlm$1="‏";var rmoustache$1="⎱";var rmoust$1="⎱";var rnmid$1="⫮";var roang$1="⟭";var roarr$1="⇾";var robrk$1="⟧";var ropar$1="⦆";var ropf$1="𝕣";var Ropf$1="ℝ";var roplus$1="⨮";var rotimes$1="⨵";var RoundImplies$1="⥰";var rpar$1=")";var rpargt$1="⦔";var rppolint$1="⨒";var rrarr$1="⇉";var Rrightarrow$1="⇛";var rsaquo$1="›";var rscr$1="𝓇";var Rscr$1="ℛ";var rsh$1="↱";var Rsh$1="↱";var rsqb$1="]";var rsquo$1="’";var rsquor$1="’";var rthree$1="⋌";var rtimes$1="⋊";var rtri$1="▹";var rtrie$1="⊵";var rtrif$1="▸";var rtriltri$1="⧎";var RuleDelayed$1="⧴";var ruluhar$1="⥨";var rx$2="℞";var Sacute$1="Ś";var sacute$1="ś";var sbquo$1="‚";var scap$1="⪸";var Scaron$1="Š";var scaron$1="š";var Sc$1="⪼";var sc$1="≻";var sccue$1="≽";var sce$1="⪰";var scE$1="⪴";var Scedil$1="Ş";var scedil$1="ş";var Scirc$1="Ŝ";var scirc$1="ŝ";var scnap$1="⪺";var scnE$1="⪶";var scnsim$1="⋩";var scpolint$1="⨓";var scsim$1="≿";var Scy$1="С";var scy$1="с";var sdotb$1="⊡";var sdot$1="⋅";var sdote$1="⩦";var searhk$1="⤥";var searr$1="↘";var seArr$1="⇘";var searrow$1="↘";var sect$3="§";var semi$1=";";var seswar$1="⤩";var setminus$1="∖";var setmn$1="∖";var sext$1="✶";var Sfr$1="𝔖";var sfr$1="𝔰";var sfrown$1="⌢";var sharp$1="♯";var SHCHcy$1="Щ";var shchcy$1="щ";var SHcy$1="Ш";var shcy$1="ш";var ShortDownArrow$1="↓";var ShortLeftArrow$1="←";var shortmid$1="∣";var shortparallel$1="∥";var ShortRightArrow$1="→";var ShortUpArrow$1="↑";var shy$3="­";var Sigma$1="Σ";var sigma$1="σ";var sigmaf$1="ς";var sigmav$1="ς";var sim$1="∼";var simdot$1="⩪";var sime$1="≃";var simeq$1="≃";var simg$1="⪞";var simgE$1="⪠";var siml$1="⪝";var simlE$1="⪟";var simne$1="≆";var simplus$1="⨤";var simrarr$1="⥲";var slarr$1="←";var SmallCircle$1="∘";var smallsetminus$1="∖";var smashp$1="⨳";var smeparsl$1="⧤";var smid$1="∣";var smile$1="⌣";var smt$1="⪪";var smte$1="⪬";var smtes$1="⪬︀";var SOFTcy$1="Ь";var softcy$1="ь";var solbar$1="⌿";var solb$1="⧄";var sol$1="/";var Sopf$1="𝕊";var sopf$1="𝕤";var spades$1="♠";var spadesuit$1="♠";var spar$1="∥";var sqcap$1="⊓";var sqcaps$1="⊓︀";var sqcup$1="⊔";var sqcups$1="⊔︀";var Sqrt$1="√";var sqsub$1="⊏";var sqsube$1="⊑";var sqsubset$1="⊏";var sqsubseteq$1="⊑";var sqsup$1="⊐";var sqsupe$1="⊒";var sqsupset$1="⊐";var sqsupseteq$1="⊒";var square$1="□";var Square$1="□";var SquareIntersection$1="⊓";var SquareSubset$1="⊏";var SquareSubsetEqual$1="⊑";var SquareSuperset$1="⊐";var SquareSupersetEqual$1="⊒";var SquareUnion$1="⊔";var squarf$1="▪";var squ$1="□";var squf$1="▪";var srarr$1="→";var Sscr$1="𝒮";var sscr$1="𝓈";var ssetmn$1="∖";var ssmile$1="⌣";var sstarf$1="⋆";var Star$1="⋆";var star$1="☆";var starf$1="★";var straightepsilon$1="ϵ";var straightphi$1="ϕ";var strns$1="¯";var sub$1="⊂";var Sub$1="⋐";var subdot$1="⪽";var subE$1="⫅";var sube$1="⊆";var subedot$1="⫃";var submult$1="⫁";var subnE$1="⫋";var subne$1="⊊";var subplus$1="⪿";var subrarr$1="⥹";var subset$1="⊂";var Subset$1="⋐";var subseteq$1="⊆";var subseteqq$1="⫅";var SubsetEqual$1="⊆";var subsetneq$1="⊊";var subsetneqq$1="⫋";var subsim$1="⫇";var subsub$1="⫕";var subsup$1="⫓";var succapprox$1="⪸";var succ$1="≻";var succcurlyeq$1="≽";var Succeeds$1="≻";var SucceedsEqual$1="⪰";var SucceedsSlantEqual$1="≽";var SucceedsTilde$1="≿";var succeq$1="⪰";var succnapprox$1="⪺";var succneqq$1="⪶";var succnsim$1="⋩";var succsim$1="≿";var SuchThat$1="∋";var sum$1="∑";var Sum$1="∑";var sung$1="♪";var sup1$3="¹";var sup2$3="²";var sup3$3="³";var sup$1="⊃";var Sup$1="⋑";var supdot$1="⪾";var supdsub$1="⫘";var supE$1="⫆";var supe$1="⊇";var supedot$1="⫄";var Superset$1="⊃";var SupersetEqual$1="⊇";var suphsol$1="⟉";var suphsub$1="⫗";var suplarr$1="⥻";var supmult$1="⫂";var supnE$1="⫌";var supne$1="⊋";var supplus$1="⫀";var supset$1="⊃";var Supset$1="⋑";var supseteq$1="⊇";var supseteqq$1="⫆";var supsetneq$1="⊋";var supsetneqq$1="⫌";var supsim$1="⫈";var supsub$1="⫔";var supsup$1="⫖";var swarhk$1="⤦";var swarr$1="↙";var swArr$1="⇙";var swarrow$1="↙";var swnwar$1="⤪";var szlig$3="ß";var Tab$1="\t";var target$2="⌖";var Tau$1="Τ";var tau$1="τ";var tbrk$1="⎴";var Tcaron$1="Ť";var tcaron$1="ť";var Tcedil$1="Ţ";var tcedil$1="ţ";var Tcy$1="Т";var tcy$1="т";var tdot$1="⃛";var telrec$1="⌕";var Tfr$1="𝔗";var tfr$1="𝔱";var there4$1="∴";var therefore$1="∴";var Therefore$1="∴";var Theta$1="Θ";var theta$1="θ";var thetasym$1="ϑ";var thetav$1="ϑ";var thickapprox$1="≈";var thicksim$1="∼";var ThickSpace$1="  ";var ThinSpace$1=" ";var thinsp$1=" ";var thkap$1="≈";var thksim$1="∼";var THORN$3="Þ";var thorn$3="þ";var tilde$1="˜";var Tilde$1="∼";var TildeEqual$1="≃";var TildeFullEqual$1="≅";var TildeTilde$1="≈";var timesbar$1="⨱";var timesb$1="⊠";var times$3="×";var timesd$1="⨰";var tint$1="∭";var toea$1="⤨";var topbot$1="⌶";var topcir$1="⫱";var top$1="⊤";var Topf$1="𝕋";var topf$1="𝕥";var topfork$1="⫚";var tosa$1="⤩";var tprime$1="‴";var trade$1="™";var TRADE$1="™";var triangle$1="▵";var triangledown$1="▿";var triangleleft$1="◃";var trianglelefteq$1="⊴";var triangleq$1="≜";var triangleright$1="▹";var trianglerighteq$1="⊵";var tridot$1="◬";var trie$1="≜";var triminus$1="⨺";var TripleDot$1="⃛";var triplus$1="⨹";var trisb$1="⧍";var tritime$1="⨻";var trpezium$1="⏢";var Tscr$1="𝒯";var tscr$1="𝓉";var TScy$1="Ц";var tscy$1="ц";var TSHcy$1="Ћ";var tshcy$1="ћ";var Tstrok$1="Ŧ";var tstrok$1="ŧ";var twixt$1="≬";var twoheadleftarrow$1="↞";var twoheadrightarrow$1="↠";var Uacute$3="Ú";var uacute$3="ú";var uarr$1="↑";var Uarr$1="↟";var uArr$1="⇑";var Uarrocir$1="⥉";var Ubrcy$1="Ў";var ubrcy$1="ў";var Ubreve$1="Ŭ";var ubreve$1="ŭ";var Ucirc$3="Û";var ucirc$3="û";var Ucy$1="У";var ucy$1="у";var udarr$1="⇅";var Udblac$1="Ű";var udblac$1="ű";var udhar$1="⥮";var ufisht$1="⥾";var Ufr$1="𝔘";var ufr$1="𝔲";var Ugrave$3="Ù";var ugrave$3="ù";var uHar$1="⥣";var uharl$1="↿";var uharr$1="↾";var uhblk$1="▀";var ulcorn$1="⌜";var ulcorner$1="⌜";var ulcrop$1="⌏";var ultri$1="◸";var Umacr$1="Ū";var umacr$1="ū";var uml$3="¨";var UnderBar$1="_";var UnderBrace$1="⏟";var UnderBracket$1="⎵";var UnderParenthesis$1="⏝";var Union$1="⋃";var UnionPlus$1="⊎";var Uogon$1="Ų";var uogon$1="ų";var Uopf$1="𝕌";var uopf$1="𝕦";var UpArrowBar$1="⤒";var uparrow$1="↑";var UpArrow$1="↑";var Uparrow$1="⇑";var UpArrowDownArrow$1="⇅";var updownarrow$1="↕";var UpDownArrow$1="↕";var Updownarrow$1="⇕";var UpEquilibrium$1="⥮";var upharpoonleft$1="↿";var upharpoonright$1="↾";var uplus$1="⊎";var UpperLeftArrow$1="↖";var UpperRightArrow$1="↗";var upsi$1="υ";var Upsi$1="ϒ";var upsih$1="ϒ";var Upsilon$1="Υ";var upsilon$1="υ";var UpTeeArrow$1="↥";var UpTee$1="⊥";var upuparrows$1="⇈";var urcorn$1="⌝";var urcorner$1="⌝";var urcrop$1="⌎";var Uring$1="Ů";var uring$1="ů";var urtri$1="◹";var Uscr$1="𝒰";var uscr$1="𝓊";var utdot$1="⋰";var Utilde$1="Ũ";var utilde$1="ũ";var utri$1="▵";var utrif$1="▴";var uuarr$1="⇈";var Uuml$3="Ü";var uuml$3="ü";var uwangle$1="⦧";var vangrt$1="⦜";var varepsilon$1="ϵ";var varkappa$1="ϰ";var varnothing$1="∅";var varphi$1="ϕ";var varpi$1="ϖ";var varpropto$1="∝";var varr$1="↕";var vArr$1="⇕";var varrho$1="ϱ";var varsigma$1="ς";var varsubsetneq$1="⊊︀";var varsubsetneqq$1="⫋︀";var varsupsetneq$1="⊋︀";var varsupsetneqq$1="⫌︀";var vartheta$1="ϑ";var vartriangleleft$1="⊲";var vartriangleright$1="⊳";var vBar$1="⫨";var Vbar$1="⫫";var vBarv$1="⫩";var Vcy$1="В";var vcy$1="в";var vdash$1="⊢";var vDash$1="⊨";var Vdash$1="⊩";var VDash$1="⊫";var Vdashl$1="⫦";var veebar$1="⊻";var vee$1="∨";var Vee$1="⋁";var veeeq$1="≚";var vellip$1="⋮";var verbar$1="|";var Verbar$1="‖";var vert$1="|";var Vert$1="‖";var VerticalBar$1="∣";var VerticalLine$1="|";var VerticalSeparator$1="❘";var VerticalTilde$1="≀";var VeryThinSpace$1=" ";var Vfr$1="𝔙";var vfr$1="𝔳";var vltri$1="⊲";var vnsub$1="⊂⃒";var vnsup$1="⊃⃒";var Vopf$1="𝕍";var vopf$1="𝕧";var vprop$1="∝";var vrtri$1="⊳";var Vscr$1="𝒱";var vscr$1="𝓋";var vsubnE$1="⫋︀";var vsubne$1="⊊︀";var vsupnE$1="⫌︀";var vsupne$1="⊋︀";var Vvdash$1="⊪";var vzigzag$1="⦚";var Wcirc$1="Ŵ";var wcirc$1="ŵ";var wedbar$1="⩟";var wedge$1="∧";var Wedge$1="⋀";var wedgeq$1="≙";var weierp$1="℘";var Wfr$1="𝔚";var wfr$1="𝔴";var Wopf$1="𝕎";var wopf$1="𝕨";var wp$1="℘";var wr$1="≀";var wreath$1="≀";var Wscr$1="𝒲";var wscr$1="𝓌";var xcap$1="⋂";var xcirc$1="◯";var xcup$1="⋃";var xdtri$1="▽";var Xfr$1="𝔛";var xfr$1="𝔵";var xharr$1="⟷";var xhArr$1="⟺";var Xi$1="Ξ";var xi$1="ξ";var xlarr$1="⟵";var xlArr$1="⟸";var xmap$1="⟼";var xnis$1="⋻";var xodot$1="⨀";var Xopf$1="𝕏";var xopf$1="𝕩";var xoplus$1="⨁";var xotime$1="⨂";var xrarr$1="⟶";var xrArr$1="⟹";var Xscr$1="𝒳";var xscr$1="𝓍";var xsqcup$1="⨆";var xuplus$1="⨄";var xutri$1="△";var xvee$1="⋁";var xwedge$1="⋀";var Yacute$3="Ý";var yacute$3="ý";var YAcy$1="Я";var yacy$1="я";var Ycirc$1="Ŷ";var ycirc$1="ŷ";var Ycy$1="Ы";var ycy$1="ы";var yen$3="¥";var Yfr$1="𝔜";var yfr$1="𝔶";var YIcy$1="Ї";var yicy$1="ї";var Yopf$1="𝕐";var yopf$1="𝕪";var Yscr$1="𝒴";var yscr$1="𝓎";var YUcy$1="Ю";var yucy$1="ю";var yuml$3="ÿ";var Yuml$1="Ÿ";var Zacute$1="Ź";var zacute$1="ź";var Zcaron$1="Ž";var zcaron$1="ž";var Zcy$1="З";var zcy$1="з";var Zdot$1="Ż";var zdot$1="ż";var zeetrf$1="ℨ";var ZeroWidthSpace$1="​";var Zeta$1="Ζ";var zeta$1="ζ";var zfr$1="𝔷";var Zfr$1="ℨ";var ZHcy$1="Ж";var zhcy$1="ж";var zigrarr$1="⇝";var zopf$1="𝕫";var Zopf$1="ℤ";var Zscr$1="𝒵";var zscr$1="𝓏";var zwj$1="‍";var zwnj$1="‌";var require$$1$4={Aacute:Aacute$3,aacute:aacute$3,Abreve:Abreve$1,abreve:abreve$1,ac:ac$1,acd:acd$1,acE:acE$1,Acirc:Acirc$3,acirc:acirc$3,acute:acute$3,Acy:Acy$1,acy:acy$1,AElig:AElig$3,aelig:aelig$3,af:af$1,Afr:Afr$1,afr:afr$1,Agrave:Agrave$3,agrave:agrave$3,alefsym:alefsym$1,aleph:aleph$1,Alpha:Alpha$1,alpha:alpha$1,Amacr:Amacr$1,amacr:amacr$1,amalg:amalg$1,amp:amp$5,AMP:AMP$3,andand:andand$1,And:And$1,and:and$1,andd:andd$1,andslope:andslope$1,andv:andv$1,ang:ang$1,ange:ange$1,angle:angle$1,angmsdaa:angmsdaa$1,angmsdab:angmsdab$1,angmsdac:angmsdac$1,angmsdad:angmsdad$1,angmsdae:angmsdae$1,angmsdaf:angmsdaf$1,angmsdag:angmsdag$1,angmsdah:angmsdah$1,angmsd:angmsd$1,angrt:angrt$1,angrtvb:angrtvb$1,angrtvbd:angrtvbd$1,angsph:angsph$1,angst:angst$1,angzarr:angzarr$1,Aogon:Aogon$1,aogon:aogon$1,Aopf:Aopf$1,aopf:aopf$1,apacir:apacir$1,ap:ap$1,apE:apE$1,ape:ape$1,apid:apid$1,apos:apos$3,ApplyFunction:ApplyFunction$1,approx:approx$1,approxeq:approxeq$1,Aring:Aring$3,aring:aring$3,Ascr:Ascr$1,ascr:ascr$1,Assign:Assign$1,ast:ast$1,asymp:asymp$1,asympeq:asympeq$1,Atilde:Atilde$3,atilde:atilde$3,Auml:Auml$3,auml:auml$3,awconint:awconint$1,awint:awint$1,backcong:backcong$1,backepsilon:backepsilon$1,backprime:backprime$1,backsim:backsim$1,backsimeq:backsimeq$1,Backslash:Backslash$1,Barv:Barv$1,barvee:barvee$1,barwed:barwed$1,Barwed:Barwed$1,barwedge:barwedge$1,bbrk:bbrk$1,bbrktbrk:bbrktbrk$1,bcong:bcong$1,Bcy:Bcy$1,bcy:bcy$1,bdquo:bdquo$1,becaus:becaus$1,because:because$1,Because:Because$1,bemptyv:bemptyv$1,bepsi:bepsi$1,bernou:bernou$1,Bernoullis:Bernoullis$1,Beta:Beta$1,beta:beta$1,beth:beth$1,between:between$1,Bfr:Bfr$1,bfr:bfr$1,bigcap:bigcap$1,bigcirc:bigcirc$1,bigcup:bigcup$1,bigodot:bigodot$1,bigoplus:bigoplus$1,bigotimes:bigotimes$1,bigsqcup:bigsqcup$1,bigstar:bigstar$1,bigtriangledown:bigtriangledown$1,bigtriangleup:bigtriangleup$1,biguplus:biguplus$1,bigvee:bigvee$1,bigwedge:bigwedge$1,bkarow:bkarow$1,blacklozenge:blacklozenge$1,blacksquare:blacksquare$1,blacktriangle:blacktriangle$1,blacktriangledown:blacktriangledown$1,blacktriangleleft:blacktriangleleft$1,blacktriangleright:blacktriangleright$1,blank:blank$1,blk12:blk12$1,blk14:blk14$1,blk34:blk34$1,block:block$1,bne:bne$1,bnequiv:bnequiv$1,bNot:bNot$1,bnot:bnot$1,Bopf:Bopf$1,bopf:bopf$1,bot:bot$1,bottom:bottom$1,bowtie:bowtie$1,boxbox:boxbox$1,boxdl:boxdl$1,boxdL:boxdL$1,boxDl:boxDl$1,boxDL:boxDL$1,boxdr:boxdr$1,boxdR:boxdR$1,boxDr:boxDr$1,boxDR:boxDR$1,boxh:boxh$1,boxH:boxH$1,boxhd:boxhd$1,boxHd:boxHd$1,boxhD:boxhD$1,boxHD:boxHD$1,boxhu:boxhu$1,boxHu:boxHu$1,boxhU:boxhU$1,boxHU:boxHU$1,boxminus:boxminus$1,boxplus:boxplus$1,boxtimes:boxtimes$1,boxul:boxul$1,boxuL:boxuL$1,boxUl:boxUl$1,boxUL:boxUL$1,boxur:boxur$1,boxuR:boxuR$1,boxUr:boxUr$1,boxUR:boxUR$1,boxv:boxv$1,boxV:boxV$1,boxvh:boxvh$1,boxvH:boxvH$1,boxVh:boxVh$1,boxVH:boxVH$1,boxvl:boxvl$1,boxvL:boxvL$1,boxVl:boxVl$1,boxVL:boxVL$1,boxvr:boxvr$1,boxvR:boxvR$1,boxVr:boxVr$1,boxVR:boxVR$1,bprime:bprime$1,breve:breve$1,Breve:Breve$1,brvbar:brvbar$3,bscr:bscr$1,Bscr:Bscr$1,bsemi:bsemi$1,bsim:bsim$1,bsime:bsime$1,bsolb:bsolb$1,bsol:bsol$1,bsolhsub:bsolhsub$1,bull:bull$1,bullet:bullet$1,bump:bump$1,bumpE:bumpE$1,bumpe:bumpe$1,Bumpeq:Bumpeq$1,bumpeq:bumpeq$1,Cacute:Cacute$1,cacute:cacute$1,capand:capand$1,capbrcup:capbrcup$1,capcap:capcap$1,cap:cap$1,Cap:Cap$1,capcup:capcup$1,capdot:capdot$1,CapitalDifferentialD:CapitalDifferentialD$1,caps:caps$1,caret:caret$1,caron:caron$1,Cayleys:Cayleys$1,ccaps:ccaps$1,Ccaron:Ccaron$1,ccaron:ccaron$1,Ccedil:Ccedil$3,ccedil:ccedil$3,Ccirc:Ccirc$1,ccirc:ccirc$1,Cconint:Cconint$1,ccups:ccups$1,ccupssm:ccupssm$1,Cdot:Cdot$1,cdot:cdot$1,cedil:cedil$3,Cedilla:Cedilla$1,cemptyv:cemptyv$1,cent:cent$3,centerdot:centerdot$1,CenterDot:CenterDot$1,cfr:cfr$1,Cfr:Cfr$1,CHcy:CHcy$1,chcy:chcy$1,check:check$1,checkmark:checkmark$1,Chi:Chi$1,chi:chi$1,circ:circ$1,circeq:circeq$1,circlearrowleft:circlearrowleft$1,circlearrowright:circlearrowright$1,circledast:circledast$1,circledcirc:circledcirc$1,circleddash:circleddash$1,CircleDot:CircleDot$1,circledR:circledR$1,circledS:circledS$1,CircleMinus:CircleMinus$1,CirclePlus:CirclePlus$1,CircleTimes:CircleTimes$1,cir:cir$1,cirE:cirE$1,cire:cire$1,cirfnint:cirfnint$1,cirmid:cirmid$1,cirscir:cirscir$1,ClockwiseContourIntegral:ClockwiseContourIntegral$1,CloseCurlyDoubleQuote:CloseCurlyDoubleQuote$1,CloseCurlyQuote:CloseCurlyQuote$1,clubs:clubs$1,clubsuit:clubsuit$1,colon:colon$1,Colon:Colon$1,Colone:Colone$1,colone:colone$1,coloneq:coloneq$1,comma:comma$1,commat:commat$1,comp:comp$1,compfn:compfn$1,complement:complement$1,complexes:complexes$1,cong:cong$1,congdot:congdot$1,Congruent:Congruent$1,conint:conint$1,Conint:Conint$1,ContourIntegral:ContourIntegral$1,copf:copf$1,Copf:Copf$1,coprod:coprod$1,Coproduct:Coproduct$1,copy:copy$3,COPY:COPY$3,copysr:copysr$1,CounterClockwiseContourIntegral:CounterClockwiseContourIntegral$1,crarr:crarr$1,cross:cross$1,Cross:Cross$1,Cscr:Cscr$1,cscr:cscr$1,csub:csub$1,csube:csube$1,csup:csup$1,csupe:csupe$1,ctdot:ctdot$1,cudarrl:cudarrl$1,cudarrr:cudarrr$1,cuepr:cuepr$1,cuesc:cuesc$1,cularr:cularr$1,cularrp:cularrp$1,cupbrcap:cupbrcap$1,cupcap:cupcap$1,CupCap:CupCap$1,cup:cup$1,Cup:Cup$1,cupcup:cupcup$1,cupdot:cupdot$1,cupor:cupor$1,cups:cups$1,curarr:curarr$1,curarrm:curarrm$1,curlyeqprec:curlyeqprec$1,curlyeqsucc:curlyeqsucc$1,curlyvee:curlyvee$1,curlywedge:curlywedge$1,curren:curren$3,curvearrowleft:curvearrowleft$1,curvearrowright:curvearrowright$1,cuvee:cuvee$1,cuwed:cuwed$1,cwconint:cwconint$1,cwint:cwint$1,cylcty:cylcty$1,dagger:dagger$1,Dagger:Dagger$1,daleth:daleth$1,darr:darr$1,Darr:Darr$1,dArr:dArr$1,dash:dash$1,Dashv:Dashv$1,dashv:dashv$1,dbkarow:dbkarow$1,dblac:dblac$1,Dcaron:Dcaron$1,dcaron:dcaron$1,Dcy:Dcy$1,dcy:dcy$1,ddagger:ddagger$1,ddarr:ddarr$1,DD:DD$1,dd:dd$1,DDotrahd:DDotrahd$1,ddotseq:ddotseq$1,deg:deg$3,Del:Del$1,Delta:Delta$1,delta:delta$1,demptyv:demptyv$1,dfisht:dfisht$1,Dfr:Dfr$1,dfr:dfr$1,dHar:dHar$1,dharl:dharl$1,dharr:dharr$1,DiacriticalAcute:DiacriticalAcute$1,DiacriticalDot:DiacriticalDot$1,DiacriticalDoubleAcute:DiacriticalDoubleAcute$1,DiacriticalGrave:DiacriticalGrave$1,DiacriticalTilde:DiacriticalTilde$1,diam:diam$1,diamond:diamond$1,Diamond:Diamond$1,diamondsuit:diamondsuit$1,diams:diams$1,die:die$1,DifferentialD:DifferentialD$1,digamma:digamma$1,disin:disin$1,div:div$1,divide:divide$3,divideontimes:divideontimes$1,divonx:divonx$1,DJcy:DJcy$1,djcy:djcy$1,dlcorn:dlcorn$1,dlcrop:dlcrop$1,dollar:dollar$1,Dopf:Dopf$1,dopf:dopf$1,Dot:Dot$1,dot:dot$1,DotDot:DotDot$1,doteq:doteq$1,doteqdot:doteqdot$1,DotEqual:DotEqual$1,dotminus:dotminus$1,dotplus:dotplus$1,dotsquare:dotsquare$1,doublebarwedge:doublebarwedge$1,DoubleContourIntegral:DoubleContourIntegral$1,DoubleDot:DoubleDot$1,DoubleDownArrow:DoubleDownArrow$1,DoubleLeftArrow:DoubleLeftArrow$1,DoubleLeftRightArrow:DoubleLeftRightArrow$1,DoubleLeftTee:DoubleLeftTee$1,DoubleLongLeftArrow:DoubleLongLeftArrow$1,DoubleLongLeftRightArrow:DoubleLongLeftRightArrow$1,DoubleLongRightArrow:DoubleLongRightArrow$1,DoubleRightArrow:DoubleRightArrow$1,DoubleRightTee:DoubleRightTee$1,DoubleUpArrow:DoubleUpArrow$1,DoubleUpDownArrow:DoubleUpDownArrow$1,DoubleVerticalBar:DoubleVerticalBar$1,DownArrowBar:DownArrowBar$1,downarrow:downarrow$1,DownArrow:DownArrow$1,Downarrow:Downarrow$1,DownArrowUpArrow:DownArrowUpArrow$1,DownBreve:DownBreve$1,downdownarrows:downdownarrows$1,downharpoonleft:downharpoonleft$1,downharpoonright:downharpoonright$1,DownLeftRightVector:DownLeftRightVector$1,DownLeftTeeVector:DownLeftTeeVector$1,DownLeftVectorBar:DownLeftVectorBar$1,DownLeftVector:DownLeftVector$1,DownRightTeeVector:DownRightTeeVector$1,DownRightVectorBar:DownRightVectorBar$1,DownRightVector:DownRightVector$1,DownTeeArrow:DownTeeArrow$1,DownTee:DownTee$1,drbkarow:drbkarow$1,drcorn:drcorn$1,drcrop:drcrop$1,Dscr:Dscr$1,dscr:dscr$1,DScy:DScy$1,dscy:dscy$1,dsol:dsol$1,Dstrok:Dstrok$1,dstrok:dstrok$1,dtdot:dtdot$1,dtri:dtri$1,dtrif:dtrif$1,duarr:duarr$1,duhar:duhar$1,dwangle:dwangle$1,DZcy:DZcy$1,dzcy:dzcy$1,dzigrarr:dzigrarr$1,Eacute:Eacute$3,eacute:eacute$3,easter:easter$1,Ecaron:Ecaron$1,ecaron:ecaron$1,Ecirc:Ecirc$3,ecirc:ecirc$3,ecir:ecir$1,ecolon:ecolon$1,Ecy:Ecy$1,ecy:ecy$1,eDDot:eDDot$1,Edot:Edot$1,edot:edot$1,eDot:eDot$1,ee:ee$1,efDot:efDot$1,Efr:Efr$1,efr:efr$1,eg:eg$1,Egrave:Egrave$3,egrave:egrave$3,egs:egs$1,egsdot:egsdot$1,el:el$1,Element:Element$2,elinters:elinters$1,ell:ell$1,els:els$1,elsdot:elsdot$1,Emacr:Emacr$1,emacr:emacr$1,empty:empty$1,emptyset:emptyset$1,EmptySmallSquare:EmptySmallSquare$1,emptyv:emptyv$1,EmptyVerySmallSquare:EmptyVerySmallSquare$1,emsp13:emsp13$1,emsp14:emsp14$1,emsp:emsp$1,ENG:ENG$1,eng:eng$1,ensp:ensp$1,Eogon:Eogon$1,eogon:eogon$1,Eopf:Eopf$1,eopf:eopf$1,epar:epar$1,eparsl:eparsl$1,eplus:eplus$1,epsi:epsi$1,Epsilon:Epsilon$1,epsilon:epsilon$1,epsiv:epsiv$1,eqcirc:eqcirc$1,eqcolon:eqcolon$1,eqsim:eqsim$1,eqslantgtr:eqslantgtr$1,eqslantless:eqslantless$1,Equal:Equal$1,equals:equals$1,EqualTilde:EqualTilde$1,equest:equest$1,Equilibrium:Equilibrium$1,equiv:equiv$1,equivDD:equivDD$1,eqvparsl:eqvparsl$1,erarr:erarr$1,erDot:erDot$1,escr:escr$1,Escr:Escr$1,esdot:esdot$1,Esim:Esim$1,esim:esim$1,Eta:Eta$1,eta:eta$1,ETH:ETH$3,eth:eth$3,Euml:Euml$3,euml:euml$3,euro:euro$1,excl:excl$1,exist:exist$1,Exists:Exists$1,expectation:expectation$1,exponentiale:exponentiale$1,ExponentialE:ExponentialE$1,fallingdotseq:fallingdotseq$1,Fcy:Fcy$1,fcy:fcy$1,female:female$1,ffilig:ffilig$1,fflig:fflig$1,ffllig:ffllig$1,Ffr:Ffr$1,ffr:ffr$1,filig:filig$1,FilledSmallSquare:FilledSmallSquare$1,FilledVerySmallSquare:FilledVerySmallSquare$1,fjlig:fjlig$1,flat:flat$1,fllig:fllig$1,fltns:fltns$1,fnof:fnof$1,Fopf:Fopf$1,fopf:fopf$1,forall:forall$1,ForAll:ForAll$1,fork:fork$1,forkv:forkv$1,Fouriertrf:Fouriertrf$1,fpartint:fpartint$1,frac12:frac12$3,frac13:frac13$1,frac14:frac14$3,frac15:frac15$1,frac16:frac16$1,frac18:frac18$1,frac23:frac23$1,frac25:frac25$1,frac34:frac34$3,frac35:frac35$1,frac38:frac38$1,frac45:frac45$1,frac56:frac56$1,frac58:frac58$1,frac78:frac78$1,frasl:frasl$1,frown:frown$1,fscr:fscr$1,Fscr:Fscr$1,gacute:gacute$1,Gamma:Gamma$1,gamma:gamma$1,Gammad:Gammad$1,gammad:gammad$1,gap:gap$1,Gbreve:Gbreve$1,gbreve:gbreve$1,Gcedil:Gcedil$1,Gcirc:Gcirc$1,gcirc:gcirc$1,Gcy:Gcy$1,gcy:gcy$1,Gdot:Gdot$1,gdot:gdot$1,ge:ge$1,gE:gE$1,gEl:gEl$1,gel:gel$1,geq:geq$1,geqq:geqq$1,geqslant:geqslant$1,gescc:gescc$1,ges:ges$1,gesdot:gesdot$1,gesdoto:gesdoto$1,gesdotol:gesdotol$1,gesl:gesl$1,gesles:gesles$1,Gfr:Gfr$1,gfr:gfr$1,gg:gg$1,Gg:Gg$1,ggg:ggg$1,gimel:gimel$1,GJcy:GJcy$1,gjcy:gjcy$1,gla:gla$1,gl:gl$1,glE:glE$1,glj:glj$1,gnap:gnap$1,gnapprox:gnapprox$1,gne:gne$1,gnE:gnE$1,gneq:gneq$1,gneqq:gneqq$1,gnsim:gnsim$1,Gopf:Gopf$1,gopf:gopf$1,grave:grave$1,GreaterEqual:GreaterEqual$1,GreaterEqualLess:GreaterEqualLess$1,GreaterFullEqual:GreaterFullEqual$1,GreaterGreater:GreaterGreater$1,GreaterLess:GreaterLess$1,GreaterSlantEqual:GreaterSlantEqual$1,GreaterTilde:GreaterTilde$1,Gscr:Gscr$1,gscr:gscr$1,gsim:gsim$1,gsime:gsime$1,gsiml:gsiml$1,gtcc:gtcc$1,gtcir:gtcir$1,gt:gt$5,GT:GT$3,Gt:Gt$1,gtdot:gtdot$1,gtlPar:gtlPar$1,gtquest:gtquest$1,gtrapprox:gtrapprox$1,gtrarr:gtrarr$1,gtrdot:gtrdot$1,gtreqless:gtreqless$1,gtreqqless:gtreqqless$1,gtrless:gtrless$1,gtrsim:gtrsim$1,gvertneqq:gvertneqq$1,gvnE:gvnE$1,Hacek:Hacek$1,hairsp:hairsp$1,half:half$1,hamilt:hamilt$1,HARDcy:HARDcy$1,hardcy:hardcy$1,harrcir:harrcir$1,harr:harr$1,hArr:hArr$1,harrw:harrw$1,Hat:Hat$1,hbar:hbar$1,Hcirc:Hcirc$1,hcirc:hcirc$1,hearts:hearts$1,heartsuit:heartsuit$1,hellip:hellip$1,hercon:hercon$1,hfr:hfr$1,Hfr:Hfr$1,HilbertSpace:HilbertSpace$1,hksearow:hksearow$1,hkswarow:hkswarow$1,hoarr:hoarr$1,homtht:homtht$1,hookleftarrow:hookleftarrow$1,hookrightarrow:hookrightarrow$1,hopf:hopf$1,Hopf:Hopf$1,horbar:horbar$1,HorizontalLine:HorizontalLine$1,hscr:hscr$1,Hscr:Hscr$1,hslash:hslash$1,Hstrok:Hstrok$1,hstrok:hstrok$1,HumpDownHump:HumpDownHump$1,HumpEqual:HumpEqual$1,hybull:hybull$1,hyphen:hyphen$1,Iacute:Iacute$3,iacute:iacute$3,ic:ic$1,Icirc:Icirc$3,icirc:icirc$3,Icy:Icy$1,icy:icy$1,Idot:Idot$1,IEcy:IEcy$1,iecy:iecy$1,iexcl:iexcl$3,iff:iff$1,ifr:ifr$1,Ifr:Ifr$1,Igrave:Igrave$3,igrave:igrave$3,ii:ii$1,iiiint:iiiint$1,iiint:iiint$1,iinfin:iinfin$1,iiota:iiota$1,IJlig:IJlig$1,ijlig:ijlig$1,Imacr:Imacr$1,imacr:imacr$1,image:image$1,ImaginaryI:ImaginaryI$1,imagline:imagline$1,imagpart:imagpart$1,imath:imath$1,Im:Im$1,imof:imof$1,imped:imped$1,Implies:Implies$1,incare:incare$1,"in":"∈",infin:infin$1,infintie:infintie$1,inodot:inodot$1,intcal:intcal$1,int:int$1,Int:Int$1,integers:integers$1,Integral:Integral$1,intercal:intercal$1,Intersection:Intersection$1,intlarhk:intlarhk$1,intprod:intprod$1,InvisibleComma:InvisibleComma$1,InvisibleTimes:InvisibleTimes$1,IOcy:IOcy$1,iocy:iocy$1,Iogon:Iogon$1,iogon:iogon$1,Iopf:Iopf$1,iopf:iopf$1,Iota:Iota$1,iota:iota$1,iprod:iprod$1,iquest:iquest$3,iscr:iscr$1,Iscr:Iscr$1,isin:isin$1,isindot:isindot$1,isinE:isinE$1,isins:isins$1,isinsv:isinsv$1,isinv:isinv$1,it:it$1,Itilde:Itilde$1,itilde:itilde$1,Iukcy:Iukcy$1,iukcy:iukcy$1,Iuml:Iuml$3,iuml:iuml$3,Jcirc:Jcirc$1,jcirc:jcirc$1,Jcy:Jcy$1,jcy:jcy$1,Jfr:Jfr$1,jfr:jfr$1,jmath:jmath$1,Jopf:Jopf$1,jopf:jopf$1,Jscr:Jscr$1,jscr:jscr$1,Jsercy:Jsercy$1,jsercy:jsercy$1,Jukcy:Jukcy$1,jukcy:jukcy$1,Kappa:Kappa$1,kappa:kappa$1,kappav:kappav$1,Kcedil:Kcedil$1,kcedil:kcedil$1,Kcy:Kcy$1,kcy:kcy$1,Kfr:Kfr$1,kfr:kfr$1,kgreen:kgreen$1,KHcy:KHcy$1,khcy:khcy$1,KJcy:KJcy$1,kjcy:kjcy$1,Kopf:Kopf$1,kopf:kopf$1,Kscr:Kscr$1,kscr:kscr$1,lAarr:lAarr$1,Lacute:Lacute$1,lacute:lacute$1,laemptyv:laemptyv$1,lagran:lagran$1,Lambda:Lambda$1,lambda:lambda$1,lang:lang$1,Lang:Lang$1,langd:langd$1,langle:langle$1,lap:lap$1,Laplacetrf:Laplacetrf$1,laquo:laquo$3,larrb:larrb$1,larrbfs:larrbfs$1,larr:larr$1,Larr:Larr$1,lArr:lArr$1,larrfs:larrfs$1,larrhk:larrhk$1,larrlp:larrlp$1,larrpl:larrpl$1,larrsim:larrsim$1,larrtl:larrtl$1,latail:latail$1,lAtail:lAtail$1,lat:lat$1,late:late$1,lates:lates$1,lbarr:lbarr$1,lBarr:lBarr$1,lbbrk:lbbrk$1,lbrace:lbrace$1,lbrack:lbrack$1,lbrke:lbrke$1,lbrksld:lbrksld$1,lbrkslu:lbrkslu$1,Lcaron:Lcaron$1,lcaron:lcaron$1,Lcedil:Lcedil$1,lcedil:lcedil$1,lceil:lceil$1,lcub:lcub$1,Lcy:Lcy$1,lcy:lcy$1,ldca:ldca$1,ldquo:ldquo$1,ldquor:ldquor$1,ldrdhar:ldrdhar$1,ldrushar:ldrushar$1,ldsh:ldsh$1,le:le$1,lE:lE$1,LeftAngleBracket:LeftAngleBracket$1,LeftArrowBar:LeftArrowBar$1,leftarrow:leftarrow$1,LeftArrow:LeftArrow$1,Leftarrow:Leftarrow$1,LeftArrowRightArrow:LeftArrowRightArrow$1,leftarrowtail:leftarrowtail$1,LeftCeiling:LeftCeiling$1,LeftDoubleBracket:LeftDoubleBracket$1,LeftDownTeeVector:LeftDownTeeVector$1,LeftDownVectorBar:LeftDownVectorBar$1,LeftDownVector:LeftDownVector$1,LeftFloor:LeftFloor$1,leftharpoondown:leftharpoondown$1,leftharpoonup:leftharpoonup$1,leftleftarrows:leftleftarrows$1,leftrightarrow:leftrightarrow$1,LeftRightArrow:LeftRightArrow$1,Leftrightarrow:Leftrightarrow$1,leftrightarrows:leftrightarrows$1,leftrightharpoons:leftrightharpoons$1,leftrightsquigarrow:leftrightsquigarrow$1,LeftRightVector:LeftRightVector$1,LeftTeeArrow:LeftTeeArrow$1,LeftTee:LeftTee$1,LeftTeeVector:LeftTeeVector$1,leftthreetimes:leftthreetimes$1,LeftTriangleBar:LeftTriangleBar$1,LeftTriangle:LeftTriangle$1,LeftTriangleEqual:LeftTriangleEqual$1,LeftUpDownVector:LeftUpDownVector$1,LeftUpTeeVector:LeftUpTeeVector$1,LeftUpVectorBar:LeftUpVectorBar$1,LeftUpVector:LeftUpVector$1,LeftVectorBar:LeftVectorBar$1,LeftVector:LeftVector$1,lEg:lEg$1,leg:leg$1,leq:leq$1,leqq:leqq$1,leqslant:leqslant$1,lescc:lescc$1,les:les$1,lesdot:lesdot$1,lesdoto:lesdoto$1,lesdotor:lesdotor$1,lesg:lesg$1,lesges:lesges$1,lessapprox:lessapprox$1,lessdot:lessdot$1,lesseqgtr:lesseqgtr$1,lesseqqgtr:lesseqqgtr$1,LessEqualGreater:LessEqualGreater$1,LessFullEqual:LessFullEqual$1,LessGreater:LessGreater$1,lessgtr:lessgtr$1,LessLess:LessLess$1,lesssim:lesssim$1,LessSlantEqual:LessSlantEqual$1,LessTilde:LessTilde$1,lfisht:lfisht$1,lfloor:lfloor$1,Lfr:Lfr$1,lfr:lfr$1,lg:lg$1,lgE:lgE$1,lHar:lHar$1,lhard:lhard$1,lharu:lharu$1,lharul:lharul$1,lhblk:lhblk$1,LJcy:LJcy$1,ljcy:ljcy$1,llarr:llarr$1,ll:ll$1,Ll:Ll$1,llcorner:llcorner$1,Lleftarrow:Lleftarrow$1,llhard:llhard$1,lltri:lltri$1,Lmidot:Lmidot$1,lmidot:lmidot$1,lmoustache:lmoustache$1,lmoust:lmoust$1,lnap:lnap$1,lnapprox:lnapprox$1,lne:lne$1,lnE:lnE$1,lneq:lneq$1,lneqq:lneqq$1,lnsim:lnsim$1,loang:loang$1,loarr:loarr$1,lobrk:lobrk$1,longleftarrow:longleftarrow$1,LongLeftArrow:LongLeftArrow$1,Longleftarrow:Longleftarrow$1,longleftrightarrow:longleftrightarrow$1,LongLeftRightArrow:LongLeftRightArrow$1,Longleftrightarrow:Longleftrightarrow$1,longmapsto:longmapsto$1,longrightarrow:longrightarrow$1,LongRightArrow:LongRightArrow$1,Longrightarrow:Longrightarrow$1,looparrowleft:looparrowleft$1,looparrowright:looparrowright$1,lopar:lopar$1,Lopf:Lopf$1,lopf:lopf$1,loplus:loplus$1,lotimes:lotimes$1,lowast:lowast$1,lowbar:lowbar$1,LowerLeftArrow:LowerLeftArrow$1,LowerRightArrow:LowerRightArrow$1,loz:loz$1,lozenge:lozenge$1,lozf:lozf$1,lpar:lpar$1,lparlt:lparlt$1,lrarr:lrarr$1,lrcorner:lrcorner$1,lrhar:lrhar$1,lrhard:lrhard$1,lrm:lrm$1,lrtri:lrtri$1,lsaquo:lsaquo$1,lscr:lscr$1,Lscr:Lscr$1,lsh:lsh$1,Lsh:Lsh$1,lsim:lsim$1,lsime:lsime$1,lsimg:lsimg$1,lsqb:lsqb$1,lsquo:lsquo$1,lsquor:lsquor$1,Lstrok:Lstrok$1,lstrok:lstrok$1,ltcc:ltcc$1,ltcir:ltcir$1,lt:lt$5,LT:LT$3,Lt:Lt$1,ltdot:ltdot$1,lthree:lthree$1,ltimes:ltimes$1,ltlarr:ltlarr$1,ltquest:ltquest$1,ltri:ltri$1,ltrie:ltrie$1,ltrif:ltrif$1,ltrPar:ltrPar$1,lurdshar:lurdshar$1,luruhar:luruhar$1,lvertneqq:lvertneqq$1,lvnE:lvnE$1,macr:macr$3,male:male$1,malt:malt$1,maltese:maltese$1,"Map":"⤅",map:map$2,mapsto:mapsto$1,mapstodown:mapstodown$1,mapstoleft:mapstoleft$1,mapstoup:mapstoup$1,marker:marker$1,mcomma:mcomma$1,Mcy:Mcy$1,mcy:mcy$1,mdash:mdash$1,mDDot:mDDot$1,measuredangle:measuredangle$1,MediumSpace:MediumSpace$1,Mellintrf:Mellintrf$1,Mfr:Mfr$1,mfr:mfr$1,mho:mho$1,micro:micro$3,midast:midast$1,midcir:midcir$1,mid:mid$1,middot:middot$3,minusb:minusb$1,minus:minus$1,minusd:minusd$1,minusdu:minusdu$1,MinusPlus:MinusPlus$1,mlcp:mlcp$1,mldr:mldr$1,mnplus:mnplus$1,models:models$1,Mopf:Mopf$1,mopf:mopf$1,mp:mp$1,mscr:mscr$1,Mscr:Mscr$1,mstpos:mstpos$1,Mu:Mu$1,mu:mu$1,multimap:multimap$1,mumap:mumap$1,nabla:nabla$1,Nacute:Nacute$1,nacute:nacute$1,nang:nang$1,nap:nap$1,napE:napE$1,napid:napid$1,napos:napos$1,napprox:napprox$1,natural:natural$1,naturals:naturals$1,natur:natur$1,nbsp:nbsp$3,nbump:nbump$1,nbumpe:nbumpe$1,ncap:ncap$1,Ncaron:Ncaron$1,ncaron:ncaron$1,Ncedil:Ncedil$1,ncedil:ncedil$1,ncong:ncong$1,ncongdot:ncongdot$1,ncup:ncup$1,Ncy:Ncy$1,ncy:ncy$1,ndash:ndash$1,nearhk:nearhk$1,nearr:nearr$1,neArr:neArr$1,nearrow:nearrow$1,ne:ne$1,nedot:nedot$1,NegativeMediumSpace:NegativeMediumSpace$1,NegativeThickSpace:NegativeThickSpace$1,NegativeThinSpace:NegativeThinSpace$1,NegativeVeryThinSpace:NegativeVeryThinSpace$1,nequiv:nequiv$1,nesear:nesear$1,nesim:nesim$1,NestedGreaterGreater:NestedGreaterGreater$1,NestedLessLess:NestedLessLess$1,NewLine:NewLine$1,nexist:nexist$1,nexists:nexists$1,Nfr:Nfr$1,nfr:nfr$1,ngE:ngE$1,nge:nge$1,ngeq:ngeq$1,ngeqq:ngeqq$1,ngeqslant:ngeqslant$1,nges:nges$1,nGg:nGg$1,ngsim:ngsim$1,nGt:nGt$1,ngt:ngt$1,ngtr:ngtr$1,nGtv:nGtv$1,nharr:nharr$1,nhArr:nhArr$1,nhpar:nhpar$1,ni:ni$1,nis:nis$1,nisd:nisd$1,niv:niv$1,NJcy:NJcy$1,njcy:njcy$1,nlarr:nlarr$1,nlArr:nlArr$1,nldr:nldr$1,nlE:nlE$1,nle:nle$1,nleftarrow:nleftarrow$1,nLeftarrow:nLeftarrow$1,nleftrightarrow:nleftrightarrow$1,nLeftrightarrow:nLeftrightarrow$1,nleq:nleq$1,nleqq:nleqq$1,nleqslant:nleqslant$1,nles:nles$1,nless:nless$1,nLl:nLl$1,nlsim:nlsim$1,nLt:nLt$1,nlt:nlt$1,nltri:nltri$1,nltrie:nltrie$1,nLtv:nLtv$1,nmid:nmid$1,NoBreak:NoBreak$1,NonBreakingSpace:NonBreakingSpace$1,nopf:nopf$1,Nopf:Nopf$1,Not:Not$1,not:not$3,NotCongruent:NotCongruent$1,NotCupCap:NotCupCap$1,NotDoubleVerticalBar:NotDoubleVerticalBar$1,NotElement:NotElement$1,NotEqual:NotEqual$1,NotEqualTilde:NotEqualTilde$1,NotExists:NotExists$1,NotGreater:NotGreater$1,NotGreaterEqual:NotGreaterEqual$1,NotGreaterFullEqual:NotGreaterFullEqual$1,NotGreaterGreater:NotGreaterGreater$1,NotGreaterLess:NotGreaterLess$1,NotGreaterSlantEqual:NotGreaterSlantEqual$1,NotGreaterTilde:NotGreaterTilde$1,NotHumpDownHump:NotHumpDownHump$1,NotHumpEqual:NotHumpEqual$1,notin:notin$1,notindot:notindot$1,notinE:notinE$1,notinva:notinva$1,notinvb:notinvb$1,notinvc:notinvc$1,NotLeftTriangleBar:NotLeftTriangleBar$1,NotLeftTriangle:NotLeftTriangle$1,NotLeftTriangleEqual:NotLeftTriangleEqual$1,NotLess:NotLess$1,NotLessEqual:NotLessEqual$1,NotLessGreater:NotLessGreater$1,NotLessLess:NotLessLess$1,NotLessSlantEqual:NotLessSlantEqual$1,NotLessTilde:NotLessTilde$1,NotNestedGreaterGreater:NotNestedGreaterGreater$1,NotNestedLessLess:NotNestedLessLess$1,notni:notni$1,notniva:notniva$1,notnivb:notnivb$1,notnivc:notnivc$1,NotPrecedes:NotPrecedes$1,NotPrecedesEqual:NotPrecedesEqual$1,NotPrecedesSlantEqual:NotPrecedesSlantEqual$1,NotReverseElement:NotReverseElement$1,NotRightTriangleBar:NotRightTriangleBar$1,NotRightTriangle:NotRightTriangle$1,NotRightTriangleEqual:NotRightTriangleEqual$1,NotSquareSubset:NotSquareSubset$1,NotSquareSubsetEqual:NotSquareSubsetEqual$1,NotSquareSuperset:NotSquareSuperset$1,NotSquareSupersetEqual:NotSquareSupersetEqual$1,NotSubset:NotSubset$1,NotSubsetEqual:NotSubsetEqual$1,NotSucceeds:NotSucceeds$1,NotSucceedsEqual:NotSucceedsEqual$1,NotSucceedsSlantEqual:NotSucceedsSlantEqual$1,NotSucceedsTilde:NotSucceedsTilde$1,NotSuperset:NotSuperset$1,NotSupersetEqual:NotSupersetEqual$1,NotTilde:NotTilde$1,NotTildeEqual:NotTildeEqual$1,NotTildeFullEqual:NotTildeFullEqual$1,NotTildeTilde:NotTildeTilde$1,NotVerticalBar:NotVerticalBar$1,nparallel:nparallel$1,npar:npar$1,nparsl:nparsl$1,npart:npart$1,npolint:npolint$1,npr:npr$1,nprcue:nprcue$1,nprec:nprec$1,npreceq:npreceq$1,npre:npre$1,nrarrc:nrarrc$1,nrarr:nrarr$1,nrArr:nrArr$1,nrarrw:nrarrw$1,nrightarrow:nrightarrow$1,nRightarrow:nRightarrow$1,nrtri:nrtri$1,nrtrie:nrtrie$1,nsc:nsc$1,nsccue:nsccue$1,nsce:nsce$1,Nscr:Nscr$1,nscr:nscr$1,nshortmid:nshortmid$1,nshortparallel:nshortparallel$1,nsim:nsim$1,nsime:nsime$1,nsimeq:nsimeq$1,nsmid:nsmid$1,nspar:nspar$1,nsqsube:nsqsube$1,nsqsupe:nsqsupe$1,nsub:nsub$1,nsubE:nsubE$1,nsube:nsube$1,nsubset:nsubset$1,nsubseteq:nsubseteq$1,nsubseteqq:nsubseteqq$1,nsucc:nsucc$1,nsucceq:nsucceq$1,nsup:nsup$1,nsupE:nsupE$1,nsupe:nsupe$1,nsupset:nsupset$1,nsupseteq:nsupseteq$1,nsupseteqq:nsupseteqq$1,ntgl:ntgl$1,Ntilde:Ntilde$3,ntilde:ntilde$3,ntlg:ntlg$1,ntriangleleft:ntriangleleft$1,ntrianglelefteq:ntrianglelefteq$1,ntriangleright:ntriangleright$1,ntrianglerighteq:ntrianglerighteq$1,Nu:Nu$1,nu:nu$1,num:num$1,numero:numero$1,numsp:numsp$1,nvap:nvap$1,nvdash:nvdash$1,nvDash:nvDash$1,nVdash:nVdash$1,nVDash:nVDash$1,nvge:nvge$1,nvgt:nvgt$1,nvHarr:nvHarr$1,nvinfin:nvinfin$1,nvlArr:nvlArr$1,nvle:nvle$1,nvlt:nvlt$1,nvltrie:nvltrie$1,nvrArr:nvrArr$1,nvrtrie:nvrtrie$1,nvsim:nvsim$1,nwarhk:nwarhk$1,nwarr:nwarr$1,nwArr:nwArr$1,nwarrow:nwarrow$1,nwnear:nwnear$1,Oacute:Oacute$3,oacute:oacute$3,oast:oast$1,Ocirc:Ocirc$3,ocirc:ocirc$3,ocir:ocir$1,Ocy:Ocy$1,ocy:ocy$1,odash:odash$1,Odblac:Odblac$1,odblac:odblac$1,odiv:odiv$1,odot:odot$1,odsold:odsold$1,OElig:OElig$1,oelig:oelig$1,ofcir:ofcir$1,Ofr:Ofr$1,ofr:ofr$1,ogon:ogon$1,Ograve:Ograve$3,ograve:ograve$3,ogt:ogt$1,ohbar:ohbar$1,ohm:ohm$1,oint:oint$1,olarr:olarr$1,olcir:olcir$1,olcross:olcross$1,oline:oline$1,olt:olt$1,Omacr:Omacr$1,omacr:omacr$1,Omega:Omega$1,omega:omega$1,Omicron:Omicron$1,omicron:omicron$1,omid:omid$1,ominus:ominus$1,Oopf:Oopf$1,oopf:oopf$1,opar:opar$1,OpenCurlyDoubleQuote:OpenCurlyDoubleQuote$1,OpenCurlyQuote:OpenCurlyQuote$1,operp:operp$1,oplus:oplus$1,orarr:orarr$1,Or:Or$1,or:or$1,ord:ord$1,order:order$1,orderof:orderof$1,ordf:ordf$3,ordm:ordm$3,origof:origof$1,oror:oror$1,orslope:orslope$1,orv:orv$1,oS:oS$1,Oscr:Oscr$1,oscr:oscr$1,Oslash:Oslash$3,oslash:oslash$3,osol:osol$1,Otilde:Otilde$3,otilde:otilde$3,otimesas:otimesas$1,Otimes:Otimes$1,otimes:otimes$1,Ouml:Ouml$3,ouml:ouml$3,ovbar:ovbar$1,OverBar:OverBar$1,OverBrace:OverBrace$1,OverBracket:OverBracket$1,OverParenthesis:OverParenthesis$1,para:para$3,parallel:parallel$1,par:par$1,parsim:parsim$1,parsl:parsl$1,part:part$1,PartialD:PartialD$1,Pcy:Pcy$1,pcy:pcy$1,percnt:percnt$1,period:period$1,permil:permil$1,perp:perp$1,pertenk:pertenk$1,Pfr:Pfr$1,pfr:pfr$1,Phi:Phi$1,phi:phi$1,phiv:phiv$1,phmmat:phmmat$1,phone:phone$1,Pi:Pi$1,pi:pi$1,pitchfork:pitchfork$1,piv:piv$1,planck:planck$1,planckh:planckh$1,plankv:plankv$1,plusacir:plusacir$1,plusb:plusb$1,pluscir:pluscir$1,plus:plus$1,plusdo:plusdo$1,plusdu:plusdu$1,pluse:pluse$1,PlusMinus:PlusMinus$1,plusmn:plusmn$3,plussim:plussim$1,plustwo:plustwo$1,pm:pm$1,Poincareplane:Poincareplane$1,pointint:pointint$1,popf:popf$1,Popf:Popf$1,pound:pound$3,prap:prap$1,Pr:Pr$1,pr:pr$1,prcue:prcue$1,precapprox:precapprox$1,prec:prec$1,preccurlyeq:preccurlyeq$1,Precedes:Precedes$1,PrecedesEqual:PrecedesEqual$1,PrecedesSlantEqual:PrecedesSlantEqual$1,PrecedesTilde:PrecedesTilde$1,preceq:preceq$1,precnapprox:precnapprox$1,precneqq:precneqq$1,precnsim:precnsim$1,pre:pre$1,prE:prE$1,precsim:precsim$1,prime:prime$1,Prime:Prime$1,primes:primes$1,prnap:prnap$1,prnE:prnE$1,prnsim:prnsim$1,prod:prod$1,Product:Product$1,profalar:profalar$1,profline:profline$1,profsurf:profsurf$1,prop:prop$1,Proportional:Proportional$1,Proportion:Proportion$1,propto:propto$1,prsim:prsim$1,prurel:prurel$1,Pscr:Pscr$1,pscr:pscr$1,Psi:Psi$1,psi:psi$1,puncsp:puncsp$1,Qfr:Qfr$1,qfr:qfr$1,qint:qint$1,qopf:qopf$1,Qopf:Qopf$1,qprime:qprime$1,Qscr:Qscr$1,qscr:qscr$1,quaternions:quaternions$1,quatint:quatint$1,quest:quest$1,questeq:questeq$1,quot:quot$5,QUOT:QUOT$3,rAarr:rAarr$1,race:race$1,Racute:Racute$1,racute:racute$1,radic:radic$1,raemptyv:raemptyv$1,rang:rang$1,Rang:Rang$1,rangd:rangd$1,range:range$1,rangle:rangle$1,raquo:raquo$3,rarrap:rarrap$1,rarrb:rarrb$1,rarrbfs:rarrbfs$1,rarrc:rarrc$1,rarr:rarr$1,Rarr:Rarr$1,rArr:rArr$1,rarrfs:rarrfs$1,rarrhk:rarrhk$1,rarrlp:rarrlp$1,rarrpl:rarrpl$1,rarrsim:rarrsim$1,Rarrtl:Rarrtl$1,rarrtl:rarrtl$1,rarrw:rarrw$1,ratail:ratail$1,rAtail:rAtail$1,ratio:ratio$1,rationals:rationals$1,rbarr:rbarr$1,rBarr:rBarr$1,RBarr:RBarr$1,rbbrk:rbbrk$1,rbrace:rbrace$1,rbrack:rbrack$1,rbrke:rbrke$1,rbrksld:rbrksld$1,rbrkslu:rbrkslu$1,Rcaron:Rcaron$1,rcaron:rcaron$1,Rcedil:Rcedil$1,rcedil:rcedil$1,rceil:rceil$1,rcub:rcub$1,Rcy:Rcy$1,rcy:rcy$1,rdca:rdca$1,rdldhar:rdldhar$1,rdquo:rdquo$1,rdquor:rdquor$1,rdsh:rdsh$1,real:real$1,realine:realine$1,realpart:realpart$1,reals:reals$1,Re:Re$1,rect:rect$1,reg:reg$3,REG:REG$3,ReverseElement:ReverseElement$1,ReverseEquilibrium:ReverseEquilibrium$1,ReverseUpEquilibrium:ReverseUpEquilibrium$1,rfisht:rfisht$1,rfloor:rfloor$1,rfr:rfr$1,Rfr:Rfr$1,rHar:rHar$1,rhard:rhard$1,rharu:rharu$1,rharul:rharul$1,Rho:Rho$1,rho:rho$1,rhov:rhov$1,RightAngleBracket:RightAngleBracket$1,RightArrowBar:RightArrowBar$1,rightarrow:rightarrow$1,RightArrow:RightArrow$1,Rightarrow:Rightarrow$1,RightArrowLeftArrow:RightArrowLeftArrow$1,rightarrowtail:rightarrowtail$1,RightCeiling:RightCeiling$1,RightDoubleBracket:RightDoubleBracket$1,RightDownTeeVector:RightDownTeeVector$1,RightDownVectorBar:RightDownVectorBar$1,RightDownVector:RightDownVector$1,RightFloor:RightFloor$1,rightharpoondown:rightharpoondown$1,rightharpoonup:rightharpoonup$1,rightleftarrows:rightleftarrows$1,rightleftharpoons:rightleftharpoons$1,rightrightarrows:rightrightarrows$1,rightsquigarrow:rightsquigarrow$1,RightTeeArrow:RightTeeArrow$1,RightTee:RightTee$1,RightTeeVector:RightTeeVector$1,rightthreetimes:rightthreetimes$1,RightTriangleBar:RightTriangleBar$1,RightTriangle:RightTriangle$1,RightTriangleEqual:RightTriangleEqual$1,RightUpDownVector:RightUpDownVector$1,RightUpTeeVector:RightUpTeeVector$1,RightUpVectorBar:RightUpVectorBar$1,RightUpVector:RightUpVector$1,RightVectorBar:RightVectorBar$1,RightVector:RightVector$1,ring:ring$1,risingdotseq:risingdotseq$1,rlarr:rlarr$1,rlhar:rlhar$1,rlm:rlm$1,rmoustache:rmoustache$1,rmoust:rmoust$1,rnmid:rnmid$1,roang:roang$1,roarr:roarr$1,robrk:robrk$1,ropar:ropar$1,ropf:ropf$1,Ropf:Ropf$1,roplus:roplus$1,rotimes:rotimes$1,RoundImplies:RoundImplies$1,rpar:rpar$1,rpargt:rpargt$1,rppolint:rppolint$1,rrarr:rrarr$1,Rrightarrow:Rrightarrow$1,rsaquo:rsaquo$1,rscr:rscr$1,Rscr:Rscr$1,rsh:rsh$1,Rsh:Rsh$1,rsqb:rsqb$1,rsquo:rsquo$1,rsquor:rsquor$1,rthree:rthree$1,rtimes:rtimes$1,rtri:rtri$1,rtrie:rtrie$1,rtrif:rtrif$1,rtriltri:rtriltri$1,RuleDelayed:RuleDelayed$1,ruluhar:ruluhar$1,rx:rx$2,Sacute:Sacute$1,sacute:sacute$1,sbquo:sbquo$1,scap:scap$1,Scaron:Scaron$1,scaron:scaron$1,Sc:Sc$1,sc:sc$1,sccue:sccue$1,sce:sce$1,scE:scE$1,Scedil:Scedil$1,scedil:scedil$1,Scirc:Scirc$1,scirc:scirc$1,scnap:scnap$1,scnE:scnE$1,scnsim:scnsim$1,scpolint:scpolint$1,scsim:scsim$1,Scy:Scy$1,scy:scy$1,sdotb:sdotb$1,sdot:sdot$1,sdote:sdote$1,searhk:searhk$1,searr:searr$1,seArr:seArr$1,searrow:searrow$1,sect:sect$3,semi:semi$1,seswar:seswar$1,setminus:setminus$1,setmn:setmn$1,sext:sext$1,Sfr:Sfr$1,sfr:sfr$1,sfrown:sfrown$1,sharp:sharp$1,SHCHcy:SHCHcy$1,shchcy:shchcy$1,SHcy:SHcy$1,shcy:shcy$1,ShortDownArrow:ShortDownArrow$1,ShortLeftArrow:ShortLeftArrow$1,shortmid:shortmid$1,shortparallel:shortparallel$1,ShortRightArrow:ShortRightArrow$1,ShortUpArrow:ShortUpArrow$1,shy:shy$3,Sigma:Sigma$1,sigma:sigma$1,sigmaf:sigmaf$1,sigmav:sigmav$1,sim:sim$1,simdot:simdot$1,sime:sime$1,simeq:simeq$1,simg:simg$1,simgE:simgE$1,siml:siml$1,simlE:simlE$1,simne:simne$1,simplus:simplus$1,simrarr:simrarr$1,slarr:slarr$1,SmallCircle:SmallCircle$1,smallsetminus:smallsetminus$1,smashp:smashp$1,smeparsl:smeparsl$1,smid:smid$1,smile:smile$1,smt:smt$1,smte:smte$1,smtes:smtes$1,SOFTcy:SOFTcy$1,softcy:softcy$1,solbar:solbar$1,solb:solb$1,sol:sol$1,Sopf:Sopf$1,sopf:sopf$1,spades:spades$1,spadesuit:spadesuit$1,spar:spar$1,sqcap:sqcap$1,sqcaps:sqcaps$1,sqcup:sqcup$1,sqcups:sqcups$1,Sqrt:Sqrt$1,sqsub:sqsub$1,sqsube:sqsube$1,sqsubset:sqsubset$1,sqsubseteq:sqsubseteq$1,sqsup:sqsup$1,sqsupe:sqsupe$1,sqsupset:sqsupset$1,sqsupseteq:sqsupseteq$1,square:square$1,Square:Square$1,SquareIntersection:SquareIntersection$1,SquareSubset:SquareSubset$1,SquareSubsetEqual:SquareSubsetEqual$1,SquareSuperset:SquareSuperset$1,SquareSupersetEqual:SquareSupersetEqual$1,SquareUnion:SquareUnion$1,squarf:squarf$1,squ:squ$1,squf:squf$1,srarr:srarr$1,Sscr:Sscr$1,sscr:sscr$1,ssetmn:ssetmn$1,ssmile:ssmile$1,sstarf:sstarf$1,Star:Star$1,star:star$1,starf:starf$1,straightepsilon:straightepsilon$1,straightphi:straightphi$1,strns:strns$1,sub:sub$1,Sub:Sub$1,subdot:subdot$1,subE:subE$1,sube:sube$1,subedot:subedot$1,submult:submult$1,subnE:subnE$1,subne:subne$1,subplus:subplus$1,subrarr:subrarr$1,subset:subset$1,Subset:Subset$1,subseteq:subseteq$1,subseteqq:subseteqq$1,SubsetEqual:SubsetEqual$1,subsetneq:subsetneq$1,subsetneqq:subsetneqq$1,subsim:subsim$1,subsub:subsub$1,subsup:subsup$1,succapprox:succapprox$1,succ:succ$1,succcurlyeq:succcurlyeq$1,Succeeds:Succeeds$1,SucceedsEqual:SucceedsEqual$1,SucceedsSlantEqual:SucceedsSlantEqual$1,SucceedsTilde:SucceedsTilde$1,succeq:succeq$1,succnapprox:succnapprox$1,succneqq:succneqq$1,succnsim:succnsim$1,succsim:succsim$1,SuchThat:SuchThat$1,sum:sum$1,Sum:Sum$1,sung:sung$1,sup1:sup1$3,sup2:sup2$3,sup3:sup3$3,sup:sup$1,Sup:Sup$1,supdot:supdot$1,supdsub:supdsub$1,supE:supE$1,supe:supe$1,supedot:supedot$1,Superset:Superset$1,SupersetEqual:SupersetEqual$1,suphsol:suphsol$1,suphsub:suphsub$1,suplarr:suplarr$1,supmult:supmult$1,supnE:supnE$1,supne:supne$1,supplus:supplus$1,supset:supset$1,Supset:Supset$1,supseteq:supseteq$1,supseteqq:supseteqq$1,supsetneq:supsetneq$1,supsetneqq:supsetneqq$1,supsim:supsim$1,supsub:supsub$1,supsup:supsup$1,swarhk:swarhk$1,swarr:swarr$1,swArr:swArr$1,swarrow:swarrow$1,swnwar:swnwar$1,szlig:szlig$3,Tab:Tab$1,target:target$2,Tau:Tau$1,tau:tau$1,tbrk:tbrk$1,Tcaron:Tcaron$1,tcaron:tcaron$1,Tcedil:Tcedil$1,tcedil:tcedil$1,Tcy:Tcy$1,tcy:tcy$1,tdot:tdot$1,telrec:telrec$1,Tfr:Tfr$1,tfr:tfr$1,there4:there4$1,therefore:therefore$1,Therefore:Therefore$1,Theta:Theta$1,theta:theta$1,thetasym:thetasym$1,thetav:thetav$1,thickapprox:thickapprox$1,thicksim:thicksim$1,ThickSpace:ThickSpace$1,ThinSpace:ThinSpace$1,thinsp:thinsp$1,thkap:thkap$1,thksim:thksim$1,THORN:THORN$3,thorn:thorn$3,tilde:tilde$1,Tilde:Tilde$1,TildeEqual:TildeEqual$1,TildeFullEqual:TildeFullEqual$1,TildeTilde:TildeTilde$1,timesbar:timesbar$1,timesb:timesb$1,times:times$3,timesd:timesd$1,tint:tint$1,toea:toea$1,topbot:topbot$1,topcir:topcir$1,top:top$1,Topf:Topf$1,topf:topf$1,topfork:topfork$1,tosa:tosa$1,tprime:tprime$1,trade:trade$1,TRADE:TRADE$1,triangle:triangle$1,triangledown:triangledown$1,triangleleft:triangleleft$1,trianglelefteq:trianglelefteq$1,triangleq:triangleq$1,triangleright:triangleright$1,trianglerighteq:trianglerighteq$1,tridot:tridot$1,trie:trie$1,triminus:triminus$1,TripleDot:TripleDot$1,triplus:triplus$1,trisb:trisb$1,tritime:tritime$1,trpezium:trpezium$1,Tscr:Tscr$1,tscr:tscr$1,TScy:TScy$1,tscy:tscy$1,TSHcy:TSHcy$1,tshcy:tshcy$1,Tstrok:Tstrok$1,tstrok:tstrok$1,twixt:twixt$1,twoheadleftarrow:twoheadleftarrow$1,twoheadrightarrow:twoheadrightarrow$1,Uacute:Uacute$3,uacute:uacute$3,uarr:uarr$1,Uarr:Uarr$1,uArr:uArr$1,Uarrocir:Uarrocir$1,Ubrcy:Ubrcy$1,ubrcy:ubrcy$1,Ubreve:Ubreve$1,ubreve:ubreve$1,Ucirc:Ucirc$3,ucirc:ucirc$3,Ucy:Ucy$1,ucy:ucy$1,udarr:udarr$1,Udblac:Udblac$1,udblac:udblac$1,udhar:udhar$1,ufisht:ufisht$1,Ufr:Ufr$1,ufr:ufr$1,Ugrave:Ugrave$3,ugrave:ugrave$3,uHar:uHar$1,uharl:uharl$1,uharr:uharr$1,uhblk:uhblk$1,ulcorn:ulcorn$1,ulcorner:ulcorner$1,ulcrop:ulcrop$1,ultri:ultri$1,Umacr:Umacr$1,umacr:umacr$1,uml:uml$3,UnderBar:UnderBar$1,UnderBrace:UnderBrace$1,UnderBracket:UnderBracket$1,UnderParenthesis:UnderParenthesis$1,Union:Union$1,UnionPlus:UnionPlus$1,Uogon:Uogon$1,uogon:uogon$1,Uopf:Uopf$1,uopf:uopf$1,UpArrowBar:UpArrowBar$1,uparrow:uparrow$1,UpArrow:UpArrow$1,Uparrow:Uparrow$1,UpArrowDownArrow:UpArrowDownArrow$1,updownarrow:updownarrow$1,UpDownArrow:UpDownArrow$1,Updownarrow:Updownarrow$1,UpEquilibrium:UpEquilibrium$1,upharpoonleft:upharpoonleft$1,upharpoonright:upharpoonright$1,uplus:uplus$1,UpperLeftArrow:UpperLeftArrow$1,UpperRightArrow:UpperRightArrow$1,upsi:upsi$1,Upsi:Upsi$1,upsih:upsih$1,Upsilon:Upsilon$1,upsilon:upsilon$1,UpTeeArrow:UpTeeArrow$1,UpTee:UpTee$1,upuparrows:upuparrows$1,urcorn:urcorn$1,urcorner:urcorner$1,urcrop:urcrop$1,Uring:Uring$1,uring:uring$1,urtri:urtri$1,Uscr:Uscr$1,uscr:uscr$1,utdot:utdot$1,Utilde:Utilde$1,utilde:utilde$1,utri:utri$1,utrif:utrif$1,uuarr:uuarr$1,Uuml:Uuml$3,uuml:uuml$3,uwangle:uwangle$1,vangrt:vangrt$1,varepsilon:varepsilon$1,varkappa:varkappa$1,varnothing:varnothing$1,varphi:varphi$1,varpi:varpi$1,varpropto:varpropto$1,varr:varr$1,vArr:vArr$1,varrho:varrho$1,varsigma:varsigma$1,varsubsetneq:varsubsetneq$1,varsubsetneqq:varsubsetneqq$1,varsupsetneq:varsupsetneq$1,varsupsetneqq:varsupsetneqq$1,vartheta:vartheta$1,vartriangleleft:vartriangleleft$1,vartriangleright:vartriangleright$1,vBar:vBar$1,Vbar:Vbar$1,vBarv:vBarv$1,Vcy:Vcy$1,vcy:vcy$1,vdash:vdash$1,vDash:vDash$1,Vdash:Vdash$1,VDash:VDash$1,Vdashl:Vdashl$1,veebar:veebar$1,vee:vee$1,Vee:Vee$1,veeeq:veeeq$1,vellip:vellip$1,verbar:verbar$1,Verbar:Verbar$1,vert:vert$1,Vert:Vert$1,VerticalBar:VerticalBar$1,VerticalLine:VerticalLine$1,VerticalSeparator:VerticalSeparator$1,VerticalTilde:VerticalTilde$1,VeryThinSpace:VeryThinSpace$1,Vfr:Vfr$1,vfr:vfr$1,vltri:vltri$1,vnsub:vnsub$1,vnsup:vnsup$1,Vopf:Vopf$1,vopf:vopf$1,vprop:vprop$1,vrtri:vrtri$1,Vscr:Vscr$1,vscr:vscr$1,vsubnE:vsubnE$1,vsubne:vsubne$1,vsupnE:vsupnE$1,vsupne:vsupne$1,Vvdash:Vvdash$1,vzigzag:vzigzag$1,Wcirc:Wcirc$1,wcirc:wcirc$1,wedbar:wedbar$1,wedge:wedge$1,Wedge:Wedge$1,wedgeq:wedgeq$1,weierp:weierp$1,Wfr:Wfr$1,wfr:wfr$1,Wopf:Wopf$1,wopf:wopf$1,wp:wp$1,wr:wr$1,wreath:wreath$1,Wscr:Wscr$1,wscr:wscr$1,xcap:xcap$1,xcirc:xcirc$1,xcup:xcup$1,xdtri:xdtri$1,Xfr:Xfr$1,xfr:xfr$1,xharr:xharr$1,xhArr:xhArr$1,Xi:Xi$1,xi:xi$1,xlarr:xlarr$1,xlArr:xlArr$1,xmap:xmap$1,xnis:xnis$1,xodot:xodot$1,Xopf:Xopf$1,xopf:xopf$1,xoplus:xoplus$1,xotime:xotime$1,xrarr:xrarr$1,xrArr:xrArr$1,Xscr:Xscr$1,xscr:xscr$1,xsqcup:xsqcup$1,xuplus:xuplus$1,xutri:xutri$1,xvee:xvee$1,xwedge:xwedge$1,Yacute:Yacute$3,yacute:yacute$3,YAcy:YAcy$1,yacy:yacy$1,Ycirc:Ycirc$1,ycirc:ycirc$1,Ycy:Ycy$1,ycy:ycy$1,yen:yen$3,Yfr:Yfr$1,yfr:yfr$1,YIcy:YIcy$1,yicy:yicy$1,Yopf:Yopf$1,yopf:yopf$1,Yscr:Yscr$1,yscr:yscr$1,YUcy:YUcy$1,yucy:yucy$1,yuml:yuml$3,Yuml:Yuml$1,Zacute:Zacute$1,zacute:zacute$1,Zcaron:Zcaron$1,zcaron:zcaron$1,Zcy:Zcy$1,zcy:zcy$1,Zdot:Zdot$1,zdot:zdot$1,zeetrf:zeetrf$1,ZeroWidthSpace:ZeroWidthSpace$1,Zeta:Zeta$1,zeta:zeta$1,zfr:zfr$1,Zfr:Zfr$1,ZHcy:ZHcy$1,zhcy:zhcy$1,zigrarr:zigrarr$1,zopf:zopf$1,Zopf:Zopf$1,Zscr:Zscr$1,zscr:zscr$1,zwj:zwj$1,zwnj:zwnj$1};var Aacute$2="Á";var aacute$2="á";var Acirc$2="Â";var acirc$2="â";var acute$2="´";var AElig$2="Æ";var aelig$2="æ";var Agrave$2="À";var agrave$2="à";var amp$4="&";var AMP$2="&";var Aring$2="Å";var aring$2="å";var Atilde$2="Ã";var atilde$2="ã";var Auml$2="Ä";var auml$2="ä";var brvbar$2="¦";var Ccedil$2="Ç";var ccedil$2="ç";var cedil$2="¸";var cent$2="¢";var copy$2="©";var COPY$2="©";var curren$2="¤";var deg$2="°";var divide$2="÷";var Eacute$2="É";var eacute$2="é";var Ecirc$2="Ê";var ecirc$2="ê";var Egrave$2="È";var egrave$2="è";var ETH$2="Ð";var eth$2="ð";var Euml$2="Ë";var euml$2="ë";var frac12$2="½";var frac14$2="¼";var frac34$2="¾";var gt$4=">";var GT$2=">";var Iacute$2="Í";var iacute$2="í";var Icirc$2="Î";var icirc$2="î";var iexcl$2="¡";var Igrave$2="Ì";var igrave$2="ì";var iquest$2="¿";var Iuml$2="Ï";var iuml$2="ï";var laquo$2="«";var lt$4="<";var LT$2="<";var macr$2="¯";var micro$2="µ";var middot$2="·";var nbsp$2=" ";var not$2="¬";var Ntilde$2="Ñ";var ntilde$2="ñ";var Oacute$2="Ó";var oacute$2="ó";var Ocirc$2="Ô";var ocirc$2="ô";var Ograve$2="Ò";var ograve$2="ò";var ordf$2="ª";var ordm$2="º";var Oslash$2="Ø";var oslash$2="ø";var Otilde$2="Õ";var otilde$2="õ";var Ouml$2="Ö";var ouml$2="ö";var para$2="¶";var plusmn$2="±";var pound$2="£";var quot$4="\"";var QUOT$2="\"";var raquo$2="»";var reg$2="®";var REG$2="®";var sect$2="§";var shy$2="­";var sup1$2="¹";var sup2$2="²";var sup3$2="³";var szlig$2="ß";var THORN$2="Þ";var thorn$2="þ";var times$2="×";var Uacute$2="Ú";var uacute$2="ú";var Ucirc$2="Û";var ucirc$2="û";var Ugrave$2="Ù";var ugrave$2="ù";var uml$2="¨";var Uuml$2="Ü";var uuml$2="ü";var Yacute$2="Ý";var yacute$2="ý";var yen$2="¥";var yuml$2="ÿ";var require$$2$2={Aacute:Aacute$2,aacute:aacute$2,Acirc:Acirc$2,acirc:acirc$2,acute:acute$2,AElig:AElig$2,aelig:aelig$2,Agrave:Agrave$2,agrave:agrave$2,amp:amp$4,AMP:AMP$2,Aring:Aring$2,aring:aring$2,Atilde:Atilde$2,atilde:atilde$2,Auml:Auml$2,auml:auml$2,brvbar:brvbar$2,Ccedil:Ccedil$2,ccedil:ccedil$2,cedil:cedil$2,cent:cent$2,copy:copy$2,COPY:COPY$2,curren:curren$2,deg:deg$2,divide:divide$2,Eacute:Eacute$2,eacute:eacute$2,Ecirc:Ecirc$2,ecirc:ecirc$2,Egrave:Egrave$2,egrave:egrave$2,ETH:ETH$2,eth:eth$2,Euml:Euml$2,euml:euml$2,frac12:frac12$2,frac14:frac14$2,frac34:frac34$2,gt:gt$4,GT:GT$2,Iacute:Iacute$2,iacute:iacute$2,Icirc:Icirc$2,icirc:icirc$2,iexcl:iexcl$2,Igrave:Igrave$2,igrave:igrave$2,iquest:iquest$2,Iuml:Iuml$2,iuml:iuml$2,laquo:laquo$2,lt:lt$4,LT:LT$2,macr:macr$2,micro:micro$2,middot:middot$2,nbsp:nbsp$2,not:not$2,Ntilde:Ntilde$2,ntilde:ntilde$2,Oacute:Oacute$2,oacute:oacute$2,Ocirc:Ocirc$2,ocirc:ocirc$2,Ograve:Ograve$2,ograve:ograve$2,ordf:ordf$2,ordm:ordm$2,Oslash:Oslash$2,oslash:oslash$2,Otilde:Otilde$2,otilde:otilde$2,Ouml:Ouml$2,ouml:ouml$2,para:para$2,plusmn:plusmn$2,pound:pound$2,quot:quot$4,QUOT:QUOT$2,raquo:raquo$2,reg:reg$2,REG:REG$2,sect:sect$2,shy:shy$2,sup1:sup1$2,sup2:sup2$2,sup3:sup3$2,szlig:szlig$2,THORN:THORN$2,thorn:thorn$2,times:times$2,Uacute:Uacute$2,uacute:uacute$2,Ucirc:Ucirc$2,ucirc:ucirc$2,Ugrave:Ugrave$2,ugrave:ugrave$2,uml:uml$2,Uuml:Uuml$2,uuml:uuml$2,Yacute:Yacute$2,yacute:yacute$2,yen:yen$2,yuml:yuml$2};var amp$3="&";var apos$2="'";var gt$3=">";var lt$3="<";var quot$3="\"";var require$$3$1={amp:amp$3,apos:apos$2,gt:gt$3,lt:lt$3,quot:quot$3};var Tokenizer_1=Tokenizer$1;var decodeCodePoint=decode_codepoint$1;var entityMap=require$$1$4;var legacyMap=require$$2$2;var xmlMap=require$$3$1;var i$1=0;var TEXT=i$1++;var BEFORE_TAG_NAME=i$1++;//after <
var IN_TAG_NAME=i$1++;var IN_SELF_CLOSING_TAG=i$1++;var BEFORE_CLOSING_TAG_NAME=i$1++;var IN_CLOSING_TAG_NAME=i$1++;var AFTER_CLOSING_TAG_NAME=i$1++;//attributes
var BEFORE_ATTRIBUTE_NAME=i$1++;var IN_ATTRIBUTE_NAME=i$1++;var AFTER_ATTRIBUTE_NAME=i$1++;var BEFORE_ATTRIBUTE_VALUE=i$1++;var IN_ATTRIBUTE_VALUE_DQ=i$1++;// "
var IN_ATTRIBUTE_VALUE_SQ=i$1++;// '
var IN_ATTRIBUTE_VALUE_NQ=i$1++;//declarations
var BEFORE_DECLARATION=i$1++;// !
var IN_DECLARATION=i$1++;//processing instructions
var IN_PROCESSING_INSTRUCTION=i$1++;// ?
//comments
var BEFORE_COMMENT=i$1++;var IN_COMMENT=i$1++;var AFTER_COMMENT_1=i$1++;var AFTER_COMMENT_2=i$1++;//cdata
var BEFORE_CDATA_1=i$1++;// [
var BEFORE_CDATA_2=i$1++;// C
var BEFORE_CDATA_3=i$1++;// D
var BEFORE_CDATA_4=i$1++;// A
var BEFORE_CDATA_5=i$1++;// T
var BEFORE_CDATA_6=i$1++;// A
var IN_CDATA=i$1++;// [
var AFTER_CDATA_1=i$1++;// ]
var AFTER_CDATA_2=i$1++;// ]
//special tags
var BEFORE_SPECIAL=i$1++;//S
var BEFORE_SPECIAL_END=i$1++;//S
var BEFORE_SCRIPT_1=i$1++;//C
var BEFORE_SCRIPT_2=i$1++;//R
var BEFORE_SCRIPT_3=i$1++;//I
var BEFORE_SCRIPT_4=i$1++;//P
var BEFORE_SCRIPT_5=i$1++;//T
var AFTER_SCRIPT_1=i$1++;//C
var AFTER_SCRIPT_2=i$1++;//R
var AFTER_SCRIPT_3=i$1++;//I
var AFTER_SCRIPT_4=i$1++;//P
var AFTER_SCRIPT_5=i$1++;//T
var BEFORE_STYLE_1=i$1++;//T
var BEFORE_STYLE_2=i$1++;//Y
var BEFORE_STYLE_3=i$1++;//L
var BEFORE_STYLE_4=i$1++;//E
var AFTER_STYLE_1=i$1++;//T
var AFTER_STYLE_2=i$1++;//Y
var AFTER_STYLE_3=i$1++;//L
var AFTER_STYLE_4=i$1++;//E
var BEFORE_ENTITY=i$1++;//&
var BEFORE_NUMERIC_ENTITY=i$1++;//#
var IN_NAMED_ENTITY=i$1++;var IN_NUMERIC_ENTITY=i$1++;var IN_HEX_ENTITY=i$1++;//X
var j=0;var SPECIAL_NONE=j++;var SPECIAL_SCRIPT=j++;var SPECIAL_STYLE=j++;function whitespace$1(c){return c===" "||c==="\n"||c==="\t"||c==="\f"||c==="\r";}function ifElseState(upper,SUCCESS,FAILURE){var lower=upper.toLowerCase();if(upper===lower){return function(c){if(c===lower){this._state=SUCCESS;}else{this._state=FAILURE;this._index--;}};}else{return function(c){if(c===lower||c===upper){this._state=SUCCESS;}else{this._state=FAILURE;this._index--;}};}}function consumeSpecialNameChar(upper,NEXT_STATE){var lower=upper.toLowerCase();return function(c){if(c===lower||c===upper){this._state=NEXT_STATE;}else{this._state=IN_TAG_NAME;this._index--;//consume the token again
}};}function Tokenizer$1(options,cbs){this._state=TEXT;this._buffer="";this._sectionStart=0;this._index=0;this._bufferOffset=0;//chars removed from _buffer
this._baseState=TEXT;this._special=SPECIAL_NONE;this._cbs=cbs;this._running=true;this._ended=false;this._xmlMode=!!(options&&options.xmlMode);this._decodeEntities=!!(options&&options.decodeEntities);}Tokenizer$1.prototype._stateText=function(c){if(c==="<"){if(this._index>this._sectionStart){this._cbs.ontext(this._getSection());}this._state=BEFORE_TAG_NAME;this._sectionStart=this._index;}else if(this._decodeEntities&&this._special===SPECIAL_NONE&&c==="&"){if(this._index>this._sectionStart){this._cbs.ontext(this._getSection());}this._baseState=TEXT;this._state=BEFORE_ENTITY;this._sectionStart=this._index;}};Tokenizer$1.prototype._stateBeforeTagName=function(c){if(c==="/"){this._state=BEFORE_CLOSING_TAG_NAME;}else if(c==="<"){this._cbs.ontext(this._getSection());this._sectionStart=this._index;}else if(c===">"||this._special!==SPECIAL_NONE||whitespace$1(c)){this._state=TEXT;}else if(c==="!"){this._state=BEFORE_DECLARATION;this._sectionStart=this._index+1;}else if(c==="?"){this._state=IN_PROCESSING_INSTRUCTION;this._sectionStart=this._index+1;}else{this._state=!this._xmlMode&&(c==="s"||c==="S")?BEFORE_SPECIAL:IN_TAG_NAME;this._sectionStart=this._index;}};Tokenizer$1.prototype._stateInTagName=function(c){if(c==="/"||c===">"||whitespace$1(c)){this._emitToken("onopentagname");this._state=BEFORE_ATTRIBUTE_NAME;this._index--;}};Tokenizer$1.prototype._stateBeforeCloseingTagName=function(c){if(whitespace$1(c));else if(c===">"){this._state=TEXT;}else if(this._special!==SPECIAL_NONE){if(c==="s"||c==="S"){this._state=BEFORE_SPECIAL_END;}else{this._state=TEXT;this._index--;}}else{this._state=IN_CLOSING_TAG_NAME;this._sectionStart=this._index;}};Tokenizer$1.prototype._stateInCloseingTagName=function(c){if(c===">"||whitespace$1(c)){this._emitToken("onclosetag");this._state=AFTER_CLOSING_TAG_NAME;this._index--;}};Tokenizer$1.prototype._stateAfterCloseingTagName=function(c){//skip everything until ">"
if(c===">"){this._state=TEXT;this._sectionStart=this._index+1;}};Tokenizer$1.prototype._stateBeforeAttributeName=function(c){if(c===">"){this._cbs.onopentagend();this._state=TEXT;this._sectionStart=this._index+1;}else if(c==="/"){this._state=IN_SELF_CLOSING_TAG;}else if(!whitespace$1(c)){this._state=IN_ATTRIBUTE_NAME;this._sectionStart=this._index;}};Tokenizer$1.prototype._stateInSelfClosingTag=function(c){if(c===">"){this._cbs.onselfclosingtag();this._state=TEXT;this._sectionStart=this._index+1;}else if(!whitespace$1(c)){this._state=BEFORE_ATTRIBUTE_NAME;this._index--;}};Tokenizer$1.prototype._stateInAttributeName=function(c){if(c==="="||c==="/"||c===">"||whitespace$1(c)){this._cbs.onattribname(this._getSection());this._sectionStart=-1;this._state=AFTER_ATTRIBUTE_NAME;this._index--;}};Tokenizer$1.prototype._stateAfterAttributeName=function(c){if(c==="="){this._state=BEFORE_ATTRIBUTE_VALUE;}else if(c==="/"||c===">"){this._cbs.onattribend();this._state=BEFORE_ATTRIBUTE_NAME;this._index--;}else if(!whitespace$1(c)){this._cbs.onattribend();this._state=IN_ATTRIBUTE_NAME;this._sectionStart=this._index;}};Tokenizer$1.prototype._stateBeforeAttributeValue=function(c){if(c==='"'){this._state=IN_ATTRIBUTE_VALUE_DQ;this._sectionStart=this._index+1;}else if(c==="'"){this._state=IN_ATTRIBUTE_VALUE_SQ;this._sectionStart=this._index+1;}else if(!whitespace$1(c)){this._state=IN_ATTRIBUTE_VALUE_NQ;this._sectionStart=this._index;this._index--;//reconsume token
}};Tokenizer$1.prototype._stateInAttributeValueDoubleQuotes=function(c){if(c==='"'){this._emitToken("onattribdata");this._cbs.onattribend();this._state=BEFORE_ATTRIBUTE_NAME;}else if(this._decodeEntities&&c==="&"){this._emitToken("onattribdata");this._baseState=this._state;this._state=BEFORE_ENTITY;this._sectionStart=this._index;}};Tokenizer$1.prototype._stateInAttributeValueSingleQuotes=function(c){if(c==="'"){this._emitToken("onattribdata");this._cbs.onattribend();this._state=BEFORE_ATTRIBUTE_NAME;}else if(this._decodeEntities&&c==="&"){this._emitToken("onattribdata");this._baseState=this._state;this._state=BEFORE_ENTITY;this._sectionStart=this._index;}};Tokenizer$1.prototype._stateInAttributeValueNoQuotes=function(c){if(whitespace$1(c)||c===">"){this._emitToken("onattribdata");this._cbs.onattribend();this._state=BEFORE_ATTRIBUTE_NAME;this._index--;}else if(this._decodeEntities&&c==="&"){this._emitToken("onattribdata");this._baseState=this._state;this._state=BEFORE_ENTITY;this._sectionStart=this._index;}};Tokenizer$1.prototype._stateBeforeDeclaration=function(c){this._state=c==="["?BEFORE_CDATA_1:c==="-"?BEFORE_COMMENT:IN_DECLARATION;};Tokenizer$1.prototype._stateInDeclaration=function(c){if(c===">"){this._cbs.ondeclaration(this._getSection());this._state=TEXT;this._sectionStart=this._index+1;}};Tokenizer$1.prototype._stateInProcessingInstruction=function(c){if(c===">"){this._cbs.onprocessinginstruction(this._getSection());this._state=TEXT;this._sectionStart=this._index+1;}};Tokenizer$1.prototype._stateBeforeComment=function(c){if(c==="-"){this._state=IN_COMMENT;this._sectionStart=this._index+1;}else{this._state=IN_DECLARATION;}};Tokenizer$1.prototype._stateInComment=function(c){if(c==="-")this._state=AFTER_COMMENT_1;};Tokenizer$1.prototype._stateAfterComment1=function(c){if(c==="-"){this._state=AFTER_COMMENT_2;}else{this._state=IN_COMMENT;}};Tokenizer$1.prototype._stateAfterComment2=function(c){if(c===">"){//remove 2 trailing chars
this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2));this._state=TEXT;this._sectionStart=this._index+1;}else if(c!=="-"){this._state=IN_COMMENT;}// else: stay in AFTER_COMMENT_2 (`--->`)
};Tokenizer$1.prototype._stateBeforeCdata1=ifElseState("C",BEFORE_CDATA_2,IN_DECLARATION);Tokenizer$1.prototype._stateBeforeCdata2=ifElseState("D",BEFORE_CDATA_3,IN_DECLARATION);Tokenizer$1.prototype._stateBeforeCdata3=ifElseState("A",BEFORE_CDATA_4,IN_DECLARATION);Tokenizer$1.prototype._stateBeforeCdata4=ifElseState("T",BEFORE_CDATA_5,IN_DECLARATION);Tokenizer$1.prototype._stateBeforeCdata5=ifElseState("A",BEFORE_CDATA_6,IN_DECLARATION);Tokenizer$1.prototype._stateBeforeCdata6=function(c){if(c==="["){this._state=IN_CDATA;this._sectionStart=this._index+1;}else{this._state=IN_DECLARATION;this._index--;}};Tokenizer$1.prototype._stateInCdata=function(c){if(c==="]")this._state=AFTER_CDATA_1;};Tokenizer$1.prototype._stateAfterCdata1=function(c){if(c==="]")this._state=AFTER_CDATA_2;else this._state=IN_CDATA;};Tokenizer$1.prototype._stateAfterCdata2=function(c){if(c===">"){//remove 2 trailing chars
this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2));this._state=TEXT;this._sectionStart=this._index+1;}else if(c!=="]"){this._state=IN_CDATA;}//else: stay in AFTER_CDATA_2 (`]]]>`)
};Tokenizer$1.prototype._stateBeforeSpecial=function(c){if(c==="c"||c==="C"){this._state=BEFORE_SCRIPT_1;}else if(c==="t"||c==="T"){this._state=BEFORE_STYLE_1;}else{this._state=IN_TAG_NAME;this._index--;//consume the token again
}};Tokenizer$1.prototype._stateBeforeSpecialEnd=function(c){if(this._special===SPECIAL_SCRIPT&&(c==="c"||c==="C")){this._state=AFTER_SCRIPT_1;}else if(this._special===SPECIAL_STYLE&&(c==="t"||c==="T")){this._state=AFTER_STYLE_1;}else this._state=TEXT;};Tokenizer$1.prototype._stateBeforeScript1=consumeSpecialNameChar("R",BEFORE_SCRIPT_2);Tokenizer$1.prototype._stateBeforeScript2=consumeSpecialNameChar("I",BEFORE_SCRIPT_3);Tokenizer$1.prototype._stateBeforeScript3=consumeSpecialNameChar("P",BEFORE_SCRIPT_4);Tokenizer$1.prototype._stateBeforeScript4=consumeSpecialNameChar("T",BEFORE_SCRIPT_5);Tokenizer$1.prototype._stateBeforeScript5=function(c){if(c==="/"||c===">"||whitespace$1(c)){this._special=SPECIAL_SCRIPT;}this._state=IN_TAG_NAME;this._index--;//consume the token again
};Tokenizer$1.prototype._stateAfterScript1=ifElseState("R",AFTER_SCRIPT_2,TEXT);Tokenizer$1.prototype._stateAfterScript2=ifElseState("I",AFTER_SCRIPT_3,TEXT);Tokenizer$1.prototype._stateAfterScript3=ifElseState("P",AFTER_SCRIPT_4,TEXT);Tokenizer$1.prototype._stateAfterScript4=ifElseState("T",AFTER_SCRIPT_5,TEXT);Tokenizer$1.prototype._stateAfterScript5=function(c){if(c===">"||whitespace$1(c)){this._special=SPECIAL_NONE;this._state=IN_CLOSING_TAG_NAME;this._sectionStart=this._index-6;this._index--;//reconsume the token
}else this._state=TEXT;};Tokenizer$1.prototype._stateBeforeStyle1=consumeSpecialNameChar("Y",BEFORE_STYLE_2);Tokenizer$1.prototype._stateBeforeStyle2=consumeSpecialNameChar("L",BEFORE_STYLE_3);Tokenizer$1.prototype._stateBeforeStyle3=consumeSpecialNameChar("E",BEFORE_STYLE_4);Tokenizer$1.prototype._stateBeforeStyle4=function(c){if(c==="/"||c===">"||whitespace$1(c)){this._special=SPECIAL_STYLE;}this._state=IN_TAG_NAME;this._index--;//consume the token again
};Tokenizer$1.prototype._stateAfterStyle1=ifElseState("Y",AFTER_STYLE_2,TEXT);Tokenizer$1.prototype._stateAfterStyle2=ifElseState("L",AFTER_STYLE_3,TEXT);Tokenizer$1.prototype._stateAfterStyle3=ifElseState("E",AFTER_STYLE_4,TEXT);Tokenizer$1.prototype._stateAfterStyle4=function(c){if(c===">"||whitespace$1(c)){this._special=SPECIAL_NONE;this._state=IN_CLOSING_TAG_NAME;this._sectionStart=this._index-5;this._index--;//reconsume the token
}else this._state=TEXT;};Tokenizer$1.prototype._stateBeforeEntity=ifElseState("#",BEFORE_NUMERIC_ENTITY,IN_NAMED_ENTITY);Tokenizer$1.prototype._stateBeforeNumericEntity=ifElseState("X",IN_HEX_ENTITY,IN_NUMERIC_ENTITY);//for entities terminated with a semicolon
Tokenizer$1.prototype._parseNamedEntityStrict=function(){//offset = 1
if(this._sectionStart+1<this._index){var entity=this._buffer.substring(this._sectionStart+1,this._index),map=this._xmlMode?xmlMap:entityMap;if(map.hasOwnProperty(entity)){this._emitPartial(map[entity]);this._sectionStart=this._index+1;}}};//parses legacy entities (without trailing semicolon)
Tokenizer$1.prototype._parseLegacyEntity=function(){var start=this._sectionStart+1,limit=this._index-start;if(limit>6)limit=6;//the max length of legacy entities is 6
while(limit>=2){//the min length of legacy entities is 2
var entity=this._buffer.substr(start,limit);if(legacyMap.hasOwnProperty(entity)){this._emitPartial(legacyMap[entity]);this._sectionStart+=limit+1;return;}else{limit--;}}};Tokenizer$1.prototype._stateInNamedEntity=function(c){if(c===";"){this._parseNamedEntityStrict();if(this._sectionStart+1<this._index&&!this._xmlMode){this._parseLegacyEntity();}this._state=this._baseState;}else if((c<"a"||c>"z")&&(c<"A"||c>"Z")&&(c<"0"||c>"9")){if(this._xmlMode);else if(this._sectionStart+1===this._index);else if(this._baseState!==TEXT){if(c!=="="){this._parseNamedEntityStrict();}}else{this._parseLegacyEntity();}this._state=this._baseState;this._index--;}};Tokenizer$1.prototype._decodeNumericEntity=function(offset,base){var sectionStart=this._sectionStart+offset;if(sectionStart!==this._index){//parse entity
var entity=this._buffer.substring(sectionStart,this._index);var parsed=parseInt(entity,base);this._emitPartial(decodeCodePoint(parsed));this._sectionStart=this._index;}else{this._sectionStart--;}this._state=this._baseState;};Tokenizer$1.prototype._stateInNumericEntity=function(c){if(c===";"){this._decodeNumericEntity(2,10);this._sectionStart++;}else if(c<"0"||c>"9"){if(!this._xmlMode){this._decodeNumericEntity(2,10);}else{this._state=this._baseState;}this._index--;}};Tokenizer$1.prototype._stateInHexEntity=function(c){if(c===";"){this._decodeNumericEntity(3,16);this._sectionStart++;}else if((c<"a"||c>"f")&&(c<"A"||c>"F")&&(c<"0"||c>"9")){if(!this._xmlMode){this._decodeNumericEntity(3,16);}else{this._state=this._baseState;}this._index--;}};Tokenizer$1.prototype._cleanup=function(){if(this._sectionStart<0){this._buffer="";this._bufferOffset+=this._index;this._index=0;}else if(this._running){if(this._state===TEXT){if(this._sectionStart!==this._index){this._cbs.ontext(this._buffer.substr(this._sectionStart));}this._buffer="";this._bufferOffset+=this._index;this._index=0;}else if(this._sectionStart===this._index){//the section just started
this._buffer="";this._bufferOffset+=this._index;this._index=0;}else{//remove everything unnecessary
this._buffer=this._buffer.substr(this._sectionStart);this._index-=this._sectionStart;this._bufferOffset+=this._sectionStart;}this._sectionStart=0;}};//TODO make events conditional
Tokenizer$1.prototype.write=function(chunk){if(this._ended)this._cbs.onerror(Error(".write() after done!"));this._buffer+=chunk;this._parse();};Tokenizer$1.prototype._parse=function(){while(this._index<this._buffer.length&&this._running){var c=this._buffer.charAt(this._index);if(this._state===TEXT){this._stateText(c);}else if(this._state===BEFORE_TAG_NAME){this._stateBeforeTagName(c);}else if(this._state===IN_TAG_NAME){this._stateInTagName(c);}else if(this._state===BEFORE_CLOSING_TAG_NAME){this._stateBeforeCloseingTagName(c);}else if(this._state===IN_CLOSING_TAG_NAME){this._stateInCloseingTagName(c);}else if(this._state===AFTER_CLOSING_TAG_NAME){this._stateAfterCloseingTagName(c);}else if(this._state===IN_SELF_CLOSING_TAG){this._stateInSelfClosingTag(c);}else if(this._state===BEFORE_ATTRIBUTE_NAME){/*
      *	attributes
      */this._stateBeforeAttributeName(c);}else if(this._state===IN_ATTRIBUTE_NAME){this._stateInAttributeName(c);}else if(this._state===AFTER_ATTRIBUTE_NAME){this._stateAfterAttributeName(c);}else if(this._state===BEFORE_ATTRIBUTE_VALUE){this._stateBeforeAttributeValue(c);}else if(this._state===IN_ATTRIBUTE_VALUE_DQ){this._stateInAttributeValueDoubleQuotes(c);}else if(this._state===IN_ATTRIBUTE_VALUE_SQ){this._stateInAttributeValueSingleQuotes(c);}else if(this._state===IN_ATTRIBUTE_VALUE_NQ){this._stateInAttributeValueNoQuotes(c);}else if(this._state===BEFORE_DECLARATION){/*
      *	declarations
      */this._stateBeforeDeclaration(c);}else if(this._state===IN_DECLARATION){this._stateInDeclaration(c);}else if(this._state===IN_PROCESSING_INSTRUCTION){/*
      *	processing instructions
      */this._stateInProcessingInstruction(c);}else if(this._state===BEFORE_COMMENT){/*
      *	comments
      */this._stateBeforeComment(c);}else if(this._state===IN_COMMENT){this._stateInComment(c);}else if(this._state===AFTER_COMMENT_1){this._stateAfterComment1(c);}else if(this._state===AFTER_COMMENT_2){this._stateAfterComment2(c);}else if(this._state===BEFORE_CDATA_1){/*
      *	cdata
      */this._stateBeforeCdata1(c);}else if(this._state===BEFORE_CDATA_2){this._stateBeforeCdata2(c);}else if(this._state===BEFORE_CDATA_3){this._stateBeforeCdata3(c);}else if(this._state===BEFORE_CDATA_4){this._stateBeforeCdata4(c);}else if(this._state===BEFORE_CDATA_5){this._stateBeforeCdata5(c);}else if(this._state===BEFORE_CDATA_6){this._stateBeforeCdata6(c);}else if(this._state===IN_CDATA){this._stateInCdata(c);}else if(this._state===AFTER_CDATA_1){this._stateAfterCdata1(c);}else if(this._state===AFTER_CDATA_2){this._stateAfterCdata2(c);}else if(this._state===BEFORE_SPECIAL){/*
      * special tags
      */this._stateBeforeSpecial(c);}else if(this._state===BEFORE_SPECIAL_END){this._stateBeforeSpecialEnd(c);}else if(this._state===BEFORE_SCRIPT_1){/*
      * script
      */this._stateBeforeScript1(c);}else if(this._state===BEFORE_SCRIPT_2){this._stateBeforeScript2(c);}else if(this._state===BEFORE_SCRIPT_3){this._stateBeforeScript3(c);}else if(this._state===BEFORE_SCRIPT_4){this._stateBeforeScript4(c);}else if(this._state===BEFORE_SCRIPT_5){this._stateBeforeScript5(c);}else if(this._state===AFTER_SCRIPT_1){this._stateAfterScript1(c);}else if(this._state===AFTER_SCRIPT_2){this._stateAfterScript2(c);}else if(this._state===AFTER_SCRIPT_3){this._stateAfterScript3(c);}else if(this._state===AFTER_SCRIPT_4){this._stateAfterScript4(c);}else if(this._state===AFTER_SCRIPT_5){this._stateAfterScript5(c);}else if(this._state===BEFORE_STYLE_1){/*
      * style
      */this._stateBeforeStyle1(c);}else if(this._state===BEFORE_STYLE_2){this._stateBeforeStyle2(c);}else if(this._state===BEFORE_STYLE_3){this._stateBeforeStyle3(c);}else if(this._state===BEFORE_STYLE_4){this._stateBeforeStyle4(c);}else if(this._state===AFTER_STYLE_1){this._stateAfterStyle1(c);}else if(this._state===AFTER_STYLE_2){this._stateAfterStyle2(c);}else if(this._state===AFTER_STYLE_3){this._stateAfterStyle3(c);}else if(this._state===AFTER_STYLE_4){this._stateAfterStyle4(c);}else if(this._state===BEFORE_ENTITY){/*
      * entities
      */this._stateBeforeEntity(c);}else if(this._state===BEFORE_NUMERIC_ENTITY){this._stateBeforeNumericEntity(c);}else if(this._state===IN_NAMED_ENTITY){this._stateInNamedEntity(c);}else if(this._state===IN_NUMERIC_ENTITY){this._stateInNumericEntity(c);}else if(this._state===IN_HEX_ENTITY){this._stateInHexEntity(c);}else{this._cbs.onerror(Error("unknown _state"),this._state);}this._index++;}this._cleanup();};Tokenizer$1.prototype.pause=function(){this._running=false;};Tokenizer$1.prototype.resume=function(){this._running=true;if(this._index<this._buffer.length){this._parse();}if(this._ended){this._finish();}};Tokenizer$1.prototype.end=function(chunk){if(this._ended)this._cbs.onerror(Error(".end() after done!"));if(chunk)this.write(chunk);this._ended=true;if(this._running)this._finish();};Tokenizer$1.prototype._finish=function(){//if there is remaining data, emit it in a reasonable way
if(this._sectionStart<this._index){this._handleTrailingData();}this._cbs.onend();};Tokenizer$1.prototype._handleTrailingData=function(){var data=this._buffer.substr(this._sectionStart);if(this._state===IN_CDATA||this._state===AFTER_CDATA_1||this._state===AFTER_CDATA_2){this._cbs.oncdata(data);}else if(this._state===IN_COMMENT||this._state===AFTER_COMMENT_1||this._state===AFTER_COMMENT_2){this._cbs.oncomment(data);}else if(this._state===IN_NAMED_ENTITY&&!this._xmlMode){this._parseLegacyEntity();if(this._sectionStart<this._index){this._state=this._baseState;this._handleTrailingData();}}else if(this._state===IN_NUMERIC_ENTITY&&!this._xmlMode){this._decodeNumericEntity(2,10);if(this._sectionStart<this._index){this._state=this._baseState;this._handleTrailingData();}}else if(this._state===IN_HEX_ENTITY&&!this._xmlMode){this._decodeNumericEntity(3,16);if(this._sectionStart<this._index){this._state=this._baseState;this._handleTrailingData();}}else if(this._state!==IN_TAG_NAME&&this._state!==BEFORE_ATTRIBUTE_NAME&&this._state!==BEFORE_ATTRIBUTE_VALUE&&this._state!==AFTER_ATTRIBUTE_NAME&&this._state!==IN_ATTRIBUTE_NAME&&this._state!==IN_ATTRIBUTE_VALUE_SQ&&this._state!==IN_ATTRIBUTE_VALUE_DQ&&this._state!==IN_ATTRIBUTE_VALUE_NQ&&this._state!==IN_CLOSING_TAG_NAME){this._cbs.ontext(data);}//else, ignore remaining data
//TODO add a way to remove current tag
};Tokenizer$1.prototype.reset=function(){Tokenizer$1.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs);};Tokenizer$1.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index;};Tokenizer$1.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index);};Tokenizer$1.prototype._emitToken=function(name){this._cbs[name](this._getSection());this._sectionStart=-1;};Tokenizer$1.prototype._emitPartial=function(value){if(this._baseState!==TEXT){this._cbs.onattribdata(value);//TODO implement the new event
}else{this._cbs.ontext(value);}};var inherits;if(typeof Object.create==='function'){inherits=function inherits(ctor,superCtor){// implementation from standard node.js 'util' module
ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}});};}else{inherits=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;};}var inherits$1=inherits;var _polyfillNode_inherits=/*#__PURE__*/Object.freeze({__proto__:null,default:inherits$1});var require$$1$3=/*@__PURE__*/getAugmentedNamespace(_polyfillNode_inherits);var Tokenizer=Tokenizer_1;/*
	Options:

	xmlMode: Disables the special behavior for script/style tags (false by default)
	lowerCaseAttributeNames: call .toLowerCase for each attribute name (true if xmlMode is `false`)
	lowerCaseTags: call .toLowerCase for each tag name (true if xmlMode is `false`)
*//*
	Callbacks:

	oncdataend,
	oncdatastart,
	onclosetag,
	oncomment,
	oncommentend,
	onerror,
	onopentag,
	onprocessinginstruction,
	onreset,
	ontext
*/var formTags={input:true,option:true,optgroup:true,select:true,button:true,datalist:true,textarea:true};var openImpliesClose={tr:{tr:true,th:true,td:true},th:{th:true},td:{thead:true,th:true,td:true},body:{head:true,link:true,script:true},li:{li:true},p:{p:true},h1:{p:true},h2:{p:true},h3:{p:true},h4:{p:true},h5:{p:true},h6:{p:true},select:formTags,input:formTags,output:formTags,button:formTags,datalist:formTags,textarea:formTags,option:{option:true},optgroup:{optgroup:true}};var voidElements={__proto__:null,area:true,base:true,basefont:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,isindex:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true};var foreignContextElements={__proto__:null,math:true,svg:true};var htmlIntegrationElements={__proto__:null,mi:true,mo:true,mn:true,ms:true,mtext:true,"annotation-xml":true,foreignObject:true,desc:true,title:true};var re_nameEnd=/\s|\//;function Parser(cbs,options){this._options=options||{};this._cbs=cbs||{};this._tagname="";this._attribname="";this._attribvalue="";this._attribs=null;this._stack=[];this._foreignContext=[];this.startIndex=0;this.endIndex=null;this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode;this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode;if(this._options.Tokenizer){Tokenizer=this._options.Tokenizer;}this._tokenizer=new Tokenizer(this._options,this);if(this._cbs.onparserinit)this._cbs.onparserinit(this);}require$$1$3(Parser,require$$0$3.EventEmitter);Parser.prototype._updatePosition=function(initialOffset){if(this.endIndex===null){if(this._tokenizer._sectionStart<=initialOffset){this.startIndex=0;}else{this.startIndex=this._tokenizer._sectionStart-initialOffset;}}else this.startIndex=this.endIndex+1;this.endIndex=this._tokenizer.getAbsoluteIndex();};//Tokenizer event handlers
Parser.prototype.ontext=function(data){this._updatePosition(1);this.endIndex--;if(this._cbs.ontext)this._cbs.ontext(data);};Parser.prototype.onopentagname=function(name){if(this._lowerCaseTagNames){name=name.toLowerCase();}this._tagname=name;if(!this._options.xmlMode&&name in openImpliesClose){for(var el;(el=this._stack[this._stack.length-1])in openImpliesClose[name];this.onclosetag(el));}if(this._options.xmlMode||!(name in voidElements)){this._stack.push(name);if(name in foreignContextElements)this._foreignContext.push(true);else if(name in htmlIntegrationElements)this._foreignContext.push(false);}if(this._cbs.onopentagname)this._cbs.onopentagname(name);if(this._cbs.onopentag)this._attribs={};};Parser.prototype.onopentagend=function(){this._updatePosition(1);if(this._attribs){if(this._cbs.onopentag)this._cbs.onopentag(this._tagname,this._attribs);this._attribs=null;}if(!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in voidElements){this._cbs.onclosetag(this._tagname);}this._tagname="";};Parser.prototype.onclosetag=function(name){this._updatePosition(1);if(this._lowerCaseTagNames){name=name.toLowerCase();}if(name in foreignContextElements||name in htmlIntegrationElements){this._foreignContext.pop();}if(this._stack.length&&(!(name in voidElements)||this._options.xmlMode)){var pos=this._stack.lastIndexOf(name);if(pos!==-1){if(this._cbs.onclosetag){pos=this._stack.length-pos;while(pos--)this._cbs.onclosetag(this._stack.pop());}else this._stack.length=pos;}else if(name==="p"&&!this._options.xmlMode){this.onopentagname(name);this._closeCurrentTag();}}else if(!this._options.xmlMode&&(name==="br"||name==="p")){this.onopentagname(name);this._closeCurrentTag();}};Parser.prototype.onselfclosingtag=function(){if(this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1]){this._closeCurrentTag();}else{this.onopentagend();}};Parser.prototype._closeCurrentTag=function(){var name=this._tagname;this.onopentagend();//self-closing tags will be on the top of the stack
//(cheaper check than in onclosetag)
if(this._stack[this._stack.length-1]===name){if(this._cbs.onclosetag){this._cbs.onclosetag(name);}this._stack.pop();}};Parser.prototype.onattribname=function(name){if(this._lowerCaseAttributeNames){name=name.toLowerCase();}this._attribname=name;};Parser.prototype.onattribdata=function(value){this._attribvalue+=value;};Parser.prototype.onattribend=function(){if(this._cbs.onattribute)this._cbs.onattribute(this._attribname,this._attribvalue);if(this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)){this._attribs[this._attribname]=this._attribvalue;}this._attribname="";this._attribvalue="";};Parser.prototype._getInstructionName=function(value){var idx=value.search(re_nameEnd),name=idx<0?value:value.substr(0,idx);if(this._lowerCaseTagNames){name=name.toLowerCase();}return name;};Parser.prototype.ondeclaration=function(value){if(this._cbs.onprocessinginstruction){var name=this._getInstructionName(value);this._cbs.onprocessinginstruction("!"+name,"!"+value);}};Parser.prototype.onprocessinginstruction=function(value){if(this._cbs.onprocessinginstruction){var name=this._getInstructionName(value);this._cbs.onprocessinginstruction("?"+name,"?"+value);}};Parser.prototype.oncomment=function(value){this._updatePosition(4);if(this._cbs.oncomment)this._cbs.oncomment(value);if(this._cbs.oncommentend)this._cbs.oncommentend();};Parser.prototype.oncdata=function(value){this._updatePosition(1);if(this._options.xmlMode||this._options.recognizeCDATA){if(this._cbs.oncdatastart)this._cbs.oncdatastart();if(this._cbs.ontext)this._cbs.ontext(value);if(this._cbs.oncdataend)this._cbs.oncdataend();}else{this.oncomment("[CDATA["+value+"]]");}};Parser.prototype.onerror=function(err){if(this._cbs.onerror)this._cbs.onerror(err);};Parser.prototype.onend=function(){if(this._cbs.onclosetag){for(var i=this._stack.length;i>0;this._cbs.onclosetag(this._stack[--i]));}if(this._cbs.onend)this._cbs.onend();};//Resets the parser to a blank state, ready to parse a new HTML document
Parser.prototype.reset=function(){if(this._cbs.onreset)this._cbs.onreset();this._tokenizer.reset();this._tagname="";this._attribname="";this._attribs=null;this._stack=[];if(this._cbs.onparserinit)this._cbs.onparserinit(this);};//Parses a complete HTML document and pushes it to the handler
Parser.prototype.parseComplete=function(data){this.reset();this.end(data);};Parser.prototype.write=function(chunk){this._tokenizer.write(chunk);};Parser.prototype.end=function(chunk){this._tokenizer.end(chunk);};Parser.prototype.pause=function(){this._tokenizer.pause();};Parser.prototype.resume=function(){this._tokenizer.resume();};//alias for backwards compat
Parser.prototype.parseChunk=Parser.prototype.write;Parser.prototype.done=Parser.prototype.end;var Parser_1=Parser;//Types of elements found in the DOM
var domelementtype={Text:"text",//Text
Directive:"directive",//<? ... ?>
Comment:"comment",//<!-- ... -->
Script:"script",//<script> tags
Style:"style",//<style> tags
Tag:"tag",//Any tag
CDATA:"cdata",//<![CDATA[ ... ]]>
Doctype:"doctype",isTag:function isTag(elem){return elem.type==="tag"||elem.type==="script"||elem.type==="style";}};var node={exports:{}};// This object will be used as the prototype for Nodes when creating a
// DOM-Level-1-compliant structure.
node.exports={get firstChild(){var children=this.children;return children&&children[0]||null;},get lastChild(){var children=this.children;return children&&children[children.length-1]||null;},get nodeType(){return nodeTypes[this.type]||nodeTypes.element;}};var domLvl1$1={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"};var nodeTypes={element:1,text:3,cdata:4,comment:8};Object.keys(domLvl1$1).forEach(function(key){});var nodeExports=node.exports;var element={exports:{}};// DOM-Level-1-compliant structure
var NodePrototype$1=nodeExports;var ElementPrototype$1=element.exports=Object.create(NodePrototype$1);var domLvl1={tagName:"name"};Object.keys(domLvl1).forEach(function(key){var shorthand=domLvl1[key];Object.defineProperty(ElementPrototype$1,key,{get:function get(){return this[shorthand]||null;},set:function set(val){this[shorthand]=val;return val;}});});var elementExports=element.exports;var ElementType=domelementtype;var re_whitespace=/\s+/g;var NodePrototype=nodeExports;var ElementPrototype=elementExports;function DomHandler(callback,options,elementCB){if(_typeof(callback)==="object"){elementCB=options;options=callback;callback=null;}else if(typeof options==="function"){elementCB=options;options=defaultOpts;}this._callback=callback;this._options=options||defaultOpts;this._elementCB=elementCB;this.dom=[];this._done=false;this._tagStack=[];this._parser=this._parser||null;}//default options
var defaultOpts={normalizeWhitespace:false,//Replace all whitespace with single spaces
withStartIndices:false,//Add startIndex properties to nodes
withEndIndices:false//Add endIndex properties to nodes
};DomHandler.prototype.onparserinit=function(parser){this._parser=parser;};//Resets the handler back to starting state
DomHandler.prototype.onreset=function(){DomHandler.call(this,this._callback,this._options,this._elementCB);};//Signals the handler that parsing is done
DomHandler.prototype.onend=function(){if(this._done)return;this._done=true;this._parser=null;this._handleCallback(null);};DomHandler.prototype._handleCallback=DomHandler.prototype.onerror=function(error){if(typeof this._callback==="function"){this._callback(error,this.dom);}else{if(error)throw error;}};DomHandler.prototype.onclosetag=function(){//if(this._tagStack.pop().name !== name) this._handleCallback(Error("Tagname didn't match!"));
var elem=this._tagStack.pop();if(this._options.withEndIndices&&elem){elem.endIndex=this._parser.endIndex;}if(this._elementCB)this._elementCB(elem);};DomHandler.prototype._createDomElement=function(properties){if(!this._options.withDomLvl1)return properties;var element;if(properties.type==="tag"){element=Object.create(ElementPrototype);}else{element=Object.create(NodePrototype);}for(var key in properties){if(properties.hasOwnProperty(key)){element[key]=properties[key];}}return element;};DomHandler.prototype._addDomElement=function(element){var parent=this._tagStack[this._tagStack.length-1];var siblings=parent?parent.children:this.dom;var previousSibling=siblings[siblings.length-1];element.next=null;if(this._options.withStartIndices){element.startIndex=this._parser.startIndex;}if(this._options.withEndIndices){element.endIndex=this._parser.endIndex;}if(previousSibling){element.prev=previousSibling;previousSibling.next=element;}else{element.prev=null;}siblings.push(element);element.parent=parent||null;};DomHandler.prototype.onopentag=function(name,attribs){var properties={type:name==="script"?ElementType.Script:name==="style"?ElementType.Style:ElementType.Tag,name:name,attribs:attribs,children:[]};var element=this._createDomElement(properties);this._addDomElement(element);this._tagStack.push(element);};DomHandler.prototype.ontext=function(data){//the ignoreWhitespace is officially dropped, but for now,
//it's an alias for normalizeWhitespace
var normalize=this._options.normalizeWhitespace||this._options.ignoreWhitespace;var lastTag;if(!this._tagStack.length&&this.dom.length&&(lastTag=this.dom[this.dom.length-1]).type===ElementType.Text){if(normalize){lastTag.data=(lastTag.data+data).replace(re_whitespace," ");}else{lastTag.data+=data;}}else{if(this._tagStack.length&&(lastTag=this._tagStack[this._tagStack.length-1])&&(lastTag=lastTag.children[lastTag.children.length-1])&&lastTag.type===ElementType.Text){if(normalize){lastTag.data=(lastTag.data+data).replace(re_whitespace," ");}else{lastTag.data+=data;}}else{if(normalize){data=data.replace(re_whitespace," ");}var element=this._createDomElement({data:data,type:ElementType.Text});this._addDomElement(element);}}};DomHandler.prototype.oncomment=function(data){var lastTag=this._tagStack[this._tagStack.length-1];if(lastTag&&lastTag.type===ElementType.Comment){lastTag.data+=data;return;}var properties={data:data,type:ElementType.Comment};var element=this._createDomElement(properties);this._addDomElement(element);this._tagStack.push(element);};DomHandler.prototype.oncdatastart=function(){var properties={children:[{data:"",type:ElementType.Text}],type:ElementType.CDATA};var element=this._createDomElement(properties);this._addDomElement(element);this._tagStack.push(element);};DomHandler.prototype.oncommentend=DomHandler.prototype.oncdataend=function(){this._tagStack.pop();};DomHandler.prototype.onprocessinginstruction=function(name,data){var element=this._createDomElement({name:name,data:data,type:ElementType.Directive});this._addDomElement(element);};var domhandler=DomHandler;var domutils={exports:{}};var domSerializer={exports:{}};var lib$1={};var hasRequiredLib$2;function requireLib$2(){if(hasRequiredLib$2)return lib$1;hasRequiredLib$2=1;(function(exports){Object.defineProperty(exports,"__esModule",{value:true});exports.Doctype=exports.CDATA=exports.Tag=exports.Style=exports.Script=exports.Comment=exports.Directive=exports.Text=exports.Root=exports.isTag=exports.ElementType=void 0;/** Types of elements found in htmlparser2's DOM */var ElementType;(function(ElementType){/** Type for the root element of a document */ElementType["Root"]="root";/** Type for Text */ElementType["Text"]="text";/** Type for <? ... ?> */ElementType["Directive"]="directive";/** Type for <!-- ... --> */ElementType["Comment"]="comment";/** Type for <script> tags */ElementType["Script"]="script";/** Type for <style> tags */ElementType["Style"]="style";/** Type for Any tag */ElementType["Tag"]="tag";/** Type for <![CDATA[ ... ]]> */ElementType["CDATA"]="cdata";/** Type for <!doctype ...> */ElementType["Doctype"]="doctype";})(ElementType=exports.ElementType||(exports.ElementType={}));/**
     * Tests whether an element is a tag or not.
     *
     * @param elem Element to test
     */function isTag(elem){return elem.type===ElementType.Tag||elem.type===ElementType.Script||elem.type===ElementType.Style;}exports.isTag=isTag;// Exports for backwards compatibility
/** Type for the root element of a document */exports.Root=ElementType.Root;/** Type for Text */exports.Text=ElementType.Text;/** Type for <? ... ?> */exports.Directive=ElementType.Directive;/** Type for <!-- ... --> */exports.Comment=ElementType.Comment;/** Type for <script> tags */exports.Script=ElementType.Script;/** Type for <style> tags */exports.Style=ElementType.Style;/** Type for Any tag */exports.Tag=ElementType.Tag;/** Type for <![CDATA[ ... ]]> */exports.CDATA=ElementType.CDATA;/** Type for <!doctype ...> */exports.Doctype=ElementType.Doctype;})(lib$1);return lib$1;}var lib={};var decode={};var Aacute$1="Á";var aacute$1="á";var Abreve="Ă";var abreve="ă";var ac="∾";var acd="∿";var acE="∾̳";var Acirc$1="Â";var acirc$1="â";var acute$1="´";var Acy="А";var acy="а";var AElig$1="Æ";var aelig$1="æ";var af="⁡";var Afr="𝔄";var afr="𝔞";var Agrave$1="À";var agrave$1="à";var alefsym="ℵ";var aleph="ℵ";var Alpha="Α";var alpha="α";var Amacr="Ā";var amacr="ā";var amalg="⨿";var amp$2="&";var AMP$1="&";var andand="⩕";var And="⩓";var and="∧";var andd="⩜";var andslope="⩘";var andv="⩚";var ang="∠";var ange="⦤";var angle="∠";var angmsdaa="⦨";var angmsdab="⦩";var angmsdac="⦪";var angmsdad="⦫";var angmsdae="⦬";var angmsdaf="⦭";var angmsdag="⦮";var angmsdah="⦯";var angmsd="∡";var angrt="∟";var angrtvb="⊾";var angrtvbd="⦝";var angsph="∢";var angst="Å";var angzarr="⍼";var Aogon="Ą";var aogon="ą";var Aopf="𝔸";var aopf="𝕒";var apacir="⩯";var ap="≈";var apE="⩰";var ape="≊";var apid="≋";var apos$1="'";var ApplyFunction="⁡";var approx="≈";var approxeq="≊";var Aring$1="Å";var aring$1="å";var Ascr="𝒜";var ascr="𝒶";var Assign="≔";var ast="*";var asymp="≈";var asympeq="≍";var Atilde$1="Ã";var atilde$1="ã";var Auml$1="Ä";var auml$1="ä";var awconint="∳";var awint="⨑";var backcong="≌";var backepsilon="϶";var backprime="‵";var backsim="∽";var backsimeq="⋍";var Backslash="∖";var Barv="⫧";var barvee="⊽";var barwed="⌅";var Barwed="⌆";var barwedge="⌅";var bbrk="⎵";var bbrktbrk="⎶";var bcong="≌";var Bcy="Б";var bcy="б";var bdquo="„";var becaus="∵";var because="∵";var Because="∵";var bemptyv="⦰";var bepsi="϶";var bernou="ℬ";var Bernoullis="ℬ";var Beta="Β";var beta="β";var beth="ℶ";var between="≬";var Bfr="𝔅";var bfr="𝔟";var bigcap="⋂";var bigcirc="◯";var bigcup="⋃";var bigodot="⨀";var bigoplus="⨁";var bigotimes="⨂";var bigsqcup="⨆";var bigstar="★";var bigtriangledown="▽";var bigtriangleup="△";var biguplus="⨄";var bigvee="⋁";var bigwedge="⋀";var bkarow="⤍";var blacklozenge="⧫";var blacksquare="▪";var blacktriangle="▴";var blacktriangledown="▾";var blacktriangleleft="◂";var blacktriangleright="▸";var blank="␣";var blk12="▒";var blk14="░";var blk34="▓";var block="█";var bne="=⃥";var bnequiv="≡⃥";var bNot="⫭";var bnot="⌐";var Bopf="𝔹";var bopf="𝕓";var bot="⊥";var bottom="⊥";var bowtie="⋈";var boxbox="⧉";var boxdl="┐";var boxdL="╕";var boxDl="╖";var boxDL="╗";var boxdr="┌";var boxdR="╒";var boxDr="╓";var boxDR="╔";var boxh="─";var boxH="═";var boxhd="┬";var boxHd="╤";var boxhD="╥";var boxHD="╦";var boxhu="┴";var boxHu="╧";var boxhU="╨";var boxHU="╩";var boxminus="⊟";var boxplus="⊞";var boxtimes="⊠";var boxul="┘";var boxuL="╛";var boxUl="╜";var boxUL="╝";var boxur="└";var boxuR="╘";var boxUr="╙";var boxUR="╚";var boxv="│";var boxV="║";var boxvh="┼";var boxvH="╪";var boxVh="╫";var boxVH="╬";var boxvl="┤";var boxvL="╡";var boxVl="╢";var boxVL="╣";var boxvr="├";var boxvR="╞";var boxVr="╟";var boxVR="╠";var bprime="‵";var breve="˘";var Breve="˘";var brvbar$1="¦";var bscr="𝒷";var Bscr="ℬ";var bsemi="⁏";var bsim="∽";var bsime="⋍";var bsolb="⧅";var bsol="\\";var bsolhsub="⟈";var bull="•";var bullet="•";var bump="≎";var bumpE="⪮";var bumpe="≏";var Bumpeq="≎";var bumpeq="≏";var Cacute="Ć";var cacute="ć";var capand="⩄";var capbrcup="⩉";var capcap="⩋";var cap="∩";var Cap="⋒";var capcup="⩇";var capdot="⩀";var CapitalDifferentialD="ⅅ";var caps="∩︀";var caret="⁁";var caron="ˇ";var Cayleys="ℭ";var ccaps="⩍";var Ccaron="Č";var ccaron="č";var Ccedil$1="Ç";var ccedil$1="ç";var Ccirc="Ĉ";var ccirc="ĉ";var Cconint="∰";var ccups="⩌";var ccupssm="⩐";var Cdot="Ċ";var cdot="ċ";var cedil$1="¸";var Cedilla="¸";var cemptyv="⦲";var cent$1="¢";var centerdot="·";var CenterDot="·";var cfr="𝔠";var Cfr="ℭ";var CHcy="Ч";var chcy="ч";var check="✓";var checkmark="✓";var Chi="Χ";var chi="χ";var circ="ˆ";var circeq="≗";var circlearrowleft="↺";var circlearrowright="↻";var circledast="⊛";var circledcirc="⊚";var circleddash="⊝";var CircleDot="⊙";var circledR="®";var circledS="Ⓢ";var CircleMinus="⊖";var CirclePlus="⊕";var CircleTimes="⊗";var cir="○";var cirE="⧃";var cire="≗";var cirfnint="⨐";var cirmid="⫯";var cirscir="⧂";var ClockwiseContourIntegral="∲";var CloseCurlyDoubleQuote="”";var CloseCurlyQuote="’";var clubs="♣";var clubsuit="♣";var colon=":";var Colon="∷";var Colone="⩴";var colone="≔";var coloneq="≔";var comma=",";var commat="@";var comp="∁";var compfn="∘";var complement="∁";var complexes="ℂ";var cong="≅";var congdot="⩭";var Congruent="≡";var conint="∮";var Conint="∯";var ContourIntegral="∮";var copf="𝕔";var Copf="ℂ";var coprod="∐";var Coproduct="∐";var copy$1="©";var COPY$1="©";var copysr="℗";var CounterClockwiseContourIntegral="∳";var crarr="↵";var cross="✗";var Cross="⨯";var Cscr="𝒞";var cscr="𝒸";var csub="⫏";var csube="⫑";var csup="⫐";var csupe="⫒";var ctdot="⋯";var cudarrl="⤸";var cudarrr="⤵";var cuepr="⋞";var cuesc="⋟";var cularr="↶";var cularrp="⤽";var cupbrcap="⩈";var cupcap="⩆";var CupCap="≍";var cup="∪";var Cup="⋓";var cupcup="⩊";var cupdot="⊍";var cupor="⩅";var cups="∪︀";var curarr="↷";var curarrm="⤼";var curlyeqprec="⋞";var curlyeqsucc="⋟";var curlyvee="⋎";var curlywedge="⋏";var curren$1="¤";var curvearrowleft="↶";var curvearrowright="↷";var cuvee="⋎";var cuwed="⋏";var cwconint="∲";var cwint="∱";var cylcty="⌭";var dagger="†";var Dagger="‡";var daleth="ℸ";var darr="↓";var Darr="↡";var dArr="⇓";var dash="‐";var Dashv="⫤";var dashv="⊣";var dbkarow="⤏";var dblac="˝";var Dcaron="Ď";var dcaron="ď";var Dcy="Д";var dcy="д";var ddagger="‡";var ddarr="⇊";var DD="ⅅ";var dd="ⅆ";var DDotrahd="⤑";var ddotseq="⩷";var deg$1="°";var Del="∇";var Delta="Δ";var delta="δ";var demptyv="⦱";var dfisht="⥿";var Dfr="𝔇";var dfr="𝔡";var dHar="⥥";var dharl="⇃";var dharr="⇂";var DiacriticalAcute="´";var DiacriticalDot="˙";var DiacriticalDoubleAcute="˝";var DiacriticalGrave="`";var DiacriticalTilde="˜";var diam="⋄";var diamond="⋄";var Diamond="⋄";var diamondsuit="♦";var diams="♦";var die="¨";var DifferentialD="ⅆ";var digamma="ϝ";var disin="⋲";var div="÷";var divide$1="÷";var divideontimes="⋇";var divonx="⋇";var DJcy="Ђ";var djcy="ђ";var dlcorn="⌞";var dlcrop="⌍";var dollar="$";var Dopf="𝔻";var dopf="𝕕";var Dot="¨";var dot="˙";var DotDot="⃜";var doteq="≐";var doteqdot="≑";var DotEqual="≐";var dotminus="∸";var dotplus="∔";var dotsquare="⊡";var doublebarwedge="⌆";var DoubleContourIntegral="∯";var DoubleDot="¨";var DoubleDownArrow="⇓";var DoubleLeftArrow="⇐";var DoubleLeftRightArrow="⇔";var DoubleLeftTee="⫤";var DoubleLongLeftArrow="⟸";var DoubleLongLeftRightArrow="⟺";var DoubleLongRightArrow="⟹";var DoubleRightArrow="⇒";var DoubleRightTee="⊨";var DoubleUpArrow="⇑";var DoubleUpDownArrow="⇕";var DoubleVerticalBar="∥";var DownArrowBar="⤓";var downarrow="↓";var DownArrow="↓";var Downarrow="⇓";var DownArrowUpArrow="⇵";var DownBreve="̑";var downdownarrows="⇊";var downharpoonleft="⇃";var downharpoonright="⇂";var DownLeftRightVector="⥐";var DownLeftTeeVector="⥞";var DownLeftVectorBar="⥖";var DownLeftVector="↽";var DownRightTeeVector="⥟";var DownRightVectorBar="⥗";var DownRightVector="⇁";var DownTeeArrow="↧";var DownTee="⊤";var drbkarow="⤐";var drcorn="⌟";var drcrop="⌌";var Dscr="𝒟";var dscr="𝒹";var DScy="Ѕ";var dscy="ѕ";var dsol="⧶";var Dstrok="Đ";var dstrok="đ";var dtdot="⋱";var dtri="▿";var dtrif="▾";var duarr="⇵";var duhar="⥯";var dwangle="⦦";var DZcy="Џ";var dzcy="џ";var dzigrarr="⟿";var Eacute$1="É";var eacute$1="é";var easter="⩮";var Ecaron="Ě";var ecaron="ě";var Ecirc$1="Ê";var ecirc$1="ê";var ecir="≖";var ecolon="≕";var Ecy="Э";var ecy="э";var eDDot="⩷";var Edot="Ė";var edot="ė";var eDot="≑";var ee="ⅇ";var efDot="≒";var Efr="𝔈";var efr="𝔢";var eg="⪚";var Egrave$1="È";var egrave$1="è";var egs="⪖";var egsdot="⪘";var el="⪙";var Element$1="∈";var elinters="⏧";var ell="ℓ";var els="⪕";var elsdot="⪗";var Emacr="Ē";var emacr="ē";var empty="∅";var emptyset="∅";var EmptySmallSquare="◻";var emptyv="∅";var EmptyVerySmallSquare="▫";var emsp13=" ";var emsp14=" ";var emsp=" ";var ENG="Ŋ";var eng="ŋ";var ensp=" ";var Eogon="Ę";var eogon="ę";var Eopf="𝔼";var eopf="𝕖";var epar="⋕";var eparsl="⧣";var eplus="⩱";var epsi="ε";var Epsilon="Ε";var epsilon="ε";var epsiv="ϵ";var eqcirc="≖";var eqcolon="≕";var eqsim="≂";var eqslantgtr="⪖";var eqslantless="⪕";var Equal="⩵";var equals="=";var EqualTilde="≂";var equest="≟";var Equilibrium="⇌";var equiv="≡";var equivDD="⩸";var eqvparsl="⧥";var erarr="⥱";var erDot="≓";var escr="ℯ";var Escr="ℰ";var esdot="≐";var Esim="⩳";var esim="≂";var Eta="Η";var eta="η";var ETH$1="Ð";var eth$1="ð";var Euml$1="Ë";var euml$1="ë";var euro="€";var excl="!";var exist="∃";var Exists="∃";var expectation="ℰ";var exponentiale="ⅇ";var ExponentialE="ⅇ";var fallingdotseq="≒";var Fcy="Ф";var fcy="ф";var female="♀";var ffilig="ﬃ";var fflig="ﬀ";var ffllig="ﬄ";var Ffr="𝔉";var ffr="𝔣";var filig="ﬁ";var FilledSmallSquare="◼";var FilledVerySmallSquare="▪";var fjlig="fj";var flat="♭";var fllig="ﬂ";var fltns="▱";var fnof="ƒ";var Fopf="𝔽";var fopf="𝕗";var forall="∀";var ForAll="∀";var fork="⋔";var forkv="⫙";var Fouriertrf="ℱ";var fpartint="⨍";var frac12$1="½";var frac13="⅓";var frac14$1="¼";var frac15="⅕";var frac16="⅙";var frac18="⅛";var frac23="⅔";var frac25="⅖";var frac34$1="¾";var frac35="⅗";var frac38="⅜";var frac45="⅘";var frac56="⅚";var frac58="⅝";var frac78="⅞";var frasl="⁄";var frown="⌢";var fscr="𝒻";var Fscr="ℱ";var gacute="ǵ";var Gamma="Γ";var gamma="γ";var Gammad="Ϝ";var gammad="ϝ";var gap="⪆";var Gbreve="Ğ";var gbreve="ğ";var Gcedil="Ģ";var Gcirc="Ĝ";var gcirc="ĝ";var Gcy="Г";var gcy="г";var Gdot="Ġ";var gdot="ġ";var ge="≥";var gE="≧";var gEl="⪌";var gel="⋛";var geq="≥";var geqq="≧";var geqslant="⩾";var gescc="⪩";var ges="⩾";var gesdot="⪀";var gesdoto="⪂";var gesdotol="⪄";var gesl="⋛︀";var gesles="⪔";var Gfr="𝔊";var gfr="𝔤";var gg="≫";var Gg="⋙";var ggg="⋙";var gimel="ℷ";var GJcy="Ѓ";var gjcy="ѓ";var gla="⪥";var gl="≷";var glE="⪒";var glj="⪤";var gnap="⪊";var gnapprox="⪊";var gne="⪈";var gnE="≩";var gneq="⪈";var gneqq="≩";var gnsim="⋧";var Gopf="𝔾";var gopf="𝕘";var grave="`";var GreaterEqual="≥";var GreaterEqualLess="⋛";var GreaterFullEqual="≧";var GreaterGreater="⪢";var GreaterLess="≷";var GreaterSlantEqual="⩾";var GreaterTilde="≳";var Gscr="𝒢";var gscr="ℊ";var gsim="≳";var gsime="⪎";var gsiml="⪐";var gtcc="⪧";var gtcir="⩺";var gt$2=">";var GT$1=">";var Gt="≫";var gtdot="⋗";var gtlPar="⦕";var gtquest="⩼";var gtrapprox="⪆";var gtrarr="⥸";var gtrdot="⋗";var gtreqless="⋛";var gtreqqless="⪌";var gtrless="≷";var gtrsim="≳";var gvertneqq="≩︀";var gvnE="≩︀";var Hacek="ˇ";var hairsp=" ";var half="½";var hamilt="ℋ";var HARDcy="Ъ";var hardcy="ъ";var harrcir="⥈";var harr="↔";var hArr="⇔";var harrw="↭";var Hat="^";var hbar="ℏ";var Hcirc="Ĥ";var hcirc="ĥ";var hearts="♥";var heartsuit="♥";var hellip="…";var hercon="⊹";var hfr="𝔥";var Hfr="ℌ";var HilbertSpace="ℋ";var hksearow="⤥";var hkswarow="⤦";var hoarr="⇿";var homtht="∻";var hookleftarrow="↩";var hookrightarrow="↪";var hopf="𝕙";var Hopf="ℍ";var horbar="―";var HorizontalLine="─";var hscr="𝒽";var Hscr="ℋ";var hslash="ℏ";var Hstrok="Ħ";var hstrok="ħ";var HumpDownHump="≎";var HumpEqual="≏";var hybull="⁃";var hyphen="‐";var Iacute$1="Í";var iacute$1="í";var ic="⁣";var Icirc$1="Î";var icirc$1="î";var Icy="И";var icy="и";var Idot="İ";var IEcy="Е";var iecy="е";var iexcl$1="¡";var iff="⇔";var ifr="𝔦";var Ifr="ℑ";var Igrave$1="Ì";var igrave$1="ì";var ii="ⅈ";var iiiint="⨌";var iiint="∭";var iinfin="⧜";var iiota="℩";var IJlig="Ĳ";var ijlig="ĳ";var Imacr="Ī";var imacr="ī";var image="ℑ";var ImaginaryI="ⅈ";var imagline="ℐ";var imagpart="ℑ";var imath="ı";var Im="ℑ";var imof="⊷";var imped="Ƶ";var Implies="⇒";var incare="℅";var infin="∞";var infintie="⧝";var inodot="ı";var intcal="⊺";var int="∫";var Int="∬";var integers="ℤ";var Integral="∫";var intercal="⊺";var Intersection="⋂";var intlarhk="⨗";var intprod="⨼";var InvisibleComma="⁣";var InvisibleTimes="⁢";var IOcy="Ё";var iocy="ё";var Iogon="Į";var iogon="į";var Iopf="𝕀";var iopf="𝕚";var Iota="Ι";var iota="ι";var iprod="⨼";var iquest$1="¿";var iscr="𝒾";var Iscr="ℐ";var isin="∈";var isindot="⋵";var isinE="⋹";var isins="⋴";var isinsv="⋳";var isinv="∈";var it="⁢";var Itilde="Ĩ";var itilde="ĩ";var Iukcy="І";var iukcy="і";var Iuml$1="Ï";var iuml$1="ï";var Jcirc="Ĵ";var jcirc="ĵ";var Jcy="Й";var jcy="й";var Jfr="𝔍";var jfr="𝔧";var jmath="ȷ";var Jopf="𝕁";var jopf="𝕛";var Jscr="𝒥";var jscr="𝒿";var Jsercy="Ј";var jsercy="ј";var Jukcy="Є";var jukcy="є";var Kappa="Κ";var kappa="κ";var kappav="ϰ";var Kcedil="Ķ";var kcedil="ķ";var Kcy="К";var kcy="к";var Kfr="𝔎";var kfr="𝔨";var kgreen="ĸ";var KHcy="Х";var khcy="х";var KJcy="Ќ";var kjcy="ќ";var Kopf="𝕂";var kopf="𝕜";var Kscr="𝒦";var kscr="𝓀";var lAarr="⇚";var Lacute="Ĺ";var lacute="ĺ";var laemptyv="⦴";var lagran="ℒ";var Lambda="Λ";var lambda="λ";var lang="⟨";var Lang="⟪";var langd="⦑";var langle="⟨";var lap="⪅";var Laplacetrf="ℒ";var laquo$1="«";var larrb="⇤";var larrbfs="⤟";var larr="←";var Larr="↞";var lArr="⇐";var larrfs="⤝";var larrhk="↩";var larrlp="↫";var larrpl="⤹";var larrsim="⥳";var larrtl="↢";var latail="⤙";var lAtail="⤛";var lat="⪫";var late="⪭";var lates="⪭︀";var lbarr="⤌";var lBarr="⤎";var lbbrk="❲";var lbrace="{";var lbrack="[";var lbrke="⦋";var lbrksld="⦏";var lbrkslu="⦍";var Lcaron="Ľ";var lcaron="ľ";var Lcedil="Ļ";var lcedil="ļ";var lceil="⌈";var lcub="{";var Lcy="Л";var lcy="л";var ldca="⤶";var ldquo="“";var ldquor="„";var ldrdhar="⥧";var ldrushar="⥋";var ldsh="↲";var le="≤";var lE="≦";var LeftAngleBracket="⟨";var LeftArrowBar="⇤";var leftarrow="←";var LeftArrow="←";var Leftarrow="⇐";var LeftArrowRightArrow="⇆";var leftarrowtail="↢";var LeftCeiling="⌈";var LeftDoubleBracket="⟦";var LeftDownTeeVector="⥡";var LeftDownVectorBar="⥙";var LeftDownVector="⇃";var LeftFloor="⌊";var leftharpoondown="↽";var leftharpoonup="↼";var leftleftarrows="⇇";var leftrightarrow="↔";var LeftRightArrow="↔";var Leftrightarrow="⇔";var leftrightarrows="⇆";var leftrightharpoons="⇋";var leftrightsquigarrow="↭";var LeftRightVector="⥎";var LeftTeeArrow="↤";var LeftTee="⊣";var LeftTeeVector="⥚";var leftthreetimes="⋋";var LeftTriangleBar="⧏";var LeftTriangle="⊲";var LeftTriangleEqual="⊴";var LeftUpDownVector="⥑";var LeftUpTeeVector="⥠";var LeftUpVectorBar="⥘";var LeftUpVector="↿";var LeftVectorBar="⥒";var LeftVector="↼";var lEg="⪋";var leg="⋚";var leq="≤";var leqq="≦";var leqslant="⩽";var lescc="⪨";var les="⩽";var lesdot="⩿";var lesdoto="⪁";var lesdotor="⪃";var lesg="⋚︀";var lesges="⪓";var lessapprox="⪅";var lessdot="⋖";var lesseqgtr="⋚";var lesseqqgtr="⪋";var LessEqualGreater="⋚";var LessFullEqual="≦";var LessGreater="≶";var lessgtr="≶";var LessLess="⪡";var lesssim="≲";var LessSlantEqual="⩽";var LessTilde="≲";var lfisht="⥼";var lfloor="⌊";var Lfr="𝔏";var lfr="𝔩";var lg="≶";var lgE="⪑";var lHar="⥢";var lhard="↽";var lharu="↼";var lharul="⥪";var lhblk="▄";var LJcy="Љ";var ljcy="љ";var llarr="⇇";var ll="≪";var Ll="⋘";var llcorner="⌞";var Lleftarrow="⇚";var llhard="⥫";var lltri="◺";var Lmidot="Ŀ";var lmidot="ŀ";var lmoustache="⎰";var lmoust="⎰";var lnap="⪉";var lnapprox="⪉";var lne="⪇";var lnE="≨";var lneq="⪇";var lneqq="≨";var lnsim="⋦";var loang="⟬";var loarr="⇽";var lobrk="⟦";var longleftarrow="⟵";var LongLeftArrow="⟵";var Longleftarrow="⟸";var longleftrightarrow="⟷";var LongLeftRightArrow="⟷";var Longleftrightarrow="⟺";var longmapsto="⟼";var longrightarrow="⟶";var LongRightArrow="⟶";var Longrightarrow="⟹";var looparrowleft="↫";var looparrowright="↬";var lopar="⦅";var Lopf="𝕃";var lopf="𝕝";var loplus="⨭";var lotimes="⨴";var lowast="∗";var lowbar="_";var LowerLeftArrow="↙";var LowerRightArrow="↘";var loz="◊";var lozenge="◊";var lozf="⧫";var lpar="(";var lparlt="⦓";var lrarr="⇆";var lrcorner="⌟";var lrhar="⇋";var lrhard="⥭";var lrm="‎";var lrtri="⊿";var lsaquo="‹";var lscr="𝓁";var Lscr="ℒ";var lsh="↰";var Lsh="↰";var lsim="≲";var lsime="⪍";var lsimg="⪏";var lsqb="[";var lsquo="‘";var lsquor="‚";var Lstrok="Ł";var lstrok="ł";var ltcc="⪦";var ltcir="⩹";var lt$2="<";var LT$1="<";var Lt="≪";var ltdot="⋖";var lthree="⋋";var ltimes="⋉";var ltlarr="⥶";var ltquest="⩻";var ltri="◃";var ltrie="⊴";var ltrif="◂";var ltrPar="⦖";var lurdshar="⥊";var luruhar="⥦";var lvertneqq="≨︀";var lvnE="≨︀";var macr$1="¯";var male="♂";var malt="✠";var maltese="✠";var map$1="↦";var mapsto="↦";var mapstodown="↧";var mapstoleft="↤";var mapstoup="↥";var marker="▮";var mcomma="⨩";var Mcy="М";var mcy="м";var mdash="—";var mDDot="∺";var measuredangle="∡";var MediumSpace=" ";var Mellintrf="ℳ";var Mfr="𝔐";var mfr="𝔪";var mho="℧";var micro$1="µ";var midast="*";var midcir="⫰";var mid="∣";var middot$1="·";var minusb="⊟";var minus="−";var minusd="∸";var minusdu="⨪";var MinusPlus="∓";var mlcp="⫛";var mldr="…";var mnplus="∓";var models="⊧";var Mopf="𝕄";var mopf="𝕞";var mp="∓";var mscr="𝓂";var Mscr="ℳ";var mstpos="∾";var Mu="Μ";var mu="μ";var multimap="⊸";var mumap="⊸";var nabla="∇";var Nacute="Ń";var nacute="ń";var nang="∠⃒";var nap="≉";var napE="⩰̸";var napid="≋̸";var napos="ŉ";var napprox="≉";var natural="♮";var naturals="ℕ";var natur="♮";var nbsp$1=" ";var nbump="≎̸";var nbumpe="≏̸";var ncap="⩃";var Ncaron="Ň";var ncaron="ň";var Ncedil="Ņ";var ncedil="ņ";var ncong="≇";var ncongdot="⩭̸";var ncup="⩂";var Ncy="Н";var ncy="н";var ndash="–";var nearhk="⤤";var nearr="↗";var neArr="⇗";var nearrow="↗";var ne="≠";var nedot="≐̸";var NegativeMediumSpace="​";var NegativeThickSpace="​";var NegativeThinSpace="​";var NegativeVeryThinSpace="​";var nequiv="≢";var nesear="⤨";var nesim="≂̸";var NestedGreaterGreater="≫";var NestedLessLess="≪";var NewLine="\n";var nexist="∄";var nexists="∄";var Nfr="𝔑";var nfr="𝔫";var ngE="≧̸";var nge="≱";var ngeq="≱";var ngeqq="≧̸";var ngeqslant="⩾̸";var nges="⩾̸";var nGg="⋙̸";var ngsim="≵";var nGt="≫⃒";var ngt="≯";var ngtr="≯";var nGtv="≫̸";var nharr="↮";var nhArr="⇎";var nhpar="⫲";var ni="∋";var nis="⋼";var nisd="⋺";var niv="∋";var NJcy="Њ";var njcy="њ";var nlarr="↚";var nlArr="⇍";var nldr="‥";var nlE="≦̸";var nle="≰";var nleftarrow="↚";var nLeftarrow="⇍";var nleftrightarrow="↮";var nLeftrightarrow="⇎";var nleq="≰";var nleqq="≦̸";var nleqslant="⩽̸";var nles="⩽̸";var nless="≮";var nLl="⋘̸";var nlsim="≴";var nLt="≪⃒";var nlt="≮";var nltri="⋪";var nltrie="⋬";var nLtv="≪̸";var nmid="∤";var NoBreak="⁠";var NonBreakingSpace=" ";var nopf="𝕟";var Nopf="ℕ";var Not="⫬";var not$1="¬";var NotCongruent="≢";var NotCupCap="≭";var NotDoubleVerticalBar="∦";var NotElement="∉";var NotEqual="≠";var NotEqualTilde="≂̸";var NotExists="∄";var NotGreater="≯";var NotGreaterEqual="≱";var NotGreaterFullEqual="≧̸";var NotGreaterGreater="≫̸";var NotGreaterLess="≹";var NotGreaterSlantEqual="⩾̸";var NotGreaterTilde="≵";var NotHumpDownHump="≎̸";var NotHumpEqual="≏̸";var notin="∉";var notindot="⋵̸";var notinE="⋹̸";var notinva="∉";var notinvb="⋷";var notinvc="⋶";var NotLeftTriangleBar="⧏̸";var NotLeftTriangle="⋪";var NotLeftTriangleEqual="⋬";var NotLess="≮";var NotLessEqual="≰";var NotLessGreater="≸";var NotLessLess="≪̸";var NotLessSlantEqual="⩽̸";var NotLessTilde="≴";var NotNestedGreaterGreater="⪢̸";var NotNestedLessLess="⪡̸";var notni="∌";var notniva="∌";var notnivb="⋾";var notnivc="⋽";var NotPrecedes="⊀";var NotPrecedesEqual="⪯̸";var NotPrecedesSlantEqual="⋠";var NotReverseElement="∌";var NotRightTriangleBar="⧐̸";var NotRightTriangle="⋫";var NotRightTriangleEqual="⋭";var NotSquareSubset="⊏̸";var NotSquareSubsetEqual="⋢";var NotSquareSuperset="⊐̸";var NotSquareSupersetEqual="⋣";var NotSubset="⊂⃒";var NotSubsetEqual="⊈";var NotSucceeds="⊁";var NotSucceedsEqual="⪰̸";var NotSucceedsSlantEqual="⋡";var NotSucceedsTilde="≿̸";var NotSuperset="⊃⃒";var NotSupersetEqual="⊉";var NotTilde="≁";var NotTildeEqual="≄";var NotTildeFullEqual="≇";var NotTildeTilde="≉";var NotVerticalBar="∤";var nparallel="∦";var npar="∦";var nparsl="⫽⃥";var npart="∂̸";var npolint="⨔";var npr="⊀";var nprcue="⋠";var nprec="⊀";var npreceq="⪯̸";var npre="⪯̸";var nrarrc="⤳̸";var nrarr="↛";var nrArr="⇏";var nrarrw="↝̸";var nrightarrow="↛";var nRightarrow="⇏";var nrtri="⋫";var nrtrie="⋭";var nsc="⊁";var nsccue="⋡";var nsce="⪰̸";var Nscr="𝒩";var nscr="𝓃";var nshortmid="∤";var nshortparallel="∦";var nsim="≁";var nsime="≄";var nsimeq="≄";var nsmid="∤";var nspar="∦";var nsqsube="⋢";var nsqsupe="⋣";var nsub="⊄";var nsubE="⫅̸";var nsube="⊈";var nsubset="⊂⃒";var nsubseteq="⊈";var nsubseteqq="⫅̸";var nsucc="⊁";var nsucceq="⪰̸";var nsup="⊅";var nsupE="⫆̸";var nsupe="⊉";var nsupset="⊃⃒";var nsupseteq="⊉";var nsupseteqq="⫆̸";var ntgl="≹";var Ntilde$1="Ñ";var ntilde$1="ñ";var ntlg="≸";var ntriangleleft="⋪";var ntrianglelefteq="⋬";var ntriangleright="⋫";var ntrianglerighteq="⋭";var Nu="Ν";var nu="ν";var num="#";var numero="№";var numsp=" ";var nvap="≍⃒";var nvdash="⊬";var nvDash="⊭";var nVdash="⊮";var nVDash="⊯";var nvge="≥⃒";var nvgt=">⃒";var nvHarr="⤄";var nvinfin="⧞";var nvlArr="⤂";var nvle="≤⃒";var nvlt="<⃒";var nvltrie="⊴⃒";var nvrArr="⤃";var nvrtrie="⊵⃒";var nvsim="∼⃒";var nwarhk="⤣";var nwarr="↖";var nwArr="⇖";var nwarrow="↖";var nwnear="⤧";var Oacute$1="Ó";var oacute$1="ó";var oast="⊛";var Ocirc$1="Ô";var ocirc$1="ô";var ocir="⊚";var Ocy="О";var ocy="о";var odash="⊝";var Odblac="Ő";var odblac="ő";var odiv="⨸";var odot="⊙";var odsold="⦼";var OElig="Œ";var oelig="œ";var ofcir="⦿";var Ofr="𝔒";var ofr="𝔬";var ogon="˛";var Ograve$1="Ò";var ograve$1="ò";var ogt="⧁";var ohbar="⦵";var ohm="Ω";var oint="∮";var olarr="↺";var olcir="⦾";var olcross="⦻";var oline="‾";var olt="⧀";var Omacr="Ō";var omacr="ō";var Omega="Ω";var omega="ω";var Omicron="Ο";var omicron="ο";var omid="⦶";var ominus="⊖";var Oopf="𝕆";var oopf="𝕠";var opar="⦷";var OpenCurlyDoubleQuote="“";var OpenCurlyQuote="‘";var operp="⦹";var oplus="⊕";var orarr="↻";var Or="⩔";var or="∨";var ord="⩝";var order="ℴ";var orderof="ℴ";var ordf$1="ª";var ordm$1="º";var origof="⊶";var oror="⩖";var orslope="⩗";var orv="⩛";var oS="Ⓢ";var Oscr="𝒪";var oscr="ℴ";var Oslash$1="Ø";var oslash$1="ø";var osol="⊘";var Otilde$1="Õ";var otilde$1="õ";var otimesas="⨶";var Otimes="⨷";var otimes="⊗";var Ouml$1="Ö";var ouml$1="ö";var ovbar="⌽";var OverBar="‾";var OverBrace="⏞";var OverBracket="⎴";var OverParenthesis="⏜";var para$1="¶";var parallel="∥";var par="∥";var parsim="⫳";var parsl="⫽";var part="∂";var PartialD="∂";var Pcy="П";var pcy="п";var percnt="%";var period=".";var permil="‰";var perp="⊥";var pertenk="‱";var Pfr="𝔓";var pfr="𝔭";var Phi="Φ";var phi="φ";var phiv="ϕ";var phmmat="ℳ";var phone="☎";var Pi="Π";var pi="π";var pitchfork="⋔";var piv="ϖ";var planck="ℏ";var planckh="ℎ";var plankv="ℏ";var plusacir="⨣";var plusb="⊞";var pluscir="⨢";var plus="+";var plusdo="∔";var plusdu="⨥";var pluse="⩲";var PlusMinus="±";var plusmn$1="±";var plussim="⨦";var plustwo="⨧";var pm="±";var Poincareplane="ℌ";var pointint="⨕";var popf="𝕡";var Popf="ℙ";var pound$1="£";var prap="⪷";var Pr="⪻";var pr="≺";var prcue="≼";var precapprox="⪷";var prec="≺";var preccurlyeq="≼";var Precedes="≺";var PrecedesEqual="⪯";var PrecedesSlantEqual="≼";var PrecedesTilde="≾";var preceq="⪯";var precnapprox="⪹";var precneqq="⪵";var precnsim="⋨";var pre="⪯";var prE="⪳";var precsim="≾";var prime="′";var Prime="″";var primes="ℙ";var prnap="⪹";var prnE="⪵";var prnsim="⋨";var prod="∏";var Product="∏";var profalar="⌮";var profline="⌒";var profsurf="⌓";var prop="∝";var Proportional="∝";var Proportion="∷";var propto="∝";var prsim="≾";var prurel="⊰";var Pscr="𝒫";var pscr="𝓅";var Psi="Ψ";var psi="ψ";var puncsp=" ";var Qfr="𝔔";var qfr="𝔮";var qint="⨌";var qopf="𝕢";var Qopf="ℚ";var qprime="⁗";var Qscr="𝒬";var qscr="𝓆";var quaternions="ℍ";var quatint="⨖";var quest="?";var questeq="≟";var quot$2="\"";var QUOT$1="\"";var rAarr="⇛";var race="∽̱";var Racute="Ŕ";var racute="ŕ";var radic="√";var raemptyv="⦳";var rang="⟩";var Rang="⟫";var rangd="⦒";var range="⦥";var rangle="⟩";var raquo$1="»";var rarrap="⥵";var rarrb="⇥";var rarrbfs="⤠";var rarrc="⤳";var rarr="→";var Rarr="↠";var rArr="⇒";var rarrfs="⤞";var rarrhk="↪";var rarrlp="↬";var rarrpl="⥅";var rarrsim="⥴";var Rarrtl="⤖";var rarrtl="↣";var rarrw="↝";var ratail="⤚";var rAtail="⤜";var ratio="∶";var rationals="ℚ";var rbarr="⤍";var rBarr="⤏";var RBarr="⤐";var rbbrk="❳";var rbrace="}";var rbrack="]";var rbrke="⦌";var rbrksld="⦎";var rbrkslu="⦐";var Rcaron="Ř";var rcaron="ř";var Rcedil="Ŗ";var rcedil="ŗ";var rceil="⌉";var rcub="}";var Rcy="Р";var rcy="р";var rdca="⤷";var rdldhar="⥩";var rdquo="”";var rdquor="”";var rdsh="↳";var real="ℜ";var realine="ℛ";var realpart="ℜ";var reals="ℝ";var Re="ℜ";var rect="▭";var reg$1="®";var REG$1="®";var ReverseElement="∋";var ReverseEquilibrium="⇋";var ReverseUpEquilibrium="⥯";var rfisht="⥽";var rfloor="⌋";var rfr="𝔯";var Rfr="ℜ";var rHar="⥤";var rhard="⇁";var rharu="⇀";var rharul="⥬";var Rho="Ρ";var rho="ρ";var rhov="ϱ";var RightAngleBracket="⟩";var RightArrowBar="⇥";var rightarrow="→";var RightArrow="→";var Rightarrow="⇒";var RightArrowLeftArrow="⇄";var rightarrowtail="↣";var RightCeiling="⌉";var RightDoubleBracket="⟧";var RightDownTeeVector="⥝";var RightDownVectorBar="⥕";var RightDownVector="⇂";var RightFloor="⌋";var rightharpoondown="⇁";var rightharpoonup="⇀";var rightleftarrows="⇄";var rightleftharpoons="⇌";var rightrightarrows="⇉";var rightsquigarrow="↝";var RightTeeArrow="↦";var RightTee="⊢";var RightTeeVector="⥛";var rightthreetimes="⋌";var RightTriangleBar="⧐";var RightTriangle="⊳";var RightTriangleEqual="⊵";var RightUpDownVector="⥏";var RightUpTeeVector="⥜";var RightUpVectorBar="⥔";var RightUpVector="↾";var RightVectorBar="⥓";var RightVector="⇀";var ring="˚";var risingdotseq="≓";var rlarr="⇄";var rlhar="⇌";var rlm="‏";var rmoustache="⎱";var rmoust="⎱";var rnmid="⫮";var roang="⟭";var roarr="⇾";var robrk="⟧";var ropar="⦆";var ropf="𝕣";var Ropf="ℝ";var roplus="⨮";var rotimes="⨵";var RoundImplies="⥰";var rpar=")";var rpargt="⦔";var rppolint="⨒";var rrarr="⇉";var Rrightarrow="⇛";var rsaquo="›";var rscr="𝓇";var Rscr="ℛ";var rsh="↱";var Rsh="↱";var rsqb="]";var rsquo="’";var rsquor="’";var rthree="⋌";var rtimes="⋊";var rtri="▹";var rtrie="⊵";var rtrif="▸";var rtriltri="⧎";var RuleDelayed="⧴";var ruluhar="⥨";var rx$1="℞";var Sacute="Ś";var sacute="ś";var sbquo="‚";var scap="⪸";var Scaron="Š";var scaron="š";var Sc="⪼";var sc="≻";var sccue="≽";var sce="⪰";var scE="⪴";var Scedil="Ş";var scedil="ş";var Scirc="Ŝ";var scirc="ŝ";var scnap="⪺";var scnE="⪶";var scnsim="⋩";var scpolint="⨓";var scsim="≿";var Scy="С";var scy="с";var sdotb="⊡";var sdot="⋅";var sdote="⩦";var searhk="⤥";var searr="↘";var seArr="⇘";var searrow="↘";var sect$1="§";var semi=";";var seswar="⤩";var setminus="∖";var setmn="∖";var sext="✶";var Sfr="𝔖";var sfr="𝔰";var sfrown="⌢";var sharp="♯";var SHCHcy="Щ";var shchcy="щ";var SHcy="Ш";var shcy="ш";var ShortDownArrow="↓";var ShortLeftArrow="←";var shortmid="∣";var shortparallel="∥";var ShortRightArrow="→";var ShortUpArrow="↑";var shy$1="­";var Sigma="Σ";var sigma="σ";var sigmaf="ς";var sigmav="ς";var sim="∼";var simdot="⩪";var sime="≃";var simeq="≃";var simg="⪞";var simgE="⪠";var siml="⪝";var simlE="⪟";var simne="≆";var simplus="⨤";var simrarr="⥲";var slarr="←";var SmallCircle="∘";var smallsetminus="∖";var smashp="⨳";var smeparsl="⧤";var smid="∣";var smile="⌣";var smt="⪪";var smte="⪬";var smtes="⪬︀";var SOFTcy="Ь";var softcy="ь";var solbar="⌿";var solb="⧄";var sol="/";var Sopf="𝕊";var sopf="𝕤";var spades="♠";var spadesuit="♠";var spar="∥";var sqcap="⊓";var sqcaps="⊓︀";var sqcup="⊔";var sqcups="⊔︀";var Sqrt="√";var sqsub="⊏";var sqsube="⊑";var sqsubset="⊏";var sqsubseteq="⊑";var sqsup="⊐";var sqsupe="⊒";var sqsupset="⊐";var sqsupseteq="⊒";var square="□";var Square="□";var SquareIntersection="⊓";var SquareSubset="⊏";var SquareSubsetEqual="⊑";var SquareSuperset="⊐";var SquareSupersetEqual="⊒";var SquareUnion="⊔";var squarf="▪";var squ="□";var squf="▪";var srarr="→";var Sscr="𝒮";var sscr="𝓈";var ssetmn="∖";var ssmile="⌣";var sstarf="⋆";var Star="⋆";var star="☆";var starf="★";var straightepsilon="ϵ";var straightphi="ϕ";var strns="¯";var sub="⊂";var Sub="⋐";var subdot="⪽";var subE="⫅";var sube="⊆";var subedot="⫃";var submult="⫁";var subnE="⫋";var subne="⊊";var subplus="⪿";var subrarr="⥹";var subset="⊂";var Subset="⋐";var subseteq="⊆";var subseteqq="⫅";var SubsetEqual="⊆";var subsetneq="⊊";var subsetneqq="⫋";var subsim="⫇";var subsub="⫕";var subsup="⫓";var succapprox="⪸";var succ="≻";var succcurlyeq="≽";var Succeeds="≻";var SucceedsEqual="⪰";var SucceedsSlantEqual="≽";var SucceedsTilde="≿";var succeq="⪰";var succnapprox="⪺";var succneqq="⪶";var succnsim="⋩";var succsim="≿";var SuchThat="∋";var sum="∑";var Sum="∑";var sung="♪";var sup1$1="¹";var sup2$1="²";var sup3$1="³";var sup="⊃";var Sup="⋑";var supdot="⪾";var supdsub="⫘";var supE="⫆";var supe="⊇";var supedot="⫄";var Superset="⊃";var SupersetEqual="⊇";var suphsol="⟉";var suphsub="⫗";var suplarr="⥻";var supmult="⫂";var supnE="⫌";var supne="⊋";var supplus="⫀";var supset="⊃";var Supset="⋑";var supseteq="⊇";var supseteqq="⫆";var supsetneq="⊋";var supsetneqq="⫌";var supsim="⫈";var supsub="⫔";var supsup="⫖";var swarhk="⤦";var swarr="↙";var swArr="⇙";var swarrow="↙";var swnwar="⤪";var szlig$1="ß";var Tab="\t";var target$1="⌖";var Tau="Τ";var tau="τ";var tbrk="⎴";var Tcaron="Ť";var tcaron="ť";var Tcedil="Ţ";var tcedil="ţ";var Tcy="Т";var tcy="т";var tdot="⃛";var telrec="⌕";var Tfr="𝔗";var tfr="𝔱";var there4="∴";var therefore="∴";var Therefore="∴";var Theta="Θ";var theta="θ";var thetasym="ϑ";var thetav="ϑ";var thickapprox="≈";var thicksim="∼";var ThickSpace="  ";var ThinSpace=" ";var thinsp=" ";var thkap="≈";var thksim="∼";var THORN$1="Þ";var thorn$1="þ";var tilde="˜";var Tilde="∼";var TildeEqual="≃";var TildeFullEqual="≅";var TildeTilde="≈";var timesbar="⨱";var timesb="⊠";var times$1="×";var timesd="⨰";var tint="∭";var toea="⤨";var topbot="⌶";var topcir="⫱";var top="⊤";var Topf="𝕋";var topf="𝕥";var topfork="⫚";var tosa="⤩";var tprime="‴";var trade="™";var TRADE="™";var triangle="▵";var triangledown="▿";var triangleleft="◃";var trianglelefteq="⊴";var triangleq="≜";var triangleright="▹";var trianglerighteq="⊵";var tridot="◬";var trie="≜";var triminus="⨺";var TripleDot="⃛";var triplus="⨹";var trisb="⧍";var tritime="⨻";var trpezium="⏢";var Tscr="𝒯";var tscr="𝓉";var TScy="Ц";var tscy="ц";var TSHcy="Ћ";var tshcy="ћ";var Tstrok="Ŧ";var tstrok="ŧ";var twixt="≬";var twoheadleftarrow="↞";var twoheadrightarrow="↠";var Uacute$1="Ú";var uacute$1="ú";var uarr="↑";var Uarr="↟";var uArr="⇑";var Uarrocir="⥉";var Ubrcy="Ў";var ubrcy="ў";var Ubreve="Ŭ";var ubreve="ŭ";var Ucirc$1="Û";var ucirc$1="û";var Ucy="У";var ucy="у";var udarr="⇅";var Udblac="Ű";var udblac="ű";var udhar="⥮";var ufisht="⥾";var Ufr="𝔘";var ufr="𝔲";var Ugrave$1="Ù";var ugrave$1="ù";var uHar="⥣";var uharl="↿";var uharr="↾";var uhblk="▀";var ulcorn="⌜";var ulcorner="⌜";var ulcrop="⌏";var ultri="◸";var Umacr="Ū";var umacr="ū";var uml$1="¨";var UnderBar="_";var UnderBrace="⏟";var UnderBracket="⎵";var UnderParenthesis="⏝";var Union="⋃";var UnionPlus="⊎";var Uogon="Ų";var uogon="ų";var Uopf="𝕌";var uopf="𝕦";var UpArrowBar="⤒";var uparrow="↑";var UpArrow="↑";var Uparrow="⇑";var UpArrowDownArrow="⇅";var updownarrow="↕";var UpDownArrow="↕";var Updownarrow="⇕";var UpEquilibrium="⥮";var upharpoonleft="↿";var upharpoonright="↾";var uplus="⊎";var UpperLeftArrow="↖";var UpperRightArrow="↗";var upsi="υ";var Upsi="ϒ";var upsih="ϒ";var Upsilon="Υ";var upsilon="υ";var UpTeeArrow="↥";var UpTee="⊥";var upuparrows="⇈";var urcorn="⌝";var urcorner="⌝";var urcrop="⌎";var Uring="Ů";var uring="ů";var urtri="◹";var Uscr="𝒰";var uscr="𝓊";var utdot="⋰";var Utilde="Ũ";var utilde="ũ";var utri="▵";var utrif="▴";var uuarr="⇈";var Uuml$1="Ü";var uuml$1="ü";var uwangle="⦧";var vangrt="⦜";var varepsilon="ϵ";var varkappa="ϰ";var varnothing="∅";var varphi="ϕ";var varpi="ϖ";var varpropto="∝";var varr="↕";var vArr="⇕";var varrho="ϱ";var varsigma="ς";var varsubsetneq="⊊︀";var varsubsetneqq="⫋︀";var varsupsetneq="⊋︀";var varsupsetneqq="⫌︀";var vartheta="ϑ";var vartriangleleft="⊲";var vartriangleright="⊳";var vBar="⫨";var Vbar="⫫";var vBarv="⫩";var Vcy="В";var vcy="в";var vdash="⊢";var vDash="⊨";var Vdash="⊩";var VDash="⊫";var Vdashl="⫦";var veebar="⊻";var vee="∨";var Vee="⋁";var veeeq="≚";var vellip="⋮";var verbar="|";var Verbar="‖";var vert="|";var Vert="‖";var VerticalBar="∣";var VerticalLine="|";var VerticalSeparator="❘";var VerticalTilde="≀";var VeryThinSpace=" ";var Vfr="𝔙";var vfr="𝔳";var vltri="⊲";var vnsub="⊂⃒";var vnsup="⊃⃒";var Vopf="𝕍";var vopf="𝕧";var vprop="∝";var vrtri="⊳";var Vscr="𝒱";var vscr="𝓋";var vsubnE="⫋︀";var vsubne="⊊︀";var vsupnE="⫌︀";var vsupne="⊋︀";var Vvdash="⊪";var vzigzag="⦚";var Wcirc="Ŵ";var wcirc="ŵ";var wedbar="⩟";var wedge="∧";var Wedge="⋀";var wedgeq="≙";var weierp="℘";var Wfr="𝔚";var wfr="𝔴";var Wopf="𝕎";var wopf="𝕨";var wp="℘";var wr="≀";var wreath="≀";var Wscr="𝒲";var wscr="𝓌";var xcap="⋂";var xcirc="◯";var xcup="⋃";var xdtri="▽";var Xfr="𝔛";var xfr="𝔵";var xharr="⟷";var xhArr="⟺";var Xi="Ξ";var xi="ξ";var xlarr="⟵";var xlArr="⟸";var xmap="⟼";var xnis="⋻";var xodot="⨀";var Xopf="𝕏";var xopf="𝕩";var xoplus="⨁";var xotime="⨂";var xrarr="⟶";var xrArr="⟹";var Xscr="𝒳";var xscr="𝓍";var xsqcup="⨆";var xuplus="⨄";var xutri="△";var xvee="⋁";var xwedge="⋀";var Yacute$1="Ý";var yacute$1="ý";var YAcy="Я";var yacy="я";var Ycirc="Ŷ";var ycirc="ŷ";var Ycy="Ы";var ycy="ы";var yen$1="¥";var Yfr="𝔜";var yfr="𝔶";var YIcy="Ї";var yicy="ї";var Yopf="𝕐";var yopf="𝕪";var Yscr="𝒴";var yscr="𝓎";var YUcy="Ю";var yucy="ю";var yuml$1="ÿ";var Yuml="Ÿ";var Zacute="Ź";var zacute="ź";var Zcaron="Ž";var zcaron="ž";var Zcy="З";var zcy="з";var Zdot="Ż";var zdot="ż";var zeetrf="ℨ";var ZeroWidthSpace="​";var Zeta="Ζ";var zeta="ζ";var zfr="𝔷";var Zfr="ℨ";var ZHcy="Ж";var zhcy="ж";var zigrarr="⇝";var zopf="𝕫";var Zopf="ℤ";var Zscr="𝒵";var zscr="𝓏";var zwj="‍";var zwnj="‌";var require$$1$2={Aacute:Aacute$1,aacute:aacute$1,Abreve:Abreve,abreve:abreve,ac:ac,acd:acd,acE:acE,Acirc:Acirc$1,acirc:acirc$1,acute:acute$1,Acy:Acy,acy:acy,AElig:AElig$1,aelig:aelig$1,af:af,Afr:Afr,afr:afr,Agrave:Agrave$1,agrave:agrave$1,alefsym:alefsym,aleph:aleph,Alpha:Alpha,alpha:alpha,Amacr:Amacr,amacr:amacr,amalg:amalg,amp:amp$2,AMP:AMP$1,andand:andand,And:And,and:and,andd:andd,andslope:andslope,andv:andv,ang:ang,ange:ange,angle:angle,angmsdaa:angmsdaa,angmsdab:angmsdab,angmsdac:angmsdac,angmsdad:angmsdad,angmsdae:angmsdae,angmsdaf:angmsdaf,angmsdag:angmsdag,angmsdah:angmsdah,angmsd:angmsd,angrt:angrt,angrtvb:angrtvb,angrtvbd:angrtvbd,angsph:angsph,angst:angst,angzarr:angzarr,Aogon:Aogon,aogon:aogon,Aopf:Aopf,aopf:aopf,apacir:apacir,ap:ap,apE:apE,ape:ape,apid:apid,apos:apos$1,ApplyFunction:ApplyFunction,approx:approx,approxeq:approxeq,Aring:Aring$1,aring:aring$1,Ascr:Ascr,ascr:ascr,Assign:Assign,ast:ast,asymp:asymp,asympeq:asympeq,Atilde:Atilde$1,atilde:atilde$1,Auml:Auml$1,auml:auml$1,awconint:awconint,awint:awint,backcong:backcong,backepsilon:backepsilon,backprime:backprime,backsim:backsim,backsimeq:backsimeq,Backslash:Backslash,Barv:Barv,barvee:barvee,barwed:barwed,Barwed:Barwed,barwedge:barwedge,bbrk:bbrk,bbrktbrk:bbrktbrk,bcong:bcong,Bcy:Bcy,bcy:bcy,bdquo:bdquo,becaus:becaus,because:because,Because:Because,bemptyv:bemptyv,bepsi:bepsi,bernou:bernou,Bernoullis:Bernoullis,Beta:Beta,beta:beta,beth:beth,between:between,Bfr:Bfr,bfr:bfr,bigcap:bigcap,bigcirc:bigcirc,bigcup:bigcup,bigodot:bigodot,bigoplus:bigoplus,bigotimes:bigotimes,bigsqcup:bigsqcup,bigstar:bigstar,bigtriangledown:bigtriangledown,bigtriangleup:bigtriangleup,biguplus:biguplus,bigvee:bigvee,bigwedge:bigwedge,bkarow:bkarow,blacklozenge:blacklozenge,blacksquare:blacksquare,blacktriangle:blacktriangle,blacktriangledown:blacktriangledown,blacktriangleleft:blacktriangleleft,blacktriangleright:blacktriangleright,blank:blank,blk12:blk12,blk14:blk14,blk34:blk34,block:block,bne:bne,bnequiv:bnequiv,bNot:bNot,bnot:bnot,Bopf:Bopf,bopf:bopf,bot:bot,bottom:bottom,bowtie:bowtie,boxbox:boxbox,boxdl:boxdl,boxdL:boxdL,boxDl:boxDl,boxDL:boxDL,boxdr:boxdr,boxdR:boxdR,boxDr:boxDr,boxDR:boxDR,boxh:boxh,boxH:boxH,boxhd:boxhd,boxHd:boxHd,boxhD:boxhD,boxHD:boxHD,boxhu:boxhu,boxHu:boxHu,boxhU:boxhU,boxHU:boxHU,boxminus:boxminus,boxplus:boxplus,boxtimes:boxtimes,boxul:boxul,boxuL:boxuL,boxUl:boxUl,boxUL:boxUL,boxur:boxur,boxuR:boxuR,boxUr:boxUr,boxUR:boxUR,boxv:boxv,boxV:boxV,boxvh:boxvh,boxvH:boxvH,boxVh:boxVh,boxVH:boxVH,boxvl:boxvl,boxvL:boxvL,boxVl:boxVl,boxVL:boxVL,boxvr:boxvr,boxvR:boxvR,boxVr:boxVr,boxVR:boxVR,bprime:bprime,breve:breve,Breve:Breve,brvbar:brvbar$1,bscr:bscr,Bscr:Bscr,bsemi:bsemi,bsim:bsim,bsime:bsime,bsolb:bsolb,bsol:bsol,bsolhsub:bsolhsub,bull:bull,bullet:bullet,bump:bump,bumpE:bumpE,bumpe:bumpe,Bumpeq:Bumpeq,bumpeq:bumpeq,Cacute:Cacute,cacute:cacute,capand:capand,capbrcup:capbrcup,capcap:capcap,cap:cap,Cap:Cap,capcup:capcup,capdot:capdot,CapitalDifferentialD:CapitalDifferentialD,caps:caps,caret:caret,caron:caron,Cayleys:Cayleys,ccaps:ccaps,Ccaron:Ccaron,ccaron:ccaron,Ccedil:Ccedil$1,ccedil:ccedil$1,Ccirc:Ccirc,ccirc:ccirc,Cconint:Cconint,ccups:ccups,ccupssm:ccupssm,Cdot:Cdot,cdot:cdot,cedil:cedil$1,Cedilla:Cedilla,cemptyv:cemptyv,cent:cent$1,centerdot:centerdot,CenterDot:CenterDot,cfr:cfr,Cfr:Cfr,CHcy:CHcy,chcy:chcy,check:check,checkmark:checkmark,Chi:Chi,chi:chi,circ:circ,circeq:circeq,circlearrowleft:circlearrowleft,circlearrowright:circlearrowright,circledast:circledast,circledcirc:circledcirc,circleddash:circleddash,CircleDot:CircleDot,circledR:circledR,circledS:circledS,CircleMinus:CircleMinus,CirclePlus:CirclePlus,CircleTimes:CircleTimes,cir:cir,cirE:cirE,cire:cire,cirfnint:cirfnint,cirmid:cirmid,cirscir:cirscir,ClockwiseContourIntegral:ClockwiseContourIntegral,CloseCurlyDoubleQuote:CloseCurlyDoubleQuote,CloseCurlyQuote:CloseCurlyQuote,clubs:clubs,clubsuit:clubsuit,colon:colon,Colon:Colon,Colone:Colone,colone:colone,coloneq:coloneq,comma:comma,commat:commat,comp:comp,compfn:compfn,complement:complement,complexes:complexes,cong:cong,congdot:congdot,Congruent:Congruent,conint:conint,Conint:Conint,ContourIntegral:ContourIntegral,copf:copf,Copf:Copf,coprod:coprod,Coproduct:Coproduct,copy:copy$1,COPY:COPY$1,copysr:copysr,CounterClockwiseContourIntegral:CounterClockwiseContourIntegral,crarr:crarr,cross:cross,Cross:Cross,Cscr:Cscr,cscr:cscr,csub:csub,csube:csube,csup:csup,csupe:csupe,ctdot:ctdot,cudarrl:cudarrl,cudarrr:cudarrr,cuepr:cuepr,cuesc:cuesc,cularr:cularr,cularrp:cularrp,cupbrcap:cupbrcap,cupcap:cupcap,CupCap:CupCap,cup:cup,Cup:Cup,cupcup:cupcup,cupdot:cupdot,cupor:cupor,cups:cups,curarr:curarr,curarrm:curarrm,curlyeqprec:curlyeqprec,curlyeqsucc:curlyeqsucc,curlyvee:curlyvee,curlywedge:curlywedge,curren:curren$1,curvearrowleft:curvearrowleft,curvearrowright:curvearrowright,cuvee:cuvee,cuwed:cuwed,cwconint:cwconint,cwint:cwint,cylcty:cylcty,dagger:dagger,Dagger:Dagger,daleth:daleth,darr:darr,Darr:Darr,dArr:dArr,dash:dash,Dashv:Dashv,dashv:dashv,dbkarow:dbkarow,dblac:dblac,Dcaron:Dcaron,dcaron:dcaron,Dcy:Dcy,dcy:dcy,ddagger:ddagger,ddarr:ddarr,DD:DD,dd:dd,DDotrahd:DDotrahd,ddotseq:ddotseq,deg:deg$1,Del:Del,Delta:Delta,delta:delta,demptyv:demptyv,dfisht:dfisht,Dfr:Dfr,dfr:dfr,dHar:dHar,dharl:dharl,dharr:dharr,DiacriticalAcute:DiacriticalAcute,DiacriticalDot:DiacriticalDot,DiacriticalDoubleAcute:DiacriticalDoubleAcute,DiacriticalGrave:DiacriticalGrave,DiacriticalTilde:DiacriticalTilde,diam:diam,diamond:diamond,Diamond:Diamond,diamondsuit:diamondsuit,diams:diams,die:die,DifferentialD:DifferentialD,digamma:digamma,disin:disin,div:div,divide:divide$1,divideontimes:divideontimes,divonx:divonx,DJcy:DJcy,djcy:djcy,dlcorn:dlcorn,dlcrop:dlcrop,dollar:dollar,Dopf:Dopf,dopf:dopf,Dot:Dot,dot:dot,DotDot:DotDot,doteq:doteq,doteqdot:doteqdot,DotEqual:DotEqual,dotminus:dotminus,dotplus:dotplus,dotsquare:dotsquare,doublebarwedge:doublebarwedge,DoubleContourIntegral:DoubleContourIntegral,DoubleDot:DoubleDot,DoubleDownArrow:DoubleDownArrow,DoubleLeftArrow:DoubleLeftArrow,DoubleLeftRightArrow:DoubleLeftRightArrow,DoubleLeftTee:DoubleLeftTee,DoubleLongLeftArrow:DoubleLongLeftArrow,DoubleLongLeftRightArrow:DoubleLongLeftRightArrow,DoubleLongRightArrow:DoubleLongRightArrow,DoubleRightArrow:DoubleRightArrow,DoubleRightTee:DoubleRightTee,DoubleUpArrow:DoubleUpArrow,DoubleUpDownArrow:DoubleUpDownArrow,DoubleVerticalBar:DoubleVerticalBar,DownArrowBar:DownArrowBar,downarrow:downarrow,DownArrow:DownArrow,Downarrow:Downarrow,DownArrowUpArrow:DownArrowUpArrow,DownBreve:DownBreve,downdownarrows:downdownarrows,downharpoonleft:downharpoonleft,downharpoonright:downharpoonright,DownLeftRightVector:DownLeftRightVector,DownLeftTeeVector:DownLeftTeeVector,DownLeftVectorBar:DownLeftVectorBar,DownLeftVector:DownLeftVector,DownRightTeeVector:DownRightTeeVector,DownRightVectorBar:DownRightVectorBar,DownRightVector:DownRightVector,DownTeeArrow:DownTeeArrow,DownTee:DownTee,drbkarow:drbkarow,drcorn:drcorn,drcrop:drcrop,Dscr:Dscr,dscr:dscr,DScy:DScy,dscy:dscy,dsol:dsol,Dstrok:Dstrok,dstrok:dstrok,dtdot:dtdot,dtri:dtri,dtrif:dtrif,duarr:duarr,duhar:duhar,dwangle:dwangle,DZcy:DZcy,dzcy:dzcy,dzigrarr:dzigrarr,Eacute:Eacute$1,eacute:eacute$1,easter:easter,Ecaron:Ecaron,ecaron:ecaron,Ecirc:Ecirc$1,ecirc:ecirc$1,ecir:ecir,ecolon:ecolon,Ecy:Ecy,ecy:ecy,eDDot:eDDot,Edot:Edot,edot:edot,eDot:eDot,ee:ee,efDot:efDot,Efr:Efr,efr:efr,eg:eg,Egrave:Egrave$1,egrave:egrave$1,egs:egs,egsdot:egsdot,el:el,Element:Element$1,elinters:elinters,ell:ell,els:els,elsdot:elsdot,Emacr:Emacr,emacr:emacr,empty:empty,emptyset:emptyset,EmptySmallSquare:EmptySmallSquare,emptyv:emptyv,EmptyVerySmallSquare:EmptyVerySmallSquare,emsp13:emsp13,emsp14:emsp14,emsp:emsp,ENG:ENG,eng:eng,ensp:ensp,Eogon:Eogon,eogon:eogon,Eopf:Eopf,eopf:eopf,epar:epar,eparsl:eparsl,eplus:eplus,epsi:epsi,Epsilon:Epsilon,epsilon:epsilon,epsiv:epsiv,eqcirc:eqcirc,eqcolon:eqcolon,eqsim:eqsim,eqslantgtr:eqslantgtr,eqslantless:eqslantless,Equal:Equal,equals:equals,EqualTilde:EqualTilde,equest:equest,Equilibrium:Equilibrium,equiv:equiv,equivDD:equivDD,eqvparsl:eqvparsl,erarr:erarr,erDot:erDot,escr:escr,Escr:Escr,esdot:esdot,Esim:Esim,esim:esim,Eta:Eta,eta:eta,ETH:ETH$1,eth:eth$1,Euml:Euml$1,euml:euml$1,euro:euro,excl:excl,exist:exist,Exists:Exists,expectation:expectation,exponentiale:exponentiale,ExponentialE:ExponentialE,fallingdotseq:fallingdotseq,Fcy:Fcy,fcy:fcy,female:female,ffilig:ffilig,fflig:fflig,ffllig:ffllig,Ffr:Ffr,ffr:ffr,filig:filig,FilledSmallSquare:FilledSmallSquare,FilledVerySmallSquare:FilledVerySmallSquare,fjlig:fjlig,flat:flat,fllig:fllig,fltns:fltns,fnof:fnof,Fopf:Fopf,fopf:fopf,forall:forall,ForAll:ForAll,fork:fork,forkv:forkv,Fouriertrf:Fouriertrf,fpartint:fpartint,frac12:frac12$1,frac13:frac13,frac14:frac14$1,frac15:frac15,frac16:frac16,frac18:frac18,frac23:frac23,frac25:frac25,frac34:frac34$1,frac35:frac35,frac38:frac38,frac45:frac45,frac56:frac56,frac58:frac58,frac78:frac78,frasl:frasl,frown:frown,fscr:fscr,Fscr:Fscr,gacute:gacute,Gamma:Gamma,gamma:gamma,Gammad:Gammad,gammad:gammad,gap:gap,Gbreve:Gbreve,gbreve:gbreve,Gcedil:Gcedil,Gcirc:Gcirc,gcirc:gcirc,Gcy:Gcy,gcy:gcy,Gdot:Gdot,gdot:gdot,ge:ge,gE:gE,gEl:gEl,gel:gel,geq:geq,geqq:geqq,geqslant:geqslant,gescc:gescc,ges:ges,gesdot:gesdot,gesdoto:gesdoto,gesdotol:gesdotol,gesl:gesl,gesles:gesles,Gfr:Gfr,gfr:gfr,gg:gg,Gg:Gg,ggg:ggg,gimel:gimel,GJcy:GJcy,gjcy:gjcy,gla:gla,gl:gl,glE:glE,glj:glj,gnap:gnap,gnapprox:gnapprox,gne:gne,gnE:gnE,gneq:gneq,gneqq:gneqq,gnsim:gnsim,Gopf:Gopf,gopf:gopf,grave:grave,GreaterEqual:GreaterEqual,GreaterEqualLess:GreaterEqualLess,GreaterFullEqual:GreaterFullEqual,GreaterGreater:GreaterGreater,GreaterLess:GreaterLess,GreaterSlantEqual:GreaterSlantEqual,GreaterTilde:GreaterTilde,Gscr:Gscr,gscr:gscr,gsim:gsim,gsime:gsime,gsiml:gsiml,gtcc:gtcc,gtcir:gtcir,gt:gt$2,GT:GT$1,Gt:Gt,gtdot:gtdot,gtlPar:gtlPar,gtquest:gtquest,gtrapprox:gtrapprox,gtrarr:gtrarr,gtrdot:gtrdot,gtreqless:gtreqless,gtreqqless:gtreqqless,gtrless:gtrless,gtrsim:gtrsim,gvertneqq:gvertneqq,gvnE:gvnE,Hacek:Hacek,hairsp:hairsp,half:half,hamilt:hamilt,HARDcy:HARDcy,hardcy:hardcy,harrcir:harrcir,harr:harr,hArr:hArr,harrw:harrw,Hat:Hat,hbar:hbar,Hcirc:Hcirc,hcirc:hcirc,hearts:hearts,heartsuit:heartsuit,hellip:hellip,hercon:hercon,hfr:hfr,Hfr:Hfr,HilbertSpace:HilbertSpace,hksearow:hksearow,hkswarow:hkswarow,hoarr:hoarr,homtht:homtht,hookleftarrow:hookleftarrow,hookrightarrow:hookrightarrow,hopf:hopf,Hopf:Hopf,horbar:horbar,HorizontalLine:HorizontalLine,hscr:hscr,Hscr:Hscr,hslash:hslash,Hstrok:Hstrok,hstrok:hstrok,HumpDownHump:HumpDownHump,HumpEqual:HumpEqual,hybull:hybull,hyphen:hyphen,Iacute:Iacute$1,iacute:iacute$1,ic:ic,Icirc:Icirc$1,icirc:icirc$1,Icy:Icy,icy:icy,Idot:Idot,IEcy:IEcy,iecy:iecy,iexcl:iexcl$1,iff:iff,ifr:ifr,Ifr:Ifr,Igrave:Igrave$1,igrave:igrave$1,ii:ii,iiiint:iiiint,iiint:iiint,iinfin:iinfin,iiota:iiota,IJlig:IJlig,ijlig:ijlig,Imacr:Imacr,imacr:imacr,image:image,ImaginaryI:ImaginaryI,imagline:imagline,imagpart:imagpart,imath:imath,Im:Im,imof:imof,imped:imped,Implies:Implies,incare:incare,"in":"∈",infin:infin,infintie:infintie,inodot:inodot,intcal:intcal,int:int,Int:Int,integers:integers,Integral:Integral,intercal:intercal,Intersection:Intersection,intlarhk:intlarhk,intprod:intprod,InvisibleComma:InvisibleComma,InvisibleTimes:InvisibleTimes,IOcy:IOcy,iocy:iocy,Iogon:Iogon,iogon:iogon,Iopf:Iopf,iopf:iopf,Iota:Iota,iota:iota,iprod:iprod,iquest:iquest$1,iscr:iscr,Iscr:Iscr,isin:isin,isindot:isindot,isinE:isinE,isins:isins,isinsv:isinsv,isinv:isinv,it:it,Itilde:Itilde,itilde:itilde,Iukcy:Iukcy,iukcy:iukcy,Iuml:Iuml$1,iuml:iuml$1,Jcirc:Jcirc,jcirc:jcirc,Jcy:Jcy,jcy:jcy,Jfr:Jfr,jfr:jfr,jmath:jmath,Jopf:Jopf,jopf:jopf,Jscr:Jscr,jscr:jscr,Jsercy:Jsercy,jsercy:jsercy,Jukcy:Jukcy,jukcy:jukcy,Kappa:Kappa,kappa:kappa,kappav:kappav,Kcedil:Kcedil,kcedil:kcedil,Kcy:Kcy,kcy:kcy,Kfr:Kfr,kfr:kfr,kgreen:kgreen,KHcy:KHcy,khcy:khcy,KJcy:KJcy,kjcy:kjcy,Kopf:Kopf,kopf:kopf,Kscr:Kscr,kscr:kscr,lAarr:lAarr,Lacute:Lacute,lacute:lacute,laemptyv:laemptyv,lagran:lagran,Lambda:Lambda,lambda:lambda,lang:lang,Lang:Lang,langd:langd,langle:langle,lap:lap,Laplacetrf:Laplacetrf,laquo:laquo$1,larrb:larrb,larrbfs:larrbfs,larr:larr,Larr:Larr,lArr:lArr,larrfs:larrfs,larrhk:larrhk,larrlp:larrlp,larrpl:larrpl,larrsim:larrsim,larrtl:larrtl,latail:latail,lAtail:lAtail,lat:lat,late:late,lates:lates,lbarr:lbarr,lBarr:lBarr,lbbrk:lbbrk,lbrace:lbrace,lbrack:lbrack,lbrke:lbrke,lbrksld:lbrksld,lbrkslu:lbrkslu,Lcaron:Lcaron,lcaron:lcaron,Lcedil:Lcedil,lcedil:lcedil,lceil:lceil,lcub:lcub,Lcy:Lcy,lcy:lcy,ldca:ldca,ldquo:ldquo,ldquor:ldquor,ldrdhar:ldrdhar,ldrushar:ldrushar,ldsh:ldsh,le:le,lE:lE,LeftAngleBracket:LeftAngleBracket,LeftArrowBar:LeftArrowBar,leftarrow:leftarrow,LeftArrow:LeftArrow,Leftarrow:Leftarrow,LeftArrowRightArrow:LeftArrowRightArrow,leftarrowtail:leftarrowtail,LeftCeiling:LeftCeiling,LeftDoubleBracket:LeftDoubleBracket,LeftDownTeeVector:LeftDownTeeVector,LeftDownVectorBar:LeftDownVectorBar,LeftDownVector:LeftDownVector,LeftFloor:LeftFloor,leftharpoondown:leftharpoondown,leftharpoonup:leftharpoonup,leftleftarrows:leftleftarrows,leftrightarrow:leftrightarrow,LeftRightArrow:LeftRightArrow,Leftrightarrow:Leftrightarrow,leftrightarrows:leftrightarrows,leftrightharpoons:leftrightharpoons,leftrightsquigarrow:leftrightsquigarrow,LeftRightVector:LeftRightVector,LeftTeeArrow:LeftTeeArrow,LeftTee:LeftTee,LeftTeeVector:LeftTeeVector,leftthreetimes:leftthreetimes,LeftTriangleBar:LeftTriangleBar,LeftTriangle:LeftTriangle,LeftTriangleEqual:LeftTriangleEqual,LeftUpDownVector:LeftUpDownVector,LeftUpTeeVector:LeftUpTeeVector,LeftUpVectorBar:LeftUpVectorBar,LeftUpVector:LeftUpVector,LeftVectorBar:LeftVectorBar,LeftVector:LeftVector,lEg:lEg,leg:leg,leq:leq,leqq:leqq,leqslant:leqslant,lescc:lescc,les:les,lesdot:lesdot,lesdoto:lesdoto,lesdotor:lesdotor,lesg:lesg,lesges:lesges,lessapprox:lessapprox,lessdot:lessdot,lesseqgtr:lesseqgtr,lesseqqgtr:lesseqqgtr,LessEqualGreater:LessEqualGreater,LessFullEqual:LessFullEqual,LessGreater:LessGreater,lessgtr:lessgtr,LessLess:LessLess,lesssim:lesssim,LessSlantEqual:LessSlantEqual,LessTilde:LessTilde,lfisht:lfisht,lfloor:lfloor,Lfr:Lfr,lfr:lfr,lg:lg,lgE:lgE,lHar:lHar,lhard:lhard,lharu:lharu,lharul:lharul,lhblk:lhblk,LJcy:LJcy,ljcy:ljcy,llarr:llarr,ll:ll,Ll:Ll,llcorner:llcorner,Lleftarrow:Lleftarrow,llhard:llhard,lltri:lltri,Lmidot:Lmidot,lmidot:lmidot,lmoustache:lmoustache,lmoust:lmoust,lnap:lnap,lnapprox:lnapprox,lne:lne,lnE:lnE,lneq:lneq,lneqq:lneqq,lnsim:lnsim,loang:loang,loarr:loarr,lobrk:lobrk,longleftarrow:longleftarrow,LongLeftArrow:LongLeftArrow,Longleftarrow:Longleftarrow,longleftrightarrow:longleftrightarrow,LongLeftRightArrow:LongLeftRightArrow,Longleftrightarrow:Longleftrightarrow,longmapsto:longmapsto,longrightarrow:longrightarrow,LongRightArrow:LongRightArrow,Longrightarrow:Longrightarrow,looparrowleft:looparrowleft,looparrowright:looparrowright,lopar:lopar,Lopf:Lopf,lopf:lopf,loplus:loplus,lotimes:lotimes,lowast:lowast,lowbar:lowbar,LowerLeftArrow:LowerLeftArrow,LowerRightArrow:LowerRightArrow,loz:loz,lozenge:lozenge,lozf:lozf,lpar:lpar,lparlt:lparlt,lrarr:lrarr,lrcorner:lrcorner,lrhar:lrhar,lrhard:lrhard,lrm:lrm,lrtri:lrtri,lsaquo:lsaquo,lscr:lscr,Lscr:Lscr,lsh:lsh,Lsh:Lsh,lsim:lsim,lsime:lsime,lsimg:lsimg,lsqb:lsqb,lsquo:lsquo,lsquor:lsquor,Lstrok:Lstrok,lstrok:lstrok,ltcc:ltcc,ltcir:ltcir,lt:lt$2,LT:LT$1,Lt:Lt,ltdot:ltdot,lthree:lthree,ltimes:ltimes,ltlarr:ltlarr,ltquest:ltquest,ltri:ltri,ltrie:ltrie,ltrif:ltrif,ltrPar:ltrPar,lurdshar:lurdshar,luruhar:luruhar,lvertneqq:lvertneqq,lvnE:lvnE,macr:macr$1,male:male,malt:malt,maltese:maltese,"Map":"⤅",map:map$1,mapsto:mapsto,mapstodown:mapstodown,mapstoleft:mapstoleft,mapstoup:mapstoup,marker:marker,mcomma:mcomma,Mcy:Mcy,mcy:mcy,mdash:mdash,mDDot:mDDot,measuredangle:measuredangle,MediumSpace:MediumSpace,Mellintrf:Mellintrf,Mfr:Mfr,mfr:mfr,mho:mho,micro:micro$1,midast:midast,midcir:midcir,mid:mid,middot:middot$1,minusb:minusb,minus:minus,minusd:minusd,minusdu:minusdu,MinusPlus:MinusPlus,mlcp:mlcp,mldr:mldr,mnplus:mnplus,models:models,Mopf:Mopf,mopf:mopf,mp:mp,mscr:mscr,Mscr:Mscr,mstpos:mstpos,Mu:Mu,mu:mu,multimap:multimap,mumap:mumap,nabla:nabla,Nacute:Nacute,nacute:nacute,nang:nang,nap:nap,napE:napE,napid:napid,napos:napos,napprox:napprox,natural:natural,naturals:naturals,natur:natur,nbsp:nbsp$1,nbump:nbump,nbumpe:nbumpe,ncap:ncap,Ncaron:Ncaron,ncaron:ncaron,Ncedil:Ncedil,ncedil:ncedil,ncong:ncong,ncongdot:ncongdot,ncup:ncup,Ncy:Ncy,ncy:ncy,ndash:ndash,nearhk:nearhk,nearr:nearr,neArr:neArr,nearrow:nearrow,ne:ne,nedot:nedot,NegativeMediumSpace:NegativeMediumSpace,NegativeThickSpace:NegativeThickSpace,NegativeThinSpace:NegativeThinSpace,NegativeVeryThinSpace:NegativeVeryThinSpace,nequiv:nequiv,nesear:nesear,nesim:nesim,NestedGreaterGreater:NestedGreaterGreater,NestedLessLess:NestedLessLess,NewLine:NewLine,nexist:nexist,nexists:nexists,Nfr:Nfr,nfr:nfr,ngE:ngE,nge:nge,ngeq:ngeq,ngeqq:ngeqq,ngeqslant:ngeqslant,nges:nges,nGg:nGg,ngsim:ngsim,nGt:nGt,ngt:ngt,ngtr:ngtr,nGtv:nGtv,nharr:nharr,nhArr:nhArr,nhpar:nhpar,ni:ni,nis:nis,nisd:nisd,niv:niv,NJcy:NJcy,njcy:njcy,nlarr:nlarr,nlArr:nlArr,nldr:nldr,nlE:nlE,nle:nle,nleftarrow:nleftarrow,nLeftarrow:nLeftarrow,nleftrightarrow:nleftrightarrow,nLeftrightarrow:nLeftrightarrow,nleq:nleq,nleqq:nleqq,nleqslant:nleqslant,nles:nles,nless:nless,nLl:nLl,nlsim:nlsim,nLt:nLt,nlt:nlt,nltri:nltri,nltrie:nltrie,nLtv:nLtv,nmid:nmid,NoBreak:NoBreak,NonBreakingSpace:NonBreakingSpace,nopf:nopf,Nopf:Nopf,Not:Not,not:not$1,NotCongruent:NotCongruent,NotCupCap:NotCupCap,NotDoubleVerticalBar:NotDoubleVerticalBar,NotElement:NotElement,NotEqual:NotEqual,NotEqualTilde:NotEqualTilde,NotExists:NotExists,NotGreater:NotGreater,NotGreaterEqual:NotGreaterEqual,NotGreaterFullEqual:NotGreaterFullEqual,NotGreaterGreater:NotGreaterGreater,NotGreaterLess:NotGreaterLess,NotGreaterSlantEqual:NotGreaterSlantEqual,NotGreaterTilde:NotGreaterTilde,NotHumpDownHump:NotHumpDownHump,NotHumpEqual:NotHumpEqual,notin:notin,notindot:notindot,notinE:notinE,notinva:notinva,notinvb:notinvb,notinvc:notinvc,NotLeftTriangleBar:NotLeftTriangleBar,NotLeftTriangle:NotLeftTriangle,NotLeftTriangleEqual:NotLeftTriangleEqual,NotLess:NotLess,NotLessEqual:NotLessEqual,NotLessGreater:NotLessGreater,NotLessLess:NotLessLess,NotLessSlantEqual:NotLessSlantEqual,NotLessTilde:NotLessTilde,NotNestedGreaterGreater:NotNestedGreaterGreater,NotNestedLessLess:NotNestedLessLess,notni:notni,notniva:notniva,notnivb:notnivb,notnivc:notnivc,NotPrecedes:NotPrecedes,NotPrecedesEqual:NotPrecedesEqual,NotPrecedesSlantEqual:NotPrecedesSlantEqual,NotReverseElement:NotReverseElement,NotRightTriangleBar:NotRightTriangleBar,NotRightTriangle:NotRightTriangle,NotRightTriangleEqual:NotRightTriangleEqual,NotSquareSubset:NotSquareSubset,NotSquareSubsetEqual:NotSquareSubsetEqual,NotSquareSuperset:NotSquareSuperset,NotSquareSupersetEqual:NotSquareSupersetEqual,NotSubset:NotSubset,NotSubsetEqual:NotSubsetEqual,NotSucceeds:NotSucceeds,NotSucceedsEqual:NotSucceedsEqual,NotSucceedsSlantEqual:NotSucceedsSlantEqual,NotSucceedsTilde:NotSucceedsTilde,NotSuperset:NotSuperset,NotSupersetEqual:NotSupersetEqual,NotTilde:NotTilde,NotTildeEqual:NotTildeEqual,NotTildeFullEqual:NotTildeFullEqual,NotTildeTilde:NotTildeTilde,NotVerticalBar:NotVerticalBar,nparallel:nparallel,npar:npar,nparsl:nparsl,npart:npart,npolint:npolint,npr:npr,nprcue:nprcue,nprec:nprec,npreceq:npreceq,npre:npre,nrarrc:nrarrc,nrarr:nrarr,nrArr:nrArr,nrarrw:nrarrw,nrightarrow:nrightarrow,nRightarrow:nRightarrow,nrtri:nrtri,nrtrie:nrtrie,nsc:nsc,nsccue:nsccue,nsce:nsce,Nscr:Nscr,nscr:nscr,nshortmid:nshortmid,nshortparallel:nshortparallel,nsim:nsim,nsime:nsime,nsimeq:nsimeq,nsmid:nsmid,nspar:nspar,nsqsube:nsqsube,nsqsupe:nsqsupe,nsub:nsub,nsubE:nsubE,nsube:nsube,nsubset:nsubset,nsubseteq:nsubseteq,nsubseteqq:nsubseteqq,nsucc:nsucc,nsucceq:nsucceq,nsup:nsup,nsupE:nsupE,nsupe:nsupe,nsupset:nsupset,nsupseteq:nsupseteq,nsupseteqq:nsupseteqq,ntgl:ntgl,Ntilde:Ntilde$1,ntilde:ntilde$1,ntlg:ntlg,ntriangleleft:ntriangleleft,ntrianglelefteq:ntrianglelefteq,ntriangleright:ntriangleright,ntrianglerighteq:ntrianglerighteq,Nu:Nu,nu:nu,num:num,numero:numero,numsp:numsp,nvap:nvap,nvdash:nvdash,nvDash:nvDash,nVdash:nVdash,nVDash:nVDash,nvge:nvge,nvgt:nvgt,nvHarr:nvHarr,nvinfin:nvinfin,nvlArr:nvlArr,nvle:nvle,nvlt:nvlt,nvltrie:nvltrie,nvrArr:nvrArr,nvrtrie:nvrtrie,nvsim:nvsim,nwarhk:nwarhk,nwarr:nwarr,nwArr:nwArr,nwarrow:nwarrow,nwnear:nwnear,Oacute:Oacute$1,oacute:oacute$1,oast:oast,Ocirc:Ocirc$1,ocirc:ocirc$1,ocir:ocir,Ocy:Ocy,ocy:ocy,odash:odash,Odblac:Odblac,odblac:odblac,odiv:odiv,odot:odot,odsold:odsold,OElig:OElig,oelig:oelig,ofcir:ofcir,Ofr:Ofr,ofr:ofr,ogon:ogon,Ograve:Ograve$1,ograve:ograve$1,ogt:ogt,ohbar:ohbar,ohm:ohm,oint:oint,olarr:olarr,olcir:olcir,olcross:olcross,oline:oline,olt:olt,Omacr:Omacr,omacr:omacr,Omega:Omega,omega:omega,Omicron:Omicron,omicron:omicron,omid:omid,ominus:ominus,Oopf:Oopf,oopf:oopf,opar:opar,OpenCurlyDoubleQuote:OpenCurlyDoubleQuote,OpenCurlyQuote:OpenCurlyQuote,operp:operp,oplus:oplus,orarr:orarr,Or:Or,or:or,ord:ord,order:order,orderof:orderof,ordf:ordf$1,ordm:ordm$1,origof:origof,oror:oror,orslope:orslope,orv:orv,oS:oS,Oscr:Oscr,oscr:oscr,Oslash:Oslash$1,oslash:oslash$1,osol:osol,Otilde:Otilde$1,otilde:otilde$1,otimesas:otimesas,Otimes:Otimes,otimes:otimes,Ouml:Ouml$1,ouml:ouml$1,ovbar:ovbar,OverBar:OverBar,OverBrace:OverBrace,OverBracket:OverBracket,OverParenthesis:OverParenthesis,para:para$1,parallel:parallel,par:par,parsim:parsim,parsl:parsl,part:part,PartialD:PartialD,Pcy:Pcy,pcy:pcy,percnt:percnt,period:period,permil:permil,perp:perp,pertenk:pertenk,Pfr:Pfr,pfr:pfr,Phi:Phi,phi:phi,phiv:phiv,phmmat:phmmat,phone:phone,Pi:Pi,pi:pi,pitchfork:pitchfork,piv:piv,planck:planck,planckh:planckh,plankv:plankv,plusacir:plusacir,plusb:plusb,pluscir:pluscir,plus:plus,plusdo:plusdo,plusdu:plusdu,pluse:pluse,PlusMinus:PlusMinus,plusmn:plusmn$1,plussim:plussim,plustwo:plustwo,pm:pm,Poincareplane:Poincareplane,pointint:pointint,popf:popf,Popf:Popf,pound:pound$1,prap:prap,Pr:Pr,pr:pr,prcue:prcue,precapprox:precapprox,prec:prec,preccurlyeq:preccurlyeq,Precedes:Precedes,PrecedesEqual:PrecedesEqual,PrecedesSlantEqual:PrecedesSlantEqual,PrecedesTilde:PrecedesTilde,preceq:preceq,precnapprox:precnapprox,precneqq:precneqq,precnsim:precnsim,pre:pre,prE:prE,precsim:precsim,prime:prime,Prime:Prime,primes:primes,prnap:prnap,prnE:prnE,prnsim:prnsim,prod:prod,Product:Product,profalar:profalar,profline:profline,profsurf:profsurf,prop:prop,Proportional:Proportional,Proportion:Proportion,propto:propto,prsim:prsim,prurel:prurel,Pscr:Pscr,pscr:pscr,Psi:Psi,psi:psi,puncsp:puncsp,Qfr:Qfr,qfr:qfr,qint:qint,qopf:qopf,Qopf:Qopf,qprime:qprime,Qscr:Qscr,qscr:qscr,quaternions:quaternions,quatint:quatint,quest:quest,questeq:questeq,quot:quot$2,QUOT:QUOT$1,rAarr:rAarr,race:race,Racute:Racute,racute:racute,radic:radic,raemptyv:raemptyv,rang:rang,Rang:Rang,rangd:rangd,range:range,rangle:rangle,raquo:raquo$1,rarrap:rarrap,rarrb:rarrb,rarrbfs:rarrbfs,rarrc:rarrc,rarr:rarr,Rarr:Rarr,rArr:rArr,rarrfs:rarrfs,rarrhk:rarrhk,rarrlp:rarrlp,rarrpl:rarrpl,rarrsim:rarrsim,Rarrtl:Rarrtl,rarrtl:rarrtl,rarrw:rarrw,ratail:ratail,rAtail:rAtail,ratio:ratio,rationals:rationals,rbarr:rbarr,rBarr:rBarr,RBarr:RBarr,rbbrk:rbbrk,rbrace:rbrace,rbrack:rbrack,rbrke:rbrke,rbrksld:rbrksld,rbrkslu:rbrkslu,Rcaron:Rcaron,rcaron:rcaron,Rcedil:Rcedil,rcedil:rcedil,rceil:rceil,rcub:rcub,Rcy:Rcy,rcy:rcy,rdca:rdca,rdldhar:rdldhar,rdquo:rdquo,rdquor:rdquor,rdsh:rdsh,real:real,realine:realine,realpart:realpart,reals:reals,Re:Re,rect:rect,reg:reg$1,REG:REG$1,ReverseElement:ReverseElement,ReverseEquilibrium:ReverseEquilibrium,ReverseUpEquilibrium:ReverseUpEquilibrium,rfisht:rfisht,rfloor:rfloor,rfr:rfr,Rfr:Rfr,rHar:rHar,rhard:rhard,rharu:rharu,rharul:rharul,Rho:Rho,rho:rho,rhov:rhov,RightAngleBracket:RightAngleBracket,RightArrowBar:RightArrowBar,rightarrow:rightarrow,RightArrow:RightArrow,Rightarrow:Rightarrow,RightArrowLeftArrow:RightArrowLeftArrow,rightarrowtail:rightarrowtail,RightCeiling:RightCeiling,RightDoubleBracket:RightDoubleBracket,RightDownTeeVector:RightDownTeeVector,RightDownVectorBar:RightDownVectorBar,RightDownVector:RightDownVector,RightFloor:RightFloor,rightharpoondown:rightharpoondown,rightharpoonup:rightharpoonup,rightleftarrows:rightleftarrows,rightleftharpoons:rightleftharpoons,rightrightarrows:rightrightarrows,rightsquigarrow:rightsquigarrow,RightTeeArrow:RightTeeArrow,RightTee:RightTee,RightTeeVector:RightTeeVector,rightthreetimes:rightthreetimes,RightTriangleBar:RightTriangleBar,RightTriangle:RightTriangle,RightTriangleEqual:RightTriangleEqual,RightUpDownVector:RightUpDownVector,RightUpTeeVector:RightUpTeeVector,RightUpVectorBar:RightUpVectorBar,RightUpVector:RightUpVector,RightVectorBar:RightVectorBar,RightVector:RightVector,ring:ring,risingdotseq:risingdotseq,rlarr:rlarr,rlhar:rlhar,rlm:rlm,rmoustache:rmoustache,rmoust:rmoust,rnmid:rnmid,roang:roang,roarr:roarr,robrk:robrk,ropar:ropar,ropf:ropf,Ropf:Ropf,roplus:roplus,rotimes:rotimes,RoundImplies:RoundImplies,rpar:rpar,rpargt:rpargt,rppolint:rppolint,rrarr:rrarr,Rrightarrow:Rrightarrow,rsaquo:rsaquo,rscr:rscr,Rscr:Rscr,rsh:rsh,Rsh:Rsh,rsqb:rsqb,rsquo:rsquo,rsquor:rsquor,rthree:rthree,rtimes:rtimes,rtri:rtri,rtrie:rtrie,rtrif:rtrif,rtriltri:rtriltri,RuleDelayed:RuleDelayed,ruluhar:ruluhar,rx:rx$1,Sacute:Sacute,sacute:sacute,sbquo:sbquo,scap:scap,Scaron:Scaron,scaron:scaron,Sc:Sc,sc:sc,sccue:sccue,sce:sce,scE:scE,Scedil:Scedil,scedil:scedil,Scirc:Scirc,scirc:scirc,scnap:scnap,scnE:scnE,scnsim:scnsim,scpolint:scpolint,scsim:scsim,Scy:Scy,scy:scy,sdotb:sdotb,sdot:sdot,sdote:sdote,searhk:searhk,searr:searr,seArr:seArr,searrow:searrow,sect:sect$1,semi:semi,seswar:seswar,setminus:setminus,setmn:setmn,sext:sext,Sfr:Sfr,sfr:sfr,sfrown:sfrown,sharp:sharp,SHCHcy:SHCHcy,shchcy:shchcy,SHcy:SHcy,shcy:shcy,ShortDownArrow:ShortDownArrow,ShortLeftArrow:ShortLeftArrow,shortmid:shortmid,shortparallel:shortparallel,ShortRightArrow:ShortRightArrow,ShortUpArrow:ShortUpArrow,shy:shy$1,Sigma:Sigma,sigma:sigma,sigmaf:sigmaf,sigmav:sigmav,sim:sim,simdot:simdot,sime:sime,simeq:simeq,simg:simg,simgE:simgE,siml:siml,simlE:simlE,simne:simne,simplus:simplus,simrarr:simrarr,slarr:slarr,SmallCircle:SmallCircle,smallsetminus:smallsetminus,smashp:smashp,smeparsl:smeparsl,smid:smid,smile:smile,smt:smt,smte:smte,smtes:smtes,SOFTcy:SOFTcy,softcy:softcy,solbar:solbar,solb:solb,sol:sol,Sopf:Sopf,sopf:sopf,spades:spades,spadesuit:spadesuit,spar:spar,sqcap:sqcap,sqcaps:sqcaps,sqcup:sqcup,sqcups:sqcups,Sqrt:Sqrt,sqsub:sqsub,sqsube:sqsube,sqsubset:sqsubset,sqsubseteq:sqsubseteq,sqsup:sqsup,sqsupe:sqsupe,sqsupset:sqsupset,sqsupseteq:sqsupseteq,square:square,Square:Square,SquareIntersection:SquareIntersection,SquareSubset:SquareSubset,SquareSubsetEqual:SquareSubsetEqual,SquareSuperset:SquareSuperset,SquareSupersetEqual:SquareSupersetEqual,SquareUnion:SquareUnion,squarf:squarf,squ:squ,squf:squf,srarr:srarr,Sscr:Sscr,sscr:sscr,ssetmn:ssetmn,ssmile:ssmile,sstarf:sstarf,Star:Star,star:star,starf:starf,straightepsilon:straightepsilon,straightphi:straightphi,strns:strns,sub:sub,Sub:Sub,subdot:subdot,subE:subE,sube:sube,subedot:subedot,submult:submult,subnE:subnE,subne:subne,subplus:subplus,subrarr:subrarr,subset:subset,Subset:Subset,subseteq:subseteq,subseteqq:subseteqq,SubsetEqual:SubsetEqual,subsetneq:subsetneq,subsetneqq:subsetneqq,subsim:subsim,subsub:subsub,subsup:subsup,succapprox:succapprox,succ:succ,succcurlyeq:succcurlyeq,Succeeds:Succeeds,SucceedsEqual:SucceedsEqual,SucceedsSlantEqual:SucceedsSlantEqual,SucceedsTilde:SucceedsTilde,succeq:succeq,succnapprox:succnapprox,succneqq:succneqq,succnsim:succnsim,succsim:succsim,SuchThat:SuchThat,sum:sum,Sum:Sum,sung:sung,sup1:sup1$1,sup2:sup2$1,sup3:sup3$1,sup:sup,Sup:Sup,supdot:supdot,supdsub:supdsub,supE:supE,supe:supe,supedot:supedot,Superset:Superset,SupersetEqual:SupersetEqual,suphsol:suphsol,suphsub:suphsub,suplarr:suplarr,supmult:supmult,supnE:supnE,supne:supne,supplus:supplus,supset:supset,Supset:Supset,supseteq:supseteq,supseteqq:supseteqq,supsetneq:supsetneq,supsetneqq:supsetneqq,supsim:supsim,supsub:supsub,supsup:supsup,swarhk:swarhk,swarr:swarr,swArr:swArr,swarrow:swarrow,swnwar:swnwar,szlig:szlig$1,Tab:Tab,target:target$1,Tau:Tau,tau:tau,tbrk:tbrk,Tcaron:Tcaron,tcaron:tcaron,Tcedil:Tcedil,tcedil:tcedil,Tcy:Tcy,tcy:tcy,tdot:tdot,telrec:telrec,Tfr:Tfr,tfr:tfr,there4:there4,therefore:therefore,Therefore:Therefore,Theta:Theta,theta:theta,thetasym:thetasym,thetav:thetav,thickapprox:thickapprox,thicksim:thicksim,ThickSpace:ThickSpace,ThinSpace:ThinSpace,thinsp:thinsp,thkap:thkap,thksim:thksim,THORN:THORN$1,thorn:thorn$1,tilde:tilde,Tilde:Tilde,TildeEqual:TildeEqual,TildeFullEqual:TildeFullEqual,TildeTilde:TildeTilde,timesbar:timesbar,timesb:timesb,times:times$1,timesd:timesd,tint:tint,toea:toea,topbot:topbot,topcir:topcir,top:top,Topf:Topf,topf:topf,topfork:topfork,tosa:tosa,tprime:tprime,trade:trade,TRADE:TRADE,triangle:triangle,triangledown:triangledown,triangleleft:triangleleft,trianglelefteq:trianglelefteq,triangleq:triangleq,triangleright:triangleright,trianglerighteq:trianglerighteq,tridot:tridot,trie:trie,triminus:triminus,TripleDot:TripleDot,triplus:triplus,trisb:trisb,tritime:tritime,trpezium:trpezium,Tscr:Tscr,tscr:tscr,TScy:TScy,tscy:tscy,TSHcy:TSHcy,tshcy:tshcy,Tstrok:Tstrok,tstrok:tstrok,twixt:twixt,twoheadleftarrow:twoheadleftarrow,twoheadrightarrow:twoheadrightarrow,Uacute:Uacute$1,uacute:uacute$1,uarr:uarr,Uarr:Uarr,uArr:uArr,Uarrocir:Uarrocir,Ubrcy:Ubrcy,ubrcy:ubrcy,Ubreve:Ubreve,ubreve:ubreve,Ucirc:Ucirc$1,ucirc:ucirc$1,Ucy:Ucy,ucy:ucy,udarr:udarr,Udblac:Udblac,udblac:udblac,udhar:udhar,ufisht:ufisht,Ufr:Ufr,ufr:ufr,Ugrave:Ugrave$1,ugrave:ugrave$1,uHar:uHar,uharl:uharl,uharr:uharr,uhblk:uhblk,ulcorn:ulcorn,ulcorner:ulcorner,ulcrop:ulcrop,ultri:ultri,Umacr:Umacr,umacr:umacr,uml:uml$1,UnderBar:UnderBar,UnderBrace:UnderBrace,UnderBracket:UnderBracket,UnderParenthesis:UnderParenthesis,Union:Union,UnionPlus:UnionPlus,Uogon:Uogon,uogon:uogon,Uopf:Uopf,uopf:uopf,UpArrowBar:UpArrowBar,uparrow:uparrow,UpArrow:UpArrow,Uparrow:Uparrow,UpArrowDownArrow:UpArrowDownArrow,updownarrow:updownarrow,UpDownArrow:UpDownArrow,Updownarrow:Updownarrow,UpEquilibrium:UpEquilibrium,upharpoonleft:upharpoonleft,upharpoonright:upharpoonright,uplus:uplus,UpperLeftArrow:UpperLeftArrow,UpperRightArrow:UpperRightArrow,upsi:upsi,Upsi:Upsi,upsih:upsih,Upsilon:Upsilon,upsilon:upsilon,UpTeeArrow:UpTeeArrow,UpTee:UpTee,upuparrows:upuparrows,urcorn:urcorn,urcorner:urcorner,urcrop:urcrop,Uring:Uring,uring:uring,urtri:urtri,Uscr:Uscr,uscr:uscr,utdot:utdot,Utilde:Utilde,utilde:utilde,utri:utri,utrif:utrif,uuarr:uuarr,Uuml:Uuml$1,uuml:uuml$1,uwangle:uwangle,vangrt:vangrt,varepsilon:varepsilon,varkappa:varkappa,varnothing:varnothing,varphi:varphi,varpi:varpi,varpropto:varpropto,varr:varr,vArr:vArr,varrho:varrho,varsigma:varsigma,varsubsetneq:varsubsetneq,varsubsetneqq:varsubsetneqq,varsupsetneq:varsupsetneq,varsupsetneqq:varsupsetneqq,vartheta:vartheta,vartriangleleft:vartriangleleft,vartriangleright:vartriangleright,vBar:vBar,Vbar:Vbar,vBarv:vBarv,Vcy:Vcy,vcy:vcy,vdash:vdash,vDash:vDash,Vdash:Vdash,VDash:VDash,Vdashl:Vdashl,veebar:veebar,vee:vee,Vee:Vee,veeeq:veeeq,vellip:vellip,verbar:verbar,Verbar:Verbar,vert:vert,Vert:Vert,VerticalBar:VerticalBar,VerticalLine:VerticalLine,VerticalSeparator:VerticalSeparator,VerticalTilde:VerticalTilde,VeryThinSpace:VeryThinSpace,Vfr:Vfr,vfr:vfr,vltri:vltri,vnsub:vnsub,vnsup:vnsup,Vopf:Vopf,vopf:vopf,vprop:vprop,vrtri:vrtri,Vscr:Vscr,vscr:vscr,vsubnE:vsubnE,vsubne:vsubne,vsupnE:vsupnE,vsupne:vsupne,Vvdash:Vvdash,vzigzag:vzigzag,Wcirc:Wcirc,wcirc:wcirc,wedbar:wedbar,wedge:wedge,Wedge:Wedge,wedgeq:wedgeq,weierp:weierp,Wfr:Wfr,wfr:wfr,Wopf:Wopf,wopf:wopf,wp:wp,wr:wr,wreath:wreath,Wscr:Wscr,wscr:wscr,xcap:xcap,xcirc:xcirc,xcup:xcup,xdtri:xdtri,Xfr:Xfr,xfr:xfr,xharr:xharr,xhArr:xhArr,Xi:Xi,xi:xi,xlarr:xlarr,xlArr:xlArr,xmap:xmap,xnis:xnis,xodot:xodot,Xopf:Xopf,xopf:xopf,xoplus:xoplus,xotime:xotime,xrarr:xrarr,xrArr:xrArr,Xscr:Xscr,xscr:xscr,xsqcup:xsqcup,xuplus:xuplus,xutri:xutri,xvee:xvee,xwedge:xwedge,Yacute:Yacute$1,yacute:yacute$1,YAcy:YAcy,yacy:yacy,Ycirc:Ycirc,ycirc:ycirc,Ycy:Ycy,ycy:ycy,yen:yen$1,Yfr:Yfr,yfr:yfr,YIcy:YIcy,yicy:yicy,Yopf:Yopf,yopf:yopf,Yscr:Yscr,yscr:yscr,YUcy:YUcy,yucy:yucy,yuml:yuml$1,Yuml:Yuml,Zacute:Zacute,zacute:zacute,Zcaron:Zcaron,zcaron:zcaron,Zcy:Zcy,zcy:zcy,Zdot:Zdot,zdot:zdot,zeetrf:zeetrf,ZeroWidthSpace:ZeroWidthSpace,Zeta:Zeta,zeta:zeta,zfr:zfr,Zfr:Zfr,ZHcy:ZHcy,zhcy:zhcy,zigrarr:zigrarr,zopf:zopf,Zopf:Zopf,Zscr:Zscr,zscr:zscr,zwj:zwj,zwnj:zwnj};var Aacute="Á";var aacute="á";var Acirc="Â";var acirc="â";var acute="´";var AElig="Æ";var aelig="æ";var Agrave="À";var agrave="à";var amp$1="&";var AMP="&";var Aring="Å";var aring="å";var Atilde="Ã";var atilde="ã";var Auml="Ä";var auml="ä";var brvbar="¦";var Ccedil="Ç";var ccedil="ç";var cedil="¸";var cent="¢";var copy="©";var COPY="©";var curren="¤";var deg="°";var divide="÷";var Eacute="É";var eacute="é";var Ecirc="Ê";var ecirc="ê";var Egrave="È";var egrave="è";var ETH="Ð";var eth="ð";var Euml="Ë";var euml="ë";var frac12="½";var frac14="¼";var frac34="¾";var gt$1=">";var GT=">";var Iacute="Í";var iacute="í";var Icirc="Î";var icirc="î";var iexcl="¡";var Igrave="Ì";var igrave="ì";var iquest="¿";var Iuml="Ï";var iuml="ï";var laquo="«";var lt$1="<";var LT="<";var macr="¯";var micro="µ";var middot="·";var nbsp=" ";var not="¬";var Ntilde="Ñ";var ntilde="ñ";var Oacute="Ó";var oacute="ó";var Ocirc="Ô";var ocirc="ô";var Ograve="Ò";var ograve="ò";var ordf="ª";var ordm="º";var Oslash="Ø";var oslash="ø";var Otilde="Õ";var otilde="õ";var Ouml="Ö";var ouml="ö";var para="¶";var plusmn="±";var pound="£";var quot$1="\"";var QUOT="\"";var raquo="»";var reg="®";var REG="®";var sect="§";var shy="­";var sup1="¹";var sup2="²";var sup3="³";var szlig="ß";var THORN="Þ";var thorn="þ";var times="×";var Uacute="Ú";var uacute="ú";var Ucirc="Û";var ucirc="û";var Ugrave="Ù";var ugrave="ù";var uml="¨";var Uuml="Ü";var uuml="ü";var Yacute="Ý";var yacute="ý";var yen="¥";var yuml="ÿ";var require$$1$1={Aacute:Aacute,aacute:aacute,Acirc:Acirc,acirc:acirc,acute:acute,AElig:AElig,aelig:aelig,Agrave:Agrave,agrave:agrave,amp:amp$1,AMP:AMP,Aring:Aring,aring:aring,Atilde:Atilde,atilde:atilde,Auml:Auml,auml:auml,brvbar:brvbar,Ccedil:Ccedil,ccedil:ccedil,cedil:cedil,cent:cent,copy:copy,COPY:COPY,curren:curren,deg:deg,divide:divide,Eacute:Eacute,eacute:eacute,Ecirc:Ecirc,ecirc:ecirc,Egrave:Egrave,egrave:egrave,ETH:ETH,eth:eth,Euml:Euml,euml:euml,frac12:frac12,frac14:frac14,frac34:frac34,gt:gt$1,GT:GT,Iacute:Iacute,iacute:iacute,Icirc:Icirc,icirc:icirc,iexcl:iexcl,Igrave:Igrave,igrave:igrave,iquest:iquest,Iuml:Iuml,iuml:iuml,laquo:laquo,lt:lt$1,LT:LT,macr:macr,micro:micro,middot:middot,nbsp:nbsp,not:not,Ntilde:Ntilde,ntilde:ntilde,Oacute:Oacute,oacute:oacute,Ocirc:Ocirc,ocirc:ocirc,Ograve:Ograve,ograve:ograve,ordf:ordf,ordm:ordm,Oslash:Oslash,oslash:oslash,Otilde:Otilde,otilde:otilde,Ouml:Ouml,ouml:ouml,para:para,plusmn:plusmn,pound:pound,quot:quot$1,QUOT:QUOT,raquo:raquo,reg:reg,REG:REG,sect:sect,shy:shy,sup1:sup1,sup2:sup2,sup3:sup3,szlig:szlig,THORN:THORN,thorn:thorn,times:times,Uacute:Uacute,uacute:uacute,Ucirc:Ucirc,ucirc:ucirc,Ugrave:Ugrave,ugrave:ugrave,uml:uml,Uuml:Uuml,uuml:uuml,Yacute:Yacute,yacute:yacute,yen:yen,yuml:yuml};var amp="&";var apos="'";var gt=">";var lt="<";var quot="\"";var require$$0$1={amp:amp,apos:apos,gt:gt,lt:lt,quot:quot};var decode_codepoint={};var require$$0={"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376};var hasRequiredDecode_codepoint;function requireDecode_codepoint(){if(hasRequiredDecode_codepoint)return decode_codepoint;hasRequiredDecode_codepoint=1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod};};Object.defineProperty(decode_codepoint,"__esModule",{value:true});var decode_json_1=__importDefault(require$$0);// Adapted from https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119
var fromCodePoint=// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
String.fromCodePoint||function(codePoint){var output="";if(codePoint>0xffff){codePoint-=0x10000;output+=String.fromCharCode(codePoint>>>10&0x3ff|0xd800);codePoint=0xdc00|codePoint&0x3ff;}output+=String.fromCharCode(codePoint);return output;};function decodeCodePoint(codePoint){if(codePoint>=0xd800&&codePoint<=0xdfff||codePoint>0x10ffff){return"\uFFFD";}if(codePoint in decode_json_1.default){codePoint=decode_json_1.default[codePoint];}return fromCodePoint(codePoint);}decode_codepoint.default=decodeCodePoint;return decode_codepoint;}var hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode;hasRequiredDecode=1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod};};Object.defineProperty(decode,"__esModule",{value:true});decode.decodeHTML=decode.decodeHTMLStrict=decode.decodeXML=void 0;var entities_json_1=__importDefault(require$$1$2);var legacy_json_1=__importDefault(require$$1$1);var xml_json_1=__importDefault(require$$0$1);var decode_codepoint_1=__importDefault(requireDecode_codepoint());var strictEntityRe=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;decode.decodeXML=getStrictDecoder(xml_json_1.default);decode.decodeHTMLStrict=getStrictDecoder(entities_json_1.default);function getStrictDecoder(map){var replace=getReplacer(map);return function(str){return String(str).replace(strictEntityRe,replace);};}var sorter=function sorter(a,b){return a<b?1:-1;};decode.decodeHTML=function(){var legacy=Object.keys(legacy_json_1.default).sort(sorter);var keys=Object.keys(entities_json_1.default).sort(sorter);for(var i=0,j=0;i<keys.length;i++){if(legacy[j]===keys[i]){keys[i]+=";?";j++;}else{keys[i]+=";";}}var re=new RegExp("&(?:"+keys.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g");var replace=getReplacer(entities_json_1.default);function replacer(str){if(str.substr(-1)!==";")str+=";";return replace(str);}// TODO consider creating a merged map
return function(str){return String(str).replace(re,replacer);};}();function getReplacer(map){return function replace(str){if(str.charAt(1)==="#"){var secondChar=str.charAt(2);if(secondChar==="X"||secondChar==="x"){return decode_codepoint_1.default(parseInt(str.substr(3),16));}return decode_codepoint_1.default(parseInt(str.substr(2),10));}// eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing
return map[str.slice(1,-1)]||str;};}return decode;}var encode={};var hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode;hasRequiredEncode=1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod};};Object.defineProperty(encode,"__esModule",{value:true});encode.escapeUTF8=encode.escape=encode.encodeNonAsciiHTML=encode.encodeHTML=encode.encodeXML=void 0;var xml_json_1=__importDefault(require$$0$1);var inverseXML=getInverseObj(xml_json_1.default);var xmlReplacer=getInverseReplacer(inverseXML);/**
   * Encodes all non-ASCII characters, as well as characters not valid in XML
   * documents using XML entities.
   *
   * If a character has no equivalent entity, a
   * numeric hexadecimal reference (eg. `&#xfc;`) will be used.
   */encode.encodeXML=getASCIIEncoder(inverseXML);var entities_json_1=__importDefault(require$$1$2);var inverseHTML=getInverseObj(entities_json_1.default);var htmlReplacer=getInverseReplacer(inverseHTML);/**
   * Encodes all entities and non-ASCII characters in the input.
   *
   * This includes characters that are valid ASCII characters in HTML documents.
   * For example `#` will be encoded as `&num;`. To get a more compact output,
   * consider using the `encodeNonAsciiHTML` function.
   *
   * If a character has no equivalent entity, a
   * numeric hexadecimal reference (eg. `&#xfc;`) will be used.
   */encode.encodeHTML=getInverse(inverseHTML,htmlReplacer);/**
   * Encodes all non-ASCII characters, as well as characters not valid in HTML
   * documents using HTML entities.
   *
   * If a character has no equivalent entity, a
   * numeric hexadecimal reference (eg. `&#xfc;`) will be used.
   */encode.encodeNonAsciiHTML=getASCIIEncoder(inverseHTML);function getInverseObj(obj){return Object.keys(obj).sort().reduce(function(inverse,name){inverse[obj[name]]="&"+name+";";return inverse;},{});}function getInverseReplacer(inverse){var single=[];var multiple=[];for(var _i=0,_a=Object.keys(inverse);_i<_a.length;_i++){var k=_a[_i];if(k.length===1){// Add value to single array
single.push("\\"+k);}else{// Add value to multiple array
multiple.push(k);}}// Add ranges to single characters.
single.sort();for(var start=0;start<single.length-1;start++){// Find the end of a run of characters
var end=start;while(end<single.length-1&&single[end].charCodeAt(1)+1===single[end+1].charCodeAt(1)){end+=1;}var count=1+end-start;// We want to replace at least three characters
if(count<3)continue;single.splice(start,count,single[start]+"-"+single[end]);}multiple.unshift("["+single.join("")+"]");return new RegExp(multiple.join("|"),"g");}// /[^\0-\x7F]/gu
var reNonASCII=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g;var getCodePoint=// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
String.prototype.codePointAt!=null?// eslint-disable-next-line @typescript-eslint/no-non-null-assertion
function(str){return str.codePointAt(0);}:// http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae
function(c){return(c.charCodeAt(0)-0xd800)*0x400+c.charCodeAt(1)-0xdc00+0x10000;};function singleCharReplacer(c){return"&#x"+(c.length>1?getCodePoint(c):c.charCodeAt(0)).toString(16).toUpperCase()+";";}function getInverse(inverse,re){return function(data){return data.replace(re,function(name){return inverse[name];}).replace(reNonASCII,singleCharReplacer);};}var reEscapeChars=new RegExp(xmlReplacer.source+"|"+reNonASCII.source,"g");/**
   * Encodes all non-ASCII characters, as well as characters not valid in XML
   * documents using numeric hexadecimal reference (eg. `&#xfc;`).
   *
   * Have a look at `escapeUTF8` if you want a more concise output at the expense
   * of reduced transportability.
   *
   * @param data String to escape.
   */function escape(data){return data.replace(reEscapeChars,singleCharReplacer);}encode.escape=escape;/**
   * Encodes all characters not valid in XML documents using numeric hexadecimal
   * reference (eg. `&#xfc;`).
   *
   * Note that the output will be character-set dependent.
   *
   * @param data String to escape.
   */function escapeUTF8(data){return data.replace(xmlReplacer,singleCharReplacer);}encode.escapeUTF8=escapeUTF8;function getASCIIEncoder(obj){return function(data){return data.replace(reEscapeChars,function(c){return obj[c]||singleCharReplacer(c);});};}return encode;}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib;hasRequiredLib$1=1;(function(exports){Object.defineProperty(exports,"__esModule",{value:true});exports.decodeXMLStrict=exports.decodeHTML5Strict=exports.decodeHTML4Strict=exports.decodeHTML5=exports.decodeHTML4=exports.decodeHTMLStrict=exports.decodeHTML=exports.decodeXML=exports.encodeHTML5=exports.encodeHTML4=exports.escapeUTF8=exports.escape=exports.encodeNonAsciiHTML=exports.encodeHTML=exports.encodeXML=exports.encode=exports.decodeStrict=exports.decode=void 0;var decode_1=requireDecode();var encode_1=requireEncode();/**
     * Decodes a string with entities.
     *
     * @param data String to decode.
     * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.
     * @deprecated Use `decodeXML` or `decodeHTML` directly.
     */function decode(data,level){return(!level||level<=0?decode_1.decodeXML:decode_1.decodeHTML)(data);}exports.decode=decode;/**
     * Decodes a string with entities. Does not allow missing trailing semicolons for entities.
     *
     * @param data String to decode.
     * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.
     * @deprecated Use `decodeHTMLStrict` or `decodeXML` directly.
     */function decodeStrict(data,level){return(!level||level<=0?decode_1.decodeXML:decode_1.decodeHTMLStrict)(data);}exports.decodeStrict=decodeStrict;/**
     * Encodes a string with entities.
     *
     * @param data String to encode.
     * @param level Optional level to encode at. 0 = XML, 1 = HTML. Default is 0.
     * @deprecated Use `encodeHTML`, `encodeXML` or `encodeNonAsciiHTML` directly.
     */function encode(data,level){return(!level||level<=0?encode_1.encodeXML:encode_1.encodeHTML)(data);}exports.encode=encode;var encode_2=requireEncode();Object.defineProperty(exports,"encodeXML",{enumerable:true,get:function get(){return encode_2.encodeXML;}});Object.defineProperty(exports,"encodeHTML",{enumerable:true,get:function get(){return encode_2.encodeHTML;}});Object.defineProperty(exports,"encodeNonAsciiHTML",{enumerable:true,get:function get(){return encode_2.encodeNonAsciiHTML;}});Object.defineProperty(exports,"escape",{enumerable:true,get:function get(){return encode_2.escape;}});Object.defineProperty(exports,"escapeUTF8",{enumerable:true,get:function get(){return encode_2.escapeUTF8;}});// Legacy aliases (deprecated)
Object.defineProperty(exports,"encodeHTML4",{enumerable:true,get:function get(){return encode_2.encodeHTML;}});Object.defineProperty(exports,"encodeHTML5",{enumerable:true,get:function get(){return encode_2.encodeHTML;}});var decode_2=requireDecode();Object.defineProperty(exports,"decodeXML",{enumerable:true,get:function get(){return decode_2.decodeXML;}});Object.defineProperty(exports,"decodeHTML",{enumerable:true,get:function get(){return decode_2.decodeHTML;}});Object.defineProperty(exports,"decodeHTMLStrict",{enumerable:true,get:function get(){return decode_2.decodeHTMLStrict;}});// Legacy aliases (deprecated)
Object.defineProperty(exports,"decodeHTML4",{enumerable:true,get:function get(){return decode_2.decodeHTML;}});Object.defineProperty(exports,"decodeHTML5",{enumerable:true,get:function get(){return decode_2.decodeHTML;}});Object.defineProperty(exports,"decodeHTML4Strict",{enumerable:true,get:function get(){return decode_2.decodeHTMLStrict;}});Object.defineProperty(exports,"decodeHTML5Strict",{enumerable:true,get:function get(){return decode_2.decodeHTMLStrict;}});Object.defineProperty(exports,"decodeXMLStrict",{enumerable:true,get:function get(){return decode_2.decodeXML;}});})(lib);return lib;}var elementNames={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"};var attributeNames={definitionurl:"definitionURL",attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"};var require$$2$1={elementNames:elementNames,attributeNames:attributeNames};/*
  Module dependencies
*/var hasRequiredDomSerializer;function requireDomSerializer(){if(hasRequiredDomSerializer)return domSerializer.exports;hasRequiredDomSerializer=1;var ElementType=requireLib$2();var entities=requireLib$1();/* mixed-case SVG and MathML tags & attributes
     recognized by the HTML parser, see
     https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inforeign
  */var foreignNames=require$$2$1;foreignNames.elementNames.__proto__=null;/* use as a simple dictionary */foreignNames.attributeNames.__proto__=null;var unencodedElements={__proto__:null,style:true,script:true,xmp:true,iframe:true,noembed:true,noframes:true,plaintext:true,noscript:true};/*
    Format attributes
  */function formatAttrs(attributes,opts){if(!attributes)return;var output='';var value;// Loop through the attributes
for(var key in attributes){value=attributes[key];if(output){output+=' ';}if(opts.xmlMode==='foreign'){/* fix up mixed-case attribute names */key=foreignNames.attributeNames[key]||key;}output+=key;if(value!==null&&value!==''||opts.xmlMode){output+='="'+(opts.decodeEntities?entities.encodeXML(value):value.replace(/\"/g,'&quot;'))+'"';}}return output;}/*
    Self-enclosing tags (stolen from node-htmlparser)
  */var singleTag={__proto__:null,area:true,base:true,basefont:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,isindex:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true};var render=domSerializer.exports=function(dom,opts){if(!Array.isArray(dom)&&!dom.cheerio)dom=[dom];opts=opts||{};var output='';for(var i=0;i<dom.length;i++){var elem=dom[i];if(elem.type==='root')output+=render(elem.children,opts);else if(ElementType.isTag(elem))output+=renderTag(elem,opts);else if(elem.type===ElementType.Directive)output+=renderDirective(elem);else if(elem.type===ElementType.Comment)output+=renderComment(elem);else if(elem.type===ElementType.CDATA)output+=renderCdata(elem);else output+=renderText(elem,opts);}return output;};var foreignModeIntegrationPoints=['mi','mo','mn','ms','mtext','annotation-xml','foreignObject','desc','title'];function renderTag(elem,opts){// Handle SVG / MathML in HTML
if(opts.xmlMode==='foreign'){/* fix up mixed-case element names */elem.name=foreignNames.elementNames[elem.name]||elem.name;/* exit foreign mode at integration points */if(elem.parent&&foreignModeIntegrationPoints.indexOf(elem.parent.name)>=0)opts=Object.assign({},opts,{xmlMode:false});}if(!opts.xmlMode&&['svg','math'].indexOf(elem.name)>=0){opts=Object.assign({},opts,{xmlMode:'foreign'});}var tag='<'+elem.name;var attribs=formatAttrs(elem.attribs,opts);if(attribs){tag+=' '+attribs;}if(opts.xmlMode&&(!elem.children||elem.children.length===0)){tag+='/>';}else{tag+='>';if(elem.children){tag+=render(elem.children,opts);}if(!singleTag[elem.name]||opts.xmlMode){tag+='</'+elem.name+'>';}}return tag;}function renderDirective(elem){return'<'+elem.data+'>';}function renderText(elem,opts){var data=elem.data||'';// if entities weren't decoded, no need to encode them back
if(opts.decodeEntities&&!(elem.parent&&elem.parent.name in unencodedElements)){data=entities.encodeXML(data);}return data;}function renderCdata(elem){return'<![CDATA['+elem.children[0].data+']]>';}function renderComment(elem){return'<!--'+elem.data+'-->';}return domSerializer.exports;}var stringify;var hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify;hasRequiredStringify=1;var ElementType=domelementtype,getOuterHTML=requireDomSerializer(),isTag=ElementType.isTag;stringify={getInnerHTML:getInnerHTML,getOuterHTML:getOuterHTML,getText:getText};function getInnerHTML(elem,opts){return elem.children?elem.children.map(function(elem){return getOuterHTML(elem,opts);}).join(""):"";}function getText(elem){if(Array.isArray(elem))return elem.map(getText).join("");if(isTag(elem))return elem.name==="br"?"\n":getText(elem.children);if(elem.type===ElementType.CDATA)return getText(elem.children);if(elem.type===ElementType.Text)return elem.data;return"";}return stringify;}var traversal={};var hasRequiredTraversal;function requireTraversal(){if(hasRequiredTraversal)return traversal;hasRequiredTraversal=1;var getChildren=traversal.getChildren=function(elem){return elem.children;};var getParent=traversal.getParent=function(elem){return elem.parent;};traversal.getSiblings=function(elem){var parent=getParent(elem);return parent?getChildren(parent):[elem];};traversal.getAttributeValue=function(elem,name){return elem.attribs&&elem.attribs[name];};traversal.hasAttrib=function(elem,name){return!!elem.attribs&&hasOwnProperty.call(elem.attribs,name);};traversal.getName=function(elem){return elem.name;};return traversal;}var manipulation={};var hasRequiredManipulation;function requireManipulation(){if(hasRequiredManipulation)return manipulation;hasRequiredManipulation=1;manipulation.removeElement=function(elem){if(elem.prev)elem.prev.next=elem.next;if(elem.next)elem.next.prev=elem.prev;if(elem.parent){var childs=elem.parent.children;childs.splice(childs.lastIndexOf(elem),1);}};manipulation.replaceElement=function(elem,replacement){var prev=replacement.prev=elem.prev;if(prev){prev.next=replacement;}var next=replacement.next=elem.next;if(next){next.prev=replacement;}var parent=replacement.parent=elem.parent;if(parent){var childs=parent.children;childs[childs.lastIndexOf(elem)]=replacement;}};manipulation.appendChild=function(elem,child){child.parent=elem;if(elem.children.push(child)!==1){var sibling=elem.children[elem.children.length-2];sibling.next=child;child.prev=sibling;child.next=null;}};manipulation.append=function(elem,next){var parent=elem.parent,currNext=elem.next;next.next=currNext;next.prev=elem;elem.next=next;next.parent=parent;if(currNext){currNext.prev=next;if(parent){var childs=parent.children;childs.splice(childs.lastIndexOf(currNext),0,next);}}else if(parent){parent.children.push(next);}};manipulation.prepend=function(elem,prev){var parent=elem.parent;if(parent){var childs=parent.children;childs.splice(childs.lastIndexOf(elem),0,prev);}if(elem.prev){elem.prev.next=prev;}prev.parent=parent;prev.prev=elem.prev;prev.next=elem;elem.prev=prev;};return manipulation;}var querying;var hasRequiredQuerying;function requireQuerying(){if(hasRequiredQuerying)return querying;hasRequiredQuerying=1;var isTag=domelementtype.isTag;querying={filter:filter,find:find,findOneChild:findOneChild,findOne:findOne,existsOne:existsOne,findAll:findAll};function filter(test,element,recurse,limit){if(!Array.isArray(element))element=[element];if(typeof limit!=="number"||!isFinite(limit)){limit=Infinity;}return find(test,element,recurse!==false,limit);}function find(test,elems,recurse,limit){var result=[],childs;for(var i=0,j=elems.length;i<j;i++){if(test(elems[i])){result.push(elems[i]);if(--limit<=0)break;}childs=elems[i].children;if(recurse&&childs&&childs.length>0){childs=find(test,childs,recurse,limit);result=result.concat(childs);limit-=childs.length;if(limit<=0)break;}}return result;}function findOneChild(test,elems){for(var i=0,l=elems.length;i<l;i++){if(test(elems[i]))return elems[i];}return null;}function findOne(test,elems){var elem=null;for(var i=0,l=elems.length;i<l&&!elem;i++){if(!isTag(elems[i])){continue;}else if(test(elems[i])){elem=elems[i];}else if(elems[i].children.length>0){elem=findOne(test,elems[i].children);}}return elem;}function existsOne(test,elems){for(var i=0,l=elems.length;i<l;i++){if(isTag(elems[i])&&(test(elems[i])||elems[i].children.length>0&&existsOne(test,elems[i].children))){return true;}}return false;}function findAll(test,rootElems){var result=[];var stack=rootElems.slice();while(stack.length){var elem=stack.shift();if(!isTag(elem))continue;if(elem.children&&elem.children.length>0){stack.unshift.apply(stack,elem.children);}if(test(elem))result.push(elem);}return result;}return querying;}var legacy={};var hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var ElementType=domelementtype;var isTag=legacy.isTag=ElementType.isTag;legacy.testElement=function(options,element){for(var key in options){if(!options.hasOwnProperty(key));else if(key==="tag_name"){if(!isTag(element)||!options.tag_name(element.name)){return false;}}else if(key==="tag_type"){if(!options.tag_type(element.type))return false;}else if(key==="tag_contains"){if(isTag(element)||!options.tag_contains(element.data)){return false;}}else if(!element.attribs||!options[key](element.attribs[key])){return false;}}return true;};var Checks={tag_name:function tag_name(name){if(typeof name==="function"){return function(elem){return isTag(elem)&&name(elem.name);};}else if(name==="*"){return isTag;}else{return function(elem){return isTag(elem)&&elem.name===name;};}},tag_type:function tag_type(type){if(typeof type==="function"){return function(elem){return type(elem.type);};}else{return function(elem){return elem.type===type;};}},tag_contains:function tag_contains(data){if(typeof data==="function"){return function(elem){return!isTag(elem)&&data(elem.data);};}else{return function(elem){return!isTag(elem)&&elem.data===data;};}}};function getAttribCheck(attrib,value){if(typeof value==="function"){return function(elem){return elem.attribs&&value(elem.attribs[attrib]);};}else{return function(elem){return elem.attribs&&elem.attribs[attrib]===value;};}}function combineFuncs(a,b){return function(elem){return a(elem)||b(elem);};}legacy.getElements=function(options,element,recurse,limit){var funcs=Object.keys(options).map(function(key){var value=options[key];return key in Checks?Checks[key](value):getAttribCheck(key,value);});return funcs.length===0?[]:this.filter(funcs.reduce(combineFuncs),element,recurse,limit);};legacy.getElementById=function(id,element,recurse){if(!Array.isArray(element))element=[element];return this.findOne(getAttribCheck("id",id),element,recurse!==false);};legacy.getElementsByTagName=function(name,element,recurse,limit){return this.filter(Checks.tag_name(name),element,recurse,limit);};legacy.getElementsByTagType=function(type,element,recurse,limit){return this.filter(Checks.tag_type(type),element,recurse,limit);};return legacy;}var helpers={};var hasRequiredHelpers;function requireHelpers(){if(hasRequiredHelpers)return helpers;hasRequiredHelpers=1;// removeSubsets
// Given an array of nodes, remove any member that is contained by another.
helpers.removeSubsets=function(nodes){var idx=nodes.length,node,ancestor,replace;// Check if each node (or one of its ancestors) is already contained in the
// array.
while(--idx>-1){node=ancestor=nodes[idx];// Temporarily remove the node under consideration
nodes[idx]=null;replace=true;while(ancestor){if(nodes.indexOf(ancestor)>-1){replace=false;nodes.splice(idx,1);break;}ancestor=ancestor.parent;}// If the node has been found to be unique, re-insert it.
if(replace){nodes[idx]=node;}}return nodes;};// Source: http://dom.spec.whatwg.org/#dom-node-comparedocumentposition
var POSITION={DISCONNECTED:1,PRECEDING:2,FOLLOWING:4,CONTAINS:8,CONTAINED_BY:16};// Compare the position of one node against another node in any other document.
// The return value is a bitmask with the following values:
//
// document order:
// > There is an ordering, document order, defined on all the nodes in the
// > document corresponding to the order in which the first character of the
// > XML representation of each node occurs in the XML representation of the
// > document after expansion of general entities. Thus, the document element
// > node will be the first node. Element nodes occur before their children.
// > Thus, document order orders element nodes in order of the occurrence of
// > their start-tag in the XML (after expansion of entities). The attribute
// > nodes of an element occur after the element and before its children. The
// > relative order of attribute nodes is implementation-dependent./
// Source:
// http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order
//
// @argument {Node} nodaA The first node to use in the comparison
// @argument {Node} nodeB The second node to use in the comparison
//
// @return {Number} A bitmask describing the input nodes' relative position.
//         See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for
//         a description of these values.
var comparePos=helpers.compareDocumentPosition=function(nodeA,nodeB){var aParents=[];var bParents=[];var current,sharedParent,siblings,aSibling,bSibling,idx;if(nodeA===nodeB){return 0;}current=nodeA;while(current){aParents.unshift(current);current=current.parent;}current=nodeB;while(current){bParents.unshift(current);current=current.parent;}idx=0;while(aParents[idx]===bParents[idx]){idx++;}if(idx===0){return POSITION.DISCONNECTED;}sharedParent=aParents[idx-1];siblings=sharedParent.children;aSibling=aParents[idx];bSibling=bParents[idx];if(siblings.indexOf(aSibling)>siblings.indexOf(bSibling)){if(sharedParent===nodeB){return POSITION.FOLLOWING|POSITION.CONTAINED_BY;}return POSITION.FOLLOWING;}else{if(sharedParent===nodeA){return POSITION.PRECEDING|POSITION.CONTAINS;}return POSITION.PRECEDING;}};// Sort an array of nodes based on their relative position in the document and
// remove any duplicate nodes. If the array contains nodes that do not belong
// to the same document, sort order is unspecified.
//
// @argument {Array} nodes Array of DOM nodes
//
// @returns {Array} collection of unique nodes, sorted in document order
helpers.uniqueSort=function(nodes){var idx=nodes.length,node,position;nodes=nodes.slice();while(--idx>-1){node=nodes[idx];position=nodes.indexOf(node);if(position>-1&&position<idx){nodes.splice(idx,1);}}nodes.sort(function(a,b){var relative=comparePos(a,b);if(relative&POSITION.PRECEDING){return-1;}else if(relative&POSITION.FOLLOWING){return 1;}return 0;});return nodes;};return helpers;}var hasRequiredDomutils;function requireDomutils(){if(hasRequiredDomutils)return domutils.exports;hasRequiredDomutils=1;(function(module){var DomUtils=module.exports;[requireStringify(),requireTraversal(),requireManipulation(),requireQuerying(),requireLegacy(),requireHelpers()].forEach(function(ext){Object.keys(ext).forEach(function(key){DomUtils[key]=ext[key].bind(DomUtils);});});})(domutils);return domutils.exports;}var FeedHandler_1;var hasRequiredFeedHandler;function requireFeedHandler(){if(hasRequiredFeedHandler)return FeedHandler_1;hasRequiredFeedHandler=1;var DomHandler=domhandler;var DomUtils=requireDomutils();//TODO: make this a streamable handler
function FeedHandler(callback,options){this.init(callback,options);}require$$1$3(FeedHandler,DomHandler);FeedHandler.prototype.init=DomHandler;function getElements(what,where){return DomUtils.getElementsByTagName(what,where,true);}function getOneElement(what,where){return DomUtils.getElementsByTagName(what,where,true,1)[0];}function fetch(what,where,recurse){return DomUtils.getText(DomUtils.getElementsByTagName(what,where,recurse,1)).trim();}function addConditionally(obj,prop,what,where,recurse){var tmp=fetch(what,where,recurse);if(tmp)obj[prop]=tmp;}var isValidFeed=function isValidFeed(value){return value==="rss"||value==="feed"||value==="rdf:RDF";};FeedHandler.prototype.onend=function(){var feed={},feedRoot=getOneElement(isValidFeed,this.dom),tmp,childs;if(feedRoot){if(feedRoot.name==="feed"){childs=feedRoot.children;feed.type="atom";addConditionally(feed,"id","id",childs);addConditionally(feed,"title","title",childs);if((tmp=getOneElement("link",childs))&&(tmp=tmp.attribs)&&(tmp=tmp.href))feed.link=tmp;addConditionally(feed,"description","subtitle",childs);if(tmp=fetch("updated",childs))feed.updated=new Date(tmp);addConditionally(feed,"author","email",childs,true);feed.items=getElements("entry",childs).map(function(item){var entry={},tmp;item=item.children;addConditionally(entry,"id","id",item);addConditionally(entry,"title","title",item);if((tmp=getOneElement("link",item))&&(tmp=tmp.attribs)&&(tmp=tmp.href))entry.link=tmp;if(tmp=fetch("summary",item)||fetch("content",item))entry.description=tmp;if(tmp=fetch("updated",item))entry.pubDate=new Date(tmp);return entry;});}else{childs=getOneElement("channel",feedRoot.children).children;feed.type=feedRoot.name.substr(0,3);feed.id="";addConditionally(feed,"title","title",childs);addConditionally(feed,"link","link",childs);addConditionally(feed,"description","description",childs);if(tmp=fetch("lastBuildDate",childs))feed.updated=new Date(tmp);addConditionally(feed,"author","managingEditor",childs,true);feed.items=getElements("item",feedRoot.children).map(function(item){var entry={},tmp;item=item.children;addConditionally(entry,"id","guid",item);addConditionally(entry,"title","title",item);addConditionally(entry,"link","link",item);addConditionally(entry,"description","description",item);if(tmp=fetch("pubDate",item))entry.pubDate=new Date(tmp);return entry;});}}this.dom=feed;DomHandler.prototype._handleCallback.call(this,feedRoot?null:Error("couldn't find root of feed"));};FeedHandler_1=FeedHandler;return FeedHandler_1;}var _nodeResolve_empty={};var _nodeResolve_empty$1=/*#__PURE__*/Object.freeze({__proto__:null,default:_nodeResolve_empty});var require$$1=/*@__PURE__*/getAugmentedNamespace(_nodeResolve_empty$1);var global$1=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=='undefined'?Uint8Array:Array;var inited=false;function init(){inited=true;var code='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i;}revLookup['-'.charCodeAt(0)]=62;revLookup['_'.charCodeAt(0)]=63;}function toByteArray(b64){if(!inited){init();}var i,j,l,tmp,placeHolders,arr;var len=b64.length;if(len%4>0){throw new Error('Invalid string. Length must be a multiple of 4');}// the number of equal signs (place holders)
// if there are two placeholders, than the two characters before it
// represent one byte
// if there is only one, then the three characters before it represent 2 bytes
// this is just a cheap hack to not do indexOf twice
placeHolders=b64[len-2]==='='?2:b64[len-1]==='='?1:0;// base64 is 4/3 + up to two characters of the original data
arr=new Arr(len*3/4-placeHolders);// if there are placeholders, only get up to the last complete 4 chars
l=placeHolders>0?len-4:len;var L=0;for(i=0,j=0;i<l;i+=4,j+=3){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[L++]=tmp>>16&0xFF;arr[L++]=tmp>>8&0xFF;arr[L++]=tmp&0xFF;}if(placeHolders===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[L++]=tmp&0xFF;}else if(placeHolders===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[L++]=tmp>>8&0xFF;arr[L++]=tmp&0xFF;}return arr;}function tripletToBase64(num){return lookup[num>>18&0x3F]+lookup[num>>12&0x3F]+lookup[num>>6&0x3F]+lookup[num&0x3F];}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output.push(tripletToBase64(tmp));}return output.join('');}function fromByteArray(uint8){if(!inited){init();}var tmp;var len=uint8.length;var extraBytes=len%3;// if we have 1 byte left, pad 2 bytes
var output='';var parts=[];var maxChunkLength=16383;// must be multiple of 3
// go through the array every three bytes, we'll deal with trailing stuff later
for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength));}// pad the end with zeros, but make sure to not forget the extra bytes
if(extraBytes===1){tmp=uint8[len-1];output+=lookup[tmp>>2];output+=lookup[tmp<<4&0x3F];output+='==';}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];output+=lookup[tmp>>10];output+=lookup[tmp>>4&0x3F];output+=lookup[tmp<<2&0x3F];output+='=';}parts.push(output);return parts.join('');}function read(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias;}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity;}else{m=m+Math.pow(2,mLen);e=e-eBias;}return(s?-1:1)*m*Math.pow(2,e-mLen);}function write(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax;}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2;}if(e+eBias>=1){value+=rt/c;}else{value+=rt*Math.pow(2,1-eBias);}if(value*c>=2){e++;c/=2;}if(e+eBias>=eMax){m=0;e=eMax;}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias;}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0;}}for(;mLen>=8;buffer[offset+i]=m&0xff,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&0xff,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128;}var toString={}.toString;var isArray=Array.isArray||function(arr){return toString.call(arr)=='[object Array]';};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 *//* eslint-disable no-proto */var INSPECT_MAX_BYTES=50;/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==undefined?global$1.TYPED_ARRAY_SUPPORT:true;/*
 * Export kMaxLength after typed array support is determined.
 */var _kMaxLength=kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?0x7fffffff:0x3fffffff;}function createBuffer(that,length){if(kMaxLength()<length){throw new RangeError('Invalid typed array length');}if(Buffer.TYPED_ARRAY_SUPPORT){// Return an augmented `Uint8Array` instance, for best performance
that=new Uint8Array(length);that.__proto__=Buffer.prototype;}else{// Fallback: Return an object instance of the Buffer class
if(that===null){that=new Buffer(length);}that.length=length;}return that;}/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */function Buffer(arg,encodingOrOffset,length){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer)){return new Buffer(arg,encodingOrOffset,length);}// Common case.
if(typeof arg==='number'){if(typeof encodingOrOffset==='string'){throw new Error('If encoding is specified then the first argument must be a string');}return allocUnsafe(this,arg);}return from$1(this,arg,encodingOrOffset,length);}Buffer.poolSize=8192;// not used by this implementation
// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment=function(arr){arr.__proto__=Buffer.prototype;return arr;};function from$1(that,value,encodingOrOffset,length){if(typeof value==='number'){throw new TypeError('"value" argument must not be a number');}if(typeof ArrayBuffer!=='undefined'&&value instanceof ArrayBuffer){return fromArrayBuffer(that,value,encodingOrOffset,length);}if(typeof value==='string'){return fromString(that,value,encodingOrOffset);}return fromObject(that,value);}/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/Buffer.from=function(value,encodingOrOffset,length){return from$1(null,value,encodingOrOffset,length);};if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;if(typeof Symbol!=='undefined'&&Symbol.species&&Buffer[Symbol.species]===Buffer);}function assertSize(size){if(typeof size!=='number'){throw new TypeError('"size" argument must be a number');}else if(size<0){throw new RangeError('"size" argument must not be negative');}}function alloc(that,size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(that,size);}if(fill!==undefined){// Only pay attention to encoding if it's a string. This
// prevents accidentally sending in a number that would
// be interpretted as a start offset.
return typeof encoding==='string'?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill);}return createBuffer(that,size);}/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/Buffer.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding);};function allocUnsafe(that,size){assertSize(size);that=createBuffer(that,size<0?0:checked(size)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<size;++i){that[i]=0;}}return that;}/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */Buffer.allocUnsafe=function(size){return allocUnsafe(null,size);};/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size);};function fromString(that,string,encoding){if(typeof encoding!=='string'||encoding===''){encoding='utf8';}if(!Buffer.isEncoding(encoding)){throw new TypeError('"encoding" must be a valid string encoding');}var length=byteLength(string,encoding)|0;that=createBuffer(that,length);var actual=that.write(string,encoding);if(actual!==length){// Writing a hex string, for example, that contains invalid characters will
// cause everything after the first invalid character to be ignored. (e.g.
// 'abxxcd' will be treated as 'ab')
that=that.slice(0,actual);}return that;}function fromArrayLike(that,array){var length=array.length<0?0:checked(array.length)|0;that=createBuffer(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255;}return that;}function fromArrayBuffer(that,array,byteOffset,length){array.byteLength;// this throws if `array` is not a valid ArrayBuffer
if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('\'offset\' is out of bounds');}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('\'length\' is out of bounds');}if(byteOffset===undefined&&length===undefined){array=new Uint8Array(array);}else if(length===undefined){array=new Uint8Array(array,byteOffset);}else{array=new Uint8Array(array,byteOffset,length);}if(Buffer.TYPED_ARRAY_SUPPORT){// Return an augmented `Uint8Array` instance, for best performance
that=array;that.__proto__=Buffer.prototype;}else{// Fallback: Return an object instance of the Buffer class
that=fromArrayLike(that,array);}return that;}function fromObject(that,obj){if(internalIsBuffer(obj)){var len=checked(obj.length)|0;that=createBuffer(that,len);if(that.length===0){return that;}obj.copy(that,0,0,len);return that;}if(obj){if(typeof ArrayBuffer!=='undefined'&&obj.buffer instanceof ArrayBuffer||'length'in obj){if(typeof obj.length!=='number'||isnan(obj.length)){return createBuffer(that,0);}return fromArrayLike(that,obj);}if(obj.type==='Buffer'&&isArray(obj.data)){return fromArrayLike(that,obj.data);}}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');}function checked(length){// Note: cannot use `length < kMaxLength()` here because that fails when
// length is NaN (which is otherwise coerced to zero.)
if(length>=kMaxLength()){throw new RangeError('Attempt to allocate Buffer larger than maximum '+'size: 0x'+kMaxLength().toString(16)+' bytes');}return length|0;}function SlowBuffer(length){if(+length!=length){// eslint-disable-line eqeqeq
length=0;}return Buffer.alloc(+length);}Buffer.isBuffer=isBuffer;function internalIsBuffer(b){return!!(b!=null&&b._isBuffer);}Buffer.compare=function compare(a,b){if(!internalIsBuffer(a)||!internalIsBuffer(b)){throw new TypeError('Arguments must be Buffers');}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break;}}if(x<y)return-1;if(y<x)return 1;return 0;};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return true;default:return false;}};Buffer.concat=function concat(list,length){if(!isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers');}if(list.length===0){return Buffer.alloc(0);}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length;}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!internalIsBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers');}buf.copy(buffer,pos);pos+=buf.length;}return buffer;};function byteLength(string,encoding){if(internalIsBuffer(string)){return string.length;}if(typeof ArrayBuffer!=='undefined'&&typeof ArrayBuffer.isView==='function'&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer)){return string.byteLength;}if(typeof string!=='string'){string=''+string;}var len=string.length;if(len===0)return 0;// Use a for loop to avoid recursion
var loweredCase=false;for(;;){switch(encoding){case'ascii':case'latin1':case'binary':return len;case'utf8':case'utf-8':case undefined:return utf8ToBytes(string).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return len*2;case'hex':return len>>>1;case'base64':return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;// assume utf8
encoding=(''+encoding).toLowerCase();loweredCase=true;}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;// No need to verify that "this.length <= MAX_UINT32" since it's a read-only
// property of a typed array.
// This behaves neither like String nor Uint8Array in that we set start/end
// to their upper/lower bounds if the value passed is out of range.
// undefined is handled specially as per ECMA-262 6th Edition,
// Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
if(start===undefined||start<0){start=0;}// Return early if start > this.length. Done here to prevent potential uint32
// coercion fail below.
if(start>this.length){return'';}if(end===undefined||end>this.length){end=this.length;}if(end<=0){return'';}// Force coersion to uint32. This will also coerce falsey/NaN values to 0.
end>>>=0;start>>>=0;if(end<=start){return'';}if(!encoding)encoding='utf8';while(true){switch(encoding){case'hex':return hexSlice(this,start,end);case'utf8':case'utf-8':return utf8Slice(this,start,end);case'ascii':return asciiSlice(this,start,end);case'latin1':case'binary':return latin1Slice(this,start,end);case'base64':return base64Slice(this,start,end);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(encoding+'').toLowerCase();loweredCase=true;}}}// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i;}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError('Buffer size must be a multiple of 16-bits');}for(var i=0;i<len;i+=2){swap(this,i,i+1);}return this;};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError('Buffer size must be a multiple of 32-bits');}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2);}return this;};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError('Buffer size must be a multiple of 64-bits');}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4);}return this;};Buffer.prototype.toString=function toString(){var length=this.length|0;if(length===0)return'';if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments);};Buffer.prototype.equals=function equals(b){if(!internalIsBuffer(b))throw new TypeError('Argument must be a Buffer');if(this===b)return true;return Buffer.compare(this,b)===0;};Buffer.prototype.inspect=function inspect(){var str='';var max=INSPECT_MAX_BYTES;if(this.length>0){str=this.toString('hex',0,max).match(/.{2}/g).join(' ');if(this.length>max)str+=' ... ';}return'<Buffer '+str+'>';};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!internalIsBuffer(target)){throw new TypeError('Argument must be a Buffer');}if(start===undefined){start=0;}if(end===undefined){end=target?target.length:0;}if(thisStart===undefined){thisStart=0;}if(thisEnd===undefined){thisEnd=this.length;}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError('out of range index');}if(thisStart>=thisEnd&&start>=end){return 0;}if(thisStart>=thisEnd){return-1;}if(start>=end){return 1;}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break;}}if(x<y)return-1;if(y<x)return 1;return 0;};// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){// Empty buffer means no match
if(buffer.length===0)return-1;// Normalize byteOffset
if(typeof byteOffset==='string'){encoding=byteOffset;byteOffset=0;}else if(byteOffset>0x7fffffff){byteOffset=0x7fffffff;}else if(byteOffset<-0x80000000){byteOffset=-0x80000000;}byteOffset=+byteOffset;// Coerce to Number.
if(isNaN(byteOffset)){// byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
byteOffset=dir?0:buffer.length-1;}// Normalize byteOffset: negative offsets start from the end of the buffer
if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1;}else if(byteOffset<0){if(dir)byteOffset=0;else return-1;}// Normalize val
if(typeof val==='string'){val=Buffer.from(val,encoding);}// Finally, search either indexOf (if dir is true) or lastIndexOf
if(internalIsBuffer(val)){// Special case: looking for empty string/buffer always fails
if(val.length===0){return-1;}return arrayIndexOf(buffer,val,byteOffset,encoding,dir);}else if(typeof val==='number'){val=val&0xFF;// Search for a byte value [0-255]
if(Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==='function'){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset);}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset);}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir);}throw new TypeError('val must be string, number or Buffer');}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==='ucs2'||encoding==='ucs-2'||encoding==='utf16le'||encoding==='utf-16le'){if(arr.length<2||val.length<2){return-1;}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2;}}function read(buf,i){if(indexSize===1){return buf[i];}else{return buf.readUInt16BE(i*indexSize);}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize;}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1;}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break;}}if(found)return i;}}return-1;}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1;};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true);};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false);};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining;}else{length=Number(length);if(length>remaining){length=remaining;}}// must be an even number of digits
var strLen=string.length;if(strLen%2!==0)throw new TypeError('Invalid hex string');if(length>strLen/2){length=strLen/2;}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed;}return i;}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length);}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length);}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length);}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length);}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length);}Buffer.prototype.write=function write(string,offset,length,encoding){// Buffer#write(string)
if(offset===undefined){encoding='utf8';length=this.length;offset=0;// Buffer#write(string, encoding)
}else if(length===undefined&&typeof offset==='string'){encoding=offset;length=this.length;offset=0;// Buffer#write(string, offset[, length][, encoding])
}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding='utf8';}else{encoding=length;length=undefined;}// legacy write(string, encoding, offset, length) - remove in v0.13
}else{throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError('Attempt to write outside buffer bounds');}if(!encoding)encoding='utf8';var loweredCase=false;for(;;){switch(encoding){case'hex':return hexWrite(this,string,offset,length);case'utf8':case'utf-8':return utf8Write(this,string,offset,length);case'ascii':return asciiWrite(this,string,offset,length);case'latin1':case'binary':return latin1Write(this,string,offset,length);case'base64':// Warning: maxLength not taken into account in base64Write
return base64Write(this,string,offset,length);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(''+encoding).toLowerCase();loweredCase=true;}}};Buffer.prototype.toJSON=function toJSON(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)};};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return fromByteArray(buf);}else{return fromByteArray(buf.slice(start,end));}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>0xEF?4:firstByte>0xDF?3:firstByte>0xBF?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<0x80){codePoint=firstByte;}break;case 2:secondByte=buf[i+1];if((secondByte&0xC0)===0x80){tempCodePoint=(firstByte&0x1F)<<0x6|secondByte&0x3F;if(tempCodePoint>0x7F){codePoint=tempCodePoint;}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&0xC0)===0x80&&(thirdByte&0xC0)===0x80){tempCodePoint=(firstByte&0xF)<<0xC|(secondByte&0x3F)<<0x6|thirdByte&0x3F;if(tempCodePoint>0x7FF&&(tempCodePoint<0xD800||tempCodePoint>0xDFFF)){codePoint=tempCodePoint;}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&0xC0)===0x80&&(thirdByte&0xC0)===0x80&&(fourthByte&0xC0)===0x80){tempCodePoint=(firstByte&0xF)<<0x12|(secondByte&0x3F)<<0xC|(thirdByte&0x3F)<<0x6|fourthByte&0x3F;if(tempCodePoint>0xFFFF&&tempCodePoint<0x110000){codePoint=tempCodePoint;}}}}if(codePoint===null){// we did not generate a valid codePoint so insert a
// replacement char (U+FFFD) and advance only 1 byte
codePoint=0xFFFD;bytesPerSequence=1;}else if(codePoint>0xFFFF){// encode to utf16 (surrogate pair dance)
codePoint-=0x10000;res.push(codePoint>>>10&0x3FF|0xD800);codePoint=0xDC00|codePoint&0x3FF;}res.push(codePoint);i+=bytesPerSequence;}return decodeCodePointsArray(res);}// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH=0x1000;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints);// avoid extra slice()
}// Decode in chunks to avoid "call stack size exceeded".
var res='';var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));}return res;}function asciiSlice(buf,start,end){var ret='';end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&0x7F);}return ret;}function latin1Slice(buf,start,end){var ret='';end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]);}return ret;}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out='';for(var i=start;i<end;++i){out+=toHex(buf[i]);}return out;}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res='';for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256);}return res;}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0;}else if(start>len){start=len;}if(end<0){end+=len;if(end<0)end=0;}else if(end>len){end=len;}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype;}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;++i){newBuf[i]=this[i+start];}}return newBuf;};/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError('offset is not uint');if(offset+ext>length)throw new RangeError('Trying to access beyond buffer length');}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul;}return val;};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length);}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=0x100)){val+=this[offset+--byteLength]*mul;}return val;};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset];};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8;};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1];};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*0x1000000;};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*0x1000000+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3]);};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul;}mul*=0x80;if(val>=mul)val-=Math.pow(2,8*byteLength);return val;};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=0x100)){val+=this[offset+--i]*mul;}mul*=0x80;if(val>=mul)val-=Math.pow(2,8*byteLength);return val;};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&0x80))return this[offset];return(0xff-this[offset]+1)*-1;};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&0x8000?val|0xFFFF0000:val;};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&0x8000?val|0xFFFF0000:val;};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24;};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3];};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return read(this,offset,true,23,4);};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return read(this,offset,false,23,4);};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return read(this,offset,true,52,8);};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return read(this,offset,false,52,8);};function checkInt(buf,value,offset,ext,max,min){if(!internalIsBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError('Index out of range');}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0);}var mul=1;var i=0;this[offset]=value&0xFF;while(++i<byteLength&&(mul*=0x100)){this[offset+i]=value/mul&0xFF;}return offset+byteLength;};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0);}var i=byteLength-1;var mul=1;this[offset+i]=value&0xFF;while(--i>=0&&(mul*=0x100)){this[offset+i]=value/mul&0xFF;}return offset+byteLength;};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,0xff,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&0xff;return offset+1;};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=0xffff+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i){buf[offset+i]=(value&0xff<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8;}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,0xffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&0xff;this[offset+1]=value>>>8;}else{objectWriteUInt16(this,value,offset,true);}return offset+2;};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,0xffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&0xff;}else{objectWriteUInt16(this,value,offset,false);}return offset+2;};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=0xffffffff+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&0xff;}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&0xff;}else{objectWriteUInt32(this,value,offset,true);}return offset+4;};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&0xff;}else{objectWriteUInt32(this,value,offset,false);}return offset+4;};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit);}var i=0;var mul=1;var sub=0;this[offset]=value&0xFF;while(++i<byteLength&&(mul*=0x100)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1;}this[offset+i]=(value/mul>>0)-sub&0xFF;}return offset+byteLength;};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit);}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&0xFF;while(--i>=0&&(mul*=0x100)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1;}this[offset+i]=(value/mul>>0)-sub&0xFF;}return offset+byteLength;};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,0x7f,-0x80);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=0xff+value+1;this[offset]=value&0xff;return offset+1;};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&0xff;this[offset+1]=value>>>8;}else{objectWriteUInt16(this,value,offset,true);}return offset+2;};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&0xff;}else{objectWriteUInt16(this,value,offset,false);}return offset+2;};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&0xff;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;}else{objectWriteUInt32(this,value,offset,true);}return offset+4;};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000);if(value<0)value=0xffffffff+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&0xff;}else{objectWriteUInt32(this,value,offset,false);}return offset+4;};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError('Index out of range');if(offset<0)throw new RangeError('Index out of range');}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4);}write(buf,value,offset,littleEndian,23,4);return offset+4;}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert);};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert);};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8);}write(buf,value,offset,littleEndian,52,8);return offset+8;}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert);};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert);};// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;// Copy 0 bytes; we're done
if(end===start)return 0;if(target.length===0||this.length===0)return 0;// Fatal error conditions
if(targetStart<0){throw new RangeError('targetStart out of bounds');}if(start<0||start>=this.length)throw new RangeError('sourceStart out of bounds');if(end<0)throw new RangeError('sourceEnd out of bounds');// Are we oob?
if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start;}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){// descending copy from end
for(i=len-1;i>=0;--i){target[i+targetStart]=this[i+start];}}else if(len<1000||!Buffer.TYPED_ARRAY_SUPPORT){// ascending copy from start
for(i=0;i<len;++i){target[i+targetStart]=this[i+start];}}else{Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);}return len;};// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill=function fill(val,start,end,encoding){// Handle string cases:
if(typeof val==='string'){if(typeof start==='string'){encoding=start;start=0;end=this.length;}else if(typeof end==='string'){encoding=end;end=this.length;}if(val.length===1){var code=val.charCodeAt(0);if(code<256){val=code;}}if(encoding!==undefined&&typeof encoding!=='string'){throw new TypeError('encoding must be a string');}if(typeof encoding==='string'&&!Buffer.isEncoding(encoding)){throw new TypeError('Unknown encoding: '+encoding);}}else if(typeof val==='number'){val=val&255;}// Invalid ranges are not set to a default, so can range check early.
if(start<0||this.length<start||this.length<end){throw new RangeError('Out of range index');}if(end<=start){return this;}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==='number'){for(i=start;i<end;++i){this[i]=val;}}else{var bytes=internalIsBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString());var len=bytes.length;for(i=0;i<end-start;++i){this[i+start]=bytes[i%len];}}return this;};// HELPER FUNCTIONS
// ================
var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){// Node strips out invalid characters like \n and \t from the string, base64-js does not
str=stringtrim(str).replace(INVALID_BASE64_RE,'');// Node converts strings with length < 2 to ''
if(str.length<2)return'';// Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
while(str.length%4!==0){str=str+'=';}return str;}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,'');}function toHex(n){if(n<16)return'0'+n.toString(16);return n.toString(16);}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);// is surrogate component
if(codePoint>0xD7FF&&codePoint<0xE000){// last char was a lead
if(!leadSurrogate){// no lead yet
if(codePoint>0xDBFF){// unexpected trail
if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);continue;}else if(i+1===length){// unpaired lead
if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);continue;}// valid lead
leadSurrogate=codePoint;continue;}// 2 leads in a row
if(codePoint<0xDC00){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);leadSurrogate=codePoint;continue;}// valid surrogate pair
codePoint=(leadSurrogate-0xD800<<10|codePoint-0xDC00)+0x10000;}else if(leadSurrogate){// valid bmp char, but last char was a lead
if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);}leadSurrogate=null;// encode utf8
if(codePoint<0x80){if((units-=1)<0)break;bytes.push(codePoint);}else if(codePoint<0x800){if((units-=2)<0)break;bytes.push(codePoint>>0x6|0xC0,codePoint&0x3F|0x80);}else if(codePoint<0x10000){if((units-=3)<0)break;bytes.push(codePoint>>0xC|0xE0,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80);}else if(codePoint<0x110000){if((units-=4)<0)break;bytes.push(codePoint>>0x12|0xF0,codePoint>>0xC&0x3F|0x80,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80);}else{throw new Error('Invalid code point');}}return bytes;}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){// Node's code seems to be doing this and not & 0x7F..
byteArray.push(str.charCodeAt(i)&0xFF);}return byteArray;}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi);}return byteArray;}function base64ToBytes(str){return toByteArray(base64clean(str));}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i];}return i;}function isnan(val){return val!==val;// eslint-disable-line no-self-compare
}// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence
// The _isBuffer check is for Safari 5-7 support, because it's missing
// Object.prototype.constructor. Remove this eventually
function isBuffer(obj){return obj!=null&&(!!obj._isBuffer||isFastBuffer(obj)||isSlowBuffer(obj));}function isFastBuffer(obj){return!!obj.constructor&&typeof obj.constructor.isBuffer==='function'&&obj.constructor.isBuffer(obj);}// For Node v0.10 support. Remove this eventually.
function isSlowBuffer(obj){return typeof obj.readFloatLE==='function'&&typeof obj.slice==='function'&&isFastBuffer(obj.slice(0,0));}var _polyfillNode_buffer=/*#__PURE__*/Object.freeze({__proto__:null,Buffer:Buffer,INSPECT_MAX_BYTES:INSPECT_MAX_BYTES,SlowBuffer:SlowBuffer,isBuffer:isBuffer,kMaxLength:_kMaxLength});// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return true;default:return false;}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding)){throw new Error('Unknown encoding: '+encoding);}}// StringDecoder provides an interface for efficiently splitting a series of
// buffers into a series of JS strings without breaking apart multi-byte
// characters. CESU-8 is handled as part of the UTF-8 encoding.
//
// @TODO Handling all encodings inside a single object makes it very difficult
// to reason about this code, so it should be split up in the future.
// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code
// points as used by CESU-8.
function StringDecoder(encoding){this.encoding=(encoding||'utf8').toLowerCase().replace(/[-_]/,'');assertEncoding(encoding);switch(this.encoding){case'utf8':// CESU-8 represents each of Surrogate Pair by 3-bytes
this.surrogateSize=3;break;case'ucs2':case'utf16le':// UTF-16 represents each of Surrogate Pair by 2-bytes
this.surrogateSize=2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case'base64':// Base-64 stores 3 bytes in 4 chars, and pads the remainder.
this.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return;}// Enough space to store all bytes of a single character. UTF-8 needs 4
// bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).
this.charBuffer=new Buffer(6);// Number of bytes received for the current incomplete multi-byte character.
this.charReceived=0;// Number of bytes expected for the current incomplete multi-byte character.
this.charLength=0;}// write decodes the given buffer and returns it as JS string that is
// guaranteed to not contain any partial multi-byte characters. Any partial
// character found at the end of the buffer is buffered up, and will be
// returned when calling write again with the remaining bytes.
//
// Note: Converting a Buffer containing an orphan surrogate to a String
// currently works, but converting a String to a Buffer (via `new Buffer`, or
// Buffer#write) will replace incomplete surrogates with the unicode
// replacement character. See https://codereview.chromium.org/121173009/ .
StringDecoder.prototype.write=function(buffer){var charStr='';// if our last write ended with an incomplete multibyte character
while(this.charLength){// determine how many remaining bytes this buffer has to offer for this char
var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;// add the new bytes to the char buffer
buffer.copy(this.charBuffer,this.charReceived,0,available);this.charReceived+=available;if(this.charReceived<this.charLength){// still not enough chars in this buffer? wait for more ...
return'';}// remove bytes belonging to the current character from the buffer
buffer=buffer.slice(available,buffer.length);// get the character that was split
charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);// CESU-8: lead surrogate (D800-DBFF) is also the incomplete character
var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=0xD800&&charCode<=0xDBFF){this.charLength+=this.surrogateSize;charStr='';continue;}this.charReceived=this.charLength=0;// if there are no more bytes in this buffer, just emit our char
if(buffer.length===0){return charStr;}break;}// determine and set charLength / charReceived
this.detectIncompleteChar(buffer);var end=buffer.length;if(this.charLength){// buffer the incomplete character bytes we got
buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end);end-=this.charReceived;}charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);// CESU-8: lead surrogate (D800-DBFF) is also the incomplete character
if(charCode>=0xD800&&charCode<=0xDBFF){var size=this.surrogateSize;this.charLength+=size;this.charReceived+=size;this.charBuffer.copy(this.charBuffer,size,0,size);buffer.copy(this.charBuffer,0,0,size);return charStr.substring(0,end);}// or just emit the charStr
return charStr;};// detectIncompleteChar determines if there is an incomplete UTF-8 character at
// the end of the given buffer. If so, it sets this.charLength to the byte
// length that character, and sets this.charReceived to the number of bytes
// that are available for this character.
StringDecoder.prototype.detectIncompleteChar=function(buffer){// determine how many bytes we have to check at the end of this buffer
var i=buffer.length>=3?3:buffer.length;// Figure out if one of the last i bytes of our buffer announces an
// incomplete char.
for(;i>0;i--){var c=buffer[buffer.length-i];// See http://en.wikipedia.org/wiki/UTF-8#Description
// 110XXXXX
if(i==1&&c>>5==0x06){this.charLength=2;break;}// 1110XXXX
if(i<=2&&c>>4==0x0E){this.charLength=3;break;}// 11110XXX
if(i<=3&&c>>3==0x1E){this.charLength=4;break;}}this.charReceived=i;};StringDecoder.prototype.end=function(buffer){var res='';if(buffer&&buffer.length)res=this.write(buffer);if(this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc);}return res;};function passThroughWrite(buffer){return buffer.toString(this.encoding);}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2;this.charLength=this.charReceived?2:0;}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3;this.charLength=this.charReceived?3:0;}var _polyfillNode_string_decoder=/*#__PURE__*/Object.freeze({__proto__:null,StringDecoder:StringDecoder});var require$$2=/*@__PURE__*/getAugmentedNamespace(_polyfillNode_string_decoder);var require$$3=/*@__PURE__*/getAugmentedNamespace(_polyfillNode_buffer);var WritableStream_1;var hasRequiredWritableStream;function requireWritableStream(){if(hasRequiredWritableStream)return WritableStream_1;hasRequiredWritableStream=1;WritableStream_1=Stream;var Parser=Parser_1;var WritableStream=require$$1.Writable;var StringDecoder=require$$2.StringDecoder;var Buffer=require$$3.Buffer;function Stream(cbs,options){var parser=this._parser=new Parser(cbs,options);var decoder=this._decoder=new StringDecoder();WritableStream.call(this,{decodeStrings:false});this.once("finish",function(){parser.end(decoder.end());});}require$$1$3(Stream,WritableStream);Stream.prototype._write=function(chunk,encoding,cb){if(chunk instanceof Buffer)chunk=this._decoder.write(chunk);this._parser.write(chunk);cb();};return WritableStream_1;}var Stream_1;var hasRequiredStream;function requireStream(){if(hasRequiredStream)return Stream_1;hasRequiredStream=1;Stream_1=Stream;var Parser=requireWritableStream();function Stream(options){Parser.call(this,new Cbs(this),options);}require$$1$3(Stream,Parser);Stream.prototype.readable=true;function Cbs(scope){this.scope=scope;}var EVENTS=requireLib().EVENTS;Object.keys(EVENTS).forEach(function(name){if(EVENTS[name]===0){Cbs.prototype["on"+name]=function(){this.scope.emit(name);};}else if(EVENTS[name]===1){Cbs.prototype["on"+name]=function(a){this.scope.emit(name,a);};}else if(EVENTS[name]===2){Cbs.prototype["on"+name]=function(a,b){this.scope.emit(name,a,b);};}else{throw Error("wrong number of arguments!");}});return Stream_1;}var ProxyHandler_1;var hasRequiredProxyHandler;function requireProxyHandler(){if(hasRequiredProxyHandler)return ProxyHandler_1;hasRequiredProxyHandler=1;ProxyHandler_1=ProxyHandler;function ProxyHandler(cbs){this._cbs=cbs||{};}var EVENTS=requireLib().EVENTS;Object.keys(EVENTS).forEach(function(name){if(EVENTS[name]===0){name="on"+name;ProxyHandler.prototype[name]=function(){if(this._cbs[name])this._cbs[name]();};}else if(EVENTS[name]===1){name="on"+name;ProxyHandler.prototype[name]=function(a){if(this._cbs[name])this._cbs[name](a);};}else if(EVENTS[name]===2){name="on"+name;ProxyHandler.prototype[name]=function(a,b){if(this._cbs[name])this._cbs[name](a,b);};}else{throw Error("wrong number of arguments");}});return ProxyHandler_1;}var CollectingHandler_1;var hasRequiredCollectingHandler;function requireCollectingHandler(){if(hasRequiredCollectingHandler)return CollectingHandler_1;hasRequiredCollectingHandler=1;CollectingHandler_1=CollectingHandler;function CollectingHandler(cbs){this._cbs=cbs||{};this.events=[];}var EVENTS=requireLib().EVENTS;Object.keys(EVENTS).forEach(function(name){if(EVENTS[name]===0){name="on"+name;CollectingHandler.prototype[name]=function(){this.events.push([name]);if(this._cbs[name])this._cbs[name]();};}else if(EVENTS[name]===1){name="on"+name;CollectingHandler.prototype[name]=function(a){this.events.push([name,a]);if(this._cbs[name])this._cbs[name](a);};}else if(EVENTS[name]===2){name="on"+name;CollectingHandler.prototype[name]=function(a,b){this.events.push([name,a,b]);if(this._cbs[name])this._cbs[name](a,b);};}else{throw Error("wrong number of arguments");}});CollectingHandler.prototype.onreset=function(){this.events=[];if(this._cbs.onreset)this._cbs.onreset();};CollectingHandler.prototype.restart=function(){if(this._cbs.onreset)this._cbs.onreset();for(var i=0,len=this.events.length;i<len;i++){if(this._cbs[this.events[i][0]]){var num=this.events[i].length;if(num===1){this._cbs[this.events[i][0]]();}else if(num===2){this._cbs[this.events[i][0]](this.events[i][1]);}else{this._cbs[this.events[i][0]](this.events[i][1],this.events[i][2]);}}}};return CollectingHandler_1;}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib$2.exports;hasRequiredLib=1;(function(module){var Parser=Parser_1;var DomHandler=domhandler;function defineProp(name,value){delete module.exports[name];module.exports[name]=value;return value;}module.exports={Parser:Parser,Tokenizer:Tokenizer_1,ElementType:domelementtype,DomHandler:DomHandler,get FeedHandler(){return defineProp("FeedHandler",requireFeedHandler());},get Stream(){return defineProp("Stream",requireStream());},get WritableStream(){return defineProp("WritableStream",requireWritableStream());},get ProxyHandler(){return defineProp("ProxyHandler",requireProxyHandler());},get DomUtils(){return defineProp("DomUtils",requireDomutils());},get CollectingHandler(){return defineProp("CollectingHandler",requireCollectingHandler());},// For legacy support
DefaultHandler:DomHandler,get RssHandler(){return defineProp("RssHandler",this.FeedHandler);},//helper methods
parseDOM:function parseDOM(data,options){var handler=new DomHandler(options);new Parser(handler,options).end(data);return handler.dom;},parseFeed:function parseFeed(feed,options){var handler=new module.exports.FeedHandler(options);new Parser(handler,options).end(feed);return handler.dom;},createDomStream:function createDomStream(cb,options,elementCb){var handler=new DomHandler(cb,options,elementCb);return new Parser(handler,options);},// List of all events that the parser emits
EVENTS:{/* Format: eventname: number of arguments */attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0}};})(lib$2);return lib$2.exports;}// Store markers outside of the function scope,
// not to recreate them on every call
var entities={'amp':'&','apos':'\'','lt':'<','gt':'>','quot':'"','nbsp':'\xa0'};var entityPattern=/&([a-z]+);/ig;var decodeHtml$1=function decodeHTMLEntities(text){// A single replace pass with a static RegExp is faster than a loop
return text.replace(entityPattern,function(match,entity){entity=entity.toLowerCase();if(entities.hasOwnProperty(entity)){return entities[entity];}// return original string if there is no matching entity (no replace)
return match;});};var html$2=requireLib();var decodeHtml=decodeHtml$1;/**
 * Convert a part of a mutation DOM to a mutation VM object, recursively.
 * @param {object} dom DOM object for mutation tag.
 * @return {object} Object representing useful parts of this mutation.
 */var mutatorTagToObject=function mutatorTagToObject(dom){var obj=Object.create(null);obj.tagName=dom.name;obj.children=[];for(var prop in dom.attribs){if(prop==='xmlns')continue;obj[prop]=decodeHtml(dom.attribs[prop]);// Note: the capitalization of block info in the following lines is important.
// The lowercase is read in from xml which normalizes case. The VM uses camel case everywhere else.
if(prop==='blockinfo'){obj.blockInfo=JSON.parse(obj.blockinfo);delete obj.blockinfo;}}for(var i=0;i<dom.children.length;i++){obj.children.push(mutatorTagToObject(dom.children[i]));}return obj;};/**
 * Adapter between mutator XML or DOM and block representation which can be
 * used by the Scratch runtime.
 * @param {(object|string)} mutation Mutation XML string or DOM.
 * @return {object} Object representing the mutation.
 */var mutationAdpater=function mutationAdpater(mutation){var mutationParsed;// Check if the mutation is already parsed; if not, parse it.
if(_typeof(mutation)==='object'){mutationParsed=mutation;}else{mutationParsed=html$2.parseDOM(mutation)[0];}return mutatorTagToObject(mutationParsed);};var mutationAdapter$1=mutationAdpater;/**
 * @fileoverview UID generator, from Blockly.
 *//**
 * Legal characters for the unique ID.
 * Should be all on a US keyboard.  No XML special characters or control codes.
 * Removed $ due to issue 251.
 * @private
 */var soup_='!#%()*+,-./:;=?@[]^_`{|}~'+'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';/**
 * Generate a unique ID, from Blockly.  This should be globally unique.
 * 87 characters ^ 20 length > 128 bits (better than a UUID).
 * @return {string} A globally unique ID string.
 */var uid$4=function uid(){var length=20;var soupLength=soup_.length;var id=[];for(var i=0;i<length;i++){id[i]=soup_.charAt(Math.random()*soupLength);}return id.join('');};var uid_1=uid$4;var mutationAdapter=mutationAdapter$1;var html$1=requireLib();var uid$3=uid_1;/**
 * Convert and an individual block DOM to the representation tree.
 * Based on Blockly's `domToBlockHeadless_`.
 * @param {Element} blockDOM DOM tree for an individual block.
 * @param {object} blocks Collection of blocks to add to.
 * @param {boolean} isTopBlock Whether blocks at this level are "top blocks."
 * @param {?string} parent Parent block ID.
 * @return {undefined}
 */var domToBlock=function domToBlock(blockDOM,blocks,isTopBlock,parent){if(!blockDOM.attribs.id){blockDOM.attribs.id=uid$3();}// Block skeleton.
var block={id:blockDOM.attribs.id,// Block ID
opcode:blockDOM.attribs.type,// For execution, "event_whengreenflag".
inputs:{},// Inputs to this block and the blocks they point to.
fields:{},// Fields on this block and their values.
next:null,// Next block in the stack, if one exists.
topLevel:isTopBlock,// If this block starts a stack.
parent:parent,// Parent block ID, if available.
shadow:blockDOM.name==='shadow',// If this represents a shadow/slot.
x:blockDOM.attribs.x,// X position of script, if top-level.
y:blockDOM.attribs.y// Y position of script, if top-level.
};// Add the block to the representation tree.
blocks[block.id]=block;// Process XML children and find enclosed blocks, fields, etc.
for(var i=0;i<blockDOM.children.length;i++){var xmlChild=blockDOM.children[i];// Enclosed blocks and shadows
var childBlockNode=null;var childShadowNode=null;for(var j=0;j<xmlChild.children.length;j++){var grandChildNode=xmlChild.children[j];if(!grandChildNode.name){// Non-XML tag node.
continue;}var grandChildNodeName=grandChildNode.name.toLowerCase();if(grandChildNodeName==='block'){childBlockNode=grandChildNode;}else if(grandChildNodeName==='shadow'){childShadowNode=grandChildNode;}}// Use shadow block only if there's no real block node.
if(!childBlockNode&&childShadowNode){childBlockNode=childShadowNode;}// Not all Blockly-type blocks are handled here,
// as we won't be using all of them for Scratch.
switch(xmlChild.name.toLowerCase()){case'field':{// Add the field to this block.
var fieldName=xmlChild.attribs.name;// Add id in case it is a variable field
var fieldId=xmlChild.attribs.id;var fieldData='';if(xmlChild.children.length>0&&xmlChild.children[0].data){fieldData=xmlChild.children[0].data;}else{// If the child of the field with a data property
// doesn't exist, set the data to an empty string.
fieldData='';}block.fields[fieldName]={name:fieldName,id:fieldId,value:fieldData};var fieldVarType=xmlChild.attribs.variabletype;if(typeof fieldVarType==='string'){block.fields[fieldName].variableType=fieldVarType;}break;}case'comment':{block.comment=xmlChild.attribs.id;break;}case'value':case'statement':{// Recursively generate block structure for input block.
domToBlock(childBlockNode,blocks,false,block.id);if(childShadowNode&&childBlockNode!==childShadowNode){// Also generate the shadow block.
domToBlock(childShadowNode,blocks,false,block.id);}// Link this block's input to the child block.
var inputName=xmlChild.attribs.name;block.inputs[inputName]={name:inputName,block:childBlockNode.attribs.id,shadow:childShadowNode?childShadowNode.attribs.id:null};break;}case'next':{if(!childBlockNode||!childBlockNode.attribs){// Invalid child block.
continue;}// Recursively generate block structure for next block.
domToBlock(childBlockNode,blocks,false,block.id);// Link next block to this block.
block.next=childBlockNode.attribs.id;break;}case'mutation':{block.mutation=mutationAdapter(xmlChild);break;}}}};/**
 * Convert outer blocks DOM from a Blockly CREATE event
 * to a usable form for the Scratch runtime.
 * This structure is based on Blockly xml.js:`domToWorkspace` and `domToBlock`.
 * @param {Element} blocksDOM DOM tree for this event.
 * @return {Array.<object>} Usable list of blocks from this CREATE event.
 */var domToBlocks=function domToBlocks(blocksDOM){// At this level, there could be multiple blocks adjacent in the DOM tree.
var blocks={};for(var i=0;i<blocksDOM.length;i++){var block=blocksDOM[i];if(!block.name||!block.attribs){continue;}var tagName=block.name.toLowerCase();if(tagName==='block'||tagName==='shadow'){domToBlock(block,blocks,true,null);}}// Flatten blocks object into a list.
var blocksList=[];for(var b in blocks){if(!Object.prototype.hasOwnProperty.call(blocks,b))continue;blocksList.push(blocks[b]);}return blocksList;};/**
 * Adapter between block creation events and block representation which can be
 * used by the Scratch runtime.
 * @param {object} e `Blockly.events.create` or `Blockly.events.endDrag`
 * @return {Array.<object>} List of blocks from this CREATE event.
 */var adapter=function adapter(e){// Validate input
if(_typeof(e)!=='object')return;if(_typeof(e.xml)!=='object')return;return domToBlocks(html$1.parseDOM(e.xml.outerHTML,{decodeEntities:true}));};var adapter_1=adapter;var log$1=log$3;/**
 * Escape a string to be safe to use in XML content.
 * CC-BY-SA: hgoebl
 * https://stackoverflow.com/questions/7918868/
 * how-to-escape-xml-entities-in-javascript
 * @param {!string | !Array.<string>} unsafe Unsafe string.
 * @return {string} XML-escaped string, for use within an XML tag.
 */var xmlEscape$2=function xmlEscape(unsafe){if(typeof unsafe!=='string'){if(Array.isArray(unsafe)){// This happens when we have hacked blocks from 2.0
// See #1030
unsafe=String(unsafe);}else{log$1.error('Unexpected input recieved in replaceUnsafeChars');return unsafe;}}return unsafe.replace(/[<>&'"]/g,function(c){switch(c){case'<':return'&lt;';case'>':return'&gt;';case'&':return'&amp;';case'\'':return'&apos;';case'"':return'&quot;';}});};var xmlEscape_1=xmlEscape$2;var immutable={exports:{}};(function(module,exports){(function(global,factory){module.exports=factory();})(commonjsGlobal,function(){var SLICE$0=Array.prototype.slice;function createClass(ctor,superClass){if(superClass){ctor.prototype=Object.create(superClass.prototype);}ctor.prototype.constructor=ctor;}function Iterable(value){return isIterable(value)?value:Seq(value);}createClass(KeyedIterable,Iterable);function KeyedIterable(value){return isKeyed(value)?value:KeyedSeq(value);}createClass(IndexedIterable,Iterable);function IndexedIterable(value){return isIndexed(value)?value:IndexedSeq(value);}createClass(SetIterable,Iterable);function SetIterable(value){return isIterable(value)&&!isAssociative(value)?value:SetSeq(value);}function isIterable(maybeIterable){return!!(maybeIterable&&maybeIterable[IS_ITERABLE_SENTINEL]);}function isKeyed(maybeKeyed){return!!(maybeKeyed&&maybeKeyed[IS_KEYED_SENTINEL]);}function isIndexed(maybeIndexed){return!!(maybeIndexed&&maybeIndexed[IS_INDEXED_SENTINEL]);}function isAssociative(maybeAssociative){return isKeyed(maybeAssociative)||isIndexed(maybeAssociative);}function isOrdered(maybeOrdered){return!!(maybeOrdered&&maybeOrdered[IS_ORDERED_SENTINEL]);}Iterable.isIterable=isIterable;Iterable.isKeyed=isKeyed;Iterable.isIndexed=isIndexed;Iterable.isAssociative=isAssociative;Iterable.isOrdered=isOrdered;Iterable.Keyed=KeyedIterable;Iterable.Indexed=IndexedIterable;Iterable.Set=SetIterable;var IS_ITERABLE_SENTINEL='@@__IMMUTABLE_ITERABLE__@@';var IS_KEYED_SENTINEL='@@__IMMUTABLE_KEYED__@@';var IS_INDEXED_SENTINEL='@@__IMMUTABLE_INDEXED__@@';var IS_ORDERED_SENTINEL='@@__IMMUTABLE_ORDERED__@@';// Used for setting prototype methods that IE8 chokes on.
var DELETE='delete';// Constants describing the size of trie nodes.
var SHIFT=5;// Resulted in best performance after ______?
var SIZE=1<<SHIFT;var MASK=SIZE-1;// A consistent shared value representing "not set" which equals nothing other
// than itself, and nothing that could be provided externally.
var NOT_SET={};// Boolean references, Rough equivalent of `bool &`.
var CHANGE_LENGTH={value:false};var DID_ALTER={value:false};function MakeRef(ref){ref.value=false;return ref;}function SetRef(ref){ref&&(ref.value=true);}// A function which returns a value representing an "owner" for transient writes
// to tries. The return value will only ever equal itself, and will not equal
// the return of any subsequent call of this function.
function OwnerID(){}// http://jsperf.com/copy-array-inline
function arrCopy(arr,offset){offset=offset||0;var len=Math.max(0,arr.length-offset);var newArr=new Array(len);for(var ii=0;ii<len;ii++){newArr[ii]=arr[ii+offset];}return newArr;}function ensureSize(iter){if(iter.size===undefined){iter.size=iter.__iterate(returnTrue);}return iter.size;}function wrapIndex(iter,index){// This implements "is array index" which the ECMAString spec defines as:
//
//     A String property name P is an array index if and only if
//     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal
//     to 2^32−1.
//
// http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects
if(typeof index!=='number'){var uint32Index=index>>>0;// N >>> 0 is shorthand for ToUint32
if(''+uint32Index!==index||uint32Index===4294967295){return NaN;}index=uint32Index;}return index<0?ensureSize(iter)+index:index;}function returnTrue(){return true;}function wholeSlice(begin,end,size){return(begin===0||size!==undefined&&begin<=-size)&&(end===undefined||size!==undefined&&end>=size);}function resolveBegin(begin,size){return resolveIndex(begin,size,0);}function resolveEnd(end,size){return resolveIndex(end,size,size);}function resolveIndex(index,size,defaultIndex){return index===undefined?defaultIndex:index<0?Math.max(0,size+index):size===undefined?index:Math.min(size,index);}/* global Symbol */var ITERATE_KEYS=0;var ITERATE_VALUES=1;var ITERATE_ENTRIES=2;var REAL_ITERATOR_SYMBOL=typeof Symbol==='function'&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL='@@iterator';var ITERATOR_SYMBOL=REAL_ITERATOR_SYMBOL||FAUX_ITERATOR_SYMBOL;function Iterator(next){this.next=next;}Iterator.prototype.toString=function(){return'[Iterator]';};Iterator.KEYS=ITERATE_KEYS;Iterator.VALUES=ITERATE_VALUES;Iterator.ENTRIES=ITERATE_ENTRIES;Iterator.prototype.inspect=Iterator.prototype.toSource=function(){return this.toString();};Iterator.prototype[ITERATOR_SYMBOL]=function(){return this;};function iteratorValue(type,k,v,iteratorResult){var value=type===0?k:type===1?v:[k,v];iteratorResult?iteratorResult.value=value:iteratorResult={value:value,done:false};return iteratorResult;}function iteratorDone(){return{value:undefined,done:true};}function hasIterator(maybeIterable){return!!getIteratorFn(maybeIterable);}function isIterator(maybeIterator){return maybeIterator&&typeof maybeIterator.next==='function';}function getIterator(iterable){var iteratorFn=getIteratorFn(iterable);return iteratorFn&&iteratorFn.call(iterable);}function getIteratorFn(iterable){var iteratorFn=iterable&&(REAL_ITERATOR_SYMBOL&&iterable[REAL_ITERATOR_SYMBOL]||iterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==='function'){return iteratorFn;}}function isArrayLike(value){return value&&typeof value.length==='number';}createClass(Seq,Iterable);function Seq(value){return value===null||value===undefined?emptySequence():isIterable(value)?value.toSeq():seqFromValue(value);}Seq.of=function/*...values*/(){return Seq(arguments);};Seq.prototype.toSeq=function(){return this;};Seq.prototype.toString=function(){return this.__toString('Seq {','}');};Seq.prototype.cacheResult=function(){if(!this._cache&&this.__iterateUncached){this._cache=this.entrySeq().toArray();this.size=this._cache.length;}return this;};// abstract __iterateUncached(fn, reverse)
Seq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,true);};// abstract __iteratorUncached(type, reverse)
Seq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,true);};createClass(KeyedSeq,Seq);function KeyedSeq(value){return value===null||value===undefined?emptySequence().toKeyedSeq():isIterable(value)?isKeyed(value)?value.toSeq():value.fromEntrySeq():keyedSeqFromValue(value);}KeyedSeq.prototype.toKeyedSeq=function(){return this;};createClass(IndexedSeq,Seq);function IndexedSeq(value){return value===null||value===undefined?emptySequence():!isIterable(value)?indexedSeqFromValue(value):isKeyed(value)?value.entrySeq():value.toIndexedSeq();}IndexedSeq.of=function/*...values*/(){return IndexedSeq(arguments);};IndexedSeq.prototype.toIndexedSeq=function(){return this;};IndexedSeq.prototype.toString=function(){return this.__toString('Seq [',']');};IndexedSeq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,false);};IndexedSeq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,false);};createClass(SetSeq,Seq);function SetSeq(value){return(value===null||value===undefined?emptySequence():!isIterable(value)?indexedSeqFromValue(value):isKeyed(value)?value.entrySeq():value).toSetSeq();}SetSeq.of=function/*...values*/(){return SetSeq(arguments);};SetSeq.prototype.toSetSeq=function(){return this;};Seq.isSeq=isSeq;Seq.Keyed=KeyedSeq;Seq.Set=SetSeq;Seq.Indexed=IndexedSeq;var IS_SEQ_SENTINEL='@@__IMMUTABLE_SEQ__@@';Seq.prototype[IS_SEQ_SENTINEL]=true;createClass(ArraySeq,IndexedSeq);function ArraySeq(array){this._array=array;this.size=array.length;}ArraySeq.prototype.get=function(index,notSetValue){return this.has(index)?this._array[wrapIndex(this,index)]:notSetValue;};ArraySeq.prototype.__iterate=function(fn,reverse){var array=this._array;var maxIndex=array.length-1;for(var ii=0;ii<=maxIndex;ii++){if(fn(array[reverse?maxIndex-ii:ii],ii,this)===false){return ii+1;}}return ii;};ArraySeq.prototype.__iterator=function(type,reverse){var array=this._array;var maxIndex=array.length-1;var ii=0;return new Iterator(function(){return ii>maxIndex?iteratorDone():iteratorValue(type,ii,array[reverse?maxIndex-ii++:ii++]);});};createClass(ObjectSeq,KeyedSeq);function ObjectSeq(object){var keys=Object.keys(object);this._object=object;this._keys=keys;this.size=keys.length;}ObjectSeq.prototype.get=function(key,notSetValue){if(notSetValue!==undefined&&!this.has(key)){return notSetValue;}return this._object[key];};ObjectSeq.prototype.has=function(key){return this._object.hasOwnProperty(key);};ObjectSeq.prototype.__iterate=function(fn,reverse){var object=this._object;var keys=this._keys;var maxIndex=keys.length-1;for(var ii=0;ii<=maxIndex;ii++){var key=keys[reverse?maxIndex-ii:ii];if(fn(object[key],key,this)===false){return ii+1;}}return ii;};ObjectSeq.prototype.__iterator=function(type,reverse){var object=this._object;var keys=this._keys;var maxIndex=keys.length-1;var ii=0;return new Iterator(function(){var key=keys[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,key,object[key]);});};ObjectSeq.prototype[IS_ORDERED_SENTINEL]=true;createClass(IterableSeq,IndexedSeq);function IterableSeq(iterable){this._iterable=iterable;this.size=iterable.length||iterable.size;}IterableSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse){return this.cacheResult().__iterate(fn,reverse);}var iterable=this._iterable;var iterator=getIterator(iterable);var iterations=0;if(isIterator(iterator)){var step;while(!(step=iterator.next()).done){if(fn(step.value,iterations++,this)===false){break;}}}return iterations;};IterableSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse){return this.cacheResult().__iterator(type,reverse);}var iterable=this._iterable;var iterator=getIterator(iterable);if(!isIterator(iterator)){return new Iterator(iteratorDone);}var iterations=0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value);});};createClass(IteratorSeq,IndexedSeq);function IteratorSeq(iterator){this._iterator=iterator;this._iteratorCache=[];}IteratorSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse){return this.cacheResult().__iterate(fn,reverse);}var iterator=this._iterator;var cache=this._iteratorCache;var iterations=0;while(iterations<cache.length){if(fn(cache[iterations],iterations++,this)===false){return iterations;}}var step;while(!(step=iterator.next()).done){var val=step.value;cache[iterations]=val;if(fn(val,iterations++,this)===false){break;}}return iterations;};IteratorSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse){return this.cacheResult().__iterator(type,reverse);}var iterator=this._iterator;var cache=this._iteratorCache;var iterations=0;return new Iterator(function(){if(iterations>=cache.length){var step=iterator.next();if(step.done){return step;}cache[iterations]=step.value;}return iteratorValue(type,iterations,cache[iterations++]);});};// # pragma Helper functions
function isSeq(maybeSeq){return!!(maybeSeq&&maybeSeq[IS_SEQ_SENTINEL]);}var EMPTY_SEQ;function emptySequence(){return EMPTY_SEQ||(EMPTY_SEQ=new ArraySeq([]));}function keyedSeqFromValue(value){var seq=Array.isArray(value)?new ArraySeq(value).fromEntrySeq():isIterator(value)?new IteratorSeq(value).fromEntrySeq():hasIterator(value)?new IterableSeq(value).fromEntrySeq():_typeof(value)==='object'?new ObjectSeq(value):undefined;if(!seq){throw new TypeError('Expected Array or iterable object of [k, v] entries, '+'or keyed object: '+value);}return seq;}function indexedSeqFromValue(value){var seq=maybeIndexedSeqFromValue(value);if(!seq){throw new TypeError('Expected Array or iterable object of values: '+value);}return seq;}function seqFromValue(value){var seq=maybeIndexedSeqFromValue(value)||_typeof(value)==='object'&&new ObjectSeq(value);if(!seq){throw new TypeError('Expected Array or iterable object of values, or keyed object: '+value);}return seq;}function maybeIndexedSeqFromValue(value){return isArrayLike(value)?new ArraySeq(value):isIterator(value)?new IteratorSeq(value):hasIterator(value)?new IterableSeq(value):undefined;}function seqIterate(seq,fn,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1;for(var ii=0;ii<=maxIndex;ii++){var entry=cache[reverse?maxIndex-ii:ii];if(fn(entry[1],useKeys?entry[0]:ii,seq)===false){return ii+1;}}return ii;}return seq.__iterateUncached(fn,reverse);}function seqIterator(seq,type,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1;var ii=0;return new Iterator(function(){var entry=cache[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,useKeys?entry[0]:ii-1,entry[1]);});}return seq.__iteratorUncached(type,reverse);}function fromJS(json,converter){return converter?fromJSWith(converter,json,'',{'':json}):fromJSDefault(json);}function fromJSWith(converter,json,key,parentJSON){if(Array.isArray(json)){return converter.call(parentJSON,key,IndexedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json);}));}if(isPlainObj(json)){return converter.call(parentJSON,key,KeyedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json);}));}return json;}function fromJSDefault(json){if(Array.isArray(json)){return IndexedSeq(json).map(fromJSDefault).toList();}if(isPlainObj(json)){return KeyedSeq(json).map(fromJSDefault).toMap();}return json;}function isPlainObj(value){return value&&(value.constructor===Object||value.constructor===undefined);}/**
     * An extension of the "same-value" algorithm as [described for use by ES6 Map
     * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)
     *
     * NaN is considered the same as NaN, however -0 and 0 are considered the same
     * value, which is different from the algorithm described by
     * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).
     *
     * This is extended further to allow Objects to describe the values they
     * represent, by way of `valueOf` or `equals` (and `hashCode`).
     *
     * Note: because of this extension, the key equality of Immutable.Map and the
     * value equality of Immutable.Set will differ from ES6 Map and Set.
     *
     * ### Defining custom values
     *
     * The easiest way to describe the value an object represents is by implementing
     * `valueOf`. For example, `Date` represents a value by returning a unix
     * timestamp for `valueOf`:
     *
     *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...
     *     var date2 = new Date(1234567890000);
     *     date1.valueOf(); // 1234567890000
     *     assert( date1 !== date2 );
     *     assert( Immutable.is( date1, date2 ) );
     *
     * Note: overriding `valueOf` may have other implications if you use this object
     * where JavaScript expects a primitive, such as implicit string coercion.
     *
     * For more complex types, especially collections, implementing `valueOf` may
     * not be performant. An alternative is to implement `equals` and `hashCode`.
     *
     * `equals` takes another object, presumably of similar type, and returns true
     * if the it is equal. Equality is symmetrical, so the same result should be
     * returned if this and the argument are flipped.
     *
     *     assert( a.equals(b) === b.equals(a) );
     *
     * `hashCode` returns a 32bit integer number representing the object which will
     * be used to determine how to store the value object in a Map or Set. You must
     * provide both or neither methods, one must not exist without the other.
     *
     * Also, an important relationship between these methods must be upheld: if two
     * values are equal, they *must* return the same hashCode. If the values are not
     * equal, they might have the same hashCode; this is called a hash collision,
     * and while undesirable for performance reasons, it is acceptable.
     *
     *     if (a.equals(b)) {
     *       assert( a.hashCode() === b.hashCode() );
     *     }
     *
     * All Immutable collections implement `equals` and `hashCode`.
     *
     */function is(valueA,valueB){if(valueA===valueB||valueA!==valueA&&valueB!==valueB){return true;}if(!valueA||!valueB){return false;}if(typeof valueA.valueOf==='function'&&typeof valueB.valueOf==='function'){valueA=valueA.valueOf();valueB=valueB.valueOf();if(valueA===valueB||valueA!==valueA&&valueB!==valueB){return true;}if(!valueA||!valueB){return false;}}if(typeof valueA.equals==='function'&&typeof valueB.equals==='function'&&valueA.equals(valueB)){return true;}return false;}function deepEqual(a,b){if(a===b){return true;}if(!isIterable(b)||a.size!==undefined&&b.size!==undefined&&a.size!==b.size||a.__hash!==undefined&&b.__hash!==undefined&&a.__hash!==b.__hash||isKeyed(a)!==isKeyed(b)||isIndexed(a)!==isIndexed(b)||isOrdered(a)!==isOrdered(b)){return false;}if(a.size===0&&b.size===0){return true;}var notAssociative=!isAssociative(a);if(isOrdered(a)){var entries=a.entries();return b.every(function(v,k){var entry=entries.next().value;return entry&&is(entry[1],v)&&(notAssociative||is(entry[0],k));})&&entries.next().done;}var flipped=false;if(a.size===undefined){if(b.size===undefined){if(typeof a.cacheResult==='function'){a.cacheResult();}}else{flipped=true;var _=a;a=b;b=_;}}var allEqual=true;var bSize=b.__iterate(function(v,k){if(notAssociative?!a.has(v):flipped?!is(v,a.get(k,NOT_SET)):!is(a.get(k,NOT_SET),v)){allEqual=false;return false;}});return allEqual&&a.size===bSize;}createClass(Repeat,IndexedSeq);function Repeat(value,times){if(!(this instanceof Repeat)){return new Repeat(value,times);}this._value=value;this.size=times===undefined?Infinity:Math.max(0,times);if(this.size===0){if(EMPTY_REPEAT){return EMPTY_REPEAT;}EMPTY_REPEAT=this;}}Repeat.prototype.toString=function(){if(this.size===0){return'Repeat []';}return'Repeat [ '+this._value+' '+this.size+' times ]';};Repeat.prototype.get=function(index,notSetValue){return this.has(index)?this._value:notSetValue;};Repeat.prototype.includes=function(searchValue){return is(this._value,searchValue);};Repeat.prototype.slice=function(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:new Repeat(this._value,resolveEnd(end,size)-resolveBegin(begin,size));};Repeat.prototype.reverse=function(){return this;};Repeat.prototype.indexOf=function(searchValue){if(is(this._value,searchValue)){return 0;}return-1;};Repeat.prototype.lastIndexOf=function(searchValue){if(is(this._value,searchValue)){return this.size;}return-1;};Repeat.prototype.__iterate=function(fn,reverse){for(var ii=0;ii<this.size;ii++){if(fn(this._value,ii,this)===false){return ii+1;}}return ii;};Repeat.prototype.__iterator=function(type,reverse){var this$0=this;var ii=0;return new Iterator(function(){return ii<this$0.size?iteratorValue(type,ii++,this$0._value):iteratorDone();});};Repeat.prototype.equals=function(other){return other instanceof Repeat?is(this._value,other._value):deepEqual(other);};var EMPTY_REPEAT;function invariant(condition,error){if(!condition)throw new Error(error);}createClass(Range,IndexedSeq);function Range(start,end,step){if(!(this instanceof Range)){return new Range(start,end,step);}invariant(step!==0,'Cannot step a Range by 0');start=start||0;if(end===undefined){end=Infinity;}step=step===undefined?1:Math.abs(step);if(end<start){step=-step;}this._start=start;this._end=end;this._step=step;this.size=Math.max(0,Math.ceil((end-start)/step-1)+1);if(this.size===0){if(EMPTY_RANGE){return EMPTY_RANGE;}EMPTY_RANGE=this;}}Range.prototype.toString=function(){if(this.size===0){return'Range []';}return'Range [ '+this._start+'...'+this._end+(this._step!==1?' by '+this._step:'')+' ]';};Range.prototype.get=function(index,notSetValue){return this.has(index)?this._start+wrapIndex(this,index)*this._step:notSetValue;};Range.prototype.includes=function(searchValue){var possibleIndex=(searchValue-this._start)/this._step;return possibleIndex>=0&&possibleIndex<this.size&&possibleIndex===Math.floor(possibleIndex);};Range.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size)){return this;}begin=resolveBegin(begin,this.size);end=resolveEnd(end,this.size);if(end<=begin){return new Range(0,0);}return new Range(this.get(begin,this._end),this.get(end,this._end),this._step);};Range.prototype.indexOf=function(searchValue){var offsetValue=searchValue-this._start;if(offsetValue%this._step===0){var index=offsetValue/this._step;if(index>=0&&index<this.size){return index;}}return-1;};Range.prototype.lastIndexOf=function(searchValue){return this.indexOf(searchValue);};Range.prototype.__iterate=function(fn,reverse){var maxIndex=this.size-1;var step=this._step;var value=reverse?this._start+maxIndex*step:this._start;for(var ii=0;ii<=maxIndex;ii++){if(fn(value,ii,this)===false){return ii+1;}value+=reverse?-step:step;}return ii;};Range.prototype.__iterator=function(type,reverse){var maxIndex=this.size-1;var step=this._step;var value=reverse?this._start+maxIndex*step:this._start;var ii=0;return new Iterator(function(){var v=value;value+=reverse?-step:step;return ii>maxIndex?iteratorDone():iteratorValue(type,ii++,v);});};Range.prototype.equals=function(other){return other instanceof Range?this._start===other._start&&this._end===other._end&&this._step===other._step:deepEqual(this,other);};var EMPTY_RANGE;createClass(Collection,Iterable);function Collection(){throw TypeError('Abstract');}createClass(KeyedCollection,Collection);function KeyedCollection(){}createClass(IndexedCollection,Collection);function IndexedCollection(){}createClass(SetCollection,Collection);function SetCollection(){}Collection.Keyed=KeyedCollection;Collection.Indexed=IndexedCollection;Collection.Set=SetCollection;var imul=typeof Math.imul==='function'&&Math.imul(0xffffffff,2)===-2?Math.imul:function imul(a,b){a=a|0;// int
b=b|0;// int
var c=a&0xffff;var d=b&0xffff;// Shift by 0 fixes the sign on the high part.
return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0;// int
};// v8 has an optimization for storing 31-bit signed numbers.
// Values which have either 00 or 11 as the high order bits qualify.
// This function drops the highest order bit in a signed number, maintaining
// the sign bit.
function smi(i32){return i32>>>1&0x40000000|i32&0xBFFFFFFF;}function hash(o){if(o===false||o===null||o===undefined){return 0;}if(typeof o.valueOf==='function'){o=o.valueOf();if(o===false||o===null||o===undefined){return 0;}}if(o===true){return 1;}var type=_typeof(o);if(type==='number'){if(o!==o||o===Infinity){return 0;}var h=o|0;if(h!==o){h^=o*0xFFFFFFFF;}while(o>0xFFFFFFFF){o/=0xFFFFFFFF;h^=o;}return smi(h);}if(type==='string'){return o.length>STRING_HASH_CACHE_MIN_STRLEN?cachedHashString(o):hashString(o);}if(typeof o.hashCode==='function'){return o.hashCode();}if(type==='object'){return hashJSObj(o);}if(typeof o.toString==='function'){return hashString(o.toString());}throw new Error('Value type '+type+' cannot be hashed.');}function cachedHashString(string){var hash=stringHashCache[string];if(hash===undefined){hash=hashString(string);if(STRING_HASH_CACHE_SIZE===STRING_HASH_CACHE_MAX_SIZE){STRING_HASH_CACHE_SIZE=0;stringHashCache={};}STRING_HASH_CACHE_SIZE++;stringHashCache[string]=hash;}return hash;}// http://jsperf.com/hashing-strings
function hashString(string){// This is the hash from JVM
// The hash code for a string is computed as
// s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],
// where s[i] is the ith character of the string and n is the length of
// the string. We "mod" the result to make it between 0 (inclusive) and 2^31
// (exclusive) by dropping high bits.
var hash=0;for(var ii=0;ii<string.length;ii++){hash=31*hash+string.charCodeAt(ii)|0;}return smi(hash);}function hashJSObj(obj){var hash;if(usingWeakMap){hash=weakMap.get(obj);if(hash!==undefined){return hash;}}hash=obj[UID_HASH_KEY];if(hash!==undefined){return hash;}if(!canDefineProperty){hash=obj.propertyIsEnumerable&&obj.propertyIsEnumerable[UID_HASH_KEY];if(hash!==undefined){return hash;}hash=getIENodeHash(obj);if(hash!==undefined){return hash;}}hash=++objHashUID;if(objHashUID&0x40000000){objHashUID=0;}if(usingWeakMap){weakMap.set(obj,hash);}else if(isExtensible!==undefined&&isExtensible(obj)===false){throw new Error('Non-extensible objects are not allowed as keys.');}else if(canDefineProperty){Object.defineProperty(obj,UID_HASH_KEY,{'enumerable':false,'configurable':false,'writable':false,'value':hash});}else if(obj.propertyIsEnumerable!==undefined&&obj.propertyIsEnumerable===obj.constructor.prototype.propertyIsEnumerable){// Since we can't define a non-enumerable property on the object
// we'll hijack one of the less-used non-enumerable properties to
// save our hash on it. Since this is a function it will not show up in
// `JSON.stringify` which is what we want.
obj.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments);};obj.propertyIsEnumerable[UID_HASH_KEY]=hash;}else if(obj.nodeType!==undefined){// At this point we couldn't get the IE `uniqueID` to use as a hash
// and we couldn't use a non-enumerable property to exploit the
// dontEnum bug so we simply add the `UID_HASH_KEY` on the node
// itself.
obj[UID_HASH_KEY]=hash;}else{throw new Error('Unable to set a non-enumerable property on object.');}return hash;}// Get references to ES5 object methods.
var isExtensible=Object.isExtensible;// True if Object.defineProperty works as expected. IE8 fails this test.
var canDefineProperty=function(){try{Object.defineProperty({},'@',{});return true;}catch(e){return false;}}();// IE has a `uniqueID` property on DOM nodes. We can construct the hash from it
// and avoid memory leaks from the IE cloneNode bug.
function getIENodeHash(node){if(node&&node.nodeType>0){switch(node.nodeType){case 1:// Element
return node.uniqueID;case 9:// Document
return node.documentElement&&node.documentElement.uniqueID;}}}// If possible, use a WeakMap.
var usingWeakMap=typeof WeakMap==='function';var weakMap;if(usingWeakMap){weakMap=new WeakMap();}var objHashUID=0;var UID_HASH_KEY='__immutablehash__';if(typeof Symbol==='function'){UID_HASH_KEY=Symbol(UID_HASH_KEY);}var STRING_HASH_CACHE_MIN_STRLEN=16;var STRING_HASH_CACHE_MAX_SIZE=255;var STRING_HASH_CACHE_SIZE=0;var stringHashCache={};function assertNotInfinite(size){invariant(size!==Infinity,'Cannot perform this action with an infinite size.');}createClass(Map,KeyedCollection);// @pragma Construction
function Map(value){return value===null||value===undefined?emptyMap():isMap(value)&&!isOrdered(value)?value:emptyMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v,k){return map.set(k,v);});});}Map.of=function(){var keyValues=SLICE$0.call(arguments,0);return emptyMap().withMutations(function(map){for(var i=0;i<keyValues.length;i+=2){if(i+1>=keyValues.length){throw new Error('Missing value for key: '+keyValues[i]);}map.set(keyValues[i],keyValues[i+1]);}});};Map.prototype.toString=function(){return this.__toString('Map {','}');};// @pragma Access
Map.prototype.get=function(k,notSetValue){return this._root?this._root.get(0,undefined,k,notSetValue):notSetValue;};// @pragma Modification
Map.prototype.set=function(k,v){return updateMap(this,k,v);};Map.prototype.setIn=function(keyPath,v){return this.updateIn(keyPath,NOT_SET,function(){return v;});};Map.prototype.remove=function(k){return updateMap(this,k,NOT_SET);};Map.prototype.deleteIn=function(keyPath){return this.updateIn(keyPath,function(){return NOT_SET;});};Map.prototype.update=function(k,notSetValue,updater){return arguments.length===1?k(this):this.updateIn([k],notSetValue,updater);};Map.prototype.updateIn=function(keyPath,notSetValue,updater){if(!updater){updater=notSetValue;notSetValue=undefined;}var updatedValue=updateInDeepMap(this,forceIterator(keyPath),notSetValue,updater);return updatedValue===NOT_SET?undefined:updatedValue;};Map.prototype.clear=function(){if(this.size===0){return this;}if(this.__ownerID){this.size=0;this._root=null;this.__hash=undefined;this.__altered=true;return this;}return emptyMap();};// @pragma Composition
Map.prototype.merge=function/*...iters*/(){return mergeIntoMapWith(this,undefined,arguments);};Map.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,merger,iters);};Map.prototype.mergeIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return typeof m.merge==='function'?m.merge.apply(m,iters):iters[iters.length-1];});};Map.prototype.mergeDeep=function/*...iters*/(){return mergeIntoMapWith(this,deepMerger,arguments);};Map.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,deepMergerWith(merger),iters);};Map.prototype.mergeDeepIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return typeof m.mergeDeep==='function'?m.mergeDeep.apply(m,iters):iters[iters.length-1];});};Map.prototype.sort=function(comparator){// Late binding
return OrderedMap(sortFactory(this,comparator));};Map.prototype.sortBy=function(mapper,comparator){// Late binding
return OrderedMap(sortFactory(this,comparator,mapper));};// @pragma Mutability
Map.prototype.withMutations=function(fn){var mutable=this.asMutable();fn(mutable);return mutable.wasAltered()?mutable.__ensureOwner(this.__ownerID):this;};Map.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new OwnerID());};Map.prototype.asImmutable=function(){return this.__ensureOwner();};Map.prototype.wasAltered=function(){return this.__altered;};Map.prototype.__iterator=function(type,reverse){return new MapIterator(this,type,reverse);};Map.prototype.__iterate=function(fn,reverse){var this$0=this;var iterations=0;this._root&&this._root.iterate(function(entry){iterations++;return fn(entry[1],entry[0],this$0);},reverse);return iterations;};Map.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this;}if(!ownerID){this.__ownerID=ownerID;this.__altered=false;return this;}return makeMap(this.size,this._root,ownerID,this.__hash);};function isMap(maybeMap){return!!(maybeMap&&maybeMap[IS_MAP_SENTINEL]);}Map.isMap=isMap;var IS_MAP_SENTINEL='@@__IMMUTABLE_MAP__@@';var MapPrototype=Map.prototype;MapPrototype[IS_MAP_SENTINEL]=true;MapPrototype[DELETE]=MapPrototype.remove;MapPrototype.removeIn=MapPrototype.deleteIn;// #pragma Trie Nodes
function ArrayMapNode(ownerID,entries){this.ownerID=ownerID;this.entries=entries;}ArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){var entries=this.entries;for(var ii=0,len=entries.length;ii<len;ii++){if(is(key,entries[ii][0])){return entries[ii][1];}}return notSetValue;};ArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET;var entries=this.entries;var idx=0;for(var len=entries.length;idx<len;idx++){if(is(key,entries[idx][0])){break;}}var exists=idx<len;if(exists?entries[idx][1]===value:removed){return this;}SetRef(didAlter);(removed||!exists)&&SetRef(didChangeSize);if(removed&&entries.length===1){return;// undefined
}if(!exists&&!removed&&entries.length>=MAX_ARRAY_MAP_SIZE){return createNodes(ownerID,entries,key,value);}var isEditable=ownerID&&ownerID===this.ownerID;var newEntries=isEditable?entries:arrCopy(entries);if(exists){if(removed){idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop();}else{newEntries[idx]=[key,value];}}else{newEntries.push([key,value]);}if(isEditable){this.entries=newEntries;return this;}return new ArrayMapNode(ownerID,newEntries);};function BitmapIndexedNode(ownerID,bitmap,nodes){this.ownerID=ownerID;this.bitmap=bitmap;this.nodes=nodes;}BitmapIndexedNode.prototype.get=function(shift,keyHash,key,notSetValue){if(keyHash===undefined){keyHash=hash(key);}var bit=1<<((shift===0?keyHash:keyHash>>>shift)&MASK);var bitmap=this.bitmap;return(bitmap&bit)===0?notSetValue:this.nodes[popCount(bitmap&bit-1)].get(shift+SHIFT,keyHash,key,notSetValue);};BitmapIndexedNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key);}var keyHashFrag=(shift===0?keyHash:keyHash>>>shift)&MASK;var bit=1<<keyHashFrag;var bitmap=this.bitmap;var exists=(bitmap&bit)!==0;if(!exists&&value===NOT_SET){return this;}var idx=popCount(bitmap&bit-1);var nodes=this.nodes;var node=exists?nodes[idx]:undefined;var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node){return this;}if(!exists&&newNode&&nodes.length>=MAX_BITMAP_INDEXED_SIZE){return expandNodes(ownerID,nodes,bitmap,keyHashFrag,newNode);}if(exists&&!newNode&&nodes.length===2&&isLeafNode(nodes[idx^1])){return nodes[idx^1];}if(exists&&newNode&&nodes.length===1&&isLeafNode(newNode)){return newNode;}var isEditable=ownerID&&ownerID===this.ownerID;var newBitmap=exists?newNode?bitmap:bitmap^bit:bitmap|bit;var newNodes=exists?newNode?setIn(nodes,idx,newNode,isEditable):spliceOut(nodes,idx,isEditable):spliceIn(nodes,idx,newNode,isEditable);if(isEditable){this.bitmap=newBitmap;this.nodes=newNodes;return this;}return new BitmapIndexedNode(ownerID,newBitmap,newNodes);};function HashArrayMapNode(ownerID,count,nodes){this.ownerID=ownerID;this.count=count;this.nodes=nodes;}HashArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){if(keyHash===undefined){keyHash=hash(key);}var idx=(shift===0?keyHash:keyHash>>>shift)&MASK;var node=this.nodes[idx];return node?node.get(shift+SHIFT,keyHash,key,notSetValue):notSetValue;};HashArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key);}var idx=(shift===0?keyHash:keyHash>>>shift)&MASK;var removed=value===NOT_SET;var nodes=this.nodes;var node=nodes[idx];if(removed&&!node){return this;}var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node){return this;}var newCount=this.count;if(!node){newCount++;}else if(!newNode){newCount--;if(newCount<MIN_HASH_ARRAY_MAP_SIZE){return packNodes(ownerID,nodes,newCount,idx);}}var isEditable=ownerID&&ownerID===this.ownerID;var newNodes=setIn(nodes,idx,newNode,isEditable);if(isEditable){this.count=newCount;this.nodes=newNodes;return this;}return new HashArrayMapNode(ownerID,newCount,newNodes);};function HashCollisionNode(ownerID,keyHash,entries){this.ownerID=ownerID;this.keyHash=keyHash;this.entries=entries;}HashCollisionNode.prototype.get=function(shift,keyHash,key,notSetValue){var entries=this.entries;for(var ii=0,len=entries.length;ii<len;ii++){if(is(key,entries[ii][0])){return entries[ii][1];}}return notSetValue;};HashCollisionNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key);}var removed=value===NOT_SET;if(keyHash!==this.keyHash){if(removed){return this;}SetRef(didAlter);SetRef(didChangeSize);return mergeIntoNode(this,ownerID,shift,keyHash,[key,value]);}var entries=this.entries;var idx=0;for(var len=entries.length;idx<len;idx++){if(is(key,entries[idx][0])){break;}}var exists=idx<len;if(exists?entries[idx][1]===value:removed){return this;}SetRef(didAlter);(removed||!exists)&&SetRef(didChangeSize);if(removed&&len===2){return new ValueNode(ownerID,this.keyHash,entries[idx^1]);}var isEditable=ownerID&&ownerID===this.ownerID;var newEntries=isEditable?entries:arrCopy(entries);if(exists){if(removed){idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop();}else{newEntries[idx]=[key,value];}}else{newEntries.push([key,value]);}if(isEditable){this.entries=newEntries;return this;}return new HashCollisionNode(ownerID,this.keyHash,newEntries);};function ValueNode(ownerID,keyHash,entry){this.ownerID=ownerID;this.keyHash=keyHash;this.entry=entry;}ValueNode.prototype.get=function(shift,keyHash,key,notSetValue){return is(key,this.entry[0])?this.entry[1]:notSetValue;};ValueNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET;var keyMatch=is(key,this.entry[0]);if(keyMatch?value===this.entry[1]:removed){return this;}SetRef(didAlter);if(removed){SetRef(didChangeSize);return;// undefined
}if(keyMatch){if(ownerID&&ownerID===this.ownerID){this.entry[1]=value;return this;}return new ValueNode(ownerID,this.keyHash,[key,value]);}SetRef(didChangeSize);return mergeIntoNode(this,ownerID,shift,hash(key),[key,value]);};// #pragma Iterators
ArrayMapNode.prototype.iterate=HashCollisionNode.prototype.iterate=function(fn,reverse){var entries=this.entries;for(var ii=0,maxIndex=entries.length-1;ii<=maxIndex;ii++){if(fn(entries[reverse?maxIndex-ii:ii])===false){return false;}}};BitmapIndexedNode.prototype.iterate=HashArrayMapNode.prototype.iterate=function(fn,reverse){var nodes=this.nodes;for(var ii=0,maxIndex=nodes.length-1;ii<=maxIndex;ii++){var node=nodes[reverse?maxIndex-ii:ii];if(node&&node.iterate(fn,reverse)===false){return false;}}};ValueNode.prototype.iterate=function(fn,reverse){return fn(this.entry);};createClass(MapIterator,Iterator);function MapIterator(map,type,reverse){this._type=type;this._reverse=reverse;this._stack=map._root&&mapIteratorFrame(map._root);}MapIterator.prototype.next=function(){var type=this._type;var stack=this._stack;while(stack){var node=stack.node;var index=stack.index++;var maxIndex;if(node.entry){if(index===0){return mapIteratorValue(type,node.entry);}}else if(node.entries){maxIndex=node.entries.length-1;if(index<=maxIndex){return mapIteratorValue(type,node.entries[this._reverse?maxIndex-index:index]);}}else{maxIndex=node.nodes.length-1;if(index<=maxIndex){var subNode=node.nodes[this._reverse?maxIndex-index:index];if(subNode){if(subNode.entry){return mapIteratorValue(type,subNode.entry);}stack=this._stack=mapIteratorFrame(subNode,stack);}continue;}}stack=this._stack=this._stack.__prev;}return iteratorDone();};function mapIteratorValue(type,entry){return iteratorValue(type,entry[0],entry[1]);}function mapIteratorFrame(node,prev){return{node:node,index:0,__prev:prev};}function makeMap(size,root,ownerID,hash){var map=Object.create(MapPrototype);map.size=size;map._root=root;map.__ownerID=ownerID;map.__hash=hash;map.__altered=false;return map;}var EMPTY_MAP;function emptyMap(){return EMPTY_MAP||(EMPTY_MAP=makeMap(0));}function updateMap(map,k,v){var newRoot;var newSize;if(!map._root){if(v===NOT_SET){return map;}newSize=1;newRoot=new ArrayMapNode(map.__ownerID,[[k,v]]);}else{var didChangeSize=MakeRef(CHANGE_LENGTH);var didAlter=MakeRef(DID_ALTER);newRoot=updateNode(map._root,map.__ownerID,0,undefined,k,v,didChangeSize,didAlter);if(!didAlter.value){return map;}newSize=map.size+(didChangeSize.value?v===NOT_SET?-1:1:0);}if(map.__ownerID){map.size=newSize;map._root=newRoot;map.__hash=undefined;map.__altered=true;return map;}return newRoot?makeMap(newSize,newRoot):emptyMap();}function updateNode(node,ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(!node){if(value===NOT_SET){return node;}SetRef(didAlter);SetRef(didChangeSize);return new ValueNode(ownerID,keyHash,[key,value]);}return node.update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter);}function isLeafNode(node){return node.constructor===ValueNode||node.constructor===HashCollisionNode;}function mergeIntoNode(node,ownerID,shift,keyHash,entry){if(node.keyHash===keyHash){return new HashCollisionNode(ownerID,keyHash,[node.entry,entry]);}var idx1=(shift===0?node.keyHash:node.keyHash>>>shift)&MASK;var idx2=(shift===0?keyHash:keyHash>>>shift)&MASK;var newNode;var nodes=idx1===idx2?[mergeIntoNode(node,ownerID,shift+SHIFT,keyHash,entry)]:(newNode=new ValueNode(ownerID,keyHash,entry),idx1<idx2?[node,newNode]:[newNode,node]);return new BitmapIndexedNode(ownerID,1<<idx1|1<<idx2,nodes);}function createNodes(ownerID,entries,key,value){if(!ownerID){ownerID=new OwnerID();}var node=new ValueNode(ownerID,hash(key),[key,value]);for(var ii=0;ii<entries.length;ii++){var entry=entries[ii];node=node.update(ownerID,0,undefined,entry[0],entry[1]);}return node;}function packNodes(ownerID,nodes,count,excluding){var bitmap=0;var packedII=0;var packedNodes=new Array(count);for(var ii=0,bit=1,len=nodes.length;ii<len;ii++,bit<<=1){var node=nodes[ii];if(node!==undefined&&ii!==excluding){bitmap|=bit;packedNodes[packedII++]=node;}}return new BitmapIndexedNode(ownerID,bitmap,packedNodes);}function expandNodes(ownerID,nodes,bitmap,including,node){var count=0;var expandedNodes=new Array(SIZE);for(var ii=0;bitmap!==0;ii++,bitmap>>>=1){expandedNodes[ii]=bitmap&1?nodes[count++]:undefined;}expandedNodes[including]=node;return new HashArrayMapNode(ownerID,count+1,expandedNodes);}function mergeIntoMapWith(map,merger,iterables){var iters=[];for(var ii=0;ii<iterables.length;ii++){var value=iterables[ii];var iter=KeyedIterable(value);if(!isIterable(value)){iter=iter.map(function(v){return fromJS(v);});}iters.push(iter);}return mergeIntoCollectionWith(map,merger,iters);}function deepMerger(existing,value,key){return existing&&existing.mergeDeep&&isIterable(value)?existing.mergeDeep(value):is(existing,value)?existing:value;}function deepMergerWith(merger){return function(existing,value,key){if(existing&&existing.mergeDeepWith&&isIterable(value)){return existing.mergeDeepWith(merger,value);}var nextValue=merger(existing,value,key);return is(existing,nextValue)?existing:nextValue;};}function mergeIntoCollectionWith(collection,merger,iters){iters=iters.filter(function(x){return x.size!==0;});if(iters.length===0){return collection;}if(collection.size===0&&!collection.__ownerID&&iters.length===1){return collection.constructor(iters[0]);}return collection.withMutations(function(collection){var mergeIntoMap=merger?function(value,key){collection.update(key,NOT_SET,function(existing){return existing===NOT_SET?value:merger(existing,value,key);});}:function(value,key){collection.set(key,value);};for(var ii=0;ii<iters.length;ii++){iters[ii].forEach(mergeIntoMap);}});}function updateInDeepMap(existing,keyPathIter,notSetValue,updater){var isNotSet=existing===NOT_SET;var step=keyPathIter.next();if(step.done){var existingValue=isNotSet?notSetValue:existing;var newValue=updater(existingValue);return newValue===existingValue?existing:newValue;}invariant(isNotSet||existing&&existing.set,'invalid keyPath');var key=step.value;var nextExisting=isNotSet?NOT_SET:existing.get(key,NOT_SET);var nextUpdated=updateInDeepMap(nextExisting,keyPathIter,notSetValue,updater);return nextUpdated===nextExisting?existing:nextUpdated===NOT_SET?existing.remove(key):(isNotSet?emptyMap():existing).set(key,nextUpdated);}function popCount(x){x=x-(x>>1&0x55555555);x=(x&0x33333333)+(x>>2&0x33333333);x=x+(x>>4)&0x0f0f0f0f;x=x+(x>>8);x=x+(x>>16);return x&0x7f;}function setIn(array,idx,val,canEdit){var newArray=canEdit?array:arrCopy(array);newArray[idx]=val;return newArray;}function spliceIn(array,idx,val,canEdit){var newLen=array.length+1;if(canEdit&&idx+1===newLen){array[idx]=val;return array;}var newArray=new Array(newLen);var after=0;for(var ii=0;ii<newLen;ii++){if(ii===idx){newArray[ii]=val;after=-1;}else{newArray[ii]=array[ii+after];}}return newArray;}function spliceOut(array,idx,canEdit){var newLen=array.length-1;if(canEdit&&idx===newLen){array.pop();return array;}var newArray=new Array(newLen);var after=0;for(var ii=0;ii<newLen;ii++){if(ii===idx){after=1;}newArray[ii]=array[ii+after];}return newArray;}var MAX_ARRAY_MAP_SIZE=SIZE/4;var MAX_BITMAP_INDEXED_SIZE=SIZE/2;var MIN_HASH_ARRAY_MAP_SIZE=SIZE/4;createClass(List,IndexedCollection);// @pragma Construction
function List(value){var empty=emptyList();if(value===null||value===undefined){return empty;}if(isList(value)){return value;}var iter=IndexedIterable(value);var size=iter.size;if(size===0){return empty;}assertNotInfinite(size);if(size>0&&size<SIZE){return makeList(0,size,SHIFT,null,new VNode(iter.toArray()));}return empty.withMutations(function(list){list.setSize(size);iter.forEach(function(v,i){return list.set(i,v);});});}List.of=function/*...values*/(){return this(arguments);};List.prototype.toString=function(){return this.__toString('List [',']');};// @pragma Access
List.prototype.get=function(index,notSetValue){index=wrapIndex(this,index);if(index>=0&&index<this.size){index+=this._origin;var node=listNodeFor(this,index);return node&&node.array[index&MASK];}return notSetValue;};// @pragma Modification
List.prototype.set=function(index,value){return updateList(this,index,value);};List.prototype.remove=function(index){return!this.has(index)?this:index===0?this.shift():index===this.size-1?this.pop():this.splice(index,1);};List.prototype.insert=function(index,value){return this.splice(index,0,value);};List.prototype.clear=function(){if(this.size===0){return this;}if(this.__ownerID){this.size=this._origin=this._capacity=0;this._level=SHIFT;this._root=this._tail=null;this.__hash=undefined;this.__altered=true;return this;}return emptyList();};List.prototype.push=function/*...values*/(){var values=arguments;var oldSize=this.size;return this.withMutations(function(list){setListBounds(list,0,oldSize+values.length);for(var ii=0;ii<values.length;ii++){list.set(oldSize+ii,values[ii]);}});};List.prototype.pop=function(){return setListBounds(this,0,-1);};List.prototype.unshift=function/*...values*/(){var values=arguments;return this.withMutations(function(list){setListBounds(list,-values.length);for(var ii=0;ii<values.length;ii++){list.set(ii,values[ii]);}});};List.prototype.shift=function(){return setListBounds(this,1);};// @pragma Composition
List.prototype.merge=function/*...iters*/(){return mergeIntoListWith(this,undefined,arguments);};List.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,merger,iters);};List.prototype.mergeDeep=function/*...iters*/(){return mergeIntoListWith(this,deepMerger,arguments);};List.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,deepMergerWith(merger),iters);};List.prototype.setSize=function(size){return setListBounds(this,0,size);};// @pragma Iteration
List.prototype.slice=function(begin,end){var size=this.size;if(wholeSlice(begin,end,size)){return this;}return setListBounds(this,resolveBegin(begin,size),resolveEnd(end,size));};List.prototype.__iterator=function(type,reverse){var index=0;var values=iterateList(this,reverse);return new Iterator(function(){var value=values();return value===DONE?iteratorDone():iteratorValue(type,index++,value);});};List.prototype.__iterate=function(fn,reverse){var index=0;var values=iterateList(this,reverse);var value;while((value=values())!==DONE){if(fn(value,index++,this)===false){break;}}return index;};List.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this;}if(!ownerID){this.__ownerID=ownerID;return this;}return makeList(this._origin,this._capacity,this._level,this._root,this._tail,ownerID,this.__hash);};function isList(maybeList){return!!(maybeList&&maybeList[IS_LIST_SENTINEL]);}List.isList=isList;var IS_LIST_SENTINEL='@@__IMMUTABLE_LIST__@@';var ListPrototype=List.prototype;ListPrototype[IS_LIST_SENTINEL]=true;ListPrototype[DELETE]=ListPrototype.remove;ListPrototype.setIn=MapPrototype.setIn;ListPrototype.deleteIn=ListPrototype.removeIn=MapPrototype.removeIn;ListPrototype.update=MapPrototype.update;ListPrototype.updateIn=MapPrototype.updateIn;ListPrototype.mergeIn=MapPrototype.mergeIn;ListPrototype.mergeDeepIn=MapPrototype.mergeDeepIn;ListPrototype.withMutations=MapPrototype.withMutations;ListPrototype.asMutable=MapPrototype.asMutable;ListPrototype.asImmutable=MapPrototype.asImmutable;ListPrototype.wasAltered=MapPrototype.wasAltered;function VNode(array,ownerID){this.array=array;this.ownerID=ownerID;}// TODO: seems like these methods are very similar
VNode.prototype.removeBefore=function(ownerID,level,index){if(index===level?1<<level:this.array.length===0){return this;}var originIndex=index>>>level&MASK;if(originIndex>=this.array.length){return new VNode([],ownerID);}var removingFirst=originIndex===0;var newChild;if(level>0){var oldChild=this.array[originIndex];newChild=oldChild&&oldChild.removeBefore(ownerID,level-SHIFT,index);if(newChild===oldChild&&removingFirst){return this;}}if(removingFirst&&!newChild){return this;}var editable=editableVNode(this,ownerID);if(!removingFirst){for(var ii=0;ii<originIndex;ii++){editable.array[ii]=undefined;}}if(newChild){editable.array[originIndex]=newChild;}return editable;};VNode.prototype.removeAfter=function(ownerID,level,index){if(index===(level?1<<level:0)||this.array.length===0){return this;}var sizeIndex=index-1>>>level&MASK;if(sizeIndex>=this.array.length){return this;}var newChild;if(level>0){var oldChild=this.array[sizeIndex];newChild=oldChild&&oldChild.removeAfter(ownerID,level-SHIFT,index);if(newChild===oldChild&&sizeIndex===this.array.length-1){return this;}}var editable=editableVNode(this,ownerID);editable.array.splice(sizeIndex+1);if(newChild){editable.array[sizeIndex]=newChild;}return editable;};var DONE={};function iterateList(list,reverse){var left=list._origin;var right=list._capacity;var tailPos=getTailOffset(right);var tail=list._tail;return iterateNodeOrLeaf(list._root,list._level,0);function iterateNodeOrLeaf(node,level,offset){return level===0?iterateLeaf(node,offset):iterateNode(node,level,offset);}function iterateLeaf(node,offset){var array=offset===tailPos?tail&&tail.array:node&&node.array;var from=offset>left?0:left-offset;var to=right-offset;if(to>SIZE){to=SIZE;}return function(){if(from===to){return DONE;}var idx=reverse?--to:from++;return array&&array[idx];};}function iterateNode(node,level,offset){var values;var array=node&&node.array;var from=offset>left?0:left-offset>>level;var to=(right-offset>>level)+1;if(to>SIZE){to=SIZE;}return function(){do{if(values){var value=values();if(value!==DONE){return value;}values=null;}if(from===to){return DONE;}var idx=reverse?--to:from++;values=iterateNodeOrLeaf(array&&array[idx],level-SHIFT,offset+(idx<<level));}while(true);};}}function makeList(origin,capacity,level,root,tail,ownerID,hash){var list=Object.create(ListPrototype);list.size=capacity-origin;list._origin=origin;list._capacity=capacity;list._level=level;list._root=root;list._tail=tail;list.__ownerID=ownerID;list.__hash=hash;list.__altered=false;return list;}var EMPTY_LIST;function emptyList(){return EMPTY_LIST||(EMPTY_LIST=makeList(0,0,SHIFT));}function updateList(list,index,value){index=wrapIndex(list,index);if(index!==index){return list;}if(index>=list.size||index<0){return list.withMutations(function(list){index<0?setListBounds(list,index).set(0,value):setListBounds(list,0,index+1).set(index,value);});}index+=list._origin;var newTail=list._tail;var newRoot=list._root;var didAlter=MakeRef(DID_ALTER);if(index>=getTailOffset(list._capacity)){newTail=updateVNode(newTail,list.__ownerID,0,index,value,didAlter);}else{newRoot=updateVNode(newRoot,list.__ownerID,list._level,index,value,didAlter);}if(!didAlter.value){return list;}if(list.__ownerID){list._root=newRoot;list._tail=newTail;list.__hash=undefined;list.__altered=true;return list;}return makeList(list._origin,list._capacity,list._level,newRoot,newTail);}function updateVNode(node,ownerID,level,index,value,didAlter){var idx=index>>>level&MASK;var nodeHas=node&&idx<node.array.length;if(!nodeHas&&value===undefined){return node;}var newNode;if(level>0){var lowerNode=node&&node.array[idx];var newLowerNode=updateVNode(lowerNode,ownerID,level-SHIFT,index,value,didAlter);if(newLowerNode===lowerNode){return node;}newNode=editableVNode(node,ownerID);newNode.array[idx]=newLowerNode;return newNode;}if(nodeHas&&node.array[idx]===value){return node;}SetRef(didAlter);newNode=editableVNode(node,ownerID);if(value===undefined&&idx===newNode.array.length-1){newNode.array.pop();}else{newNode.array[idx]=value;}return newNode;}function editableVNode(node,ownerID){if(ownerID&&node&&ownerID===node.ownerID){return node;}return new VNode(node?node.array.slice():[],ownerID);}function listNodeFor(list,rawIndex){if(rawIndex>=getTailOffset(list._capacity)){return list._tail;}if(rawIndex<1<<list._level+SHIFT){var node=list._root;var level=list._level;while(node&&level>0){node=node.array[rawIndex>>>level&MASK];level-=SHIFT;}return node;}}function setListBounds(list,begin,end){// Sanitize begin & end using this shorthand for ToInt32(argument)
// http://www.ecma-international.org/ecma-262/6.0/#sec-toint32
if(begin!==undefined){begin=begin|0;}if(end!==undefined){end=end|0;}var owner=list.__ownerID||new OwnerID();var oldOrigin=list._origin;var oldCapacity=list._capacity;var newOrigin=oldOrigin+begin;var newCapacity=end===undefined?oldCapacity:end<0?oldCapacity+end:oldOrigin+end;if(newOrigin===oldOrigin&&newCapacity===oldCapacity){return list;}// If it's going to end after it starts, it's empty.
if(newOrigin>=newCapacity){return list.clear();}var newLevel=list._level;var newRoot=list._root;// New origin might need creating a higher root.
var offsetShift=0;while(newOrigin+offsetShift<0){newRoot=new VNode(newRoot&&newRoot.array.length?[undefined,newRoot]:[],owner);newLevel+=SHIFT;offsetShift+=1<<newLevel;}if(offsetShift){newOrigin+=offsetShift;oldOrigin+=offsetShift;newCapacity+=offsetShift;oldCapacity+=offsetShift;}var oldTailOffset=getTailOffset(oldCapacity);var newTailOffset=getTailOffset(newCapacity);// New size might need creating a higher root.
while(newTailOffset>=1<<newLevel+SHIFT){newRoot=new VNode(newRoot&&newRoot.array.length?[newRoot]:[],owner);newLevel+=SHIFT;}// Locate or create the new tail.
var oldTail=list._tail;var newTail=newTailOffset<oldTailOffset?listNodeFor(list,newCapacity-1):newTailOffset>oldTailOffset?new VNode([],owner):oldTail;// Merge Tail into tree.
if(oldTail&&newTailOffset>oldTailOffset&&newOrigin<oldCapacity&&oldTail.array.length){newRoot=editableVNode(newRoot,owner);var node=newRoot;for(var level=newLevel;level>SHIFT;level-=SHIFT){var idx=oldTailOffset>>>level&MASK;node=node.array[idx]=editableVNode(node.array[idx],owner);}node.array[oldTailOffset>>>SHIFT&MASK]=oldTail;}// If the size has been reduced, there's a chance the tail needs to be trimmed.
if(newCapacity<oldCapacity){newTail=newTail&&newTail.removeAfter(owner,0,newCapacity);}// If the new origin is within the tail, then we do not need a root.
if(newOrigin>=newTailOffset){newOrigin-=newTailOffset;newCapacity-=newTailOffset;newLevel=SHIFT;newRoot=null;newTail=newTail&&newTail.removeBefore(owner,0,newOrigin);// Otherwise, if the root has been trimmed, garbage collect.
}else if(newOrigin>oldOrigin||newTailOffset<oldTailOffset){offsetShift=0;// Identify the new top root node of the subtree of the old root.
while(newRoot){var beginIndex=newOrigin>>>newLevel&MASK;if(beginIndex!==newTailOffset>>>newLevel&MASK){break;}if(beginIndex){offsetShift+=(1<<newLevel)*beginIndex;}newLevel-=SHIFT;newRoot=newRoot.array[beginIndex];}// Trim the new sides of the new root.
if(newRoot&&newOrigin>oldOrigin){newRoot=newRoot.removeBefore(owner,newLevel,newOrigin-offsetShift);}if(newRoot&&newTailOffset<oldTailOffset){newRoot=newRoot.removeAfter(owner,newLevel,newTailOffset-offsetShift);}if(offsetShift){newOrigin-=offsetShift;newCapacity-=offsetShift;}}if(list.__ownerID){list.size=newCapacity-newOrigin;list._origin=newOrigin;list._capacity=newCapacity;list._level=newLevel;list._root=newRoot;list._tail=newTail;list.__hash=undefined;list.__altered=true;return list;}return makeList(newOrigin,newCapacity,newLevel,newRoot,newTail);}function mergeIntoListWith(list,merger,iterables){var iters=[];var maxSize=0;for(var ii=0;ii<iterables.length;ii++){var value=iterables[ii];var iter=IndexedIterable(value);if(iter.size>maxSize){maxSize=iter.size;}if(!isIterable(value)){iter=iter.map(function(v){return fromJS(v);});}iters.push(iter);}if(maxSize>list.size){list=list.setSize(maxSize);}return mergeIntoCollectionWith(list,merger,iters);}function getTailOffset(size){return size<SIZE?0:size-1>>>SHIFT<<SHIFT;}createClass(OrderedMap,Map);// @pragma Construction
function OrderedMap(value){return value===null||value===undefined?emptyOrderedMap():isOrderedMap(value)?value:emptyOrderedMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v,k){return map.set(k,v);});});}OrderedMap.of=function/*...values*/(){return this(arguments);};OrderedMap.prototype.toString=function(){return this.__toString('OrderedMap {','}');};// @pragma Access
OrderedMap.prototype.get=function(k,notSetValue){var index=this._map.get(k);return index!==undefined?this._list.get(index)[1]:notSetValue;};// @pragma Modification
OrderedMap.prototype.clear=function(){if(this.size===0){return this;}if(this.__ownerID){this.size=0;this._map.clear();this._list.clear();return this;}return emptyOrderedMap();};OrderedMap.prototype.set=function(k,v){return updateOrderedMap(this,k,v);};OrderedMap.prototype.remove=function(k){return updateOrderedMap(this,k,NOT_SET);};OrderedMap.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered();};OrderedMap.prototype.__iterate=function(fn,reverse){var this$0=this;return this._list.__iterate(function(entry){return entry&&fn(entry[1],entry[0],this$0);},reverse);};OrderedMap.prototype.__iterator=function(type,reverse){return this._list.fromEntrySeq().__iterator(type,reverse);};OrderedMap.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this;}var newMap=this._map.__ensureOwner(ownerID);var newList=this._list.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;this._list=newList;return this;}return makeOrderedMap(newMap,newList,ownerID,this.__hash);};function isOrderedMap(maybeOrderedMap){return isMap(maybeOrderedMap)&&isOrdered(maybeOrderedMap);}OrderedMap.isOrderedMap=isOrderedMap;OrderedMap.prototype[IS_ORDERED_SENTINEL]=true;OrderedMap.prototype[DELETE]=OrderedMap.prototype.remove;function makeOrderedMap(map,list,ownerID,hash){var omap=Object.create(OrderedMap.prototype);omap.size=map?map.size:0;omap._map=map;omap._list=list;omap.__ownerID=ownerID;omap.__hash=hash;return omap;}var EMPTY_ORDERED_MAP;function emptyOrderedMap(){return EMPTY_ORDERED_MAP||(EMPTY_ORDERED_MAP=makeOrderedMap(emptyMap(),emptyList()));}function updateOrderedMap(omap,k,v){var map=omap._map;var list=omap._list;var i=map.get(k);var has=i!==undefined;var newMap;var newList;if(v===NOT_SET){// removed
if(!has){return omap;}if(list.size>=SIZE&&list.size>=map.size*2){newList=list.filter(function(entry,idx){return entry!==undefined&&i!==idx;});newMap=newList.toKeyedSeq().map(function(entry){return entry[0];}).flip().toMap();if(omap.__ownerID){newMap.__ownerID=newList.__ownerID=omap.__ownerID;}}else{newMap=map.remove(k);newList=i===list.size-1?list.pop():list.set(i,undefined);}}else{if(has){if(v===list.get(i)[1]){return omap;}newMap=map;newList=list.set(i,[k,v]);}else{newMap=map.set(k,list.size);newList=list.set(list.size,[k,v]);}}if(omap.__ownerID){omap.size=newMap.size;omap._map=newMap;omap._list=newList;omap.__hash=undefined;return omap;}return makeOrderedMap(newMap,newList);}createClass(ToKeyedSequence,KeyedSeq);function ToKeyedSequence(indexed,useKeys){this._iter=indexed;this._useKeys=useKeys;this.size=indexed.size;}ToKeyedSequence.prototype.get=function(key,notSetValue){return this._iter.get(key,notSetValue);};ToKeyedSequence.prototype.has=function(key){return this._iter.has(key);};ToKeyedSequence.prototype.valueSeq=function(){return this._iter.valueSeq();};ToKeyedSequence.prototype.reverse=function(){var this$0=this;var reversedSequence=reverseFactory(this,true);if(!this._useKeys){reversedSequence.valueSeq=function(){return this$0._iter.toSeq().reverse();};}return reversedSequence;};ToKeyedSequence.prototype.map=function(mapper,context){var this$0=this;var mappedSequence=mapFactory(this,mapper,context);if(!this._useKeys){mappedSequence.valueSeq=function(){return this$0._iter.toSeq().map(mapper,context);};}return mappedSequence;};ToKeyedSequence.prototype.__iterate=function(fn,reverse){var this$0=this;var ii;return this._iter.__iterate(this._useKeys?function(v,k){return fn(v,k,this$0);}:(ii=reverse?resolveSize(this):0,function(v){return fn(v,reverse?--ii:ii++,this$0);}),reverse);};ToKeyedSequence.prototype.__iterator=function(type,reverse){if(this._useKeys){return this._iter.__iterator(type,reverse);}var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);var ii=reverse?resolveSize(this):0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,reverse?--ii:ii++,step.value,step);});};ToKeyedSequence.prototype[IS_ORDERED_SENTINEL]=true;createClass(ToIndexedSequence,IndexedSeq);function ToIndexedSequence(iter){this._iter=iter;this.size=iter.size;}ToIndexedSequence.prototype.includes=function(value){return this._iter.includes(value);};ToIndexedSequence.prototype.__iterate=function(fn,reverse){var this$0=this;var iterations=0;return this._iter.__iterate(function(v){return fn(v,iterations++,this$0);},reverse);};ToIndexedSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);var iterations=0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value,step);});};createClass(ToSetSequence,SetSeq);function ToSetSequence(iter){this._iter=iter;this.size=iter.size;}ToSetSequence.prototype.has=function(key){return this._iter.includes(key);};ToSetSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(v){return fn(v,v,this$0);},reverse);};ToSetSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,step.value,step.value,step);});};createClass(FromEntriesSequence,KeyedSeq);function FromEntriesSequence(entries){this._iter=entries;this.size=entries.size;}FromEntriesSequence.prototype.entrySeq=function(){return this._iter.toSeq();};FromEntriesSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(entry){// Check if entry exists first so array access doesn't throw for holes
// in the parent iteration.
if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return fn(indexedIterable?entry.get(1):entry[1],indexedIterable?entry.get(0):entry[0],this$0);}},reverse);};FromEntriesSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator(function(){while(true){var step=iterator.next();if(step.done){return step;}var entry=step.value;// Check if entry exists first so array access doesn't throw for holes
// in the parent iteration.
if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return iteratorValue(type,indexedIterable?entry.get(0):entry[0],indexedIterable?entry.get(1):entry[1],step);}}});};ToIndexedSequence.prototype.cacheResult=ToKeyedSequence.prototype.cacheResult=ToSetSequence.prototype.cacheResult=FromEntriesSequence.prototype.cacheResult=cacheResultThrough;function flipFactory(iterable){var flipSequence=makeSequence(iterable);flipSequence._iter=iterable;flipSequence.size=iterable.size;flipSequence.flip=function(){return iterable;};flipSequence.reverse=function(){var reversedSequence=iterable.reverse.apply(this);// super.reverse()
reversedSequence.flip=function(){return iterable.reverse();};return reversedSequence;};flipSequence.has=function(key){return iterable.includes(key);};flipSequence.includes=function(key){return iterable.has(key);};flipSequence.cacheResult=cacheResultThrough;flipSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return fn(k,v,this$0)!==false;},reverse);};flipSequence.__iteratorUncached=function(type,reverse){if(type===ITERATE_ENTRIES){var iterator=iterable.__iterator(type,reverse);return new Iterator(function(){var step=iterator.next();if(!step.done){var k=step.value[0];step.value[0]=step.value[1];step.value[1]=k;}return step;});}return iterable.__iterator(type===ITERATE_VALUES?ITERATE_KEYS:ITERATE_VALUES,reverse);};return flipSequence;}function mapFactory(iterable,mapper,context){var mappedSequence=makeSequence(iterable);mappedSequence.size=iterable.size;mappedSequence.has=function(key){return iterable.has(key);};mappedSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v===NOT_SET?notSetValue:mapper.call(context,v,key,iterable);};mappedSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k,c){return fn(mapper.call(context,v,k,c),k,this$0)!==false;},reverse);};mappedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);return new Iterator(function(){var step=iterator.next();if(step.done){return step;}var entry=step.value;var key=entry[0];return iteratorValue(type,key,mapper.call(context,entry[1],key,iterable),step);});};return mappedSequence;}function reverseFactory(iterable,useKeys){var reversedSequence=makeSequence(iterable);reversedSequence._iter=iterable;reversedSequence.size=iterable.size;reversedSequence.reverse=function(){return iterable;};if(iterable.flip){reversedSequence.flip=function(){var flipSequence=flipFactory(iterable);flipSequence.reverse=function(){return iterable.flip();};return flipSequence;};}reversedSequence.get=function(key,notSetValue){return iterable.get(useKeys?key:-1-key,notSetValue);};reversedSequence.has=function(key){return iterable.has(useKeys?key:-1-key);};reversedSequence.includes=function(value){return iterable.includes(value);};reversedSequence.cacheResult=cacheResultThrough;reversedSequence.__iterate=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return fn(v,k,this$0);},!reverse);};reversedSequence.__iterator=function(type,reverse){return iterable.__iterator(type,!reverse);};return reversedSequence;}function filterFactory(iterable,predicate,context,useKeys){var filterSequence=makeSequence(iterable);if(useKeys){filterSequence.has=function(key){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&!!predicate.call(context,v,key,iterable);};filterSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&predicate.call(context,v,key,iterable)?v:notSetValue;};}filterSequence.__iterateUncached=function(fn,reverse){var this$0=this;var iterations=0;iterable.__iterate(function(v,k,c){if(predicate.call(context,v,k,c)){iterations++;return fn(v,useKeys?k:iterations-1,this$0);}},reverse);return iterations;};filterSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var iterations=0;return new Iterator(function(){while(true){var step=iterator.next();if(step.done){return step;}var entry=step.value;var key=entry[0];var value=entry[1];if(predicate.call(context,value,key,iterable)){return iteratorValue(type,useKeys?key:iterations++,value,step);}}});};return filterSequence;}function countByFactory(iterable,grouper,context){var groups=Map().asMutable();iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),0,function(a){return a+1;});});return groups.asImmutable();}function groupByFactory(iterable,grouper,context){var isKeyedIter=isKeyed(iterable);var groups=(isOrdered(iterable)?OrderedMap():Map()).asMutable();iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),function(a){return a=a||[],a.push(isKeyedIter?[k,v]:v),a;});});var coerce=iterableClass(iterable);return groups.map(function(arr){return reify(iterable,coerce(arr));});}function sliceFactory(iterable,begin,end,useKeys){var originalSize=iterable.size;// Sanitize begin & end using this shorthand for ToInt32(argument)
// http://www.ecma-international.org/ecma-262/6.0/#sec-toint32
if(begin!==undefined){begin=begin|0;}if(end!==undefined){if(end===Infinity){end=originalSize;}else{end=end|0;}}if(wholeSlice(begin,end,originalSize)){return iterable;}var resolvedBegin=resolveBegin(begin,originalSize);var resolvedEnd=resolveEnd(end,originalSize);// begin or end will be NaN if they were provided as negative numbers and
// this iterable's size is unknown. In that case, cache first so there is
// a known size and these do not resolve to NaN.
if(resolvedBegin!==resolvedBegin||resolvedEnd!==resolvedEnd){return sliceFactory(iterable.toSeq().cacheResult(),begin,end,useKeys);}// Note: resolvedEnd is undefined when the original sequence's length is
// unknown and this slice did not supply an end and should contain all
// elements after resolvedBegin.
// In that case, resolvedSize will be NaN and sliceSize will remain undefined.
var resolvedSize=resolvedEnd-resolvedBegin;var sliceSize;if(resolvedSize===resolvedSize){sliceSize=resolvedSize<0?0:resolvedSize;}var sliceSeq=makeSequence(iterable);// If iterable.size is undefined, the size of the realized sliceSeq is
// unknown at this point unless the number of items to slice is 0
sliceSeq.size=sliceSize===0?sliceSize:iterable.size&&sliceSize||undefined;if(!useKeys&&isSeq(iterable)&&sliceSize>=0){sliceSeq.get=function(index,notSetValue){index=wrapIndex(this,index);return index>=0&&index<sliceSize?iterable.get(index+resolvedBegin,notSetValue):notSetValue;};}sliceSeq.__iterateUncached=function(fn,reverse){var this$0=this;if(sliceSize===0){return 0;}if(reverse){return this.cacheResult().__iterate(fn,reverse);}var skipped=0;var isSkipping=true;var iterations=0;iterable.__iterate(function(v,k){if(!(isSkipping&&(isSkipping=skipped++<resolvedBegin))){iterations++;return fn(v,useKeys?k:iterations-1,this$0)!==false&&iterations!==sliceSize;}});return iterations;};sliceSeq.__iteratorUncached=function(type,reverse){if(sliceSize!==0&&reverse){return this.cacheResult().__iterator(type,reverse);}// Don't bother instantiating parent iterator if taking 0.
var iterator=sliceSize!==0&&iterable.__iterator(type,reverse);var skipped=0;var iterations=0;return new Iterator(function(){while(skipped++<resolvedBegin){iterator.next();}if(++iterations>sliceSize){return iteratorDone();}var step=iterator.next();if(useKeys||type===ITERATE_VALUES){return step;}else if(type===ITERATE_KEYS){return iteratorValue(type,iterations-1,undefined,step);}else{return iteratorValue(type,iterations-1,step.value[1],step);}});};return sliceSeq;}function takeWhileFactory(iterable,predicate,context){var takeSequence=makeSequence(iterable);takeSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterate(fn,reverse);}var iterations=0;iterable.__iterate(function(v,k,c){return predicate.call(context,v,k,c)&&++iterations&&fn(v,k,this$0);});return iterations;};takeSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterator(type,reverse);}var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var iterating=true;return new Iterator(function(){if(!iterating){return iteratorDone();}var step=iterator.next();if(step.done){return step;}var entry=step.value;var k=entry[0];var v=entry[1];if(!predicate.call(context,v,k,this$0)){iterating=false;return iteratorDone();}return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step);});};return takeSequence;}function skipWhileFactory(iterable,predicate,context,useKeys){var skipSequence=makeSequence(iterable);skipSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterate(fn,reverse);}var isSkipping=true;var iterations=0;iterable.__iterate(function(v,k,c){if(!(isSkipping&&(isSkipping=predicate.call(context,v,k,c)))){iterations++;return fn(v,useKeys?k:iterations-1,this$0);}});return iterations;};skipSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterator(type,reverse);}var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var skipping=true;var iterations=0;return new Iterator(function(){var step,k,v;do{step=iterator.next();if(step.done){if(useKeys||type===ITERATE_VALUES){return step;}else if(type===ITERATE_KEYS){return iteratorValue(type,iterations++,undefined,step);}else{return iteratorValue(type,iterations++,step.value[1],step);}}var entry=step.value;k=entry[0];v=entry[1];skipping&&(skipping=predicate.call(context,v,k,this$0));}while(skipping);return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step);});};return skipSequence;}function concatFactory(iterable,values){var isKeyedIterable=isKeyed(iterable);var iters=[iterable].concat(values).map(function(v){if(!isIterable(v)){v=isKeyedIterable?keyedSeqFromValue(v):indexedSeqFromValue(Array.isArray(v)?v:[v]);}else if(isKeyedIterable){v=KeyedIterable(v);}return v;}).filter(function(v){return v.size!==0;});if(iters.length===0){return iterable;}if(iters.length===1){var singleton=iters[0];if(singleton===iterable||isKeyedIterable&&isKeyed(singleton)||isIndexed(iterable)&&isIndexed(singleton)){return singleton;}}var concatSeq=new ArraySeq(iters);if(isKeyedIterable){concatSeq=concatSeq.toKeyedSeq();}else if(!isIndexed(iterable)){concatSeq=concatSeq.toSetSeq();}concatSeq=concatSeq.flatten(true);concatSeq.size=iters.reduce(function(sum,seq){if(sum!==undefined){var size=seq.size;if(size!==undefined){return sum+size;}}},0);return concatSeq;}function flattenFactory(iterable,depth,useKeys){var flatSequence=makeSequence(iterable);flatSequence.__iterateUncached=function(fn,reverse){var iterations=0;var stopped=false;function flatDeep(iter,currentDepth){var this$0=this;iter.__iterate(function(v,k){if((!depth||currentDepth<depth)&&isIterable(v)){flatDeep(v,currentDepth+1);}else if(fn(v,useKeys?k:iterations++,this$0)===false){stopped=true;}return!stopped;},reverse);}flatDeep(iterable,0);return iterations;};flatSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(type,reverse);var stack=[];var iterations=0;return new Iterator(function(){while(iterator){var step=iterator.next();if(step.done!==false){iterator=stack.pop();continue;}var v=step.value;if(type===ITERATE_ENTRIES){v=v[1];}if((!depth||stack.length<depth)&&isIterable(v)){stack.push(iterator);iterator=v.__iterator(type,reverse);}else{return useKeys?step:iteratorValue(type,iterations++,v,step);}}return iteratorDone();});};return flatSequence;}function flatMapFactory(iterable,mapper,context){var coerce=iterableClass(iterable);return iterable.toSeq().map(function(v,k){return coerce(mapper.call(context,v,k,iterable));}).flatten(true);}function interposeFactory(iterable,separator){var interposedSequence=makeSequence(iterable);interposedSequence.size=iterable.size&&iterable.size*2-1;interposedSequence.__iterateUncached=function(fn,reverse){var this$0=this;var iterations=0;iterable.__iterate(function(v,k){return(!iterations||fn(separator,iterations++,this$0)!==false)&&fn(v,iterations++,this$0)!==false;},reverse);return iterations;};interposedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_VALUES,reverse);var iterations=0;var step;return new Iterator(function(){if(!step||iterations%2){step=iterator.next();if(step.done){return step;}}return iterations%2?iteratorValue(type,iterations++,separator):iteratorValue(type,iterations++,step.value,step);});};return interposedSequence;}function sortFactory(iterable,comparator,mapper){if(!comparator){comparator=defaultComparator;}var isKeyedIterable=isKeyed(iterable);var index=0;var entries=iterable.toSeq().map(function(v,k){return[k,v,index++,mapper?mapper(v,k,iterable):v];}).toArray();entries.sort(function(a,b){return comparator(a[3],b[3])||a[2]-b[2];}).forEach(isKeyedIterable?function(v,i){entries[i].length=2;}:function(v,i){entries[i]=v[1];});return isKeyedIterable?KeyedSeq(entries):isIndexed(iterable)?IndexedSeq(entries):SetSeq(entries);}function maxFactory(iterable,comparator,mapper){if(!comparator){comparator=defaultComparator;}if(mapper){var entry=iterable.toSeq().map(function(v,k){return[v,mapper(v,k,iterable)];}).reduce(function(a,b){return maxCompare(comparator,a[1],b[1])?b:a;});return entry&&entry[0];}else{return iterable.reduce(function(a,b){return maxCompare(comparator,a,b)?b:a;});}}function maxCompare(comparator,a,b){var comp=comparator(b,a);// b is considered the new max if the comparator declares them equal, but
// they are not equal and b is in fact a nullish value.
return comp===0&&b!==a&&(b===undefined||b===null||b!==b)||comp>0;}function zipWithFactory(keyIter,zipper,iters){var zipSequence=makeSequence(keyIter);zipSequence.size=new ArraySeq(iters).map(function(i){return i.size;}).min();// Note: this a generic base implementation of __iterate in terms of
// __iterator which may be more generically useful in the future.
zipSequence.__iterate=function(fn,reverse){/* generic:
        var iterator = this.__iterator(ITERATE_ENTRIES, reverse);
        var step;
        var iterations = 0;
        while (!(step = iterator.next()).done) {
          iterations++;
          if (fn(step.value[1], step.value[0], this) === false) {
            break;
          }
        }
        return iterations;
        */// indexed:
var iterator=this.__iterator(ITERATE_VALUES,reverse);var step;var iterations=0;while(!(step=iterator.next()).done){if(fn(step.value,iterations++,this)===false){break;}}return iterations;};zipSequence.__iteratorUncached=function(type,reverse){var iterators=iters.map(function(i){return i=Iterable(i),getIterator(reverse?i.reverse():i);});var iterations=0;var isDone=false;return new Iterator(function(){var steps;if(!isDone){steps=iterators.map(function(i){return i.next();});isDone=steps.some(function(s){return s.done;});}if(isDone){return iteratorDone();}return iteratorValue(type,iterations++,zipper.apply(null,steps.map(function(s){return s.value;})));});};return zipSequence;}// #pragma Helper Functions
function reify(iter,seq){return isSeq(iter)?seq:iter.constructor(seq);}function validateEntry(entry){if(entry!==Object(entry)){throw new TypeError('Expected [K, V] tuple: '+entry);}}function resolveSize(iter){assertNotInfinite(iter.size);return ensureSize(iter);}function iterableClass(iterable){return isKeyed(iterable)?KeyedIterable:isIndexed(iterable)?IndexedIterable:SetIterable;}function makeSequence(iterable){return Object.create((isKeyed(iterable)?KeyedSeq:isIndexed(iterable)?IndexedSeq:SetSeq).prototype);}function cacheResultThrough(){if(this._iter.cacheResult){this._iter.cacheResult();this.size=this._iter.size;return this;}else{return Seq.prototype.cacheResult.call(this);}}function defaultComparator(a,b){return a>b?1:a<b?-1:0;}function forceIterator(keyPath){var iter=getIterator(keyPath);if(!iter){// Array might not be iterable in this environment, so we need a fallback
// to our wrapped type.
if(!isArrayLike(keyPath)){throw new TypeError('Expected iterable or array-like: '+keyPath);}iter=getIterator(Iterable(keyPath));}return iter;}createClass(Record,KeyedCollection);function Record(defaultValues,name){var hasInitialized;var RecordType=function Record(values){if(values instanceof RecordType){return values;}if(!(this instanceof RecordType)){return new RecordType(values);}if(!hasInitialized){hasInitialized=true;var keys=Object.keys(defaultValues);setProps(RecordTypePrototype,keys);RecordTypePrototype.size=keys.length;RecordTypePrototype._name=name;RecordTypePrototype._keys=keys;RecordTypePrototype._defaultValues=defaultValues;}this._map=Map(values);};var RecordTypePrototype=RecordType.prototype=Object.create(RecordPrototype);RecordTypePrototype.constructor=RecordType;return RecordType;}Record.prototype.toString=function(){return this.__toString(recordName(this)+' {','}');};// @pragma Access
Record.prototype.has=function(k){return this._defaultValues.hasOwnProperty(k);};Record.prototype.get=function(k,notSetValue){if(!this.has(k)){return notSetValue;}var defaultVal=this._defaultValues[k];return this._map?this._map.get(k,defaultVal):defaultVal;};// @pragma Modification
Record.prototype.clear=function(){if(this.__ownerID){this._map&&this._map.clear();return this;}var RecordType=this.constructor;return RecordType._empty||(RecordType._empty=makeRecord(this,emptyMap()));};Record.prototype.set=function(k,v){if(!this.has(k)){throw new Error('Cannot set unknown key "'+k+'" on '+recordName(this));}if(this._map&&!this._map.has(k)){var defaultVal=this._defaultValues[k];if(v===defaultVal){return this;}}var newMap=this._map&&this._map.set(k,v);if(this.__ownerID||newMap===this._map){return this;}return makeRecord(this,newMap);};Record.prototype.remove=function(k){if(!this.has(k)){return this;}var newMap=this._map&&this._map.remove(k);if(this.__ownerID||newMap===this._map){return this;}return makeRecord(this,newMap);};Record.prototype.wasAltered=function(){return this._map.wasAltered();};Record.prototype.__iterator=function(type,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k);}).__iterator(type,reverse);};Record.prototype.__iterate=function(fn,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k);}).__iterate(fn,reverse);};Record.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this;}var newMap=this._map&&this._map.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;return this;}return makeRecord(this,newMap,ownerID);};var RecordPrototype=Record.prototype;RecordPrototype[DELETE]=RecordPrototype.remove;RecordPrototype.deleteIn=RecordPrototype.removeIn=MapPrototype.removeIn;RecordPrototype.merge=MapPrototype.merge;RecordPrototype.mergeWith=MapPrototype.mergeWith;RecordPrototype.mergeIn=MapPrototype.mergeIn;RecordPrototype.mergeDeep=MapPrototype.mergeDeep;RecordPrototype.mergeDeepWith=MapPrototype.mergeDeepWith;RecordPrototype.mergeDeepIn=MapPrototype.mergeDeepIn;RecordPrototype.setIn=MapPrototype.setIn;RecordPrototype.update=MapPrototype.update;RecordPrototype.updateIn=MapPrototype.updateIn;RecordPrototype.withMutations=MapPrototype.withMutations;RecordPrototype.asMutable=MapPrototype.asMutable;RecordPrototype.asImmutable=MapPrototype.asImmutable;function makeRecord(likeRecord,map,ownerID){var record=Object.create(Object.getPrototypeOf(likeRecord));record._map=map;record.__ownerID=ownerID;return record;}function recordName(record){return record._name||record.constructor.name||'Record';}function setProps(prototype,names){try{names.forEach(setProp.bind(undefined,prototype));}catch(error){// Object.defineProperty failed. Probably IE8.
}}function setProp(prototype,name){Object.defineProperty(prototype,name,{get:function get(){return this.get(name);},set:function set(value){invariant(this.__ownerID,'Cannot set on an immutable record.');this.set(name,value);}});}createClass(Set,SetCollection);// @pragma Construction
function Set(value){return value===null||value===undefined?emptySet():isSet(value)&&!isOrdered(value)?value:emptySet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v){return set.add(v);});});}Set.of=function/*...values*/(){return this(arguments);};Set.fromKeys=function(value){return this(KeyedIterable(value).keySeq());};Set.prototype.toString=function(){return this.__toString('Set {','}');};// @pragma Access
Set.prototype.has=function(value){return this._map.has(value);};// @pragma Modification
Set.prototype.add=function(value){return updateSet(this,this._map.set(value,true));};Set.prototype.remove=function(value){return updateSet(this,this._map.remove(value));};Set.prototype.clear=function(){return updateSet(this,this._map.clear());};// @pragma Composition
Set.prototype.union=function(){var iters=SLICE$0.call(arguments,0);iters=iters.filter(function(x){return x.size!==0;});if(iters.length===0){return this;}if(this.size===0&&!this.__ownerID&&iters.length===1){return this.constructor(iters[0]);}return this.withMutations(function(set){for(var ii=0;ii<iters.length;ii++){SetIterable(iters[ii]).forEach(function(value){return set.add(value);});}});};Set.prototype.intersect=function(){var iters=SLICE$0.call(arguments,0);if(iters.length===0){return this;}iters=iters.map(function(iter){return SetIterable(iter);});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){if(!iters.every(function(iter){return iter.includes(value);})){set.remove(value);}});});};Set.prototype.subtract=function(){var iters=SLICE$0.call(arguments,0);if(iters.length===0){return this;}iters=iters.map(function(iter){return SetIterable(iter);});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){if(iters.some(function(iter){return iter.includes(value);})){set.remove(value);}});});};Set.prototype.merge=function(){return this.union.apply(this,arguments);};Set.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return this.union.apply(this,iters);};Set.prototype.sort=function(comparator){// Late binding
return OrderedSet(sortFactory(this,comparator));};Set.prototype.sortBy=function(mapper,comparator){// Late binding
return OrderedSet(sortFactory(this,comparator,mapper));};Set.prototype.wasAltered=function(){return this._map.wasAltered();};Set.prototype.__iterate=function(fn,reverse){var this$0=this;return this._map.__iterate(function(_,k){return fn(k,k,this$0);},reverse);};Set.prototype.__iterator=function(type,reverse){return this._map.map(function(_,k){return k;}).__iterator(type,reverse);};Set.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this;}var newMap=this._map.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;return this;}return this.__make(newMap,ownerID);};function isSet(maybeSet){return!!(maybeSet&&maybeSet[IS_SET_SENTINEL]);}Set.isSet=isSet;var IS_SET_SENTINEL='@@__IMMUTABLE_SET__@@';var SetPrototype=Set.prototype;SetPrototype[IS_SET_SENTINEL]=true;SetPrototype[DELETE]=SetPrototype.remove;SetPrototype.mergeDeep=SetPrototype.merge;SetPrototype.mergeDeepWith=SetPrototype.mergeWith;SetPrototype.withMutations=MapPrototype.withMutations;SetPrototype.asMutable=MapPrototype.asMutable;SetPrototype.asImmutable=MapPrototype.asImmutable;SetPrototype.__empty=emptySet;SetPrototype.__make=makeSet;function updateSet(set,newMap){if(set.__ownerID){set.size=newMap.size;set._map=newMap;return set;}return newMap===set._map?set:newMap.size===0?set.__empty():set.__make(newMap);}function makeSet(map,ownerID){var set=Object.create(SetPrototype);set.size=map?map.size:0;set._map=map;set.__ownerID=ownerID;return set;}var EMPTY_SET;function emptySet(){return EMPTY_SET||(EMPTY_SET=makeSet(emptyMap()));}createClass(OrderedSet,Set);// @pragma Construction
function OrderedSet(value){return value===null||value===undefined?emptyOrderedSet():isOrderedSet(value)?value:emptyOrderedSet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v){return set.add(v);});});}OrderedSet.of=function/*...values*/(){return this(arguments);};OrderedSet.fromKeys=function(value){return this(KeyedIterable(value).keySeq());};OrderedSet.prototype.toString=function(){return this.__toString('OrderedSet {','}');};function isOrderedSet(maybeOrderedSet){return isSet(maybeOrderedSet)&&isOrdered(maybeOrderedSet);}OrderedSet.isOrderedSet=isOrderedSet;var OrderedSetPrototype=OrderedSet.prototype;OrderedSetPrototype[IS_ORDERED_SENTINEL]=true;OrderedSetPrototype.__empty=emptyOrderedSet;OrderedSetPrototype.__make=makeOrderedSet;function makeOrderedSet(map,ownerID){var set=Object.create(OrderedSetPrototype);set.size=map?map.size:0;set._map=map;set.__ownerID=ownerID;return set;}var EMPTY_ORDERED_SET;function emptyOrderedSet(){return EMPTY_ORDERED_SET||(EMPTY_ORDERED_SET=makeOrderedSet(emptyOrderedMap()));}createClass(Stack,IndexedCollection);// @pragma Construction
function Stack(value){return value===null||value===undefined?emptyStack():isStack(value)?value:emptyStack().unshiftAll(value);}Stack.of=function/*...values*/(){return this(arguments);};Stack.prototype.toString=function(){return this.__toString('Stack [',']');};// @pragma Access
Stack.prototype.get=function(index,notSetValue){var head=this._head;index=wrapIndex(this,index);while(head&&index--){head=head.next;}return head?head.value:notSetValue;};Stack.prototype.peek=function(){return this._head&&this._head.value;};// @pragma Modification
Stack.prototype.push=function/*...values*/(){if(arguments.length===0){return this;}var newSize=this.size+arguments.length;var head=this._head;for(var ii=arguments.length-1;ii>=0;ii--){head={value:arguments[ii],next:head};}if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this;}return makeStack(newSize,head);};Stack.prototype.pushAll=function(iter){iter=IndexedIterable(iter);if(iter.size===0){return this;}assertNotInfinite(iter.size);var newSize=this.size;var head=this._head;iter.reverse().forEach(function(value){newSize++;head={value:value,next:head};});if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this;}return makeStack(newSize,head);};Stack.prototype.pop=function(){return this.slice(1);};Stack.prototype.unshift=function/*...values*/(){return this.push.apply(this,arguments);};Stack.prototype.unshiftAll=function(iter){return this.pushAll(iter);};Stack.prototype.shift=function(){return this.pop.apply(this,arguments);};Stack.prototype.clear=function(){if(this.size===0){return this;}if(this.__ownerID){this.size=0;this._head=undefined;this.__hash=undefined;this.__altered=true;return this;}return emptyStack();};Stack.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size)){return this;}var resolvedBegin=resolveBegin(begin,this.size);var resolvedEnd=resolveEnd(end,this.size);if(resolvedEnd!==this.size){// super.slice(begin, end);
return IndexedCollection.prototype.slice.call(this,begin,end);}var newSize=this.size-resolvedBegin;var head=this._head;while(resolvedBegin--){head=head.next;}if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this;}return makeStack(newSize,head);};// @pragma Mutability
Stack.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this;}if(!ownerID){this.__ownerID=ownerID;this.__altered=false;return this;}return makeStack(this.size,this._head,ownerID,this.__hash);};// @pragma Iteration
Stack.prototype.__iterate=function(fn,reverse){if(reverse){return this.reverse().__iterate(fn);}var iterations=0;var node=this._head;while(node){if(fn(node.value,iterations++,this)===false){break;}node=node.next;}return iterations;};Stack.prototype.__iterator=function(type,reverse){if(reverse){return this.reverse().__iterator(type);}var iterations=0;var node=this._head;return new Iterator(function(){if(node){var value=node.value;node=node.next;return iteratorValue(type,iterations++,value);}return iteratorDone();});};function isStack(maybeStack){return!!(maybeStack&&maybeStack[IS_STACK_SENTINEL]);}Stack.isStack=isStack;var IS_STACK_SENTINEL='@@__IMMUTABLE_STACK__@@';var StackPrototype=Stack.prototype;StackPrototype[IS_STACK_SENTINEL]=true;StackPrototype.withMutations=MapPrototype.withMutations;StackPrototype.asMutable=MapPrototype.asMutable;StackPrototype.asImmutable=MapPrototype.asImmutable;StackPrototype.wasAltered=MapPrototype.wasAltered;function makeStack(size,head,ownerID,hash){var map=Object.create(StackPrototype);map.size=size;map._head=head;map.__ownerID=ownerID;map.__hash=hash;map.__altered=false;return map;}var EMPTY_STACK;function emptyStack(){return EMPTY_STACK||(EMPTY_STACK=makeStack(0));}/**
     * Contributes additional methods to a constructor
     */function mixin(ctor,methods){var keyCopier=function keyCopier(key){ctor.prototype[key]=methods[key];};Object.keys(methods).forEach(keyCopier);Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(methods).forEach(keyCopier);return ctor;}Iterable.Iterator=Iterator;mixin(Iterable,{// ### Conversion to other types
toArray:function toArray(){assertNotInfinite(this.size);var array=new Array(this.size||0);this.valueSeq().__iterate(function(v,i){array[i]=v;});return array;},toIndexedSeq:function toIndexedSeq(){return new ToIndexedSequence(this);},toJS:function toJS(){return this.toSeq().map(function(value){return value&&typeof value.toJS==='function'?value.toJS():value;}).__toJS();},toJSON:function toJSON(){return this.toSeq().map(function(value){return value&&typeof value.toJSON==='function'?value.toJSON():value;}).__toJS();},toKeyedSeq:function toKeyedSeq(){return new ToKeyedSequence(this,true);},toMap:function toMap(){// Use Late Binding here to solve the circular dependency.
return Map(this.toKeyedSeq());},toObject:function toObject(){assertNotInfinite(this.size);var object={};this.__iterate(function(v,k){object[k]=v;});return object;},toOrderedMap:function toOrderedMap(){// Use Late Binding here to solve the circular dependency.
return OrderedMap(this.toKeyedSeq());},toOrderedSet:function toOrderedSet(){// Use Late Binding here to solve the circular dependency.
return OrderedSet(isKeyed(this)?this.valueSeq():this);},toSet:function toSet(){// Use Late Binding here to solve the circular dependency.
return Set(isKeyed(this)?this.valueSeq():this);},toSetSeq:function toSetSeq(){return new ToSetSequence(this);},toSeq:function toSeq(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq();},toStack:function toStack(){// Use Late Binding here to solve the circular dependency.
return Stack(isKeyed(this)?this.valueSeq():this);},toList:function toList(){// Use Late Binding here to solve the circular dependency.
return List(isKeyed(this)?this.valueSeq():this);},// ### Common JavaScript methods and properties
toString:function toString(){return'[Iterable]';},__toString:function __toString(head,tail){if(this.size===0){return head+tail;}return head+' '+this.toSeq().map(this.__toStringMapper).join(', ')+' '+tail;},// ### ES6 Collection methods (ES6 Array and Map)
concat:function concat(){var values=SLICE$0.call(arguments,0);return reify(this,concatFactory(this,values));},includes:function includes(searchValue){return this.some(function(value){return is(value,searchValue);});},entries:function entries(){return this.__iterator(ITERATE_ENTRIES);},every:function every(predicate,context){assertNotInfinite(this.size);var returnValue=true;this.__iterate(function(v,k,c){if(!predicate.call(context,v,k,c)){returnValue=false;return false;}});return returnValue;},filter:function filter(predicate,context){return reify(this,filterFactory(this,predicate,context,true));},find:function find(predicate,context,notSetValue){var entry=this.findEntry(predicate,context);return entry?entry[1]:notSetValue;},forEach:function forEach(sideEffect,context){assertNotInfinite(this.size);return this.__iterate(context?sideEffect.bind(context):sideEffect);},join:function join(separator){assertNotInfinite(this.size);separator=separator!==undefined?''+separator:',';var joined='';var isFirst=true;this.__iterate(function(v){isFirst?isFirst=false:joined+=separator;joined+=v!==null&&v!==undefined?v.toString():'';});return joined;},keys:function keys(){return this.__iterator(ITERATE_KEYS);},map:function map(mapper,context){return reify(this,mapFactory(this,mapper,context));},reduce:function reduce(reducer,initialReduction,context){assertNotInfinite(this.size);var reduction;var useFirst;if(arguments.length<2){useFirst=true;}else{reduction=initialReduction;}this.__iterate(function(v,k,c){if(useFirst){useFirst=false;reduction=v;}else{reduction=reducer.call(context,reduction,v,k,c);}});return reduction;},reduceRight:function reduceRight(reducer,initialReduction,context){var reversed=this.toKeyedSeq().reverse();return reversed.reduce.apply(reversed,arguments);},reverse:function reverse(){return reify(this,reverseFactory(this,true));},slice:function slice(begin,end){return reify(this,sliceFactory(this,begin,end,true));},some:function some(predicate,context){return!this.every(not(predicate),context);},sort:function sort(comparator){return reify(this,sortFactory(this,comparator));},values:function values(){return this.__iterator(ITERATE_VALUES);},// ### More sequential methods
butLast:function butLast(){return this.slice(0,-1);},isEmpty:function isEmpty(){return this.size!==undefined?this.size===0:!this.some(function(){return true;});},count:function count(predicate,context){return ensureSize(predicate?this.toSeq().filter(predicate,context):this);},countBy:function countBy(grouper,context){return countByFactory(this,grouper,context);},equals:function equals(other){return deepEqual(this,other);},entrySeq:function entrySeq(){var iterable=this;if(iterable._cache){// We cache as an entries array, so we can just return the cache!
return new ArraySeq(iterable._cache);}var entriesSequence=iterable.toSeq().map(entryMapper).toIndexedSeq();entriesSequence.fromEntrySeq=function(){return iterable.toSeq();};return entriesSequence;},filterNot:function filterNot(predicate,context){return this.filter(not(predicate),context);},findEntry:function findEntry(predicate,context,notSetValue){var found=notSetValue;this.__iterate(function(v,k,c){if(predicate.call(context,v,k,c)){found=[k,v];return false;}});return found;},findKey:function findKey(predicate,context){var entry=this.findEntry(predicate,context);return entry&&entry[0];},findLast:function findLast(predicate,context,notSetValue){return this.toKeyedSeq().reverse().find(predicate,context,notSetValue);},findLastEntry:function findLastEntry(predicate,context,notSetValue){return this.toKeyedSeq().reverse().findEntry(predicate,context,notSetValue);},findLastKey:function findLastKey(predicate,context){return this.toKeyedSeq().reverse().findKey(predicate,context);},first:function first(){return this.find(returnTrue);},flatMap:function flatMap(mapper,context){return reify(this,flatMapFactory(this,mapper,context));},flatten:function flatten(depth){return reify(this,flattenFactory(this,depth,true));},fromEntrySeq:function fromEntrySeq(){return new FromEntriesSequence(this);},get:function get(searchKey,notSetValue){return this.find(function(_,key){return is(key,searchKey);},undefined,notSetValue);},getIn:function getIn(searchKeyPath,notSetValue){var nested=this;// Note: in an ES6 environment, we would prefer:
// for (var key of searchKeyPath) {
var iter=forceIterator(searchKeyPath);var step;while(!(step=iter.next()).done){var key=step.value;nested=nested&&nested.get?nested.get(key,NOT_SET):NOT_SET;if(nested===NOT_SET){return notSetValue;}}return nested;},groupBy:function groupBy(grouper,context){return groupByFactory(this,grouper,context);},has:function has(searchKey){return this.get(searchKey,NOT_SET)!==NOT_SET;},hasIn:function hasIn(searchKeyPath){return this.getIn(searchKeyPath,NOT_SET)!==NOT_SET;},isSubset:function isSubset(iter){iter=typeof iter.includes==='function'?iter:Iterable(iter);return this.every(function(value){return iter.includes(value);});},isSuperset:function isSuperset(iter){iter=typeof iter.isSubset==='function'?iter:Iterable(iter);return iter.isSubset(this);},keyOf:function keyOf(searchValue){return this.findKey(function(value){return is(value,searchValue);});},keySeq:function keySeq(){return this.toSeq().map(keyMapper).toIndexedSeq();},last:function last(){return this.toSeq().reverse().first();},lastKeyOf:function lastKeyOf(searchValue){return this.toKeyedSeq().reverse().keyOf(searchValue);},max:function max(comparator){return maxFactory(this,comparator);},maxBy:function maxBy(mapper,comparator){return maxFactory(this,comparator,mapper);},min:function min(comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator);},minBy:function minBy(mapper,comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator,mapper);},rest:function rest(){return this.slice(1);},skip:function skip(amount){return this.slice(Math.max(0,amount));},skipLast:function skipLast(amount){return reify(this,this.toSeq().reverse().skip(amount).reverse());},skipWhile:function skipWhile(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,true));},skipUntil:function skipUntil(predicate,context){return this.skipWhile(not(predicate),context);},sortBy:function sortBy(mapper,comparator){return reify(this,sortFactory(this,comparator,mapper));},take:function take(amount){return this.slice(0,Math.max(0,amount));},takeLast:function takeLast(amount){return reify(this,this.toSeq().reverse().take(amount).reverse());},takeWhile:function takeWhile(predicate,context){return reify(this,takeWhileFactory(this,predicate,context));},takeUntil:function takeUntil(predicate,context){return this.takeWhile(not(predicate),context);},valueSeq:function valueSeq(){return this.toIndexedSeq();},// ### Hashable Object
hashCode:function hashCode(){return this.__hash||(this.__hash=hashIterable(this));}// ### Internal
// abstract __iterate(fn, reverse)
// abstract __iterator(type, reverse)
});// var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';
// var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';
// var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';
// var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';
var IterablePrototype=Iterable.prototype;IterablePrototype[IS_ITERABLE_SENTINEL]=true;IterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.values;IterablePrototype.__toJS=IterablePrototype.toArray;IterablePrototype.__toStringMapper=quoteString;IterablePrototype.inspect=IterablePrototype.toSource=function(){return this.toString();};IterablePrototype.chain=IterablePrototype.flatMap;IterablePrototype.contains=IterablePrototype.includes;mixin(KeyedIterable,{// ### More sequential methods
flip:function flip(){return reify(this,flipFactory(this));},mapEntries:function mapEntries(mapper,context){var this$0=this;var iterations=0;return reify(this,this.toSeq().map(function(v,k){return mapper.call(context,[k,v],iterations++,this$0);}).fromEntrySeq());},mapKeys:function mapKeys(mapper,context){var this$0=this;return reify(this,this.toSeq().flip().map(function(k,v){return mapper.call(context,k,v,this$0);}).flip());}});var KeyedIterablePrototype=KeyedIterable.prototype;KeyedIterablePrototype[IS_KEYED_SENTINEL]=true;KeyedIterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.entries;KeyedIterablePrototype.__toJS=IterablePrototype.toObject;KeyedIterablePrototype.__toStringMapper=function(v,k){return JSON.stringify(k)+': '+quoteString(v);};mixin(IndexedIterable,{// ### Conversion to other types
toKeyedSeq:function toKeyedSeq(){return new ToKeyedSequence(this,false);},// ### ES6 Collection methods (ES6 Array and Map)
filter:function filter(predicate,context){return reify(this,filterFactory(this,predicate,context,false));},findIndex:function findIndex(predicate,context){var entry=this.findEntry(predicate,context);return entry?entry[0]:-1;},indexOf:function indexOf(searchValue){var key=this.keyOf(searchValue);return key===undefined?-1:key;},lastIndexOf:function lastIndexOf(searchValue){var key=this.lastKeyOf(searchValue);return key===undefined?-1:key;},reverse:function reverse(){return reify(this,reverseFactory(this,false));},slice:function slice(begin,end){return reify(this,sliceFactory(this,begin,end,false));},splice:function splice(index,removeNum/*, ...values*/){var numArgs=arguments.length;removeNum=Math.max(removeNum|0,0);if(numArgs===0||numArgs===2&&!removeNum){return this;}// If index is negative, it should resolve relative to the size of the
// collection. However size may be expensive to compute if not cached, so
// only call count() if the number is in fact negative.
index=resolveBegin(index,index<0?this.count():this.size);var spliced=this.slice(0,index);return reify(this,numArgs===1?spliced:spliced.concat(arrCopy(arguments,2),this.slice(index+removeNum)));},// ### More collection methods
findLastIndex:function findLastIndex(predicate,context){var entry=this.findLastEntry(predicate,context);return entry?entry[0]:-1;},first:function first(){return this.get(0);},flatten:function flatten(depth){return reify(this,flattenFactory(this,depth,false));},get:function get(index,notSetValue){index=wrapIndex(this,index);return index<0||this.size===Infinity||this.size!==undefined&&index>this.size?notSetValue:this.find(function(_,key){return key===index;},undefined,notSetValue);},has:function has(index){index=wrapIndex(this,index);return index>=0&&(this.size!==undefined?this.size===Infinity||index<this.size:this.indexOf(index)!==-1);},interpose:function interpose(separator){return reify(this,interposeFactory(this,separator));},interleave:function interleave(/*...iterables*/){var iterables=[this].concat(arrCopy(arguments));var zipped=zipWithFactory(this.toSeq(),IndexedSeq.of,iterables);var interleaved=zipped.flatten(true);if(zipped.size){interleaved.size=zipped.size*iterables.length;}return reify(this,interleaved);},keySeq:function keySeq(){return Range(0,this.size);},last:function last(){return this.get(-1);},skipWhile:function skipWhile(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,false));},zip:function zip(/*, ...iterables */){var iterables=[this].concat(arrCopy(arguments));return reify(this,zipWithFactory(this,defaultZipper,iterables));},zipWith:function zipWith(zipper/*, ...iterables */){var iterables=arrCopy(arguments);iterables[0]=this;return reify(this,zipWithFactory(this,zipper,iterables));}});IndexedIterable.prototype[IS_INDEXED_SENTINEL]=true;IndexedIterable.prototype[IS_ORDERED_SENTINEL]=true;mixin(SetIterable,{// ### ES6 Collection methods (ES6 Array and Map)
get:function get(value,notSetValue){return this.has(value)?value:notSetValue;},includes:function includes(value){return this.has(value);},// ### More sequential methods
keySeq:function keySeq(){return this.valueSeq();}});SetIterable.prototype.has=IterablePrototype.includes;SetIterable.prototype.contains=SetIterable.prototype.includes;// Mixin subclasses
mixin(KeyedSeq,KeyedIterable.prototype);mixin(IndexedSeq,IndexedIterable.prototype);mixin(SetSeq,SetIterable.prototype);mixin(KeyedCollection,KeyedIterable.prototype);mixin(IndexedCollection,IndexedIterable.prototype);mixin(SetCollection,SetIterable.prototype);// #pragma Helper functions
function keyMapper(v,k){return k;}function entryMapper(v,k){return[k,v];}function not(predicate){return function(){return!predicate.apply(this,arguments);};}function neg(predicate){return function(){return-predicate.apply(this,arguments);};}function quoteString(value){return typeof value==='string'?JSON.stringify(value):String(value);}function defaultZipper(){return arrCopy(arguments);}function defaultNegComparator(a,b){return a<b?1:a>b?-1:0;}function hashIterable(iterable){if(iterable.size===Infinity){return 0;}var ordered=isOrdered(iterable);var keyed=isKeyed(iterable);var h=ordered?1:0;var size=iterable.__iterate(keyed?ordered?function(v,k){h=31*h+hashMerge(hash(v),hash(k))|0;}:function(v,k){h=h+hashMerge(hash(v),hash(k))|0;}:ordered?function(v){h=31*h+hash(v)|0;}:function(v){h=h+hash(v)|0;});return murmurHashOfSize(size,h);}function murmurHashOfSize(size,h){h=imul(h,0xCC9E2D51);h=imul(h<<15|h>>>-15,0x1B873593);h=imul(h<<13|h>>>-13,5);h=(h+0xE6546B64|0)^size;h=imul(h^h>>>16,0x85EBCA6B);h=imul(h^h>>>13,0xC2B2AE35);h=smi(h^h>>>16);return h;}function hashMerge(a,b){return a^b+0x9E3779B9+(a<<6)+(a>>2)|0;// int
}var Immutable={Iterable:Iterable,Seq:Seq,Collection:Collection,Map:Map,OrderedMap:OrderedMap,List:List,Stack:Stack,Set:Set,OrderedSet:OrderedSet,Record:Record,Range:Range,Repeat:Repeat,is:is,fromJS:fromJS};return Immutable;});})(immutable);var immutableExports=immutable.exports;var Record=immutableExports.Record;var MonitorRecord=Record({id:null,// Block Id
/** Present only if the monitor is sprite-specific, such as x position */spriteName:null,/** Present only if the monitor is sprite-specific, such as x position */targetId:null,opcode:null,value:null,params:null,mode:'default',sliderMin:0,sliderMax:100,isDiscrete:true,x:null,// (x: null, y: null) Indicates that the monitor should be auto-positioned
y:null,width:0,height:0,visible:true});var monitorRecord=MonitorRecord;var blocksExecuteCache={};/**
 * @fileoverview
 * Access point for private method shared between blocks.js and execute.js for
 * caching execute information.
 */var hasRequiredBlocksExecuteCache;function requireBlocksExecuteCache(){if(hasRequiredBlocksExecuteCache)return blocksExecuteCache;hasRequiredBlocksExecuteCache=1;/**
   * A private method shared with execute to build an object containing the block
   * information execute needs and that is reset when other cached Blocks info is
   * reset.
   * @param {Blocks} blocks Blocks containing the expected blockId
   * @param {string} blockId blockId for the desired execute cache
   */blocksExecuteCache.getCached=function(){throw new Error('blocks.js has not initialized BlocksExecuteCache');};// Call after the default throwing getCached is assigned for Blocks to replace.
requireBlocks();return blocksExecuteCache;}var blocksRuntimeCache={};var hasRequiredBlocksRuntimeCache;function requireBlocksRuntimeCache(){if(hasRequiredBlocksRuntimeCache)return blocksRuntimeCache;hasRequiredBlocksRuntimeCache=1;/**
   * A set of cached data about the top block of a script.
   * @param {Blocks} container - Container holding the block and related data
   * @param {string} blockId - Id for whose block data is cached in this instance
   */var RuntimeScriptCache=/*#__PURE__*/_createClass(function RuntimeScriptCache(container,blockId){_classCallCheck(this,RuntimeScriptCache);/**
     * Container with block data for blockId.
     * @type {Blocks}
     */this.container=container;/**
     * ID for block this instance caches.
     * @type {string}
     */this.blockId=blockId;var block=container.getBlock(blockId);var fields=container.getFields(block);/**
     * Formatted fields or fields of input blocks ready for comparison in
     * runtime.
     *
     * This is a clone of parts of the targeted blocks. Changes to these
     * clones are limited to copies under RuntimeScriptCache and will not
     * appear in the original blocks in their container. This copy is
     * modified changing the case of strings to uppercase. These uppercase
     * values will be compared later by the VM.
     * @type {object}
     */this.fieldsOfInputs=Object.assign({},fields);if(Object.keys(fields).length===0){var inputs=container.getInputs(block);for(var input in inputs){if(!Object.prototype.hasOwnProperty.call(inputs,input))continue;var id=inputs[input].block;var inputBlock=container.getBlock(id);var inputFields=container.getFields(inputBlock);Object.assign(this.fieldsOfInputs,inputFields);}}for(var key in this.fieldsOfInputs){var field=this.fieldsOfInputs[key]=Object.assign({},this.fieldsOfInputs[key]);if(field.value.toUpperCase){field.value=field.value.toUpperCase();}}});/**
   * Get an array of scripts from a block container prefiltered to match opcode.
   * @param {Blocks} container - Container of blocks
   * @param {string} opcode - Opcode to filter top blocks by
   */blocksRuntimeCache.getScripts=function(){throw new Error('blocks.js has not initialized BlocksRuntimeCache');};/**
   * Exposed RuntimeScriptCache class used by integration in blocks.js.
   * @private
   */blocksRuntimeCache._RuntimeScriptCache=RuntimeScriptCache;requireBlocks();return blocksRuntimeCache;}var uid$2=uid_1;var xmlEscape$1=xmlEscape_1;var Variable$1=/*#__PURE__*/function(){/**
   * @param {string} id Id of the variable.
   * @param {string} name Name of the variable.
   * @param {string} type Type of the variable, one of '' or 'list'
   * @param {boolean} isCloud Whether the variable is stored in the cloud.
   * @constructor
   */function Variable(id,name,type,isCloud){_classCallCheck(this,Variable);this.id=id||uid$2();this.name=name;this.type=type;this.isCloud=isCloud;switch(this.type){case Variable.SCALAR_TYPE:this.value=0;break;case Variable.LIST_TYPE:this.value=[];break;case Variable.BROADCAST_MESSAGE_TYPE:this.value=this.name;break;default:throw new Error("Invalid variable type: ".concat(this.type));}}return _createClass(Variable,[{key:"toXML",value:function toXML(isLocal){isLocal=isLocal===true;return"<variable type=\"".concat(this.type,"\" id=\"").concat(this.id,"\" islocal=\"").concat(isLocal,"\" iscloud=\"").concat(this.isCloud,"\">").concat(xmlEscape$1(this.name),"</variable>");}/**
     * Type representation for scalar variables.
     * This is currently represented as ''
     * for compatibility with blockly.
     * @const {string}
     */}],[{key:"SCALAR_TYPE",get:function get(){return'';}/**
     * Type representation for list variables.
     * @const {string}
     */},{key:"LIST_TYPE",get:function get(){return'list';}/**
     * Type representation for list variables.
     * @const {string}
     */},{key:"BROADCAST_MESSAGE_TYPE",get:function get(){return'broadcast_msg';}}]);}();var variable=Variable$1;/**
 * Returns a string representing a unique id for a monitored block
 * where a single reporter block can have more than one monitor
 * (and therefore more than one monitor block) associated
 * with it (e.g. when reporter blocks have inputs).
 * @param {string} baseId The base id to use for the different monitor blocks
 * @param {object} fields The monitor block's fields object.
 */// TODO this function should eventually be the single place where all monitor
// IDs are obtained given an opcode for the reporter block and the list of
// selected parameters.
var getMonitorIdForBlockWithArgs=function getMonitorIdForBlockWithArgs(id,fields){var fieldString='';for(var fieldKey in fields){var fieldValue=fields[fieldKey].value;if(fieldKey==='CURRENTMENU'){// The 'sensing_current' block has field values in all caps.
// However, when importing from scratch 2.0, these
// could have gotten imported as lower case field values.
// Normalize the field value here so that we don't ever
// end up with a different monitor ID representing the same
// block configuration
// Note: we are not doing this for every block field that comes into
// this function so as not to make the faulty assumption that block
// field values coming in would be unique after being made lower case
fieldValue=fieldValue.toLowerCase();}fieldString+="_".concat(fieldValue);}return"".concat(id).concat(fieldString);};var getMonitorId=getMonitorIdForBlockWithArgs;function _createForOfIteratorHelper$5(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray$5(r))||e){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,u=!1;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=!0,o=r;},f:function f(){try{a||null==t.return||t.return();}finally{if(u)throw o;}}};}function _unsupportedIterableToArray$5(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray$5(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$5(r,a):void 0;}}function _arrayLikeToArray$5(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}var blocks;var hasRequiredBlocks;function requireBlocks(){if(hasRequiredBlocks)return blocks;hasRequiredBlocks=1;var adapter=adapter_1;var mutationAdapter=mutationAdapter$1;var xmlEscape=xmlEscape_1;var MonitorRecord=monitorRecord;var Clone=clone;var Map=immutableExports.Map;var BlocksExecuteCache=requireBlocksExecuteCache();var BlocksRuntimeCache=requireBlocksRuntimeCache();var log=log$3;var Variable=variable;var getMonitorIdForBlockWithArgs=getMonitorId;/**
   * @fileoverview
   * Store and mutate the VM block representation,
   * and handle updates from Scratch Blocks events.
   *//**
   * Create a block container.
   * @param {Runtime} runtime The runtime this block container operates within
   * @param {boolean} optNoGlow Optional flag to indicate that blocks in this container
   * should not request glows. This does not affect glows when clicking on a block to execute it.
   */var Blocks=/*#__PURE__*/function(){function Blocks(runtime,optNoGlow){_classCallCheck(this,Blocks);this.runtime=runtime;/**
       * All blocks in the workspace.
       * Keys are block IDs, values are metadata about the block.
       * @type {Object.<string, Object>}
       */this._blocks={};/**
       * All top-level scripts in the workspace.
       * A list of block IDs that represent scripts (i.e., first block in script).
       * @type {Array.<String>}
       */this._scripts=[];/**
       * Runtime Cache
       * @type {{inputs: {}, procedureParamNames: {}, procedureDefinitions: {}}}
       * @private
       */Object.defineProperty(this,'_cache',{writable:true,enumerable:false});this._cache={/**
         * Cache block inputs by block id
         * @type {object.<string, !Array.<object>>}
         */inputs:{},/**
         * Cache procedure Param Names by block id
         * @type {object.<string, ?Array.<string>>}
         */procedureParamNames:{},/**
         * Cache procedure definitions by block id
         * @type {object.<string, ?string>}
         */procedureDefinitions:{},/**
         * A cache for execute to use and store on. Only available to
         * execute.
         * @type {object.<string, object>}
         */_executeCached:{},/**
         * A cache of block IDs and targets to start threads on as they are
         * actively monitored.
         * @type {Array<{blockId: string, target: Target}>}
         */_monitored:null,/**
         * A cache of hat opcodes to collection of theads to execute.
         * @type {object.<string, object>}
         */scripts:{}};/**
       * Flag which indicates that blocks in this container should not glow.
       * Blocks will still glow when clicked on, but this flag is used to control
       * whether the blocks in this container can request a glow as part of
       * a running stack. E.g. the flyout block container and the monitor block container
       * should not be able to request a glow, but blocks containers belonging to
       * sprites should.
       * @type {boolean}
       */this.forceNoGlow=optNoGlow||false;}/**
     * Blockly inputs that represent statements/branch.
     * are prefixed with this string.
     * @const{string}
     */return _createClass(Blocks,[{key:"getBlock",value:/**
       * Provide an object with metadata for the requested block ID.
       * @param {!string} blockId ID of block we have stored.
       * @return {?object} Metadata about the block, if it exists.
       */function getBlock(blockId){return this._blocks[blockId];}/**
       * Get all known top-level blocks that start scripts.
       * @return {Array.<string>} List of block IDs.
       */},{key:"getScripts",value:function getScripts(){return this._scripts;}/**
        * Get the next block for a particular block
        * @param {?string} id ID of block to get the next block for
        * @return {?string} ID of next block in the sequence
        */},{key:"getNextBlock",value:function getNextBlock(id){var block=this._blocks[id];return typeof block==='undefined'?null:block.next;}/**
       * Get the branch for a particular C-shaped block.
       * @param {?string} id ID for block to get the branch for.
       * @param {?number} branchNum Which branch to select (e.g. for if-else).
       * @return {?string} ID of block in the branch.
       */},{key:"getBranch",value:function getBranch(id,branchNum){var block=this._blocks[id];if(typeof block==='undefined')return null;if(!branchNum)branchNum=1;var inputName=Blocks.BRANCH_INPUT_PREFIX;if(branchNum>1){inputName+=branchNum;}// Empty C-block?
var input=block.inputs[inputName];return typeof input==='undefined'?null:input.block;}/**
       * Get the opcode for a particular block
       * @param {?object} block The block to query
       * @return {?string} the opcode corresponding to that block
       */},{key:"getOpcode",value:function getOpcode(block){return typeof block==='undefined'?null:block.opcode;}/**
       * Get all fields and their values for a block.
       * @param {?object} block The block to query.
       * @return {?object} All fields and their values.
       */},{key:"getFields",value:function getFields(block){return typeof block==='undefined'?null:block.fields;}/**
       * Get all non-branch inputs for a block.
       * @param {?object} block the block to query.
       * @return {?Array.<object>} All non-branch inputs and their associated blocks.
       */},{key:"getInputs",value:function getInputs(block){if(typeof block==='undefined')return null;var inputs=this._cache.inputs[block.id];if(typeof inputs!=='undefined'){return inputs;}inputs={};for(var input in block.inputs){// Ignore blocks prefixed with branch prefix.
if(input.substring(0,Blocks.BRANCH_INPUT_PREFIX.length)!==Blocks.BRANCH_INPUT_PREFIX){inputs[input]=block.inputs[input];}}this._cache.inputs[block.id]=inputs;return inputs;}/**
       * Get mutation data for a block.
       * @param {?object} block The block to query.
       * @return {?object} Mutation for the block.
       */},{key:"getMutation",value:function getMutation(block){return typeof block==='undefined'?null:block.mutation;}/**
       * Get the top-level script for a given block.
       * @param {?string} id ID of block to query.
       * @return {?string} ID of top-level script block.
       */},{key:"getTopLevelScript",value:function getTopLevelScript(id){var block=this._blocks[id];if(typeof block==='undefined')return null;while(block.parent!==null){block=this._blocks[block.parent];}return block.id;}/**
       * Get the procedure definition for a given name.
       * @param {?string} name Name of procedure to query.
       * @return {?string} ID of procedure definition.
       */},{key:"getProcedureDefinition",value:function getProcedureDefinition(name){var blockID=this._cache.procedureDefinitions[name];if(typeof blockID!=='undefined'){return blockID;}for(var id in this._blocks){if(!Object.prototype.hasOwnProperty.call(this._blocks,id))continue;var block=this._blocks[id];if(block.opcode==='procedures_definition'){var internal=this._getCustomBlockInternal(block);if(internal&&internal.mutation.proccode===name){this._cache.procedureDefinitions[name]=id;// The outer define block id
return id;}}}this._cache.procedureDefinitions[name]=null;return null;}/**
       * Get names and ids of parameters for the given procedure.
       * @param {?string} name Name of procedure to query.
       * @return {?Array.<string>} List of param names for a procedure.
       */},{key:"getProcedureParamNamesAndIds",value:function getProcedureParamNamesAndIds(name){return this.getProcedureParamNamesIdsAndDefaults(name).slice(0,2);}/**
       * Get names, ids, and defaults of parameters for the given procedure.
       * @param {?string} name Name of procedure to query.
       * @return {?Array.<string>} List of param names for a procedure.
       */},{key:"getProcedureParamNamesIdsAndDefaults",value:function getProcedureParamNamesIdsAndDefaults(name){var cachedNames=this._cache.procedureParamNames[name];if(typeof cachedNames!=='undefined'){return cachedNames;}for(var id in this._blocks){if(!Object.prototype.hasOwnProperty.call(this._blocks,id))continue;var block=this._blocks[id];if(block.opcode==='procedures_prototype'&&block.mutation.proccode===name){var names=JSON.parse(block.mutation.argumentnames);var ids=JSON.parse(block.mutation.argumentids);var defaults=JSON.parse(block.mutation.argumentdefaults);this._cache.procedureParamNames[name]=[names,ids,defaults];return this._cache.procedureParamNames[name];}}this._cache.procedureParamNames[name]=null;return null;}},{key:"duplicate",value:function duplicate(){var newBlocks=new Blocks(this.runtime,this.forceNoGlow);newBlocks._blocks=Clone.simple(this._blocks);newBlocks._scripts=Clone.simple(this._scripts);return newBlocks;}// ---------------------------------------------------------------------
/**
       * Create event listener for blocks, variables, and comments. Handles validation and
       * serves as a generic adapter between the blocks, variables, and the
       * runtime interface.
       * @param {object} e Blockly "block" or "variable" event
       */},{key:"blocklyListen",value:function blocklyListen(e){// Validate event
if(_typeof(e)!=='object')return;if(typeof e.blockId!=='string'&&typeof e.varId!=='string'&&typeof e.commentId!=='string'){return;}var stage=this.runtime.getTargetForStage();var editingTarget=this.runtime.getEditingTarget();// UI event: clicked scripts toggle in the runtime.
if(e.element==='stackclick'){this.runtime.toggleScript(e.blockId,{stackClick:true});return;}// Block create/update/destroy
switch(e.type){case'create':{var newBlocks=adapter(e);// A create event can create many blocks. Add them all.
for(var i=0;i<newBlocks.length;i++){this.createBlock(newBlocks[i]);}break;}case'change':this.changeBlock({id:e.blockId,element:e.element,name:e.name,value:e.newValue});break;case'move':this.moveBlock({id:e.blockId,oldParent:e.oldParentId,oldInput:e.oldInputName,newParent:e.newParentId,newInput:e.newInputName,newCoordinate:e.newCoordinate});break;case'dragOutside':this.runtime.emitBlockDragUpdate(e.isOutside);break;case'endDrag':this.runtime.emitBlockDragUpdate(false/* areBlocksOverGui */);// Drag blocks onto another sprite
if(e.isOutside){var _newBlocks=adapter(e);this.runtime.emitBlockEndDrag(_newBlocks,e.blockId);}break;case'delete':// Don't accept delete events for missing blocks,
// or shadow blocks being obscured.
if(!Object.prototype.hasOwnProperty.call(this._blocks,e.blockId)||this._blocks[e.blockId].shadow){return;}// Inform any runtime to forget about glows on this script.
if(this._blocks[e.blockId].topLevel){this.runtime.quietGlow(e.blockId);}this.deleteBlock(e.blockId);break;case'var_create':// Check if the variable being created is global or local
// If local, create a local var on the current editing target, as long
// as there are no conflicts, and the current target is actually a sprite
// If global or if the editing target is not present or we somehow got
// into a state where a local var was requested for the stage,
// create a stage (global) var after checking for name conflicts
// on all the sprites.
if(e.isLocal&&editingTarget&&!editingTarget.isStage&&!e.isCloud){if(!editingTarget.lookupVariableById(e.varId)){editingTarget.createVariable(e.varId,e.varName,e.varType);this.emitProjectChanged();}}else{if(stage.lookupVariableById(e.varId)){// Do not re-create a variable if it already exists
return;}// Check for name conflicts in all of the targets
var allTargets=this.runtime.targets.filter(function(t){return t.isOriginal;});var _iterator=_createForOfIteratorHelper$5(allTargets),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var target=_step.value;if(target.lookupVariableByNameAndType(e.varName,e.varType,true)){return;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}stage.createVariable(e.varId,e.varName,e.varType,e.isCloud);this.emitProjectChanged();}break;case'var_rename':if(editingTarget&&Object.prototype.hasOwnProperty.call(editingTarget.variables,e.varId)){// This is a local variable, rename on the current target
editingTarget.renameVariable(e.varId,e.newName);// Update all the blocks on the current target that use
// this variable
editingTarget.blocks.updateBlocksAfterVarRename(e.varId,e.newName);}else{// This is a global variable
stage.renameVariable(e.varId,e.newName);// Update all blocks on all targets that use the renamed variable
var targets=this.runtime.targets;for(var _i=0;_i<targets.length;_i++){var currTarget=targets[_i];currTarget.blocks.updateBlocksAfterVarRename(e.varId,e.newName);}}this.emitProjectChanged();break;case'var_delete':{var _target=editingTarget&&Object.prototype.hasOwnProperty.call(editingTarget.variables,e.varId)?editingTarget:stage;_target.deleteVariable(e.varId);this.emitProjectChanged();break;}case'comment_create':if(this.runtime.getEditingTarget()){var _currTarget=this.runtime.getEditingTarget();_currTarget.createComment(e.commentId,e.blockId,e.text,e.xy.x,e.xy.y,e.width,e.height,e.minimized);if(_currTarget.comments[e.commentId].x===null&&_currTarget.comments[e.commentId].y===null){// Block comments imported from 2.0 projects are imported with their
// x and y coordinates set to null so that scratch-blocks can
// auto-position them. If we are receiving a create event for these
// comments, then the auto positioning should have taken place.
// Update the x and y position of these comments to match the
// one from the event.
_currTarget.comments[e.commentId].x=e.xy.x;_currTarget.comments[e.commentId].y=e.xy.y;}}this.emitProjectChanged();break;case'comment_change':if(this.runtime.getEditingTarget()){var _currTarget2=this.runtime.getEditingTarget();if(!Object.prototype.hasOwnProperty.call(_currTarget2.comments,e.commentId)){log.warn("Cannot change comment with id ".concat(e.commentId," because it does not exist."));return;}var comment=_currTarget2.comments[e.commentId];var change=e.newContents_;if(Object.prototype.hasOwnProperty.call(change,'minimized')){comment.minimized=change.minimized;}if(Object.prototype.hasOwnProperty.call(change,'width')&&Object.prototype.hasOwnProperty.call(change,'height')){comment.width=change.width;comment.height=change.height;}if(Object.prototype.hasOwnProperty.call(change,'text')){comment.text=change.text;}this.emitProjectChanged();}break;case'comment_move':if(this.runtime.getEditingTarget()){var _currTarget3=this.runtime.getEditingTarget();if(_currTarget3&&!Object.prototype.hasOwnProperty.call(_currTarget3.comments,e.commentId)){log.warn("Cannot change comment with id ".concat(e.commentId," because it does not exist."));return;}var _comment=_currTarget3.comments[e.commentId];var newCoord=e.newCoordinate_;_comment.x=newCoord.x;_comment.y=newCoord.y;this.emitProjectChanged();}break;case'comment_delete':if(this.runtime.getEditingTarget()){var _currTarget4=this.runtime.getEditingTarget();if(!Object.prototype.hasOwnProperty.call(_currTarget4.comments,e.commentId)){// If we're in this state, we have probably received
// a delete event from a workspace that we switched from
// (e.g. a delete event for a comment on sprite a's workspace
// when switching from sprite a to sprite b)
return;}delete _currTarget4.comments[e.commentId];if(e.blockId){var block=_currTarget4.blocks.getBlock(e.blockId);if(!block){log.warn("Could not find block referenced by comment with id: ".concat(e.commentId));return;}delete block.comment;}this.emitProjectChanged();}break;}}// ---------------------------------------------------------------------
/**
       * Reset all runtime caches.
       */},{key:"resetCache",value:function resetCache(){this._cache.inputs={};this._cache.procedureParamNames={};this._cache.procedureDefinitions={};this._cache._executeCached={};this._cache._monitored=null;this._cache.scripts={};}/**
       * Emit a project changed event if this is a block container
       * that can affect the project state.
       */},{key:"emitProjectChanged",value:function emitProjectChanged(){if(!this.forceNoGlow){this.runtime.emitProjectChanged();}}/**
       * Block management: create blocks and scripts from a `create` event
       * @param {!object} block Blockly create event to be processed
       */},{key:"createBlock",value:function createBlock(block){// Does the block already exist?
// Could happen, e.g., for an unobscured shadow.
if(Object.prototype.hasOwnProperty.call(this._blocks,block.id)){return;}// Create new block.
this._blocks[block.id]=block;// Push block id to scripts array.
// Blocks are added as a top-level stack if they are marked as a top-block
// (if they were top-level XML in the event).
if(block.topLevel){this._addScript(block.id);}this.resetCache();// A new block was actually added to the block container,
// emit a project changed event
this.emitProjectChanged();}/**
       * Block management: change block field values
       * @param {!object} args Blockly change event to be processed
       */},{key:"changeBlock",value:function changeBlock(args){// Validate
if(['field','mutation','checkbox'].indexOf(args.element)===-1)return;var block=this._blocks[args.id];if(typeof block==='undefined')return;switch(args.element){case'field':// TODO when the field of a monitored block changes,
// update the checkbox in the flyout based on whether
// a monitor for that current combination of selected parameters exists
// e.g.
// 1. check (current [v year])
// 2. switch dropdown in flyout block to (current [v minute])
// 3. the checkbox should become unchecked if we're not already
//    monitoring current minute
// Update block value
if(!block.fields[args.name])return;if(args.name==='VARIABLE'||args.name==='LIST'||args.name==='BROADCAST_OPTION'){// Get variable name using the id in args.value.
var variable=this.runtime.getEditingTarget().lookupVariableById(args.value);if(variable){block.fields[args.name].value=variable.name;block.fields[args.name].id=args.value;}}else{// Changing the value in a dropdown
block.fields[args.name].value=args.value;// The selected item in the sensing of block menu needs to change based on the
// selected target.  Set it to the first item in the menu list.
// TODO: (#1787)
if(block.opcode==='sensing_of_object_menu'){if(block.fields.OBJECT.value==='_stage_'){this._blocks[block.parent].fields.PROPERTY.value='backdrop #';}else{this._blocks[block.parent].fields.PROPERTY.value='x position';}this.runtime.requestBlocksUpdate();}var flyoutBlock=block.shadow&&block.parent?this._blocks[block.parent]:block;if(flyoutBlock.isMonitored){this.runtime.requestUpdateMonitor(Map({id:flyoutBlock.id,params:this._getBlockParams(flyoutBlock)}));}}break;case'mutation':block.mutation=mutationAdapter(args.value);break;case'checkbox':{// A checkbox usually has a one to one correspondence with the monitor
// block but in the case of monitored reporters that have arguments,
// map the old id to a new id, creating a new monitor block if necessary
if(block.fields&&Object.keys(block.fields).length>0&&block.opcode!=='data_variable'&&block.opcode!=='data_listcontents'){// This block has an argument which needs to get separated out into
// multiple monitor blocks with ids based on the selected argument
var newId=getMonitorIdForBlockWithArgs(block.id,block.fields);// Note: we're not just constantly creating a longer and longer id everytime we check
// the checkbox because we're using the id of the block in the flyout as the base
// check if a block with the new id already exists, otherwise create
var newBlock=this.runtime.monitorBlocks.getBlock(newId);if(!newBlock){newBlock=JSON.parse(JSON.stringify(block));newBlock.id=newId;this.runtime.monitorBlocks.createBlock(newBlock);}block=newBlock;// Carry on through the rest of this code with newBlock
}var wasMonitored=block.isMonitored;block.isMonitored=args.value;// Variable blocks may be sprite specific depending on the owner of the variable
var isSpriteLocalVariable=false;if(block.opcode==='data_variable'){isSpriteLocalVariable=!this.runtime.getTargetForStage().variables[block.fields.VARIABLE.id];}else if(block.opcode==='data_listcontents'){isSpriteLocalVariable=!this.runtime.getTargetForStage().variables[block.fields.LIST.id];}var isSpriteSpecific=isSpriteLocalVariable||Object.prototype.hasOwnProperty.call(this.runtime.monitorBlockInfo,block.opcode)&&this.runtime.monitorBlockInfo[block.opcode].isSpriteSpecific;if(isSpriteSpecific){// If creating a new sprite specific monitor, the only possible target is
// the current editing one b/c you cannot dynamically create monitors.
// Also, do not change the targetId if it has already been assigned
block.targetId=block.targetId||this.runtime.getEditingTarget().id;}else{block.targetId=null;}if(wasMonitored&&!block.isMonitored){this.runtime.requestHideMonitor(block.id);}else if(!wasMonitored&&block.isMonitored){// Tries to show the monitor for specified block. If it doesn't exist, add the monitor.
if(!this.runtime.requestShowMonitor(block.id)){this.runtime.requestAddMonitor(MonitorRecord({id:block.id,targetId:block.targetId,spriteName:block.targetId?this.runtime.getTargetById(block.targetId).getName():null,opcode:block.opcode,params:this._getBlockParams(block),// @todo(vm#565) for numerical values with decimals, some countries use comma
value:'',mode:block.opcode==='data_listcontents'?'list':'default'}));}}break;}}this.emitProjectChanged();this.resetCache();}/**
       * Block management: move blocks from parent to parent
       * @param {!object} e Blockly move event to be processed
       */},{key:"moveBlock",value:function moveBlock(e){if(!Object.prototype.hasOwnProperty.call(this._blocks,e.id)){return;}var block=this._blocks[e.id];// Track whether a change actually occurred
// ignoring changes like routine re-positioning
// of a block when loading a workspace
var didChange=false;// Move coordinate changes.
if(e.newCoordinate){didChange=block.x!==e.newCoordinate.x||block.y!==e.newCoordinate.y;block.x=e.newCoordinate.x;block.y=e.newCoordinate.y;}// Remove from any old parent.
if(typeof e.oldParent!=='undefined'){var oldParent=this._blocks[e.oldParent];if(typeof e.oldInput!=='undefined'&&oldParent.inputs[e.oldInput].block===e.id){// This block was connected to the old parent's input.
oldParent.inputs[e.oldInput].block=null;}else if(oldParent.next===e.id){// This block was connected to the old parent's next connection.
oldParent.next=null;}this._blocks[e.id].parent=null;didChange=true;}// Is this block a top-level block?
if(typeof e.newParent==='undefined'){this._addScript(e.id);}else{// Remove script, if one exists.
this._deleteScript(e.id);// Otherwise, try to connect it in its new place.
if(typeof e.newInput==='undefined'){// Moved to the new parent's next connection.
this._blocks[e.newParent].next=e.id;}else{// Moved to the new parent's input.
// Don't obscure the shadow block.
var oldShadow=null;if(Object.prototype.hasOwnProperty.call(this._blocks[e.newParent].inputs,e.newInput)){oldShadow=this._blocks[e.newParent].inputs[e.newInput].shadow;}// If the block being attached is itself a shadow, make sure to set
// both block and shadow to that blocks ID. This happens when adding
// inputs to a custom procedure.
if(this._blocks[e.id].shadow)oldShadow=e.id;this._blocks[e.newParent].inputs[e.newInput]={name:e.newInput,block:e.id,shadow:oldShadow};}this._blocks[e.id].parent=e.newParent;didChange=true;}this.resetCache();if(didChange)this.emitProjectChanged();}/**
       * Block management: run all blocks.
       * @param {!object} runtime Runtime to run all blocks in.
       */},{key:"runAllMonitored",value:function runAllMonitored(runtime){var _this=this;if(this._cache._monitored===null){this._cache._monitored=Object.keys(this._blocks).filter(function(blockId){return _this.getBlock(blockId).isMonitored;}).map(function(blockId){var targetId=_this.getBlock(blockId).targetId;return{blockId:blockId,target:targetId?runtime.getTargetById(targetId):null};});}var monitored=this._cache._monitored;for(var i=0;i<monitored.length;i++){var _monitored$i=monitored[i],blockId=_monitored$i.blockId,target=_monitored$i.target;runtime.addMonitorScript(blockId,target);}}/**
       * Block management: delete blocks and their associated scripts. Does nothing if a block
       * with the given ID does not exist.
       * @param {!string} blockId Id of block to delete
       */},{key:"deleteBlock",value:function deleteBlock(blockId){// @todo In runtime, stop threads running on this script.
// Get block
var block=this._blocks[blockId];if(!block){// No block with the given ID exists
return;}// Delete children
if(block.next!==null){this.deleteBlock(block.next);}// Delete inputs (including branches)
for(var input in block.inputs){// If it's null, the block in this input moved away.
if(block.inputs[input].block!==null){this.deleteBlock(block.inputs[input].block);}// Delete obscured shadow blocks.
if(block.inputs[input].shadow!==null&&block.inputs[input].shadow!==block.inputs[input].block){this.deleteBlock(block.inputs[input].shadow);}}// Delete any script starting with this block.
this._deleteScript(blockId);// Delete block itself.
delete this._blocks[blockId];this.resetCache();this.emitProjectChanged();}/**
       * Delete all blocks and their associated scripts.
       */},{key:"deleteAllBlocks",value:function deleteAllBlocks(){var _this2=this;var blockIds=Object.keys(this._blocks);blockIds.forEach(function(blockId){return _this2.deleteBlock(blockId);});}/**
       * Returns a map of all references to variables or lists from blocks
       * in this block container.
       * @param {Array<object>} optBlocks Optional list of blocks to constrain the search to.
       * This is useful for getting variable/list references for a stack of blocks instead
       * of all blocks on the workspace
       * @param {?boolean} optIncludeBroadcast Optional whether to include broadcast fields.
       * @return {object} A map of variable ID to a list of all variable references
       * for that ID. A variable reference contains the field referencing that variable
       * and also the type of the variable being referenced.
       */},{key:"getAllVariableAndListReferences",value:function getAllVariableAndListReferences(optBlocks,optIncludeBroadcast){var blocks=optBlocks?optBlocks:this._blocks;var allReferences=Object.create(null);for(var blockId in blocks){var varOrListField=null;var varType=null;if(blocks[blockId].fields.VARIABLE){varOrListField=blocks[blockId].fields.VARIABLE;varType=Variable.SCALAR_TYPE;}else if(blocks[blockId].fields.LIST){varOrListField=blocks[blockId].fields.LIST;varType=Variable.LIST_TYPE;}else if(optIncludeBroadcast&&blocks[blockId].fields.BROADCAST_OPTION){varOrListField=blocks[blockId].fields.BROADCAST_OPTION;varType=Variable.BROADCAST_MESSAGE_TYPE;}if(varOrListField){var currVarId=varOrListField.id;if(allReferences[currVarId]){allReferences[currVarId].push({referencingField:varOrListField,type:varType});}else{allReferences[currVarId]=[{referencingField:varOrListField,type:varType}];}}}return allReferences;}/**
       * Keep blocks up to date after a variable gets renamed.
       * @param {string} varId The id of the variable that was renamed
       * @param {string} newName The new name of the variable that was renamed
       */},{key:"updateBlocksAfterVarRename",value:function updateBlocksAfterVarRename(varId,newName){var blocks=this._blocks;for(var blockId in blocks){var varOrListField=null;if(blocks[blockId].fields.VARIABLE){varOrListField=blocks[blockId].fields.VARIABLE;}else if(blocks[blockId].fields.LIST){varOrListField=blocks[blockId].fields.LIST;}if(varOrListField){var currFieldId=varOrListField.id;if(varId===currFieldId){varOrListField.value=newName;}}}}/**
       * Keep blocks up to date after they are shared between targets.
       * @param {boolean} isStage If the new target is a stage.
       */},{key:"updateTargetSpecificBlocks",value:function updateTargetSpecificBlocks(isStage){var blocks=this._blocks;for(var blockId in blocks){if(isStage&&blocks[blockId].opcode==='event_whenthisspriteclicked'){blocks[blockId].opcode='event_whenstageclicked';}else if(!isStage&&blocks[blockId].opcode==='event_whenstageclicked'){blocks[blockId].opcode='event_whenthisspriteclicked';}}}/**
       * Update blocks after a sound, costume, or backdrop gets renamed.
       * Any block referring to the old name of the asset should get updated
       * to refer to the new name.
       * @param {string} oldName The old name of the asset that was renamed.
       * @param {string} newName The new name of the asset that was renamed.
       * @param {string} assetType String representation of the kind of asset
       * that was renamed. This can be one of 'sprite','costume', 'sound', or
       * 'backdrop'.
       */},{key:"updateAssetName",value:function updateAssetName(oldName,newName,assetType){var getAssetField;if(assetType==='costume'){getAssetField=this._getCostumeField.bind(this);}else if(assetType==='sound'){getAssetField=this._getSoundField.bind(this);}else if(assetType==='backdrop'){getAssetField=this._getBackdropField.bind(this);}else if(assetType==='sprite'){getAssetField=this._getSpriteField.bind(this);}else{return;}var blocks=this._blocks;for(var blockId in blocks){var assetField=getAssetField(blockId);if(assetField&&assetField.value===oldName){assetField.value=newName;}}}/**
       * Update sensing_of blocks after a variable gets renamed.
       * @param {string} oldName The old name of the variable that was renamed.
       * @param {string} newName The new name of the variable that was renamed.
       * @param {string} targetName The name of the target the variable belongs to.
       * @return {boolean} Returns true if any of the blocks were updated.
       */},{key:"updateSensingOfReference",value:function updateSensingOfReference(oldName,newName,targetName){var blocks=this._blocks;var blockUpdated=false;for(var blockId in blocks){var block=blocks[blockId];if(block.opcode==='sensing_of'&&block.fields.PROPERTY.value===oldName&&// If block and shadow are different, it means a block is inserted to OBJECT, and should be ignored.
block.inputs.OBJECT.block===block.inputs.OBJECT.shadow){var inputBlock=this.getBlock(block.inputs.OBJECT.block);if(inputBlock.fields.OBJECT.value===targetName){block.fields.PROPERTY.value=newName;blockUpdated=true;}}}if(blockUpdated)this.resetCache();return blockUpdated;}/**
       * Helper function to retrieve a costume menu field from a block given its id.
       * @param {string} blockId A unique identifier for a block
       * @return {?object} The costume menu field of the block with the given block id.
       * Null if either a block with the given id doesn't exist or if a costume menu field
       * does not exist on the block with the given id.
       */},{key:"_getCostumeField",value:function _getCostumeField(blockId){var block=this.getBlock(blockId);if(block&&Object.prototype.hasOwnProperty.call(block.fields,'COSTUME')){return block.fields.COSTUME;}return null;}/**
       * Helper function to retrieve a sound menu field from a block given its id.
       * @param {string} blockId A unique identifier for a block
       * @return {?object} The sound menu field of the block with the given block id.
       * Null, if either a block with the given id doesn't exist or if a sound menu field
       * does not exist on the block with the given id.
       */},{key:"_getSoundField",value:function _getSoundField(blockId){var block=this.getBlock(blockId);if(block&&Object.prototype.hasOwnProperty.call(block.fields,'SOUND_MENU')){return block.fields.SOUND_MENU;}return null;}/**
       * Helper function to retrieve a backdrop menu field from a block given its id.
       * @param {string} blockId A unique identifier for a block
       * @return {?object} The backdrop menu field of the block with the given block id.
       * Null, if either a block with the given id doesn't exist or if a backdrop menu field
       * does not exist on the block with the given id.
       */},{key:"_getBackdropField",value:function _getBackdropField(blockId){var block=this.getBlock(blockId);if(block&&Object.prototype.hasOwnProperty.call(block.fields,'BACKDROP')){return block.fields.BACKDROP;}return null;}/**
       * Helper function to retrieve a sprite menu field from a block given its id.
       * @param {string} blockId A unique identifier for a block
       * @return {?object} The sprite menu field of the block with the given block id.
       * Null, if either a block with the given id doesn't exist or if a sprite menu field
       * does not exist on the block with the given id.
       */},{key:"_getSpriteField",value:function _getSpriteField(blockId){var block=this.getBlock(blockId);if(!block){return null;}var spriteMenuNames=['TOWARDS','TO','OBJECT','VIDEOONMENU2','DISTANCETOMENU','TOUCHINGOBJECTMENU','CLONE_OPTION'];for(var i=0;i<spriteMenuNames.length;i++){var menuName=spriteMenuNames[i];if(Object.prototype.hasOwnProperty.call(block.fields,menuName)){return block.fields[menuName];}}return null;}// ---------------------------------------------------------------------
/**
       * Encode all of `this._blocks` as an XML string usable
       * by a Blockly/scratch-blocks workspace.
       * @param {object<string, Comment>} comments Map of comments referenced by id
       * @return {string} String of XML representing this object's blocks.
       */},{key:"toXML",value:function toXML(comments){var _this3=this;return this._scripts.map(function(script){return _this3.blockToXML(script,comments);}).join();}/**
       * Recursively encode an individual block and its children
       * into a Blockly/scratch-blocks XML string.
       * @param {!string} blockId ID of block to encode.
       * @param {object<string, Comment>} comments Map of comments referenced by id
       * @return {string} String of XML representing this block and any children.
       */},{key:"blockToXML",value:function blockToXML(blockId,comments){var block=this._blocks[blockId];// block should exist, but currently some blocks' next property point
// to a blockId for non-existent blocks. Until we track down that behavior,
// this early exit allows the project to load.
if(!block)return;// Encode properties of this block.
var tagName=block.shadow?'shadow':'block';var xmlString="<".concat(tagName,"\n                id=\"").concat(block.id,"\"\n                type=\"").concat(block.opcode,"\"\n                ").concat(block.topLevel?"x=\"".concat(block.x,"\" y=\"").concat(block.y,"\""):'',"\n            >");var commentId=block.comment;if(commentId){if(comments){if(Object.prototype.hasOwnProperty.call(comments,commentId)){xmlString+=comments[commentId].toXML();}else{log.warn("Could not find comment with id: ".concat(commentId," in provided comment descriptions."));}}else{log.warn("Cannot serialize comment with id: ".concat(commentId,"; no comment descriptions provided."));}}// Add any mutation. Must come before inputs.
if(block.mutation){xmlString+=this.mutationToXML(block.mutation);}// Add any inputs on this block.
for(var input in block.inputs){if(!Object.prototype.hasOwnProperty.call(block.inputs,input))continue;var blockInput=block.inputs[input];// Only encode a value tag if the value input is occupied.
if(blockInput.block||blockInput.shadow){xmlString+="<value name=\"".concat(blockInput.name,"\">");if(blockInput.block){xmlString+=this.blockToXML(blockInput.block,comments);}if(blockInput.shadow&&blockInput.shadow!==blockInput.block){// Obscured shadow.
xmlString+=this.blockToXML(blockInput.shadow,comments);}xmlString+='</value>';}}// Add any fields on this block.
for(var field in block.fields){if(!Object.prototype.hasOwnProperty.call(block.fields,field))continue;var blockField=block.fields[field];xmlString+="<field name=\"".concat(blockField.name,"\"");var fieldId=blockField.id;if(fieldId){xmlString+=" id=\"".concat(fieldId,"\"");}var varType=blockField.variableType;if(typeof varType==='string'){xmlString+=" variabletype=\"".concat(varType,"\"");}var value=blockField.value;if(typeof value==='string'){value=xmlEscape(blockField.value);}xmlString+=">".concat(value,"</field>");}// Add blocks connected to the next connection.
if(block.next){xmlString+="<next>".concat(this.blockToXML(block.next,comments),"</next>");}xmlString+="</".concat(tagName,">");return xmlString;}/**
       * Recursively encode a mutation object to XML.
       * @param {!object} mutation Object representing a mutation.
       * @return {string} XML string representing a mutation.
       */},{key:"mutationToXML",value:function mutationToXML(mutation){var mutationString="<".concat(mutation.tagName);for(var prop in mutation){if(prop==='children'||prop==='tagName')continue;var mutationValue=typeof mutation[prop]==='string'?xmlEscape(mutation[prop]):mutation[prop];// Handle dynamic extension blocks
if(prop==='blockInfo'){mutationValue=xmlEscape(JSON.stringify(mutation[prop]));}mutationString+=" ".concat(prop,"=\"").concat(mutationValue,"\"");}mutationString+='>';for(var i=0;i<mutation.children.length;i++){mutationString+=this.mutationToXML(mutation.children[i]);}mutationString+="</".concat(mutation.tagName,">");return mutationString;}// ---------------------------------------------------------------------
/**
       * Helper to serialize block fields and input fields for reporting new monitors
       * @param {!object} block Block to be paramified.
       * @return {!object} object of param key/values.
       */},{key:"_getBlockParams",value:function _getBlockParams(block){var params={};for(var key in block.fields){params[key]=block.fields[key].value;}for(var inputKey in block.inputs){var inputBlock=this._blocks[block.inputs[inputKey].block];for(var _key in inputBlock.fields){params[_key]=inputBlock.fields[_key].value;}}return params;}/**
       * Helper to get the corresponding internal procedure definition block
       * @param {!object} defineBlock Outer define block.
       * @return {!object} internal definition block which has the mutation.
       */},{key:"_getCustomBlockInternal",value:function _getCustomBlockInternal(defineBlock){if(defineBlock.inputs&&defineBlock.inputs.custom_block){return this._blocks[defineBlock.inputs.custom_block.block];}}/**
       * Helper to add a stack to `this._scripts`.
       * @param {?string} topBlockId ID of block that starts the script.
       */},{key:"_addScript",value:function _addScript(topBlockId){var i=this._scripts.indexOf(topBlockId);if(i>-1)return;// Already in scripts.
this._scripts.push(topBlockId);// Update `topLevel` property on the top block.
this._blocks[topBlockId].topLevel=true;}/**
       * Helper to remove a script from `this._scripts`.
       * @param {?string} topBlockId ID of block that starts the script.
       */},{key:"_deleteScript",value:function _deleteScript(topBlockId){var i=this._scripts.indexOf(topBlockId);if(i>-1)this._scripts.splice(i,1);// Update `topLevel` property on the top block.
if(this._blocks[topBlockId])this._blocks[topBlockId].topLevel=false;}}],[{key:"BRANCH_INPUT_PREFIX",get:function get(){return'SUBSTACK';}}]);}();/**
   * A private method shared with execute to build an object containing the block
   * information execute needs and that is reset when other cached Blocks info is
   * reset.
   * @param {Blocks} blocks Blocks containing the expected blockId
   * @param {string} blockId blockId for the desired execute cache
   * @param {function} CacheType constructor for cached block information
   * @return {object} execute cache object
   */BlocksExecuteCache.getCached=function(blocks,blockId,CacheType){var cached=blocks._cache._executeCached[blockId];if(typeof cached!=='undefined'){return cached;}var block=blocks.getBlock(blockId);if(typeof block==='undefined')return null;if(typeof CacheType==='undefined'){cached={id:blockId,opcode:blocks.getOpcode(block),fields:blocks.getFields(block),inputs:blocks.getInputs(block),mutation:blocks.getMutation(block)};}else{cached=new CacheType(blocks,{id:blockId,opcode:blocks.getOpcode(block),fields:blocks.getFields(block),inputs:blocks.getInputs(block),mutation:blocks.getMutation(block)});}blocks._cache._executeCached[blockId]=cached;return cached;};/**
   * Cache class constructor for runtime. Used to consider what threads should
   * start based on hat data.
   * @type {function}
   */var RuntimeScriptCache=BlocksRuntimeCache._RuntimeScriptCache;/**
   * Get an array of scripts from a block container prefiltered to match opcode.
   * @param {Blocks} blocks - Container of blocks
   * @param {string} opcode - Opcode to filter top blocks by
   * @returns {Array.<RuntimeScriptCache>} - Array of RuntimeScriptCache cache
   *   objects
   */BlocksRuntimeCache.getScripts=function(blocks,opcode){var scripts=blocks._cache.scripts[opcode];if(!scripts){scripts=blocks._cache.scripts[opcode]=[];var allScripts=blocks._scripts;for(var i=0;i<allScripts.length;i++){var topBlockId=allScripts[i];var block=blocks.getBlock(topBlockId);if(block.opcode===opcode){scripts.push(new RuntimeScriptCache(blocks,topBlockId));}}}return scripts;};blocks=Blocks;return blocks;}var uid$1=uid_1;var xmlEscape=xmlEscape_1;var Comment$1=/*#__PURE__*/function(){/**
   * @param {string} id Id of the comment.
   * @param {string} text Text content of the comment.
   * @param {number} x X position of the comment on the workspace.
   * @param {number} y Y position of the comment on the workspace.
   * @param {number} width The width of the comment when it is full size.
   * @param {number} height The height of the comment when it is full size.
   * @param {boolean} minimized Whether the comment is minimized.
   * @constructor
   */function Comment(id,text,x,y,width,height,minimized){_classCallCheck(this,Comment);this.id=id||uid$1();this.text=text;this.x=x;this.y=y;this.width=Math.max(Number(width),Comment.MIN_WIDTH);this.height=Math.max(Number(height),Comment.MIN_HEIGHT);this.minimized=minimized||false;this.blockId=null;}return _createClass(Comment,[{key:"toXML",value:function toXML(){return"<comment id=\"".concat(this.id,"\" x=\"").concat(this.x,"\" y=\"").concat(this.y,"\" w=\"").concat(this.width,"\" h=\"").concat(this.height,"\" pinned=\"").concat(this.blockId!==null,"\" minimized=\"").concat(this.minimized,"\">").concat(xmlEscape(this.text),"</comment>");}// TODO choose min and defaults for width and height
}],[{key:"MIN_WIDTH",get:function get(){return 20;}},{key:"MIN_HEIGHT",get:function get(){return 20;}},{key:"DEFAULT_WIDTH",get:function get(){return 100;}},{key:"DEFAULT_HEIGHT",get:function get(){return 100;}}]);}();var comment=Comment$1;var VariableUtil$1=/*#__PURE__*/function(){function VariableUtil(){_classCallCheck(this,VariableUtil);}return _createClass(VariableUtil,null,[{key:"_mergeVarRefObjects",value:function _mergeVarRefObjects(accum,obj2){for(var id in obj2){if(accum[id]){accum[id]=accum[id].concat(obj2[id]);}else{accum[id]=obj2[id];}}return accum;}/**
     * Get all variable/list references in the given list of targets
     * in the project.
     * @param {Array.<Target>} targets The list of targets to get the variable
     * and list references from.
     * @param {boolean} shouldIncludeBroadcast Whether to include broadcast message fields.
     * @return {object} An object with variable ids as the keys and a list of block fields referencing
     * the variable.
     */},{key:"getAllVarRefsForTargets",value:function getAllVarRefsForTargets(targets,shouldIncludeBroadcast){return targets.map(function(t){return t.blocks.getAllVariableAndListReferences(null,shouldIncludeBroadcast);}).reduce(VariableUtil._mergeVarRefObjects,{});}/**
     * Give all variable references provided a new id and possibly new name.
     * @param {Array<object>} referencesToUpdate Context of the change, the object containing variable
     * references to update.
     * @param {string} newId ID of the variable that the old references should be replaced with
     * @param {?string} optNewName New variable name to merge with. The old
     * variable name in the references being updated should be replaced with this new name.
     * If this parameter is not provided or is '', no name change occurs.
     */},{key:"updateVariableIdentifiers",value:function updateVariableIdentifiers(referencesToUpdate,newId,optNewName){referencesToUpdate.map(function(ref){ref.referencingField.id=newId;if(optNewName){ref.referencingField.value=optNewName;}return ref;});}}]);}();var variableUtil=VariableUtil$1;function _createForOfIteratorHelper$4(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray$4(r))||e){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,u=!1;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=!0,o=r;},f:function f(){try{a||null==t.return||t.return();}finally{if(u)throw o;}}};}function _unsupportedIterableToArray$4(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray$4(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$4(r,a):void 0;}}function _arrayLikeToArray$4(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}function _callSuper$D(t,o,e){return o=_getPrototypeOf$1(o),_possibleConstructorReturn$1(t,_isNativeReflectConstruct$E()?Reflect.construct(o,[],_getPrototypeOf$1(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$E(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$E=function _isNativeReflectConstruct(){return!!t;})();}var EventEmitter=require$$0$3;var Blocks=requireBlocks();var Variable=variable;var Comment=comment;var uid=uid_1;var Map$1=immutableExports.Map;var log=log$3;var StringUtil$1=stringUtil;var VariableUtil=variableUtil;/**
 * @fileoverview
 * A Target is an abstract "code-running" object for the Scratch VM.
 * Examples include sprites/clones or potentially physical-world devices.
 */var Target$1=/*#__PURE__*/function(_EventEmitter){/**
   * @param {Runtime} runtime Reference to the runtime.
   * @param {?Blocks} blocks Blocks instance for the blocks owned by this target.
   * @constructor
   */function Target(runtime,blocks){var _this;_classCallCheck(this,Target);_this=_callSuper$D(this,Target);if(!blocks){blocks=new Blocks(runtime);}/**
     * Reference to the runtime.
     * @type {Runtime}
     */_this.runtime=runtime;/**
     * A unique ID for this target.
     * @type {string}
     */_this.id=uid();/**
     * Blocks run as code for this target.
     * @type {!Blocks}
     */_this.blocks=blocks;/**
     * Dictionary of variables and their values for this target.
     * Key is the variable id.
     * @type {Object.<string,*>}
     */_this.variables={};/**
     * Dictionary of comments for this target.
     * Key is the comment id.
     * @type {Object.<string,*>}
     */_this.comments={};/**
     * Dictionary of custom state for this target.
     * This can be used to store target-specific custom state for blocks which need it.
     * TODO: do we want to persist this in SB3 files?
     * @type {Object.<string,*>}
     */_this._customState={};/**
     * Currently known values for edge-activated hats.
     * Keys are block ID for the hat; values are the currently known values.
     * @type {Object.<string, *>}
     */_this._edgeActivatedHatValues={};return _this;}/**
   * Called when the project receives a "green flag."
   * @abstract
   */_inherits$1(Target,_EventEmitter);return _createClass(Target,[{key:"onGreenFlag",value:function onGreenFlag(){}/**
     * Return a human-readable name for this target.
     * Target implementations should override this.
     * @abstract
     * @returns {string} Human-readable name for the target.
     */},{key:"getName",value:function getName(){return this.id;}/**
     * Update an edge-activated hat block value.
     * @param {!string} blockId ID of hat to store value for.
     * @param {*} newValue Value to store for edge-activated hat.
     * @return {*} The old value for the edge-activated hat.
     */},{key:"updateEdgeActivatedValue",value:function updateEdgeActivatedValue(blockId,newValue){var oldValue=this._edgeActivatedHatValues[blockId];this._edgeActivatedHatValues[blockId]=newValue;return oldValue;}},{key:"hasEdgeActivatedValue",value:function hasEdgeActivatedValue(blockId){return Object.prototype.hasOwnProperty.call(this._edgeActivatedHatValues,blockId);}/**
     * Clear all edge-activaed hat values.
     */},{key:"clearEdgeActivatedValues",value:function clearEdgeActivatedValues(){this._edgeActivatedHatValues={};}/**
     * Look up a variable object, first by id, and then by name if the id is not found.
     * Create a new variable if both lookups fail.
     * @param {string} id Id of the variable.
     * @param {string} name Name of the variable.
     * @return {!Variable} Variable object.
     */},{key:"lookupOrCreateVariable",value:function lookupOrCreateVariable(id,name){var variable=this.lookupVariableById(id);if(variable)return variable;variable=this.lookupVariableByNameAndType(name,Variable.SCALAR_TYPE);if(variable)return variable;// No variable with this name exists - create it locally.
var newVariable=new Variable(id,name,Variable.SCALAR_TYPE,false);this.variables[id]=newVariable;return newVariable;}/**
     * Look up a broadcast message object with the given id and return it
     * if it exists.
     * @param {string} id Id of the variable.
     * @param {string} name Name of the variable.
     * @return {?Variable} Variable object.
     */},{key:"lookupBroadcastMsg",value:function lookupBroadcastMsg(id,name){var broadcastMsg;if(id){broadcastMsg=this.lookupVariableById(id);}else if(name){broadcastMsg=this.lookupBroadcastByInputValue(name);}else{log.error('Cannot find broadcast message if neither id nor name are provided.');}if(broadcastMsg){if(name&&broadcastMsg.name.toLowerCase()!==name.toLowerCase()){log.error("Found broadcast message with id: ".concat(id,", but")+"its name, ".concat(broadcastMsg.name," did not match expected name ").concat(name,"."));}if(broadcastMsg.type!==Variable.BROADCAST_MESSAGE_TYPE){log.error("Found variable with id: ".concat(id,", but its type ").concat(broadcastMsg.type)+"did not match expected type ".concat(Variable.BROADCAST_MESSAGE_TYPE));}return broadcastMsg;}}/**
     * Look up a broadcast message with the given name and return the variable
     * if it exists. Does not create a new broadcast message variable if
     * it doesn't exist.
     * @param {string} name Name of the variable.
     * @return {?Variable} Variable object.
     */},{key:"lookupBroadcastByInputValue",value:function lookupBroadcastByInputValue(name){var vars=this.variables;for(var propName in vars){if(vars[propName].type===Variable.BROADCAST_MESSAGE_TYPE&&vars[propName].name.toLowerCase()===name.toLowerCase()){return vars[propName];}}}/**
     * Look up a variable object.
     * Search begins for local variables; then look for globals.
     * @param {string} id Id of the variable.
     * @param {string} name Name of the variable.
     * @return {!Variable} Variable object.
     */},{key:"lookupVariableById",value:function lookupVariableById(id){// If we have a local copy, return it.
if(Object.prototype.hasOwnProperty.call(this.variables,id)){return this.variables[id];}// If the stage has a global copy, return it.
if(this.runtime&&!this.isStage){var stage=this.runtime.getTargetForStage();if(stage&&Object.prototype.hasOwnProperty.call(stage.variables,id)){return stage.variables[id];}}}/**
     * Look up a variable object by its name and variable type.
     * Search begins with local variables; then global variables if a local one
     * was not found.
     * @param {string} name Name of the variable.
     * @param {string} type Type of the variable. Defaults to Variable.SCALAR_TYPE.
     * @param {?bool} skipStage Optional flag to skip checking the stage
     * @return {?Variable} Variable object if found, or null if not.
     */},{key:"lookupVariableByNameAndType",value:function lookupVariableByNameAndType(name,type,skipStage){if(typeof name!=='string')return;if(typeof type!=='string')type=Variable.SCALAR_TYPE;skipStage=skipStage||false;for(var varId in this.variables){var currVar=this.variables[varId];if(currVar.name===name&&currVar.type===type){return currVar;}}if(!skipStage&&this.runtime&&!this.isStage){var stage=this.runtime.getTargetForStage();if(stage){for(var _varId in stage.variables){var _currVar=stage.variables[_varId];if(_currVar.name===name&&_currVar.type===type){return _currVar;}}}}return null;}/**
    * Look up a list object for this target, and create it if one doesn't exist.
    * Search begins for local lists; then look for globals.
    * @param {!string} id Id of the list.
    * @param {!string} name Name of the list.
    * @return {!Varible} Variable object representing the found/created list.
     */},{key:"lookupOrCreateList",value:function lookupOrCreateList(id,name){var list=this.lookupVariableById(id);if(list)return list;list=this.lookupVariableByNameAndType(name,Variable.LIST_TYPE);if(list)return list;// No variable with this name exists - create it locally.
var newList=new Variable(id,name,Variable.LIST_TYPE,false);this.variables[id]=newList;return newList;}/**
     * Creates a variable with the given id and name and adds it to the
     * dictionary of variables.
     * @param {string} id Id of variable
     * @param {string} name Name of variable.
     * @param {string} type Type of variable, '', 'broadcast_msg', or 'list'
     * @param {boolean} isCloud Whether the variable to create has the isCloud flag set.
     * Additional checks are made that the variable can be created as a cloud variable.
     */},{key:"createVariable",value:function createVariable(id,name,type,isCloud){if(!Object.prototype.hasOwnProperty.call(this.variables,id)){var newVariable=new Variable(id,name,type,false);if(isCloud&&this.isStage&&this.runtime.canAddCloudVariable()){newVariable.isCloud=true;this.runtime.addCloudVariable();this.runtime.ioDevices.cloud.requestCreateVariable(newVariable);}this.variables[id]=newVariable;}}/**
     * Creates a comment with the given properties.
     * @param {string} id Id of the comment.
     * @param {string} blockId Optional id of the block the comment is attached
     * to if it is a block comment.
     * @param {string} text The text the comment contains.
     * @param {number} x The x coordinate of the comment on the workspace.
     * @param {number} y The y coordinate of the comment on the workspace.
     * @param {number} width The width of the comment when it is full size
     * @param {number} height The height of the comment when it is full size
     * @param {boolean} minimized Whether the comment is minimized.
     */},{key:"createComment",value:function createComment(id,blockId,text,x,y,width,height,minimized){if(!Object.prototype.hasOwnProperty.call(this.comments,id)){var newComment=new Comment(id,text,x,y,width,height,minimized);if(blockId){newComment.blockId=blockId;var blockWithComment=this.blocks.getBlock(blockId);if(blockWithComment){blockWithComment.comment=id;}else{log.warn("Could not find block with id ".concat(blockId," associated with commentId: ").concat(id));}}this.comments[id]=newComment;}}/**
     * Renames the variable with the given id to newName.
     * @param {string} id Id of variable to rename.
     * @param {string} newName New name for the variable.
     */},{key:"renameVariable",value:function renameVariable(id,newName){var _this2=this;if(Object.prototype.hasOwnProperty.call(this.variables,id)){var variable=this.variables[id];if(variable.id===id){var oldName=variable.name;variable.name=newName;if(this.runtime){if(variable.isCloud&&this.isStage){this.runtime.ioDevices.cloud.requestRenameVariable(oldName,newName);}if(variable.type===Variable.SCALAR_TYPE){// sensing__of may be referencing to this variable.
// Change the reference.
var blockUpdated=false;this.runtime.targets.forEach(function(t){blockUpdated=t.blocks.updateSensingOfReference(oldName,newName,_this2.isStage?'_stage_':_this2.getName())||blockUpdated;});// Request workspace change only if sensing_of blocks were actually updated.
if(blockUpdated)this.runtime.requestBlocksUpdate();}var blocks=this.runtime.monitorBlocks;blocks.changeBlock({id:id,element:'field',name:variable.type===Variable.LIST_TYPE?'LIST':'VARIABLE',value:id},this.runtime);var monitorBlock=blocks.getBlock(variable.id);if(monitorBlock){this.runtime.requestUpdateMonitor(Map$1({id:id,params:blocks._getBlockParams(monitorBlock)}));}}}}}/**
     * Removes the variable with the given id from the dictionary of variables.
     * @param {string} id Id of variable to delete.
     */},{key:"deleteVariable",value:function deleteVariable(id){if(Object.prototype.hasOwnProperty.call(this.variables,id)){// Get info about the variable before deleting it
var deletedVariableName=this.variables[id].name;var deletedVariableWasCloud=this.variables[id].isCloud;delete this.variables[id];if(this.runtime){if(deletedVariableWasCloud&&this.isStage){this.runtime.ioDevices.cloud.requestDeleteVariable(deletedVariableName);this.runtime.removeCloudVariable();}this.runtime.monitorBlocks.deleteBlock(id);this.runtime.requestRemoveMonitor(id);}}}/**
     * Remove this target's monitors from the runtime state and remove the
     * target-specific monitored blocks (e.g. local variables, global variables for the stage, x-position).
     * NOTE: This does not delete any of the stage monitors like backdrop name.
     */},{key:"deleteMonitors",value:function deleteMonitors(){var _this3=this;this.runtime.requestRemoveMonitorByTargetId(this.id);var targetSpecificMonitorBlockIds;if(this.isStage){// This only deletes global variables and not other stage monitors like backdrop number.
targetSpecificMonitorBlockIds=Object.keys(this.variables);}else{targetSpecificMonitorBlockIds=Object.keys(this.runtime.monitorBlocks._blocks).filter(function(key){return _this3.runtime.monitorBlocks._blocks[key].targetId===_this3.id;});}var _iterator=_createForOfIteratorHelper$4(targetSpecificMonitorBlockIds),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var blockId=_step.value;this.runtime.monitorBlocks.deleteBlock(blockId);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}/**
     * Create a clone of the variable with the given id from the dictionary of
     * this target's variables.
     * @param {string} id Id of variable to duplicate.
     * @param {boolean=} optKeepOriginalId Optional flag to keep the original variable ID
     * for the duplicate variable. This is necessary when cloning a sprite, for example.
     * @return {?Variable} The duplicated variable, or null if
     * the original variable was not found.
     */},{key:"duplicateVariable",value:function duplicateVariable(id,optKeepOriginalId){if(Object.prototype.hasOwnProperty.call(this.variables,id)){var originalVariable=this.variables[id];var newVariable=new Variable(optKeepOriginalId?id:null,// conditionally keep original id or generate a new one
originalVariable.name,originalVariable.type,originalVariable.isCloud);if(newVariable.type===Variable.LIST_TYPE){newVariable.value=originalVariable.value.slice(0);}else{newVariable.value=originalVariable.value;}return newVariable;}return null;}/**
     * Duplicate the dictionary of this target's variables as part of duplicating.
     * this target or making a clone.
     * @param {object=} optBlocks Optional block container for the target being duplicated.
     * If provided, new variables will be generated with new UIDs and any variable references
     * in this blocks container will be updated to refer to the corresponding new IDs.
     * @return {object} The duplicated dictionary of variables
     */},{key:"duplicateVariables",value:function duplicateVariables(optBlocks){var _this4=this;var allVarRefs;if(optBlocks){allVarRefs=optBlocks.getAllVariableAndListReferences();}return Object.keys(this.variables).reduce(function(accum,varId){var newVariable=_this4.duplicateVariable(varId,!optBlocks);accum[newVariable.id]=newVariable;if(optBlocks&&allVarRefs){var currVarRefs=allVarRefs[varId];if(currVarRefs){_this4.mergeVariables(varId,newVariable.id,currVarRefs);}}return accum;},{});}/**
     * Post/edit sprite info.
     * @param {object} data An object with sprite info data to set.
     * @abstract
     */},{key:"postSpriteInfo",value:function postSpriteInfo(){}/**
     * Retrieve custom state associated with this target and the provided state ID.
     * @param {string} stateId - specify which piece of state to retrieve.
     * @returns {*} the associated state, if any was found.
     */},{key:"getCustomState",value:function getCustomState(stateId){return this._customState[stateId];}/**
     * Store custom state associated with this target and the provided state ID.
     * @param {string} stateId - specify which piece of state to store on this target.
     * @param {*} newValue - the state value to store.
     */},{key:"setCustomState",value:function setCustomState(stateId,newValue){this._customState[stateId]=newValue;}/**
     * Call to destroy a target.
     * @abstract
     */},{key:"dispose",value:function dispose(){this._customState={};if(this.runtime){this.runtime.removeExecutable(this);}}// Variable Conflict Resolution Helpers
/**
     * Get the names of all the variables of the given type that are in scope for this target.
     * For targets that are not the stage, this includes any target-specific
     * variables as well as any stage variables unless the skipStage flag is true.
     * For the stage, this is all stage variables.
     * @param {string} type The variable type to search for; defaults to Variable.SCALAR_TYPE
     * @param {?bool} skipStage Optional flag to skip the stage.
     * @return {Array<string>} A list of variable names
     */},{key:"getAllVariableNamesInScopeByType",value:function getAllVariableNamesInScopeByType(type,skipStage){if(typeof type!=='string')type=Variable.SCALAR_TYPE;skipStage=skipStage||false;var targetVariables=Object.values(this.variables).filter(function(v){return v.type===type;}).map(function(variable){return variable.name;});if(skipStage||this.isStage||!this.runtime){return targetVariables;}var stage=this.runtime.getTargetForStage();var stageVariables=stage.getAllVariableNamesInScopeByType(type);return targetVariables.concat(stageVariables);}/**
     * Merge variable references with another variable.
     * @param {string} idToBeMerged ID of the variable whose references need to be updated
     * @param {string} idToMergeWith ID of the variable that the old references should be replaced with
     * @param {?Array<Object>} optReferencesToUpdate Optional context of the change.
     * Defaults to all the blocks in this target.
     * @param {?string} optNewName New variable name to merge with. The old
     * variable name in the references being updated should be replaced with this new name.
     * If this parameter is not provided or is '', no name change occurs.
     */},{key:"mergeVariables",value:function mergeVariables(idToBeMerged,idToMergeWith,optReferencesToUpdate,optNewName){var referencesToChange=optReferencesToUpdate||// TODO should there be a separate helper function that traverses the blocks
// for all references for a given ID instead of doing the below..?
this.blocks.getAllVariableAndListReferences()[idToBeMerged];VariableUtil.updateVariableIdentifiers(referencesToChange,idToMergeWith,optNewName);}/**
     * Share a local variable (and given references for that variable) to the stage.
     * @param {string} varId The ID of the variable to share.
     * @param {Array<object>} varRefs The list of variable references being shared,
     * that reference the given variable ID. The names and IDs of these variable
     * references will be updated to refer to the new (or pre-existing) global variable.
     */},{key:"shareLocalVariableToStage",value:function shareLocalVariableToStage(varId,varRefs){if(!this.runtime)return;var variable=this.variables[varId];if(!variable){log.warn("Cannot share a local variable to the stage if it's not local.");return;}var stage=this.runtime.getTargetForStage();// If a local var is being shared with the stage,
// sharing will make the variable global, resulting in a conflict
// with the existing local variable. Preemptively Resolve this conflict
// by renaming the new global variable.
// First check if we've already done the local to global transition for this
// variable. If we have, merge it with the global variable we've already created.
var varIdForStage="StageVarFromLocal_".concat(varId);var stageVar=stage.lookupVariableById(varIdForStage);// If a global var doesn't already exist, create a new one with a fresh name.
// Use the ID we created above so that we can lookup this new variable in the
// future if we decide to share this same variable again.
if(!stageVar){var varName=variable.name;var varType=variable.type;var newStageName="Stage: ".concat(varName);stageVar=this.runtime.createNewGlobalVariable(newStageName,varIdForStage,varType);}// Update all variable references to use the new name and ID
this.mergeVariables(varId,stageVar.id,varRefs,stageVar.name);}/**
     * Share a local variable with a sprite, merging with one of the same name and
     * type if it already exists on the sprite, or create a new one.
     * @param {string} varId Id of the variable to share
     * @param {Target} sprite The sprite to share the variable with
     * @param {Array<object>} varRefs A list of all the variable references currently being shared.
     */},{key:"shareLocalVariableToSprite",value:function shareLocalVariableToSprite(varId,sprite,varRefs){if(!this.runtime)return;if(this.isStage)return;var variable=this.variables[varId];if(!variable){log.warn("Tried to call 'shareLocalVariableToSprite' with a non-local variable.");return;}var varName=variable.name;var varType=variable.type;// Check if the receiving sprite already has a variable of the same name and type
// and use the existing variable, otherwise create a new one.
var existingLocalVar=sprite.lookupVariableByNameAndType(varName,varType);var newVarId;if(existingLocalVar){newVarId=existingLocalVar.id;}else{var newVar=new Variable(null,varName,varType);newVarId=newVar.id;sprite.variables[newVarId]=newVar;}// Merge with the local variable on the new sprite.
this.mergeVariables(varId,newVarId,varRefs);}/**
     * Given a list of variable referencing fields, shares those variables with
     * the target with the provided id, resolving any variable conflicts that arise
     * using the following rules:
     *
     * If this target is the stage, exit. There are no conflicts that arise
     * from sharing variables from the stage to another sprite. The variables
     * already exist globally, so no further action is needed.
     *
     * If a variable being referenced is a global variable, do nothing. The
     * global variable already exists so no further action is needed.
     *
     * If a variable being referenced is local, and
     * 1) The receiving target is a sprite:
     * create a new local variable or merge with an existing local variable
     * of the same name and type. Update all the referencing fields
     * for the original variable to reference the new variable.
     * 2) The receiving target is the stage:
     * Create a new global variable with a fresh name and update all the referencing
     * fields to reference the new variable.
     *
     * @param {Array<object>} blocks The blocks containing
     * potential conflicting references to variables.
     * @param {Target} receivingTarget The target receiving the variables
     */},{key:"resolveVariableSharingConflictsWithTarget",value:function resolveVariableSharingConflictsWithTarget(blocks,receivingTarget){if(this.isStage)return;// Get all the variable references in the given list of blocks
var allVarListRefs=this.blocks.getAllVariableAndListReferences(blocks);// For all the variables being referenced, check for which ones are local
// to this target, and resolve conflicts based on whether the receiving target
// is a sprite (with a conflicting local variable) or whether it is
// the stage (which cannot have local variables)
for(var varId in allVarListRefs){var currVar=this.variables[varId];if(!currVar)continue;// The current variable is global, there shouldn't be any conflicts here, skip it.
// Get the list of references for the current variable id
var currVarListRefs=allVarListRefs[varId];if(receivingTarget.isStage){this.shareLocalVariableToStage(varId,currVarListRefs);}else{this.shareLocalVariableToSprite(varId,receivingTarget,currVarListRefs);}}}/**
     * Fixes up variable references in this target avoiding conflicts with
     * pre-existing variables in the same scope.
     * This is used when uploading this target as a new sprite into an existing
     * project, where the new sprite may contain references
     * to variable names that already exist as global variables in the project
     * (and thus are in scope for variable references in the given sprite).
     *
     * If this target has a block that references an existing global variable and that
     * variable *does not* exist in this target (e.g. it was a global variable in the
     * project the sprite was originally exported from), merge the variables. This entails
     * fixing the variable references in this sprite to reference the id of the pre-existing global variable.
     *
     * If this target has a block that references an existing global variable and that
     * variable does exist in the target itself (e.g. it's a local variable in the sprite being uploaded),
     * then the local variable is renamed to distinguish itself from the pre-existing variable.
     * All blocks that reference the local variable will be updated to use the new name.
     */// TODO (#1360) This function is too long, add some helpers for the different chunks and cases...
},{key:"fixUpVariableReferences",value:function fixUpVariableReferences(){var _this5=this;if(!this.runtime)return;// There's no runtime context to conflict with
if(this.isStage)return;// Stage can't have variable conflicts with itself (and also can't be uploaded)
var stage=this.runtime.getTargetForStage();if(!stage||!stage.variables)return;var renameConflictingLocalVar=function renameConflictingLocalVar(id,name,type){var conflict=stage.lookupVariableByNameAndType(name,type);if(conflict){var newName=StringUtil$1.unusedName("".concat(_this5.getName(),": ").concat(name),_this5.getAllVariableNamesInScopeByType(type));_this5.renameVariable(id,newName);return newName;}return null;};var allReferences=this.blocks.getAllVariableAndListReferences();var unreferencedLocalVarIds=[];if(Object.keys(this.variables).length>0){for(var localVarId in this.variables){if(!Object.prototype.hasOwnProperty.call(this.variables,localVarId))continue;if(!allReferences[localVarId])unreferencedLocalVarIds.push(localVarId);}}var conflictIdsToReplace=Object.create(null);var conflictNamesToReplace=Object.create(null);// Cache the list of all variable names by type so that we don't need to
// re-calculate this in every iteration of the following loop.
var varNamesByType={};var allVarNames=function allVarNames(type){var namesOfType=varNamesByType[type];if(namesOfType)return namesOfType;varNamesByType[type]=_this5.runtime.getAllVarNamesOfType(type);return varNamesByType[type];};var _loop=function _loop(){// We don't care about which var ref we get, they should all have the same var info
var varRef=allReferences[varId][0];var varName=varRef.referencingField.value;var varType=varRef.type;if(_this5.lookupVariableById(varId)){// Found a variable with the id in either the target or the stage,
// figure out which one.
if(Object.prototype.hasOwnProperty.call(_this5.variables,varId)){// If the target has the variable, then check whether the stage
// has one with the same name and type. If it does, then rename
// this target specific variable so that there is a distinction.
var newVarName=renameConflictingLocalVar(varId,varName,varType);if(newVarName){// We are not calling this.blocks.updateBlocksAfterVarRename
// here because it will search through all the blocks. We already
// have access to all the references for this var id.
allReferences[varId].map(function(ref){ref.referencingField.value=newVarName;return ref;});}}}else{// We didn't find the referenced variable id anywhere,
// Treat it as a reference to a global variable (from the original
// project this sprite was exported from).
// Check for whether a global variable of the same name and type exists,
// and if so, track it to merge with the existing global in a second pass of the blocks.
var existingVar=stage.lookupVariableByNameAndType(varName,varType);if(existingVar){if(!conflictIdsToReplace[varId]){conflictIdsToReplace[varId]=existingVar.id;}}else{// A global variable with the same name did not already exist,
// create a new one such that it does not conflict with any
// names of local variables of the same type.
var allNames=allVarNames(varType);var freshName=StringUtil$1.unusedName(varName,allNames);stage.createVariable(varId,freshName,varType);if(!conflictNamesToReplace[varId]){conflictNamesToReplace[varId]=freshName;}}}};for(var varId in allReferences){_loop();}// Rename any local variables that were missed above because they aren't
// referenced by any blocks
for(var id in unreferencedLocalVarIds){var _varId2=unreferencedLocalVarIds[id];var name=this.variables[_varId2].name;var type=this.variables[_varId2].type;renameConflictingLocalVar(_varId2,name,type);}// Handle global var conflicts with existing global vars (e.g. a sprite is uploaded, and has
// blocks referencing some variable that the sprite does not own, and this
// variable conflicts with a global var)
// In this case, we want to merge the new variable referenes with the
// existing global variable
for(var conflictId in conflictIdsToReplace){var existingId=conflictIdsToReplace[conflictId];var referencesToUpdate=allReferences[conflictId];this.mergeVariables(conflictId,existingId,referencesToUpdate);}// Handle global var conflicts existing local vars (e.g a sprite is uploaded,
// and has blocks referencing some variable that the sprite does not own, and this
// variable conflcits with another sprite's local var).
// In this case, we want to go through the variable references and update
// the name of the variable in that reference.
var _loop2=function _loop2(){var newName=conflictNamesToReplace[_conflictId];var referencesToUpdate=allReferences[_conflictId];referencesToUpdate.map(function(ref){ref.referencingField.value=newName;return ref;});};for(var _conflictId in conflictNamesToReplace){_loop2();}}}]);}(EventEmitter);var target=Target$1;var StageLayering$1=/*#__PURE__*/function(){function StageLayering(){_classCallCheck(this,StageLayering);}return _createClass(StageLayering,null,[{key:"BACKGROUND_LAYER",get:function get(){return'background';}},{key:"VIDEO_LAYER",get:function get(){return'video';}},{key:"PEN_LAYER",get:function get(){return'pen';}},{key:"SPRITE_LAYER",get:function get(){return'sprite';}// Order of layer groups relative to each other,
},{key:"LAYER_GROUPS",get:function get(){return[StageLayering.BACKGROUND_LAYER,StageLayering.VIDEO_LAYER,StageLayering.PEN_LAYER,StageLayering.SPRITE_LAYER];}}]);}();var stageLayering=StageLayering$1;var StageLayering$2=/*@__PURE__*/getDefaultExportFromCjs(stageLayering);function _callSuper$C(t,o,e){return o=_getPrototypeOf$1(o),_possibleConstructorReturn$1(t,_isNativeReflectConstruct$D()?Reflect.construct(o,e||[],_getPrototypeOf$1(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$D(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$D=function _isNativeReflectConstruct(){return!!t;})();}var MathUtil=mathUtil;var StringUtil=stringUtil;var Cast=cast;var Clone=clone;var Target=target;var StageLayering=stageLayering;/**
 * Rendered target: instance of a sprite (clone), or the stage.
 */var RenderedTarget=/*#__PURE__*/function(_Target){/**
   * @param {!Sprite} sprite Reference to the parent sprite.
   * @param {Runtime} runtime Reference to the runtime.
   * @constructor
   */function RenderedTarget(sprite,runtime){var _this;_classCallCheck(this,RenderedTarget);_this=_callSuper$C(this,RenderedTarget,[runtime,sprite.blocks]);/**
     * Reference to the sprite that this is a render of.
     * @type {!Sprite}
     */_this.sprite=sprite;/**
     * Reference to the global renderer for this VM, if one exists.
     * @type {?RenderWebGL}
     */_this.renderer=null;if(_this.runtime){_this.renderer=_this.runtime.renderer;}/**
     * ID of the drawable for this rendered target,
     * returned by the renderer, if rendered.
     * @type {?Number}
     */_this.drawableID=null;/**
     * Drag state of this rendered target. If true, x/y position can't be
     * changed by blocks.
     * @type {boolean}
     */_this.dragging=false;/**
     * Map of current graphic effect values.
     * @type {!Object.<string, number>}
     */_this.effects={color:0,fisheye:0,whirl:0,pixelate:0,mosaic:0,brightness:0,ghost:0};/**
     * Whether this represents an "original" non-clone rendered-target for a sprite,
     * i.e., created by the editor and not clone blocks.
     * @type {boolean}
     */_this.isOriginal=true;/**
     * Whether this rendered target represents the Scratch stage.
     * @type {boolean}
     */_this.isStage=false;/**
     * Scratch X coordinate. Currently should range from -240 to 240.
     * @type {Number}
     */_this.x=0;/**
     * Scratch Y coordinate. Currently should range from -180 to 180.
     * @type {number}
     */_this.y=0;/**
     * Scratch direction. Currently should range from -179 to 180.
     * @type {number}
     */_this.direction=90;/**
     * Whether the rendered target is draggable on the stage
     * @type {boolean}
     */_this.draggable=false;/**
     * Whether the rendered target is currently visible.
     * @type {boolean}
     */_this.visible=true;/**
     * Size of rendered target as a percent of costume size.
     * @type {number}
     */_this.size=100;/**
     * Currently selected costume index.
     * @type {number}
     */_this.currentCostume=0;/**
     * Current rotation style.
     * @type {!string}
     */_this.rotationStyle=RenderedTarget.ROTATION_STYLE_ALL_AROUND;/**
     * Loudness for sound playback for this target, as a percentage.
     * @type {number}
     */_this.volume=100;/**
     * Current tempo (used by the music extension).
     * This property is global to the project and stored in the stage.
     * @type {number}
     */_this.tempo=60;/**
     * The transparency of the video (used by extensions with camera input).
     * This property is global to the project and stored in the stage.
     * @type {number}
     */_this.videoTransparency=50;/**
     * The state of the video input (used by extensions with camera input).
     * This property is global to the project and stored in the stage.
     *
     * Defaults to ON. This setting does not turn the video by itself. A
     * video extension once loaded will set the video device to this
     * setting. Set to ON when a video extension is added in the editor the
     * video will start ON. If the extension is loaded as part of loading a
     * saved project the extension will see the value set when the stage
     * was loaded from the saved values including the video state.
     *
     * @type {string}
     */_this.videoState=RenderedTarget.VIDEO_STATE.ON;/**
     * The language to use for speech synthesis, in the text2speech extension.
     * It is initialized to null so that on extension load, we can check for
     * this and try setting it using the editor locale.
     * @type {string}
     */_this.textToSpeechLanguage=null;return _this;}/**
   * Create a drawable with the this.renderer.
   * @param {boolean} layerGroup The layer group this drawable should be added to
   */_inherits$1(RenderedTarget,_Target);return _createClass(RenderedTarget,[{key:"initDrawable",value:function initDrawable(layerGroup){if(this.renderer){this.drawableID=this.renderer.createDrawable(layerGroup);}// If we're a clone, start the hats.
if(!this.isOriginal){this.runtime.startHats('control_start_as_clone',null,this);}}},{key:"audioPlayer",get:function get(){var _this2=this;/* eslint-disable no-console */console.warn('get audioPlayer deprecated, please update to use .sprite.soundBank methods');console.warn(new Error('stack for debug').stack);/* eslint-enable no-console */var bank=this.sprite.soundBank;var audioPlayerProxy={playSound:function playSound(soundId){return bank.play(_this2,soundId);}};Object.defineProperty(this,'audioPlayer',{configurable:false,enumerable:true,writable:false,value:audioPlayerProxy});return audioPlayerProxy;}/**
     * Initialize the audio player for this sprite or clone.
     */},{key:"initAudio",value:function initAudio(){}/**
     * Event which fires when a target moves.
     * @type {string}
     */},{key:"setXY",value:/**
     * Set the X and Y coordinates.
     * @param {!number} x New X coordinate, in Scratch coordinates.
     * @param {!number} y New Y coordinate, in Scratch coordinates.
     * @param {?boolean} force Force setting X/Y, in case of dragging
     */function setXY(x,y,force){if(this.isStage)return;if(this.dragging&&!force)return;var oldX=this.x;var oldY=this.y;if(this.renderer){var position=this.renderer.getFencedPositionOfDrawable(this.drawableID,[x,y]);this.x=position[0];this.y=position[1];this.renderer.updateDrawablePosition(this.drawableID,position);if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}else{this.x=x;this.y=y;}this.emit(RenderedTarget.EVENT_TARGET_MOVED,this,oldX,oldY,force);this.runtime.requestTargetsUpdate(this);}/**
     * Get the rendered direction and scale, after applying rotation style.
     * @return {object<string, number>} Direction and scale to render.
     */},{key:"_getRenderedDirectionAndScale",value:function _getRenderedDirectionAndScale(){// Default: no changes to `this.direction` or `this.scale`.
var finalDirection=this.direction;var finalScale=[this.size,this.size];if(this.rotationStyle===RenderedTarget.ROTATION_STYLE_NONE){// Force rendered direction to be 90.
finalDirection=90;}else if(this.rotationStyle===RenderedTarget.ROTATION_STYLE_LEFT_RIGHT){// Force rendered direction to be 90, and flip drawable if needed.
finalDirection=90;var scaleFlip=this.direction<0?-1:1;finalScale=[scaleFlip*this.size,this.size];}return{direction:finalDirection,scale:finalScale};}/**
     * Set the direction.
     * @param {!number} direction New direction.
     */},{key:"setDirection",value:function setDirection(direction){if(this.isStage){return;}if(!isFinite(direction)){return;}// Keep direction between -179 and +180.
this.direction=MathUtil.wrapClamp(direction,-179,180);if(this.renderer){var _this$_getRenderedDir=this._getRenderedDirectionAndScale(),renderedDirection=_this$_getRenderedDir.direction,scale=_this$_getRenderedDir.scale;this.renderer.updateDrawableDirectionScale(this.drawableID,renderedDirection,scale);if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}this.runtime.requestTargetsUpdate(this);}/**
     * Set draggability; i.e., whether it's able to be dragged in the player
     * @param {!boolean} draggable True if should be draggable.
     */},{key:"setDraggable",value:function setDraggable(draggable){if(this.isStage)return;this.draggable=!!draggable;this.runtime.requestTargetsUpdate(this);}/**
     * Set visibility; i.e., whether it's shown or hidden.
     * @param {!boolean} visible True if should be shown.
     */},{key:"setVisible",value:function setVisible(visible){if(this.isStage){return;}this.visible=!!visible;if(this.renderer){this.renderer.updateDrawableVisible(this.drawableID,this.visible);if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}this.runtime.requestTargetsUpdate(this);}/**
     * Set size, as a percentage of the costume size.
     * @param {!number} size Size of rendered target, as % of costume size.
     */},{key:"setSize",value:function setSize(size){if(this.isStage){return;}if(this.renderer){// Clamp to scales relative to costume and stage size.
// See original ScratchSprite.as:setSize.
var costumeSize=this.renderer.getCurrentSkinSize(this.drawableID);var origW=costumeSize[0];var origH=costumeSize[1];var minScale=Math.min(1,Math.max(5/origW,5/origH));var maxScale=Math.min(1.5*this.runtime.constructor.STAGE_WIDTH/origW,1.5*this.runtime.constructor.STAGE_HEIGHT/origH);this.size=MathUtil.clamp(size/100,minScale,maxScale)*100;var _this$_getRenderedDir2=this._getRenderedDirectionAndScale(),direction=_this$_getRenderedDir2.direction,scale=_this$_getRenderedDir2.scale;this.renderer.updateDrawableDirectionScale(this.drawableID,direction,scale);if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}this.runtime.requestTargetsUpdate(this);}/**
     * Set a particular graphic effect value.
     * @param {!string} effectName Name of effect (see `RenderedTarget.prototype.effects`).
     * @param {!number} value Numerical magnitude of effect.
     */},{key:"setEffect",value:function setEffect(effectName,value){if(!Object.prototype.hasOwnProperty.call(this.effects,effectName))return;this.effects[effectName]=value;if(this.renderer){this.renderer.updateDrawableEffect(this.drawableID,effectName,value);if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}}/**
     * Clear all graphic effects on this rendered target.
     */},{key:"clearEffects",value:function clearEffects(){for(var effectName in this.effects){if(!Object.prototype.hasOwnProperty.call(this.effects,effectName))continue;this.effects[effectName]=0;}if(this.renderer){for(var _effectName in this.effects){if(!Object.prototype.hasOwnProperty.call(this.effects,_effectName))continue;this.renderer.updateDrawableEffect(this.drawableID,_effectName,0);}if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}}/**
     * Set the current costume.
     * @param {number} index New index of costume.
     */},{key:"setCostume",value:function setCostume(index){// Keep the costume index within possible values.
index=Math.round(index);if([Infinity,-Infinity,NaN].includes(index))index=0;this.currentCostume=MathUtil.wrapClamp(index,0,this.sprite.costumes.length-1);if(this.renderer){var costume=this.getCostumes()[this.currentCostume];this.renderer.updateDrawableSkinId(this.drawableID,costume.skinId);if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}this.runtime.requestTargetsUpdate(this);}/**
     * Add a costume, taking care to avoid duplicate names.
     * @param {!object} costumeObject Object representing the costume.
     * @param {?int} index Index at which to add costume
     */},{key:"addCostume",value:function addCostume(costumeObject,index){if(typeof index==='number'&&!isNaN(index)){this.sprite.addCostumeAt(costumeObject,index);}else{this.sprite.addCostumeAt(costumeObject,this.sprite.costumes.length);}}/**
     * Rename a costume, taking care to avoid duplicate names.
     * @param {int} costumeIndex - the index of the costume to be renamed.
     * @param {string} newName - the desired new name of the costume (will be modified if already in use).
     */},{key:"renameCostume",value:function renameCostume(costumeIndex,newName){var usedNames=this.sprite.costumes.filter(function(costume,index){return costumeIndex!==index;}).map(function(costume){return costume.name;});var oldName=this.getCostumes()[costumeIndex].name;var newUnusedName=StringUtil.unusedName(newName,usedNames);this.getCostumes()[costumeIndex].name=newUnusedName;if(this.isStage){// Since this is a backdrop, go through all targets and
// update any blocks referencing the old backdrop name
var targets=this.runtime.targets;for(var i=0;i<targets.length;i++){var currTarget=targets[i];currTarget.blocks.updateAssetName(oldName,newUnusedName,'backdrop');}}else{this.blocks.updateAssetName(oldName,newUnusedName,'costume');}}/**
     * Delete a costume by index.
     * @param {number} index Costume index to be deleted
     * @return {?object} The costume that was deleted or null
     * if the index was out of bounds of the costumes list or
     * this target only has one costume.
     */},{key:"deleteCostume",value:function deleteCostume(index){var originalCostumeCount=this.sprite.costumes.length;if(originalCostumeCount===1)return null;if(index<0||index>=originalCostumeCount){return null;}var deletedCostume=this.sprite.deleteCostumeAt(index);if(index===this.currentCostume&&index===originalCostumeCount-1){this.setCostume(index-1);}else if(index<this.currentCostume){this.setCostume(this.currentCostume-1);}else{this.setCostume(this.currentCostume);}this.runtime.requestTargetsUpdate(this);return deletedCostume;}/**
     * Add a sound, taking care to avoid duplicate names.
     * @param {!object} soundObject Object representing the sound.
     * @param {?int} index Index at which to add costume
     */},{key:"addSound",value:function addSound(soundObject,index){var usedNames=this.sprite.sounds.map(function(sound){return sound.name;});soundObject.name=StringUtil.unusedName(soundObject.name,usedNames);if(typeof index==='number'&&!isNaN(index)){this.sprite.sounds.splice(index,0,soundObject);}else{this.sprite.sounds.push(soundObject);}}/**
     * Rename a sound, taking care to avoid duplicate names.
     * @param {int} soundIndex - the index of the sound to be renamed.
     * @param {string} newName - the desired new name of the sound (will be modified if already in use).
     */},{key:"renameSound",value:function renameSound(soundIndex,newName){var usedNames=this.sprite.sounds.filter(function(sound,index){return soundIndex!==index;}).map(function(sound){return sound.name;});var oldName=this.sprite.sounds[soundIndex].name;var newUnusedName=StringUtil.unusedName(newName,usedNames);this.sprite.sounds[soundIndex].name=newUnusedName;this.blocks.updateAssetName(oldName,newUnusedName,'sound');}/**
     * Delete a sound by index.
     * @param {number} index Sound index to be deleted
     * @return {object} The deleted sound object, or null if no sound was deleted.
     */},{key:"deleteSound",value:function deleteSound(index){// Make sure the sound index is not out of bounds
if(index<0||index>=this.sprite.sounds.length){return null;}// Delete the sound at the given index
var deletedSound=this.sprite.sounds.splice(index,1)[0];this.runtime.requestTargetsUpdate(this);return deletedSound;}/**
     * Update the rotation style.
     * @param {!string} rotationStyle New rotation style.
     */},{key:"setRotationStyle",value:function setRotationStyle(rotationStyle){if(rotationStyle===RenderedTarget.ROTATION_STYLE_NONE){this.rotationStyle=RenderedTarget.ROTATION_STYLE_NONE;}else if(rotationStyle===RenderedTarget.ROTATION_STYLE_ALL_AROUND){this.rotationStyle=RenderedTarget.ROTATION_STYLE_ALL_AROUND;}else if(rotationStyle===RenderedTarget.ROTATION_STYLE_LEFT_RIGHT){this.rotationStyle=RenderedTarget.ROTATION_STYLE_LEFT_RIGHT;}if(this.renderer){var _this$_getRenderedDir3=this._getRenderedDirectionAndScale(),direction=_this$_getRenderedDir3.direction,scale=_this$_getRenderedDir3.scale;this.renderer.updateDrawableDirectionScale(this.drawableID,direction,scale);if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}this.runtime.requestTargetsUpdate(this);}/**
     * Get a costume index of this rendered target, by name of the costume.
     * @param {?string} costumeName Name of a costume.
     * @return {number} Index of the named costume, or -1 if not present.
     */},{key:"getCostumeIndexByName",value:function getCostumeIndexByName(costumeName){for(var i=0;i<this.sprite.costumes.length;i++){if(this.getCostumes()[i].name===costumeName){return i;}}return-1;}/**
     * Get a costume of this rendered target by id.
     * @return {object} current costume
     */},{key:"getCurrentCostume",value:function getCurrentCostume(){return this.getCostumes()[this.currentCostume];}/**
     * Get full costume list
     * @return {object[]} list of costumes
     */},{key:"getCostumes",value:function getCostumes(){return this.sprite.costumes;}/**
     * Reorder costume list by moving costume at costumeIndex to newIndex.
     * @param {!number} costumeIndex Index of the costume to move.
     * @param {!number} newIndex New index for that costume.
     * @returns {boolean} If a change occurred (i.e. if the indices do not match)
     */},{key:"reorderCostume",value:function reorderCostume(costumeIndex,newIndex){newIndex=MathUtil.clamp(newIndex,0,this.sprite.costumes.length-1);costumeIndex=MathUtil.clamp(costumeIndex,0,this.sprite.costumes.length-1);if(newIndex===costumeIndex)return false;var currentCostume=this.getCurrentCostume();var costume=this.sprite.costumes[costumeIndex];// Use the sprite method for deleting costumes because setCostume is handled manually
this.sprite.deleteCostumeAt(costumeIndex);this.addCostume(costume,newIndex);this.currentCostume=this.getCostumeIndexByName(currentCostume.name);return true;}/**
     * Reorder sound list by moving sound at soundIndex to newIndex.
     * @param {!number} soundIndex Index of the sound to move.
     * @param {!number} newIndex New index for that sound.
     * @returns {boolean} If a change occurred (i.e. if the indices do not match)
     */},{key:"reorderSound",value:function reorderSound(soundIndex,newIndex){newIndex=MathUtil.clamp(newIndex,0,this.sprite.sounds.length-1);soundIndex=MathUtil.clamp(soundIndex,0,this.sprite.sounds.length-1);if(newIndex===soundIndex)return false;var sound=this.sprite.sounds[soundIndex];this.deleteSound(soundIndex);this.addSound(sound,newIndex);return true;}/**
     * Get full sound list
     * @return {object[]} list of sounds
     */},{key:"getSounds",value:function getSounds(){return this.sprite.sounds;}/**
     * Update all drawable properties for this rendered target.
     * Use when a batch has changed, e.g., when the drawable is first created.
     */},{key:"updateAllDrawableProperties",value:function updateAllDrawableProperties(){if(this.renderer){var _this$_getRenderedDir4=this._getRenderedDirectionAndScale(),direction=_this$_getRenderedDir4.direction,scale=_this$_getRenderedDir4.scale;this.renderer.updateDrawablePosition(this.drawableID,[this.x,this.y]);this.renderer.updateDrawableDirectionScale(this.drawableID,direction,scale);this.renderer.updateDrawableVisible(this.drawableID,this.visible);var costume=this.getCostumes()[this.currentCostume];this.renderer.updateDrawableSkinId(this.drawableID,costume.skinId);for(var effectName in this.effects){if(!Object.prototype.hasOwnProperty.call(this.effects,effectName))continue;this.renderer.updateDrawableEffect(this.drawableID,effectName,this.effects[effectName]);}if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}this.runtime.requestTargetsUpdate(this);}/**
     * Return the human-readable name for this rendered target, e.g., the sprite's name.
     * @override
     * @returns {string} Human-readable name.
     */},{key:"getName",value:function getName(){return this.sprite.name;}/**
     * Return whether this rendered target is a sprite (not a clone, not the stage).
     * @return {boolean} True if not a clone and not the stage.
     */},{key:"isSprite",value:function isSprite(){return!this.isStage&&this.isOriginal;}/**
     * Return the rendered target's tight bounding box.
     * Includes top, left, bottom, right attributes in Scratch coordinates.
     * @return {?object} Tight bounding box, or null.
     */},{key:"getBounds",value:function getBounds(){if(this.renderer){return this.runtime.renderer.getBounds(this.drawableID);}return null;}/**
     * Return the bounding box around a slice of the top 8px of the rendered target.
     * Includes top, left, bottom, right attributes in Scratch coordinates.
     * @return {?object} Tight bounding box, or null.
     */},{key:"getBoundsForBubble",value:function getBoundsForBubble(){if(this.renderer){return this.runtime.renderer.getBoundsForBubble(this.drawableID);}return null;}/**
     * Return whether this target is touching the mouse, an edge, or a sprite.
     * @param {string} requestedObject an id for mouse or edge, or a sprite name.
     * @return {boolean} True if the sprite is touching the object.
     */},{key:"isTouchingObject",value:function isTouchingObject(requestedObject){if(requestedObject==='_mouse_'){if(!this.runtime.ioDevices.mouse)return false;var mouseX=this.runtime.ioDevices.mouse.getClientX();var mouseY=this.runtime.ioDevices.mouse.getClientY();return this.isTouchingPoint(mouseX,mouseY);}else if(requestedObject==='_edge_'){return this.isTouchingEdge();}return this.isTouchingSprite(requestedObject);}/**
     * Return whether touching a point.
     * @param {number} x X coordinate of test point.
     * @param {number} y Y coordinate of test point.
     * @return {boolean} True iff the rendered target is touching the point.
     */},{key:"isTouchingPoint",value:function isTouchingPoint(x,y){if(this.renderer){return this.renderer.drawableTouching(this.drawableID,x,y);}return false;}/**
     * Return whether touching a stage edge.
     * @return {boolean} True iff the rendered target is touching the stage edge.
     */},{key:"isTouchingEdge",value:function isTouchingEdge(){if(this.renderer){var stageWidth=this.runtime.constructor.STAGE_WIDTH;var stageHeight=this.runtime.constructor.STAGE_HEIGHT;var bounds=this.getBounds();if(bounds.left<-stageWidth/2||bounds.right>stageWidth/2||bounds.top>stageHeight/2||bounds.bottom<-stageHeight/2){return true;}}return false;}/**
     * Return whether touching any of a named sprite's clones.
     * @param {string} spriteName Name of the sprite.
     * @return {boolean} True iff touching a clone of the sprite.
     */},{key:"isTouchingSprite",value:function isTouchingSprite(spriteName){spriteName=Cast.toString(spriteName);var firstClone=this.runtime.getSpriteTargetByName(spriteName);if(!firstClone||!this.renderer){return false;}// Filter out dragging targets. This means a sprite that is being dragged
// can detect other sprites using touching <sprite>, but cannot be detected
// by other sprites while it is being dragged. This matches Scratch 2.0 behavior.
var drawableCandidates=firstClone.sprite.clones.filter(function(clone){return!clone.dragging;}).map(function(clone){return clone.drawableID;});return this.renderer.isTouchingDrawables(this.drawableID,drawableCandidates);}/**
     * Return whether touching a color.
     * @param {Array.<number>} rgb [r,g,b], values between 0-255.
     * @return {Promise.<boolean>} True iff the rendered target is touching the color.
     */},{key:"isTouchingColor",value:function isTouchingColor(rgb){if(this.renderer){return this.renderer.isTouchingColor(this.drawableID,rgb);}return false;}/**
     * Return whether rendered target's color is touching a color.
     * @param {object} targetRgb {Array.<number>} [r,g,b], values between 0-255.
     * @param {object} maskRgb {Array.<number>} [r,g,b], values between 0-255.
     * @return {Promise.<boolean>} True iff the color is touching the color.
     */},{key:"colorIsTouchingColor",value:function colorIsTouchingColor(targetRgb,maskRgb){if(this.renderer){return this.renderer.isTouchingColor(this.drawableID,targetRgb,maskRgb);}return false;}},{key:"getLayerOrder",value:function getLayerOrder(){if(this.renderer){return this.renderer.getDrawableOrder(this.drawableID);}return null;}/**
     * Move to the front layer.
     */},{key:"goToFront",value:function goToFront(){// This should only ever be used for sprites
if(this.renderer){// Let the renderer re-order the sprite based on its knowledge
// of what layers are present
this.renderer.setDrawableOrder(this.drawableID,Infinity,StageLayering.SPRITE_LAYER);}this.runtime.setExecutablePosition(this,Infinity);}/**
     * Move to the back layer.
     */},{key:"goToBack",value:function goToBack(){// This should only ever be used for sprites
if(this.renderer){// Let the renderer re-order the sprite based on its knowledge
// of what layers are present
this.renderer.setDrawableOrder(this.drawableID,-Infinity,StageLayering.SPRITE_LAYER,false);}this.runtime.setExecutablePosition(this,-Infinity);}/**
     * Move forward a number of layers.
     * @param {number} nLayers How many layers to go forward.
     */},{key:"goForwardLayers",value:function goForwardLayers(nLayers){if(this.renderer){this.renderer.setDrawableOrder(this.drawableID,nLayers,StageLayering.SPRITE_LAYER,true);}this.runtime.moveExecutable(this,nLayers);}/**
     * Move backward a number of layers.
     * @param {number} nLayers How many layers to go backward.
     */},{key:"goBackwardLayers",value:function goBackwardLayers(nLayers){if(this.renderer){this.renderer.setDrawableOrder(this.drawableID,-nLayers,StageLayering.SPRITE_LAYER,true);}this.runtime.moveExecutable(this,-nLayers);}/**
     * Move behind some other rendered target.
     * @param {!RenderedTarget} other Other rendered target to move behind.
     */},{key:"goBehindOther",value:function goBehindOther(other){if(this.renderer){var otherLayer=this.renderer.setDrawableOrder(other.drawableID,0,StageLayering.SPRITE_LAYER,true);this.renderer.setDrawableOrder(this.drawableID,otherLayer,StageLayering.SPRITE_LAYER);}var executionPosition=this.runtime.executableTargets.indexOf(other);this.runtime.setExecutablePosition(this,executionPosition);}/**
     * Keep a desired position within a fence.
     * @param {number} newX New desired X position.
     * @param {number} newY New desired Y position.
     * @param {object=} optFence Optional fence with left, right, top bottom.
     * @return {Array.<number>} Fenced X and Y coordinates.
     */},{key:"keepInFence",value:function keepInFence(newX,newY,optFence){var fence=optFence;if(!fence){fence={left:-this.runtime.constructor.STAGE_WIDTH/2,right:this.runtime.constructor.STAGE_WIDTH/2,top:this.runtime.constructor.STAGE_HEIGHT/2,bottom:-this.runtime.constructor.STAGE_HEIGHT/2};}var bounds=this.getBounds();if(!bounds)return;// Adjust the known bounds to the target position.
bounds.left+=newX-this.x;bounds.right+=newX-this.x;bounds.top+=newY-this.y;bounds.bottom+=newY-this.y;// Find how far we need to move the target position.
var dx=0;var dy=0;if(bounds.left<fence.left){dx+=fence.left-bounds.left;}if(bounds.right>fence.right){dx+=fence.right-bounds.right;}if(bounds.top>fence.top){dy+=fence.top-bounds.top;}if(bounds.bottom<fence.bottom){dy+=fence.bottom-bounds.bottom;}return[newX+dx,newY+dy];}/**
     * Make a clone, copying any run-time properties.
     * If we've hit the global clone limit, returns null.
     * @return {RenderedTarget} New clone.
     */},{key:"makeClone",value:function makeClone(){if(!this.runtime.clonesAvailable()||this.isStage){return null;// Hit max clone limit, or this is the stage.
}this.runtime.changeCloneCounter(1);var newClone=this.sprite.createClone();// Copy all properties.
newClone.x=this.x;newClone.y=this.y;newClone.direction=this.direction;newClone.draggable=this.draggable;newClone.visible=this.visible;newClone.size=this.size;newClone.currentCostume=this.currentCostume;newClone.rotationStyle=this.rotationStyle;newClone.effects=Clone.simple(this.effects);newClone.variables=this.duplicateVariables();newClone._edgeActivatedHatValues=Clone.simple(this._edgeActivatedHatValues);newClone.initDrawable(StageLayering.SPRITE_LAYER);newClone.updateAllDrawableProperties();return newClone;}/**
     * Make a duplicate using a duplicate sprite.
     * @return {RenderedTarget} New clone.
     */},{key:"duplicate",value:function duplicate(){var _this3=this;return this.sprite.duplicate().then(function(newSprite){var newTarget=newSprite.createClone();// Copy all properties.
// @todo refactor with clone methods
newTarget.x=(Math.random()-0.5)*400/2;newTarget.y=(Math.random()-0.5)*300/2;newTarget.direction=_this3.direction;newTarget.draggable=_this3.draggable;newTarget.visible=_this3.visible;newTarget.size=_this3.size;newTarget.currentCostume=_this3.currentCostume;newTarget.rotationStyle=_this3.rotationStyle;newTarget.effects=JSON.parse(JSON.stringify(_this3.effects));newTarget.variables=_this3.duplicateVariables(newTarget.blocks);newTarget.updateAllDrawableProperties();return newTarget;});}/**
     * Called when the project receives a "green flag."
     * For a rendered target, this clears graphic effects.
     */},{key:"onGreenFlag",value:function onGreenFlag(){this.clearEffects();}/**
     * Called when the project receives a "stop all"
     * Stop all sounds and clear graphic effects.
     */},{key:"onStopAll",value:function onStopAll(){this.clearEffects();}/**
     * Post/edit sprite info.
     * @param {object} data An object with sprite info data to set.
     */},{key:"postSpriteInfo",value:function postSpriteInfo(data){var force=Object.prototype.hasOwnProperty.call(data,'force')?data.force:null;var isXChanged=Object.prototype.hasOwnProperty.call(data,'x');var isYChanged=Object.prototype.hasOwnProperty.call(data,'y');if(isXChanged||isYChanged){this.setXY(isXChanged?data.x:this.x,isYChanged?data.y:this.y,force);}if(Object.prototype.hasOwnProperty.call(data,'direction')){this.setDirection(data.direction);}if(Object.prototype.hasOwnProperty.call(data,'draggable')){this.setDraggable(data.draggable);}if(Object.prototype.hasOwnProperty.call(data,'rotationStyle')){this.setRotationStyle(data.rotationStyle);}if(Object.prototype.hasOwnProperty.call(data,'visible')){this.setVisible(data.visible);}if(Object.prototype.hasOwnProperty.call(data,'size')){this.setSize(data.size);}}/**
     * Put the sprite into the drag state. While in effect, setXY must be forced
     */},{key:"startDrag",value:function startDrag(){this.dragging=true;}/**
     * Remove the sprite from the drag state.
     */},{key:"stopDrag",value:function stopDrag(){this.dragging=false;}/**
     * Serialize sprite info, used when emitting events about the sprite
     * @returns {object} Sprite data as a simple object
     */},{key:"toJSON",value:function toJSON(){var costumes=this.getCostumes();return{id:this.id,name:this.getName(),isStage:this.isStage,x:this.x,y:this.y,size:this.size,direction:this.direction,draggable:this.draggable,currentCostume:this.currentCostume,costume:costumes[this.currentCostume],costumeCount:costumes.length,visible:this.visible,rotationStyle:this.rotationStyle,comments:this.comments,blocks:this.blocks._blocks,variables:this.variables,costumes:costumes,sounds:this.getSounds(),textToSpeechLanguage:this.textToSpeechLanguage,tempo:this.tempo,volume:this.volume,videoTransparency:this.videoTransparency,videoState:this.videoState};}/**
     * Dispose, destroying any run-time properties.
     */},{key:"dispose",value:function dispose(){this.runtime.changeCloneCounter(-1);this.runtime.stopForTarget(this);this.runtime.removeExecutable(this);this.sprite.removeClone(this);if(this.renderer&&this.drawableID!==null){this.renderer.destroyDrawable(this.drawableID,this.isStage?StageLayering.BACKGROUND_LAYER:StageLayering.SPRITE_LAYER);if(this.visible){this.emit(RenderedTarget.EVENT_TARGET_VISUAL_CHANGE,this);this.runtime.requestRedraw();}}}}],[{key:"EVENT_TARGET_MOVED",get:function get(){return'TARGET_MOVED';}/**
     * Event which fires when a target changes visually, for updating say bubbles.
     * @type {string}
     */},{key:"EVENT_TARGET_VISUAL_CHANGE",get:function get(){return'EVENT_TARGET_VISUAL_CHANGE';}/**
     * Rotation style for "all around"/spinning.
     * @type {string}
     */},{key:"ROTATION_STYLE_ALL_AROUND",get:function get(){return'all around';}/**
     * Rotation style for "left-right"/flipping.
     * @type {string}
     */},{key:"ROTATION_STYLE_LEFT_RIGHT",get:function get(){return'left-right';}/**
     * Rotation style for "no rotation."
     * @type {string}
     */},{key:"ROTATION_STYLE_NONE",get:function get(){return"don't rotate";}/**
     * Available states for video input.
     * @enum {string}
     */},{key:"VIDEO_STATE",get:function get(){return{OFF:'off',ON:'on',ON_FLIPPED:'on-flipped'};}}]);}(Target);var renderedTarget=RenderedTarget;var RenderedTarget$1=/*@__PURE__*/getDefaultExportFromCjs(renderedTarget);var en={"xcxVPen.name":"Vector Pen","xcxVPen.clearAll":"erase all drawings","xcxVPen.clear":"erase drawings of this sprite","xcxVPen.eraseLast":"erase last drawing","xcxVPen.penDown":"[PEN_TYPE] pen down","xcxVPen.plot":"plot","xcxVPen.setPenOpacity":"set pen opacity to [OPACITY]","xcxVPen.setSize":"set pen size to [SIZE] mm","xcxVPen.setLineShape":"set line shape to [LINE_SHAPE]","xcxVPen.setFillColorToColor":"set fill color to [COLOR]","xcxVPen.setFillOpacity":"set fill opacity to [OPACITY]","xcxVPen.changeLayerTo":"change layer to [LAYER]","xcxVPen.moveLayerBy":"move [DIRECTION] [LAYERS] layers","xcxVPen.changeLayerMenu.top":"top","xcxVPen.changeLayerMenu.bottom":"bottom","xcxVPen.moveLayerDirectionMenu.up":"up","xcxVPen.moveLayerDirectionMenu.down":"down","xcxVPen.stepForMM":"steps for [MM] mm","xcxVPen.mmForStep":"mm for [STEP] steps","xcxVPen.getStepPerMM":"step/mm","xcxVPen.setStepPerMM":"set step/mm to [STEP_PER_MM]","xcxVPen.downloadSpriteDrawing":"download drawing by the sprite named [FILENAME]","xcxVPen.downloadAllDrawing":"download all drawings named [FILENAME]","xcxVPen.penTypesMenu.trail":"trail","xcxVPen.penTypesMenu.plotter":"plotter","xcxVPen.lineShapesMenu.straight":"straight","xcxVPen.lineShapesMenu.curve":"curve","xcxVPen.fileNameForSprite":"Enter a name for the file:","xcxVPen.fileNameForAll":"Enter a name for the file:"};var ja={"xcxVPen.name":"ベクター ペン","xcxVPen.clearAll":"すべての描画を消す","xcxVPen.clear":"このスプライトの描画を消す","xcxVPen.eraseLast":"最後の描画を消す","xcxVPen.penDown":"[PEN_TYPE]ペンを下ろす","xcxVPen.plot":"プロットする","xcxVPen.setPenOpacity":"ペンの不透明度を[OPACITY]にする","xcxVPen.setSize":"ペンの太さを[SIZE]mm にする","xcxVPen.setLineShape":"線の種類を[LINE_SHAPE]にする","xcxVPen.setFillColorToColor":"塗りつぶしの色を[COLOR]にする","xcxVPen.setFillOpacity":"塗りつぶしの不透明度を[OPACITY]にする","xcxVPen.changeLayerTo":"[LAYER]にする","xcxVPen.moveLayerBy":"[LAYERS]層[DIRECTION]","xcxVPen.changeLayerMenu.top":"最前面","xcxVPen.changeLayerMenu.bottom":"最背面","xcxVPen.moveLayerDirectionMenu.up":"手前へ出す","xcxVPen.moveLayerDirectionMenu.down":"背後へ送る","xcxVPen.stepForMM":"[MM]mm の歩数","xcxVPen.mmForStep":"[STEP]歩の長さ(mm)","xcxVPen.getStepPerMM":"歩/mm","xcxVPen.setStepPerMM":"歩/mm を[STEP_PER_MM]にする","xcxVPen.downloadSpriteDrawing":"このスプライトの描画をファイル[FILENAME]に保存する","xcxVPen.downloadAllDrawing":"すべての描画をファイル[FILENAME]に保存する","xcxVPen.penTypesMenu.trail":"トレイル","xcxVPen.penTypesMenu.plotter":"プロッター","xcxVPen.lineShapesMenu.straight":"直線","xcxVPen.lineShapesMenu.curve":"曲線","xcxVPen.fileNameForSprite":"ファイル名を入力してください:","xcxVPen.fileNameForAll":"ファイル名を入力してください:"};var translations={en:en,ja:ja,"ja-Hira":{"xcxVPen.name":"ベクター ペン","xcxVPen.clearAll":"すべて の びょうが を けす","xcxVPen.clear":"この スプライト の びょうが を けす","xcxVPen.eraseLast":"さいご の びょうが を けす","xcxVPen.penDown":"[PEN_TYPE]ペン を 下ろす","xcxVPen.plot":"プロット する","xcxVPen.setPenOpacity":"ペン の ふとうめいど を[OPACITY]に する","xcxVPen.setSize":"ペン の ふとさ を[SIZE]mm に する","xcxVPen.setLineShape":"せん の しゅるい を[LINE_SHAPE]に する","xcxVPen.setFillColorToColor":"ぬりつぶし の いろ を[COLOR]に する","xcxVPen.setFillOpacity":"ぬりつぶし の ふとうめいど を[OPACITY]に する","xcxVPen.changeLayerTo":"[LAYER]に する","xcxVPen.moveLayerBy":"[LAYERS]そう[DIRECTION]","xcxVPen.changeLayerMenu.top":"さいぜんめん","xcxVPen.changeLayerMenu.bottom":"さいはいめん","xcxVPen.moveLayerDirectionMenu.up":"てまえ へ だす","xcxVPen.moveLayerDirectionMenu.down":"はいご へ おくる","xcxVPen.stepForMM":"[MM]mm の ほすう","xcxVPen.mmForStep":"[STEP]ほ の ながさ(mm)","xcxVPen.getStepPerMM":"ほ/mm","xcxVPen.setStepPerMM":"ほ/mm を[STEP_PER_MM]に する","xcxVPen.downloadSpriteDrawing":"この スプライト の びょうが を ファイル[FILENAME]に ほぞん する","xcxVPen.downloadAllDrawing":"すべて の びょうが を ファイル[FILENAME]に ほぞん する","xcxVPen.penTypesMenu.trail":"トレイル","xcxVPen.penTypesMenu.plotter":"プロッター","xcxVPen.lineShapesMenu.straight":"ちょくせん","xcxVPen.lineShapesMenu.curve":"きょくせん","xcxVPen.fileNameForSprite":"ファイルめい を にゅうりょく してください:","xcxVPen.fileNameForAll":"ファイルめい を にゅぅりょく してください:"}};var img="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA1CAYAAADh5qNwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABitJREFUaIHtmn9s1OUdx1/P93t33I9v7wqlhfaKMZVAKlCECVgT0eyfBZSFHwoOTfzDKqnKEh37Q8poDvfDLTPGhGzZqixTs2FQwbBgZF1WLCjOErrVdZJ1VVJGuEJT7nrtXfv98eyP4yqW0jvuOQY1ff3zTe6e7/s+r3ye57nnfggpJd80tBtdwPVgSmqyMCU1WZiSmixMSU0WXNclVQjB44/fA6xHiFqgCildQApN+xfQimW9xZ49ndfl5Qt+THriiW8DLwF3AGCakoEBgeOAywXBoETTxKXRf8JxtvHaa6cKWULhpDZu1AkGf4EQz+I40NUlOHUKenvh8tdwuSAchupqqKwEGAbqaWr6XWEKKZRUJKJx5swbwGb6+iQtLYL+/uz3VVbCvfdKfD6BlM/x6qsvqxdTqI3izJmdwGbOnoWDB3MTSt8H770nGBiQCPFL6uruL0Q56p168sk7cJw24nGNAwcEpnntGcXFsHatRNejpFLzefPNuEpJ6p2S8gWE0GltzU8I4OJFOHFCIMRs/P7vq5akJrVlyy3Aas6ehXPn1Crp7IRUSiLlFiIRpbrUpGx7FaDR1aUUcykLvvhCAJX09CxWiVKdft8C1LuUIRpNX4VYqhKjJiVEGIBEQilmlIGB9FXKsEqMaqfcSAmOoxhzia9y3CoxalJS9iEEeL1KMaP4fOmrEH0qMarTL30gnTlTKWaUkpL01XGUDrqqUn8B4NZblWJGSecMY5rHVGLUpJqaPkbKLubOlaNTJ18qKjKdepvXXx9Uibqmz1OHDh2aXVVV9Z1AIBAGhmMdHd2l7767Z2ZPz0/1FSugpSW/KnQdamslIJHyxfxCviJnqfb29tUrV67cZhhGMPPYnDlzMOfP1wbb2/tkW1uJL5nE88knX7tPCkEyHMZasQJRVIT88ksCR4+iWxYAsRk6oZp7YPp0gRAv0dT02f9F6uTJk7XV1dUNXq932tjn3G63416y5L+Ulxcl777bEzt8GPHhh5BMQjiMuOsuvEuW4Hend2kpJYmODtwNDZxYmOCpP5RTd8TN1g/EXxFiu6oQ5HBKj0Qirvr6+t+XlZXNn3CgaU6jt3culuXFsmBwkIkOuK2DreyY9waryjZyNNZs9drnX/nbzPZteVmMIavU8ePHly5fvrxJ07Tsn1EcR6evr5KhofQeb9tpMdMEIUDTQNf51P85Pyz6OauL1hHSirGx2Z/YF4va5379j9Bnz6tKZd39AoHALTkJAWiaTWnpacrLO/H7L+B2W3i9UFQEhgF+P58GTrHtMiEAHZ11xkOhWfrs+prYwp+pKeWwpuLx+DnHcUTOYgAeT5LS0tPAaUZGvDiOjmW5j4rjnu3OixUPBNbpGaEMGbH9iX31NbGFqHQsa6eam5vb+vv7u8c+PsKIGG/8FXg8KbzeweZpHzvPO40VawIbrhDKkBEr1cueWhxb8JOc8schq1RjY6PV3d398sjIyOiq/1Vq96za2PLF7dbJnN5x/2weDkZSjVXfDWzQg1pwwrE6OhuMTcESvezpRbHbf5xL/lhyOlEsW7bso87Ozp2JRCL22+HflO23DpTfH1irPz1UP6/NavNPdO8Rs8XYlYpUrQmszyqUQUfnQePh0Gy94pl81tg1ffFyX+/KH+ET2zcYm7we4eG8HeX9wYPWK/7d/77TdefQ2PFHzBZjR6ph7ppx1lAu5Lsr5nz2WxRfsNX0WT/ICAGU6rNYFVjjemaw/rbWRKvXNE3hOI4ohBDkvyvm1KlF8QVbgyL0wsPGo6GM0OWct6PsG/hj/9ILy7bURet69pXvrT1WcmzXQ0WbjXyFLudaO5ZVqubi7c+G9Bk7Nxmbi93jCGXotaO8k9h7YVgmd/m0QOR7xmPTc11DuWBj807irfgFO7r776F/Nkw0dkKpmovVzxXrM3ZuNB4JTSSUodeO0jz0fuKBwHqjkEIZbGzeTuyNnbejuztCnTuuNu6qUtmm3I0il6k47kZxswpBbpvHFVI3s1CGbGJfk5oMQhkmEhuVmkxCGa4mJqSUVA/cNk/a+gm/5ktp6NaNLDQfbBw95ST9Ulj3fR76T1vhf/O9CfhG/uVgSmqyMCU1WfgflKx65SYix1IAAAAASUVORK5CYII=";function _createForOfIteratorHelper$3(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray$3(r))||e){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,u=!1;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=!0,o=r;},f:function f(){try{a||null==t.return||t.return();}finally{if(u)throw o;}}};}function _unsupportedIterableToArray$3(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray$3(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$3(r,a):void 0;}}function _arrayLikeToArray$3(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}var methods$1={};var names=[];function registerMethods(name,m){if(Array.isArray(name)){var _iterator=_createForOfIteratorHelper$3(name),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _name=_step.value;registerMethods(_name,m);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return;}if(_typeof$1(name)==='object'){for(var _name2 in name){registerMethods(_name2,name[_name2]);}return;}addMethodNames(Object.getOwnPropertyNames(m));methods$1[name]=Object.assign(methods$1[name]||{},m);}function getMethodsFor(name){return methods$1[name]||{};}function getMethodNames(){return _toConsumableArray(new Set(names));}function addMethodNames(_names){names.push.apply(names,_toConsumableArray(_names));}function _defineProperty(e,r,t){return(r=toPropertyKey$1(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;}function ownKeys$4(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread$4(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$4(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$4(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}// Map function
function map(array,block){var i;var il=array.length;var result=[];for(i=0;i<il;i++){result.push(block(array[i]));}return result;}// Filter function
function filter(array,block){var i;var il=array.length;var result=[];for(i=0;i<il;i++){if(block(array[i])){result.push(array[i]);}}return result;}// Degrees to radians
function radians(d){return d%360*Math.PI/180;}// Convert camel cased string to dash separated
function unCamelCase(s){return s.replace(/([A-Z])/g,function(m,g){return'-'+g.toLowerCase();});}// Capitalize first letter of a string
function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1);}// Calculate proportional width and height values when necessary
function proportionalSize(element,width,height,box){if(width==null||height==null){box=box||element.bbox();if(width==null){width=box.width/box.height*height;}else if(height==null){height=box.height/box.width*width;}}return{width:width,height:height};}/**
 * This function adds support for string origins.
 * It searches for an origin in o.origin o.ox and o.originX.
 * This way, origin: {x: 'center', y: 50} can be passed as well as ox: 'center', oy: 50
 **/function getOrigin(o,element){var origin=o.origin;// First check if origin is in ox or originX
var ox=o.ox!=null?o.ox:o.originX!=null?o.originX:'center';var oy=o.oy!=null?o.oy:o.originY!=null?o.originY:'center';// Then check if origin was used and overwrite in that case
if(origin!=null){var _ref=Array.isArray(origin)?origin:_typeof$1(origin)==='object'?[origin.x,origin.y]:[origin,origin];var _ref2=_slicedToArray(_ref,2);ox=_ref2[0];oy=_ref2[1];}// Make sure to only call bbox when actually needed
var condX=typeof ox==='string';var condY=typeof oy==='string';if(condX||condY){var _element$bbox=element.bbox(),height=_element$bbox.height,width=_element$bbox.width,x=_element$bbox.x,y=_element$bbox.y;// And only overwrite if string was passed for this specific axis
if(condX){ox=ox.includes('left')?x:ox.includes('right')?x+width:x+width/2;}if(condY){oy=oy.includes('top')?y:oy.includes('bottom')?y+height:y+height/2;}}// Return the origin as it is if it wasn't a string
return[ox,oy];}var descriptiveElements=new Set(['desc','metadata','title']);var isDescriptive=function isDescriptive(element){return descriptiveElements.has(element.nodeName);};var writeDataToDom=function writeDataToDom(element,data){var defaults=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var cloned=_objectSpread$4({},data);for(var key in cloned){if(cloned[key].valueOf()===defaults[key]){delete cloned[key];}}if(Object.keys(cloned).length){element.node.setAttribute('data-svgjs',JSON.stringify(cloned));// see #428
}else{element.node.removeAttribute('data-svgjs');element.node.removeAttribute('svgjs:data');}};// Default namespaces
var svg='http://www.w3.org/2000/svg';var html='http://www.w3.org/1999/xhtml';var xmlns='http://www.w3.org/2000/xmlns/';var xlink='http://www.w3.org/1999/xlink';var globals={window:typeof window==='undefined'?null:window,document:typeof document==='undefined'?null:document};function getWindow(){return globals.window;}var Base=/*#__PURE__*/_createClass$1(function Base(){_classCallCheck$1(this,Base);});var elements={};var root='___SYMBOL___ROOT___';// Method for element creation
function create(name){var ns=arguments.length>1&&arguments[1]!==undefined?arguments[1]:svg;// create element
return globals.document.createElementNS(ns,name);}function makeInstance(element){var isHTML=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(element instanceof Base)return element;if(_typeof$1(element)==='object'){return adopter(element);}if(element==null){return new elements[root]();}if(typeof element==='string'&&element.charAt(0)!=='<'){return adopter(globals.document.querySelector(element));}// Make sure, that HTML elements are created with the correct namespace
var wrapper=isHTML?globals.document.createElement('div'):create('svg');wrapper.innerHTML=element;// We can use firstChild here because we know,
// that the first char is < and thus an element
element=adopter(wrapper.firstChild);// make sure, that element doesn't have its wrapper attached
wrapper.removeChild(wrapper.firstChild);return element;}function nodeOrNew(name,node){return node&&(node instanceof globals.window.Node||node.ownerDocument&&node instanceof node.ownerDocument.defaultView.Node)?node:create(name);}// Adopt existing svg elements
function adopt(node){// check for presence of node
if(!node)return null;// make sure a node isn't already adopted
if(node.instance instanceof Base)return node.instance;if(node.nodeName==='#document-fragment'){return new elements.Fragment(node);}// initialize variables
var className=capitalize(node.nodeName||'Dom');// Make sure that gradients are adopted correctly
if(className==='LinearGradient'||className==='RadialGradient'){className='Gradient';// Fallback to Dom if element is not known
}else if(!elements[className]){className='Dom';}return new elements[className](node);}var adopter=adopt;function register(element){var name=arguments.length>1&&arguments[1]!==undefined?arguments[1]:element.name;var asRoot=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;elements[name]=element;if(asRoot)elements[root]=element;addMethodNames(Object.getOwnPropertyNames(element.prototype));return element;}function getClass(name){return elements[name];}// Element id sequence
var did=1000;// Get next named element id
function eid(name){return'Svgjs'+capitalize(name)+did++;}// Deep new id assignment
function assignNewId(node){// do the same for SVG child nodes as well
for(var i=node.children.length-1;i>=0;i--){assignNewId(node.children[i]);}if(node.id){node.id=eid(node.nodeName);return node;}return node;}// Method for extending objects
function extend(modules,methods){var key,i;modules=Array.isArray(modules)?modules:[modules];for(i=modules.length-1;i>=0;i--){for(key in methods){modules[i].prototype[key]=methods[key];}}}function wrapWithAttrCheck(fn){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var o=args[args.length-1];if(o&&o.constructor===Object&&!(o instanceof Array)){return fn.apply(this,args.slice(0,-1)).attr(o);}else{return fn.apply(this,args);}};}// Get all siblings, including myself
function siblings(){return this.parent().children();}// Get the current position siblings
function position(){return this.parent().index(this);}// Get the next element (will return null if there is none)
function next(){return this.siblings()[this.position()+1];}// Get the next element (will return null if there is none)
function prev(){return this.siblings()[this.position()-1];}// Send given element one step forward
function forward(){var i=this.position();var p=this.parent();// move node one step forward
p.add(this.remove(),i+1);return this;}// Send given element one step backward
function backward(){var i=this.position();var p=this.parent();p.add(this.remove(),i?i-1:0);return this;}// Send given element all the way to the front
function front(){var p=this.parent();// Move node forward
p.add(this.remove());return this;}// Send given element all the way to the back
function back(){var p=this.parent();// Move node back
p.add(this.remove(),0);return this;}// Inserts a given element before the targeted element
function before(element){element=makeInstance(element);element.remove();var i=this.position();this.parent().add(element,i);return this;}// Inserts a given element after the targeted element
function after(element){element=makeInstance(element);element.remove();var i=this.position();this.parent().add(element,i+1);return this;}function insertBefore(element){element=makeInstance(element);element.before(this);return this;}function insertAfter(element){element=makeInstance(element);element.after(this);return this;}registerMethods('Dom',{siblings:siblings,position:position,next:next,prev:prev,forward:forward,backward:backward,front:front,back:back,before:before,after:after,insertBefore:insertBefore,insertAfter:insertAfter});// Parse unit value
var numberAndUnit=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i;// Parse hex value
var hex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;// Parse rgb value
var rgb=/rgb\((\d+),(\d+),(\d+)\)/;// Parse reference id
var reference=/(#[a-z_][a-z0-9\-_]*)/i;// splits a transformation chain
var transforms=/\)\s*,?\s*/;// Whitespace
var whitespace=/\s/g;// Test hex value
var isHex=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i;// Test rgb value
var isRgb=/^rgb\(/;// Test for blank string
var isBlank=/^(\s+)?$/;// Test for numeric string
var isNumber=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;// Test for image url
var isImage=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i;// split at whitespace and comma
var delimiter=/[\s,]+/;// Test for path letter
var isPathLetter=/[MLHVCSQTAZ]/i;// Return array of classes on the node
function classes(){var attr=this.attr('class');return attr==null?[]:attr.trim().split(delimiter);}// Return true if class exists on the node, false otherwise
function hasClass(name){return this.classes().indexOf(name)!==-1;}// Add class to the node
function addClass(name){if(!this.hasClass(name)){var array=this.classes();array.push(name);this.attr('class',array.join(' '));}return this;}// Remove class from the node
function removeClass(name){if(this.hasClass(name)){this.attr('class',this.classes().filter(function(c){return c!==name;}).join(' '));}return this;}// Toggle the presence of a class on the node
function toggleClass(name){return this.hasClass(name)?this.removeClass(name):this.addClass(name);}registerMethods('Dom',{classes:classes,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass});function _createForOfIteratorHelper$2(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray$2(r))||e){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,u=!1;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=!0,o=r;},f:function f(){try{a||null==t.return||t.return();}finally{if(u)throw o;}}};}function _unsupportedIterableToArray$2(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray$2(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$2(r,a):void 0;}}function _arrayLikeToArray$2(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}// Dynamic style generator
function css(style,val){var ret={};if(arguments.length===0){// get full style as object
this.node.style.cssText.split(/\s*;\s*/).filter(function(el){return!!el.length;}).forEach(function(el){var t=el.split(/\s*:\s*/);ret[t[0]]=t[1];});return ret;}if(arguments.length<2){// get style properties as array
if(Array.isArray(style)){var _iterator=_createForOfIteratorHelper$2(style),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var name=_step.value;var cased=name;ret[name]=this.node.style.getPropertyValue(cased);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return ret;}// get style for property
if(typeof style==='string'){return this.node.style.getPropertyValue(style);}// set styles in object
if(_typeof$1(style)==='object'){for(var _name in style){// set empty string if null/undefined/'' was given
this.node.style.setProperty(_name,style[_name]==null||isBlank.test(style[_name])?'':style[_name]);}}}// set style for property
if(arguments.length===2){this.node.style.setProperty(style,val==null||isBlank.test(val)?'':val);}return this;}// Show element
function show(){return this.css('display','');}// Hide element
function hide(){return this.css('display','none');}// Is element visible?
function visible(){return this.css('display')!=='none';}registerMethods('Dom',{css:css,show:show,hide:hide,visible:visible});function _createForOfIteratorHelper$1(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray$1(r))||e){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,u=!1;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=!0,o=r;},f:function f(){try{a||null==t.return||t.return();}finally{if(u)throw o;}}};}function _unsupportedIterableToArray$1(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray$1(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$1(r,a):void 0;}}function _arrayLikeToArray$1(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}// Store data values on svg nodes
function data(a,v,r){if(a==null){// get an object of attributes
return this.data(map(filter(this.node.attributes,function(el){return el.nodeName.indexOf('data-')===0;}),function(el){return el.nodeName.slice(5);}));}else if(a instanceof Array){var _data={};var _iterator=_createForOfIteratorHelper$1(a),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;_data[key]=this.data(key);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return _data;}else if(_typeof$1(a)==='object'){for(v in a){this.data(v,a[v]);}}else if(arguments.length<2){try{return JSON.parse(this.attr('data-'+a));}catch(e){return this.attr('data-'+a);}}else{this.attr('data-'+a,v===null?null:r===true||typeof v==='string'||typeof v==='number'?v:JSON.stringify(v));}return this;}registerMethods('Dom',{data:data});// Remember arbitrary data
function remember(k,v){// remember every item in an object individually
if(_typeof$1(arguments[0])==='object'){for(var key in k){this.remember(key,k[key]);}}else if(arguments.length===1){// retrieve memory
return this.memory()[k];}else{// store memory
this.memory()[k]=v;}return this;}// Erase a given memory
function forget(){if(arguments.length===0){this._memory={};}else{for(var i=arguments.length-1;i>=0;i--){delete this.memory()[arguments[i]];}}return this;}// This triggers creation of a new hidden class which is not performant
// However, this function is not rarely used so it will not happen frequently
// Return local memory object
function memory(){return this._memory=this._memory||{};}registerMethods('Dom',{remember:remember,forget:forget,memory:memory});function sixDigitHex(hex){return hex.length===4?['#',hex.substring(1,2),hex.substring(1,2),hex.substring(2,3),hex.substring(2,3),hex.substring(3,4),hex.substring(3,4)].join(''):hex;}function componentHex(component){var integer=Math.round(component);var bounded=Math.max(0,Math.min(255,integer));var hex=bounded.toString(16);return hex.length===1?'0'+hex:hex;}function is(object,space){for(var i=space.length;i--;){if(object[space[i]]==null){return false;}}return true;}function getParameters(a,b){var params=is(a,'rgb')?{_a:a.r,_b:a.g,_c:a.b,_d:0,space:'rgb'}:is(a,'xyz')?{_a:a.x,_b:a.y,_c:a.z,_d:0,space:'xyz'}:is(a,'hsl')?{_a:a.h,_b:a.s,_c:a.l,_d:0,space:'hsl'}:is(a,'lab')?{_a:a.l,_b:a.a,_c:a.b,_d:0,space:'lab'}:is(a,'lch')?{_a:a.l,_b:a.c,_c:a.h,_d:0,space:'lch'}:is(a,'cmyk')?{_a:a.c,_b:a.m,_c:a.y,_d:a.k,space:'cmyk'}:{_a:0,_b:0,_c:0,space:'rgb'};params.space=b||params.space;return params;}function cieSpace(space){if(space==='lab'||space==='xyz'||space==='lch'){return true;}else{return false;}}function hueToRgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p;}var Color=/*#__PURE__*/function(){function Color(){_classCallCheck$1(this,Color);this.init.apply(this,arguments);}// Test if given value is a color
return _createClass$1(Color,[{key:"cmyk",value:function cmyk(){// Get the rgb values for the current color
var _this$rgb=this.rgb(),_a=_this$rgb._a,_b=_this$rgb._b,_c=_this$rgb._c;var _map=[_a,_b,_c].map(function(v){return v/255;}),_map2=_slicedToArray(_map,3),r=_map2[0],g=_map2[1],b=_map2[2];// Get the cmyk values in an unbounded format
var k=Math.min(1-r,1-g,1-b);if(k===1){// Catch the black case
return new Color(0,0,0,1,'cmyk');}var c=(1-r-k)/(1-k);var m=(1-g-k)/(1-k);var y=(1-b-k)/(1-k);// Construct the new color
var color=new Color(c,m,y,k,'cmyk');return color;}},{key:"hsl",value:function hsl(){// Get the rgb values
var _this$rgb2=this.rgb(),_a=_this$rgb2._a,_b=_this$rgb2._b,_c=_this$rgb2._c;var _map3=[_a,_b,_c].map(function(v){return v/255;}),_map4=_slicedToArray(_map3,3),r=_map4[0],g=_map4[1],b=_map4[2];// Find the maximum and minimum values to get the lightness
var max=Math.max(r,g,b);var min=Math.min(r,g,b);var l=(max+min)/2;// If the r, g, v values are identical then we are grey
var isGrey=max===min;// Calculate the hue and saturation
var delta=max-min;var s=isGrey?0:l>0.5?delta/(2-max-min):delta/(max+min);var h=isGrey?0:max===r?((g-b)/delta+(g<b?6:0))/6:max===g?((b-r)/delta+2)/6:max===b?((r-g)/delta+4)/6:0;// Construct and return the new color
var color=new Color(360*h,100*s,100*l,'hsl');return color;}},{key:"init",value:function init(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var d=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var space=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'rgb';// This catches the case when a falsy value is passed like ''
a=!a?0:a;// Reset all values in case the init function is rerun with new color space
if(this.space){for(var component in this.space){delete this[this.space[component]];}}if(typeof a==='number'){// Allow for the case that we don't need d...
space=typeof d==='string'?d:space;d=typeof d==='string'?0:d;// Assign the values straight to the color
Object.assign(this,{_a:a,_b:b,_c:c,_d:d,space:space});// If the user gave us an array, make the color from it
}else if(a instanceof Array){this.space=b||(typeof a[3]==='string'?a[3]:a[4])||'rgb';Object.assign(this,{_a:a[0],_b:a[1],_c:a[2],_d:a[3]||0});}else if(a instanceof Object){// Set the object up and assign its values directly
var values=getParameters(a,b);Object.assign(this,values);}else if(typeof a==='string'){if(isRgb.test(a)){var noWhitespace=a.replace(whitespace,'');var _rgb$exec$slice$map=rgb.exec(noWhitespace).slice(1,4).map(function(v){return parseInt(v);}),_rgb$exec$slice$map2=_slicedToArray(_rgb$exec$slice$map,3),_a2=_rgb$exec$slice$map2[0],_b2=_rgb$exec$slice$map2[1],_c2=_rgb$exec$slice$map2[2];Object.assign(this,{_a:_a2,_b:_b2,_c:_c2,_d:0,space:'rgb'});}else if(isHex.test(a)){var hexParse=function hexParse(v){return parseInt(v,16);};var _hex$exec$map=hex.exec(sixDigitHex(a)).map(hexParse),_hex$exec$map2=_slicedToArray(_hex$exec$map,4),_a3=_hex$exec$map2[1],_b3=_hex$exec$map2[2],_c3=_hex$exec$map2[3];Object.assign(this,{_a:_a3,_b:_b3,_c:_c3,_d:0,space:'rgb'});}else throw Error("Unsupported string format, can't construct Color");}// Now add the components as a convenience
var _a=this._a,_b=this._b,_c=this._c,_d=this._d;var components=this.space==='rgb'?{r:_a,g:_b,b:_c}:this.space==='xyz'?{x:_a,y:_b,z:_c}:this.space==='hsl'?{h:_a,s:_b,l:_c}:this.space==='lab'?{l:_a,a:_b,b:_c}:this.space==='lch'?{l:_a,c:_b,h:_c}:this.space==='cmyk'?{c:_a,m:_b,y:_c,k:_d}:{};Object.assign(this,components);}},{key:"lab",value:function lab(){// Get the xyz color
var _this$xyz=this.xyz(),x=_this$xyz.x,y=_this$xyz.y,z=_this$xyz.z;// Get the lab components
var l=116*y-16;var a=500*(x-y);var b=200*(y-z);// Construct and return a new color
var color=new Color(l,a,b,'lab');return color;}},{key:"lch",value:function lch(){// Get the lab color directly
var _this$lab=this.lab(),l=_this$lab.l,a=_this$lab.a,b=_this$lab.b;// Get the chromaticity and the hue using polar coordinates
var c=Math.sqrt(Math.pow(a,2)+Math.pow(b,2));var h=180*Math.atan2(b,a)/Math.PI;if(h<0){h*=-1;h=360-h;}// Make a new color and return it
var color=new Color(l,c,h,'lch');return color;}/*
    Conversion Methods
    */},{key:"rgb",value:function rgb(){if(this.space==='rgb'){return this;}else if(cieSpace(this.space)){// Convert to the xyz color space
var x=this.x,y=this.y,z=this.z;if(this.space==='lab'||this.space==='lch'){// Get the values in the lab space
var l=this.l,a=this.a,_b4=this.b;if(this.space==='lch'){var c=this.c,h=this.h;var dToR=Math.PI/180;a=c*Math.cos(dToR*h);_b4=c*Math.sin(dToR*h);}// Undo the nonlinear function
var yL=(l+16)/116;var xL=a/500+yL;var zL=yL-_b4/200;// Get the xyz values
var ct=16/116;var mx=0.008856;var nm=7.787;x=0.95047*(Math.pow(xL,3)>mx?Math.pow(xL,3):(xL-ct)/nm);y=1.0*(Math.pow(yL,3)>mx?Math.pow(yL,3):(yL-ct)/nm);z=1.08883*(Math.pow(zL,3)>mx?Math.pow(zL,3):(zL-ct)/nm);}// Convert xyz to unbounded rgb values
var rU=x*3.2406+y*-1.5372+z*-0.4986;var gU=x*-0.9689+y*1.8758+z*0.0415;var bU=x*0.0557+y*-0.204+z*1.057;// Convert the values to true rgb values
var pow=Math.pow;var bd=0.0031308;var r=rU>bd?1.055*pow(rU,1/2.4)-0.055:12.92*rU;var g=gU>bd?1.055*pow(gU,1/2.4)-0.055:12.92*gU;var b=bU>bd?1.055*pow(bU,1/2.4)-0.055:12.92*bU;// Make and return the color
var color=new Color(255*r,255*g,255*b);return color;}else if(this.space==='hsl'){// https://bgrins.github.io/TinyColor/docs/tinycolor.html
// Get the current hsl values
var _h=this.h,s=this.s,_l=this.l;_h/=360;s/=100;_l/=100;// If we are grey, then just make the color directly
if(s===0){_l*=255;var _color=new Color(_l,_l,_l);return _color;}// TODO I have no idea what this does :D If you figure it out, tell me!
var q=_l<0.5?_l*(1+s):_l+s-_l*s;var p=2*_l-q;// Get the rgb values
var _r=255*hueToRgb(p,q,_h+1/3);var _g=255*hueToRgb(p,q,_h);var _b5=255*hueToRgb(p,q,_h-1/3);// Make a new color
var _color2=new Color(_r,_g,_b5);return _color2;}else if(this.space==='cmyk'){// https://gist.github.com/felipesabino/5066336
// Get the normalised cmyk values
var _c4=this.c,m=this.m,_y=this.y,k=this.k;// Get the rgb values
var _r2=255*(1-Math.min(1,_c4*(1-k)+k));var _g2=255*(1-Math.min(1,m*(1-k)+k));var _b6=255*(1-Math.min(1,_y*(1-k)+k));// Form the color and return it
var _color3=new Color(_r2,_g2,_b6);return _color3;}else{return this;}}},{key:"toArray",value:function toArray(){var _a=this._a,_b=this._b,_c=this._c,_d=this._d,space=this.space;return[_a,_b,_c,_d,space];}},{key:"toHex",value:function toHex(){var _this$_clamped$map=this._clamped().map(componentHex),_this$_clamped$map2=_slicedToArray(_this$_clamped$map,3),r=_this$_clamped$map2[0],g=_this$_clamped$map2[1],b=_this$_clamped$map2[2];return"#".concat(r).concat(g).concat(b);}},{key:"toRgb",value:function toRgb(){var _this$_clamped=this._clamped(),_this$_clamped2=_slicedToArray(_this$_clamped,3),rV=_this$_clamped2[0],gV=_this$_clamped2[1],bV=_this$_clamped2[2];var string="rgb(".concat(rV,",").concat(gV,",").concat(bV,")");return string;}},{key:"toString",value:function toString(){return this.toHex();}},{key:"xyz",value:function xyz(){// Normalise the red, green and blue values
var _this$rgb3=this.rgb(),r255=_this$rgb3._a,g255=_this$rgb3._b,b255=_this$rgb3._c;var _map5=[r255,g255,b255].map(function(v){return v/255;}),_map6=_slicedToArray(_map5,3),r=_map6[0],g=_map6[1],b=_map6[2];// Convert to the lab rgb space
var rL=r>0.04045?Math.pow((r+0.055)/1.055,2.4):r/12.92;var gL=g>0.04045?Math.pow((g+0.055)/1.055,2.4):g/12.92;var bL=b>0.04045?Math.pow((b+0.055)/1.055,2.4):b/12.92;// Convert to the xyz color space without bounding the values
var xU=(rL*0.4124+gL*0.3576+bL*0.1805)/0.95047;var yU=(rL*0.2126+gL*0.7152+bL*0.0722)/1.0;var zU=(rL*0.0193+gL*0.1192+bL*0.9505)/1.08883;// Get the proper xyz values by applying the bounding
var x=xU>0.008856?Math.pow(xU,1/3):7.787*xU+16/116;var y=yU>0.008856?Math.pow(yU,1/3):7.787*yU+16/116;var z=zU>0.008856?Math.pow(zU,1/3):7.787*zU+16/116;// Make and return the color
var color=new Color(x,y,z,'xyz');return color;}/*
    Input and Output methods
    */},{key:"_clamped",value:function _clamped(){var _this$rgb4=this.rgb(),_a=_this$rgb4._a,_b=_this$rgb4._b,_c=_this$rgb4._c;var max=Math.max,min=Math.min,round=Math.round;var format=function format(v){return max(0,min(round(v),255));};return[_a,_b,_c].map(format);}/*
    Constructing colors
    */}],[{key:"isColor",value:function isColor(color){return color&&(color instanceof Color||this.isRgb(color)||this.test(color));}// Test if given value is an rgb object
},{key:"isRgb",value:function isRgb(color){return color&&typeof color.r==='number'&&typeof color.g==='number'&&typeof color.b==='number';}/*
    Generating random colors
    */},{key:"random",value:function random(){var mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'vibrant';var t=arguments.length>1?arguments[1]:undefined;// Get the math modules
var random=Math.random,round=Math.round,sin=Math.sin,pi=Math.PI;// Run the correct generator
if(mode==='vibrant'){var l=(81-57)*random()+57;var c=(83-45)*random()+45;var h=360*random();var color=new Color(l,c,h,'lch');return color;}else if(mode==='sine'){t=t==null?random():t;var r=round(80*sin(2*pi*t/0.5+0.01)+150);var g=round(50*sin(2*pi*t/0.5+4.6)+200);var b=round(100*sin(2*pi*t/0.5+2.3)+150);var _color4=new Color(r,g,b);return _color4;}else if(mode==='pastel'){var _l2=(94-86)*random()+86;var _c5=(26-9)*random()+9;var _h2=360*random();var _color5=new Color(_l2,_c5,_h2,'lch');return _color5;}else if(mode==='dark'){var _l3=10+10*random();var _c6=(125-75)*random()+86;var _h3=360*random();var _color6=new Color(_l3,_c6,_h3,'lch');return _color6;}else if(mode==='rgb'){var _r3=255*random();var _g3=255*random();var _b7=255*random();var _color7=new Color(_r3,_g3,_b7);return _color7;}else if(mode==='lab'){var _l4=100*random();var a=256*random()-128;var _b8=256*random()-128;var _color8=new Color(_l4,a,_b8,'lab');return _color8;}else if(mode==='grey'){var grey=255*random();var _color9=new Color(grey,grey,grey);return _color9;}else{throw new Error('Unsupported random color mode');}}// Test if given value is a color string
},{key:"test",value:function test(color){return typeof color==='string'&&(isHex.test(color)||isRgb.test(color));}}]);}();function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof$1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t);}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t);},_getPrototypeOf(t);}function _superPropBase(t,o){for(;!{}.hasOwnProperty.call(t,o)&&null!==(t=_getPrototypeOf(t)););return t;}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var p=_superPropBase(e,t);if(p){var n=Object.getOwnPropertyDescriptor(p,t);return n.get?n.get.call(arguments.length<3?e:r):n.value;}},_get.apply(null,arguments);}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t;},_setPrototypeOf(t,e);}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e);}var Point=/*#__PURE__*/function(){// Initialize
function Point(){_classCallCheck$1(this,Point);this.init.apply(this,arguments);}// Clone point
return _createClass$1(Point,[{key:"clone",value:function clone(){return new Point(this);}},{key:"init",value:function init(x,y){var base={x:0,y:0};// ensure source as object
var source=Array.isArray(x)?{x:x[0],y:x[1]}:_typeof$1(x)==='object'?{x:x.x,y:x.y}:{x:x,y:y};// merge source
this.x=source.x==null?base.x:source.x;this.y=source.y==null?base.y:source.y;return this;}},{key:"toArray",value:function toArray(){return[this.x,this.y];}},{key:"transform",value:function transform(m){return this.clone().transformO(m);}// Transform point with matrix
},{key:"transformO",value:function transformO(m){if(!Matrix.isMatrixLike(m)){m=new Matrix(m);}var x=this.x,y=this.y;// Perform the matrix multiplication
this.x=m.a*x+m.c*y+m.e;this.y=m.b*x+m.d*y+m.f;return this;}}]);}();function point(x,y){return new Point(x,y).transformO(this.screenCTM().inverseO());}function closeEnough(a,b,threshold){return Math.abs(b-a)<1e-6;}var Matrix=/*#__PURE__*/function(){function Matrix(){_classCallCheck$1(this,Matrix);this.init.apply(this,arguments);}return _createClass$1(Matrix,[{key:"around",value:function around(cx,cy,matrix){return this.clone().aroundO(cx,cy,matrix);}// Transform around a center point
},{key:"aroundO",value:function aroundO(cx,cy,matrix){var dx=cx||0;var dy=cy||0;return this.translateO(-dx,-dy).lmultiplyO(matrix).translateO(dx,dy);}// Clones this matrix
},{key:"clone",value:function clone(){return new Matrix(this);}// Decomposes this matrix into its affine parameters
},{key:"decompose",value:function decompose(){var cx=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var cy=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;// Get the parameters from the matrix
var a=this.a;var b=this.b;var c=this.c;var d=this.d;var e=this.e;var f=this.f;// Figure out if the winding direction is clockwise or counterclockwise
var determinant=a*d-b*c;var ccw=determinant>0?1:-1;// Since we only shear in x, we can use the x basis to get the x scale
// and the rotation of the resulting matrix
var sx=ccw*Math.sqrt(a*a+b*b);var thetaRad=Math.atan2(ccw*b,ccw*a);var theta=180/Math.PI*thetaRad;var ct=Math.cos(thetaRad);var st=Math.sin(thetaRad);// We can then solve the y basis vector simultaneously to get the other
// two affine parameters directly from these parameters
var lam=(a*c+b*d)/determinant;var sy=c*sx/(lam*a-b)||d*sx/(lam*b+a);// Use the translations
var tx=e-cx+cx*ct*sx+cy*(lam*ct*sx-st*sy);var ty=f-cy+cx*st*sx+cy*(lam*st*sx+ct*sy);// Construct the decomposition and return it
return{// Return the affine parameters
scaleX:sx,scaleY:sy,shear:lam,rotate:theta,translateX:tx,translateY:ty,originX:cx,originY:cy,// Return the matrix parameters
a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f};}// Check if two matrices are equal
},{key:"equals",value:function equals(other){if(other===this)return true;var comp=new Matrix(other);return closeEnough(this.a,comp.a)&&closeEnough(this.b,comp.b)&&closeEnough(this.c,comp.c)&&closeEnough(this.d,comp.d)&&closeEnough(this.e,comp.e)&&closeEnough(this.f,comp.f);}// Flip matrix on x or y, at a given offset
},{key:"flip",value:function flip(axis,around){return this.clone().flipO(axis,around);}},{key:"flipO",value:function flipO(axis,around){return axis==='x'?this.scaleO(-1,1,around,0):axis==='y'?this.scaleO(1,-1,0,around):this.scaleO(-1,-1,axis,around||axis);// Define an x, y flip point
}// Initialize
},{key:"init",value:function init(source){var base=Matrix.fromArray([1,0,0,1,0,0]);// ensure source as object
source=source instanceof Element?source.matrixify():typeof source==='string'?Matrix.fromArray(source.split(delimiter).map(parseFloat)):Array.isArray(source)?Matrix.fromArray(source):_typeof$1(source)==='object'&&Matrix.isMatrixLike(source)?source:_typeof$1(source)==='object'?new Matrix().transform(source):arguments.length===6?Matrix.fromArray([].slice.call(arguments)):base;// Merge the source matrix with the base matrix
this.a=source.a!=null?source.a:base.a;this.b=source.b!=null?source.b:base.b;this.c=source.c!=null?source.c:base.c;this.d=source.d!=null?source.d:base.d;this.e=source.e!=null?source.e:base.e;this.f=source.f!=null?source.f:base.f;return this;}},{key:"inverse",value:function inverse(){return this.clone().inverseO();}// Inverses matrix
},{key:"inverseO",value:function inverseO(){// Get the current parameters out of the matrix
var a=this.a;var b=this.b;var c=this.c;var d=this.d;var e=this.e;var f=this.f;// Invert the 2x2 matrix in the top left
var det=a*d-b*c;if(!det)throw new Error('Cannot invert '+this);// Calculate the top 2x2 matrix
var na=d/det;var nb=-b/det;var nc=-c/det;var nd=a/det;// Apply the inverted matrix to the top right
var ne=-(na*e+nc*f);var nf=-(nb*e+nd*f);// Construct the inverted matrix
this.a=na;this.b=nb;this.c=nc;this.d=nd;this.e=ne;this.f=nf;return this;}},{key:"lmultiply",value:function lmultiply(matrix){return this.clone().lmultiplyO(matrix);}},{key:"lmultiplyO",value:function lmultiplyO(matrix){var r=this;var l=matrix instanceof Matrix?matrix:new Matrix(matrix);return Matrix.matrixMultiply(l,r,this);}// Left multiplies by the given matrix
},{key:"multiply",value:function multiply(matrix){return this.clone().multiplyO(matrix);}},{key:"multiplyO",value:function multiplyO(matrix){// Get the matrices
var l=this;var r=matrix instanceof Matrix?matrix:new Matrix(matrix);return Matrix.matrixMultiply(l,r,this);}// Rotate matrix
},{key:"rotate",value:function rotate(r,cx,cy){return this.clone().rotateO(r,cx,cy);}},{key:"rotateO",value:function rotateO(r){var cx=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var cy=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;// Convert degrees to radians
r=radians(r);var cos=Math.cos(r);var sin=Math.sin(r);var a=this.a,b=this.b,c=this.c,d=this.d,e=this.e,f=this.f;this.a=a*cos-b*sin;this.b=b*cos+a*sin;this.c=c*cos-d*sin;this.d=d*cos+c*sin;this.e=e*cos-f*sin+cy*sin-cx*cos+cx;this.f=f*cos+e*sin-cx*sin-cy*cos+cy;return this;}// Scale matrix
},{key:"scale",value:function scale(){var _this$clone;return(_this$clone=this.clone()).scaleO.apply(_this$clone,arguments);}},{key:"scaleO",value:function scaleO(x){var y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:x;var cx=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var cy=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;// Support uniform scaling
if(arguments.length===3){cy=cx;cx=y;y=x;}var a=this.a,b=this.b,c=this.c,d=this.d,e=this.e,f=this.f;this.a=a*x;this.b=b*y;this.c=c*x;this.d=d*y;this.e=e*x-cx*x+cx;this.f=f*y-cy*y+cy;return this;}// Shear matrix
},{key:"shear",value:function shear(a,cx,cy){return this.clone().shearO(a,cx,cy);}// eslint-disable-next-line no-unused-vars
},{key:"shearO",value:function shearO(lx){var cy=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var a=this.a,b=this.b,c=this.c,d=this.d,e=this.e,f=this.f;this.a=a+b*lx;this.c=c+d*lx;this.e=e+f*lx-cy*lx;return this;}// Skew Matrix
},{key:"skew",value:function skew(){var _this$clone2;return(_this$clone2=this.clone()).skewO.apply(_this$clone2,arguments);}},{key:"skewO",value:function skewO(x){var y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:x;var cx=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var cy=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;// support uniformal skew
if(arguments.length===3){cy=cx;cx=y;y=x;}// Convert degrees to radians
x=radians(x);y=radians(y);var lx=Math.tan(x);var ly=Math.tan(y);var a=this.a,b=this.b,c=this.c,d=this.d,e=this.e,f=this.f;this.a=a+b*lx;this.b=b+a*ly;this.c=c+d*lx;this.d=d+c*ly;this.e=e+f*lx-cy*lx;this.f=f+e*ly-cx*ly;return this;}// SkewX
},{key:"skewX",value:function skewX(x,cx,cy){return this.skew(x,0,cx,cy);}// SkewY
},{key:"skewY",value:function skewY(y,cx,cy){return this.skew(0,y,cx,cy);}},{key:"toArray",value:function toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f];}// Convert matrix to string
},{key:"toString",value:function toString(){return'matrix('+this.a+','+this.b+','+this.c+','+this.d+','+this.e+','+this.f+')';}// Transform a matrix into another matrix by manipulating the space
},{key:"transform",value:function transform(o){// Check if o is a matrix and then left multiply it directly
if(Matrix.isMatrixLike(o)){var matrix=new Matrix(o);return matrix.multiplyO(this);}// Get the proposed transformations and the current transformations
var t=Matrix.formatTransforms(o);var current=this;var _Point$transform=new Point(t.ox,t.oy).transform(current),ox=_Point$transform.x,oy=_Point$transform.y;// Construct the resulting matrix
var transformer=new Matrix().translateO(t.rx,t.ry).lmultiplyO(current).translateO(-ox,-oy).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(ox,oy);// If we want the origin at a particular place, we force it there
if(isFinite(t.px)||isFinite(t.py)){var origin=new Point(ox,oy).transform(transformer);// TODO: Replace t.px with isFinite(t.px)
// Doesn't work because t.px is also 0 if it wasn't passed
var dx=isFinite(t.px)?t.px-origin.x:0;var dy=isFinite(t.py)?t.py-origin.y:0;transformer.translateO(dx,dy);}// Translate now after positioning
transformer.translateO(t.tx,t.ty);return transformer;}// Translate matrix
},{key:"translate",value:function translate(x,y){return this.clone().translateO(x,y);}},{key:"translateO",value:function translateO(x,y){this.e+=x||0;this.f+=y||0;return this;}},{key:"valueOf",value:function valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f};}}],[{key:"formatTransforms",value:function formatTransforms(o){// Get all of the parameters required to form the matrix
var flipBoth=o.flip==='both'||o.flip===true;var flipX=o.flip&&(flipBoth||o.flip==='x')?-1:1;var flipY=o.flip&&(flipBoth||o.flip==='y')?-1:1;var skewX=o.skew&&o.skew.length?o.skew[0]:isFinite(o.skew)?o.skew:isFinite(o.skewX)?o.skewX:0;var skewY=o.skew&&o.skew.length?o.skew[1]:isFinite(o.skew)?o.skew:isFinite(o.skewY)?o.skewY:0;var scaleX=o.scale&&o.scale.length?o.scale[0]*flipX:isFinite(o.scale)?o.scale*flipX:isFinite(o.scaleX)?o.scaleX*flipX:flipX;var scaleY=o.scale&&o.scale.length?o.scale[1]*flipY:isFinite(o.scale)?o.scale*flipY:isFinite(o.scaleY)?o.scaleY*flipY:flipY;var shear=o.shear||0;var theta=o.rotate||o.theta||0;var origin=new Point(o.origin||o.around||o.ox||o.originX,o.oy||o.originY);var ox=origin.x;var oy=origin.y;// We need Point to be invalid if nothing was passed because we cannot default to 0 here. That is why NaN
var position=new Point(o.position||o.px||o.positionX||NaN,o.py||o.positionY||NaN);var px=position.x;var py=position.y;var translate=new Point(o.translate||o.tx||o.translateX,o.ty||o.translateY);var tx=translate.x;var ty=translate.y;var relative=new Point(o.relative||o.rx||o.relativeX,o.ry||o.relativeY);var rx=relative.x;var ry=relative.y;// Populate all of the values
return{scaleX:scaleX,scaleY:scaleY,skewX:skewX,skewY:skewY,shear:shear,theta:theta,rx:rx,ry:ry,tx:tx,ty:ty,ox:ox,oy:oy,px:px,py:py};}},{key:"fromArray",value:function fromArray(a){return{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]};}},{key:"isMatrixLike",value:function isMatrixLike(o){return o.a!=null||o.b!=null||o.c!=null||o.d!=null||o.e!=null||o.f!=null;}// left matrix, right matrix, target matrix which is overwritten
},{key:"matrixMultiply",value:function matrixMultiply(l,r,o){// Work out the product directly
var a=l.a*r.a+l.c*r.b;var b=l.b*r.a+l.d*r.b;var c=l.a*r.c+l.c*r.d;var d=l.b*r.c+l.d*r.d;var e=l.e+l.a*r.e+l.c*r.f;var f=l.f+l.b*r.e+l.d*r.f;// make sure to use local variables because l/r and o could be the same
o.a=a;o.b=b;o.c=c;o.d=d;o.e=e;o.f=f;return o;}}]);}();function ctm(){return new Matrix(this.node.getCTM());}function screenCTM(){try{/* https://bugzilla.mozilla.org/show_bug.cgi?id=1344537
       This is needed because FF does not return the transformation matrix
       for the inner coordinate system when getScreenCTM() is called on nested svgs.
       However all other Browsers do that */if(typeof this.isRoot==='function'&&!this.isRoot()){var rect=this.rect(1,1);var m=rect.node.getScreenCTM();rect.remove();return new Matrix(m);}return new Matrix(this.node.getScreenCTM());}catch(e){console.warn("Cannot get CTM from SVG node ".concat(this.node.nodeName,". Is the element rendered?"));return new Matrix();}}register(Matrix,'Matrix');function parser(){// Reuse cached element if possible
if(!parser.nodes){var svg=makeInstance().size(2,0);svg.node.style.cssText=['opacity: 0','position: absolute','left: -100%','top: -100%','overflow: hidden'].join(';');svg.attr('focusable','false');svg.attr('aria-hidden','true');var path=svg.path().node;parser.nodes={svg:svg,path:path};}if(!parser.nodes.svg.node.parentNode){var b=globals.document.body||globals.document.documentElement;parser.nodes.svg.addTo(b);}return parser.nodes;}function isNulledBox(box){return!box.width&&!box.height&&!box.x&&!box.y;}function domContains(node){return node===globals.document||(globals.document.documentElement.contains||function(node){// This is IE - it does not support contains() for top-level SVGs
while(node.parentNode){node=node.parentNode;}return node===globals.document;}).call(globals.document.documentElement,node);}var Box=/*#__PURE__*/function(){function Box(){_classCallCheck$1(this,Box);this.init.apply(this,arguments);}return _createClass$1(Box,[{key:"addOffset",value:function addOffset(){// offset by window scroll position, because getBoundingClientRect changes when window is scrolled
this.x+=globals.window.pageXOffset;this.y+=globals.window.pageYOffset;return new Box(this);}},{key:"init",value:function init(source){var base=[0,0,0,0];source=typeof source==='string'?source.split(delimiter).map(parseFloat):Array.isArray(source)?source:_typeof$1(source)==='object'?[source.left!=null?source.left:source.x,source.top!=null?source.top:source.y,source.width,source.height]:arguments.length===4?[].slice.call(arguments):base;this.x=source[0]||0;this.y=source[1]||0;this.width=this.w=source[2]||0;this.height=this.h=source[3]||0;// Add more bounding box properties
this.x2=this.x+this.w;this.y2=this.y+this.h;this.cx=this.x+this.w/2;this.cy=this.y+this.h/2;return this;}},{key:"isNulled",value:function isNulled(){return isNulledBox(this);}// Merge rect box with another, return a new instance
},{key:"merge",value:function merge(box){var x=Math.min(this.x,box.x);var y=Math.min(this.y,box.y);var width=Math.max(this.x+this.width,box.x+box.width)-x;var height=Math.max(this.y+this.height,box.y+box.height)-y;return new Box(x,y,width,height);}},{key:"toArray",value:function toArray(){return[this.x,this.y,this.width,this.height];}},{key:"toString",value:function toString(){return this.x+' '+this.y+' '+this.width+' '+this.height;}},{key:"transform",value:function transform(m){if(!(m instanceof Matrix)){m=new Matrix(m);}var xMin=Infinity;var xMax=-Infinity;var yMin=Infinity;var yMax=-Infinity;var pts=[new Point(this.x,this.y),new Point(this.x2,this.y),new Point(this.x,this.y2),new Point(this.x2,this.y2)];pts.forEach(function(p){p=p.transform(m);xMin=Math.min(xMin,p.x);xMax=Math.max(xMax,p.x);yMin=Math.min(yMin,p.y);yMax=Math.max(yMax,p.y);});return new Box(xMin,yMin,xMax-xMin,yMax-yMin);}}]);}();function getBox(el,getBBoxFn,retry){var box;try{// Try to get the box with the provided function
box=getBBoxFn(el.node);// If the box is worthless and not even in the dom, retry
// by throwing an error here...
if(isNulledBox(box)&&!domContains(el.node)){throw new Error('Element not in the dom');}}catch(e){// ... and calling the retry handler here
box=retry(el);}return box;}function bbox(){// Function to get bbox is getBBox()
var getBBox=function getBBox(node){return node.getBBox();};// Take all measures so that a stupid browser renders the element
// so we can get the bbox from it when we try again
var retry=function retry(el){try{var clone=el.clone().addTo(parser().svg).show();var _box=clone.node.getBBox();clone.remove();return _box;}catch(e){// We give up...
throw new Error("Getting bbox of element \"".concat(el.node.nodeName,"\" is not possible: ").concat(e.toString()));}};var box=getBox(this,getBBox,retry);var bbox=new Box(box);return bbox;}function rbox(el){var getRBox=function getRBox(node){return node.getBoundingClientRect();};var retry=function retry(el){// There is no point in trying tricks here because if we insert the element into the dom ourselves
// it obviously will be at the wrong position
throw new Error("Getting rbox of element \"".concat(el.node.nodeName,"\" is not possible"));};var box=getBox(this,getRBox,retry);var rbox=new Box(box);// If an element was passed, we want the bbox in the coordinate system of that element
if(el){return rbox.transform(el.screenCTM().inverseO());}// Else we want it in absolute screen coordinates
// Therefore we need to add the scrollOffset
return rbox.addOffset();}// Checks whether the given point is inside the bounding box
function inside(x,y){var box=this.bbox();return x>box.x&&y>box.y&&x<box.x+box.width&&y<box.y+box.height;}registerMethods({viewbox:{viewbox:function viewbox(x,y,width,height){// act as getter
if(x==null)return new Box(this.attr('viewBox'));// act as setter
return this.attr('viewBox',new Box(x,y,width,height));},zoom:function zoom(level,point){// Its best to rely on the attributes here and here is why:
// clientXYZ: Doesn't work on non-root svgs because they dont have a CSSBox (silly!)
// getBoundingClientRect: Doesn't work because Chrome just ignores width and height of nested svgs completely
//                        that means, their clientRect is always as big as the content.
//                        Furthermore this size is incorrect if the element is further transformed by its parents
// computedStyle: Only returns meaningful values if css was used with px. We dont go this route here!
// getBBox: returns the bounding box of its content - that doesn't help!
var _this$attr=this.attr(['width','height']),width=_this$attr.width,height=_this$attr.height;// Width and height is a string when a number with a unit is present which we can't use
// So we try clientXYZ
if(!width&&!height||typeof width==='string'||typeof height==='string'){width=this.node.clientWidth;height=this.node.clientHeight;}// Giving up...
if(!width||!height){throw new Error('Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element');}var v=this.viewbox();var zoomX=width/v.width;var zoomY=height/v.height;var zoom=Math.min(zoomX,zoomY);if(level==null){return zoom;}var zoomAmount=zoom/level;// Set the zoomAmount to the highest value which is safe to process and recover from
// The * 100 is a bit of wiggle room for the matrix transformation
if(zoomAmount===Infinity)zoomAmount=Number.MAX_SAFE_INTEGER/100;point=point||new Point(width/2/zoomX+v.x,height/2/zoomY+v.y);var box=new Box(v).transform(new Matrix({scale:zoomAmount,origin:point}));return this.viewbox(box);}}});register(Box,'Box');function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf("[native code]");}catch(n){return"function"==typeof t;}}function _isNativeReflectConstruct$C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$C=function _isNativeReflectConstruct(){return!!t;})();}function _construct(t,e,r){if(_isNativeReflectConstruct$C())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var p=new(t.bind.apply(t,o))();return r&&_setPrototypeOf(p,r.prototype),p;}function _wrapNativeSuper(t){var r="function"==typeof Map?new Map():void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper);}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor);}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t);},_wrapNativeSuper(t);}function _callSuper$B(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$B()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$B=function _isNativeReflectConstruct(){return!!t;})();}// import { subClassArray } from './ArrayPolyfill.js'
var List=/*#__PURE__*/function(_Array){function List(){var _this2;var _this;var arr=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck$1(this,List);for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}_this=_callSuper$B(this,List,[arr].concat(args));if(typeof arr==='number')return _possibleConstructorReturn(_this,_this);_this.length=0;(_this2=_this).push.apply(_this2,_toConsumableArray(arr));return _this;}_inherits(List,_Array);return _createClass$1(List);}(/*#__PURE__*/_wrapNativeSuper(Array));extend([List],{each:function each(fnOrMethodName){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}if(typeof fnOrMethodName==='function'){return this.map(function(el,i,arr){return fnOrMethodName.call(el,el,i,arr);});}else{return this.map(function(el){return el[fnOrMethodName].apply(el,args);});}},toArray:function toArray(){return Array.prototype.concat.apply([],this);}});var reserved=['toArray','constructor','each'];List.extend=function(methods){methods=methods.reduce(function(obj,name){// Don't overwrite own methods
if(reserved.includes(name))return obj;// Don't add private methods
if(name[0]==='_')return obj;// Allow access to original Array methods through a prefix
if(name in Array.prototype){obj['$'+name]=Array.prototype[name];}// Relay every call to each()
obj[name]=function(){for(var _len3=arguments.length,attrs=new Array(_len3),_key3=0;_key3<_len3;_key3++){attrs[_key3]=arguments[_key3];}return this.each.apply(this,[name].concat(attrs));};return obj;},{});extend([List],methods);};function baseFind(query,parent){return new List(map((parent||globals.document).querySelectorAll(query),function(node){return adopt(node);}));}// Scoped find method
function find(query){return baseFind(query,this.node);}function findOne(query){return adopt(this.node.querySelector(query));}function ownKeys$3(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread$3(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$3(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$3(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}var listenerId=0;var windowEvents={};function getEvents(instance){var n=instance.getEventHolder();// We dont want to save events in global space
if(n===globals.window)n=windowEvents;if(!n.events)n.events={};return n.events;}function getEventTarget(instance){return instance.getEventTarget();}function clearEvents(instance){var n=instance.getEventHolder();if(n===globals.window)n=windowEvents;if(n.events)n.events={};}// Add event binder in the SVG namespace
function on(node,events,listener,binding,options){var l=listener.bind(binding||node);var instance=makeInstance(node);var bag=getEvents(instance);var n=getEventTarget(instance);// events can be an array of events or a string of events
events=Array.isArray(events)?events:events.split(delimiter);// add id to listener
if(!listener._svgjsListenerId){listener._svgjsListenerId=++listenerId;}events.forEach(function(event){var ev=event.split('.')[0];var ns=event.split('.')[1]||'*';// ensure valid object
bag[ev]=bag[ev]||{};bag[ev][ns]=bag[ev][ns]||{};// reference listener
bag[ev][ns][listener._svgjsListenerId]=l;// add listener
n.addEventListener(ev,l,options||false);});}// Add event unbinder in the SVG namespace
function off(node,events,listener,options){var instance=makeInstance(node);var bag=getEvents(instance);var n=getEventTarget(instance);// listener can be a function or a number
if(typeof listener==='function'){listener=listener._svgjsListenerId;if(!listener)return;}// events can be an array of events or a string or undefined
events=Array.isArray(events)?events:(events||'').split(delimiter);events.forEach(function(event){var ev=event&&event.split('.')[0];var ns=event&&event.split('.')[1];var namespace,l;if(listener){// remove listener reference
if(bag[ev]&&bag[ev][ns||'*']){// removeListener
n.removeEventListener(ev,bag[ev][ns||'*'][listener],options||false);delete bag[ev][ns||'*'][listener];}}else if(ev&&ns){// remove all listeners for a namespaced event
if(bag[ev]&&bag[ev][ns]){for(l in bag[ev][ns]){off(n,[ev,ns].join('.'),l);}delete bag[ev][ns];}}else if(ns){// remove all listeners for a specific namespace
for(event in bag){for(namespace in bag[event]){if(ns===namespace){off(n,[event,ns].join('.'));}}}}else if(ev){// remove all listeners for the event
if(bag[ev]){for(namespace in bag[ev]){off(n,[ev,namespace].join('.'));}delete bag[ev];}}else{// remove all listeners on a given node
for(event in bag){off(n,event);}clearEvents(instance);}});}function dispatch(node,event,data,options){var n=getEventTarget(node);// Dispatch event
if(event instanceof globals.window.Event){n.dispatchEvent(event);}else{event=new globals.window.CustomEvent(event,_objectSpread$3({detail:data,cancelable:true},options));n.dispatchEvent(event);}return event;}function _callSuper$A(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$A()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$A=function _isNativeReflectConstruct(){return!!t;})();}var EventTarget=/*#__PURE__*/function(_Base){function EventTarget(){_classCallCheck$1(this,EventTarget);return _callSuper$A(this,EventTarget,arguments);}_inherits(EventTarget,_Base);return _createClass$1(EventTarget,[{key:"addEventListener",value:function addEventListener(){}},{key:"dispatch",value:function dispatch$1(event,data,options){return dispatch(this,event,data,options);}},{key:"dispatchEvent",value:function dispatchEvent(event){var bag=this.getEventHolder().events;if(!bag)return true;var events=bag[event.type];for(var i in events){for(var j in events[i]){events[i][j](event);}}return!event.defaultPrevented;}// Fire given event
},{key:"fire",value:function fire(event,data,options){this.dispatch(event,data,options);return this;}},{key:"getEventHolder",value:function getEventHolder(){return this;}},{key:"getEventTarget",value:function getEventTarget(){return this;}// Unbind event from listener
},{key:"off",value:function off$1(event,listener,options){off(this,event,listener,options);return this;}// Bind given event to listener
},{key:"on",value:function on$1(event,listener,binding,options){on(this,event,listener,binding,options);return this;}},{key:"removeEventListener",value:function removeEventListener(){}}]);}(Base);register(EventTarget,'EventTarget');function noop(){}// Default animation values
var timeline={duration:400,ease:'>',delay:0};// Default attribute values
var attrs={// fill and stroke
'fill-opacity':1,'stroke-opacity':1,'stroke-width':0,'stroke-linejoin':'miter','stroke-linecap':'butt',fill:'#000000',stroke:'#000000',opacity:1,// position
x:0,y:0,cx:0,cy:0,// size
width:0,height:0,// radius
r:0,rx:0,ry:0,// gradient
offset:0,'stop-opacity':1,'stop-color':'#000000',// text
'text-anchor':'start'};function _callSuper$z(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$z()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$z=function _isNativeReflectConstruct(){return!!t;})();}var SVGArray=/*#__PURE__*/function(_Array){function SVGArray(){var _this2;var _this;_classCallCheck$1(this,SVGArray);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_callSuper$z(this,SVGArray,[].concat(args));(_this2=_this).init.apply(_this2,args);return _this;}_inherits(SVGArray,_Array);return _createClass$1(SVGArray,[{key:"clone",value:function clone(){return new this.constructor(this);}},{key:"init",value:function init(arr){// This catches the case, that native map tries to create an array with new Array(1)
if(typeof arr==='number')return this;this.length=0;this.push.apply(this,_toConsumableArray(this.parse(arr)));return this;}// Parse whitespace separated string
},{key:"parse",value:function parse(){var array=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];// If already is an array, no need to parse it
if(array instanceof Array)return array;return array.trim().split(delimiter).map(parseFloat);}},{key:"toArray",value:function toArray(){return Array.prototype.concat.apply([],this);}},{key:"toSet",value:function toSet(){return new Set(this);}},{key:"toString",value:function toString(){return this.join(' ');}// Flattens the array if needed
},{key:"valueOf",value:function valueOf(){var ret=[];ret.push.apply(ret,_toConsumableArray(this));return ret;}}]);}(/*#__PURE__*/_wrapNativeSuper(Array));// Module for unit conversions
var SVGNumber=/*#__PURE__*/function(){// Initialize
function SVGNumber(){_classCallCheck$1(this,SVGNumber);this.init.apply(this,arguments);}return _createClass$1(SVGNumber,[{key:"convert",value:function convert(unit){return new SVGNumber(this.value,unit);}// Divide number
},{key:"divide",value:function divide(number){number=new SVGNumber(number);return new SVGNumber(this/number,this.unit||number.unit);}},{key:"init",value:function init(value,unit){unit=Array.isArray(value)?value[1]:unit;value=Array.isArray(value)?value[0]:value;// initialize defaults
this.value=0;this.unit=unit||'';// parse value
if(typeof value==='number'){// ensure a valid numeric value
this.value=isNaN(value)?0:!isFinite(value)?value<0?-3.4e38:+3.4e38:value;}else if(typeof value==='string'){unit=value.match(numberAndUnit);if(unit){// make value numeric
this.value=parseFloat(unit[1]);// normalize
if(unit[5]==='%'){this.value/=100;}else if(unit[5]==='s'){this.value*=1000;}// store unit
this.unit=unit[5];}}else{if(value instanceof SVGNumber){this.value=value.valueOf();this.unit=value.unit;}}return this;}// Subtract number
},{key:"minus",value:function minus(number){number=new SVGNumber(number);return new SVGNumber(this-number,this.unit||number.unit);}// Add number
},{key:"plus",value:function plus(number){number=new SVGNumber(number);return new SVGNumber(this+number,this.unit||number.unit);}// Multiply number
},{key:"times",value:function times(number){number=new SVGNumber(number);return new SVGNumber(this*number,this.unit||number.unit);}},{key:"toArray",value:function toArray(){return[this.value,this.unit];}},{key:"toJSON",value:function toJSON(){return this.toString();}},{key:"toString",value:function toString(){return(this.unit==='%'?~~(this.value*1e8)/1e6:this.unit==='s'?this.value/1e3:this.value)+this.unit;}},{key:"valueOf",value:function valueOf(){return this.value;}}]);}();function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,u=!1;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=!0,o=r;},f:function f(){try{a||null==t.return||t.return();}finally{if(u)throw o;}}};}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0;}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}var colorAttributes=new Set(['fill','stroke','color','bgcolor','stop-color','flood-color','lighting-color']);var hooks=[];function registerAttrHook(fn){hooks.push(fn);}// Set svg element attribute
function attr(attr,val,ns){var _this=this;// act as full getter
if(attr==null){// get an object of attributes
attr={};val=this.node.attributes;var _iterator=_createForOfIteratorHelper(val),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var node=_step.value;attr[node.nodeName]=isNumber.test(node.nodeValue)?parseFloat(node.nodeValue):node.nodeValue;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return attr;}else if(attr instanceof Array){// loop through array and get all values
return attr.reduce(function(last,curr){last[curr]=_this.attr(curr);return last;},{});}else if(_typeof$1(attr)==='object'&&attr.constructor===Object){// apply every attribute individually if an object is passed
for(val in attr)this.attr(val,attr[val]);}else if(val===null){// remove value
this.node.removeAttribute(attr);}else if(val==null){// act as a getter if the first and only argument is not an object
val=this.node.getAttribute(attr);return val==null?attrs[attr]:isNumber.test(val)?parseFloat(val):val;}else{// Loop through hooks and execute them to convert value
val=hooks.reduce(function(_val,hook){return hook(attr,_val,_this);},val);// ensure correct numeric values (also accepts NaN and Infinity)
if(typeof val==='number'){val=new SVGNumber(val);}else if(colorAttributes.has(attr)&&Color.isColor(val)){// ensure full hex color
val=new Color(val);}else if(val.constructor===Array){// Check for plain arrays and parse array values
val=new SVGArray(val);}// if the passed attribute is leading...
if(attr==='leading'){// ... call the leading method instead
if(this.leading){this.leading(val);}}else{// set given attribute on node
typeof ns==='string'?this.node.setAttributeNS(ns,attr,val.toString()):this.node.setAttribute(attr,val.toString());}// rebuild if required
if(this.rebuild&&(attr==='font-size'||attr==='x')){this.rebuild();}}return this;}function _callSuper$y(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$y()?Reflect.construct(o,[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$y=function _isNativeReflectConstruct(){return!!t;})();}var Dom=/*#__PURE__*/function(_EventTarget){function Dom(node,attrs){var _this2;_classCallCheck$1(this,Dom);_this2=_callSuper$y(this,Dom);_this2.node=node;_this2.type=node.nodeName;if(attrs&&node!==attrs){_this2.attr(attrs);}return _this2;}// Add given element at a position
_inherits(Dom,_EventTarget);return _createClass$1(Dom,[{key:"add",value:function add(element,i){element=makeInstance(element);// If non-root svg nodes are added we have to remove their namespaces
if(element.removeNamespace&&this.node instanceof globals.window.SVGElement){element.removeNamespace();}if(i==null){this.node.appendChild(element.node);}else if(element.node!==this.node.childNodes[i]){this.node.insertBefore(element.node,this.node.childNodes[i]);}return this;}// Add element to given container and return self
},{key:"addTo",value:function addTo(parent,i){return makeInstance(parent).put(this,i);}// Returns all child elements
},{key:"children",value:function children(){return new List(map(this.node.children,function(node){return adopt(node);}));}// Remove all elements in this container
},{key:"clear",value:function clear(){// remove children
while(this.node.hasChildNodes()){this.node.removeChild(this.node.lastChild);}return this;}// Clone element
},{key:"clone",value:function clone(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var assignNewIds=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;// write dom data to the dom so the clone can pickup the data
this.writeDataToDom();// clone element
var nodeClone=this.node.cloneNode(deep);if(assignNewIds){// assign new id
nodeClone=assignNewId(nodeClone);}return new this.constructor(nodeClone);}// Iterates over all children and invokes a given block
},{key:"each",value:function each(block,deep){var children=this.children();var i,il;for(i=0,il=children.length;i<il;i++){block.apply(children[i],[i,children]);if(deep){children[i].each(block,deep);}}return this;}},{key:"element",value:function element(nodeName,attrs){return this.put(new Dom(create(nodeName),attrs));}// Get first child
},{key:"first",value:function first(){return adopt(this.node.firstChild);}// Get a element at the given index
},{key:"get",value:function get(i){return adopt(this.node.childNodes[i]);}},{key:"getEventHolder",value:function getEventHolder(){return this.node;}},{key:"getEventTarget",value:function getEventTarget(){return this.node;}// Checks if the given element is a child
},{key:"has",value:function has(element){return this.index(element)>=0;}},{key:"html",value:function html$1(htmlOrFn,outerHTML){return this.xml(htmlOrFn,outerHTML,html);}// Get / set id
},{key:"id",value:function id(_id){// generate new id if no id set
if(typeof _id==='undefined'&&!this.node.id){this.node.id=eid(this.type);}// don't set directly with this.node.id to make `null` work correctly
return this.attr('id',_id);}// Gets index of given element
},{key:"index",value:function index(element){return[].slice.call(this.node.childNodes).indexOf(element.node);}// Get the last child
},{key:"last",value:function last(){return adopt(this.node.lastChild);}// matches the element vs a css selector
},{key:"matches",value:function matches(selector){var el=this.node;var matcher=el.matches||el.matchesSelector||el.msMatchesSelector||el.mozMatchesSelector||el.webkitMatchesSelector||el.oMatchesSelector||null;return matcher&&matcher.call(el,selector);}// Returns the parent element instance
},{key:"parent",value:function parent(type){var parent=this;// check for parent
if(!parent.node.parentNode)return null;// get parent element
parent=adopt(parent.node.parentNode);if(!type)return parent;// loop through ancestors if type is given
do{if(typeof type==='string'?parent.matches(type):parent instanceof type)return parent;}while(parent=adopt(parent.node.parentNode));return parent;}// Basically does the same as `add()` but returns the added element instead
},{key:"put",value:function put(element,i){element=makeInstance(element);this.add(element,i);return element;}// Add element to given container and return container
},{key:"putIn",value:function putIn(parent,i){return makeInstance(parent).add(this,i);}// Remove element
},{key:"remove",value:function remove(){if(this.parent()){this.parent().removeElement(this);}return this;}// Remove a given child
},{key:"removeElement",value:function removeElement(element){this.node.removeChild(element.node);return this;}// Replace this with element
},{key:"replace",value:function replace(element){element=makeInstance(element);if(this.node.parentNode){this.node.parentNode.replaceChild(element.node,this.node);}return element;}},{key:"round",value:function round(){var precision=arguments.length>0&&arguments[0]!==undefined?arguments[0]:2;var map=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var factor=Math.pow(10,precision);var attrs=this.attr(map);for(var i in attrs){if(typeof attrs[i]==='number'){attrs[i]=Math.round(attrs[i]*factor)/factor;}}this.attr(attrs);return this;}// Import / Export raw svg
},{key:"svg",value:function svg$1(svgOrFn,outerSVG){return this.xml(svgOrFn,outerSVG,svg);}// Return id on string conversion
},{key:"toString",value:function toString(){return this.id();}},{key:"words",value:function words(text){// This is faster than removing all children and adding a new one
this.node.textContent=text;return this;}},{key:"wrap",value:function wrap(node){var parent=this.parent();if(!parent){return this.addTo(node);}var position=parent.index(this);return parent.put(node,position).put(this);}// write svgjs data to the dom
},{key:"writeDataToDom",value:function writeDataToDom(){// dump variables recursively
this.each(function(){this.writeDataToDom();});return this;}// Import / Export raw svg
},{key:"xml",value:function xml(xmlOrFn,outerXML,ns){if(typeof xmlOrFn==='boolean'){ns=outerXML;outerXML=xmlOrFn;xmlOrFn=null;}// act as getter if no svg string is given
if(xmlOrFn==null||typeof xmlOrFn==='function'){// The default for exports is, that the outerNode is included
outerXML=outerXML==null?true:outerXML;// write svgjs data to the dom
this.writeDataToDom();var current=this;// An export modifier was passed
if(xmlOrFn!=null){current=adopt(current.node.cloneNode(true));// If the user wants outerHTML we need to process this node, too
if(outerXML){var result=xmlOrFn(current);current=result||current;// The user does not want this node? Well, then he gets nothing
if(result===false)return'';}// Deep loop through all children and apply modifier
current.each(function(){var result=xmlOrFn(this);var _this=result||this;// If modifier returns false, discard node
if(result===false){this.remove();// If modifier returns new node, use it
}else if(result&&this!==_this){this.replace(_this);}},true);}// Return outer or inner content
return outerXML?current.node.outerHTML:current.node.innerHTML;}// Act as setter if we got a string
// The default for import is, that the current node is not replaced
outerXML=outerXML==null?false:outerXML;// Create temporary holder
var well=create('wrapper',ns);var fragment=globals.document.createDocumentFragment();// Dump raw svg
well.innerHTML=xmlOrFn;// Transplant nodes into the fragment
for(var len=well.children.length;len--;){fragment.appendChild(well.firstElementChild);}var parent=this.parent();// Add the whole fragment at once
return outerXML?this.replace(fragment)&&parent:this.add(fragment);}}]);}(EventTarget);extend(Dom,{attr:attr,find:find,findOne:findOne});register(Dom,'Dom');function _callSuper$x(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$x()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$x(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$x=function _isNativeReflectConstruct(){return!!t;})();}var Element=/*#__PURE__*/function(_Dom){function Element(node,attrs){var _this;_classCallCheck$1(this,Element);_this=_callSuper$x(this,Element,[node,attrs]);// initialize data object
_this.dom={};// create circular reference
_this.node.instance=_this;if(node.hasAttribute('data-svgjs')||node.hasAttribute('svgjs:data')){var _ref,_JSON$parse;// pull svgjs data from the dom (getAttributeNS doesn't work in html5)
_this.setData((_ref=(_JSON$parse=JSON.parse(node.getAttribute('data-svgjs')))!==null&&_JSON$parse!==void 0?_JSON$parse:JSON.parse(node.getAttribute('svgjs:data')))!==null&&_ref!==void 0?_ref:{});}return _this;}// Move element by its center
_inherits(Element,_Dom);return _createClass$1(Element,[{key:"center",value:function center(x,y){return this.cx(x).cy(y);}// Move by center over x-axis
},{key:"cx",value:function cx(x){return x==null?this.x()+this.width()/2:this.x(x-this.width()/2);}// Move by center over y-axis
},{key:"cy",value:function cy(y){return y==null?this.y()+this.height()/2:this.y(y-this.height()/2);}// Get defs
},{key:"defs",value:function defs(){var root=this.root();return root&&root.defs();}// Relative move over x and y axes
},{key:"dmove",value:function dmove(x,y){return this.dx(x).dy(y);}// Relative move over x axis
},{key:"dx",value:function dx(){var x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return this.x(new SVGNumber(x).plus(this.x()));}// Relative move over y axis
},{key:"dy",value:function dy(){var y=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return this.y(new SVGNumber(y).plus(this.y()));}},{key:"getEventHolder",value:function getEventHolder(){return this;}// Set height of element
},{key:"height",value:function height(_height){return this.attr('height',_height);}// Move element to given x and y values
},{key:"move",value:function move(x,y){return this.x(x).y(y);}// return array of all ancestors of given type up to the root svg
},{key:"parents",value:function parents(){var until=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.root();var isSelector=typeof until==='string';if(!isSelector){until=makeInstance(until);}var parents=new List();var parent=this;while((parent=parent.parent())&&parent.node!==globals.document&&parent.nodeName!=='#document-fragment'){parents.push(parent);if(!isSelector&&parent.node===until.node){break;}if(isSelector&&parent.matches(until)){break;}if(parent.node===this.root().node){// We worked our way to the root and didn't match `until`
return null;}}return parents;}// Get referenced element form attribute value
},{key:"reference",value:function reference$1(attr){attr=this.attr(attr);if(!attr)return null;var m=(attr+'').match(reference);return m?makeInstance(m[1]):null;}// Get parent document
},{key:"root",value:function root$1(){var p=this.parent(getClass(root));return p&&p.root();}// set given data to the elements data property
},{key:"setData",value:function setData(o){this.dom=o;return this;}// Set element size to given width and height
},{key:"size",value:function size(width,height){var p=proportionalSize(this,width,height);return this.width(new SVGNumber(p.width)).height(new SVGNumber(p.height));}// Set width of element
},{key:"width",value:function width(_width){return this.attr('width',_width);}// write svgjs data to the dom
},{key:"writeDataToDom",value:function writeDataToDom$1(){writeDataToDom(this,this.dom);return _get(_getPrototypeOf(Element.prototype),"writeDataToDom",this).call(this);}// Move over x-axis
},{key:"x",value:function x(_x){return this.attr('x',_x);}// Move over y-axis
},{key:"y",value:function y(_y){return this.attr('y',_y);}}]);}(Dom);extend(Element,{bbox:bbox,rbox:rbox,inside:inside,point:point,ctm:ctm,screenCTM:screenCTM});register(Element,'Element');// Define list of available attributes for stroke and fill
var sugar={stroke:['color','width','opacity','linecap','linejoin','miterlimit','dasharray','dashoffset'],fill:['color','opacity','rule'],prefix:function prefix(t,a){return a==='color'?t:t+'-'+a;}}// Add sugar for fill and stroke
;['fill','stroke'].forEach(function(m){var extension={};var i;extension[m]=function(o){if(typeof o==='undefined'){return this.attr(m);}if(typeof o==='string'||o instanceof Color||Color.isRgb(o)||o instanceof Element){this.attr(m,o);}else{// set all attributes from sugar.fill and sugar.stroke list
for(i=sugar[m].length-1;i>=0;i--){if(o[sugar[m][i]]!=null){this.attr(sugar.prefix(m,sugar[m][i]),o[sugar[m][i]]);}}}return this;};registerMethods(['Element','Runner'],extension);});registerMethods(['Element','Runner'],{// Let the user set the matrix directly
matrix:function matrix(mat,b,c,d,e,f){// Act as a getter
if(mat==null){return new Matrix(this);}// Act as a setter, the user can pass a matrix or a set of numbers
return this.attr('transform',new Matrix(mat,b,c,d,e,f));},// Map rotation to transform
rotate:function rotate(angle,cx,cy){return this.transform({rotate:angle,ox:cx,oy:cy},true);},// Map skew to transform
skew:function skew(x,y,cx,cy){return arguments.length===1||arguments.length===3?this.transform({skew:x,ox:y,oy:cx},true):this.transform({skew:[x,y],ox:cx,oy:cy},true);},shear:function shear(lam,cx,cy){return this.transform({shear:lam,ox:cx,oy:cy},true);},// Map scale to transform
scale:function scale(x,y,cx,cy){return arguments.length===1||arguments.length===3?this.transform({scale:x,ox:y,oy:cx},true):this.transform({scale:[x,y],ox:cx,oy:cy},true);},// Map translate to transform
translate:function translate(x,y){return this.transform({translate:[x,y]},true);},// Map relative translations to transform
relative:function relative(x,y){return this.transform({relative:[x,y]},true);},// Map flip to transform
flip:function flip(){var direction=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'both';var origin=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'center';if('xybothtrue'.indexOf(direction)===-1){origin=direction;direction='both';}return this.transform({flip:direction,origin:origin},true);},// Opacity
opacity:function opacity(value){return this.attr('opacity',value);}});registerMethods('radius',{// Add x and y radius
radius:function radius(x){var y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:x;var type=(this._element||this).type;return type==='radialGradient'?this.attr('r',new SVGNumber(x)):this.rx(x).ry(y);}});registerMethods('Path',{// Get path length
length:function length(){return this.node.getTotalLength();},// Get point at length
pointAt:function pointAt(length){return new Point(this.node.getPointAtLength(length));}});registerMethods(['Element','Runner'],{// Set font
font:function font(a,v){if(_typeof$1(a)==='object'){for(v in a)this.font(v,a[v]);return this;}return a==='leading'?this.leading(v):a==='anchor'?this.attr('text-anchor',v):a==='size'||a==='family'||a==='weight'||a==='stretch'||a==='variant'||a==='style'?this.attr('font-'+a,v):this.attr(a,v);}});// Add events to elements
var methods=['click','dblclick','mousedown','mouseup','mouseover','mouseout','mousemove','mouseenter','mouseleave','touchstart','touchmove','touchleave','touchend','touchcancel','contextmenu','wheel','pointerdown','pointermove','pointerup','pointerleave','pointercancel'].reduce(function(last,event){// add event to Element
var fn=function fn(f){if(f===null){this.off(event);}else{this.on(event,f);}return this;};last[event]=fn;return last;},{});registerMethods('Element',methods);function ownKeys$2(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread$2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$2(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$2(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}// Reset all transformations
function untransform(){return this.attr('transform',null);}// merge the whole transformation chain into one matrix and returns it
function matrixify(){var matrix=(this.attr('transform')||''// split transformations
).split(transforms).slice(0,-1).map(function(str){// generate key => value pairs
var kv=str.trim().split('(');return[kv[0],kv[1].split(delimiter).map(function(str){return parseFloat(str);})];}).reverse()// merge every transformation into one matrix
.reduce(function(matrix,transform){if(transform[0]==='matrix'){return matrix.lmultiply(Matrix.fromArray(transform[1]));}return matrix[transform[0]].apply(matrix,transform[1]);},new Matrix());return matrix;}// add an element to another parent without changing the visual representation on the screen
function toParent(parent,i){if(this===parent)return this;if(isDescriptive(this.node))return this.addTo(parent,i);var ctm=this.screenCTM();var pCtm=parent.screenCTM().inverse();this.addTo(parent,i).untransform().transform(pCtm.multiply(ctm));return this;}// same as above with parent equals root-svg
function toRoot(i){return this.toParent(this.root(),i);}// Add transformations
function transform(o,relative){// Act as a getter if no object was passed
if(o==null||typeof o==='string'){var decomposed=new Matrix(this).decompose();return o==null?decomposed:decomposed[o];}if(!Matrix.isMatrixLike(o)){// Set the origin according to the defined transform
o=_objectSpread$2(_objectSpread$2({},o),{},{origin:getOrigin(o,this)});}// The user can pass a boolean, an Element or an Matrix or nothing
var cleanRelative=relative===true?this:relative||false;var result=new Matrix(cleanRelative).transform(o);return this.attr('transform',result);}registerMethods('Element',{untransform:untransform,matrixify:matrixify,toParent:toParent,toRoot:toRoot,transform:transform});function _callSuper$w(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$w()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$w=function _isNativeReflectConstruct(){return!!t;})();}var Container=/*#__PURE__*/function(_Element){function Container(){_classCallCheck$1(this,Container);return _callSuper$w(this,Container,arguments);}_inherits(Container,_Element);return _createClass$1(Container,[{key:"flatten",value:function flatten(){this.each(function(){if(this instanceof Container){return this.flatten().ungroup();}});return this;}},{key:"ungroup",value:function ungroup(){var parent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.parent();var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:parent.index(this);// when parent != this, we want append all elements to the end
index=index===-1?parent.children().length:index;this.each(function(i,children){// reverse each
return children[children.length-i-1].toParent(parent,index);});return this.remove();}}]);}(Element);register(Container,'Container');function _callSuper$v(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$v()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$v(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$v=function _isNativeReflectConstruct(){return!!t;})();}var Defs=/*#__PURE__*/function(_Container){function Defs(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Defs);return _callSuper$v(this,Defs,[nodeOrNew('defs',node),attrs]);}_inherits(Defs,_Container);return _createClass$1(Defs,[{key:"flatten",value:function flatten(){return this;}},{key:"ungroup",value:function ungroup(){return this;}}]);}(Container);register(Defs,'Defs');function _callSuper$u(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$u()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$u=function _isNativeReflectConstruct(){return!!t;})();}var Shape=/*#__PURE__*/function(_Element){function Shape(){_classCallCheck$1(this,Shape);return _callSuper$u(this,Shape,arguments);}_inherits(Shape,_Element);return _createClass$1(Shape);}(Element);register(Shape,'Shape');// Radius x value
function rx(rx){return this.attr('rx',rx);}// Radius y value
function ry(ry){return this.attr('ry',ry);}// Move over x-axis
function x$3(x){return x==null?this.cx()-this.rx():this.cx(x+this.rx());}// Move over y-axis
function y$3(y){return y==null?this.cy()-this.ry():this.cy(y+this.ry());}// Move by center over x-axis
function cx$1(x){return this.attr('cx',x);}// Move by center over y-axis
function cy$1(y){return this.attr('cy',y);}// Set width of element
function width$2(width){return width==null?this.rx()*2:this.rx(new SVGNumber(width).divide(2));}// Set height of element
function height$2(height){return height==null?this.ry()*2:this.ry(new SVGNumber(height).divide(2));}var circled=/*#__PURE__*/Object.freeze({__proto__:null,cx:cx$1,cy:cy$1,height:height$2,rx:rx,ry:ry,width:width$2,x:x$3,y:y$3});function _callSuper$t(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$t()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$t(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$t=function _isNativeReflectConstruct(){return!!t;})();}var Ellipse=/*#__PURE__*/function(_Shape){function Ellipse(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Ellipse);return _callSuper$t(this,Ellipse,[nodeOrNew('ellipse',node),attrs]);}_inherits(Ellipse,_Shape);return _createClass$1(Ellipse,[{key:"size",value:function size(width,height){var p=proportionalSize(this,width,height);return this.rx(new SVGNumber(p.width).divide(2)).ry(new SVGNumber(p.height).divide(2));}}]);}(Shape);extend(Ellipse,circled);registerMethods('Container',{// Create an ellipse
ellipse:wrapWithAttrCheck(function(){var width=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var height=arguments.length>1&&arguments[1]!==undefined?arguments[1]:width;return this.put(new Ellipse()).size(width,height).move(0,0);})});register(Ellipse,'Ellipse');function _callSuper$s(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$s()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$s=function _isNativeReflectConstruct(){return!!t;})();}var Fragment=/*#__PURE__*/function(_Dom){function Fragment(){var node=arguments.length>0&&arguments[0]!==undefined?arguments[0]:globals.document.createDocumentFragment();_classCallCheck$1(this,Fragment);return _callSuper$s(this,Fragment,[node]);}// Import / Export raw xml
_inherits(Fragment,_Dom);return _createClass$1(Fragment,[{key:"xml",value:function xml(xmlOrFn,outerXML,ns){if(typeof xmlOrFn==='boolean'){ns=outerXML;outerXML=xmlOrFn;xmlOrFn=null;}// because this is a fragment we have to put all elements into a wrapper first
// before we can get the innerXML from it
if(xmlOrFn==null||typeof xmlOrFn==='function'){var wrapper=new Dom(create('wrapper',ns));wrapper.add(this.node.cloneNode(true));return wrapper.xml(false,ns);}// Act as setter if we got a string
return _get(_getPrototypeOf(Fragment.prototype),"xml",this).call(this,xmlOrFn,false,ns);}}]);}(Dom);register(Fragment,'Fragment');function from(x,y){return(this._element||this).type==='radialGradient'?this.attr({fx:new SVGNumber(x),fy:new SVGNumber(y)}):this.attr({x1:new SVGNumber(x),y1:new SVGNumber(y)});}function to(x,y){return(this._element||this).type==='radialGradient'?this.attr({cx:new SVGNumber(x),cy:new SVGNumber(y)}):this.attr({x2:new SVGNumber(x),y2:new SVGNumber(y)});}var gradiented=/*#__PURE__*/Object.freeze({__proto__:null,from:from,to:to});function _callSuper$r(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$r()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$r=function _isNativeReflectConstruct(){return!!t;})();}var Gradient=/*#__PURE__*/function(_Container){function Gradient(type,attrs){_classCallCheck$1(this,Gradient);return _callSuper$r(this,Gradient,[nodeOrNew(type+'Gradient',typeof type==='string'?null:type),attrs]);}// custom attr to handle transform
_inherits(Gradient,_Container);return _createClass$1(Gradient,[{key:"attr",value:function attr(a,b,c){if(a==='transform')a='gradientTransform';return _get(_getPrototypeOf(Gradient.prototype),"attr",this).call(this,a,b,c);}},{key:"bbox",value:function bbox(){return new Box();}},{key:"targets",value:function targets(){return baseFind('svg [fill*='+this.id()+']');}// Alias string conversion to fill
},{key:"toString",value:function toString(){return this.url();}// Update gradient
},{key:"update",value:function update(block){// remove all stops
this.clear();// invoke passed block
if(typeof block==='function'){block.call(this,this);}return this;}// Return the fill id
},{key:"url",value:function url(){return'url(#'+this.id()+')';}}]);}(Container);extend(Gradient,gradiented);registerMethods({Container:{// Create gradient element in defs
gradient:function gradient(){var _this$defs;return(_this$defs=this.defs()).gradient.apply(_this$defs,arguments);}},// define gradient
Defs:{gradient:wrapWithAttrCheck(function(type,block){return this.put(new Gradient(type)).update(block);})}});register(Gradient,'Gradient');function _callSuper$q(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$q()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$q=function _isNativeReflectConstruct(){return!!t;})();}var Pattern=/*#__PURE__*/function(_Container){// Initialize node
function Pattern(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Pattern);return _callSuper$q(this,Pattern,[nodeOrNew('pattern',node),attrs]);}// custom attr to handle transform
_inherits(Pattern,_Container);return _createClass$1(Pattern,[{key:"attr",value:function attr(a,b,c){if(a==='transform')a='patternTransform';return _get(_getPrototypeOf(Pattern.prototype),"attr",this).call(this,a,b,c);}},{key:"bbox",value:function bbox(){return new Box();}},{key:"targets",value:function targets(){return baseFind('svg [fill*='+this.id()+']');}// Alias string conversion to fill
},{key:"toString",value:function toString(){return this.url();}// Update pattern by rebuilding
},{key:"update",value:function update(block){// remove content
this.clear();// invoke passed block
if(typeof block==='function'){block.call(this,this);}return this;}// Return the fill id
},{key:"url",value:function url(){return'url(#'+this.id()+')';}}]);}(Container);registerMethods({Container:{// Create pattern element in defs
pattern:function pattern(){var _this$defs;return(_this$defs=this.defs()).pattern.apply(_this$defs,arguments);}},Defs:{pattern:wrapWithAttrCheck(function(width,height,block){return this.put(new Pattern()).update(block).attr({x:0,y:0,width:width,height:height,patternUnits:'userSpaceOnUse'});})}});register(Pattern,'Pattern');function _callSuper$p(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$p()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$p=function _isNativeReflectConstruct(){return!!t;})();}var Image=/*#__PURE__*/function(_Shape){function Image(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Image);return _callSuper$p(this,Image,[nodeOrNew('image',node),attrs]);}// (re)load image
_inherits(Image,_Shape);return _createClass$1(Image,[{key:"load",value:function load(url,callback){if(!url)return this;var img=new globals.window.Image();on(img,'load',function(e){var p=this.parent(Pattern);// ensure image size
if(this.width()===0&&this.height()===0){this.size(img.width,img.height);}if(p instanceof Pattern){// ensure pattern size if not set
if(p.width()===0&&p.height()===0){p.size(this.width(),this.height());}}if(typeof callback==='function'){callback.call(this,e);}},this);on(img,'load error',function(){// dont forget to unbind memory leaking events
off(img);});return this.attr('href',img.src=url,xlink);}}]);}(Shape);registerAttrHook(function(attr,val,_this){// convert image fill and stroke to patterns
if(attr==='fill'||attr==='stroke'){if(isImage.test(val)){val=_this.root().defs().image(val);}}if(val instanceof Image){val=_this.root().defs().pattern(0,0,function(pattern){pattern.add(val);});}return val;});registerMethods({Container:{// create image element, load image and set its size
image:wrapWithAttrCheck(function(source,callback){return this.put(new Image()).size(0,0).load(source,callback);})}});register(Image,'Image');function _callSuper$o(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$o()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$o=function _isNativeReflectConstruct(){return!!t;})();}var PointArray=/*#__PURE__*/function(_SVGArray){function PointArray(){_classCallCheck$1(this,PointArray);return _callSuper$o(this,PointArray,arguments);}_inherits(PointArray,_SVGArray);return _createClass$1(PointArray,[{key:"bbox",value:// Get bounding box of points
function bbox(){var maxX=-Infinity;var maxY=-Infinity;var minX=Infinity;var minY=Infinity;this.forEach(function(el){maxX=Math.max(el[0],maxX);maxY=Math.max(el[1],maxY);minX=Math.min(el[0],minX);minY=Math.min(el[1],minY);});return new Box(minX,minY,maxX-minX,maxY-minY);}// Move point string
},{key:"move",value:function move(x,y){var box=this.bbox();// get relative offset
x-=box.x;y-=box.y;// move every point
if(!isNaN(x)&&!isNaN(y)){for(var i=this.length-1;i>=0;i--){this[i]=[this[i][0]+x,this[i][1]+y];}}return this;}// Parse point string and flat array
},{key:"parse",value:function parse(){var array=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0,0];var points=[];// if it is an array, we flatten it and therefore clone it to 1 depths
if(array instanceof Array){array=Array.prototype.concat.apply([],array);}else{// Else, it is considered as a string
// parse points
array=array.trim().split(delimiter).map(parseFloat);}// validate points - https://svgwg.org/svg2-draft/shapes.html#DataTypePoints
// Odd number of coordinates is an error. In such cases, drop the last odd coordinate.
if(array.length%2!==0)array.pop();// wrap points in two-tuples
for(var i=0,len=array.length;i<len;i=i+2){points.push([array[i],array[i+1]]);}return points;}// Resize poly string
},{key:"size",value:function size(width,height){var i;var box=this.bbox();// recalculate position of all points according to new size
for(i=this.length-1;i>=0;i--){if(box.width)this[i][0]=(this[i][0]-box.x)*width/box.width+box.x;if(box.height)this[i][1]=(this[i][1]-box.y)*height/box.height+box.y;}return this;}// Convert array to line object
},{key:"toLine",value:function toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]};}// Convert array to string
},{key:"toString",value:function toString(){var array=[];// convert to a poly point string
for(var i=0,il=this.length;i<il;i++){array.push(this[i].join(','));}return array.join(' ');}},{key:"transform",value:function transform(m){return this.clone().transformO(m);}// transform points with matrix (similar to Point.transform)
},{key:"transformO",value:function transformO(m){if(!Matrix.isMatrixLike(m)){m=new Matrix(m);}for(var i=this.length;i--;){// Perform the matrix multiplication
var _this$i=_slicedToArray(this[i],2),x=_this$i[0],y=_this$i[1];this[i][0]=m.a*x+m.c*y+m.e;this[i][1]=m.b*x+m.d*y+m.f;}return this;}}]);}(SVGArray);var MorphArray=PointArray;// Move by left top corner over x-axis
function x$2(x){return x==null?this.bbox().x:this.move(x,this.bbox().y);}// Move by left top corner over y-axis
function y$2(y){return y==null?this.bbox().y:this.move(this.bbox().x,y);}// Set width of element
function width$1(width){var b=this.bbox();return width==null?b.width:this.size(width,b.height);}// Set height of element
function height$1(height){var b=this.bbox();return height==null?b.height:this.size(b.width,height);}var pointed=/*#__PURE__*/Object.freeze({__proto__:null,MorphArray:MorphArray,height:height$1,width:width$1,x:x$2,y:y$2});function _callSuper$n(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$n()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$n=function _isNativeReflectConstruct(){return!!t;})();}var Line=/*#__PURE__*/function(_Shape){// Initialize node
function Line(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Line);return _callSuper$n(this,Line,[nodeOrNew('line',node),attrs]);}// Get array
_inherits(Line,_Shape);return _createClass$1(Line,[{key:"array",value:function array(){return new PointArray([[this.attr('x1'),this.attr('y1')],[this.attr('x2'),this.attr('y2')]]);}// Move by left top corner
},{key:"move",value:function move(x,y){return this.attr(this.array().move(x,y).toLine());}// Overwrite native plot() method
},{key:"plot",value:function plot(x1,y1,x2,y2){if(x1==null){return this.array();}else if(typeof y1!=='undefined'){x1={x1:x1,y1:y1,x2:x2,y2:y2};}else{x1=new PointArray(x1).toLine();}return this.attr(x1);}// Set element size to given width and height
},{key:"size",value:function size(width,height){var p=proportionalSize(this,width,height);return this.attr(this.array().size(p.width,p.height).toLine());}}]);}(Shape);extend(Line,pointed);registerMethods({Container:{// Create a line element
line:wrapWithAttrCheck(function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}// make sure plot is called as a setter
// x1 is not necessarily a number, it can also be an array, a string and a PointArray
return Line.prototype.plot.apply(this.put(new Line()),args[0]!=null?args:[0,0,0,0]);})}});register(Line,'Line');function _callSuper$m(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$m()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$m=function _isNativeReflectConstruct(){return!!t;})();}var Marker=/*#__PURE__*/function(_Container){// Initialize node
function Marker(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Marker);return _callSuper$m(this,Marker,[nodeOrNew('marker',node),attrs]);}// Set height of element
_inherits(Marker,_Container);return _createClass$1(Marker,[{key:"height",value:function height(_height){return this.attr('markerHeight',_height);}},{key:"orient",value:function orient(_orient){return this.attr('orient',_orient);}// Set marker refX and refY
},{key:"ref",value:function ref(x,y){return this.attr('refX',x).attr('refY',y);}// Return the fill id
},{key:"toString",value:function toString(){return'url(#'+this.id()+')';}// Update marker
},{key:"update",value:function update(block){// remove all content
this.clear();// invoke passed block
if(typeof block==='function'){block.call(this,this);}return this;}// Set width of element
},{key:"width",value:function width(_width){return this.attr('markerWidth',_width);}}]);}(Container);registerMethods({Container:{marker:function marker(){var _this$defs;// Create marker element in defs
return(_this$defs=this.defs()).marker.apply(_this$defs,arguments);}},Defs:{// Create marker
marker:wrapWithAttrCheck(function(width,height,block){// Set default viewbox to match the width and height, set ref to cx and cy and set orient to auto
return this.put(new Marker()).size(width,height).ref(width/2,height/2).viewbox(0,0,width,height).attr('orient','auto').update(block);})},marker:{// Create and attach markers
marker:function marker(_marker,width,height,block){var attr=['marker'];// Build attribute name
if(_marker!=='all')attr.push(_marker);attr=attr.join('-');// Set marker attribute
_marker=arguments[1]instanceof Marker?arguments[1]:this.defs().marker(width,height,block);return this.attr(attr,_marker);}}});register(Marker,'Marker');function _callSuper$l(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$l()?Reflect.construct(o,[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$l=function _isNativeReflectConstruct(){return!!t;})();}/***
Base Class
==========
The base stepper class that will be
***/function makeSetterGetter(k,f){return function(v){if(v==null)return this[k];this[k]=v;if(f)f.call(this);return this;};}var easing={'-':function _(pos){return pos;},'<>':function _(pos){return-Math.cos(pos*Math.PI)/2+0.5;},'>':function _(pos){return Math.sin(pos*Math.PI/2);},'<':function _(pos){return-Math.cos(pos*Math.PI/2)+1;},bezier:function bezier(x1,y1,x2,y2){// see https://www.w3.org/TR/css-easing-1/#cubic-bezier-algo
return function(t){if(t<0){if(x1>0){return y1/x1*t;}else if(x2>0){return y2/x2*t;}else{return 0;}}else if(t>1){if(x2<1){return(1-y2)/(1-x2)*t+(y2-x2)/(1-x2);}else if(x1<1){return(1-y1)/(1-x1)*t+(y1-x1)/(1-x1);}else{return 1;}}else{return 3*t*Math.pow(1-t,2)*y1+3*Math.pow(t,2)*(1-t)*y2+Math.pow(t,3);}};},// see https://www.w3.org/TR/css-easing-1/#step-timing-function-algo
steps:function steps(_steps){var stepPosition=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'end';// deal with "jump-" prefix
stepPosition=stepPosition.split('-').reverse()[0];var jumps=_steps;if(stepPosition==='none'){--jumps;}else if(stepPosition==='both'){++jumps;}// The beforeFlag is essentially useless
return function(t){var beforeFlag=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;// Step is called currentStep in referenced url
var step=Math.floor(t*_steps);var jumping=t*step%1===0;if(stepPosition==='start'||stepPosition==='both'){++step;}if(beforeFlag&&jumping){--step;}if(t>=0&&step<0){step=0;}if(t<=1&&step>jumps){step=jumps;}return step/jumps;};}};var Stepper=/*#__PURE__*/function(){function Stepper(){_classCallCheck$1(this,Stepper);}return _createClass$1(Stepper,[{key:"done",value:function done(){return false;}}]);}();/***
Easing Functions
================
***/var Ease=/*#__PURE__*/function(_Stepper){function Ease(){var _this;var fn=arguments.length>0&&arguments[0]!==undefined?arguments[0]:timeline.ease;_classCallCheck$1(this,Ease);_this=_callSuper$l(this,Ease);_this.ease=easing[fn]||fn;return _this;}_inherits(Ease,_Stepper);return _createClass$1(Ease,[{key:"step",value:function step(from,to,pos){if(typeof from!=='number'){return pos<1?from:to;}return from+(to-from)*this.ease(pos);}}]);}(Stepper);/***
Controller Types
================
***/var Controller=/*#__PURE__*/function(_Stepper2){function Controller(fn){var _this2;_classCallCheck$1(this,Controller);_this2=_callSuper$l(this,Controller);_this2.stepper=fn;return _this2;}_inherits(Controller,_Stepper2);return _createClass$1(Controller,[{key:"done",value:function done(c){return c.done;}},{key:"step",value:function step(current,target,dt,c){return this.stepper(current,target,dt,c);}}]);}(Stepper);function recalculate(){// Apply the default parameters
var duration=(this._duration||500)/1000;var overshoot=this._overshoot||0;// Calculate the PID natural response
var eps=1e-10;var pi=Math.PI;var os=Math.log(overshoot/100+eps);var zeta=-os/Math.sqrt(pi*pi+os*os);var wn=3.9/(zeta*duration);// Calculate the Spring values
this.d=2*zeta*wn;this.k=wn*wn;}var Spring=/*#__PURE__*/function(_Controller){function Spring(){var _this3;var duration=arguments.length>0&&arguments[0]!==undefined?arguments[0]:500;var overshoot=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck$1(this,Spring);_this3=_callSuper$l(this,Spring);_this3.duration(duration).overshoot(overshoot);return _this3;}_inherits(Spring,_Controller);return _createClass$1(Spring,[{key:"step",value:function step(current,target,dt,c){if(typeof current==='string')return current;c.done=dt===Infinity;if(dt===Infinity)return target;if(dt===0)return current;if(dt>100)dt=16;dt/=1000;// Get the previous velocity
var velocity=c.velocity||0;// Apply the control to get the new position and store it
var acceleration=-this.d*velocity-this.k*(current-target);var newPosition=current+velocity*dt+acceleration*dt*dt/2;// Store the velocity
c.velocity=velocity+acceleration*dt;// Figure out if we have converged, and if so, pass the value
c.done=Math.abs(target-newPosition)+Math.abs(velocity)<0.002;return c.done?target:newPosition;}}]);}(Controller);extend(Spring,{duration:makeSetterGetter('_duration',recalculate),overshoot:makeSetterGetter('_overshoot',recalculate)});var PID=/*#__PURE__*/function(_Controller2){function PID(){var _this4;var p=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0.1;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.01;var d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var windup=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1000;_classCallCheck$1(this,PID);_this4=_callSuper$l(this,PID);_this4.p(p).i(i).d(d).windup(windup);return _this4;}_inherits(PID,_Controller2);return _createClass$1(PID,[{key:"step",value:function step(current,target,dt,c){if(typeof current==='string')return current;c.done=dt===Infinity;if(dt===Infinity)return target;if(dt===0)return current;var p=target-current;var i=(c.integral||0)+p*dt;var d=(p-(c.error||0))/dt;var windup=this._windup;// antiwindup
if(windup!==false){i=Math.max(-windup,Math.min(i,windup));}c.error=p;c.integral=i;c.done=Math.abs(p)<0.001;return c.done?target:current+(this.P*p+this.I*i+this.D*d);}}]);}(Controller);extend(PID,{windup:makeSetterGetter('_windup'),p:makeSetterGetter('P'),i:makeSetterGetter('I'),d:makeSetterGetter('D')});var segmentParameters={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};var pathHandlers={M:function M(c,p,p0){p.x=p0.x=c[0];p.y=p0.y=c[1];return['M',p.x,p.y];},L:function L(c,p){p.x=c[0];p.y=c[1];return['L',c[0],c[1]];},H:function H(c,p){p.x=c[0];return['H',c[0]];},V:function V(c,p){p.y=c[0];return['V',c[0]];},C:function C(c,p){p.x=c[4];p.y=c[5];return['C',c[0],c[1],c[2],c[3],c[4],c[5]];},S:function S(c,p){p.x=c[2];p.y=c[3];return['S',c[0],c[1],c[2],c[3]];},Q:function Q(c,p){p.x=c[2];p.y=c[3];return['Q',c[0],c[1],c[2],c[3]];},T:function T(c,p){p.x=c[0];p.y=c[1];return['T',c[0],c[1]];},Z:function Z(c,p,p0){p.x=p0.x;p.y=p0.y;return['Z'];},A:function A(c,p){p.x=c[5];p.y=c[6];return['A',c[0],c[1],c[2],c[3],c[4],c[5],c[6]];}};var mlhvqtcsaz='mlhvqtcsaz'.split('');for(var i=0,il=mlhvqtcsaz.length;i<il;++i){pathHandlers[mlhvqtcsaz[i]]=function(i){return function(c,p,p0){if(i==='H')c[0]=c[0]+p.x;else if(i==='V')c[0]=c[0]+p.y;else if(i==='A'){c[5]=c[5]+p.x;c[6]=c[6]+p.y;}else{for(var j=0,jl=c.length;j<jl;++j){c[j]=c[j]+(j%2?p.y:p.x);}}return pathHandlers[i](c,p,p0);};}(mlhvqtcsaz[i].toUpperCase());}function makeAbsolut(parser){var command=parser.segment[0];return pathHandlers[command](parser.segment.slice(1),parser.p,parser.p0);}function segmentComplete(parser){return parser.segment.length&&parser.segment.length-1===segmentParameters[parser.segment[0].toUpperCase()];}function startNewSegment(parser,token){parser.inNumber&&finalizeNumber(parser,false);var pathLetter=isPathLetter.test(token);if(pathLetter){parser.segment=[token];}else{var lastCommand=parser.lastCommand;var small=lastCommand.toLowerCase();var isSmall=lastCommand===small;parser.segment=[small==='m'?isSmall?'l':'L':lastCommand];}parser.inSegment=true;parser.lastCommand=parser.segment[0];return pathLetter;}function finalizeNumber(parser,inNumber){if(!parser.inNumber)throw new Error('Parser Error');parser.number&&parser.segment.push(parseFloat(parser.number));parser.inNumber=inNumber;parser.number='';parser.pointSeen=false;parser.hasExponent=false;if(segmentComplete(parser)){finalizeSegment(parser);}}function finalizeSegment(parser){parser.inSegment=false;if(parser.absolute){parser.segment=makeAbsolut(parser);}parser.segments.push(parser.segment);}function isArcFlag(parser){if(!parser.segment.length)return false;var isArc=parser.segment[0].toUpperCase()==='A';var length=parser.segment.length;return isArc&&(length===4||length===5);}function isExponential(parser){return parser.lastToken.toUpperCase()==='E';}var pathDelimiters=new Set([' ',',','\t','\n','\r','\f']);function pathParser(d){var toAbsolute=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var index=0;var token='';var parser={segment:[],inNumber:false,number:'',lastToken:'',inSegment:false,segments:[],pointSeen:false,hasExponent:false,absolute:toAbsolute,p0:new Point(),p:new Point()};while(parser.lastToken=token,token=d.charAt(index++)){if(!parser.inSegment){if(startNewSegment(parser,token)){continue;}}if(token==='.'){if(parser.pointSeen||parser.hasExponent){finalizeNumber(parser,false);--index;continue;}parser.inNumber=true;parser.pointSeen=true;parser.number+=token;continue;}if(!isNaN(parseInt(token))){if(parser.number==='0'||isArcFlag(parser)){parser.inNumber=true;parser.number=token;finalizeNumber(parser,true);continue;}parser.inNumber=true;parser.number+=token;continue;}if(pathDelimiters.has(token)){if(parser.inNumber){finalizeNumber(parser,false);}continue;}if(token==='-'||token==='+'){if(parser.inNumber&&!isExponential(parser)){finalizeNumber(parser,false);--index;continue;}parser.number+=token;parser.inNumber=true;continue;}if(token.toUpperCase()==='E'){parser.number+=token;parser.hasExponent=true;continue;}if(isPathLetter.test(token)){if(parser.inNumber){finalizeNumber(parser,false);}else if(!segmentComplete(parser)){throw new Error('parser Error');}else{finalizeSegment(parser);}--index;}}if(parser.inNumber){finalizeNumber(parser,false);}if(parser.inSegment&&segmentComplete(parser)){finalizeSegment(parser);}return parser.segments;}function _callSuper$k(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$k()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$k(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$k=function _isNativeReflectConstruct(){return!!t;})();}function arrayToString(a){var s='';for(var i=0,il=a.length;i<il;i++){s+=a[i][0];if(a[i][1]!=null){s+=a[i][1];if(a[i][2]!=null){s+=' ';s+=a[i][2];if(a[i][3]!=null){s+=' ';s+=a[i][3];s+=' ';s+=a[i][4];if(a[i][5]!=null){s+=' ';s+=a[i][5];s+=' ';s+=a[i][6];if(a[i][7]!=null){s+=' ';s+=a[i][7];}}}}}}return s+' ';}var PathArray=/*#__PURE__*/function(_SVGArray){function PathArray(){_classCallCheck$1(this,PathArray);return _callSuper$k(this,PathArray,arguments);}_inherits(PathArray,_SVGArray);return _createClass$1(PathArray,[{key:"bbox",value:// Get bounding box of path
function bbox(){parser().path.setAttribute('d',this.toString());return new Box(parser.nodes.path.getBBox());}// Move path string
},{key:"move",value:function move(x,y){// get bounding box of current situation
var box=this.bbox();// get relative offset
x-=box.x;y-=box.y;if(!isNaN(x)&&!isNaN(y)){// move every point
for(var l,i=this.length-1;i>=0;i--){l=this[i][0];if(l==='M'||l==='L'||l==='T'){this[i][1]+=x;this[i][2]+=y;}else if(l==='H'){this[i][1]+=x;}else if(l==='V'){this[i][1]+=y;}else if(l==='C'||l==='S'||l==='Q'){this[i][1]+=x;this[i][2]+=y;this[i][3]+=x;this[i][4]+=y;if(l==='C'){this[i][5]+=x;this[i][6]+=y;}}else if(l==='A'){this[i][6]+=x;this[i][7]+=y;}}}return this;}// Absolutize and parse path to array
},{key:"parse",value:function parse(){var d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'M0 0';if(Array.isArray(d)){d=Array.prototype.concat.apply([],d).toString();}return pathParser(d);}// Resize path string
},{key:"size",value:function size(width,height){// get bounding box of current situation
var box=this.bbox();var i,l;// If the box width or height is 0 then we ignore
// transformations on the respective axis
box.width=box.width===0?1:box.width;box.height=box.height===0?1:box.height;// recalculate position of all points according to new size
for(i=this.length-1;i>=0;i--){l=this[i][0];if(l==='M'||l==='L'||l==='T'){this[i][1]=(this[i][1]-box.x)*width/box.width+box.x;this[i][2]=(this[i][2]-box.y)*height/box.height+box.y;}else if(l==='H'){this[i][1]=(this[i][1]-box.x)*width/box.width+box.x;}else if(l==='V'){this[i][1]=(this[i][1]-box.y)*height/box.height+box.y;}else if(l==='C'||l==='S'||l==='Q'){this[i][1]=(this[i][1]-box.x)*width/box.width+box.x;this[i][2]=(this[i][2]-box.y)*height/box.height+box.y;this[i][3]=(this[i][3]-box.x)*width/box.width+box.x;this[i][4]=(this[i][4]-box.y)*height/box.height+box.y;if(l==='C'){this[i][5]=(this[i][5]-box.x)*width/box.width+box.x;this[i][6]=(this[i][6]-box.y)*height/box.height+box.y;}}else if(l==='A'){// resize radii
this[i][1]=this[i][1]*width/box.width;this[i][2]=this[i][2]*height/box.height;// move position values
this[i][6]=(this[i][6]-box.x)*width/box.width+box.x;this[i][7]=(this[i][7]-box.y)*height/box.height+box.y;}}return this;}// Convert array to string
},{key:"toString",value:function toString(){return arrayToString(this);}}]);}(SVGArray);var getClassForType=function getClassForType(value){var type=_typeof$1(value);if(type==='number'){return SVGNumber;}else if(type==='string'){if(Color.isColor(value)){return Color;}else if(delimiter.test(value)){return isPathLetter.test(value)?PathArray:SVGArray;}else if(numberAndUnit.test(value)){return SVGNumber;}else{return NonMorphable;}}else if(morphableTypes.indexOf(value.constructor)>-1){return value.constructor;}else if(Array.isArray(value)){return SVGArray;}else if(type==='object'){return ObjectBag;}else{return NonMorphable;}};var Morphable=/*#__PURE__*/function(){function Morphable(stepper){_classCallCheck$1(this,Morphable);this._stepper=stepper||new Ease('-');this._from=null;this._to=null;this._type=null;this._context=null;this._morphObj=null;}return _createClass$1(Morphable,[{key:"at",value:function at(pos){return this._morphObj.morph(this._from,this._to,pos,this._stepper,this._context);}},{key:"done",value:function done(){var complete=this._context.map(this._stepper.done).reduce(function(last,curr){return last&&curr;},true);return complete;}},{key:"from",value:function from(val){if(val==null){return this._from;}this._from=this._set(val);return this;}},{key:"stepper",value:function stepper(_stepper){if(_stepper==null)return this._stepper;this._stepper=_stepper;return this;}},{key:"to",value:function to(val){if(val==null){return this._to;}this._to=this._set(val);return this;}},{key:"type",value:function type(_type){// getter
if(_type==null){return this._type;}// setter
this._type=_type;return this;}},{key:"_set",value:function _set(value){if(!this._type){this.type(getClassForType(value));}var result=new this._type(value);if(this._type===Color){result=this._to?result[this._to[4]]():this._from?result[this._from[4]]():result;}if(this._type===ObjectBag){result=this._to?result.align(this._to):this._from?result.align(this._from):result;}result=result.toConsumable();this._morphObj=this._morphObj||new this._type();this._context=this._context||Array.apply(null,Array(result.length)).map(Object).map(function(o){o.done=true;return o;});return result;}}]);}();var NonMorphable=/*#__PURE__*/function(){function NonMorphable(){_classCallCheck$1(this,NonMorphable);this.init.apply(this,arguments);}return _createClass$1(NonMorphable,[{key:"init",value:function init(val){val=Array.isArray(val)?val[0]:val;this.value=val;return this;}},{key:"toArray",value:function toArray(){return[this.value];}},{key:"valueOf",value:function valueOf(){return this.value;}}]);}();var TransformBag=/*#__PURE__*/function(){function TransformBag(){_classCallCheck$1(this,TransformBag);this.init.apply(this,arguments);}return _createClass$1(TransformBag,[{key:"init",value:function init(obj){if(Array.isArray(obj)){obj={scaleX:obj[0],scaleY:obj[1],shear:obj[2],rotate:obj[3],translateX:obj[4],translateY:obj[5],originX:obj[6],originY:obj[7]};}Object.assign(this,TransformBag.defaults,obj);return this;}},{key:"toArray",value:function toArray(){var v=this;return[v.scaleX,v.scaleY,v.shear,v.rotate,v.translateX,v.translateY,v.originX,v.originY];}}]);}();TransformBag.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};var sortByKey=function sortByKey(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0;};var ObjectBag=/*#__PURE__*/function(){function ObjectBag(){_classCallCheck$1(this,ObjectBag);this.init.apply(this,arguments);}return _createClass$1(ObjectBag,[{key:"align",value:function align(other){var values=this.values;for(var i=0,il=values.length;i<il;++i){// If the type is the same we only need to check if the color is in the correct format
if(values[i+1]===other[i+1]){if(values[i+1]===Color&&other[i+7]!==values[i+7]){var _this$values;var space=other[i+7];var color=new Color(this.values.splice(i+3,5))[space]().toArray();(_this$values=this.values).splice.apply(_this$values,[i+3,0].concat(_toConsumableArray(color)));}i+=values[i+2]+2;continue;}if(!other[i+1]){return this;}// The types differ, so we overwrite the new type with the old one
// And initialize it with the types default (e.g. black for color or 0 for number)
var defaultObject=new other[i+1]().toArray();// Than we fix the values array
var toDelete=values[i+2]+3;values.splice.apply(values,[i,toDelete,other[i],other[i+1],other[i+2]].concat(_toConsumableArray(defaultObject)));i+=values[i+2]+2;}return this;}},{key:"init",value:function init(objOrArr){this.values=[];if(Array.isArray(objOrArr)){this.values=objOrArr.slice();return;}objOrArr=objOrArr||{};var entries=[];for(var i in objOrArr){var Type=getClassForType(objOrArr[i]);var val=new Type(objOrArr[i]).toArray();entries.push([i,Type,val.length].concat(_toConsumableArray(val)));}entries.sort(sortByKey);this.values=entries.reduce(function(last,curr){return last.concat(curr);},[]);return this;}},{key:"toArray",value:function toArray(){return this.values;}},{key:"valueOf",value:function valueOf(){var obj={};var arr=this.values;// for (var i = 0, len = arr.length; i < len; i += 2) {
while(arr.length){var key=arr.shift();var Type=arr.shift();var num=arr.shift();var values=arr.splice(0,num);obj[key]=new Type(values);// .valueOf()
}return obj;}}]);}();var morphableTypes=[NonMorphable,TransformBag,ObjectBag];function registerMorphableType(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];morphableTypes.push.apply(morphableTypes,_toConsumableArray([].concat(type)));}function makeMorphable(){extend(morphableTypes,{to:function to(val){return new Morphable().type(this.constructor).from(this.toArray())// this.valueOf())
.to(val);},fromArray:function fromArray(arr){this.init(arr);return this;},toConsumable:function toConsumable(){return this.toArray();},morph:function morph(from,to,pos,stepper,context){var mapper=function mapper(i,index){return stepper.step(i,to[index],pos,context[index],context);};return this.fromArray(from.map(mapper));}});}function _callSuper$j(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$j()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$j(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$j=function _isNativeReflectConstruct(){return!!t;})();}var Path=/*#__PURE__*/function(_Shape){// Initialize node
function Path(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Path);return _callSuper$j(this,Path,[nodeOrNew('path',node),attrs]);}// Get array
_inherits(Path,_Shape);return _createClass$1(Path,[{key:"array",value:function array(){return this._array||(this._array=new PathArray(this.attr('d')));}// Clear array cache
},{key:"clear",value:function clear(){delete this._array;return this;}// Set height of element
},{key:"height",value:function height(_height){return _height==null?this.bbox().height:this.size(this.bbox().width,_height);}// Move by left top corner
},{key:"move",value:function move(x,y){return this.attr('d',this.array().move(x,y));}// Plot new path
},{key:"plot",value:function plot(d){return d==null?this.array():this.clear().attr('d',typeof d==='string'?d:this._array=new PathArray(d));}// Set element size to given width and height
},{key:"size",value:function size(width,height){var p=proportionalSize(this,width,height);return this.attr('d',this.array().size(p.width,p.height));}// Set width of element
},{key:"width",value:function width(_width){return _width==null?this.bbox().width:this.size(_width,this.bbox().height);}// Move by left top corner over x-axis
},{key:"x",value:function x(_x){return _x==null?this.bbox().x:this.move(_x,this.bbox().y);}// Move by left top corner over y-axis
},{key:"y",value:function y(_y){return _y==null?this.bbox().y:this.move(this.bbox().x,_y);}}]);}(Shape);// Define morphable array
Path.prototype.MorphArray=PathArray;// Add parent method
registerMethods({Container:{// Create a wrapped path element
path:wrapWithAttrCheck(function(d){// make sure plot is called as a setter
return this.put(new Path()).plot(d||new PathArray());})}});register(Path,'Path');// Get array
function array(){return this._array||(this._array=new PointArray(this.attr('points')));}// Clear array cache
function clear(){delete this._array;return this;}// Move by left top corner
function move$2(x,y){return this.attr('points',this.array().move(x,y));}// Plot new path
function plot(p){return p==null?this.array():this.clear().attr('points',typeof p==='string'?p:this._array=new PointArray(p));}// Set element size to given width and height
function size$1(width,height){var p=proportionalSize(this,width,height);return this.attr('points',this.array().size(p.width,p.height));}var poly=/*#__PURE__*/Object.freeze({__proto__:null,array:array,clear:clear,move:move$2,plot:plot,size:size$1});function _callSuper$i(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$i()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$i=function _isNativeReflectConstruct(){return!!t;})();}var Polygon=/*#__PURE__*/function(_Shape){// Initialize node
function Polygon(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Polygon);return _callSuper$i(this,Polygon,[nodeOrNew('polygon',node),attrs]);}_inherits(Polygon,_Shape);return _createClass$1(Polygon);}(Shape);registerMethods({Container:{// Create a wrapped polygon element
polygon:wrapWithAttrCheck(function(p){// make sure plot is called as a setter
return this.put(new Polygon()).plot(p||new PointArray());})}});extend(Polygon,pointed);extend(Polygon,poly);register(Polygon,'Polygon');function _callSuper$h(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$h()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$h=function _isNativeReflectConstruct(){return!!t;})();}var Polyline=/*#__PURE__*/function(_Shape){// Initialize node
function Polyline(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Polyline);return _callSuper$h(this,Polyline,[nodeOrNew('polyline',node),attrs]);}_inherits(Polyline,_Shape);return _createClass$1(Polyline);}(Shape);registerMethods({Container:{// Create a wrapped polygon element
polyline:wrapWithAttrCheck(function(p){// make sure plot is called as a setter
return this.put(new Polyline()).plot(p||new PointArray());})}});extend(Polyline,pointed);extend(Polyline,poly);register(Polyline,'Polyline');function _callSuper$g(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$g()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$g(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$g=function _isNativeReflectConstruct(){return!!t;})();}var Rect=/*#__PURE__*/function(_Shape){// Initialize node
function Rect(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Rect);return _callSuper$g(this,Rect,[nodeOrNew('rect',node),attrs]);}_inherits(Rect,_Shape);return _createClass$1(Rect);}(Shape);extend(Rect,{rx:rx,ry:ry});registerMethods({Container:{// Create a rect element
rect:wrapWithAttrCheck(function(width,height){return this.put(new Rect()).size(width,height);})}});register(Rect,'Rect');var Queue=/*#__PURE__*/function(){function Queue(){_classCallCheck$1(this,Queue);this._first=null;this._last=null;}// Shows us the first item in the list
return _createClass$1(Queue,[{key:"first",value:function first(){return this._first&&this._first.value;}// Shows us the last item in the list
},{key:"last",value:function last(){return this._last&&this._last.value;}},{key:"push",value:function push(value){// An item stores an id and the provided value
var item=typeof value.next!=='undefined'?value:{value:value,next:null,prev:null};// Deal with the queue being empty or populated
if(this._last){item.prev=this._last;this._last.next=item;this._last=item;}else{this._last=item;this._first=item;}// Return the current item
return item;}// Removes the item that was returned from the push
},{key:"remove",value:function remove(item){// Relink the previous item
if(item.prev)item.prev.next=item.next;if(item.next)item.next.prev=item.prev;if(item===this._last)this._last=item.prev;if(item===this._first)this._first=item.next;// Invalidate item
item.prev=null;item.next=null;}},{key:"shift",value:function shift(){// Check if we have a value
var remove=this._first;if(!remove)return null;// If we do, remove it and relink things
this._first=remove.next;if(this._first)this._first.prev=null;this._last=this._first?this._last:null;return remove.value;}}]);}();var Animator={nextDraw:null,frames:new Queue(),timeouts:new Queue(),immediates:new Queue(),timer:function timer(){return globals.window.performance||globals.window.Date;},transforms:[],frame:function frame(fn){// Store the node
var node=Animator.frames.push({run:fn});// Request an animation frame if we don't have one
if(Animator.nextDraw===null){Animator.nextDraw=globals.window.requestAnimationFrame(Animator._draw);}// Return the node so we can remove it easily
return node;},timeout:function timeout(fn,delay){delay=delay||0;// Work out when the event should fire
var time=Animator.timer().now()+delay;// Add the timeout to the end of the queue
var node=Animator.timeouts.push({run:fn,time:time});// Request another animation frame if we need one
if(Animator.nextDraw===null){Animator.nextDraw=globals.window.requestAnimationFrame(Animator._draw);}return node;},immediate:function immediate(fn){// Add the immediate fn to the end of the queue
var node=Animator.immediates.push(fn);// Request another animation frame if we need one
if(Animator.nextDraw===null){Animator.nextDraw=globals.window.requestAnimationFrame(Animator._draw);}return node;},cancelFrame:function cancelFrame(node){node!=null&&Animator.frames.remove(node);},clearTimeout:function clearTimeout(node){node!=null&&Animator.timeouts.remove(node);},cancelImmediate:function cancelImmediate(node){node!=null&&Animator.immediates.remove(node);},_draw:function _draw(now){// Run all the timeouts we can run, if they are not ready yet, add them
// to the end of the queue immediately! (bad timeouts!!! [sarcasm])
var nextTimeout=null;var lastTimeout=Animator.timeouts.last();while(nextTimeout=Animator.timeouts.shift()){// Run the timeout if its time, or push it to the end
if(now>=nextTimeout.time){nextTimeout.run();}else{Animator.timeouts.push(nextTimeout);}// If we hit the last item, we should stop shifting out more items
if(nextTimeout===lastTimeout)break;}// Run all of the animation frames
var nextFrame=null;var lastFrame=Animator.frames.last();while(nextFrame!==lastFrame&&(nextFrame=Animator.frames.shift())){nextFrame.run(now);}var nextImmediate=null;while(nextImmediate=Animator.immediates.shift()){nextImmediate();}// If we have remaining timeouts or frames, draw until we don't anymore
Animator.nextDraw=Animator.timeouts.first()||Animator.frames.first()?globals.window.requestAnimationFrame(Animator._draw):null;}};function _callSuper$f(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$f()?Reflect.construct(o,[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$f=function _isNativeReflectConstruct(){return!!t;})();}var makeSchedule=function makeSchedule(runnerInfo){var start=runnerInfo.start;var duration=runnerInfo.runner.duration();var end=start+duration;return{start:start,duration:duration,end:end,runner:runnerInfo.runner};};var defaultSource=function defaultSource(){var w=globals.window;return(w.performance||w.Date).now();};var Timeline=/*#__PURE__*/function(_EventTarget){// Construct a new timeline on the given element
function Timeline(){var _this;var timeSource=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultSource;_classCallCheck$1(this,Timeline);_this=_callSuper$f(this,Timeline);_this._timeSource=timeSource;// terminate resets all variables to their initial state
_this.terminate();return _this;}_inherits(Timeline,_EventTarget);return _createClass$1(Timeline,[{key:"active",value:function active(){return!!this._nextFrame;}},{key:"finish",value:function finish(){// Go to end and pause
this.time(this.getEndTimeOfTimeline()+1);return this.pause();}// Calculates the end of the timeline
},{key:"getEndTime",value:function getEndTime(){var lastRunnerInfo=this.getLastRunnerInfo();var lastDuration=lastRunnerInfo?lastRunnerInfo.runner.duration():0;var lastStartTime=lastRunnerInfo?lastRunnerInfo.start:this._time;return lastStartTime+lastDuration;}},{key:"getEndTimeOfTimeline",value:function getEndTimeOfTimeline(){var endTimes=this._runners.map(function(i){return i.start+i.runner.duration();});return Math.max.apply(Math,[0].concat(_toConsumableArray(endTimes)));}},{key:"getLastRunnerInfo",value:function getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId);}},{key:"getRunnerInfoById",value:function getRunnerInfoById(id){return this._runners[this._runnerIds.indexOf(id)]||null;}},{key:"pause",value:function pause(){this._paused=true;return this._continue();}},{key:"persist",value:function persist(dtOrForever){if(dtOrForever==null)return this._persist;this._persist=dtOrForever;return this;}},{key:"play",value:function play(){// Now make sure we are not paused and continue the animation
this._paused=false;return this.updateTime()._continue();}},{key:"reverse",value:function reverse(yes){var currentSpeed=this.speed();if(yes==null)return this.speed(-currentSpeed);var positive=Math.abs(currentSpeed);return this.speed(yes?-positive:positive);}// schedules a runner on the timeline
},{key:"schedule",value:function schedule(runner,delay,when){if(runner==null){return this._runners.map(makeSchedule);}// The start time for the next animation can either be given explicitly,
// derived from the current timeline time or it can be relative to the
// last start time to chain animations directly
var absoluteStartTime=0;var endTime=this.getEndTime();delay=delay||0;// Work out when to start the animation
if(when==null||when==='last'||when==='after'){// Take the last time and increment
absoluteStartTime=endTime;}else if(when==='absolute'||when==='start'){absoluteStartTime=delay;delay=0;}else if(when==='now'){absoluteStartTime=this._time;}else if(when==='relative'){var _runnerInfo=this.getRunnerInfoById(runner.id);if(_runnerInfo){absoluteStartTime=_runnerInfo.start+delay;delay=0;}}else if(when==='with-last'){var lastRunnerInfo=this.getLastRunnerInfo();var lastStartTime=lastRunnerInfo?lastRunnerInfo.start:this._time;absoluteStartTime=lastStartTime;}else{throw new Error('Invalid value for the "when" parameter');}// Manage runner
runner.unschedule();runner.timeline(this);var persist=runner.persist();var runnerInfo={persist:persist===null?this._persist:persist,start:absoluteStartTime+delay,runner:runner};this._lastRunnerId=runner.id;this._runners.push(runnerInfo);this._runners.sort(function(a,b){return a.start-b.start;});this._runnerIds=this._runners.map(function(info){return info.runner.id;});this.updateTime()._continue();return this;}},{key:"seek",value:function seek(dt){return this.time(this._time+dt);}},{key:"source",value:function source(fn){if(fn==null)return this._timeSource;this._timeSource=fn;return this;}},{key:"speed",value:function speed(_speed){if(_speed==null)return this._speed;this._speed=_speed;return this;}},{key:"stop",value:function stop(){// Go to start and pause
this.time(0);return this.pause();}},{key:"time",value:function time(_time){if(_time==null)return this._time;this._time=_time;return this._continue(true);}// Remove the runner from this timeline
},{key:"unschedule",value:function unschedule(runner){var index=this._runnerIds.indexOf(runner.id);if(index<0)return this;this._runners.splice(index,1);this._runnerIds.splice(index,1);runner.timeline(null);return this;}// Makes sure, that after pausing the time doesn't jump
},{key:"updateTime",value:function updateTime(){if(!this.active()){this._lastSourceTime=this._timeSource();}return this;}// Checks if we are running and continues the animation
},{key:"_continue",value:function _continue(){var immediateStep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;Animator.cancelFrame(this._nextFrame);this._nextFrame=null;if(immediateStep)return this._stepImmediate();if(this._paused)return this;this._nextFrame=Animator.frame(this._step);return this;}},{key:"_stepFn",value:function _stepFn(){var immediateStep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;// Get the time delta from the last time and update the time
var time=this._timeSource();var dtSource=time-this._lastSourceTime;if(immediateStep)dtSource=0;var dtTime=this._speed*dtSource+(this._time-this._lastStepTime);this._lastSourceTime=time;// Only update the time if we use the timeSource.
// Otherwise use the current time
if(!immediateStep){// Update the time
this._time+=dtTime;this._time=this._time<0?0:this._time;}this._lastStepTime=this._time;this.fire('time',this._time);// This is for the case that the timeline was seeked so that the time
// is now before the startTime of the runner. That is why we need to set
// the runner to position 0
// FIXME:
// However, resetting in insertion order leads to bugs. Considering the case,
// where 2 runners change the same attribute but in different times,
// resetting both of them will lead to the case where the later defined
// runner always wins the reset even if the other runner started earlier
// and therefore should win the attribute battle
// this can be solved by resetting them backwards
for(var k=this._runners.length;k--;){// Get and run the current runner and ignore it if its inactive
var runnerInfo=this._runners[k];var runner=runnerInfo.runner;// Make sure that we give the actual difference
// between runner start time and now
var dtToStart=this._time-runnerInfo.start;// Dont run runner if not started yet
// and try to reset it
if(dtToStart<=0){runner.reset();}}// Run all of the runners directly
var runnersLeft=false;for(var i=0,len=this._runners.length;i<len;i++){// Get and run the current runner and ignore it if its inactive
var _runnerInfo2=this._runners[i];var _runner=_runnerInfo2.runner;var dt=dtTime;// Make sure that we give the actual difference
// between runner start time and now
var _dtToStart=this._time-_runnerInfo2.start;// Dont run runner if not started yet
if(_dtToStart<=0){runnersLeft=true;continue;}else if(_dtToStart<dt){// Adjust dt to make sure that animation is on point
dt=_dtToStart;}if(!_runner.active())continue;// If this runner is still going, signal that we need another animation
// frame, otherwise, remove the completed runner
var finished=_runner.step(dt).done;if(!finished){runnersLeft=true;// continue
}else if(_runnerInfo2.persist!==true){// runner is finished. And runner might get removed
var endTime=_runner.duration()-_runner.time()+this._time;if(endTime+_runnerInfo2.persist<this._time){// Delete runner and correct index
_runner.unschedule();--i;--len;}}}// Basically: we continue when there are runners right from us in time
// when -->, and when runners are left from us when <--
if(runnersLeft&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0){this._continue();}else{this.pause();this.fire('finished');}return this;}},{key:"terminate",value:function terminate(){// cleanup memory
// Store the timing variables
this._startTime=0;this._speed=1.0;// Determines how long a runner is hold in memory. Can be a dt or true/false
this._persist=0;// Keep track of the running animations and their starting parameters
this._nextFrame=null;this._paused=true;this._runners=[];this._runnerIds=[];this._lastRunnerId=-1;this._time=0;this._lastSourceTime=0;this._lastStepTime=0;// Make sure that step is always called in class context
this._step=this._stepFn.bind(this,false);this._stepImmediate=this._stepFn.bind(this,true);}}]);}(EventTarget);registerMethods({Element:{timeline:function timeline(_timeline){if(_timeline==null){this._timeline=this._timeline||new Timeline();return this._timeline;}else{this._timeline=_timeline;return this;}}}});function ownKeys$1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread$1(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$1(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _callSuper$e(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$e()?Reflect.construct(o,[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$e=function _isNativeReflectConstruct(){return!!t;})();}var Runner=/*#__PURE__*/function(_EventTarget){function Runner(options){var _this;_classCallCheck$1(this,Runner);_this=_callSuper$e(this,Runner);// Store a unique id on the runner, so that we can identify it later
_this.id=Runner.id++;// Ensure a default value
options=options==null?timeline.duration:options;// Ensure that we get a controller
options=typeof options==='function'?new Controller(options):options;// Declare all of the variables
_this._element=null;_this._timeline=null;_this.done=false;_this._queue=[];// Work out the stepper and the duration
_this._duration=typeof options==='number'&&options;_this._isDeclarative=options instanceof Controller;_this._stepper=_this._isDeclarative?options:new Ease();// We copy the current values from the timeline because they can change
_this._history={};// Store the state of the runner
_this.enabled=true;_this._time=0;_this._lastTime=0;// At creation, the runner is in reset state
_this._reseted=true;// Save transforms applied to this runner
_this.transforms=new Matrix();_this.transformId=1;// Looping variables
_this._haveReversed=false;_this._reverse=false;_this._loopsDone=0;_this._swing=false;_this._wait=0;_this._times=1;_this._frameId=null;// Stores how long a runner is stored after being done
_this._persist=_this._isDeclarative?true:null;return _this;}_inherits(Runner,_EventTarget);return _createClass$1(Runner,[{key:"active",value:function active(enabled){if(enabled==null)return this.enabled;this.enabled=enabled;return this;}/*
    Private Methods
    ===============
    Methods that shouldn't be used externally
    */},{key:"addTransform",value:function addTransform(transform){this.transforms.lmultiplyO(transform);return this;}},{key:"after",value:function after(fn){return this.on('finished',fn);}},{key:"animate",value:function animate(duration,delay,when){var o=Runner.sanitise(duration,delay,when);var runner=new Runner(o.duration);if(this._timeline)runner.timeline(this._timeline);if(this._element)runner.element(this._element);return runner.loop(o).schedule(o.delay,o.when);}},{key:"clearTransform",value:function clearTransform(){this.transforms=new Matrix();return this;}// TODO: Keep track of all transformations so that deletion is faster
},{key:"clearTransformsFromQueue",value:function clearTransformsFromQueue(){if(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id)){this._queue=this._queue.filter(function(item){return!item.isTransform;});}}},{key:"delay",value:function delay(_delay){return this.animate(0,_delay);}},{key:"duration",value:function duration(){return this._times*(this._wait+this._duration)-this._wait;}},{key:"during",value:function during(fn){return this.queue(null,fn);}},{key:"ease",value:function ease(fn){this._stepper=new Ease(fn);return this;}/*
    Runner Definitions
    ==================
    These methods help us define the runtime behaviour of the Runner or they
    help us make new runners from the current runner
    */},{key:"element",value:function element(_element){if(_element==null)return this._element;this._element=_element;_element._prepareRunner();return this;}},{key:"finish",value:function finish(){return this.step(Infinity);}},{key:"loop",value:function loop(times,swing,wait){// Deal with the user passing in an object
if(_typeof$1(times)==='object'){swing=times.swing;wait=times.wait;times=times.times;}// Sanitise the values and store them
this._times=times||Infinity;this._swing=swing||false;this._wait=wait||0;// Allow true to be passed
if(this._times===true){this._times=Infinity;}return this;}},{key:"loops",value:function loops(p){var loopDuration=this._duration+this._wait;if(p==null){var loopsDone=Math.floor(this._time/loopDuration);var relativeTime=this._time-loopsDone*loopDuration;var position=relativeTime/this._duration;return Math.min(loopsDone+position,this._times);}var whole=Math.floor(p);var partial=p%1;var time=loopDuration*whole+this._duration*partial;return this.time(time);}},{key:"persist",value:function persist(dtOrForever){if(dtOrForever==null)return this._persist;this._persist=dtOrForever;return this;}},{key:"position",value:function position(p){// Get all of the variables we need
var x=this._time;var d=this._duration;var w=this._wait;var t=this._times;var s=this._swing;var r=this._reverse;var position;if(p==null){/*
        This function converts a time to a position in the range [0, 1]
        The full explanation can be found in this desmos demonstration
          https://www.desmos.com/calculator/u4fbavgche
        The logic is slightly simplified here because we can use booleans
        */// Figure out the value without thinking about the start or end time
var f=function f(x){var swinging=s*Math.floor(x%(2*(w+d))/(w+d));var backwards=swinging&&!r||!swinging&&r;var uncliped=Math.pow(-1,backwards)*(x%(w+d))/d+backwards;var clipped=Math.max(Math.min(uncliped,1),0);return clipped;};// Figure out the value by incorporating the start time
var endTime=t*(w+d)-w;position=x<=0?Math.round(f(1e-5)):x<endTime?f(x):Math.round(f(endTime-1e-5));return position;}// Work out the loops done and add the position to the loops done
var loopsDone=Math.floor(this.loops());var swingForward=s&&loopsDone%2===0;var forwards=swingForward&&!r||r&&swingForward;position=loopsDone+(forwards?p:1-p);return this.loops(position);}},{key:"progress",value:function progress(p){if(p==null){return Math.min(1,this._time/this.duration());}return this.time(p*this.duration());}/*
    Basic Functionality
    ===================
    These methods allow us to attach basic functions to the runner directly
    */},{key:"queue",value:function queue(initFn,runFn,retargetFn,isTransform){this._queue.push({initialiser:initFn||noop,runner:runFn||noop,retarget:retargetFn,isTransform:isTransform,initialised:false,finished:false});var timeline=this.timeline();timeline&&this.timeline()._continue();return this;}},{key:"reset",value:function reset(){if(this._reseted)return this;this.time(0);this._reseted=true;return this;}},{key:"reverse",value:function reverse(_reverse){this._reverse=_reverse==null?!this._reverse:_reverse;return this;}},{key:"schedule",value:function schedule(timeline,delay,when){// The user doesn't need to pass a timeline if we already have one
if(!(timeline instanceof Timeline)){when=delay;delay=timeline;timeline=this.timeline();}// If there is no timeline, yell at the user...
if(!timeline){throw Error('Runner cannot be scheduled without timeline');}// Schedule the runner on the timeline provided
timeline.schedule(this,delay,when);return this;}},{key:"step",value:function step(dt){// If we are inactive, this stepper just gets skipped
if(!this.enabled)return this;// Update the time and get the new position
dt=dt==null?16:dt;this._time+=dt;var position=this.position();// Figure out if we need to run the stepper in this frame
var running=this._lastPosition!==position&&this._time>=0;this._lastPosition=position;// Figure out if we just started
var duration=this.duration();var justStarted=this._lastTime<=0&&this._time>0;var justFinished=this._lastTime<duration&&this._time>=duration;this._lastTime=this._time;if(justStarted){this.fire('start',this);}// Work out if the runner is finished set the done flag here so animations
// know, that they are running in the last step (this is good for
// transformations which can be merged)
var declarative=this._isDeclarative;this.done=!declarative&&!justFinished&&this._time>=duration;// Runner is running. So its not in reset state anymore
this._reseted=false;var converged=false;// Call initialise and the run function
if(running||declarative){this._initialise(running);// clear the transforms on this runner so they dont get added again and again
this.transforms=new Matrix();converged=this._run(declarative?dt:position);this.fire('step',this);}// correct the done flag here
// declarative animations itself know when they converged
this.done=this.done||converged&&declarative;if(justFinished){this.fire('finished',this);}return this;}/*
    Runner animation methods
    ========================
    Control how the animation plays
    */},{key:"time",value:function time(_time){if(_time==null){return this._time;}var dt=_time-this._time;this.step(dt);return this;}},{key:"timeline",value:function timeline(_timeline){// check explicitly for undefined so we can set the timeline to null
if(typeof _timeline==='undefined')return this._timeline;this._timeline=_timeline;return this;}},{key:"unschedule",value:function unschedule(){var timeline=this.timeline();timeline&&timeline.unschedule(this);return this;}// Run each initialise function in the runner if required
},{key:"_initialise",value:function _initialise(running){// If we aren't running, we shouldn't initialise when not declarative
if(!running&&!this._isDeclarative)return;// Loop through all of the initialisers
for(var i=0,len=this._queue.length;i<len;++i){// Get the current initialiser
var current=this._queue[i];// Determine whether we need to initialise
var needsIt=this._isDeclarative||!current.initialised&&running;running=!current.finished;// Call the initialiser if we need to
if(needsIt&&running){current.initialiser.call(this);current.initialised=true;}}}// Save a morpher to the morpher list so that we can retarget it later
},{key:"_rememberMorpher",value:function _rememberMorpher(method,morpher){this._history[method]={morpher:morpher,caller:this._queue[this._queue.length-1]};// We have to resume the timeline in case a controller
// is already done without being ever run
// This can happen when e.g. this is done:
//    anim = el.animate(new SVG.Spring)
// and later
//    anim.move(...)
if(this._isDeclarative){var _timeline2=this.timeline();_timeline2&&_timeline2.play();}}// Try to set the target for a morpher if the morpher exists, otherwise
// Run each run function for the position or dt given
},{key:"_run",value:function _run(positionOrDt){// Run all of the _queue directly
var allfinished=true;for(var i=0,len=this._queue.length;i<len;++i){// Get the current function to run
var current=this._queue[i];// Run the function if its not finished, we keep track of the finished
// flag for the sake of declarative _queue
var converged=current.runner.call(this,positionOrDt);current.finished=current.finished||converged===true;allfinished=allfinished&&current.finished;}// We report when all of the constructors are finished
return allfinished;}// do nothing and return false
},{key:"_tryRetarget",value:function _tryRetarget(method,target,extra){if(this._history[method]){// if the last method wasn't even initialised, throw it away
if(!this._history[method].caller.initialised){var index=this._queue.indexOf(this._history[method].caller);this._queue.splice(index,1);return false;}// for the case of transformations, we use the special retarget function
// which has access to the outer scope
if(this._history[method].caller.retarget){this._history[method].caller.retarget.call(this,target,extra);// for everything else a simple morpher change is sufficient
}else{this._history[method].morpher.to(target);}this._history[method].caller.finished=false;var _timeline3=this.timeline();_timeline3&&_timeline3.play();return true;}return false;}}],[{key:"sanitise",value:function sanitise(duration,delay,when){var _duration,_delay2;// Initialise the default parameters
var times=1;var swing=false;var wait=0;duration=(_duration=duration)!==null&&_duration!==void 0?_duration:timeline.duration;delay=(_delay2=delay)!==null&&_delay2!==void 0?_delay2:timeline.delay;when=when||'last';// If we have an object, unpack the values
if(_typeof$1(duration)==='object'&&!(duration instanceof Stepper)){var _duration$delay,_duration$when,_duration$times,_duration$wait,_duration$duration;delay=(_duration$delay=duration.delay)!==null&&_duration$delay!==void 0?_duration$delay:delay;when=(_duration$when=duration.when)!==null&&_duration$when!==void 0?_duration$when:when;swing=duration.swing||swing;times=(_duration$times=duration.times)!==null&&_duration$times!==void 0?_duration$times:times;wait=(_duration$wait=duration.wait)!==null&&_duration$wait!==void 0?_duration$wait:wait;duration=(_duration$duration=duration.duration)!==null&&_duration$duration!==void 0?_duration$duration:timeline.duration;}return{duration:duration,delay:delay,swing:swing,times:times,wait:wait,when:when};}}]);}(EventTarget);Runner.id=0;var FakeRunner=/*#__PURE__*/function(){function FakeRunner(){var transforms=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Matrix();var id=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var done=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;_classCallCheck$1(this,FakeRunner);this.transforms=transforms;this.id=id;this.done=done;}return _createClass$1(FakeRunner,[{key:"clearTransformsFromQueue",value:function clearTransformsFromQueue(){}}]);}();extend([Runner,FakeRunner],{mergeWith:function mergeWith(runner){return new FakeRunner(runner.transforms.lmultiply(this.transforms),runner.id);}});// FakeRunner.emptyRunner = new FakeRunner()
var lmultiply=function lmultiply(last,curr){return last.lmultiplyO(curr);};var getRunnerTransform=function getRunnerTransform(runner){return runner.transforms;};function mergeTransforms(){// Find the matrix to apply to the element and apply it
var runners=this._transformationRunners.runners;var netTransform=runners.map(getRunnerTransform).reduce(lmultiply,new Matrix());this.transform(netTransform);this._transformationRunners.merge();if(this._transformationRunners.length()===1){this._frameId=null;}}var RunnerArray=/*#__PURE__*/function(){function RunnerArray(){_classCallCheck$1(this,RunnerArray);this.runners=[];this.ids=[];}return _createClass$1(RunnerArray,[{key:"add",value:function add(runner){if(this.runners.includes(runner))return;var id=runner.id+1;this.runners.push(runner);this.ids.push(id);return this;}},{key:"clearBefore",value:function clearBefore(id){var deleteCnt=this.ids.indexOf(id+1)||1;this.ids.splice(0,deleteCnt,0);this.runners.splice(0,deleteCnt,new FakeRunner()).forEach(function(r){return r.clearTransformsFromQueue();});return this;}},{key:"edit",value:function edit(id,newRunner){var index=this.ids.indexOf(id+1);this.ids.splice(index,1,id+1);this.runners.splice(index,1,newRunner);return this;}},{key:"getByID",value:function getByID(id){return this.runners[this.ids.indexOf(id+1)];}},{key:"length",value:function length(){return this.ids.length;}},{key:"merge",value:function merge(){var lastRunner=null;for(var i=0;i<this.runners.length;++i){var runner=this.runners[i];var condition=lastRunner&&runner.done&&lastRunner.done&&(// don't merge runner when persisted on timeline
!runner._timeline||!runner._timeline._runnerIds.includes(runner.id))&&(!lastRunner._timeline||!lastRunner._timeline._runnerIds.includes(lastRunner.id));if(condition){// the +1 happens in the function
this.remove(runner.id);var newRunner=runner.mergeWith(lastRunner);this.edit(lastRunner.id,newRunner);lastRunner=newRunner;--i;}else{lastRunner=runner;}}return this;}},{key:"remove",value:function remove(id){var index=this.ids.indexOf(id+1);this.ids.splice(index,1);this.runners.splice(index,1);return this;}}]);}();registerMethods({Element:{animate:function animate(duration,delay,when){var o=Runner.sanitise(duration,delay,when);var timeline=this.timeline();return new Runner(o.duration).loop(o).element(this).timeline(timeline.play()).schedule(o.delay,o.when);},delay:function delay(by,when){return this.animate(0,by,when);},// this function searches for all runners on the element and deletes the ones
// which run before the current one. This is because absolute transformations
// overwrite anything anyway so there is no need to waste time computing
// other runners
_clearTransformRunnersBefore:function _clearTransformRunnersBefore(currentRunner){this._transformationRunners.clearBefore(currentRunner.id);},_currentTransform:function _currentTransform(current){return this._transformationRunners.runners// we need the equal sign here to make sure, that also transformations
// on the same runner which execute before the current transformation are
// taken into account
.filter(function(runner){return runner.id<=current.id;}).map(getRunnerTransform).reduce(lmultiply,new Matrix());},_addRunner:function _addRunner(runner){this._transformationRunners.add(runner);// Make sure that the runner merge is executed at the very end of
// all Animator functions. That is why we use immediate here to execute
// the merge right after all frames are run
Animator.cancelImmediate(this._frameId);this._frameId=Animator.immediate(mergeTransforms.bind(this));},_prepareRunner:function _prepareRunner(){if(this._frameId==null){this._transformationRunners=new RunnerArray().add(new FakeRunner(new Matrix(this)));}}}});// Will output the elements from array A that are not in the array B
var difference=function difference(a,b){return a.filter(function(x){return!b.includes(x);});};extend(Runner,{attr:function attr(a,v){return this.styleAttr('attr',a,v);},// Add animatable styles
css:function css(s,v){return this.styleAttr('css',s,v);},styleAttr:function styleAttr(type,nameOrAttrs,val){if(typeof nameOrAttrs==='string'){return this.styleAttr(type,_defineProperty({},nameOrAttrs,val));}var attrs=nameOrAttrs;if(this._tryRetarget(type,attrs))return this;var morpher=new Morphable(this._stepper).to(attrs);var keys=Object.keys(attrs);this.queue(function(){morpher=morpher.from(this.element()[type](keys));},function(pos){this.element()[type](morpher.at(pos).valueOf());return morpher.done();},function(newToAttrs){// Check if any new keys were added
var newKeys=Object.keys(newToAttrs);var differences=difference(newKeys,keys);// If their are new keys, initialize them and add them to morpher
if(differences.length){// Get the values
var addedFromAttrs=this.element()[type](differences);// Get the already initialized values
var oldFromAttrs=new ObjectBag(morpher.from()).valueOf();// Merge old and new
Object.assign(oldFromAttrs,addedFromAttrs);morpher.from(oldFromAttrs);}// Get the object from the morpher
var oldToAttrs=new ObjectBag(morpher.to()).valueOf();// Merge in new attributes
Object.assign(oldToAttrs,newToAttrs);// Change morpher target
morpher.to(oldToAttrs);// Make sure that we save the work we did so we don't need it to do again
keys=newKeys;attrs=newToAttrs;});this._rememberMorpher(type,morpher);return this;},zoom:function zoom(level,point){if(this._tryRetarget('zoom',level,point))return this;var morpher=new Morphable(this._stepper).to(new SVGNumber(level));this.queue(function(){morpher=morpher.from(this.element().zoom());},function(pos){this.element().zoom(morpher.at(pos),point);return morpher.done();},function(newLevel,newPoint){point=newPoint;morpher.to(newLevel);});this._rememberMorpher('zoom',morpher);return this;},/**
   ** absolute transformations
   **///
// M v -----|-----(D M v = F v)------|----->  T v
//
// 1. define the final state (T) and decompose it (once)
//    t = [tx, ty, the, lam, sy, sx]
// 2. on every frame: pull the current state of all previous transforms
//    (M - m can change)
//   and then write this as m = [tx0, ty0, the0, lam0, sy0, sx0]
// 3. Find the interpolated matrix F(pos) = m + pos * (t - m)
//   - Note F(0) = M
//   - Note F(1) = T
// 4. Now you get the delta matrix as a result: D = F * inv(M)
transform:function transform(transforms,relative,affine){// If we have a declarative function, we should retarget it if possible
relative=transforms.relative||relative;if(this._isDeclarative&&!relative&&this._tryRetarget('transform',transforms)){return this;}// Parse the parameters
var isMatrix=Matrix.isMatrixLike(transforms);affine=transforms.affine!=null?transforms.affine:affine!=null?affine:!isMatrix;// Create a morpher and set its type
var morpher=new Morphable(this._stepper).type(affine?TransformBag:Matrix);var origin;var element;var current;var currentAngle;var startTransform;function setup(){// make sure element and origin is defined
element=element||this.element();origin=origin||getOrigin(transforms,element);startTransform=new Matrix(relative?undefined:element);// add the runner to the element so it can merge transformations
element._addRunner(this);// Deactivate all transforms that have run so far if we are absolute
if(!relative){element._clearTransformRunnersBefore(this);}}function run(pos){// clear all other transforms before this in case something is saved
// on this runner. We are absolute. We dont need these!
if(!relative)this.clearTransform();var _Point$transform=new Point(origin).transform(element._currentTransform(this)),x=_Point$transform.x,y=_Point$transform.y;var target=new Matrix(_objectSpread$1(_objectSpread$1({},transforms),{},{origin:[x,y]}));var start=this._isDeclarative&&current?current:startTransform;if(affine){target=target.decompose(x,y);start=start.decompose(x,y);// Get the current and target angle as it was set
var rTarget=target.rotate;var rCurrent=start.rotate;// Figure out the shortest path to rotate directly
var possibilities=[rTarget-360,rTarget,rTarget+360];var distances=possibilities.map(function(a){return Math.abs(a-rCurrent);});var shortest=Math.min.apply(Math,_toConsumableArray(distances));var index=distances.indexOf(shortest);target.rotate=possibilities[index];}if(relative){// we have to be careful here not to overwrite the rotation
// with the rotate method of Matrix
if(!isMatrix){target.rotate=transforms.rotate||0;}if(this._isDeclarative&&currentAngle){start.rotate=currentAngle;}}morpher.from(start);morpher.to(target);var affineParameters=morpher.at(pos);currentAngle=affineParameters.rotate;current=new Matrix(affineParameters);this.addTransform(current);element._addRunner(this);return morpher.done();}function retarget(newTransforms){// only get a new origin if it changed since the last call
if((newTransforms.origin||'center').toString()!==(transforms.origin||'center').toString()){origin=getOrigin(newTransforms,element);}// overwrite the old transformations with the new ones
transforms=_objectSpread$1(_objectSpread$1({},newTransforms),{},{origin:origin});}this.queue(setup,run,retarget,true);this._isDeclarative&&this._rememberMorpher('transform',morpher);return this;},// Animatable x-axis
x:function x(_x){return this._queueNumber('x',_x);},// Animatable y-axis
y:function y(_y){return this._queueNumber('y',_y);},ax:function ax(x){return this._queueNumber('ax',x);},ay:function ay(y){return this._queueNumber('ay',y);},dx:function dx(){var x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return this._queueNumberDelta('x',x);},dy:function dy(){var y=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return this._queueNumberDelta('y',y);},dmove:function dmove(x,y){return this.dx(x).dy(y);},_queueNumberDelta:function _queueNumberDelta(method,to){to=new SVGNumber(to);// Try to change the target if we have this method already registered
if(this._tryRetarget(method,to))return this;// Make a morpher and queue the animation
var morpher=new Morphable(this._stepper).to(to);var from=null;this.queue(function(){from=this.element()[method]();morpher.from(from);morpher.to(from+to);},function(pos){this.element()[method](morpher.at(pos));return morpher.done();},function(newTo){morpher.to(from+new SVGNumber(newTo));});// Register the morpher so that if it is changed again, we can retarget it
this._rememberMorpher(method,morpher);return this;},_queueObject:function _queueObject(method,to){// Try to change the target if we have this method already registered
if(this._tryRetarget(method,to))return this;// Make a morpher and queue the animation
var morpher=new Morphable(this._stepper).to(to);this.queue(function(){morpher.from(this.element()[method]());},function(pos){this.element()[method](morpher.at(pos));return morpher.done();});// Register the morpher so that if it is changed again, we can retarget it
this._rememberMorpher(method,morpher);return this;},_queueNumber:function _queueNumber(method,value){return this._queueObject(method,new SVGNumber(value));},// Animatable center x-axis
cx:function cx(x){return this._queueNumber('cx',x);},// Animatable center y-axis
cy:function cy(y){return this._queueNumber('cy',y);},// Add animatable move
move:function move(x,y){return this.x(x).y(y);},amove:function amove(x,y){return this.ax(x).ay(y);},// Add animatable center
center:function center(x,y){return this.cx(x).cy(y);},// Add animatable size
size:function size(width,height){// animate bbox based size for all other elements
var box;if(!width||!height){box=this._element.bbox();}if(!width){width=box.width/box.height*height;}if(!height){height=box.height/box.width*width;}return this.width(width).height(height);},// Add animatable width
width:function width(_width){return this._queueNumber('width',_width);},// Add animatable height
height:function height(_height){return this._queueNumber('height',_height);},// Add animatable plot
plot:function plot(a,b,c,d){// Lines can be plotted with 4 arguments
if(arguments.length===4){return this.plot([a,b,c,d]);}if(this._tryRetarget('plot',a))return this;var morpher=new Morphable(this._stepper).type(this._element.MorphArray).to(a);this.queue(function(){morpher.from(this._element.array());},function(pos){this._element.plot(morpher.at(pos));return morpher.done();});this._rememberMorpher('plot',morpher);return this;},// Add leading method
leading:function leading(value){return this._queueNumber('leading',value);},// Add animatable viewbox
viewbox:function viewbox(x,y,width,height){return this._queueObject('viewbox',new Box(x,y,width,height));},update:function update(o){if(_typeof$1(o)!=='object'){return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});}if(o.opacity!=null)this.attr('stop-opacity',o.opacity);if(o.color!=null)this.attr('stop-color',o.color);if(o.offset!=null)this.attr('offset',o.offset);return this;}});extend(Runner,{rx:rx,ry:ry,from:from,to:to});register(Runner,'Runner');function _callSuper$d(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$d()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$d=function _isNativeReflectConstruct(){return!!t;})();}var Svg=/*#__PURE__*/function(_Container){function Svg(node){var _this;var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Svg);_this=_callSuper$d(this,Svg,[nodeOrNew('svg',node),attrs]);_this.namespace();return _this;}// Creates and returns defs element
_inherits(Svg,_Container);return _createClass$1(Svg,[{key:"defs",value:function defs(){if(!this.isRoot())return this.root().defs();return adopt(this.node.querySelector('defs'))||this.put(new Defs());}},{key:"isRoot",value:function isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof globals.window.SVGElement)&&this.node.parentNode.nodeName!=='#document-fragment';}// Add namespaces
},{key:"namespace",value:function namespace(){if(!this.isRoot())return this.root().namespace();return this.attr({xmlns:svg,version:'1.1'}).attr('xmlns:xlink',xlink,xmlns);}},{key:"removeNamespace",value:function removeNamespace(){return this.attr({xmlns:null,version:null}).attr('xmlns:xlink',null,xmlns).attr('xmlns:svgjs',null,xmlns);}// Check if this is a root svg
// If not, call root() from this element
},{key:"root",value:function root(){if(this.isRoot())return this;return _get(_getPrototypeOf(Svg.prototype),"root",this).call(this);}}]);}(Container);registerMethods({Container:{// Create nested svg document
nested:wrapWithAttrCheck(function(){return this.put(new Svg());})}});register(Svg,'Svg',true);function _callSuper$c(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$c()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$c=function _isNativeReflectConstruct(){return!!t;})();}var _Symbol=/*#__PURE__*/function(_Container){// Initialize node
function _Symbol(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,_Symbol);return _callSuper$c(this,_Symbol,[nodeOrNew('symbol',node),attrs]);}_inherits(_Symbol,_Container);return _createClass$1(_Symbol);}(Container);registerMethods({Container:{symbol:wrapWithAttrCheck(function(){return this.put(new _Symbol());})}});register(_Symbol,'Symbol');// Create plain text node
function plain(text){// clear if build mode is disabled
if(this._build===false){this.clear();}// create text node
this.node.appendChild(globals.document.createTextNode(text));return this;}// Get length of text element
function length(){return this.node.getComputedTextLength();}// Move over x-axis
// Text is moved by its bounding box
// text-anchor does NOT matter
function x$1(x){var box=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.bbox();if(x==null){return box.x;}return this.attr('x',this.attr('x')+x-box.x);}// Move over y-axis
function y$1(y){var box=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.bbox();if(y==null){return box.y;}return this.attr('y',this.attr('y')+y-box.y);}function move$1(x,y){var box=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.bbox();return this.x(x,box).y(y,box);}// Move center over x-axis
function cx(x){var box=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.bbox();if(x==null){return box.cx;}return this.attr('x',this.attr('x')+x-box.cx);}// Move center over y-axis
function cy(y){var box=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.bbox();if(y==null){return box.cy;}return this.attr('y',this.attr('y')+y-box.cy);}function center(x,y){var box=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.bbox();return this.cx(x,box).cy(y,box);}function ax(x){return this.attr('x',x);}function ay(y){return this.attr('y',y);}function amove(x,y){return this.ax(x).ay(y);}// Enable / disable build mode
function build(build){this._build=!!build;return this;}var textable=/*#__PURE__*/Object.freeze({__proto__:null,amove:amove,ax:ax,ay:ay,build:build,center:center,cx:cx,cy:cy,length:length,move:move$1,plain:plain,x:x$1,y:y$1});function _callSuper$b(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$b()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$b=function _isNativeReflectConstruct(){return!!t;})();}var Text=/*#__PURE__*/function(_Shape){// Initialize node
function Text(node){var _this$dom$leading;var _this;var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Text);_this=_callSuper$b(this,Text,[nodeOrNew('text',node),attrs]);_this.dom.leading=(_this$dom$leading=_this.dom.leading)!==null&&_this$dom$leading!==void 0?_this$dom$leading:new SVGNumber(1.3);// store leading value for rebuilding
_this._rebuild=true;// enable automatic updating of dy values
_this._build=false;// disable build mode for adding multiple lines
return _this;}// Set / get leading
_inherits(Text,_Shape);return _createClass$1(Text,[{key:"leading",value:function leading(value){// act as getter
if(value==null){return this.dom.leading;}// act as setter
this.dom.leading=new SVGNumber(value);return this.rebuild();}// Rebuild appearance type
},{key:"rebuild",value:function rebuild(_rebuild){// store new rebuild flag if given
if(typeof _rebuild==='boolean'){this._rebuild=_rebuild;}// define position of all lines
if(this._rebuild){var self=this;var blankLineOffset=0;var leading=this.dom.leading;this.each(function(i){if(isDescriptive(this.node))return;var fontSize=globals.window.getComputedStyle(this.node).getPropertyValue('font-size');var dy=leading*new SVGNumber(fontSize);if(this.dom.newLined){this.attr('x',self.attr('x'));if(this.text()==='\n'){blankLineOffset+=dy;}else{this.attr('dy',i?dy+blankLineOffset:0);blankLineOffset=0;}}});this.fire('rebuild');}return this;}// overwrite method from parent to set data properly
},{key:"setData",value:function setData(o){this.dom=o;this.dom.leading=new SVGNumber(o.leading||1.3);return this;}},{key:"writeDataToDom",value:function writeDataToDom$1(){writeDataToDom(this,this.dom,{leading:1.3});return this;}// Set the text content
},{key:"text",value:function text(_text){// act as getter
if(_text===undefined){var children=this.node.childNodes;var firstLine=0;_text='';for(var i=0,len=children.length;i<len;++i){// skip textPaths - they are no lines
if(children[i].nodeName==='textPath'||isDescriptive(children[i])){if(i===0)firstLine=i+1;continue;}// add newline if its not the first child and newLined is set to true
if(i!==firstLine&&children[i].nodeType!==3&&adopt(children[i]).dom.newLined===true){_text+='\n';}// add content of this node
_text+=children[i].textContent;}return _text;}// remove existing content
this.clear().build(true);if(typeof _text==='function'){// call block
_text.call(this,this);}else{// store text and make sure text is not blank
_text=(_text+'').split('\n');// build new lines
for(var j=0,jl=_text.length;j<jl;j++){this.newLine(_text[j]);}}// disable build mode and rebuild lines
return this.build(false).rebuild();}}]);}(Shape);extend(Text,textable);registerMethods({Container:{// Create text element
text:wrapWithAttrCheck(function(){var text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return this.put(new Text()).text(text);}),// Create plain text element
plain:wrapWithAttrCheck(function(){var text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return this.put(new Text()).plain(text);})}});register(Text,'Text');function _callSuper$a(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$a()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$a=function _isNativeReflectConstruct(){return!!t;})();}var Tspan=/*#__PURE__*/function(_Shape){// Initialize node
function Tspan(node){var _this;var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Tspan);_this=_callSuper$a(this,Tspan,[nodeOrNew('tspan',node),attrs]);_this._build=false;// disable build mode for adding multiple lines
return _this;}// Shortcut dx
_inherits(Tspan,_Shape);return _createClass$1(Tspan,[{key:"dx",value:function dx(_dx){return this.attr('dx',_dx);}// Shortcut dy
},{key:"dy",value:function dy(_dy){return this.attr('dy',_dy);}// Create new line
},{key:"newLine",value:function newLine(){// mark new line
this.dom.newLined=true;// fetch parent
var text=this.parent();// early return in case we are not in a text element
if(!(text instanceof Text)){return this;}var i=text.index(this);var fontSize=globals.window.getComputedStyle(this.node).getPropertyValue('font-size');var dy=text.dom.leading*new SVGNumber(fontSize);// apply new position
return this.dy(i?dy:0).attr('x',text.x());}// Set text content
},{key:"text",value:function text(_text){if(_text==null)return this.node.textContent+(this.dom.newLined?'\n':'');if(typeof _text==='function'){this.clear().build(true);_text.call(this,this);this.build(false);}else{this.plain(_text);}return this;}}]);}(Shape);extend(Tspan,textable);registerMethods({Tspan:{tspan:wrapWithAttrCheck(function(){var text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var tspan=new Tspan();// clear if build mode is disabled
if(!this._build){this.clear();}// add new tspan
return this.put(tspan).text(text);})},Text:{newLine:function newLine(){var text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return this.tspan(text).newLine();}}});register(Tspan,'Tspan');function _callSuper$9(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$9()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$9=function _isNativeReflectConstruct(){return!!t;})();}var Circle=/*#__PURE__*/function(_Shape){function Circle(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Circle);return _callSuper$9(this,Circle,[nodeOrNew('circle',node),attrs]);}_inherits(Circle,_Shape);return _createClass$1(Circle,[{key:"radius",value:function radius(r){return this.attr('r',r);}// Radius x value
},{key:"rx",value:function rx(_rx){return this.attr('r',_rx);}// Alias radius x value
},{key:"ry",value:function ry(_ry){return this.rx(_ry);}},{key:"size",value:function size(_size){return this.radius(new SVGNumber(_size).divide(2));}}]);}(Shape);extend(Circle,{x:x$3,y:y$3,cx:cx$1,cy:cy$1,width:width$2,height:height$2});registerMethods({Container:{// Create circle element
circle:wrapWithAttrCheck(function(){var size=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return this.put(new Circle()).size(size).move(0,0);})}});register(Circle,'Circle');function _callSuper$8(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$8()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$8=function _isNativeReflectConstruct(){return!!t;})();}var ClipPath=/*#__PURE__*/function(_Container){function ClipPath(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,ClipPath);return _callSuper$8(this,ClipPath,[nodeOrNew('clipPath',node),attrs]);}// Unclip all clipped elements and remove itself
_inherits(ClipPath,_Container);return _createClass$1(ClipPath,[{key:"remove",value:function remove(){// unclip all targets
this.targets().forEach(function(el){el.unclip();});// remove clipPath from parent
return _get(_getPrototypeOf(ClipPath.prototype),"remove",this).call(this);}},{key:"targets",value:function targets(){return baseFind('svg [clip-path*='+this.id()+']');}}]);}(Container);registerMethods({Container:{// Create clipping element
clip:wrapWithAttrCheck(function(){return this.defs().put(new ClipPath());})},Element:{// Distribute clipPath to svg element
clipper:function clipper(){return this.reference('clip-path');},clipWith:function clipWith(element){// use given clip or create a new one
var clipper=element instanceof ClipPath?element:this.parent().clip().add(element);// apply mask
return this.attr('clip-path','url(#'+clipper.id()+')');},// Unclip element
unclip:function unclip(){return this.attr('clip-path',null);}}});register(ClipPath,'ClipPath');function _callSuper$7(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$7()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$7=function _isNativeReflectConstruct(){return!!t;})();}var ForeignObject=/*#__PURE__*/function(_Element){function ForeignObject(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,ForeignObject);return _callSuper$7(this,ForeignObject,[nodeOrNew('foreignObject',node),attrs]);}_inherits(ForeignObject,_Element);return _createClass$1(ForeignObject);}(Element);registerMethods({Container:{foreignObject:wrapWithAttrCheck(function(width,height){return this.put(new ForeignObject()).size(width,height);})}});register(ForeignObject,'ForeignObject');function dmove(dx,dy){this.children().forEach(function(child){var bbox;// We have to wrap this for elements that dont have a bbox
// e.g. title and other descriptive elements
try{// Get the childs bbox
// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1905039
// Because bbox for nested svgs returns the contents bbox in the coordinate space of the svg itself (weird!), we cant use bbox for svgs
// Therefore we have to use getBoundingClientRect. But THAT is broken (as explained in the bug).
// Funnily enough the broken behavior would work for us but that breaks it in chrome
// So we have to replicate the broken behavior of FF by just reading the attributes of the svg itself
bbox=child.node instanceof getWindow().SVGSVGElement?new Box(child.attr(['x','y','width','height'])):child.bbox();}catch(e){return;}// Get childs matrix
var m=new Matrix(child);// Translate childs matrix by amount and
// transform it back into parents space
var matrix=m.translate(dx,dy).transform(m.inverse());// Calculate new x and y from old box
var p=new Point(bbox.x,bbox.y).transform(matrix);// Move element
child.move(p.x,p.y);});return this;}function dx(dx){return this.dmove(dx,0);}function dy(dy){return this.dmove(0,dy);}function height(height){var box=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.bbox();if(height==null)return box.height;return this.size(box.width,height,box);}function move(){var x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var box=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.bbox();var dx=x-box.x;var dy=y-box.y;return this.dmove(dx,dy);}function size(width,height){var box=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.bbox();var p=proportionalSize(this,width,height,box);var scaleX=p.width/box.width;var scaleY=p.height/box.height;this.children().forEach(function(child){var o=new Point(box).transform(new Matrix(child).inverse());child.scale(scaleX,scaleY,o.x,o.y);});return this;}function width(width){var box=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.bbox();if(width==null)return box.width;return this.size(width,box.height,box);}function x(x){var box=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.bbox();if(x==null)return box.x;return this.move(x,box.y,box);}function y(y){var box=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.bbox();if(y==null)return box.y;return this.move(box.x,y,box);}var containerGeometry=/*#__PURE__*/Object.freeze({__proto__:null,dmove:dmove,dx:dx,dy:dy,height:height,move:move,size:size,width:width,x:x,y:y});function _callSuper$6(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$6()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$6=function _isNativeReflectConstruct(){return!!t;})();}var G=/*#__PURE__*/function(_Container){function G(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,G);return _callSuper$6(this,G,[nodeOrNew('g',node),attrs]);}_inherits(G,_Container);return _createClass$1(G);}(Container);extend(G,containerGeometry);registerMethods({Container:{// Create a group element
group:wrapWithAttrCheck(function(){return this.put(new G());})}});register(G,'G');function _callSuper$5(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$5()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$5=function _isNativeReflectConstruct(){return!!t;})();}var A=/*#__PURE__*/function(_Container){function A(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,A);return _callSuper$5(this,A,[nodeOrNew('a',node),attrs]);}// Link target attribute
_inherits(A,_Container);return _createClass$1(A,[{key:"target",value:function target(_target){return this.attr('target',_target);}// Link url
},{key:"to",value:function to(url){return this.attr('href',url,xlink);}}]);}(Container);extend(A,containerGeometry);registerMethods({Container:{// Create a hyperlink element
link:wrapWithAttrCheck(function(url){return this.put(new A()).to(url);})},Element:{unlink:function unlink(){var link=this.linker();if(!link)return this;var parent=link.parent();if(!parent){return this.remove();}var index=parent.index(link);parent.add(this,index);link.remove();return this;},linkTo:function linkTo(url){// reuse old link if possible
var link=this.linker();if(!link){link=new A();this.wrap(link);}if(typeof url==='function'){url.call(link,link);}else{link.to(url);}return this;},linker:function linker(){var link=this.parent();if(link&&link.node.nodeName.toLowerCase()==='a'){return link;}return null;}}});register(A,'A');function _callSuper$4(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$4()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$4=function _isNativeReflectConstruct(){return!!t;})();}var Mask=/*#__PURE__*/function(_Container){// Initialize node
function Mask(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Mask);return _callSuper$4(this,Mask,[nodeOrNew('mask',node),attrs]);}// Unmask all masked elements and remove itself
_inherits(Mask,_Container);return _createClass$1(Mask,[{key:"remove",value:function remove(){// unmask all targets
this.targets().forEach(function(el){el.unmask();});// remove mask from parent
return _get(_getPrototypeOf(Mask.prototype),"remove",this).call(this);}},{key:"targets",value:function targets(){return baseFind('svg [mask*='+this.id()+']');}}]);}(Container);registerMethods({Container:{mask:wrapWithAttrCheck(function(){return this.defs().put(new Mask());})},Element:{// Distribute mask to svg element
masker:function masker(){return this.reference('mask');},maskWith:function maskWith(element){// use given mask or create a new one
var masker=element instanceof Mask?element:this.parent().mask().add(element);// apply mask
return this.attr('mask','url(#'+masker.id()+')');},// Unmask element
unmask:function unmask(){return this.attr('mask',null);}}});register(Mask,'Mask');function _callSuper$3(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$3()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$3=function _isNativeReflectConstruct(){return!!t;})();}var Stop=/*#__PURE__*/function(_Element){function Stop(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Stop);return _callSuper$3(this,Stop,[nodeOrNew('stop',node),attrs]);}// add color stops
_inherits(Stop,_Element);return _createClass$1(Stop,[{key:"update",value:function update(o){if(typeof o==='number'||o instanceof SVGNumber){o={offset:arguments[0],color:arguments[1],opacity:arguments[2]};}// set attributes
if(o.opacity!=null)this.attr('stop-opacity',o.opacity);if(o.color!=null)this.attr('stop-color',o.color);if(o.offset!=null)this.attr('offset',new SVGNumber(o.offset));return this;}}]);}(Element);registerMethods({Gradient:{// Add a color stop
stop:function stop(offset,color,opacity){return this.put(new Stop()).update(offset,color,opacity);}}});register(Stop,'Stop');function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _callSuper$2(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$2()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$2=function _isNativeReflectConstruct(){return!!t;})();}function cssRule(selector,rule){if(!selector)return'';if(!rule)return selector;var ret=selector+'{';for(var i in rule){ret+=unCamelCase(i)+':'+rule[i]+';';}ret+='}';return ret;}var Style=/*#__PURE__*/function(_Element){function Style(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Style);return _callSuper$2(this,Style,[nodeOrNew('style',node),attrs]);}_inherits(Style,_Element);return _createClass$1(Style,[{key:"addText",value:function addText(){var w=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';this.node.textContent+=w;return this;}},{key:"font",value:function font(name,src){var params=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return this.rule('@font-face',_objectSpread({fontFamily:name,src:src},params));}},{key:"rule",value:function rule(selector,obj){return this.addText(cssRule(selector,obj));}}]);}(Element);registerMethods('Dom',{style:function style(selector,obj){return this.put(new Style()).rule(selector,obj);},fontface:function fontface(name,src,params){return this.put(new Style()).font(name,src,params);}});register(Style,'Style');function _callSuper$1(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct$1()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct$1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct$1=function _isNativeReflectConstruct(){return!!t;})();}var TextPath=/*#__PURE__*/function(_Text){// Initialize node
function TextPath(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,TextPath);return _callSuper$1(this,TextPath,[nodeOrNew('textPath',node),attrs]);}// return the array of the path track element
_inherits(TextPath,_Text);return _createClass$1(TextPath,[{key:"array",value:function array(){var track=this.track();return track?track.array():null;}// Plot path if any
},{key:"plot",value:function plot(d){var track=this.track();var pathArray=null;if(track){pathArray=track.plot(d);}return d==null?pathArray:this;}// Get the path element
},{key:"track",value:function track(){return this.reference('href');}}]);}(Text);registerMethods({Container:{textPath:wrapWithAttrCheck(function(text,path){// Convert text to instance if needed
if(!(text instanceof Text)){text=this.text(text);}return text.path(path);})},Text:{// Create path for text to run on
path:wrapWithAttrCheck(function(track){var importNodes=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var textPath=new TextPath();// if track is a path, reuse it
if(!(track instanceof Path)){// create path element
track=this.defs().path(track);}// link textPath to path and add content
textPath.attr('href','#'+track,xlink);// Transplant all nodes from text to textPath
var node;if(importNodes){while(node=this.node.firstChild){textPath.node.appendChild(node);}}// add textPath element as child node and return textPath
return this.put(textPath);}),// Get the textPath children
textPath:function textPath(){return this.findOne('textPath');}},Path:{// creates a textPath from this path
text:wrapWithAttrCheck(function(text){// Convert text to instance if needed
if(!(text instanceof Text)){text=new Text().addTo(this.parent()).text(text);}// Create textPath from text and path and return
return text.path(this);}),targets:function targets(){var _this=this;return baseFind('svg textPath').filter(function(node){return(node.attr('href')||'').includes(_this.id());});// Does not work in IE11. Use when IE support is dropped
// return baseFind('svg textPath[*|href*=' + this.id() + ']')
}}});TextPath.prototype.MorphArray=PathArray;register(TextPath,'TextPath');function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var Use=/*#__PURE__*/function(_Shape){function Use(node){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:node;_classCallCheck$1(this,Use);return _callSuper(this,Use,[nodeOrNew('use',node),attrs]);}// Use element as a reference
_inherits(Use,_Shape);return _createClass$1(Use,[{key:"use",value:function use(element,file){// Set lined element
return this.attr('href',(file||'')+'#'+element,xlink);}}]);}(Shape);registerMethods({Container:{// Create a use element
use:wrapWithAttrCheck(function(element,file){return this.put(new Use()).use(element,file);})}});register(Use,'Use');/* Optional Modules */var SVG=makeInstance;extend([Svg,_Symbol,Image,Pattern,Marker],getMethodsFor('viewbox'));extend([Line,Polyline,Polygon,Path],getMethodsFor('marker'));extend(Text,getMethodsFor('Text'));extend(Path,getMethodsFor('Path'));extend(Defs,getMethodsFor('Defs'));extend([Text,Tspan],getMethodsFor('Tspan'));extend([Rect,Ellipse,Gradient,Runner],getMethodsFor('radius'));extend(EventTarget,getMethodsFor('EventTarget'));extend(Dom,getMethodsFor('Dom'));extend(Element,getMethodsFor('Element'));extend(Shape,getMethodsFor('Shape'));extend([Container,Fragment],getMethodsFor('Container'));extend(Gradient,getMethodsFor('Gradient'));extend(Runner,getMethodsFor('Runner'));List.extend(getMethodNames());registerMorphableType([SVGNumber,Color,Box,Matrix,SVGArray,PointArray,PathArray,Point]);makeMorphable();var FileSaver_min={exports:{}};(function(module,exports){(function(a,b){b();})(commonjsGlobal,function(){function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=_typeof$1(b)&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a;}function c(a,b,c){var d=new XMLHttpRequest();d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c);},d.onerror=function(){console.error("could not download file");},d.send();}function d(a){var b=new XMLHttpRequest();b.open("HEAD",a,!1);try{b.send();}catch(a){}return 200<=b.status&&299>=b.status;}function e(a){try{a.dispatchEvent(new MouseEvent("click"));}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b);}}var f="object"==(typeof window==="undefined"?"undefined":_typeof$1(window))&&window.window===window?window:"object"==(typeof self==="undefined"?"undefined":_typeof$1(self))&&self.self===self?self:"object"==_typeof$1(commonjsGlobal)&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=(typeof window==="undefined"?"undefined":_typeof$1(window))||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href);},4E4),setTimeout(function(){e(j);},0));}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i);});}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader();k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null;},k.readAsDataURL(b);}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m);},4E4);}});f.saveAs=g.saveAs=g,module.exports=g;});})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;var FileSaver=/*@__PURE__*/getDefaultExportFromCjs(FileSaver_minExports);/**
 * Formatter which is used for translation.
 * This will be replaced which is used in the runtime.
 * @param {object} messageData - format-message object
 * @returns {string} - message for the locale
 */var formatMessage=function formatMessage(messageData){return messageData.default;};/**
 * Setup format-message for this extension.
 */var setupTranslations=function setupTranslations(){var localeSetup=formatMessage.setup();if(localeSetup&&localeSetup.translations[localeSetup.locale]){Object.assign(localeSetup.translations[localeSetup.locale],translations[localeSetup.locale]);}};var EXTENSION_ID='xcxVPen';/**
 * URL to get this extension as a module.
 * When it was loaded as a module, 'extensionURL' will be replaced a URL which is retrieved from.
 * @type {string}
 */var extensionURL='https://yokobond.github.io/xcx-vpen/dist/xcxVPen.mjs';/**
 * Scratch 3.0 blocks for example of Xcratch.
 */var VPenBlocks=/*#__PURE__*/function(){/**
   * Construct a set of blocks for vector pen.
   * @param {Runtime} runtime - the Scratch 3.0 runtime.
   */function VPenBlocks(runtime){_classCallCheck$1(this,VPenBlocks);/**
     * The Scratch 3.0 runtime.
     * @type {Runtime}
     */this.runtime=runtime;if(runtime.formatMessage){// Replace 'formatMessage' to a formatter which is used in the runtime.
formatMessage=runtime.formatMessage;}/**
     * The pen states for each target.
     * @type {object.<string, object>}
     */this._penStates={};var _this$runtime$rendere=this.runtime.renderer.getNativeSize(),_this$runtime$rendere2=_slicedToArray(_this$runtime$rendere,2),stageWidth=_this$runtime$rendere2[0],stageHeight=_this$runtime$rendere2[1];this._updateStageSize(stageWidth,stageHeight);/**
     * The step per mm.
     * @type {number}
     */this.stepPerMM=2;// 180mm for stage height
// Bind event handlers.
this.onTargetMoved=this.onTargetMoved.bind(this);// Register block to the runtime.
runtime.on('targetWasCreated',this.onTargetCreated.bind(this));runtime.on('targetWasRemoved',this.onTargetWillExit.bind(this));runtime.on('RUNTIME_DISPOSED',this.onRuntimeDisposed.bind(this));}/**
   * Update the stage size.
   * @param {number} stageWidth - the width of the stage.
   * @param {number} stageHeight - the height of the stage.
   */return _createClass$1(VPenBlocks,[{key:"_updateStageSize",value:function _updateStageSize(stageWidth,stageHeight){/**
       * The width of the stage.
       * @type {number}
       */this.stageWidth=stageWidth;/**
       * The height of the stage.
       * @type {number}
       */this.stageHeight=stageHeight;}/**
     * Create a new SVG drawing for the pen layer.
     * @returns {SVG} - the new SVG drawing.
     */},{key:"_createDrawingSVG",value:function _createDrawingSVG(){var stageWidth=this.stageWidth;var stageHeight=this.stageHeight;var dummy=document.implementation.createHTMLDocument();return SVG().addTo(dummy.body).size("".concat(stageWidth),"".concat(stageHeight)).viewbox(0,0,stageWidth,stageHeight);}/**
     * Retrieve the ID of the renderer "Skin" corresponding to the pen layer. If
     * the pen Skin doesn't yet exist, create it.
     * @param {Target} target - the target to query.
     * @returns {int} the Skin ID of the pen layer, or -1 on failure.
     * @private
     */},{key:"_getSkinIDFor",value:function _getSkinIDFor(target){var penState=this._getPenState(target);var renderer=this.runtime.renderer;if(penState.skinID<0&&renderer){var drawing=penState.drawing;penState.skinID=this.runtime.renderer.createSVGSkin(this.convertSVGForPenLayer(drawing.svg()));penState.drawableID=this.runtime.renderer.createDrawable(StageLayering$2.PEN_LAYER);renderer.updateDrawableSkinId(penState.drawableID,penState.skinID);}return penState.skinID;}/**
     * Get the state of the pen for the target if it exists.
     * If the state doesn't exist, return null.
     * @param {Target} target - the target to query.
     * @return {object?} - the pen state or null.
     */},{key:"_penStateFor",value:function _penStateFor(target){var targetID=target.id;return this._penStates[targetID];}/**
     * Get the state of the pen for the target.
     * Initializes the pen state if it doesn't exist.
     * @param {Target} target - the target to query.
     * @return {object} - the pen state.
     * @property {int} skinID - the ID of the renderer Skin corresponding to the pen layer.
     * @property {Path} penPath - the current pen line.
     * @property {Container} drawing - the container for the pen lines.
     * @property {object} penAttributes - the pen attributes.
     * @property {object} penAttributes.color3b - the pen color[RGB 0-255].
     * @property {number} penAttributes.diameter - the pen diameter[mm].
     * @property {string} penAttributes.lineShape - the shape of the line.
     * @property {object} penAttributes.fillColor3b - the fill color[RGB 0-255].
     * @property {number} penAttributes.fillOpacity - the fill opacity.
     * @property {object} referencePoint - the reference point for the plotter pen.
     * @private
     */},{key:"_getPenState",value:function _getPenState(target){var penState=this._penStateFor(target);if(!penState){penState=Clone$2.simple(VPenBlocks.DEFAULT_PEN_STATE);this._penStates[target.id]=penState;}if(!penState.drawing){penState.drawing=this._createDrawingSVG();}return penState;}/**
     * Clear the pen layer for the target.
     * @param {Target} target - the target to clear the pen layer for.
     */},{key:"_clearForTarget",value:function _clearForTarget(target){var penState=this._penStateFor(target);if(!penState||!penState.drawing){return;}penState.drawing.remove();penState.drawing=null;if(penState.penPath){this._startPenPath(target);}this._updatePenSkinFor(target);}/**
     * Update the pen skin for the target.
     * @param {Target} target - the target to update the pen skin for.
     */},{key:"_updatePenSkinFor",value:function _updatePenSkinFor(target){var penSkinId=this._getSkinIDFor(target);if(penSkinId<0){throw new Error('No SVG Skin ID');}var penState=this._penStateFor(target);var svg=penState.drawing.root();this.runtime.renderer.updateSVGSkin(penSkinId,this.convertSVGForPenLayer(svg.svg()));this.runtime.requestRedraw();}/**
     * Map the x, y position to the SVG viewBox.
     * @param {number} x - the x position on the stage.
     * @param {number} y - the y position on the stage.
     * @returns {Array.<number>} - the x, y position on the SVG viewBox.
     */},{key:"_mapToSVGViewBox",value:function _mapToSVGViewBox(x,y){return[x+this.stageWidth/2,this.stageHeight/2-y];}/**
     * Finish the current pen.
     * @param {object} penState - the pen state.
     */},{key:"_finishPen",value:function _finishPen(penState){if(!penState.penPath){return;}this._removeReferenceLine(penState);var penPath=penState.penPath;penState.penPath=null;var plots=penPath.array();if(plots.length===1){// If the pen line only has one instruction (MoveTo), it hasn't been drawn yet.
penPath.remove();return;}if(plots.length===2){return;}// Close the path if it's a closed line.
var start=plots[1][0]==='L'?plots[0]:plots[1];var lastLine=plots[plots.length-1];// L or T
var closingDistance=8;// pixels distance for closing the path.
if(Math.sqrt(Math.pow(start[1]-lastLine[1],2)+Math.pow(start[2]-lastLine[2],2))>closingDistance){return;}// It's a closed line.
var firstLine=plots[1];// L or Q
if(firstLine[0]==='Q'&&lastLine[0]==='T'){plots.pop();// remove T
plots.push(_toConsumableArray(plots[1]));// copy the first Q to the end
plots[0]=['M'].concat(_toConsumableArray(plots[1].slice(3)));// move the start to the control point of the first Q
plots.splice(1,1);// remove the first Q
}penPath.plot(plots.concat(['Z']));}/**
     * Remove the last reference point for the plotter pen.
     * @param {object} penState - the pen state.
     */},{key:"_removeReferenceLine",value:function _removeReferenceLine(penState){if(!penState.referencePoint){return;}var penPath=penState.penPath;if(penState.penAttributes.lineShape===VPenBlocks.LINE_SHAPES.CURVE){penPath.array().pop();// remove T
var referenceCurve=penPath.array().pop();// Q
penPath.array().push(['T',referenceCurve[1],referenceCurve[2]]);}else{// The reference is a straight line.
penState.penPath.array().pop();}penPath.plot(penPath.array());penState.referencePoint=null;}/**
     * Start a new pen path for the target.
     * @param {Target} target - the target to start the pen path for.
     */},{key:"_startPenPath",value:function _startPenPath(target){var penState=this._getPenState(target);this._finishPen(penState);var newPath=penState.drawing.path(['M'].concat(_toConsumableArray(this._mapToSVGViewBox(target.x,target.y))));newPath.fill(penState.penAttributes.fillOpacity>0?{color:penState.penAttributes.fillColor3b,opacity:penState.penAttributes.fillOpacity}:'none').stroke({width:penState.penAttributes.diameter*this.stepPerMM,color:penState.penAttributes.color3b,opacity:penState.penAttributes.opacity,linecap:'round',linejoin:'round'});penState.penPath=newPath;}/**
     * Add a line to the pen path for the target.
     * @param {Path} path - the path to add the line to.
     * @param {number} x - the x position of the line.
     * @param {number} y - the y position of the line.
     */},{key:"_addLineToPenPath",value:function _addLineToPenPath(path,x,y){path.array().push(['L'].concat(_toConsumableArray(this._mapToSVGViewBox(x,y))));path.plot(path.array());}/**
     * Add a line to the pen path for the target.
     * @param {Path} path - the path to add the line to.
     * @param {number} x - the x position of the line.
     * @param {number} y - the y position of the line.
     */},{key:"_addCurveToPenPath",value:function _addCurveToPenPath(path,x,y){var pathArray=path.array();var prevNode=pathArray[pathArray.length-1];// T or M or L
if(prevNode[0]==='T'){pathArray.pop();}var prevPoint=[prevNode[1],prevNode[2]];var endPoint=this._mapToSVGViewBox(x,y);var controlPoint=[(prevPoint[0]+endPoint[0])/2,(prevPoint[1]+endPoint[1])/2];pathArray.push(['Q'].concat(prevPoint,controlPoint));pathArray.push(['T'].concat(_toConsumableArray(endPoint)));path.plot(pathArray);}/**
     * Clamp a pen size value to the range allowed by the pen.
     * @param {number} requestedSize - the requested pen size.
     * @returns {number} the clamped size.
     * @private
     */},{key:"_clampPenSize",value:function _clampPenSize(requestedSize){return Math.max(0,requestedSize);}/**
     * Get the SVG for the pen layer.
     * @param {string} svg - the SVG string.
     * @returns {string} - the SVG string for the pen layer.
     */},{key:"convertSVGForPenLayer",value:function convertSVGForPenLayer(svg){// Ensure that all strokes have a minimum width for visibility.
var thinStrokeWidth=VPenBlocks.DISPLAY_STROKE_WIDTH_MIN;return svg.replace(/stroke-width="([^"]+)"/g,function(match,strokeWidth){if(parseFloat(strokeWidth)<thinStrokeWidth){return"stroke-width=\"".concat(thinStrokeWidth,"\"");}return match;});}/**
     * Return the step per mm.
     * @returns {number} - the step per mm.
     */},{key:"getStepPerMM",value:function getStepPerMM(){return this.stepPerMM;}/**
     * Return the step for the given mm.
     * @param {object} args - the block arguments.
     * @param {number} args.MM - the mm.
     * @returns {number} - the step.
     */},{key:"stepForMM",value:function stepForMM(args){return Cast$2.toNumber(args.MM)*this.stepPerMM;}/**
     * Return the mm for the given step.
     * @param {object} args - the block arguments.
     * @param {number} args.STEP - the step.
     * @returns {number} - the mm.
     */},{key:"mmForStep",value:function mmForStep(args){return Cast$2.toNumber(args.STEP)/this.stepPerMM;}/**
     * Set the step per mm.
     * @param {object} args - the block arguments.
     * @param {number} args.STEP_PER_MM - the step per mm.
     */},{key:"setStepPerMM",value:function setStepPerMM(args){this.stepPerMM=Cast$2.toNumber(args.STEP_PER_MM);}/**
     * Clear pen layer for the target.
     * @param {Target} targetID - the target to clear the pen layer for.
     */},{key:"destroyPenLayerForID",value:function destroyPenLayerForID(targetID){var penState=this._penStates[targetID];if(penState){var target=this.runtime.getTargetById(targetID);if(target&&target.isOriginal){this.runtime.renderer.destroyDrawable(penState.drawableID,StageLayering$2.PEN_LAYER);this.runtime.renderer.destroySkin(penState.skinID);}delete this._penStates[targetID];this.runtime.requestRedraw();}}/**
     * Handle a target which is exiting.
     * @param {RenderedTarget} target - the target.
     * @private
     */},{key:"onTargetWillExit",value:function onTargetWillExit(target){var penState=this._penStateFor(target);if(penState){this.penUp({},{target:target});this.destroyPenLayerForID(target.id);}}},{key:"onRuntimeDisposed",value:function onRuntimeDisposed(){var _this=this;Object.keys(this._penStates).forEach(function(targetID){_this.destroyPenLayerForID(targetID);});}/**
     * When a pen-using Target is cloned, clone the pen state.
     * @param {Target} newTarget - the newly created target.
     * @param {Target} [sourceTarget] - the target used as a source for the new clone, if any.
     * @listens Runtime#event:targetWasCreated
     * @private
     */},{key:"onTargetCreated",value:function onTargetCreated(newTarget,sourceTarget){if(sourceTarget){var sourcePenState=this._penStateFor(sourceTarget);if(sourcePenState){var newPenState=VPenBlocks.DEFAULT_PEN_STATE;newPenState.skinID=sourcePenState.skinID;newPenState.drawableID=sourcePenState.drawableID;newPenState.penType=sourcePenState.penType;newPenState.penAttributes=Clone$2.simple(sourcePenState.penAttributes);this._penStates[newTarget.id]=newPenState;newPenState.drawing=sourcePenState.drawing.group();}}}/**
     * Handle a target which has moved. This only fires when the pen is down.
     * @param {RenderedTarget} target - the target which has moved.
     * @param {number} oldX - the previous X position.
     * @param {number} oldY - the previous Y position.
     * @param {boolean} isForce - whether the movement was forced.
     * @private
     */},{key:"onTargetMoved",value:function onTargetMoved(target,oldX,oldY,isForce){var penState=this._penStateFor(target);var penPath=penState.penPath;if(!penPath){// If the pen is up, there's nothing to draw.
return;}if(penState.penType===VPenBlocks.PEN_TYPES.TRAIL){if(isForce){// Only move the pen if the movement isn't forced (ie. dragged).
// This prevents the pen from drawing when the sprite is dragged.
this._startPenPath(target);this._updatePenSkinFor(target);return;}}if(penState.penType===VPenBlocks.PEN_TYPES.PLOTTER){this._removeReferenceLine(penState);}penState.referencePoint={x:target.x,y:target.y};if(penState.penAttributes.lineShape===VPenBlocks.LINE_SHAPES.CURVE){this._addCurveToPenPath(penPath,target.x,target.y);}else{this._addLineToPenPath(penPath,target.x,target.y);}this._updatePenSkinFor(target);}/**
     * Plot a node of the path.
     * @param {object} args - the block arguments.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"plot",value:function plot(args,util){var target=util.target;var penState=this._getPenState(target);if(penState.penPath){if(penState.penType===VPenBlocks.PEN_TYPES.TRAIL){// Trail pen was down, so nothing to plot.
return;}}else{// If there's no line started, start plotter.
penState.penType=VPenBlocks.PEN_TYPES.PLOTTER;this._startPenPath(target);this._updatePenSkinFor(target);target.addListener(RenderedTarget$1.EVENT_TARGET_MOVED,this.onTargetMoved);}// Change the reference point to the drawing position.
penState.referencePoint=null;}/**
     * The pen "pen down" block causes the target to leave pen trails on future motion.
     * @param {object} args - the block arguments.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"penDown",value:function penDown(args,util){var target=util.target;var penState=this._getPenState(target);if(penState.penPath){if(penState.penType===args.PEN_TYPE){// If there's already a same type line started, nothing to do.
return;}this.penUp(args,util);}penState.penType=args.PEN_TYPE;if(penState.penType===VPenBlocks.PEN_TYPES.TRAIL){this._startPenPath(target);}this._updatePenSkinFor(target);target.addListener(RenderedTarget$1.EVENT_TARGET_MOVED,this.onTargetMoved);}/**
     * The pen "pen up" block stops the target from leaving pen trails.
     * @param {object} args - the block arguments.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"penUp",value:function penUp(args,util){var target=util.target;var penState=this._penStateFor(target);if(!penState||!penState.penPath){// If there's no line started, there's nothing to end.
return;}this._finishPen(penState);this._updatePenSkinFor(target);target.removeListener(RenderedTarget$1.EVENT_TARGET_MOVED,this.onTargetMoved);}/**
     * Clears the drawings of this target.
     * @param {object} _args - the block arguments.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"clear",value:function clear(_args,util){var target=util.target;this._clearForTarget(target);}/**
     * Set the pen color by color tool.
     * @param {object} args - the block arguments.
     * @param {string|number} args.COLOR - the color to set the pen to.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"setPenColorToColor",value:function setPenColorToColor(args,util){var target=util.target;var penState=this._getPenState(target);var rgba=Cast$2.toRgbColorObject(args.COLOR);var opacity=1-(rgba.a?rgba.a:0)/255;if(penState.penAttributes.color3b.r===rgba.r&&penState.penAttributes.color3b.g===rgba.g&&penState.penAttributes.color3b.b===rgba.b&&penState.penAttributes.opacity===opacity){// No change.
return;}penState.penAttributes.color3b={r:rgba.r,g:rgba.g,b:rgba.b};penState.penAttributes.opacity=opacity;var penPath=penState.penPath;if(penPath){// If there's a pen line started, end it and start a new one.
this._startPenPath(target);}}/**
     * Set the pen opacity.
     * @param {object} args - the block arguments.
     * @param {number} args.OPACITY - the opacity of the pen.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"setPenOpacity",value:function setPenOpacity(args,util){var target=util.target;var penState=this._getPenState(target);var newOpacity=Math.max(0,Math.min(1,Cast$2.toNumber(args.OPACITY)/100));if(penState.penAttributes.opacity===newOpacity){// No change.
return;}penState.penAttributes.opacity=newOpacity;var penPath=penState.penPath;if(penPath){// If there's a pen line started, end it and start a new one.
this._startPenPath(target);}}/**
     * Set the pen size (mm).
     * @param {object} args - the block arguments.
     * @param {number} args.SIZE - the size of the pen in mm.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"setPenSizeTo",value:function setPenSizeTo(args,util){var target=util.target;var penState=this._getPenState(target);var newPenSize=this._clampPenSize(Cast$2.toNumber(args.SIZE));if(penState.penAttributes.diameter===newPenSize){// No change.
return;}penState.penAttributes.diameter=newPenSize;var penPath=penState.penPath;if(penPath){// If there's a pen line started, end it and start a new one.
this._startPenPath(target);}}/**
     * Set the line shape.
     * @param {object} args - the block arguments.
     * @param {string} args.LINE_SHAPE - the shape of the line.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"setLineShape",value:function setLineShape(args,util){var target=util.target;var penState=this._getPenState(target);var newLineShape=args.LINE_SHAPE;if(penState.penAttributes.lineShape===newLineShape){// No change.
return;}penState.penAttributes.lineShape=newLineShape;}/**
     * Set fill color of the pen by color tool.
     * @param {object} args - the block arguments.
     * @param {string|number} args.COLOR - the color to set.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"setFillColorToColor",value:function setFillColorToColor(args,util){var target=util.target;var penState=this._getPenState(target);var rgba=Cast$2.toRgbColorObject(args.COLOR);var opacity=1-(rgba.a?rgba.a:0)/255;if(penState.penAttributes.fillColor3b.r===rgba.r&&penState.penAttributes.fillColor3b.g===rgba.g&&penState.penAttributes.fillColor3b.b===rgba.b&&penState.penAttributes.fillOpacity===opacity){// No change.
return;}penState.penAttributes.fillColor3b={r:rgba.r,g:rgba.g,b:rgba.b};penState.penAttributes.fillOpacity=opacity;var penPath=penState.penPath;if(penPath){penPath.fill(penState.penAttributes.fillOpacity>0?{color:penState.penAttributes.fillColor3b,opacity:penState.penAttributes.fillOpacity}:'none');this._updatePenSkinFor(target);}}/**
     * Set fill opacity of the pen.
     * @param {object} args - the block arguments.
     * @param {number} args.OPACITY - the opacity of the fill color.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"setFillOpacity",value:function setFillOpacity(args,util){var target=util.target;var penState=this._getPenState(target);var newOpacity=Math.max(0,Math.min(1,Cast$2.toNumber(args.OPACITY)/100));if(penState.penAttributes.fillOpacity===newOpacity){// No change.
return;}penState.penAttributes.fillOpacity=newOpacity;var penPath=penState.penPath;if(penPath){penPath.fill(penState.penAttributes.fillOpacity>0?{color:penState.penAttributes.fillColor3b,opacity:penState.penAttributes.fillOpacity}:'none');this._updatePenSkinFor(target);}}/**
     * The pen "stamp" block stamps the current drawable's image onto the pen layer.
     * @param {object} args - the block arguments.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"stamp",value:function stamp(args,util){var target=util.target;var drawable=target.drawableID;var drawableData=this.runtime.renderer.extractDrawableScreenSpace(drawable);// Get the dataURL of the drawable
var canvas=document.createElement('canvas');canvas.width=drawableData.imageData.width;canvas.height=drawableData.imageData.height;var ctx=canvas.getContext('2d');ctx.putImageData(drawableData.imageData,0,0);var drawableURL=canvas.toDataURL();// Stamp the drawable onto the pen layer
var penState=this._getPenState(target);var drawing=penState.drawing;// Get the actual stage size from the renderer.
var canvasWidth=this.runtime.renderer.canvas.clientWidth;var canvasHeight=this.runtime.renderer.canvas.clientHeight;var stageResolution=[canvasWidth/this.stageWidth,canvasHeight/this.stageHeight];// Get the costume and its resolution.
var costume=target.sprite.costumes[target.currentCostume];var costumeResolution=costume.bitmapResolution||1;// Default to 1 if resolution isn't specified
// Stamp the drawable onto the pen layer
var stamp=drawing.image(drawableURL);// Adjust position and size for stage size change
var adjustedX=drawableData.x/stageResolution[0];var adjustedY=drawableData.y/stageResolution[1];var adjustedWidth=drawableData.width/stageResolution[0]/costumeResolution;var adjustedHeight=drawableData.height/stageResolution[1]/costumeResolution;stamp.move(adjustedX,adjustedY);stamp.size(adjustedWidth,adjustedHeight);stamp.opacity((100-target.effects.ghost)/100);this._updatePenSkinFor(target);}/**
     * Move drawing to the front layer.
     * @param {number} drawableID - the drawable to move.
     */},{key:"_moveLayerToFront",value:function _moveLayerToFront(drawableID){// RenderWebGL.setDrawableOrder() has a bug which breaks the order of groups when moving drawable up.
// So we move the drawable up under the sprite layer.
var renderer=this.runtime.renderer;var topOrder=renderer._layerGroups[StageLayering$2.SPRITE_LAYER].drawListOffset-1;renderer.setDrawableOrder(drawableID,topOrder,StageLayering$2.PEN_LAYER,false);}/**
     * Move drawing to the back layer.
     * @param {number} drawableID - the drawable to move.
     */},{key:"_moveLayerToBack",value:function _moveLayerToBack(drawableID){this.runtime.renderer.setDrawableOrder(drawableID,-Infinity,StageLayering$2.PEN_LAYER,false);}/**
     * Move drawing forward a number of layers.
     * @param {number} drawableID - the drawable to move.
     * @param {number} nLayers How many layers to go forward.
     */},{key:"_moveLayerUp",value:function _moveLayerUp(drawableID,nLayers){// RenderWebGL.setDrawableOrder() has a bug which breaks the order of groups when moving drawable up.
// So we move the drawable up under the sprite layer.
var renderer=this.runtime.renderer;var drawableOrder=renderer.getDrawableOrder(drawableID);var topOrder=renderer._layerGroups[StageLayering$2.SPRITE_LAYER].drawListOffset-1;nLayers=Math.min(nLayers,topOrder-drawableOrder);renderer.setDrawableOrder(drawableID,nLayers,StageLayering$2.PEN_LAYER,true);}/**
     * Move drawing backward a number of layers.
     * @param {number} drawableID - the drawable to move.
     * @param {number} nLayers How many layers to go backward.
     */},{key:"_moveLayerDown",value:function _moveLayerDown(drawableID,nLayers){this._moveLayerUp(drawableID,-nLayers);}/**
     * Change the layer of the drawing.
     * @param {object} args - the block arguments.
     * @param {object} util - utility object provided by the runtime.
     * @param {string} args.LAYER - the layer name to change to.
     */},{key:"changeLayerTo",value:function changeLayerTo(args,util){var target=util.target;var penState=this._getPenState(target);var layer=args.LAYER;if(layer===VPenBlocks.CHANGE_LAYER.TOP){this._moveLayerToFront(penState.drawableID);}else if(layer===VPenBlocks.CHANGE_LAYER.BOTTOM){this._moveLayerToBack(penState.drawableID);}this.runtime.requestRedraw();}/**
     * Move the drawing a number of layers.
     * @param {object} args - the block arguments.
     * @param {object} util - utility object provided by the runtime.
     * @param {number} args.LAYERS - the number of layers to move.
     * @param {string} args.DIRECTION - the direction to move.
     */},{key:"moveLayerBy",value:function moveLayerBy(args,util){var target=util.target;var penState=this._getPenState(target);var layerCount=Cast$2.toNumber(args.LAYERS);if(args.DIRECTION===VPenBlocks.MOVE_LAYER.UP){this._moveLayerUp(penState.drawableID,layerCount);}else if(args.DIRECTION===VPenBlocks.MOVE_LAYER.DOWN){this._moveLayerDown(penState.drawableID,layerCount);}this.runtime.requestRedraw();}/**
     * Get the order of the drawing in the all drawable.
     * @param {object} target - the target to get the order for.
     * @returns {number} - the order of the drawing.
     */},{key:"_getDrawableOrderFor",value:function _getDrawableOrderFor(target){var penState=this._penStates[target.id];if(!penState){return-1;}var renderer=this.runtime.renderer;return renderer.getDrawableOrder(penState.drawableID);}/**
     * Clears the pen layer's contents.
     */},{key:"clearAll",value:function clearAll(){var _this2=this;this.runtime.targets.forEach(function(target){_this2._clearForTarget(target);});}/**
     * Save the drawing as an SVG file.
     * @param {SVG} svg - the SVG drawing.
     * @param {string} fileName - the name of the file to save.
     * @returns {Promise} - a promise that resolves after the file has been saved.
     */},{key:"_saveSVGAsFile",value:function _saveSVGAsFile(svg,fileName){var saveData=svg.size("".concat(this.stageWidth/this.stepPerMM,"mm"),"".concat(this.stageHeight/this.stepPerMM,"mm")).svg();var blob=new Blob([saveData],{type:'application/octet-stream'});return FileSaver.saveAs(blob,"".concat(fileName,".svg"));}/**
     * Add the sprite drawing group to the SVG if the sprite has a drawing.
     * @param {Target} target - the target to add the sprite drawing for.
     * @param {Container} svgContainer - the SVG container to add the sprite drawing to.
     * @returns {Container?} - a new group for the sprite drawing or null.
     */},{key:"_addSpriteDrawingTo",value:function _addSpriteDrawingTo(target,svgContainer){var penState=this._penStateFor(target);if(!penState||!penState.drawing){return null;}var drawings=penState.drawing.children();if(drawings.length===0){return null;}var spriteGroup=svgContainer.group();spriteGroup.id(target.sprite.name);drawings.forEach(function(child){spriteGroup.add(child.clone());});return spriteGroup;}/**
     * Save the sprite drawing as an SVG file.
     * @param {object} args - the block arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - the result of saving the sprite drawing.
     */},{key:"downloadSpriteDrawing",value:function downloadSpriteDrawing(args,util){var target=util.target;var fileName=Cast$2.toString(args.FILENAME);var penState=this._penStateFor(target);if(!penState||!penState.drawing){return'no drawing';}// eslint-disable-next-line no-alert
if(fileName===null||fileName===''){fileName=target.sprite.name;}var saveSVG=this._createDrawingSVG();this._addSpriteDrawingTo(target,saveSVG);return this._saveSVGAsFile(saveSVG,fileName);}/**
     * Save the SVG drawing.
     * @param {object} args - the block arguments.
     * @param {string} args.NAME - the name of the file to save.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - the result of saving the SVG drawing.
     */},{key:"downloadAllDrawing",value:function downloadAllDrawing(args,util){var _this3=this;// eslint-disable-next-line no-alert
var fileName=Cast$2.toString(args.FILENAME);if(fileName===null||fileName===''){fileName='vpen';}var saveSVG=this._createDrawingSVG();var saveTargets=util.runtime.targets.filter(function(target){return target.isSprite();}).sort(function(a,b){return _this3._getDrawableOrderFor(a)-_this3._getDrawableOrderFor(b);});if(saveTargets.length===0){return'no drawing';}saveTargets.forEach(function(target){_this3._addSpriteDrawingTo(target,saveSVG);});if(saveSVG.children().length===0){return'no drawing';}return this._saveSVGAsFile(saveSVG,fileName);}/**
     * Remove the last drawing of the sprite.
     * @param {object} _args - the block arguments.
     * @param {object} util - utility object provided by the runtime.
     */},{key:"eraseLast",value:function eraseLast(_args,util){var target=util.target;var penState=this._penStateFor(target);if(penState&&penState.drawing){var drawings=penState.drawing.children();if(drawings.length>0){drawings[drawings.length-1].remove();this._updatePenSkinFor(target);}}}/**
     * @returns {object} metadata for this extension and its blocks.
     */},{key:"getInfo",value:function getInfo(){setupTranslations();return{id:VPenBlocks.EXTENSION_ID,name:VPenBlocks.EXTENSION_NAME,extensionURL:VPenBlocks.extensionURL,blockIconURI:img,showStatusButton:false,blocks:[{opcode:'clearAll',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.clearAll',default:'erase all drawings',description:'erase all pen trails and stamps'})},{opcode:'clear',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.clear',default:'erase drawings of this sprite',description:'clear the pen trails of the sprite'}),filter:[TargetType$1.SPRITE]},{opcode:'eraseLast',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.eraseLast',default:'erase last drawing',description:'remove the last drawing of the sprite'}),filter:[TargetType$1.SPRITE]},'---',{opcode:'stamp',blockType:BlockType$1.COMMAND,text:formatMessage({id:'pen.stamp',default:'stamp',description:'stamp a copy of the sprite'}),filter:[TargetType$1.SPRITE]},{opcode:'penDown',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.penDown',default:'[PEN_TYPE] pen down',description:'start leaving a trail when the sprite moves'}),arguments:{PEN_TYPE:{type:ArgumentType$1.STRING,menu:'penTypesMenu'}},filter:[TargetType$1.SPRITE]},{opcode:'penUp',blockType:BlockType$1.COMMAND,text:formatMessage({id:'pen.penUp',default:'pen up',description:'stop leaving a trail behind the sprite'}),filter:[TargetType$1.SPRITE]},{opcode:'plot',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.plot',default:'plot',description:'plot a node of the path'}),filter:[TargetType$1.SPRITE]},{opcode:'setPenColorToColor',blockType:BlockType$1.COMMAND,text:formatMessage({id:'pen.setColor',default:'set pen color to [COLOR]',description:'set the pen color'}),arguments:{COLOR:{type:ArgumentType$1.COLOR}},filter:[TargetType$1.SPRITE]},{opcode:'setPenOpacity',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.setPenOpacity',default:'set pen opacity to [OPACITY]',description:'set the vpen opacity'}),arguments:{OPACITY:{type:ArgumentType$1.NUMBER,defaultValue:100}},filter:[TargetType$1.SPRITE]},{opcode:'setPenSizeTo',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.setSize',default:'set pen size to [SIZE] mm',description:'set the diameter of a trail left by a sprite'}),arguments:{SIZE:{type:ArgumentType$1.NUMBER,defaultValue:1}},filter:[TargetType$1.SPRITE]},{opcode:'setLineShape',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.setLineShape',default:'set line shape to [LINE_SHAPE]',description:'set the shape of a line'}),arguments:{LINE_SHAPE:{type:ArgumentType$1.STRING,menu:'lineShapesMenu'}},filter:[TargetType$1.SPRITE]},{opcode:'setFillColorToColor',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.setFillColorToColor',default:'set fill color to [COLOR]',description:'set fill color of the pen'}),arguments:{COLOR:{type:ArgumentType$1.COLOR}},filter:[TargetType$1.SPRITE]},{opcode:'setFillOpacity',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.setFillOpacity',default:'set fill opacity to [OPACITY]',description:'set fill opacity of the pen'}),arguments:{OPACITY:{type:ArgumentType$1.NUMBER,defaultValue:100}},filter:[TargetType$1.SPRITE]},{opcode:'changeLayerTo',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.changeLayerTo',default:'change layer to [LAYER]',description:'change the layer of the pen'}),arguments:{LAYER:{type:ArgumentType$1.STRING,menu:'changeLayerMenu'}},filter:[TargetType$1.SPRITE]},{opcode:'moveLayerBy',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.moveLayerBy',default:'move [DIRECTION] [LAYERS] layers',description:'move the layer of the pen'}),arguments:{DIRECTION:{type:ArgumentType$1.STRING,menu:'moveLayerDirectionMenu'},LAYERS:{type:ArgumentType$1.NUMBER,defaultValue:1}},filter:[TargetType$1.SPRITE]},'---',{opcode:'stepForMM',blockType:BlockType$1.REPORTER,text:formatMessage({id:'xcxVPen.stepForMM',default:'steps for [MM] mm',description:'convert millimeters to steps'}),arguments:{MM:{type:ArgumentType$1.NUMBER,defaultValue:10}}},{opcode:'mmForStep',blockType:BlockType$1.REPORTER,text:formatMessage({id:'xcxVPen.mmForStep',default:'mm for [STEP] steps',description:'convert steps to millimeters'}),arguments:{STEP:{type:ArgumentType$1.NUMBER,defaultValue:100}}},{opcode:'getStepPerMM',blockType:BlockType$1.REPORTER,text:formatMessage({id:'xcxVPen.getStepPerMM',default:'step/mm',description:'step per mm'})},{opcode:'setStepPerMM',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.setStepPerMM',default:'set step/mm to [STEP_PER_MM]',description:'set step per mm'}),arguments:{STEP_PER_MM:{type:ArgumentType$1.NUMBER,defaultValue:2}}},{opcode:'downloadAllDrawing',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.downloadAllDrawing',default:'download all drawings named [FILENAME]',description:'download the SVG of all sprites'}),arguments:{FILENAME:{type:ArgumentType$1.STRING,defaultValue:'vpen'}}},{opcode:'downloadSpriteDrawing',blockType:BlockType$1.COMMAND,text:formatMessage({id:'xcxVPen.downloadSpriteDrawing',default:'download drawing by the sprite named [FILENAME]',description:'download SVG of the sprite'}),arguments:{FILENAME:{type:ArgumentType$1.STRING,defaultValue:'sprite'}},filter:[TargetType$1.SPRITE]}],menus:{penTypesMenu:{acceptReporters:false,items:'getPenTypesMenuItems'},lineShapesMenu:{acceptReporters:false,items:'getLineShapesMenuItems'},changeLayerMenu:{acceptReporters:false,items:'getChangeLayerMenuItems'},moveLayerDirectionMenu:{acceptReporters:false,items:'getMoveLayerDirectionMenuItems'}}};}},{key:"getPenTypesMenuItems",value:function getPenTypesMenuItems(){return[{text:formatMessage({id:'xcxVPen.penTypesMenu.trail',default:'trail',description:'pen type'}),value:VPenBlocks.PEN_TYPES.TRAIL},{text:formatMessage({id:'xcxVPen.penTypesMenu.plotter',default:'plotter',description:'plotter pen type'}),value:VPenBlocks.PEN_TYPES.PLOTTER}];}},{key:"getLineShapesMenuItems",value:function getLineShapesMenuItems(){return[{text:formatMessage({id:'xcxVPen.lineShapesMenu.straight',default:'straight',description:'line shape'}),value:VPenBlocks.LINE_SHAPES.STRAIGHT},{text:formatMessage({id:'xcxVPen.lineShapesMenu.curve',default:'curve',description:'curve line shape'}),value:VPenBlocks.LINE_SHAPES.CURVE}];}},{key:"getChangeLayerMenuItems",value:function getChangeLayerMenuItems(){return[{text:formatMessage({id:'xcxVPen.changeLayerMenu.top',default:'top',description:'change pen layer to top'}),value:VPenBlocks.CHANGE_LAYER.TOP},{text:formatMessage({id:'xcxVPen.changeLayerMenu.bottom',default:'bottom',description:'change pen layer to bottom'}),value:VPenBlocks.CHANGE_LAYER.BOTTOM}];}},{key:"getMoveLayerDirectionMenuItems",value:function getMoveLayerDirectionMenuItems(){return[{text:formatMessage({id:'xcxVPen.moveLayerDirectionMenu.up',default:'up',description:'move pen layer up'}),value:VPenBlocks.MOVE_LAYER.UP},{text:formatMessage({id:'xcxVPen.moveLayerDirectionMenu.down',default:'down',description:'move pen layer down'}),value:VPenBlocks.MOVE_LAYER.DOWN}];}}],[{key:"formatMessage",set:/**
     * A translation object which is used in this class.
     * @param {FormatObject} formatter - translation object
     */function set(formatter){formatMessage=formatter;if(formatMessage)setupTranslations();}/**
     * @return {string} - the name of this extension.
     */},{key:"EXTENSION_NAME",get:function get(){return formatMessage({id:'xcxVPen.name',default:'Vector Pen',description:'name of the extension'});}/**
     * @return {string} - the ID of this extension.
     */},{key:"EXTENSION_ID",get:function get(){return EXTENSION_ID;}/**
     * URL to get this extension.
     * @type {string}
     */},{key:"extensionURL",get:function get(){return extensionURL;}/**
     * Set URL to get this extension.
     * The extensionURL will be changed to the URL of the loading server.
     * @param {string} url - URL
     */,set:function set(url){extensionURL=url;}/**
     * The minimum stroke width for display purposes.
     * @type {number}
     */},{key:"DISPLAY_STROKE_WIDTH_MIN",get:function get(){return 0.1;}/**
     * The types of pen.
     * @type {object}
     * @property {string} TRAIL - trail pen.
     * @property {string} PLOTTER - plotter pen.
     */},{key:"PEN_TYPES",get:function get(){return{TRAIL:'trail',PLOTTER:'plotter'};}/**
     * The types of line shapes.
     * @type {object}
     * @property {string} STRAIGHT - straight line.
     * @property {string} CURVE - curve line.
     */},{key:"LINE_SHAPES",get:function get(){return{STRAIGHT:'straight',CURVE:'curve'};}/**
     * The name of layers.
     * @type {object}
     * @property {string} TOP - the top layer.
     * @property {string} BOTTOM - the bottom layer.
     */},{key:"CHANGE_LAYER",get:function get(){return{TOP:'top',BOTTOM:'bottom'};}/**
     * The directions to move the pen layer.
     * @type {object}
     * @property {string} UP - move the pen layer up.
     * @property {string} DOWN - move the pen layer down.
     */},{key:"MOVE_LAYER",get:function get(){return{UP:'up',DOWN:'down'};}/**
     * The default state of the vector pen.
     * @type {object}
     * @property {int} skinID - the ID of the renderer Skin corresponding to the pen layer.
     * @property {int} drawableID - the ID of the renderer Drawable corresponding to the pen layer.
     * @property {Path} penPath - the current pen line.
     * @property {Container} drawing - the container for the pen lines.
     * @property {object} penAttributes - the pen attributes.
     * @property {object} penAttributes.color3b - the pen color[RGB 0-255].
     * @property {number} penAttributes.diameter - the pen diameter[mm].
     * @property {string} penAttributes.lineShape - the shape of the line.
     * @property {object} penAttributes.fillColor3b - the fill color[RGB 0-255].
     * @property {number} penAttributes.fillOpacity - the fill opacity.
     * @property {object} referencePoint - the reference point for the plotter pen.
     */},{key:"DEFAULT_PEN_STATE",get:function get(){return{skinID:-1,drawableID:-1,penType:VPenBlocks.PEN_TYPES.TRAIL,penPath:null,drawing:null,penAttributes:{color3b:{r:0,g:0,b:0},// RGB 0-255,
opacity:1,// 0.0-1.0
diameter:1,// mm
lineShape:VPenBlocks.LINE_SHAPES.STRAIGHT,fillColor3b:{r:0,g:0,b:0},// RGB 0-255,
fillOpacity:0// 0.0-1.0
},referencePoint:null};}}]);}();

/***/ })

}]);
//# sourceMappingURL=preload_https_3A_2F_2Fyokobond_2Egithub_2Eio_2Fxcx-vpen_2Fdist_2FxcxVPen_2Emjs_extension_mjs.70fe3849586c1dfbffb0.js.map