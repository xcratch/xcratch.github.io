"use strict";
(self["webpackChunkGUI"] = self["webpackChunkGUI"] || []).push([["preload_https_3A_2F_2Fyokobond_2Egithub_2Eio_2Fxcx-gai_2Fdist_2Fgai_2Emjs_extension_mjs"],{

/***/ "./preload/https%3A%2F%2Fyokobond%2Egithub%2Eio%2Fxcx-gai%2Fdist%2Fgai%2Emjs/extension.mjs":
/*!*************************************************************************************************!*\
  !*** ./preload/https%3A%2F%2Fyokobond%2Egithub%2Eio%2Fxcx-gai%2Fdist%2Fgai%2Emjs/extension.mjs ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   blockClass: () => (/* binding */ GAIBlocks),
/* harmony export */   entry: () => (/* binding */ entry)
/* harmony export */ });
/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ "./node_modules/buffer/index.js")["Buffer"];
const _excluded=["execute","outputSchema","toModelOutput","onInputStart","onInputDelta","onInputAvailable"],_excluded2=["execute","toModelOutput","onInputStart","onInputDelta","onInputAvailable"],_excluded3=["additionalProperties"],_excluded4=["type"],_excluded5=["type"],_excluded6=["role","content"],_excluded7=["abortSignal"],_excluded8=["model","tools","toolChoice","system","prompt","messages","maxRetries","abortSignal","headers","stopWhen","experimental_output","experimental_telemetry","prepareStep","providerOptions","experimental_activeTools","activeTools","experimental_repairToolCall","experimental_transform","experimental_download","includeRawChunks","onChunk","onError","onFinish","onAbort","onStepFinish","experimental_context","_internal"],_excluded9=["originalMessages","generateMessageId","onFinish","messageMetadata","sendReasoning","sendSources","sendFinish","sendStart","onError"],_excluded0=["originalMessages","generateMessageId","onFinish","messageMetadata","sendReasoning","sendSources","sendFinish","sendStart","onError"],_excluded1=["model","tools","toolChoice","system","prompt","messages","maxRetries","abortSignal","headers","stopWhen","experimental_output","experimental_telemetry","providerOptions","experimental_activeTools","activeTools","experimental_prepareStep","prepareStep","experimental_repairToolCall","experimental_download","experimental_context","_internal","onStepFinish"];function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o]);}return i;}function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n];}return t;}function _asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value;}catch(n){return void e(n);}i.done?t(u):Promise.resolve(u).then(r,o);}function _asyncToGenerator2(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){_asyncGeneratorStep(a,r,o,_next,_throw,"next",n);}function _throw(n){_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n);}_next(void 0);});};}function _ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_ownKeys(Object(t),!0).forEach(function(r){_defineProperty2(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty2(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+"";}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function _awaitAsyncGenerator(e){return new _OverloadYield2(e,0);}function _wrapAsyncGenerator(e){return function(){return new AsyncGenerator(e.apply(this,arguments));};}function AsyncGenerator(e){var r,t;function resume(r,t){try{var n=e[r](t),o=n.value,u=o instanceof _OverloadYield2;Promise.resolve(u?o.v:o).then(function(t){if(u){var i="return"===r?"return":"next";if(!o.k||t.done)return resume(i,t);t=e[i](t).value;}settle(n.done?"return":"normal",t);},function(e){resume("throw",e);});}catch(e){settle("throw",e);}}function settle(e,n){switch(e){case"return":r.resolve({value:n,done:!0});break;case"throw":r.reject(n);break;default:r.resolve({value:n,done:!1});}(r=r.next)?resume(r.key,r.arg):t=null;}this._invoke=function(e,n){return new Promise(function(o,u){var i={key:e,arg:n,resolve:o,reject:u,next:null};t?t=t.next=i:(r=t=i,resume(e,n));});},"function"!=typeof e.return&&(this.return=void 0);}AsyncGenerator.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this;},AsyncGenerator.prototype.next=function(e){return this._invoke("next",e);},AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e);},AsyncGenerator.prototype.return=function(e){return this._invoke("return",e);};function _OverloadYield2(e,d){this.v=e,this.k=d;}function _asyncIterator2(r){var n,t,o,e=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,o=Symbol.iterator);e--;){if(t&&null!=(n=r[t]))return n.call(r);if(o&&null!=(n=r[o]))return new _AsyncFromSyncIterator(n.call(r));t="@@asyncIterator",o="@@iterator";}throw new TypeError("Object is not async iterable");}function _AsyncFromSyncIterator(r){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var n=r.done;return Promise.resolve(r.value).then(function(r){return{value:r,done:n};});}return _AsyncFromSyncIterator=function(r){this.s=r,this.n=r.next;},_AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments));},return:function(r){var n=this.s.return;return void 0===n?Promise.resolve({value:r,done:!0}):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));},throw:function(r){var n=this.s.return;return void 0===n?Promise.reject(r):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));}},new _AsyncFromSyncIterator(r);}var img$2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAF0CAYAAAD/4EcMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAIABJREFUeJzt3XucjnXi//H3PXNLmBkzI+NUO1lyyjHkGBnnw4TQQSTnbFtEpdO33bTbYZGoJBQyZAalHoaMERmKtQ6RTKZCDiFyGMPgnnt+f+xv2/XIYQ6f+/7c9zWv558z91zXex9tPV6P677u63ZVrFjxrKRiAgAAgAkX3fp3XLltLwEAAHCKENsDAAAAnIbAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAgAAMIzAAvLp+uuvV2hoqO0ZAIAARmAB+ZSdna3u3bsrPDzc9hQAQIAisIACSElJ0SuvvKJy5crZngIACEAEFlAAZ86c0bRp0/TJJ5+oQYMGtucAAAJMaHh4+AsitIB8O3r0qNxut6ZMmaL9+/dr165dticBflGyZEldvHjR9gwgkHkJLKAQtmzZombNmunhhx9WZGSk1q5dq9zcXNuzAJ8IDw9X//79tXXrVnm9XttzgEDmJayAQvB6vRo5cqROnDihwYMHa9asWdz8Dkdq0KCB5s+fr+TkZK5eAXlAYAGFdPjwYT311FOSpLZt2+rTTz/VzTffbHcUYIjb7dbo0aP18ccf67XXXtPhw4dtTwKCAoEFGLBs2TLNnz9fklStWjV99tln6tq1q+VVQOHcdNNNSkpK0pgxYzR16lStW7fO9iQgaLgqVqx4UZLb9hAg2JUsWVIpKSmqXLmyJCk3N1dvv/22xo8fL4/HY3kdkD/333+/XnzxRZUqVUr//Oc/1adPH/5/DOSdh8ACDGrYsKE+/vjjS570vmHDBo0YMUJHjx61uAzIm+joaI0fP16dOnWSJJ06dUodOnTQgQMHLC8DgoqHtwgBgzZv3qzZs2df8rOmTZtqxYoVatq0qZ1RQB7FxcVp1apVv8VVbm6uRo0aRVwBBUBgAYa98sor2rt37yU/i4mJUWJiosaMGaOQEP61Q2CJiIjQa6+9pg8++EAxMTG//XzmzJlKSUmxuAwIXrxFCPhAs2bNtHDhQrlcrt/9buXKlRo5cqROnTplYRlwqfbt2+vVV19V+fLlL/n59u3b1b17d124cMHSMiCo8RYh4AtfffWVEhISLvu79u3ba/ny5br11lv9vAr4r7Jly2r69OmaPXv27+LqzJkzGjFiBHEFFAKBBfjI3//+dx08ePCyv4uNjdWnn36qvn37+nkVIPXu3Vtr1qy54qNEXnjhhd+9zQ0gf3iLEPChli1basGCBZd9q/A/li1bpieffFInT5704zIURTExMXr11VfVsWPHK75mxYoVGjRokB9XAY7k4bsIAR/66aefdOONN6p27dpXfM0tt9yinj17aseOHXxaCz7hcrnUr18/zZo1S7Vq1bri644fP67+/fvr7NmzflwHOJKXK1iAj0VERGjNmjUqV67cVV+Xk5OjyZMna/LkyTzQEcbcfPPNmjBhgpo1a3bN1w4YMECpqal+WAU4Hje5A752+vRpPfnkk9d8XWhoqEaPHq1PPvlEsbGxflgGJ3O73RoyZIhWrlyZp7iaO3cucQUYxFuEgB/s2bNHNWrUULVq1a752vLly+uee+7RyZMntX37dj+sg9M0b95cc+bMUa9evVSsWLFrvn7fvn0aOnQonxoEzOEtQsBfYmJitHbtWoWHh+f5b1avXq0xY8boyJEjPlwGp4iJidFzzz2n3r175/lvvF6vevfurY0bN/pwGVDk8BYh4C9Hjx7VxIkT8/U3bdq0UWpqqrp16+ajVXACt9utoUOHau3atfmKK0l66623iCvAB7iCBfiR2+3WsmXLCvSQ0aVLl+rpp5/WiRMnfLAMwap58+YaN26catasme+/3bFjh+Lj43Xx4kUfLAOKNK5gAf7k8Xj0zDPPyOv15vtvu3XrplWrVqldu3Y+WIZgExsbq5kzZ2rhwoUFiqvs7Gw9+uijxBXgIwQW4GebN2/WggULCvS35cqV05w5c/TOO++obNmyhpchGJQqVUrPPPOM1qxZo86dOxf4OC+//LIyMjIMLgPwv3iLELAgKipK69atU2RkZIGPcfLkSb344otauHChcnNzDa5DIHK5XOrdu7eeffZZxcTEFOpYGzZsUJ8+fQp0JRVAnvAkd8CG7OxsZWdnKy4ursDHuP7669WpUyc1btxYmzZt0qlTpwwuRCBp2bKlpk2bpoceekilSpUq1LHOnTun/v37cy8f4Ftewgqw5IMPPtDu3bsLfZw77rhDq1at0sMPPyy3m4vRTlK7dm3NmzdPiYmJqlevnpFjjh8/Xnv27DFyLABXxluEgEUtW7ZUYmKiseN9//33+r//+z+tXbvW2DHhf5UqVdJjjz2m+++/X6GhocaOu3XrVnXv3l05OTnGjgngsjwEFmDZ7Nmz1b59e6PHTE1N1bPPPquDBw8aPS58KyoqSiNGjNDQoUN13XXXGT32hQsX1KlTJ3333XdGjwvgsggswLbKlStr9erVefpKk/zIysrSG2+8oRkzZvBR/ABXunRpDRs2TEOGDFFYWJhPzvHaa69pypQpPjk2gN/hJnfAtpMnTyo8PFyNGjUyetzrrrtOrVq1Unx8vPbs2aO9e/caPT4KLzIyUo899pimTp2q1q1bG79q9R87d+7UqFGj+NQg4D98FyEQCCIiIvTll18qKirKZ+dISUnh2UcBIioqSsOGDdOgQYN8dsXqP3JycnTXXXdp27ZtPj0PgEtwBQsIBOfPn1dOTo5at27ts3NUqVJFDz74oGrUqKGvv/5ap0+f9tm5cHlRUVF65JFHNHXqVLVq1cpnV6z+1+zZs/Xhhx/6/DwALsEVLCBQFC9eXGlpaapUqZLPz5Wdna33339fb731Fs/P8oNKlSpp8ODB6tevX6GfY5UfR44cUevWrZWZmem3cwKQxBUsIHDk5OTo9OnT6tixo8/P5Xa71bhxY/Xr10/Sv7/01+Px+Py8RU3t2rX13HPPafz48br99tv9csXqf40ePVrffPONX88JQBJXsIDAEhoaqpUrV6p69ep+Pe+hQ4c0ZcoUJSYm6sKFC349t9OEhISoQ4cOGjZsmJo0aWJtx6pVq/Tggw9aOz9QxPGYBiDQdOjQQbNmzbJy7mPHjumDDz7QjBkzuEcrn4oXL674+Hg9+uijqlq1qtUt586dU1xcnH766SerO4AijMACAtGSJUvUuHFja+c/efKk3n//fb3//vt8Z9011KxZU3379lWvXr1UunRp23MkSX/729/0zjvv2J4BFGUEFhCImjZtqsWLF9ueoaysLCUkJOjdd9/VkSNHbM8JGGFhYerRo4fuv/9+1a9f3/acS+zevVvt27fnnjrALgILCFSLFi1Ss2bNbM+Q9O+vWVm6dKnmzZunDRs22J5jTcOGDdW3b1/Fx8f79dOA+XHfffcpLS3N9gygqCOwgEDVokULJSUl2Z7xOxkZGUpISNDChQuLxCMeYmNj1aVLF/Xp08fvHz7Ir+TkZA0bNsz2DAAEFhDYPv74Y91+++22Z1zWhQsXlJKSooSEBMddMYmNjVX79u3VrVs3NWrUSC6Xy/aka8rOztadd96p/fv3254CgMACAtudd96pefPm2Z5xTenp6VqyZIk+/fRT7du3z/acArn11lvVpUsXdenSRdWqVbM9J98mTJigSZMm2Z4B4N8ILCDQJScnB9yN1Fezbds2LV26VCkpKfrhhx9sz7mi8PBwNWvWTK1atVJcXJxiY2NtTyqwffv2qU2bNjp//rztKQD+jcACAl27du00Z84c2zMKZO/evUpNTdXq1au1adMmZWVlWdtSunRpNWzYUI0bN1bz5s1Vv359ud3O+E/foEGDtGLFCtszAPwXgQUEOpfLpeXLl6tOnTq2pxSKx+PRjh07tGHDBm3evFk7d+702YMwIyMjVatWLdWsWVO1atXSbbfdpltuuSUo7qXKry+++EJ9+/a1PQPApQgsIBjEx8dr2rRptmcYd/r0ae3cuVPff/+9Dhw4oP379+vAgQP69ddflZmZqczMzEve9goNDVVYWJhKly6t6OhoRUVFqUyZMrrpppsUGxurm266SZUrV1a5cuUs/q/yH6/Xqw4dOmjXrl22pwC4FIEFBAO3260vv/xSlSpVsj0FASQxMVGjR4+2PQPA73lCbC8AcG0ej8fa9xMiMGVnZ2vChAm2ZwC4AgILCBLz5s2zepM4Asv06dN16NAh2zMAXAGBBQSJ06dPa+HChbZnIAAcP35cU6dOtT0DwFUQWEAQmTlzprxer+0ZsGzSpEnKzMy0PQPAVRBYQBDZs2ePPv/8c9szYNG+ffuUkJBgewaAayCwgCAzffp02xNg0csvv6yLFy/angHgGggsIMisX79e33//ve0ZsCA9PV3Lli2zPQNAHhBYQBDiZveiaeLEidyDBwQJAgsIQklJSfJ4PLZnwI/S09P12Wef2Z4BII8ILCAIHT16VGvWrLE9A340fvx4rl4BQYTAAoJUYmKi7Qnwk2+++UYrVqywPQNAPhBYQJBKSUnR0aNHbc+AH0ycOFG5ubm2ZwDIBwILCFIej0dLliyxPQM+tmPHDq1cudL2DAD5RGABQYy3CZ2Pq1dAcCKwgCCWnp6unTt32p4BH8nIyFBqaqrtGQAKgMACgtzy5cttT4CPTJ8+natXQJAisIAgR2A507Fjx/TRRx/ZngGggAgsIMilp6frxx9/tD0Dhs2ePVvZ2dm2ZwAoIAILcICUlBTbE2DQ+fPnlZCQYHsGgEIgsAAH4CtUnCUpKUm//PKL7RkACoHAAhxg8+bNPHTUIXJzc/Xee+/ZngGgkAgswAG8Xi9vEzrEqlWrlJGRYXsGgEIisACHILCcYc6cObYnADCAwAIcYsOGDfJ4PLZnoBAOHz6sL774wvYMAAYQWIBDZGVlaevWrbZnoBCSkpKUk5NjewYAAwgswEHWr19vewIKKDc3l++WBByEwAIcZN26dbYnoIA2bNigvXv32p4BwBACC3CQbdu2cR9WkFqwYIHtCQAMIrAABzl37pzS09Ntz0A+ZWZmKjk52fYMAAYRWIDDbNmyxfYE5NOSJUt07tw52zMAGERgAQ5DYAWfRYsW2Z4AwDACC3CYb7/91vYE5MPhw4e1efNm2zMAGEZgAQ6TkZHBje5BZOnSpcrNzbU9A4BhBBbgMBcuXODj/kFk2bJlticA8AECC3Cg7777zvYE5MGxY8e0adMm2zMA+ACBBTjQnj17bE9AHqxZs0Zer9f2DAA+QGABDnTgwAHbE5AHq1evtj0BgI8QWIADEViBz+v1Ki0tzfYMAD5CYAEOtH//ftsTcA3bt2/X8ePHbc8A4CMEFuBAR48etT0B17Bx40bbEwD4EIEFOFBmZibPwgpwBBbgbAQW4EC5ubnKzMy0PQNXkJubq3/961+2ZwDwIQILcKiTJ0/anoAr2LNnD/dfAQ5HYAEOde7cOdsTcAU7d+60PQGAjxFYgEPl5OTYnoAr4Au5AecjsACHIrACF1ewAOcjsACH4itYAtf3339vewIAHyOwAIcqVqyY7Qm4jJycHB08eND2DAA+RmABDhUREWF7Ai7j8OHDPKMMKAIILMChwsLCbE/AZfA9kUDRQGABDuRyubiCFaB4/hVQNBBYgAPdcMMN3IMVoHjCPlA0EFiAA1WqVMn2BFwBgQUUDQQW4EAEVuA6e/as7QkA/IDAAhzoD3/4g+0JAFCkEViAA9WoUcP2BFyBy+WyPQGAHxBYgAPVrFnT9gRcQWhoqO0JAPyAwAIcxu12q2rVqrZn4Ar4dCdQNBBYgMNUrVpVxYsXtz0DVxAVFWV7AgA/ILAAh2nUqJHtCbgKAgsoGggswGEIrMAWHR1tewIAPyCwAIdp2LCh7Qm4ijJlytieAMAPCCzAQWJiYlS5cmXbM3AVFStWlNvttj0DgI8RWICDtGrViucsBTi3262KFSvangHAxwgswEFatWplewLyIDY21vYEAD5GYAEO4XK5dMcdd9iegTy4+eabbU8A4GMEFuAQdevWVUxMjO0ZyINbb73V9gQAPkZgAQ7RsWNH2xOQRwQW4HwEFuAQBFbwqFmzJt9JCDgcgQU4QGxsrGrUqGF7BvKoRIkSqlKliu0ZAHyIwAIcoHv37rYnIJ94ICzgbAQW4AA9evSwPQH51KRJE9sTAPgQgQUEufr166t69eq2ZyCfbr/9dtsTAPgQgQUEuV69etmegAKIjY1VhQoVbM8A4CMEFhDE3G634uPjbc9AAfHkfcC5CCwgiMXFxals2bK2Z6CA4uLibE8A4CMEFhDEevfubXsCCqF169Zyu922ZwDwAQILCFIRERFq166d7RkohPDwcB7XADgUgQUEqV69eql48eK2Z6CQOnfubHsCAB8gsIAg5HK59NBDD9meAQO6du0ql8tlewYAwwgsIAi1adNGVatWtT0DBlSsWFH16tWzPQOAYQQWEIQGDhxoewIM6tq1q+0JAAwjsIAgU7lyZd155522Z8Cgu+++W6GhobZnADCIwAKCzKBBgxQSwr+6TlK+fHk1bdrU9gwABvFfaSCIhIWFqU+fPrZnwAf45wo4C4EFBJF7771X4eHhtmfAB7p06aJSpUrZngHAEAILCBKhoaEaPHiw7RnwkVKlSqlnz562ZwAwhMACgkT37t0VGxtrewZ8aNCgQTwTC3AIAgsIAi6XS4888ojtGfCx6tWrq0mTJrZnADCAwAKCQOfOnVWjRg3bM+AHPKEfcAYCCwgCf/7zn21PgJ907txZFSpUsD0DQCERWECAa9OmDV+lUoS43W498MADtmcAKCQCCwhwjz76qO0J8LP+/fvruuuusz0DQCEQWEAAa9asGTc9F0E33HCDunTpYnsGgEIgsIAA9vjjj9ueAEtGjBjBIxuAIEZgAQGqVatWatGihe0ZsKR27dpq27at7RkACojAAgKQy+XSU089ZXsGLOMKJhC8CCwgAHXp0kUNGjSwPQOW1a9fX61bt7Y9A0ABEFhAgAkNDdUTTzxhewYCxJgxY2xPAFAABBYQYPr06aNq1arZnoEA0bBhQzVr1sz2DAD5RGABAaRYsWIaOXKk7RkIMKNGjbI9AUA+uW0PAPBfAwYM0B/+8AfbM/zu6NGj+vnnn/Xrr7/q1KlTOnnypLKyspSTk6MzZ85IkkJCQhQeHq6IiAiVKlVK0dHRqlSpkm666SZdf/31lv8X+FbLli3VuHFjbdq0yfYUAHnkqlix4kURWoB1ERERWr9+vaKjo21P8YmzZ89q9+7dSk9PV3p6ujIyMnTgwAHt379f58+fL9Sxy5Qpo6pVq6p69eqqVauWatasqTp16qh48eKG1tu3ceNG3X333bZnAMgbD2EFBIiRI0c6Jq5ycnK0e/dubd68WVu3btXWrVuVkZEhr9frk/MdP35cx48f18aNG3/7WbFixVS3bl01bNhQTZo0UfPmzRUREeGT8/tDkyZN1LFjR61YscL2FAB5wBUsIADExsbqiy++ULFixWxPKbDdu3dr3bp1Wr9+vb766iudOnXK9qRLuN3u3x578J8v0A4JCa7bUDMyMtSuXTt5PB7bUwBcnYfAAgLAzJkz1blzZ9sz8iUnJ0dbtmzRypUrlZycrL1799qelC/R0dGKi4tTfHy8WrduHTRxO3bsWCUkJNieAeDqCCzAtmbNmmnRokW2Z+TJ+fPnlZaWppUrV2rFihX65ZdfbE8yIiIiQnfddZd69+6txo0b255zVceOHVOLFi1+u/kfQEAisACbQkJCtGzZMtWpU8f2lCs6e/asli9fruXLl2vNmjU6d+6c7Uk+VaNGDd1zzz3q2bOnYmJibM+5rPHjx+uNN96wPQPAlRFYgE333nuvXn/9ddszLmv79u2aN2+elixZUiSvloSEhKhFixbq3bu3unbtqhIlStie9JusrCy1bNlSR48etT0FwOURWIAtYWFhWrt2rcqVK2d7ym8OHz6shQsXKikpST/++KPtOQGjTJkyeuCBBzRw4MCAuaqVkJCgsWPH2p4B4PIILMCWF154QcOHD7c9QxcvXtRnn32mxMRErV27Vjk5ObYnBaxixYrprrvu0uDBg1WvXj2rW7xer+Lj47Vt2zarOwBcFoEF2FCtWjWtXLlSbre9f/WOHz+uBQsWaPbs2Tp06JC1HcGqbt26Gjx4sHr06GHtn+PXX3+tbt26+ez5YgAKjMAC/M3lcmnhwoXWvsB3165deu+99/TRRx8V+gnqkG688UYNGTJE/fr1s3Kf1pNPPqn58+f7/bwArorAAvytV69emjJlil/P6fV6tX79er333ntKTU1Vbm6uX89fFERHR2vgwIEaOnSowsPD/XbeEydO6I477tCJEyf8dk4A10RgAf4UHh6utWvX+u1G6QsXLigxMVHTpk0LugeBBqvo6GgNGzZMAwcOVFhYmF/OOWfOHD377LN+OReAPCGwAH968cUXNWTIEJ+f58KFC0pKStIbb7yhn3/+2efnw+9FRkZq8ODBGjJkiM+/A5Eb3oGAQ2AB/lKrVi0tX77cpzdEnzlzRh988IGmT5/umKesB7vSpUtr+PDhGjp0qEqWLOmz82zZskXdu3fnhncgMHhCw8PDX5AUXN94CgSZkJAQzZw5UzfeeKNPjn/mzBnNmDFDw4cP18qVK3X27FmfnAf5d/78ea1fv17z5s1Tbm6uGjRooNDQUOPnqVChgk6ePKmtW7caPzaAfPNyBQvwg8GDB2vcuHHGj5uVlaUZM2Zo2rRpyszMNH58mPfHP/5RTz/9tLp06SKXy2X02FlZWYqLi9OBAweMHhdAvvEWIeBrFStW1OrVq43e8OzxeLRgwQJNnDiRr0sJUvXr19dzzz2n5s2bGz3u6tWr1a9fP6PHBJBvvEUI+Nqbb76pmjVrGjmW1+vV4sWLNXToUC1evFhZWVlGjgv/+8/XEn399deqXbu2ypQpY+S4lStX1r59+7Rr1y4jxwNQILxFCPhSt27d9O677xo5Vlpaml566SXt3LnTyPEQONxut+677z49/fTTioqKKvTxTpw4oTvvvFPHjh0zsA5AAXAFC/CV8PBwzZ07V6VKlSrUcbZv364RI0Zo8uTJfDLQobxer7Zv366kpCRFRESodu3ahbo/q0SJEipfvryWLVtmcCWAfPASVoCPvPjii4V6oOiRI0c0duxYdevWTRs3bjS4DIHq2LFjeuqpp9S5c+dC/zPv2bOnunbtamgZgPziLULAB+Li4jR37twC/e25c+f07rvv6u233+ZxC0WYy+VSjx499Pzzz6t8+fIFOsaxY8fUtm1b3ioE/I+3CAHTwsPDNW/evHx/H11ubq6Sk5M1ePBgLV++XBcvXvTRQgSL9PR0zZ07V6GhobrtttsUEpK//1SXLFlSVapU0SeffOKjhQCuwEtgAYaNHz9eTZo0ydff7Ny5U0OHDtX06dN1+vRpHy1DMPJ4PEpLS1Nqaqrq1KmT76tZVapU0U8//aRvv/3WRwsBXAafIgRMateunebMmZPn12dmZmrChAmaPXu2PB6PD5fBCVwul3r16qW//vWv+fq0YWZmptq2bauDBw/6cB2A/8FbhIApkZGRmjdvXp4+NZibm6uPPvpIAwcOVFpaGt8fhzz79ttvtWjRIlWoUEE1atTI098UL15cNWrU0OLFi328DsD/x1uEgCnjx49Xo0aNrvm69PR0Pfzww5oxYwYPCkWBZGVlKTk5Wdu2bVOTJk0UERFxzb+JjY3VmTNntHnzZj8sBIo83iIETOjQoYNmzZp11dd4PB69++67mjBhgi5cuOCnZXC6EiVK6PHHH9eIESOueRO8x+NR9+7dtW3bNj+tA4osvosQKKzo6Gh9/vnnKlu27BVfs2XLFj3xxBP67rvv/LgMRUnjxo01YcIEVa1a9aqv27t3rzp27KgzZ874aRlQJHEPFlBYkyZNUoMGDS77u+zsbP3jH//QE088wVPY4VOHDh3Shx9+qJycHDVu3PiKV7MiIyN1ww03KCUlxc8LgSKFe7CAwujWrZvGjBlz2d+lpaWpX79+Sk1NVW5urp+XoSjKycnRV199pTVr1qhp06aKjo6+7Ovq1KmjjIwM7d69288LgSKDe7CAgqpQoYJSU1MVGRl5yc9PnTqlcePGKTExkbCCNSVKlNDzzz+vAQMGXPZ7DU+fPq1OnTpp3759FtYBjsc9WEBBhISEaMGCBWrRosUlP09NTdXTTz+tn3/+2dIy4FJ33HGHJk2apAoVKvzud99++63i4+OVnZ1tYRngaB7eGgQK4E9/+tMlcXXs2DENGzZMAwYMIK4QUNLS0tS2bdvLfl1OrVq19Je//MXCKsD5uAcLyKcInvDWAAAD50lEQVS6devqzTffVGhoqCRpzZo16tevn7Zu3Wp5GXB558+fV3Jysnbv3q2WLVuqRIkSv/2uXr162rdvn3bt2mVxIeA43IMF5EepUqW0YsUKVa5cWVlZWRo3bpwSEhJszwLyrHz58nr99dfVunXr33525swZdenSRT/88IPFZYCj8BYhkB8vvfSSKleurG3btqlTp07EFYLO4cOH9cADD2js2LE6e/asJCksLEyzZs1SeHi45XWAcxBYQB5169ZNvXr10oQJE9S9e3f9+OOPticBBZKbm6uEhAR16tRJO3bskCRVqVJFkydPvuwnDgHkH/dgAXkQGxurcePGaciQIVqyZAlfzgxHOHHihJKSkhQeHq4GDRqoatWq8nq92rBhg+1pQLDjHizgWtxut4YMGaL58+fr9OnTtucAPtGhQwe9/vrrioyM1PDhw5WcnGx7EhDMeA4WcC0lS5b87V4VwMkqVqyot99+WzVr1lTXrl256R0oOAILAPBfoaGhGjVqlOLj4xUfH6/MzEzbk4BgRGABAH6vZcuW6tGjh8aOHaucnBzbc4BgQ2ABAC6vXLlyatSoEfdjAflHYAEArsztdis0NFTnz5+3PQUIJh7CCgBwRR6PRx6Px/YMIOjw/CsAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADDCCwAAADD3JIu2h4BAADgIBf/HzKVqPl91gZiAAAAAElFTkSuQmCC";var img$1="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8' standalone='no'%3f%3e%3c!-- Created with Inkscape (http://www.inkscape.org/) --%3e%3csvg width='53' height='53' viewBox='0 0 14.022916 14.022917' version='1.1' id='svg1' inkscape:version='1.3.2 (091e20e%2c 2023-11-25)' sodipodi:docname='gemini-insert-icon.svg' inkscape:export-filename='gemini-inset-icon.png' inkscape:export-xdpi='96' inkscape:export-ydpi='96' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3e %3csodipodi:namedview id='namedview1' pagecolor='white' bordercolor='black' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='true' inkscape:deskcolor='%23d1d1d1' inkscape:document-units='px' inkscape:zoom='3.6780415' inkscape:cx='61.037919' inkscape:cy='67.155305' inkscape:window-width='1704' inkscape:window-height='1127' inkscape:window-x='100' inkscape:window-y='1159' inkscape:window-maximized='0' inkscape:current-layer='layer1' /%3e %3cdefs id='defs1' /%3e %3cg inkscape:label='Layer 1' inkscape:groupmode='layer' id='layer1'%3e %3crect style='display:none%3bfill:black%3bstroke:black%3bstroke-width:0.01' id='rect1' width='14.012917' height='14.012917' x='0.0050000018' y='0.0049999976' /%3e %3cpath id='path1' style='fill:black%3bfill-opacity:1%3bstroke:black%3bstroke-width:0.264583%3bstroke-linecap:round%3bstroke-linejoin:round%3bstroke-dasharray:none' d='m 13.012508%2c13.272509 c 0%2c0 -3.5759556%2c-2.307175 -6.0010493%2c-2.358612 -2.6673662%2c-0.05657 -6.26105039%2c2.098607 -6.26105039%2c2.098607 0%2c0 2.36925789%2c-3.5759479 2.42069399%2c-6.0010462 0.056572%2c-2.6673595 -2.1606951%2c-6.26105063 -2.1606951%2c-6.26105063 0%2c0 3.5759521%2c2.41176333 6.0010515%2c2.46319863 2.6673605%2c0.056572 6.2610503%2c-2.2032008 6.2610503%2c-2.2032008 0%2c0 -2.334512%2c3.5759536 -2.38595%2c6.0010528 -0.05657%2c2.667361 2.125949%2c6.2610512 2.125949%2c6.2610512 z' sodipodi:nodetypes='cccscscsc' /%3e %3cpath id='path1-8' style='fill:white%3bfill-opacity:1%3bstroke:none%3bstroke-width:0.264583%3bstroke-linecap:round%3bstroke-linejoin:round%3bstroke-dasharray:none' d='m 13.012508%2c13.272509 c 0%2c0 -3.5759585%2c-3.9345896 -6.0010521%2c-3.9860277 -2.6673662%2c-0.056573 -6.26104759%2c3.7260227 -6.26104759%2c3.7260227 0%2c0 3.89461389%2c-3.5759453 3.94604999%2c-6.0010436 0.056572%2c-2.6673595 -3.6860511%2c-6.26105323 -3.6860511%2c-6.26105323 0%2c0 3.5759493%2c3.94443513 6.0010487%2c3.99587043 2.6673605%2c0.056572 6.2610531%2c-3.7358726 6.2610531%2c-3.7358726 0%2c0 -3.911256%2c3.5759562 -3.9626921%2c6.0010554 -0.056572%2c2.667361 3.7026911%2c6.2610486 3.7026911%2c6.2610486 z' sodipodi:nodetypes='cccscscsc' /%3e %3c/g%3e%3c/svg%3e";var en$2={"gai.entry.name":"GAI","gai.entry.description":"Create programs using generative AI. Supports Gemini, ChatGPT, Claude, and more."};var ja$2={"gai.entry.name":"GAI","gai.entry.description":"生成AIを利用したプログラムをつくれます。Gemini, ChatGPT, Claude, ローカルLLM などに対応しています。"};var translations$1={en:en$2,ja:ja$2,"ja-Hira":{"gai.entry.name":"GAI","gai.entry.description":"せいせいAI を りよう した プログラム を つくれます。Gemini, ChatGPT, Claude, ローカルLLM など に たいおう しています。"}};var version$2="1.1.1";/**
 * This is an extension for Xcratch.
 *//**
 * Formatter to translate the messages in this extension.
 * This will be replaced which is used in the React component.
 * @param {object} messageData - data for format-message
 * @returns {string} - translated message for the current locale
 */var formatMessage$1=function formatMessage(messageData){return messageData.defaultMessage;};var version$1="v".concat(version$2);var entry={get name(){return formatMessage$1({id:'gai.entry.name',defaultMessage:'GAI',description:'name of the extension'});},extensionId:'gai',extensionURL:'https://yokobond.github.io/xcx-gai/dist/gai.mjs',collaborator:'Koji Yokokawa',iconURL:img$2,insetIconURL:img$1,get description(){return"".concat(formatMessage$1({defaultMessage:'Play with generative AI!',description:'Description for this extension',id:'gai.entry.description'})," (").concat(version$1,")");},tags:['function','image','sound','text','ai'],featured:true,disabled:false,bluetoothRequired:false,internetConnectionRequired:false,helpLink:'https://yokobond.github.io/xcx-gai/',setFormatMessage:function setFormatMessage(formatter){formatMessage$1=formatter;},translationMap:translations$1};function _typeof$2(o){"@babel/helpers - typeof";return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof$2(o);}function _arrayWithHoles(r){if(Array.isArray(r))return r;}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=true,o=false;try{if(i=(t=t.call(r)).next,0===l);else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=true,n=r;}finally{try{if(!f&&null!=t["return"]&&(u=t["return"](),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayLikeToArray$1(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}function _unsupportedIterableToArray$1(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray$1(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$1(r,a):void 0;}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray$1(r,e)||_nonIterableRest();}function _classCallCheck$1(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function");}function toPrimitive$1(t,r){if("object"!=_typeof$2(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r);if("object"!=_typeof$2(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function toPropertyKey$1(t){var i=toPrimitive$1(t,"string");return"symbol"==_typeof$2(i)?i:i+"";}function _defineProperties$1(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||false,o.configurable=true,"value"in o&&(o.writable=true),Object.defineProperty(e,toPropertyKey$1(o.key),o);}}function _createClass$1(e,r,t){return r&&_defineProperties$1(e.prototype,r),t&&_defineProperties$1(e,t),Object.defineProperty(e,"prototype",{writable:false}),e;}function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,'default')?x['default']:x;}/**
 * Types of block
 * @enum {string}
 */var blockType;var hasRequiredBlockType;function requireBlockType(){if(hasRequiredBlockType)return blockType;hasRequiredBlockType=1;var BlockType={/**
     * Boolean reporter with hexagonal shape
     */BOOLEAN:'Boolean',/**
     * A button (not an actual block) for some special action, like making a variable
     */BUTTON:'button',/**
     * Command block
     */COMMAND:'command',/**
     * Specialized command block which may or may not run a child branch
     * The thread continues with the next block whether or not a child branch ran.
     */CONDITIONAL:'conditional',/**
     * Specialized hat block with no implementation function
     * This stack only runs if the corresponding event is emitted by other code.
     */EVENT:'event',/**
     * Hat block which conditionally starts a block stack
     */HAT:'hat',/**
     * Specialized command block which may or may not run a child branch
     * If a child branch runs, the thread evaluates the loop block again.
     */LOOP:'loop',/**
     * General reporter with numeric or string value
     */REPORTER:'reporter'};blockType=BlockType;return blockType;}var blockTypeExports=requireBlockType();var BlockType=/*@__PURE__*/getDefaultExportFromCjs(blockTypeExports);/**
 * Block argument types
 * @enum {string}
 */var argumentType;var hasRequiredArgumentType;function requireArgumentType(){if(hasRequiredArgumentType)return argumentType;hasRequiredArgumentType=1;var ArgumentType={/**
     * Numeric value with angle picker
     */ANGLE:'angle',/**
     * Boolean value with hexagonal placeholder
     */BOOLEAN:'Boolean',/**
     * Numeric value with color picker
     */COLOR:'color',/**
     * Numeric value with text field
     */NUMBER:'number',/**
     * String value with text field
     */STRING:'string',/**
     * String value with matrix field
     */MATRIX:'matrix',/**
     * MIDI note number with note picker (piano) field
     */NOTE:'note',/**
     * Inline image on block (as part of the label)
     */IMAGE:'image'};argumentType=ArgumentType;return argumentType;}var argumentTypeExports=requireArgumentType();var ArgumentType=/*@__PURE__*/getDefaultExportFromCjs(argumentTypeExports);function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function");}function _typeof$1(o){"@babel/helpers - typeof";return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof$1(o);}function toPrimitive(t,r){if("object"!=_typeof$1(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r);if("object"!=_typeof$1(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return String(t);}function toPropertyKey(t){var i=toPrimitive(t,"string");return"symbol"==_typeof$1(i)?i:i+"";}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||false,o.configurable=true,"value"in o&&(o.writable=true),Object.defineProperty(e,toPropertyKey(o.key),o);}}function _createClass(e,r,t){return t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:false}),e;}var color;var hasRequiredColor;function requireColor(){if(hasRequiredColor)return color;hasRequiredColor=1;var Color=/*#__PURE__*/function(){function Color(){_classCallCheck(this,Color);}return _createClass(Color,null,[{key:"RGB_BLACK",get:/**
       * @typedef {object} RGBObject - An object representing a color in RGB format.
       * @property {number} r - the red component, in the range [0, 255].
       * @property {number} g - the green component, in the range [0, 255].
       * @property {number} b - the blue component, in the range [0, 255].
       *//**
       * @typedef {object} HSVObject - An object representing a color in HSV format.
       * @property {number} h - hue, in the range [0-359).
       * @property {number} s - saturation, in the range [0,1].
       * @property {number} v - value, in the range [0,1].
       *//** @type {RGBObject} */function get(){return{r:0,g:0,b:0};}/** @type {RGBObject} */},{key:"RGB_WHITE",get:function get(){return{r:255,g:255,b:255};}/**
       * Convert a Scratch decimal color to a hex string, #RRGGBB.
       * @param {number} decimal RGB color as a decimal.
       * @return {string} RGB color as #RRGGBB hex string.
       */},{key:"decimalToHex",value:function decimalToHex(decimal){if(decimal<0){decimal+=0xFFFFFF+1;}var hex=Number(decimal).toString(16);hex="#".concat('000000'.substr(0,6-hex.length)).concat(hex);return hex;}/**
       * Convert a Scratch decimal color to an RGB color object.
       * @param {number} decimal RGB color as decimal.
       * @return {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
       */},{key:"decimalToRgb",value:function decimalToRgb(decimal){var a=decimal>>24&0xFF;var r=decimal>>16&0xFF;var g=decimal>>8&0xFF;var b=decimal&0xFF;return{r:r,g:g,b:b,a:a>0?a:255};}/**
       * Convert a hex color (e.g., F00, #03F, #0033FF) to an RGB color object.
       * CC-BY-SA Tim Down:
       * https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb
       * @param {!string} hex Hex representation of the color.
       * @return {RGBObject} null on failure, or rgb: {r: red [0,255], g: green [0,255], b: blue [0,255]}.
       */},{key:"hexToRgb",value:function hexToRgb(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b;});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;}/**
       * Convert an RGB color object to a hex color.
       * @param {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
       * @return {!string} Hex representation of the color.
       */},{key:"rgbToHex",value:function rgbToHex(rgb){return Color.decimalToHex(Color.rgbToDecimal(rgb));}/**
       * Convert an RGB color object to a Scratch decimal color.
       * @param {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
       * @return {!number} Number representing the color.
       */},{key:"rgbToDecimal",value:function rgbToDecimal(rgb){return(rgb.r<<16)+(rgb.g<<8)+rgb.b;}/**
      * Convert a hex color (e.g., F00, #03F, #0033FF) to a decimal color number.
      * @param {!string} hex Hex representation of the color.
      * @return {!number} Number representing the color.
      */},{key:"hexToDecimal",value:function hexToDecimal(hex){return Color.rgbToDecimal(Color.hexToRgb(hex));}/**
       * Convert an HSV color to RGB format.
       * @param {HSVObject} hsv - {h: hue [0,360), s: saturation [0,1], v: value [0,1]}
       * @return {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
       */},{key:"hsvToRgb",value:function hsvToRgb(hsv){var h=hsv.h%360;if(h<0)h+=360;var s=Math.max(0,Math.min(hsv.s,1));var v=Math.max(0,Math.min(hsv.v,1));var i=Math.floor(h/60);var f=h/60-i;var p=v*(1-s);var q=v*(1-s*f);var t=v*(1-s*(1-f));var r;var g;var b;switch(i){default:case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;case 4:r=t;g=p;b=v;break;case 5:r=v;g=p;b=q;break;}return{r:Math.floor(r*255),g:Math.floor(g*255),b:Math.floor(b*255)};}/**
       * Convert an RGB color to HSV format.
       * @param {RGBObject} rgb - {r: red [0,255], g: green [0,255], b: blue [0,255]}.
       * @return {HSVObject} hsv - {h: hue [0,360), s: saturation [0,1], v: value [0,1]}
       */},{key:"rgbToHsv",value:function rgbToHsv(rgb){var r=rgb.r/255;var g=rgb.g/255;var b=rgb.b/255;var x=Math.min(Math.min(r,g),b);var v=Math.max(Math.max(r,g),b);// For grays, hue will be arbitrarily reported as zero. Otherwise, calculate
var h=0;var s=0;if(x!==v){var f=r===x?g-b:g===x?b-r:r-g;var i=r===x?3:g===x?5:1;h=(i-f/(v-x))*60%360;s=(v-x)/v;}return{h:h,s:s,v:v};}/**
       * Linear interpolation between rgb0 and rgb1.
       * @param {RGBObject} rgb0 - the color corresponding to fraction1 <= 0.
       * @param {RGBObject} rgb1 - the color corresponding to fraction1 >= 1.
       * @param {number} fraction1 - the interpolation parameter. If this is 0.5, for example, mix the two colors equally.
       * @return {RGBObject} the interpolated color.
       */},{key:"mixRgb",value:function mixRgb(rgb0,rgb1,fraction1){if(fraction1<=0)return rgb0;if(fraction1>=1)return rgb1;var fraction0=1-fraction1;return{r:fraction0*rgb0.r+fraction1*rgb1.r,g:fraction0*rgb0.g+fraction1*rgb1.g,b:fraction0*rgb0.b+fraction1*rgb1.b};}}]);}();color=Color;return color;}var cast;var hasRequiredCast;function requireCast(){if(hasRequiredCast)return cast;hasRequiredCast=1;var Color=requireColor();/**
   * @fileoverview
   * Utilities for casting and comparing Scratch data-types.
   * Scratch behaves slightly differently from JavaScript in many respects,
   * and these differences should be encapsulated below.
   * For example, in Scratch, add(1, join("hello", world")) -> 1.
   * This is because "hello world" is cast to 0.
   * In JavaScript, 1 + Number("hello" + "world") would give you NaN.
   * Use when coercing a value before computation.
   */var Cast=/*#__PURE__*/function(){function Cast(){_classCallCheck(this,Cast);}return _createClass(Cast,null,[{key:"toNumber",value:/**
       * Scratch cast to number.
       * Treats NaN as 0.
       * In Scratch 2.0, this is captured by `interp.numArg.`
       * @param {*} value Value to cast to number.
       * @return {number} The Scratch-casted number value.
       */function toNumber(value){// If value is already a number we don't need to coerce it with
// Number().
if(typeof value==='number'){// Scratch treats NaN as 0, when needed as a number.
// E.g., 0 + NaN -> 0.
if(Number.isNaN(value)){return 0;}return value;}if(typeof value==='string'){// Replace full-width numbers with half-width ones.
value=value.replace(/[０-９＋．ｅ]/g,function(s){return String.fromCharCode(s.charCodeAt(0)-0xFEE0);});value=value.replace(/[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]/g,'-');}var n=Number(value);if(Number.isNaN(n)){// Scratch treats NaN as 0, when needed as a number.
// E.g., 0 + NaN -> 0.
return 0;}return n;}/**
       * Scratch cast to boolean.
       * In Scratch 2.0, this is captured by `interp.boolArg.`
       * Treats some string values differently from JavaScript.
       * @param {*} value Value to cast to boolean.
       * @return {boolean} The Scratch-casted boolean value.
       */},{key:"toBoolean",value:function toBoolean(value){// Already a boolean?
if(typeof value==='boolean'){return value;}if(typeof value==='string'){// These specific strings are treated as false in Scratch.
if(value===''||value==='0'||value.toLowerCase()==='false'){return false;}// All other strings treated as true.
return true;}// Coerce other values and numbers.
return Boolean(value);}/**
       * Scratch cast to string.
       * @param {*} value Value to cast to string.
       * @return {string} The Scratch-casted string value.
       */},{key:"toString",value:function toString(value){return String(value).replace(/\\n/g,'\n').replace(/\\t/g,'\t');}/**
       * Cast any Scratch argument to an RGB color array to be used for the renderer.
       * @param {*} value Value to convert to RGB color array.
       * @return {Array.<number>} [r,g,b], values between 0-255.
       */},{key:"toRgbColorList",value:function toRgbColorList(value){var color=Cast.toRgbColorObject(value);return[color.r,color.g,color.b];}/**
       * Cast any Scratch argument to an RGB color object to be used for the renderer.
       * @param {*} value Value to convert to RGB color object.
       * @return {RGBOject} [r,g,b], values between 0-255.
       */},{key:"toRgbColorObject",value:function toRgbColorObject(value){var color;if(typeof value==='string'&&value.substring(0,1)==='#'){color=Color.hexToRgb(value);// If the color wasn't *actually* a hex color, cast to black
if(!color)color={r:0,g:0,b:0,a:255};}else{color=Color.decimalToRgb(Cast.toNumber(value));}return color;}/**
       * Determine if a Scratch argument is a white space string (or null / empty).
       * @param {*} val value to check.
       * @return {boolean} True if the argument is all white spaces or null / empty.
       */},{key:"isWhiteSpace",value:function isWhiteSpace(val){return val===null||typeof val==='string'&&val.trim().length===0;}/**
       * Compare two values, using Scratch cast, case-insensitive string compare, etc.
       * In Scratch 2.0, this is captured by `interp.compare.`
       * @param {*} v1 First value to compare.
       * @param {*} v2 Second value to compare.
       * @returns {number} Negative number if v1 < v2; 0 if equal; positive otherwise.
       */},{key:"compare",value:function compare(v1,v2){var n1=Number(v1);var n2=Number(v2);if(n1===0&&Cast.isWhiteSpace(v1)){n1=NaN;}else if(n2===0&&Cast.isWhiteSpace(v2)){n2=NaN;}if(isNaN(n1)||isNaN(n2)){// At least one argument can't be converted to a number.
// Scratch compares strings as case insensitive.
var s1=Cast.toString(v1).toLowerCase();var s2=Cast.toString(v2).toLowerCase();if(s1<s2){return-1;}else if(s1>s2){return 1;}return 0;}// Handle the special case of Infinity
if(n1===Infinity&&n2===Infinity||n1===-Infinity&&n2===-Infinity){return 0;}// Compare as numbers.
return n1-n2;}/**
       * Determine if a Scratch argument number represents a round integer.
       * @param {*} val Value to check.
       * @return {boolean} True if number looks like an integer.
       */},{key:"isInt",value:function isInt(val){// Values that are already numbers.
if(typeof val==='number'){if(isNaN(val)){// NaN is considered an integer.
return true;}// True if it's "round" (e.g., 2.0 and 2).
return val===parseInt(val,10);}else if(typeof val==='boolean'){// `True` and `false` always represent integer after Scratch cast.
return true;}else if(typeof val==='string'){// If it contains a decimal point, don't consider it an int.
return val.indexOf('.')<0;}return false;}},{key:"LIST_INVALID",get:function get(){return'INVALID';}},{key:"LIST_ALL",get:function get(){return'ALL';}/**
       * Compute a 1-based index into a list, based on a Scratch argument.
       * Two special cases may be returned:
       * LIST_ALL: if the block is referring to all of the items in the list.
       * LIST_INVALID: if the index was invalid in any way.
       * @param {*} index Scratch arg, including 1-based numbers or special cases.
       * @param {number} length Length of the list.
       * @param {boolean} acceptAll Whether it should accept "all" or not.
       * @return {(number|string)} 1-based index for list, LIST_ALL, or LIST_INVALID.
       */},{key:"toListIndex",value:function toListIndex(index,length,acceptAll){if(typeof index!=='number'){if(index==='all'){return acceptAll?Cast.LIST_ALL:Cast.LIST_INVALID;}if(index==='last'){if(length>0){return length;}return Cast.LIST_INVALID;}else if(index==='random'||index==='any'){if(length>0){return 1+Math.floor(Math.random()*length);}return Cast.LIST_INVALID;}}index=Math.floor(Cast.toNumber(index));if(index<1||index>length){return Cast.LIST_INVALID;}return index;}}]);}();cast=Cast;return cast;}var castExports=requireCast();var Cast=/*@__PURE__*/getDefaultExportFromCjs(castExports);var en$1={"gai.name":"GAI","gai.generate":"generate [PROMPT]","gai.generateDefault":"What is AI?","gai.costumeData":"costume data [COSTUME]","gai.backdropData":"backdrop data [BACKDROP]","gai.snapshotData":"snapshot data","gai.soundData":"sound data [SOUND]","gai.startListening":"start listening","gai.stopListening":"stop listening","gai.listenedData":"listened data","gai.chat":"chat [PROMPT]","gai.chatDefault":"Hello AI!","gai.chatHistory":"chat history","gai.startChat":"start chat with history [HISTORY]","gai.startChatDefault":"Hello AI!","gai.embeddingFor":"embedding for [CONTENT]","gai.embeddingForDefault":"cat","gai.embeddingDistanceOf":"[METRIC] of [VECTOR_A] and [VECTOR_B]","gai.distanceMetricMenu.dotProduct":"Dot product","gai.distanceMetricMenu.cosine":"Cosine distance","gai.distanceMetricMenu.euclidean":"Euclidean distance","gai.whenResponseReceived":"when response received","gai.responseText":"response text","gai.responseSafetyRating":"response #[CANDIDATE_INDEX] safety rating [HARM_CATEGORY]","gai.setSafetyRating":"set [HARM_CATEGORY] to [BLOCK_THRESHOLD]","gai.whenPartialResponseReceived":"when partial response received","gai.partialResponseText":"partial response text","gai.setGenerationConfig":"set generation [CONFIG] to [VALUE]","gai.generationConfigMenu.maxOutputTokens":"Max output tokens","gai.generationConfigMenu.stopSequences":"Stop sequences","gai.generationConfigMenu.temperature":"Temperature","gai.generationConfigMenu.topP":"Top P","gai.generationConfigMenu.topK":"Top K","gai.generationConfigMenu.systemInstruction":"System Instruction","gai.generationConfigMenu.responseSchema":"Response Schema","gai.generationConfig":"generation [CONFIG]","gai.setFunctionCallingMode":"set function calling mode [MODE]","gai.returnResultToAI":"return [RESULT] to AI","gai.setModel":"use model [MODEL_ID]","gai.getModel":"model","gai.getModelIDAtIndex":"model ID at [MODEL_INDEX]","gai.getMaxModelNumber":"max model number","gai.getFileDataAtIndex":"generated file data at [INDEX]","gai.getFileMediaTypeAtIndex":"generated file media type at [INDEX]","gai.getMaxFileNumber":"max generated file count","gai.functionCallingModeMenu.auto":"Auto","gai.functionCallingModeMenu.required":"Required","gai.functionCallingModeMenu.none":"None","gai.getGenerativeModelID":"generative model ID at [MODEL_INDEX]","gai.getMaxGenerativeModelNumber":"max generative model number","gai.getEmbeddingModelID":"embedding model ID at [MODEL_INDEX]","gai.getMaxEmbeddingModelNumber":"max embedding model number","gai.harmCategoryMenu.hateSpeech":"Hate speech","gai.harmCategoryMenu.sexuallyExplicit":"Sexually explicit","gai.harmCategoryMenu.harassment":"Harassment","gai.harmCategoryMenu.dangerousContent":"Dangerous content","gai.harmCategorySettingMenu.all":"All harm categories","gai.harmBlockThresholdMenu.unspecified":"Unspecified","gai.harmBlockThresholdMenu.blockMost":"Block most","gai.harmBlockThresholdMenu.blockSome":"Block some","gai.harmBlockThresholdMenu.blockFew":"Block few","gai.harmBlockThresholdMenu.blockNone":"Block none","gai.askApiKey":"ask API key with message [MESSAGE]","gai.askApiKeyDefault":"Please enter API key","gai.setApiKey":"set API key to [KEY]","gai.apiKey":"API key","gai.apiKeyDialog.message":"set API key for AI of [targetName]","gai.apiKeyDialog.howToGetApiKey":"get API key","gai.apiKeyDialog.cancel":"cancel","gai.apiKeyDialog.set":"set","gai.setBaseUrl":"set base URL to [URL]","gai.baseUrl":"base URL","gai.adapterMenu.gemini":"Gemini","gai.adapterMenu.openai":"OpenAI","gai.adapterMenu.openaiCompatible":"OpenAI Compatible","gai.adapterMenu.anthropic":"Anthropic","gai.getValueFromJson":"get [PATH] from JSON [JSON]","gai.getItemOfJsonArray":"item [INDEX] of JSON array [JSON]","gai.lengthOfJsonArray":"length of JSON array [JSON]","gai.setApiType":"set API to [API]","gai.getApiType":"API"};var ja$1={"gai.name":"GAI","gai.generate":"生成[PROMPT]","gai.generateDefault":"AIとは?","gai.costumeData":"コスチューム[COSTUME]のデータ","gai.backdropData":"背景[BACKDROP]のデータ","gai.snapshotData":"スナップショットのデータ","gai.soundData":"音[SOUND]のデータ","gai.startListening":"聞き取り開始","gai.stopListening":"聞き取り終了","gai.listenedData":"聞き取ったデータ","gai.chat":"チャット[PROMPT]","gai.chatDefault":"こんにちはAI!","gai.chatHistory":"チャットの履歴","gai.startChatDefault":"こんにちはAI!","gai.startChat":"[HISTORY]に続けてチャットを始める","gai.embeddingFor":"[CONTENT]のエンベディング","gai.embeddingForDefault":"ねこ","gai.embeddingDistanceOf":"[VECTOR_A]と[VECTOR_B]の[METRIC]","gai.distanceMetricMenu.dotProduct":"内積","gai.distanceMetricMenu.cosine":"コサイン距離","gai.distanceMetricMenu.euclidean":"ユークリッド距離","gai.responseText":"回答文","gai.whenResponseReceived":"回答を受け取ったとき","gai.responseSafetyRating":"回答[CANDIDATE_INDEX]の[HARM_CATEGORY]のレベル","gai.setSafetyRating":"[HARM_CATEGORY]の[BLOCK_THRESHOLD]","gai.whenPartialResponseReceived":"回答の一部を受け取ったとき","gai.partialResponseText":"回答の一部","gai.setGenerationConfig":"生成の[CONFIG]を[VALUE]にする","gai.generationConfigMenu.maxOutputTokens":"最大トークン数","gai.generationConfigMenu.stopSequences":"ストップシーケンス","gai.generationConfigMenu.temperature":"温度","gai.generationConfigMenu.topP":"Top P","gai.generationConfigMenu.topK":"Top K","gai.generationConfigMenu.systemInstruction":"システム インストラクション","gai.generationConfigMenu.responseSchema":"レスポンス スキーマ","gai.generationConfig":"生成の[CONFIG]","gai.setFunctionCallingMode":"関数呼び出しを[MODE]","gai.returnResultToAI":"AIに結果[RESULT]を返す","gai.setModel":"モデルに[MODEL_ID]を使う","gai.getModel":"モデル","gai.getModelIDAtIndex":"モデルの[MODEL_INDEX]番目のID","gai.getMaxModelNumber":"モデルの数","gai.getFileDataAtIndex":"[INDEX]番目の生成ファイルのデータ","gai.getFileMediaTypeAtIndex":"[INDEX]番目の生成ファイルのメディアタイプ","gai.getMaxFileNumber":"生成ファイルの数","gai.functionCallingModeMenu.auto":"使う","gai.functionCallingModeMenu.required":"必ず使う","gai.functionCallingModeMenu.none":"使わない","gai.getGenerativeModelID":"生成に使えるモデルの[MODEL_INDEX]番目のID","gai.getMaxGenerativeModelNumber":"生成に使えるモデルの数","gai.getEmbeddingModelID":"埋め込みに使えるモデルの[MODEL_INDEX]番目のID","gai.getMaxEmbeddingModelNumber":"埋め込みに使えるモデルの数","gai.harmCategoryMenu.hateSpeech":"ヘイトスピーチ","gai.harmCategoryMenu.sexuallyExplicit":"露骨な性的表現","gai.harmCategoryMenu.harassment":"ハラスメント","gai.harmCategoryMenu.dangerousContent":"危険な内容","gai.harmCategorySettingMenu.all":"すべての危険な内容","gai.harmBlockThresholdMenu.unspecified":"設定をしない","gai.harmBlockThresholdMenu.blockMost":"ほとんどをブロックする","gai.harmBlockThresholdMenu.blockSome":"一部をブロックする","gai.harmBlockThresholdMenu.blockFew":"少しをブロックする","gai.harmBlockThresholdMenu.blockNone":"ブロックをしない","gai.askApiKey":"[MESSAGE]とメッセージを出してAPIキーを聞く","gai.askApiKeyDefault":"APIキーを入力してください","gai.setApiKey":"APIキーを[KEY]にする","gai.apiKey":"APIキー","gai.apiKeyDialog.message":"[targetName] のAIのAPIキーを設定してください","gai.apiKeyDialog.howToGetApiKey":"APIキーを取得","gai.apiKeyDialog.cancel":"キャンセル","gai.apiKeyDialog.set":"設定","gai.setBaseUrl":"ベースURLを[URL]にする","gai.baseUrl":"ベースURL","gai.adapterMenu.gemini":"Gemini","gai.adapterMenu.openai":"OpenAI","gai.adapterMenu.openaiCompatible":"OpenAI互換","gai.adapterMenu.anthropic":"Anthropic","gai.getValueFromJson":"JSON [JSON]から[PATH]を取得","gai.getItemOfJsonArray":"JSON配列[JSON]の[INDEX]番目","gai.lengthOfJsonArray":"JSON配列[JSON]の長さ","gai.setApiType":"APIを[API]にする","gai.getApiType":"API"};var translations={en:en$1,ja:ja$1,"ja-Hira":{"gai.name":"GAI","gai.generate":"せいせい[PROMPT]","gai.generateDefault":"AIとは?","gai.costumeData":"コスチューム[COSTUME]の データ","gai.backdropData":"はいけい[BACKDROP]の データ","gai.snapshotData":"スナップショット の データ","gai.soundData":"おと[SOUND]の データ","gai.startListening":"ききとり かいし","gai.stopListening":"ききとり しゅうりょう","gai.listenedData":"ききとった データ","gai.chat":"チャット[PROMPT]","gai.chatDefault":"こんにちはAI!","gai.chatHistory":"チャット の きろく","gai.startChat":"[HISTORY]に つづけて チャット を はじめる","gai.startChatDefault":"こんにちはAI!","gai.embeddingFor":"[CONTENT]の エンベディング","gai.embeddingForDefault":"ねこ","gai.embeddingDistanceOf":"[VECTOR_A]と[VECTOR_B]の[METRIC]","gai.distanceMetricMenu.dotProduct":"ないせき","gai.distanceMetricMenu.cosine":"コサイン きょり","gai.distanceMetricMenu.euclidean":"ユークリッド きょり","gai.whenResponseReceived":"かいとう を うけとった とき","gai.responseText":"かいとうぶん","gai.responseSafetyRating":"かいとう[CANDIDATE_INDEX]の[HARM_CATEGORY]の レベル","gai.setSafetyRating":"[HARM_CATEGORY]の[BLOCK_THRESHOLD]","gai.whenPartialResponseReceived":"かいとう の いちぶ を うけとった とき","gai.partialResponseText":"かいとう の いちぶ","gai.setGenerationConfig":"せいせい の[CONFIG]を[VALUE]に する","gai.generationConfigMenu.maxOutputTokens":"さいだいトークンすう","gai.generationConfigMenu.stopSequences":"ストップシーケンス","gai.generationConfigMenu.temperature":"おんど","gai.generationConfigMenu.topP":"トップP","gai.generationConfigMenu.topK":"トップK","gai.generationConfigMenu.systemInstruction":"システム インストラクション","gai.generationConfigMenu.responseSchema":"レスポンス スキーマ","gai.generationConfig":"せいせい の[CONFIG]","gai.setFunctionCallingMode":"かんすう よびだし を[MODE]","gai.returnResultToAI":"AI に けっか[RESULT]を かえす","gai.setModel":"モデル に[MODEL_ID]を つかう","gai.getModel":"モデル","gai.getModelIDAtIndex":"モデル の[MODEL_INDEX]ばんめ の ID","gai.getMaxModelNumber":"モデル の かず","gai.getFileDataAtIndex":"[INDEX]ばんめ の せいせいファイル の データ","gai.getFileMediaTypeAtIndex":"[INDEX]ばんめ の せいせいファイル の メディアタイプ","gai.getMaxFileNumber":"せいせいファイル の かず","gai.functionCallingModeMenu.auto":"つかう","gai.functionCallingModeMenu.required":"かならず つかう","gai.functionCallingModeMenu.none":"つかわない","gai.getGenerativeModelID":"せいせい に つかえる モデル の[MODEL_INDEX]ばんめ の ID","gai.getMaxGenerativeModelNumber":"せいせい に つかえる モデル の かず","gai.getEmbeddingModelID":"うめこみ に つかえる モデル の[MODEL_INDEX]ばんめ の ID","gai.getMaxEmbeddingModelNumber":"うめこみ に つかえる モデル の かず","gai.harmCategoryMenu.hateSpeech":"ヘイトスピーチ","gai.harmCategoryMenu.sexuallyExplicit":"ろこつな せいてき ひょうげん","gai.harmCategoryMenu.harassment":"ハラスメント","gai.harmCategoryMenu.dangerousContent":"きけんな ないよう","gai.harmCategorySettingMenu.all":"すべて の きけんな ないよう","gai.harmBlockThresholdMenu.unspecified":"せってい を しない","gai.harmBlockThresholdMenu.blockMost":"ほとんど を ブロックする","gai.harmBlockThresholdMenu.blockSome":"いちぶ を ブロックする","gai.harmBlockThresholdMenu.blockFew":"すこし を ブロックする","gai.harmBlockThresholdMenu.blockNone":"ブロック を しない","gai.askApiKey":"[MESSAGE]と メッセージ を だして APIキー を きく","gai.askApiKeyDefault":"APIキー を にゅうりょく してください","gai.setApiKey":"APIキー を[KEY]に する","gai.apiKey":"APIキー","gai.apiKeyDialog.message":"[targetName] の AI の APIキー を せってい してください","gai.apiKeyDialog.howToGetApiKey":"APIキー を しゅとく","gai.apiKeyDialog.cancel":"キャンセル","gai.apiKeyDialog.set":"せってい","gai.setBaseUrl":"ベースURL を[URL]に する","gai.baseUrl":"ベースURL","gai.adapterMenu.gemini":"Gemini","gai.adapterMenu.openai":"OpenAI","gai.adapterMenu.openaiCompatible":"OpenAIごかん","gai.adapterMenu.anthropic":"Anthropic","gai.getValueFromJson":"JSON [JSON]から[PATH]を しゅとく","gai.getItemOfJsonArray":"JSONはいれつ[JSON]の[INDEX]ばんめ","gai.lengthOfJsonArray":"JSONはいれつ[JSON]の ながさ","gai.setApiType":"APIを[API]にする","gai.getApiType":"API"}};var img="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABZlJREFUWIXNmE1IXFcUgL878X+ciraKaSsGHR21qU1MNAjB0BT8SxtJViELF2aRkGCwi5DQhW4MgSxKoRSEdlHaQiAp1MYWUaukKNi0jjFKiqbgFAohEqP1b8afcU4X773pczK/2jQ5cGHefefc+e6595x37lUiwssslhcNEEn8gEqpHKXUuFLqvRcJpLO8Yfz2A4rIX8A68JNSqlMplfsCwN5RSv0K9Po7RcTfgDJgzWq1bgArwMdAmlnneTSgBPhBKbWqlBKg2v8uiHJfWlraZmFhoQBuYAH4EEh5DmDFQCfgttlsXqvV6gV6tugEMSoDVux2u9TX1wsgwLIO2ga8tkMoC/A+MKg7wJufny/79+83HFIUFlAfpB/YPH78uLS2thqQoi+7B+gCqoG4KKEUcAj4FHgKLBpj1tTUSGNjowBrwNeBtipYHlRKHQR+BlKuXbtGdnY258+fx+Px+LcusATEAUPA98AfgAtYBV4FsoBSoBao0CGTdRssFguXLl0iJSWFtrY2dO8ViMijLTBhZj0BSHx8vIyMjMjY2JjY7XazN83NDczrnlkG/tafV4Pp5+TkyMDAgNy8eVP0oFgFPgnKEQaw0ViK4uJicbvdsrCwIOfOnTMGjblZLBY5c+aMzM/Py+TkpNhsNvMEX48VMEnfcwLIlStXxJDBwUEpKSmJCa6qqkqcTqeIiLjdbtm7d6/xbgP4JiRHhM39LeADJCkpSVwulx/S6/XKrVu3pKKiIiTUrl27pLa2Vrq7u8Usly9fNustAftCMQQNEkOUUg3AV8ArAKdOneLGjRvP6I2MjNDb28vU1BRra2vs3r2bsrIyampqyMrK2qJ7//59ysvL2djYMLpcIpIXEiKCB5PRwl8AUUrJxMSE7EQqKysD01ZLWIZwL3XI383Ldvbs2W3D9ff3B26DFSBvp4CfAZvGoOnp6bK2trYtwLq6ukDARxH/PwrAJrTc5h94aGgoZrjp6elg6Slk9BotmoJ1FvCaO5xOZxRmW6Wvr8+YsCFe4EEku2gAn6LN1i8zMzMxwQE8fPgwsMsD/BnJLhrApMCOxMTEqKDMYkorhvjQCuSwEg3gHiDe3OFwOKLl8ktmZmZgVxyQEckuGsAitHyojRoXx9GjR2OCAzhw4EBgVyJRAEYTxZOYIu/06dOx5xcR8Xg8kp6eHhjF30X8/whwGQSUTHfv3t0WoIjIhQsXAgEf7xTQX3KhV787kdHR0UDAVSAzHEOkYuEesA8gOTmZ8fFx7Hb7Fp3Z2Vl6e3txOp08efKEhIQEioqKqK6uprS09JkxGxoauH37tvG4DDSLyJcx70GgEK2QFECuXr26xRs9PT1SX18vcXFxIcutw4cPS2dnp2xubvrtpqamJD4+3qx3Z1tLDHSgVzLl5eWyvr7uX6YjR47EVKyWlpbK8PCwH7KlpSVwmUOevcMFxwogGRkZ4nK5ZG5uTpqamsRisWy73G9ubpbFxUVZWlqSgoICc0XTHCtgO+BWSklXV5cMDAxITk5OJAgv/x5LQ+o5HA6ZmJiQ4eFh8/ZwRR0kSqksYBqwtre3s7y8zPXr1/H5fGY1D9qnSgFjwG/ADDCHloDzgbfQzsI+tM9lgmFstVrp6OjA5XLR2toKWrB8ICJ3CJQg3vscWD1x4oRUV1ebZ+/WwcbQrkIKw21ufSwLcFBfkRm0lOWvLS9evCgnT54UfRK/RFxioABwOxwOyc3NNcAWgcfAR0B2JKgwsAp4F/hRn+w6IMeOHZO8vDzRvVgZCbA7NTV1w2az+XSDe0A9YNkuWAjYPOALAzQ3N1dSU1N9wM8hAdHuWoywHwKq/kuoEKB70I627pSUlE19C5WHAnwAjAKHnjdYENC3gQH9SOAMBfjm/w0WBLQO7U4ox+gL+y1+GeSlv+X/B4bYrjXAURHDAAAAAElFTkSuQmCC";/**
 * Whether debug mode is enabled.
 * @type {boolean}
 */var DEBUG;/**
 * Check if debug mode is enabled.
 * @returns {boolean} - true if debug mode is enabled.
 */var checkDebugMode=function checkDebugMode(){if(typeof DEBUG!=='undefined'){return DEBUG;}try{var urlParams=new URLSearchParams(window.location.href.split('?')[1].toLowerCase());if(urlParams.get('debug')==='true'||urlParams.get('debug')===''){DEBUG=true;}else{DEBUG=false;}}catch(error){// ignore
}return DEBUG;};function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray$1(r);}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r);}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray$1(r)||_nonIterableSpread();}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value;}catch(n){return void e(n);}i.done?t(u):Promise.resolve(u).then(r,o);}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n);}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n);}_next(void 0);});};}function _defineProperty(e,r,t){return(r=toPropertyKey$1(r))in e?Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true}):e[r]=t,e;}var regeneratorRuntime$1={exports:{}};var OverloadYield={exports:{}};var hasRequiredOverloadYield;function requireOverloadYield(){if(hasRequiredOverloadYield)return OverloadYield.exports;hasRequiredOverloadYield=1;(function(module){function _OverloadYield(e,d){this.v=e,this.k=d;}module.exports=_OverloadYield,module.exports.__esModule=true,module.exports["default"]=module.exports;})(OverloadYield);return OverloadYield.exports;}var regenerator$1={exports:{}};var regeneratorDefine={exports:{}};var hasRequiredRegeneratorDefine;function requireRegeneratorDefine(){if(hasRequiredRegeneratorDefine)return regeneratorDefine.exports;hasRequiredRegeneratorDefine=1;(function(module){function _regeneratorDefine(e,r,n,t){var i=Object.defineProperty;try{i({},"",{});}catch(e){i=0;}module.exports=_regeneratorDefine=function regeneratorDefine(e,r,n,t){function o(r,n){_regeneratorDefine(e,r,function(e){return this._invoke(r,n,e);});}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2));},module.exports.__esModule=true,module.exports["default"]=module.exports,_regeneratorDefine(e,r,n,t);}module.exports=_regeneratorDefine,module.exports.__esModule=true,module.exports["default"]=module.exports;})(regeneratorDefine);return regeneratorDefine.exports;}var hasRequiredRegenerator$1;function requireRegenerator$1(){if(hasRequiredRegenerator$1)return regenerator$1.exports;hasRequiredRegenerator$1=1;(function(module){var regeneratorDefine=requireRegeneratorDefine();function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return regeneratorDefine(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=false,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a;}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0));}if(o||r>1)return a;throw y=true,n;}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0);}else 1===c&&(t=i["return"])&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e;}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break;}catch(t){i=e,c=1,u=t;}finally{f=1;}}return{value:t,done:y};};}(r,o,i),true),u;}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(regeneratorDefine(t={},n,function(){return this;}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,regeneratorDefine(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e;}return GeneratorFunction.prototype=GeneratorFunctionPrototype,regeneratorDefine(u,"constructor",GeneratorFunctionPrototype),regeneratorDefine(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",regeneratorDefine(GeneratorFunctionPrototype,o,"GeneratorFunction"),regeneratorDefine(u),regeneratorDefine(u,o,"Generator"),regeneratorDefine(u,n,function(){return this;}),regeneratorDefine(u,"toString",function(){return"[object Generator]";}),(module.exports=_regenerator=function _regenerator(){return{w:i,m:f};},module.exports.__esModule=true,module.exports["default"]=module.exports)();}module.exports=_regenerator,module.exports.__esModule=true,module.exports["default"]=module.exports;})(regenerator$1);return regenerator$1.exports;}var regeneratorAsync={exports:{}};var regeneratorAsyncGen={exports:{}};var regeneratorAsyncIterator={exports:{}};var hasRequiredRegeneratorAsyncIterator;function requireRegeneratorAsyncIterator(){if(hasRequiredRegeneratorAsyncIterator)return regeneratorAsyncIterator.exports;hasRequiredRegeneratorAsyncIterator=1;(function(module){var OverloadYield=requireOverloadYield();var regeneratorDefine=requireRegeneratorDefine();function AsyncIterator(t,e){function n(r,o,i,f){try{var c=t[r](o),u=c.value;return u instanceof OverloadYield?e.resolve(u.v).then(function(t){n("next",t,i,f);},function(t){n("throw",t,i,f);}):e.resolve(u).then(function(t){c.value=t,i(c);},function(t){return n("throw",t,i,f);});}catch(t){f(t);}}var r;this.next||(regeneratorDefine(AsyncIterator.prototype),regeneratorDefine(AsyncIterator.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this;})),regeneratorDefine(this,"_invoke",function(t,o,i){function f(){return new e(function(e,r){n(t,i,e,r);});}return r=r?r.then(f,f):f();},true);}module.exports=AsyncIterator,module.exports.__esModule=true,module.exports["default"]=module.exports;})(regeneratorAsyncIterator);return regeneratorAsyncIterator.exports;}var hasRequiredRegeneratorAsyncGen;function requireRegeneratorAsyncGen(){if(hasRequiredRegeneratorAsyncGen)return regeneratorAsyncGen.exports;hasRequiredRegeneratorAsyncGen=1;(function(module){var regenerator=requireRegenerator$1();var regeneratorAsyncIterator=requireRegeneratorAsyncIterator();function _regeneratorAsyncGen(r,e,t,o,n){return new regeneratorAsyncIterator(regenerator().w(r,e,t,o),n||Promise);}module.exports=_regeneratorAsyncGen,module.exports.__esModule=true,module.exports["default"]=module.exports;})(regeneratorAsyncGen);return regeneratorAsyncGen.exports;}var hasRequiredRegeneratorAsync;function requireRegeneratorAsync(){if(hasRequiredRegeneratorAsync)return regeneratorAsync.exports;hasRequiredRegeneratorAsync=1;(function(module){var regeneratorAsyncGen=requireRegeneratorAsyncGen();function _regeneratorAsync(n,e,r,t,o){var a=regeneratorAsyncGen(n,e,r,t,o);return a.next().then(function(n){return n.done?n.value:a.next();});}module.exports=_regeneratorAsync,module.exports.__esModule=true,module.exports["default"]=module.exports;})(regeneratorAsync);return regeneratorAsync.exports;}var regeneratorKeys={exports:{}};var hasRequiredRegeneratorKeys;function requireRegeneratorKeys(){if(hasRequiredRegeneratorKeys)return regeneratorKeys.exports;hasRequiredRegeneratorKeys=1;(function(module){function _regeneratorKeys(e){var n=Object(e),r=[];for(var t in n)r.unshift(t);return function e(){for(;r.length;)if((t=r.pop())in n)return e.value=t,e.done=false,e;return e.done=true,e;};}module.exports=_regeneratorKeys,module.exports.__esModule=true,module.exports["default"]=module.exports;})(regeneratorKeys);return regeneratorKeys.exports;}var regeneratorValues={exports:{}};var _typeof={exports:{}};var hasRequired_typeof;function require_typeof(){if(hasRequired_typeof)return _typeof.exports;hasRequired_typeof=1;(function(module){function _typeof(o){"@babel/helpers - typeof";return module.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},module.exports.__esModule=true,module.exports["default"]=module.exports,_typeof(o);}module.exports=_typeof,module.exports.__esModule=true,module.exports["default"]=module.exports;})(_typeof);return _typeof.exports;}var hasRequiredRegeneratorValues;function requireRegeneratorValues(){if(hasRequiredRegeneratorValues)return regeneratorValues.exports;hasRequiredRegeneratorValues=1;(function(module){var _typeof=require_typeof()["default"];function _regeneratorValues(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function next(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e};}};}throw new TypeError(_typeof(e)+" is not iterable");}module.exports=_regeneratorValues,module.exports.__esModule=true,module.exports["default"]=module.exports;})(regeneratorValues);return regeneratorValues.exports;}var hasRequiredRegeneratorRuntime;function requireRegeneratorRuntime(){if(hasRequiredRegeneratorRuntime)return regeneratorRuntime$1.exports;hasRequiredRegeneratorRuntime=1;(function(module){var OverloadYield=requireOverloadYield();var regenerator=requireRegenerator$1();var regeneratorAsync=requireRegeneratorAsync();var regeneratorAsyncGen=requireRegeneratorAsyncGen();var regeneratorAsyncIterator=requireRegeneratorAsyncIterator();var regeneratorKeys=requireRegeneratorKeys();var regeneratorValues=requireRegeneratorValues();function _regeneratorRuntime(){var r=regenerator(),e=r.m(_regeneratorRuntime),t=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function n(r){var e="function"==typeof r&&r.constructor;return!!e&&(e===t||"GeneratorFunction"===(e.displayName||e.name));}var o={"throw":1,"return":2,"break":3,"continue":3};function a(r){var e,t;return function(n){e||(e={stop:function stop(){return t(n.a,2);},"catch":function _catch(){return n.v;},abrupt:function abrupt(r,e){return t(n.a,o[r],e);},delegateYield:function delegateYield(r,o,a){return e.resultName=o,t(n.d,regeneratorValues(r),a);},finish:function finish(r){return t(n.f,r);}},t=function t(r,_t,o){n.p=e.prev,n.n=e.next;try{return r(_t,o);}finally{e.next=n.n;}}),e.resultName&&(e[e.resultName]=n.v,e.resultName=void 0),e.sent=n.v,e.next=n.n;try{return r.call(this,e);}finally{n.p=e.prev,n.n=e.next;}};}return(module.exports=_regeneratorRuntime=function _regeneratorRuntime(){return{wrap:function wrap(e,t,n,o){return r.w(a(e),t,n,o&&o.reverse());},isGeneratorFunction:n,mark:r.m,awrap:function awrap(r,e){return new OverloadYield(r,e);},AsyncIterator:regeneratorAsyncIterator,async:function async(r,e,t,o,u){return(n(e)?regeneratorAsyncGen:regeneratorAsync)(a(r),e,t,o,u);},keys:regeneratorKeys,values:regeneratorValues};},module.exports.__esModule=true,module.exports["default"]=module.exports)();}module.exports=_regeneratorRuntime,module.exports.__esModule=true,module.exports["default"]=module.exports;})(regeneratorRuntime$1);return regeneratorRuntime$1.exports;}var regenerator;var hasRequiredRegenerator;function requireRegenerator(){if(hasRequiredRegenerator)return regenerator;hasRequiredRegenerator=1;// TODO(Babel 8): Remove this file.
var runtime=requireRegeneratorRuntime()();regenerator=runtime;// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=
try{regeneratorRuntime=runtime;}catch(accidentalStrictMode){if(typeof globalThis==="object"){globalThis.regeneratorRuntime=runtime;}else{Function("r","regeneratorRuntime = r")(runtime);}}return regenerator;}var regeneratorExports=requireRegenerator();var _regeneratorRuntime=/*@__PURE__*/getDefaultExportFromCjs(regeneratorExports);// src/errors/ai-sdk-error.ts
var marker$2="vercel.ai.error";var symbol$3=Symbol.for(marker$2);var _a$2;var _AISDKError=class _AISDKError extends Error{/**
   * Creates an AI SDK Error.
   *
   * @param {Object} params - The parameters for creating the error.
   * @param {string} params.name - The name of the error.
   * @param {string} params.message - The error message.
   * @param {unknown} [params.cause] - The underlying cause of the error.
   */constructor(_ref7){let{name:name14,message,cause}=_ref7;super(message);this[_a$2]=true;this.name=name14;this.cause=cause;}/**
   * Checks if the given error is an AI SDK Error.
   * @param {unknown} error - The error to check.
   * @returns {boolean} True if the error is an AI SDK Error, false otherwise.
   */static isInstance(error){return _AISDKError.hasMarker(error,marker$2);}static hasMarker(error,marker15){const markerSymbol=Symbol.for(marker15);return error!=null&&typeof error==="object"&&markerSymbol in error&&typeof error[markerSymbol]==="boolean"&&error[markerSymbol]===true;}};_a$2=symbol$3;var AISDKError=_AISDKError;// src/errors/api-call-error.ts
var name$2="AI_APICallError";var marker2$2="vercel.ai.error.".concat(name$2);var symbol2$2=Symbol.for(marker2$2);var _a2$2;var APICallError=class extends AISDKError{constructor(_ref8){let{message,url,requestBodyValues,statusCode,responseHeaders,responseBody,cause,isRetryable=statusCode!=null&&(statusCode===408||// request timeout
statusCode===409||// conflict
statusCode===429||// too many requests
statusCode>=500),// server error
data}=_ref8;super({name:name$2,message,cause});this[_a2$2]=true;this.url=url;this.requestBodyValues=requestBodyValues;this.statusCode=statusCode;this.responseHeaders=responseHeaders;this.responseBody=responseBody;this.isRetryable=isRetryable;this.data=data;}static isInstance(error){return AISDKError.hasMarker(error,marker2$2);}};_a2$2=symbol2$2;// src/errors/empty-response-body-error.ts
var name2$2="AI_EmptyResponseBodyError";var marker3$1="vercel.ai.error.".concat(name2$2);var symbol3$1=Symbol.for(marker3$1);var _a3$1;var EmptyResponseBodyError=class extends AISDKError{// used in isInstance
constructor(){let{message="Empty response body"}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({name:name2$2,message});this[_a3$1]=true;}static isInstance(error){return AISDKError.hasMarker(error,marker3$1);}};_a3$1=symbol3$1;// src/errors/get-error-message.ts
function getErrorMessage$1(error){if(error==null){return"unknown error";}if(typeof error==="string"){return error;}if(error instanceof Error){return error.message;}return JSON.stringify(error);}// src/errors/invalid-argument-error.ts
var name3$1="AI_InvalidArgumentError";var marker4$2="vercel.ai.error.".concat(name3$1);var symbol4$2=Symbol.for(marker4$2);var _a4$2;var InvalidArgumentError$1=class InvalidArgumentError extends AISDKError{constructor(_ref9){let{message,cause,argument}=_ref9;super({name:name3$1,message,cause});this[_a4$2]=true;this.argument=argument;}static isInstance(error){return AISDKError.hasMarker(error,marker4$2);}};_a4$2=symbol4$2;// src/errors/invalid-prompt-error.ts
var name4$2="AI_InvalidPromptError";var marker5$1="vercel.ai.error.".concat(name4$2);var symbol5$1=Symbol.for(marker5$1);var _a5$1;var InvalidPromptError=class extends AISDKError{constructor(_ref0){let{prompt,message,cause}=_ref0;super({name:name4$2,message:"Invalid prompt: ".concat(message),cause});this[_a5$1]=true;this.prompt=prompt;}static isInstance(error){return AISDKError.hasMarker(error,marker5$1);}};_a5$1=symbol5$1;// src/errors/invalid-response-data-error.ts
var name5$1="AI_InvalidResponseDataError";var marker6$1="vercel.ai.error.".concat(name5$1);var symbol6$1=Symbol.for(marker6$1);var _a6$1;var InvalidResponseDataError=class extends AISDKError{constructor(_ref1){let{data,message="Invalid response data: ".concat(JSON.stringify(data),".")}=_ref1;super({name:name5$1,message});this[_a6$1]=true;this.data=data;}static isInstance(error){return AISDKError.hasMarker(error,marker6$1);}};_a6$1=symbol6$1;// src/errors/json-parse-error.ts
var name6$1="AI_JSONParseError";var marker7$2="vercel.ai.error.".concat(name6$1);var symbol7$2=Symbol.for(marker7$2);var _a7$2;var JSONParseError=class extends AISDKError{constructor(_ref10){let{text,cause}=_ref10;super({name:name6$1,message:"JSON parsing failed: Text: ".concat(text,".\nError message: ").concat(getErrorMessage$1(cause)),cause});this[_a7$2]=true;this.text=text;}static isInstance(error){return AISDKError.hasMarker(error,marker7$2);}};_a7$2=symbol7$2;// src/errors/load-api-key-error.ts
var name7$1="AI_LoadAPIKeyError";var marker8$1="vercel.ai.error.".concat(name7$1);var symbol8$1=Symbol.for(marker8$1);var _a8$1;var LoadAPIKeyError=class extends AISDKError{// used in isInstance
constructor(_ref11){let{message}=_ref11;super({name:name7$1,message});this[_a8$1]=true;}static isInstance(error){return AISDKError.hasMarker(error,marker8$1);}};_a8$1=symbol8$1;// src/errors/no-such-model-error.ts
var name10$1="AI_NoSuchModelError";var marker11="vercel.ai.error.".concat(name10$1);var symbol11=Symbol.for(marker11);var _a11;var NoSuchModelError=class extends AISDKError{constructor(_ref12){let{errorName=name10$1,modelId,modelType,message="No such ".concat(modelType,": ").concat(modelId)}=_ref12;super({name:errorName,message});this[_a11]=true;this.modelId=modelId;this.modelType=modelType;}static isInstance(error){return AISDKError.hasMarker(error,marker11);}};_a11=symbol11;// src/errors/too-many-embedding-values-for-call-error.ts
var name11="AI_TooManyEmbeddingValuesForCallError";var marker12$1="vercel.ai.error.".concat(name11);var symbol12$1=Symbol.for(marker12$1);var _a12$1;var TooManyEmbeddingValuesForCallError=class extends AISDKError{constructor(options){super({name:name11,message:"Too many values for a single embedding call. The ".concat(options.provider," model \"").concat(options.modelId,"\" can only embed up to ").concat(options.maxEmbeddingsPerCall," values per call, but ").concat(options.values.length," values were provided.")});this[_a12$1]=true;this.provider=options.provider;this.modelId=options.modelId;this.maxEmbeddingsPerCall=options.maxEmbeddingsPerCall;this.values=options.values;}static isInstance(error){return AISDKError.hasMarker(error,marker12$1);}};_a12$1=symbol12$1;// src/errors/type-validation-error.ts
var name12$1="AI_TypeValidationError";var marker13="vercel.ai.error.".concat(name12$1);var symbol13=Symbol.for(marker13);var _a13;var _TypeValidationError=class _TypeValidationError extends AISDKError{constructor(_ref13){let{value,cause}=_ref13;super({name:name12$1,message:"Type validation failed: Value: ".concat(JSON.stringify(value),".\nError message: ").concat(getErrorMessage$1(cause)),cause});this[_a13]=true;this.value=value;}static isInstance(error){return AISDKError.hasMarker(error,marker13);}/**
   * Wraps an error into a TypeValidationError.
   * If the cause is already a TypeValidationError with the same value, it returns the cause.
   * Otherwise, it creates a new TypeValidationError.
   *
   * @param {Object} params - The parameters for wrapping the error.
   * @param {unknown} params.value - The value that failed validation.
   * @param {unknown} params.cause - The original error or cause of the validation failure.
   * @returns {TypeValidationError} A TypeValidationError instance.
   */static wrap(_ref14){let{value,cause}=_ref14;return _TypeValidationError.isInstance(cause)&&cause.value===value?cause:new _TypeValidationError({value,cause});}};_a13=symbol13;var TypeValidationError=_TypeValidationError;// src/errors/unsupported-functionality-error.ts
var name13="AI_UnsupportedFunctionalityError";var marker14$1="vercel.ai.error.".concat(name13);var symbol14$1=Symbol.for(marker14$1);var _a14$1;var UnsupportedFunctionalityError=class extends AISDKError{constructor(_ref15){let{functionality,message="'".concat(functionality,"' functionality not supported.")}=_ref15;super({name:name13,message});this[_a14$1]=true;this.functionality=functionality;}static isInstance(error){return AISDKError.hasMarker(error,marker14$1);}};_a14$1=symbol14$1;class ParseError extends Error{constructor(message,options){super(message),this.name="ParseError",this.type=options.type,this.field=options.field,this.value=options.value,this.line=options.line;}}function noop(_arg){}function createParser(callbacks){if(typeof callbacks=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent=noop,onError=noop,onRetry=noop,onComment}=callbacks;let incompleteLine="",isFirstChunk=true,id,data="",eventType="";function feed(newChunk){const chunk=isFirstChunk?newChunk.replace(/^\xEF\xBB\xBF/,""):newChunk,[complete,incomplete]=splitLines("".concat(incompleteLine).concat(chunk));for(const line of complete)parseLine(line);incompleteLine=incomplete,isFirstChunk=false;}function parseLine(line){if(line===""){dispatchEvent();return;}if(line.startsWith(":")){onComment&&onComment(line.slice(line.startsWith(": ")?2:1));return;}const fieldSeparatorIndex=line.indexOf(":");if(fieldSeparatorIndex!==-1){const field=line.slice(0,fieldSeparatorIndex),offset=line[fieldSeparatorIndex+1]===" "?2:1,value=line.slice(fieldSeparatorIndex+offset);processField(field,value,line);return;}processField(line,"",line);}function processField(field,value,line){switch(field){case"event":eventType=value;break;case"data":data="".concat(data).concat(value,"\n");break;case"id":id=value.includes("\0")?void 0:value;break;case"retry":/^\d+$/.test(value)?onRetry(parseInt(value,10)):onError(new ParseError("Invalid `retry` value: \"".concat(value,"\""),{type:"invalid-retry",value,line}));break;default:onError(new ParseError("Unknown field \"".concat(field.length>20?"".concat(field.slice(0,20),"\u2026"):field,"\""),{type:"unknown-field",field,value,line}));break;}}function dispatchEvent(){data.length>0&&onEvent({id,event:eventType||void 0,// If the data buffer's last character is a U+000A LINE FEED (LF) character,
// then remove the last character from the data buffer.
data:data.endsWith("\n")?data.slice(0,-1):data}),id=void 0,data="",eventType="";}function reset(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};incompleteLine&&options.consume&&parseLine(incompleteLine),isFirstChunk=true,id=void 0,data="",eventType="",incompleteLine="";}return{feed,reset};}function splitLines(chunk){const lines=[];let incompleteLine="",searchIndex=0;for(;searchIndex<chunk.length;){const crIndex=chunk.indexOf("\r",searchIndex),lfIndex=chunk.indexOf("\n",searchIndex);let lineEnd=-1;if(crIndex!==-1&&lfIndex!==-1?lineEnd=Math.min(crIndex,lfIndex):crIndex!==-1?crIndex===chunk.length-1?lineEnd=-1:lineEnd=crIndex:lfIndex!==-1&&(lineEnd=lfIndex),lineEnd===-1){incompleteLine=chunk.slice(searchIndex);break;}else{const line=chunk.slice(searchIndex,lineEnd);lines.push(line),searchIndex=lineEnd+1,chunk[searchIndex-1]==="\r"&&chunk[searchIndex]==="\n"&&searchIndex++;}}return[lines,incompleteLine];}class EventSourceParserStream extends TransformStream{constructor(){let{onError,onRetry,onComment}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};let parser;super({start(controller){parser=createParser({onEvent:event=>{controller.enqueue(event);},onError(error){onError==="terminate"?controller.error(error):typeof onError=="function"&&onError(error);},onRetry,onComment});},transform(chunk){parser.feed(chunk);}});}}/** A special constant with type `never` */const NEVER=Object.freeze({status:"aborted"});function $constructor(name,initializer,params){var _params$Parent;function init(inst,def){var _inst$_zod,_a$traits;var _a;Object.defineProperty(inst,"_zod",{value:(_inst$_zod=inst._zod)!==null&&_inst$_zod!==void 0?_inst$_zod:{},enumerable:false});(_a$traits=(_a=inst._zod).traits)!==null&&_a$traits!==void 0?_a$traits:_a.traits=new Set();inst._zod.traits.add(name);initializer(inst,def);// support prototype modifications
for(const k in _.prototype){if(!(k in inst))Object.defineProperty(inst,k,{value:_.prototype[k].bind(inst)});}inst._zod.constr=_;inst._zod.def=def;}// doesn't work if Parent has a constructor with arguments
const Parent=(_params$Parent=params===null||params===void 0?void 0:params.Parent)!==null&&_params$Parent!==void 0?_params$Parent:Object;class Definition extends Parent{}Object.defineProperty(Definition,"name",{value:name});function _(def){var _a$deferred;var _a;const inst=params!==null&&params!==void 0&&params.Parent?new Definition():this;init(inst,def);(_a$deferred=(_a=inst._zod).deferred)!==null&&_a$deferred!==void 0?_a$deferred:_a.deferred=[];for(const fn of inst._zod.deferred){fn();}return inst;}Object.defineProperty(_,"init",{value:init});Object.defineProperty(_,Symbol.hasInstance,{value:inst=>{var _inst$_zod2;if(params!==null&&params!==void 0&&params.Parent&&inst instanceof params.Parent)return true;return inst===null||inst===void 0||(_inst$_zod2=inst._zod)===null||_inst$_zod2===void 0||(_inst$_zod2=_inst$_zod2.traits)===null||_inst$_zod2===void 0?void 0:_inst$_zod2.has(name);}});Object.defineProperty(_,"name",{value:name});return _;}//////////////////////////////   UTILITIES   ///////////////////////////////////////
const $brand=Symbol("zod_brand");class $ZodAsyncError extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.");}}const globalConfig={};function config(newConfig){if(newConfig)Object.assign(globalConfig,newConfig);return globalConfig;}// functions
function assertEqual(val){return val;}function assertNotEqual(val){return val;}function assertIs(_arg){}function assertNever(_x){throw new Error();}function assert(_){}function getEnumValues(entries){const numericValues=Object.values(entries).filter(v=>typeof v==="number");const values=Object.entries(entries).filter(_ref16=>{let[k,_]=_ref16;return numericValues.indexOf(+k)===-1;}).map(_ref17=>{let[_,v]=_ref17;return v;});return values;}function joinValues(array){let separator=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"|";return array.map(val=>stringifyPrimitive(val)).join(separator);}function jsonStringifyReplacer(_,value){if(typeof value==="bigint")return value.toString();return value;}function cached(getter){return{get value(){{const value=getter();Object.defineProperty(this,"value",{value});return value;}}};}function nullish$1(input){return input===null||input===undefined;}function cleanRegex(source){const start=source.startsWith("^")?1:0;const end=source.endsWith("$")?source.length-1:source.length;return source.slice(start,end);}function floatSafeRemainder(val,step){const valDecCount=(val.toString().split(".")[1]||"").length;const stepDecCount=(step.toString().split(".")[1]||"").length;const decCount=valDecCount>stepDecCount?valDecCount:stepDecCount;const valInt=Number.parseInt(val.toFixed(decCount).replace(".",""));const stepInt=Number.parseInt(step.toFixed(decCount).replace(".",""));return valInt%stepInt/10**decCount;}function defineLazy(object,key,getter){Object.defineProperty(object,key,{get(){{const value=getter();object[key]=value;return value;}},set(v){Object.defineProperty(object,key,{value:v// configurable: true,
});// object[key] = v;
},configurable:true});}function assignProp(target,prop,value){Object.defineProperty(target,prop,{value,writable:true,enumerable:true,configurable:true});}function getElementAtPath(obj,path){if(!path)return obj;return path.reduce((acc,key)=>acc===null||acc===void 0?void 0:acc[key],obj);}function promiseAllObject(promisesObj){const keys=Object.keys(promisesObj);const promises=keys.map(key=>promisesObj[key]);return Promise.all(promises).then(results=>{const resolvedObj={};for(let i=0;i<keys.length;i++){resolvedObj[keys[i]]=results[i];}return resolvedObj;});}function randomString(){let length=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;const chars="abcdefghijklmnopqrstuvwxyz";let str="";for(let i=0;i<length;i++){str+=chars[Math.floor(Math.random()*chars.length)];}return str;}function esc(str){return JSON.stringify(str);}const captureStackTrace=Error.captureStackTrace?Error.captureStackTrace:function(){};function isObject(data){return typeof data==="object"&&data!==null&&!Array.isArray(data);}const allowsEval=cached(()=>{var _navigator;if(typeof navigator!=="undefined"&&(_navigator=navigator)!==null&&_navigator!==void 0&&(_navigator=_navigator.userAgent)!==null&&_navigator!==void 0&&_navigator.includes("Cloudflare")){return false;}try{const F=Function;new F("");return true;}catch(_){return false;}});function isPlainObject(o){if(isObject(o)===false)return false;// modified constructor
const ctor=o.constructor;if(ctor===undefined)return true;// modified prototype
const prot=ctor.prototype;if(isObject(prot)===false)return false;// ctor doesn't have static `isPrototypeOf`
if(Object.prototype.hasOwnProperty.call(prot,"isPrototypeOf")===false){return false;}return true;}function numKeys(data){let keyCount=0;for(const key in data){if(Object.prototype.hasOwnProperty.call(data,key)){keyCount++;}}return keyCount;}const getParsedType=data=>{const t=typeof data;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(data)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(data.then&&typeof data.then==="function"&&data.catch&&typeof data.catch==="function"){return"promise";}if(typeof Map!=="undefined"&&data instanceof Map){return"map";}if(typeof Set!=="undefined"&&data instanceof Set){return"set";}if(typeof Date!=="undefined"&&data instanceof Date){return"date";}if(typeof File!=="undefined"&&data instanceof File){return"file";}return"object";default:throw new Error("Unknown data type: ".concat(t));}};const propertyKeyTypes=new Set(["string","number","symbol"]);const primitiveTypes=new Set(["string","number","bigint","boolean","symbol","undefined"]);function escapeRegex(str){return str.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");}// zod-specific utils
function clone(inst,def,params){const cl=new inst._zod.constr(def!==null&&def!==void 0?def:inst._zod.def);if(!def||params!==null&&params!==void 0&&params.parent)cl._zod.parent=inst;return cl;}function normalizeParams(_params){const params=_params;if(!params)return{};if(typeof params==="string")return{error:()=>params};if((params===null||params===void 0?void 0:params.message)!==undefined){if((params===null||params===void 0?void 0:params.error)!==undefined)throw new Error("Cannot specify both `message` and `error` params");params.error=params.message;}delete params.message;if(typeof params.error==="string")return _objectSpread2(_objectSpread2({},params),{},{error:()=>params.error});return params;}function createTransparentProxy(getter){let target;return new Proxy({},{get(_,prop,receiver){target!==null&&target!==void 0?target:target=getter();return Reflect.get(target,prop,receiver);},set(_,prop,value,receiver){target!==null&&target!==void 0?target:target=getter();return Reflect.set(target,prop,value,receiver);},has(_,prop){target!==null&&target!==void 0?target:target=getter();return Reflect.has(target,prop);},deleteProperty(_,prop){target!==null&&target!==void 0?target:target=getter();return Reflect.deleteProperty(target,prop);},ownKeys(_){target!==null&&target!==void 0?target:target=getter();return Reflect.ownKeys(target);},getOwnPropertyDescriptor(_,prop){target!==null&&target!==void 0?target:target=getter();return Reflect.getOwnPropertyDescriptor(target,prop);},defineProperty(_,prop,descriptor){target!==null&&target!==void 0?target:target=getter();return Reflect.defineProperty(target,prop,descriptor);}});}function stringifyPrimitive(value){if(typeof value==="bigint")return value.toString()+"n";if(typeof value==="string")return"\"".concat(value,"\"");return"".concat(value);}function optionalKeys(shape){return Object.keys(shape).filter(k=>{return shape[k]._zod.optin==="optional"&&shape[k]._zod.optout==="optional";});}const NUMBER_FORMAT_RANGES={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,3.4028234663852886e38],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};const BIGINT_FORMAT_RANGES={int64:[/* @__PURE__*/BigInt("-9223372036854775808"),/* @__PURE__*/BigInt("9223372036854775807")],uint64:[/* @__PURE__*/BigInt(0),/* @__PURE__*/BigInt("18446744073709551615")]};function pick(schema,mask){const newShape={};const currDef=schema._zod.def;//.shape;
for(const key in mask){if(!(key in currDef.shape)){throw new Error("Unrecognized key: \"".concat(key,"\""));}if(!mask[key])continue;// pick key
newShape[key]=currDef.shape[key];}return clone(schema,_objectSpread2(_objectSpread2({},schema._zod.def),{},{shape:newShape,checks:[]}));}function omit(schema,mask){const newShape=_objectSpread2({},schema._zod.def.shape);const currDef=schema._zod.def;//.shape;
for(const key in mask){if(!(key in currDef.shape)){throw new Error("Unrecognized key: \"".concat(key,"\""));}if(!mask[key])continue;delete newShape[key];}return clone(schema,_objectSpread2(_objectSpread2({},schema._zod.def),{},{shape:newShape,checks:[]}));}function extend(schema,shape){if(!isPlainObject(shape)){throw new Error("Invalid input to extend: expected a plain object");}const def=_objectSpread2(_objectSpread2({},schema._zod.def),{},{get shape(){const _shape=_objectSpread2(_objectSpread2({},schema._zod.def.shape),shape);assignProp(this,"shape",_shape);// self-caching
return _shape;},checks:[]// delete existing checks
});return clone(schema,def);}function merge(a,b){return clone(a,_objectSpread2(_objectSpread2({},a._zod.def),{},{get shape(){const _shape=_objectSpread2(_objectSpread2({},a._zod.def.shape),b._zod.def.shape);assignProp(this,"shape",_shape);// self-caching
return _shape;},catchall:b._zod.def.catchall,checks:[]// delete existing checks
}));}function partial(Class,schema,mask){const oldShape=schema._zod.def.shape;const shape=_objectSpread2({},oldShape);if(mask){for(const key in mask){if(!(key in oldShape)){throw new Error("Unrecognized key: \"".concat(key,"\""));}if(!mask[key])continue;// if (oldShape[key]!._zod.optin === "optional") continue;
shape[key]=Class?new Class({type:"optional",innerType:oldShape[key]}):oldShape[key];}}else{for(const key in oldShape){// if (oldShape[key]!._zod.optin === "optional") continue;
shape[key]=Class?new Class({type:"optional",innerType:oldShape[key]}):oldShape[key];}}return clone(schema,_objectSpread2(_objectSpread2({},schema._zod.def),{},{shape,checks:[]}));}function required(Class,schema,mask){const oldShape=schema._zod.def.shape;const shape=_objectSpread2({},oldShape);if(mask){for(const key in mask){if(!(key in shape)){throw new Error("Unrecognized key: \"".concat(key,"\""));}if(!mask[key])continue;// overwrite with non-optional
shape[key]=new Class({type:"nonoptional",innerType:oldShape[key]});}}else{for(const key in oldShape){// overwrite with non-optional
shape[key]=new Class({type:"nonoptional",innerType:oldShape[key]});}}return clone(schema,_objectSpread2(_objectSpread2({},schema._zod.def),{},{shape,// optional: [],
checks:[]}));}function aborted(x){let startIndex=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;for(let i=startIndex;i<x.issues.length;i++){var _x$issues$i;if(((_x$issues$i=x.issues[i])===null||_x$issues$i===void 0?void 0:_x$issues$i.continue)!==true)return true;}return false;}function prefixIssues(path,issues){return issues.map(iss=>{var _a$path;var _a;(_a$path=(_a=iss).path)!==null&&_a$path!==void 0?_a$path:_a.path=[];iss.path.unshift(path);return iss;});}function unwrapMessage(message){return typeof message==="string"?message:message===null||message===void 0?void 0:message.message;}function finalizeIssue(iss,ctx,config){var _iss$path;const full=_objectSpread2(_objectSpread2({},iss),{},{path:(_iss$path=iss.path)!==null&&_iss$path!==void 0?_iss$path:[]});// for backwards compatibility
if(!iss.message){var _ref18,_ref19,_ref20,_unwrapMessage,_iss$inst,_iss$inst$error,_ctx$error,_config$customError,_config$localeError;const message=(_ref18=(_ref19=(_ref20=(_unwrapMessage=unwrapMessage((_iss$inst=iss.inst)===null||_iss$inst===void 0||(_iss$inst=_iss$inst._zod.def)===null||_iss$inst===void 0||(_iss$inst$error=_iss$inst.error)===null||_iss$inst$error===void 0?void 0:_iss$inst$error.call(_iss$inst,iss)))!==null&&_unwrapMessage!==void 0?_unwrapMessage:unwrapMessage(ctx===null||ctx===void 0||(_ctx$error=ctx.error)===null||_ctx$error===void 0?void 0:_ctx$error.call(ctx,iss)))!==null&&_ref20!==void 0?_ref20:unwrapMessage((_config$customError=config.customError)===null||_config$customError===void 0?void 0:_config$customError.call(config,iss)))!==null&&_ref19!==void 0?_ref19:unwrapMessage((_config$localeError=config.localeError)===null||_config$localeError===void 0?void 0:_config$localeError.call(config,iss)))!==null&&_ref18!==void 0?_ref18:"Invalid input";full.message=message;}// delete (full as any).def;
delete full.inst;delete full.continue;if(!(ctx!==null&&ctx!==void 0&&ctx.reportInput)){delete full.input;}return full;}function getSizableOrigin(input){if(input instanceof Set)return"set";if(input instanceof Map)return"map";if(input instanceof File)return"file";return"unknown";}function getLengthableOrigin(input){if(Array.isArray(input))return"array";if(typeof input==="string")return"string";return"unknown";}function issue(){for(var _len=arguments.length,args=new Array(_len),_key2=0;_key2<_len;_key2++){args[_key2]=arguments[_key2];}const[iss,input,inst]=args;if(typeof iss==="string"){return{message:iss,code:"custom",input,inst};}return _objectSpread2({},iss);}function cleanEnum(obj){return Object.entries(obj).filter(_ref21=>{let[k,_]=_ref21;// return true if NaN, meaning it's not a number, thus a string key
return Number.isNaN(Number.parseInt(k,10));}).map(el=>el[1]);}// instanceof
class Class{constructor(){}}var util=/*#__PURE__*/Object.freeze({__proto__:null,BIGINT_FORMAT_RANGES:BIGINT_FORMAT_RANGES,Class:Class,NUMBER_FORMAT_RANGES:NUMBER_FORMAT_RANGES,aborted:aborted,allowsEval:allowsEval,assert:assert,assertEqual:assertEqual,assertIs:assertIs,assertNever:assertNever,assertNotEqual:assertNotEqual,assignProp:assignProp,cached:cached,captureStackTrace:captureStackTrace,cleanEnum:cleanEnum,cleanRegex:cleanRegex,clone:clone,createTransparentProxy:createTransparentProxy,defineLazy:defineLazy,esc:esc,escapeRegex:escapeRegex,extend:extend,finalizeIssue:finalizeIssue,floatSafeRemainder:floatSafeRemainder,getElementAtPath:getElementAtPath,getEnumValues:getEnumValues,getLengthableOrigin:getLengthableOrigin,getParsedType:getParsedType,getSizableOrigin:getSizableOrigin,isObject:isObject,isPlainObject:isPlainObject,issue:issue,joinValues:joinValues,jsonStringifyReplacer:jsonStringifyReplacer,merge:merge,normalizeParams:normalizeParams,nullish:nullish$1,numKeys:numKeys,omit:omit,optionalKeys:optionalKeys,partial:partial,pick:pick,prefixIssues:prefixIssues,primitiveTypes:primitiveTypes,promiseAllObject:promiseAllObject,propertyKeyTypes:propertyKeyTypes,randomString:randomString,required:required,stringifyPrimitive:stringifyPrimitive,unwrapMessage:unwrapMessage});const initializer$1=(inst,def)=>{inst.name="$ZodError";Object.defineProperty(inst,"_zod",{value:inst._zod,enumerable:false});Object.defineProperty(inst,"issues",{value:def,enumerable:false});Object.defineProperty(inst,"message",{get(){return JSON.stringify(def,jsonStringifyReplacer,2);},enumerable:true// configurable: false,
});Object.defineProperty(inst,"toString",{value:()=>inst.message,enumerable:false});};const $ZodError=$constructor("$ZodError",initializer$1);const $ZodRealError=$constructor("$ZodError",initializer$1,{Parent:Error});function flattenError(error){let mapper=arguments.length>1&&arguments[1]!==undefined?arguments[1]:issue=>issue.message;const fieldErrors={};const formErrors=[];for(const sub of error.issues){if(sub.path.length>0){fieldErrors[sub.path[0]]=fieldErrors[sub.path[0]]||[];fieldErrors[sub.path[0]].push(mapper(sub));}else{formErrors.push(mapper(sub));}}return{formErrors,fieldErrors};}function formatError(error,_mapper){const mapper=_mapper||function(issue){return issue.message;};const fieldErrors={_errors:[]};const processError=error=>{for(const issue of error.issues){if(issue.code==="invalid_union"&&issue.errors.length){issue.errors.map(issues=>processError({issues}));}else if(issue.code==="invalid_key"){processError({issues:issue.issues});}else if(issue.code==="invalid_element"){processError({issues:issue.issues});}else if(issue.path.length===0){fieldErrors._errors.push(mapper(issue));}else{let curr=fieldErrors;let i=0;while(i<issue.path.length){const el=issue.path[i];const terminal=i===issue.path.length-1;if(!terminal){curr[el]=curr[el]||{_errors:[]};}else{curr[el]=curr[el]||{_errors:[]};curr[el]._errors.push(mapper(issue));}curr=curr[el];i++;}}}};processError(error);return fieldErrors;}function treeifyError(error,_mapper){const mapper=_mapper||function(issue){return issue.message;};const result={errors:[]};const processError=function(error){let path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var _a,_b;for(const issue of error.issues){if(issue.code==="invalid_union"&&issue.errors.length){// regular union error
issue.errors.map(issues=>processError({issues},issue.path));}else if(issue.code==="invalid_key"){processError({issues:issue.issues},issue.path);}else if(issue.code==="invalid_element"){processError({issues:issue.issues},issue.path);}else{const fullpath=[...path,...issue.path];if(fullpath.length===0){result.errors.push(mapper(issue));continue;}let curr=result;let i=0;while(i<fullpath.length){const el=fullpath[i];const terminal=i===fullpath.length-1;if(typeof el==="string"){var _curr$properties,_a$el;(_curr$properties=curr.properties)!==null&&_curr$properties!==void 0?_curr$properties:curr.properties={};(_a$el=(_a=curr.properties)[el])!==null&&_a$el!==void 0?_a$el:_a[el]={errors:[]};curr=curr.properties[el];}else{var _curr$items,_b$el;(_curr$items=curr.items)!==null&&_curr$items!==void 0?_curr$items:curr.items=[];(_b$el=(_b=curr.items)[el])!==null&&_b$el!==void 0?_b$el:_b[el]={errors:[]};curr=curr.items[el];}if(terminal){curr.errors.push(mapper(issue));}i++;}}}};processError(error);return result;}/** Format a ZodError as a human-readable string in the following form.
 *
 * From
 *
 * ```ts
 * ZodError {
 *   issues: [
 *     {
 *       expected: 'string',
 *       code: 'invalid_type',
 *       path: [ 'username' ],
 *       message: 'Invalid input: expected string'
 *     },
 *     {
 *       expected: 'number',
 *       code: 'invalid_type',
 *       path: [ 'favoriteNumbers', 1 ],
 *       message: 'Invalid input: expected number'
 *     }
 *   ];
 * }
 * ```
 *
 * to
 *
 * ```
 * username
 *   ✖ Expected number, received string at "username
 * favoriteNumbers[0]
 *   ✖ Invalid input: expected number
 * ```
 */function toDotPath(path){const segs=[];for(const seg of path){if(typeof seg==="number")segs.push("[".concat(seg,"]"));else if(typeof seg==="symbol")segs.push("[".concat(JSON.stringify(String(seg)),"]"));else if(/[^\w$]/.test(seg))segs.push("[".concat(JSON.stringify(seg),"]"));else{if(segs.length)segs.push(".");segs.push(seg);}}return segs.join("");}function prettifyError(error){const lines=[];// sort by path length
const issues=[...error.issues].sort((a,b)=>a.path.length-b.path.length);// Process each issue
for(const issue of issues){var _issue$path;lines.push("\u2716 ".concat(issue.message));if((_issue$path=issue.path)!==null&&_issue$path!==void 0&&_issue$path.length)lines.push("  \u2192 at ".concat(toDotPath(issue.path)));}// Convert Map to formatted string
return lines.join("\n");}const _parse$1=_Err=>(schema,value,_ctx,_params)=>{const ctx=_ctx?Object.assign(_ctx,{async:false}):{async:false};const result=schema._zod.run({value,issues:[]},ctx);if(result instanceof Promise){throw new $ZodAsyncError();}if(result.issues.length){var _params$Err;const e=new((_params$Err=_params===null||_params===void 0?void 0:_params.Err)!==null&&_params$Err!==void 0?_params$Err:_Err)(result.issues.map(iss=>finalizeIssue(iss,ctx,config())));captureStackTrace(e,_params===null||_params===void 0?void 0:_params.callee);throw e;}return result.value;};const parse$1=/* @__PURE__*/_parse$1($ZodRealError);const _parseAsync=_Err=>(/*#__PURE__*/function(){var _ref22=_asyncToGenerator2(function*(schema,value,_ctx,params){const ctx=_ctx?Object.assign(_ctx,{async:true}):{async:true};let result=schema._zod.run({value,issues:[]},ctx);if(result instanceof Promise)result=yield result;if(result.issues.length){var _params$Err2;const e=new((_params$Err2=params===null||params===void 0?void 0:params.Err)!==null&&_params$Err2!==void 0?_params$Err2:_Err)(result.issues.map(iss=>finalizeIssue(iss,ctx,config())));captureStackTrace(e,params===null||params===void 0?void 0:params.callee);throw e;}return result.value;});return function(_x0,_x1,_x10,_x11){return _ref22.apply(this,arguments);};}());const parseAsync$1=/* @__PURE__*/_parseAsync($ZodRealError);const _safeParse=_Err=>(schema,value,_ctx)=>{const ctx=_ctx?_objectSpread2(_objectSpread2({},_ctx),{},{async:false}):{async:false};const result=schema._zod.run({value,issues:[]},ctx);if(result instanceof Promise){throw new $ZodAsyncError();}return result.issues.length?{success:false,error:new(_Err!==null&&_Err!==void 0?_Err:$ZodError)(result.issues.map(iss=>finalizeIssue(iss,ctx,config())))}:{success:true,data:result.value};};const safeParse$1=/* @__PURE__*/_safeParse($ZodRealError);const _safeParseAsync=_Err=>(/*#__PURE__*/function(){var _ref23=_asyncToGenerator2(function*(schema,value,_ctx){const ctx=_ctx?Object.assign(_ctx,{async:true}):{async:true};let result=schema._zod.run({value,issues:[]},ctx);if(result instanceof Promise)result=yield result;return result.issues.length?{success:false,error:new _Err(result.issues.map(iss=>finalizeIssue(iss,ctx,config())))}:{success:true,data:result.value};});return function(_x12,_x13,_x14){return _ref23.apply(this,arguments);};}());const safeParseAsync$1=/* @__PURE__*/_safeParseAsync($ZodRealError);const cuid$1=/^[cC][^\s-]{8,}$/;const cuid2$1=/^[0-9a-z]+$/;const ulid$1=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;const xid$1=/^[0-9a-vA-V]{20}$/;const ksuid$1=/^[A-Za-z0-9]{27}$/;const nanoid$1=/^[a-zA-Z0-9_-]{21}$/;/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */const duration$1=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */const extendedDuration=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/;/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */const guid$1=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;/** Returns a regex for validating an RFC 4122 UUID.
 *
 * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */const uuid$1=version=>{if(!version)return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;return new RegExp("^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-".concat(version,"[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$"));};const uuid4=/*@__PURE__*/uuid$1(4);const uuid6=/*@__PURE__*/uuid$1(6);const uuid7=/*@__PURE__*/uuid$1(7);/** Practical email validation */const email$1=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */const html5Email=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;/** The classic emailregex.com regex for RFC 5322-compliant emails */const rfc5322Email=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */const unicodeEmail=/^(?:[\0-\x08\x0E-\x1F!#-\?A-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){1,64}@(?:[\0-\x08\x0E-\x1F!-\?A-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){1,255}$/;const browserEmail=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression
const _emoji$1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function emoji$1(){return new RegExp(_emoji$1,"u");}const ipv4$1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;const ipv6$1=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/;const cidrv4$1=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/;const cidrv6$1=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript
const base64$1=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;const base64url$1=/^[A-Za-z0-9_-]*$/;// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address
// export const hostname: RegExp =
//   /^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)+([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;
const hostname=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/;const domain=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/;// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)
const e164$1=/^\+(?:[0-9]){6,14}[0-9]$/;// const dateSource = `((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))`;
const dateSource="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))";const date$3=/*@__PURE__*/new RegExp("^".concat(dateSource,"$"));function timeSource(args){const hhmm="(?:[01]\\d|2[0-3]):[0-5]\\d";const regex=typeof args.precision==="number"?args.precision===-1?"".concat(hhmm):args.precision===0?"".concat(hhmm,":[0-5]\\d"):"".concat(hhmm,":[0-5]\\d\\.\\d{").concat(args.precision,"}"):"".concat(hhmm,"(?::[0-5]\\d(?:\\.\\d+)?)?");return regex;}function time$1(args){return new RegExp("^".concat(timeSource(args),"$"));}// Adapted from https://stackoverflow.com/a/3143231
function datetime$1(args){const time=timeSource({precision:args.precision});const opts=["Z"];if(args.local)opts.push("");if(args.offset)opts.push("([+-]\\d{2}:\\d{2})");const timeRegex="".concat(time,"(?:").concat(opts.join("|"),")");return new RegExp("^".concat(dateSource,"T(?:").concat(timeRegex,")$"));}const string$2=params=>{var _params$minimum,_params$maximum;const regex=params?"[\\s\\S]{".concat((_params$minimum=params===null||params===void 0?void 0:params.minimum)!==null&&_params$minimum!==void 0?_params$minimum:0,",").concat((_params$maximum=params===null||params===void 0?void 0:params.maximum)!==null&&_params$maximum!==void 0?_params$maximum:"","}"):"[\\s\\S]*";return new RegExp("^".concat(regex,"$"));};const bigint$2=/^\d+n?$/;const integer=/^\d+$/;const number$2=/^-?\d+(?:\.\d+)?/i;const boolean$2=/true|false/i;const _null$2=/null/i;const _undefined$2=/undefined/i;// regex for string with no uppercase letters
const lowercase=/^[^A-Z]*$/;// regex for string with no lowercase letters
const uppercase=/^[^a-z]*$/;var regexes=/*#__PURE__*/Object.freeze({__proto__:null,_emoji:_emoji$1,base64:base64$1,base64url:base64url$1,bigint:bigint$2,boolean:boolean$2,browserEmail:browserEmail,cidrv4:cidrv4$1,cidrv6:cidrv6$1,cuid:cuid$1,cuid2:cuid2$1,date:date$3,datetime:datetime$1,domain:domain,duration:duration$1,e164:e164$1,email:email$1,emoji:emoji$1,extendedDuration:extendedDuration,guid:guid$1,hostname:hostname,html5Email:html5Email,integer:integer,ipv4:ipv4$1,ipv6:ipv6$1,ksuid:ksuid$1,lowercase:lowercase,nanoid:nanoid$1,null:_null$2,number:number$2,rfc5322Email:rfc5322Email,string:string$2,time:time$1,ulid:ulid$1,undefined:_undefined$2,unicodeEmail:unicodeEmail,uppercase:uppercase,uuid:uuid$1,uuid4:uuid4,uuid6:uuid6,uuid7:uuid7,xid:xid$1});// import { $ZodType } from "./schemas.js";
const $ZodCheck=/*@__PURE__*/$constructor("$ZodCheck",(inst,def)=>{var _inst$_zod3,_a$onattach;var _a;(_inst$_zod3=inst._zod)!==null&&_inst$_zod3!==void 0?_inst$_zod3:inst._zod={};inst._zod.def=def;(_a$onattach=(_a=inst._zod).onattach)!==null&&_a$onattach!==void 0?_a$onattach:_a.onattach=[];});const numericOriginMap={number:"number",bigint:"bigint",object:"date"};const $ZodCheckLessThan=/*@__PURE__*/$constructor("$ZodCheckLessThan",(inst,def)=>{$ZodCheck.init(inst,def);const origin=numericOriginMap[typeof def.value];inst._zod.onattach.push(inst=>{var _ref24;const bag=inst._zod.bag;const curr=(_ref24=def.inclusive?bag.maximum:bag.exclusiveMaximum)!==null&&_ref24!==void 0?_ref24:Number.POSITIVE_INFINITY;if(def.value<curr){if(def.inclusive)bag.maximum=def.value;else bag.exclusiveMaximum=def.value;}});inst._zod.check=payload=>{if(def.inclusive?payload.value<=def.value:payload.value<def.value){return;}payload.issues.push({origin,code:"too_big",maximum:def.value,input:payload.value,inclusive:def.inclusive,inst,continue:!def.abort});};});const $ZodCheckGreaterThan=/*@__PURE__*/$constructor("$ZodCheckGreaterThan",(inst,def)=>{$ZodCheck.init(inst,def);const origin=numericOriginMap[typeof def.value];inst._zod.onattach.push(inst=>{var _ref25;const bag=inst._zod.bag;const curr=(_ref25=def.inclusive?bag.minimum:bag.exclusiveMinimum)!==null&&_ref25!==void 0?_ref25:Number.NEGATIVE_INFINITY;if(def.value>curr){if(def.inclusive)bag.minimum=def.value;else bag.exclusiveMinimum=def.value;}});inst._zod.check=payload=>{if(def.inclusive?payload.value>=def.value:payload.value>def.value){return;}payload.issues.push({origin,code:"too_small",minimum:def.value,input:payload.value,inclusive:def.inclusive,inst,continue:!def.abort});};});const $ZodCheckMultipleOf=/*@__PURE__*/$constructor("$ZodCheckMultipleOf",(inst,def)=>{$ZodCheck.init(inst,def);inst._zod.onattach.push(inst=>{var _a$multipleOf;var _a;(_a$multipleOf=(_a=inst._zod.bag).multipleOf)!==null&&_a$multipleOf!==void 0?_a$multipleOf:_a.multipleOf=def.value;});inst._zod.check=payload=>{if(typeof payload.value!==typeof def.value)throw new Error("Cannot mix number and bigint in multiple_of check.");const isMultiple=typeof payload.value==="bigint"?payload.value%def.value===BigInt(0):floatSafeRemainder(payload.value,def.value)===0;if(isMultiple)return;payload.issues.push({origin:typeof payload.value,code:"not_multiple_of",divisor:def.value,input:payload.value,inst,continue:!def.abort});};});const $ZodCheckNumberFormat=/*@__PURE__*/$constructor("$ZodCheckNumberFormat",(inst,def)=>{var _def$format;$ZodCheck.init(inst,def);// no format checks
def.format=def.format||"float64";const isInt=(_def$format=def.format)===null||_def$format===void 0?void 0:_def$format.includes("int");const origin=isInt?"int":"number";const[minimum,maximum]=NUMBER_FORMAT_RANGES[def.format];inst._zod.onattach.push(inst=>{const bag=inst._zod.bag;bag.format=def.format;bag.minimum=minimum;bag.maximum=maximum;if(isInt)bag.pattern=integer;});inst._zod.check=payload=>{const input=payload.value;if(isInt){if(!Number.isInteger(input)){// invalid_format issue
// payload.issues.push({
//   expected: def.format,
//   format: def.format,
//   code: "invalid_format",
//   input,
//   inst,
// });
// invalid_type issue
payload.issues.push({expected:origin,format:def.format,code:"invalid_type",input,inst});return;// not_multiple_of issue
// payload.issues.push({
//   code: "not_multiple_of",
//   origin: "number",
//   input,
//   inst,
//   divisor: 1,
// });
}if(!Number.isSafeInteger(input)){if(input>0){// too_big
payload.issues.push({input,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst,origin,continue:!def.abort});}else{// too_small
payload.issues.push({input,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst,origin,continue:!def.abort});}return;}}if(input<minimum){payload.issues.push({origin:"number",input,code:"too_small",minimum,inclusive:true,inst,continue:!def.abort});}if(input>maximum){payload.issues.push({origin:"number",input,code:"too_big",maximum,inst});}};});const $ZodCheckBigIntFormat=/*@__PURE__*/$constructor("$ZodCheckBigIntFormat",(inst,def)=>{$ZodCheck.init(inst,def);// no format checks
const[minimum,maximum]=BIGINT_FORMAT_RANGES[def.format];inst._zod.onattach.push(inst=>{const bag=inst._zod.bag;bag.format=def.format;bag.minimum=minimum;bag.maximum=maximum;});inst._zod.check=payload=>{const input=payload.value;if(input<minimum){payload.issues.push({origin:"bigint",input,code:"too_small",minimum:minimum,inclusive:true,inst,continue:!def.abort});}if(input>maximum){payload.issues.push({origin:"bigint",input,code:"too_big",maximum,inst});}};});const $ZodCheckMaxSize=/*@__PURE__*/$constructor("$ZodCheckMaxSize",(inst,def)=>{var _a$when;var _a;$ZodCheck.init(inst,def);(_a$when=(_a=inst._zod.def).when)!==null&&_a$when!==void 0?_a$when:_a.when=payload=>{const val=payload.value;return!nullish$1(val)&&val.size!==undefined;};inst._zod.onattach.push(inst=>{var _inst$_zod$bag$maximu;const curr=(_inst$_zod$bag$maximu=inst._zod.bag.maximum)!==null&&_inst$_zod$bag$maximu!==void 0?_inst$_zod$bag$maximu:Number.POSITIVE_INFINITY;if(def.maximum<curr)inst._zod.bag.maximum=def.maximum;});inst._zod.check=payload=>{const input=payload.value;const size=input.size;if(size<=def.maximum)return;payload.issues.push({origin:getSizableOrigin(input),code:"too_big",maximum:def.maximum,input,inst,continue:!def.abort});};});const $ZodCheckMinSize=/*@__PURE__*/$constructor("$ZodCheckMinSize",(inst,def)=>{var _a$when2;var _a;$ZodCheck.init(inst,def);(_a$when2=(_a=inst._zod.def).when)!==null&&_a$when2!==void 0?_a$when2:_a.when=payload=>{const val=payload.value;return!nullish$1(val)&&val.size!==undefined;};inst._zod.onattach.push(inst=>{var _inst$_zod$bag$minimu;const curr=(_inst$_zod$bag$minimu=inst._zod.bag.minimum)!==null&&_inst$_zod$bag$minimu!==void 0?_inst$_zod$bag$minimu:Number.NEGATIVE_INFINITY;if(def.minimum>curr)inst._zod.bag.minimum=def.minimum;});inst._zod.check=payload=>{const input=payload.value;const size=input.size;if(size>=def.minimum)return;payload.issues.push({origin:getSizableOrigin(input),code:"too_small",minimum:def.minimum,input,inst,continue:!def.abort});};});const $ZodCheckSizeEquals=/*@__PURE__*/$constructor("$ZodCheckSizeEquals",(inst,def)=>{var _a$when3;var _a;$ZodCheck.init(inst,def);(_a$when3=(_a=inst._zod.def).when)!==null&&_a$when3!==void 0?_a$when3:_a.when=payload=>{const val=payload.value;return!nullish$1(val)&&val.size!==undefined;};inst._zod.onattach.push(inst=>{const bag=inst._zod.bag;bag.minimum=def.size;bag.maximum=def.size;bag.size=def.size;});inst._zod.check=payload=>{const input=payload.value;const size=input.size;if(size===def.size)return;const tooBig=size>def.size;payload.issues.push(_objectSpread2(_objectSpread2({origin:getSizableOrigin(input)},tooBig?{code:"too_big",maximum:def.size}:{code:"too_small",minimum:def.size}),{},{inclusive:true,exact:true,input:payload.value,inst,continue:!def.abort}));};});const $ZodCheckMaxLength=/*@__PURE__*/$constructor("$ZodCheckMaxLength",(inst,def)=>{var _a$when4;var _a;$ZodCheck.init(inst,def);(_a$when4=(_a=inst._zod.def).when)!==null&&_a$when4!==void 0?_a$when4:_a.when=payload=>{const val=payload.value;return!nullish$1(val)&&val.length!==undefined;};inst._zod.onattach.push(inst=>{var _inst$_zod$bag$maximu2;const curr=(_inst$_zod$bag$maximu2=inst._zod.bag.maximum)!==null&&_inst$_zod$bag$maximu2!==void 0?_inst$_zod$bag$maximu2:Number.POSITIVE_INFINITY;if(def.maximum<curr)inst._zod.bag.maximum=def.maximum;});inst._zod.check=payload=>{const input=payload.value;const length=input.length;if(length<=def.maximum)return;const origin=getLengthableOrigin(input);payload.issues.push({origin,code:"too_big",maximum:def.maximum,inclusive:true,input,inst,continue:!def.abort});};});const $ZodCheckMinLength=/*@__PURE__*/$constructor("$ZodCheckMinLength",(inst,def)=>{var _a$when5;var _a;$ZodCheck.init(inst,def);(_a$when5=(_a=inst._zod.def).when)!==null&&_a$when5!==void 0?_a$when5:_a.when=payload=>{const val=payload.value;return!nullish$1(val)&&val.length!==undefined;};inst._zod.onattach.push(inst=>{var _inst$_zod$bag$minimu2;const curr=(_inst$_zod$bag$minimu2=inst._zod.bag.minimum)!==null&&_inst$_zod$bag$minimu2!==void 0?_inst$_zod$bag$minimu2:Number.NEGATIVE_INFINITY;if(def.minimum>curr)inst._zod.bag.minimum=def.minimum;});inst._zod.check=payload=>{const input=payload.value;const length=input.length;if(length>=def.minimum)return;const origin=getLengthableOrigin(input);payload.issues.push({origin,code:"too_small",minimum:def.minimum,inclusive:true,input,inst,continue:!def.abort});};});const $ZodCheckLengthEquals=/*@__PURE__*/$constructor("$ZodCheckLengthEquals",(inst,def)=>{var _a$when6;var _a;$ZodCheck.init(inst,def);(_a$when6=(_a=inst._zod.def).when)!==null&&_a$when6!==void 0?_a$when6:_a.when=payload=>{const val=payload.value;return!nullish$1(val)&&val.length!==undefined;};inst._zod.onattach.push(inst=>{const bag=inst._zod.bag;bag.minimum=def.length;bag.maximum=def.length;bag.length=def.length;});inst._zod.check=payload=>{const input=payload.value;const length=input.length;if(length===def.length)return;const origin=getLengthableOrigin(input);const tooBig=length>def.length;payload.issues.push(_objectSpread2(_objectSpread2({origin},tooBig?{code:"too_big",maximum:def.length}:{code:"too_small",minimum:def.length}),{},{inclusive:true,exact:true,input:payload.value,inst,continue:!def.abort}));};});const $ZodCheckStringFormat=/*@__PURE__*/$constructor("$ZodCheckStringFormat",(inst,def)=>{var _a$check,_b$check;var _a,_b;$ZodCheck.init(inst,def);inst._zod.onattach.push(inst=>{const bag=inst._zod.bag;bag.format=def.format;if(def.pattern){var _bag$patterns;(_bag$patterns=bag.patterns)!==null&&_bag$patterns!==void 0?_bag$patterns:bag.patterns=new Set();bag.patterns.add(def.pattern);}});if(def.pattern)(_a$check=(_a=inst._zod).check)!==null&&_a$check!==void 0?_a$check:_a.check=payload=>{def.pattern.lastIndex=0;if(def.pattern.test(payload.value))return;payload.issues.push(_objectSpread2(_objectSpread2({origin:"string",code:"invalid_format",format:def.format,input:payload.value},def.pattern?{pattern:def.pattern.toString()}:{}),{},{inst,continue:!def.abort}));};else(_b$check=(_b=inst._zod).check)!==null&&_b$check!==void 0?_b$check:_b.check=()=>{};});const $ZodCheckRegex=/*@__PURE__*/$constructor("$ZodCheckRegex",(inst,def)=>{$ZodCheckStringFormat.init(inst,def);inst._zod.check=payload=>{def.pattern.lastIndex=0;if(def.pattern.test(payload.value))return;payload.issues.push({origin:"string",code:"invalid_format",format:"regex",input:payload.value,pattern:def.pattern.toString(),inst,continue:!def.abort});};});const $ZodCheckLowerCase=/*@__PURE__*/$constructor("$ZodCheckLowerCase",(inst,def)=>{var _def$pattern;(_def$pattern=def.pattern)!==null&&_def$pattern!==void 0?_def$pattern:def.pattern=lowercase;$ZodCheckStringFormat.init(inst,def);});const $ZodCheckUpperCase=/*@__PURE__*/$constructor("$ZodCheckUpperCase",(inst,def)=>{var _def$pattern2;(_def$pattern2=def.pattern)!==null&&_def$pattern2!==void 0?_def$pattern2:def.pattern=uppercase;$ZodCheckStringFormat.init(inst,def);});const $ZodCheckIncludes=/*@__PURE__*/$constructor("$ZodCheckIncludes",(inst,def)=>{$ZodCheck.init(inst,def);const escapedRegex=escapeRegex(def.includes);const pattern=new RegExp(typeof def.position==="number"?"^.{".concat(def.position,"}").concat(escapedRegex):escapedRegex);def.pattern=pattern;inst._zod.onattach.push(inst=>{var _bag$patterns2;const bag=inst._zod.bag;(_bag$patterns2=bag.patterns)!==null&&_bag$patterns2!==void 0?_bag$patterns2:bag.patterns=new Set();bag.patterns.add(pattern);});inst._zod.check=payload=>{if(payload.value.includes(def.includes,def.position))return;payload.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:def.includes,input:payload.value,inst,continue:!def.abort});};});const $ZodCheckStartsWith=/*@__PURE__*/$constructor("$ZodCheckStartsWith",(inst,def)=>{var _def$pattern3;$ZodCheck.init(inst,def);const pattern=new RegExp("^".concat(escapeRegex(def.prefix),".*"));(_def$pattern3=def.pattern)!==null&&_def$pattern3!==void 0?_def$pattern3:def.pattern=pattern;inst._zod.onattach.push(inst=>{var _bag$patterns3;const bag=inst._zod.bag;(_bag$patterns3=bag.patterns)!==null&&_bag$patterns3!==void 0?_bag$patterns3:bag.patterns=new Set();bag.patterns.add(pattern);});inst._zod.check=payload=>{if(payload.value.startsWith(def.prefix))return;payload.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:def.prefix,input:payload.value,inst,continue:!def.abort});};});const $ZodCheckEndsWith=/*@__PURE__*/$constructor("$ZodCheckEndsWith",(inst,def)=>{var _def$pattern4;$ZodCheck.init(inst,def);const pattern=new RegExp(".*".concat(escapeRegex(def.suffix),"$"));(_def$pattern4=def.pattern)!==null&&_def$pattern4!==void 0?_def$pattern4:def.pattern=pattern;inst._zod.onattach.push(inst=>{var _bag$patterns4;const bag=inst._zod.bag;(_bag$patterns4=bag.patterns)!==null&&_bag$patterns4!==void 0?_bag$patterns4:bag.patterns=new Set();bag.patterns.add(pattern);});inst._zod.check=payload=>{if(payload.value.endsWith(def.suffix))return;payload.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:def.suffix,input:payload.value,inst,continue:!def.abort});};});///////////////////////////////////
/////    $ZodCheckProperty    /////
///////////////////////////////////
function handleCheckPropertyResult(result,payload,property){if(result.issues.length){payload.issues.push(...prefixIssues(property,result.issues));}}const $ZodCheckProperty=/*@__PURE__*/$constructor("$ZodCheckProperty",(inst,def)=>{$ZodCheck.init(inst,def);inst._zod.check=payload=>{const result=def.schema._zod.run({value:payload.value[def.property],issues:[]},{});if(result instanceof Promise){return result.then(result=>handleCheckPropertyResult(result,payload,def.property));}handleCheckPropertyResult(result,payload,def.property);return;};});const $ZodCheckMimeType=/*@__PURE__*/$constructor("$ZodCheckMimeType",(inst,def)=>{$ZodCheck.init(inst,def);const mimeSet=new Set(def.mime);inst._zod.onattach.push(inst=>{inst._zod.bag.mime=def.mime;});inst._zod.check=payload=>{if(mimeSet.has(payload.value.type))return;payload.issues.push({code:"invalid_value",values:def.mime,input:payload.value.type,inst});};});const $ZodCheckOverwrite=/*@__PURE__*/$constructor("$ZodCheckOverwrite",(inst,def)=>{$ZodCheck.init(inst,def);inst._zod.check=payload=>{payload.value=def.tx(payload.value);};});class Doc{constructor(){let args=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];this.content=[];this.indent=0;if(this)this.args=args;}indented(fn){this.indent+=1;fn(this);this.indent-=1;}write(arg){if(typeof arg==="function"){arg(this,{execution:"sync"});arg(this,{execution:"async"});return;}const content=arg;const lines=content.split("\n").filter(x=>x);const minIndent=Math.min(...lines.map(x=>x.length-x.trimStart().length));const dedented=lines.map(x=>x.slice(minIndent)).map(x=>" ".repeat(this.indent*2)+x);for(const line of dedented){this.content.push(line);}}compile(){var _this$content;const F=Function;const args=this===null||this===void 0?void 0:this.args;const content=(_this$content=this===null||this===void 0?void 0:this.content)!==null&&_this$content!==void 0?_this$content:[""];const lines=[...content.map(x=>"  ".concat(x))];// console.log(lines.join("\n"));
return new F(...args,lines.join("\n"));}}const version={major:4,minor:0,patch:0};const $ZodType=/*@__PURE__*/$constructor("$ZodType",(inst,def)=>{var _inst$_zod$def$checks;var _a;inst!==null&&inst!==void 0?inst:inst={};inst._zod.def=def;// set _def property
inst._zod.bag=inst._zod.bag||{};// initialize _bag object
inst._zod.version=version;const checks=[...((_inst$_zod$def$checks=inst._zod.def.checks)!==null&&_inst$_zod$def$checks!==void 0?_inst$_zod$def$checks:[])];// if inst is itself a checks.$ZodCheck, run it as a check
if(inst._zod.traits.has("$ZodCheck")){checks.unshift(inst);}//
for(const ch of checks){for(const fn of ch._zod.onattach){fn(inst);}}if(checks.length===0){var _a$deferred2,_inst$_zod$deferred;// deferred initializer
// inst._zod.parse is not yet defined
(_a$deferred2=(_a=inst._zod).deferred)!==null&&_a$deferred2!==void 0?_a$deferred2:_a.deferred=[];(_inst$_zod$deferred=inst._zod.deferred)===null||_inst$_zod$deferred===void 0||_inst$_zod$deferred.push(()=>{inst._zod.run=inst._zod.parse;});}else{const runChecks=(payload,checks,ctx)=>{let isAborted=aborted(payload);let asyncResult;for(const ch of checks){if(ch._zod.def.when){const shouldRun=ch._zod.def.when(payload);if(!shouldRun)continue;}else if(isAborted){continue;}const currLen=payload.issues.length;const _=ch._zod.check(payload);if(_ instanceof Promise&&(ctx===null||ctx===void 0?void 0:ctx.async)===false){throw new $ZodAsyncError();}if(asyncResult||_ instanceof Promise){asyncResult=(asyncResult!==null&&asyncResult!==void 0?asyncResult:Promise.resolve()).then(/*#__PURE__*/_asyncToGenerator2(function*(){yield _;const nextLen=payload.issues.length;if(nextLen===currLen)return;if(!isAborted)isAborted=aborted(payload,currLen);}));}else{const nextLen=payload.issues.length;if(nextLen===currLen)continue;if(!isAborted)isAborted=aborted(payload,currLen);}}if(asyncResult){return asyncResult.then(()=>{return payload;});}return payload;};inst._zod.run=(payload,ctx)=>{const result=inst._zod.parse(payload,ctx);if(result instanceof Promise){if(ctx.async===false)throw new $ZodAsyncError();return result.then(result=>runChecks(result,checks,ctx));}return runChecks(result,checks,ctx);};}inst["~standard"]={validate:value=>{try{var _r$error;const r=safeParse$1(inst,value);return r.success?{value:r.data}:{issues:(_r$error=r.error)===null||_r$error===void 0?void 0:_r$error.issues};}catch(_){return safeParseAsync$1(inst,value).then(r=>{var _r$error2;return r.success?{value:r.data}:{issues:(_r$error2=r.error)===null||_r$error2===void 0?void 0:_r$error2.issues};});}},vendor:"zod",version:1};});const $ZodString=/*@__PURE__*/$constructor("$ZodString",(inst,def)=>{var _pop,_inst$_zod$bag$patter,_inst$_zod$bag;$ZodType.init(inst,def);inst._zod.pattern=(_pop=[...((_inst$_zod$bag$patter=inst===null||inst===void 0||(_inst$_zod$bag=inst._zod.bag)===null||_inst$_zod$bag===void 0?void 0:_inst$_zod$bag.patterns)!==null&&_inst$_zod$bag$patter!==void 0?_inst$_zod$bag$patter:[])].pop())!==null&&_pop!==void 0?_pop:string$2(inst._zod.bag);inst._zod.parse=(payload,_)=>{if(def.coerce)try{payload.value=String(payload.value);}catch(_){}if(typeof payload.value==="string")return payload;payload.issues.push({expected:"string",code:"invalid_type",input:payload.value,inst});return payload;};});const $ZodStringFormat=/*@__PURE__*/$constructor("$ZodStringFormat",(inst,def)=>{// check initialization must come first
$ZodCheckStringFormat.init(inst,def);$ZodString.init(inst,def);});const $ZodGUID=/*@__PURE__*/$constructor("$ZodGUID",(inst,def)=>{var _def$pattern5;(_def$pattern5=def.pattern)!==null&&_def$pattern5!==void 0?_def$pattern5:def.pattern=guid$1;$ZodStringFormat.init(inst,def);});const $ZodUUID=/*@__PURE__*/$constructor("$ZodUUID",(inst,def)=>{var _def$pattern7;if(def.version){var _def$pattern6;const versionMap={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8};const v=versionMap[def.version];if(v===undefined)throw new Error("Invalid UUID version: \"".concat(def.version,"\""));(_def$pattern6=def.pattern)!==null&&_def$pattern6!==void 0?_def$pattern6:def.pattern=uuid$1(v);}else(_def$pattern7=def.pattern)!==null&&_def$pattern7!==void 0?_def$pattern7:def.pattern=uuid$1();$ZodStringFormat.init(inst,def);});const $ZodEmail=/*@__PURE__*/$constructor("$ZodEmail",(inst,def)=>{var _def$pattern8;(_def$pattern8=def.pattern)!==null&&_def$pattern8!==void 0?_def$pattern8:def.pattern=email$1;$ZodStringFormat.init(inst,def);});const $ZodURL=/*@__PURE__*/$constructor("$ZodURL",(inst,def)=>{$ZodStringFormat.init(inst,def);inst._zod.check=payload=>{try{const orig=payload.value;const url=new URL(orig);const href=url.href;if(def.hostname){def.hostname.lastIndex=0;if(!def.hostname.test(url.hostname)){payload.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:hostname.source,input:payload.value,inst,continue:!def.abort});}}if(def.protocol){def.protocol.lastIndex=0;if(!def.protocol.test(url.protocol.endsWith(":")?url.protocol.slice(0,-1):url.protocol)){payload.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:def.protocol.source,input:payload.value,inst,continue:!def.abort});}}// payload.value = url.href;
if(!orig.endsWith("/")&&href.endsWith("/")){payload.value=href.slice(0,-1);}else{payload.value=href;}return;}catch(_){payload.issues.push({code:"invalid_format",format:"url",input:payload.value,inst,continue:!def.abort});}};});const $ZodEmoji=/*@__PURE__*/$constructor("$ZodEmoji",(inst,def)=>{var _def$pattern9;(_def$pattern9=def.pattern)!==null&&_def$pattern9!==void 0?_def$pattern9:def.pattern=emoji$1();$ZodStringFormat.init(inst,def);});const $ZodNanoID=/*@__PURE__*/$constructor("$ZodNanoID",(inst,def)=>{var _def$pattern0;(_def$pattern0=def.pattern)!==null&&_def$pattern0!==void 0?_def$pattern0:def.pattern=nanoid$1;$ZodStringFormat.init(inst,def);});const $ZodCUID=/*@__PURE__*/$constructor("$ZodCUID",(inst,def)=>{var _def$pattern1;(_def$pattern1=def.pattern)!==null&&_def$pattern1!==void 0?_def$pattern1:def.pattern=cuid$1;$ZodStringFormat.init(inst,def);});const $ZodCUID2=/*@__PURE__*/$constructor("$ZodCUID2",(inst,def)=>{var _def$pattern10;(_def$pattern10=def.pattern)!==null&&_def$pattern10!==void 0?_def$pattern10:def.pattern=cuid2$1;$ZodStringFormat.init(inst,def);});const $ZodULID=/*@__PURE__*/$constructor("$ZodULID",(inst,def)=>{var _def$pattern11;(_def$pattern11=def.pattern)!==null&&_def$pattern11!==void 0?_def$pattern11:def.pattern=ulid$1;$ZodStringFormat.init(inst,def);});const $ZodXID=/*@__PURE__*/$constructor("$ZodXID",(inst,def)=>{var _def$pattern12;(_def$pattern12=def.pattern)!==null&&_def$pattern12!==void 0?_def$pattern12:def.pattern=xid$1;$ZodStringFormat.init(inst,def);});const $ZodKSUID=/*@__PURE__*/$constructor("$ZodKSUID",(inst,def)=>{var _def$pattern13;(_def$pattern13=def.pattern)!==null&&_def$pattern13!==void 0?_def$pattern13:def.pattern=ksuid$1;$ZodStringFormat.init(inst,def);});const $ZodISODateTime=/*@__PURE__*/$constructor("$ZodISODateTime",(inst,def)=>{var _def$pattern14;(_def$pattern14=def.pattern)!==null&&_def$pattern14!==void 0?_def$pattern14:def.pattern=datetime$1(def);$ZodStringFormat.init(inst,def);});const $ZodISODate=/*@__PURE__*/$constructor("$ZodISODate",(inst,def)=>{var _def$pattern15;(_def$pattern15=def.pattern)!==null&&_def$pattern15!==void 0?_def$pattern15:def.pattern=date$3;$ZodStringFormat.init(inst,def);});const $ZodISOTime=/*@__PURE__*/$constructor("$ZodISOTime",(inst,def)=>{var _def$pattern16;(_def$pattern16=def.pattern)!==null&&_def$pattern16!==void 0?_def$pattern16:def.pattern=time$1(def);$ZodStringFormat.init(inst,def);});const $ZodISODuration=/*@__PURE__*/$constructor("$ZodISODuration",(inst,def)=>{var _def$pattern17;(_def$pattern17=def.pattern)!==null&&_def$pattern17!==void 0?_def$pattern17:def.pattern=duration$1;$ZodStringFormat.init(inst,def);});const $ZodIPv4=/*@__PURE__*/$constructor("$ZodIPv4",(inst,def)=>{var _def$pattern18;(_def$pattern18=def.pattern)!==null&&_def$pattern18!==void 0?_def$pattern18:def.pattern=ipv4$1;$ZodStringFormat.init(inst,def);inst._zod.onattach.push(inst=>{const bag=inst._zod.bag;bag.format="ipv4";});});const $ZodIPv6=/*@__PURE__*/$constructor("$ZodIPv6",(inst,def)=>{var _def$pattern19;(_def$pattern19=def.pattern)!==null&&_def$pattern19!==void 0?_def$pattern19:def.pattern=ipv6$1;$ZodStringFormat.init(inst,def);inst._zod.onattach.push(inst=>{const bag=inst._zod.bag;bag.format="ipv6";});inst._zod.check=payload=>{try{new URL("http://[".concat(payload.value,"]"));// return;
}catch(_unused){payload.issues.push({code:"invalid_format",format:"ipv6",input:payload.value,inst,continue:!def.abort});}};});const $ZodCIDRv4=/*@__PURE__*/$constructor("$ZodCIDRv4",(inst,def)=>{var _def$pattern20;(_def$pattern20=def.pattern)!==null&&_def$pattern20!==void 0?_def$pattern20:def.pattern=cidrv4$1;$ZodStringFormat.init(inst,def);});const $ZodCIDRv6=/*@__PURE__*/$constructor("$ZodCIDRv6",(inst,def)=>{var _def$pattern21;(_def$pattern21=def.pattern)!==null&&_def$pattern21!==void 0?_def$pattern21:def.pattern=cidrv6$1;// not used for validation
$ZodStringFormat.init(inst,def);inst._zod.check=payload=>{const[address,prefix]=payload.value.split("/");try{if(!prefix)throw new Error();const prefixNum=Number(prefix);if("".concat(prefixNum)!==prefix)throw new Error();if(prefixNum<0||prefixNum>128)throw new Error();new URL("http://[".concat(address,"]"));}catch(_unused2){payload.issues.push({code:"invalid_format",format:"cidrv6",input:payload.value,inst,continue:!def.abort});}};});//////////////////////////////   ZodBase64   //////////////////////////////
function isValidBase64(data){if(data==="")return true;if(data.length%4!==0)return false;try{atob(data);return true;}catch(_unused3){return false;}}const $ZodBase64=/*@__PURE__*/$constructor("$ZodBase64",(inst,def)=>{var _def$pattern22;(_def$pattern22=def.pattern)!==null&&_def$pattern22!==void 0?_def$pattern22:def.pattern=base64$1;$ZodStringFormat.init(inst,def);inst._zod.onattach.push(inst=>{inst._zod.bag.contentEncoding="base64";});inst._zod.check=payload=>{if(isValidBase64(payload.value))return;payload.issues.push({code:"invalid_format",format:"base64",input:payload.value,inst,continue:!def.abort});};});//////////////////////////////   ZodBase64   //////////////////////////////
function isValidBase64URL(data){if(!base64url$1.test(data))return false;const base64=data.replace(/[-_]/g,c=>c==="-"?"+":"/");const padded=base64.padEnd(Math.ceil(base64.length/4)*4,"=");return isValidBase64(padded);}const $ZodBase64URL=/*@__PURE__*/$constructor("$ZodBase64URL",(inst,def)=>{var _def$pattern23;(_def$pattern23=def.pattern)!==null&&_def$pattern23!==void 0?_def$pattern23:def.pattern=base64url$1;$ZodStringFormat.init(inst,def);inst._zod.onattach.push(inst=>{inst._zod.bag.contentEncoding="base64url";});inst._zod.check=payload=>{if(isValidBase64URL(payload.value))return;payload.issues.push({code:"invalid_format",format:"base64url",input:payload.value,inst,continue:!def.abort});};});const $ZodE164=/*@__PURE__*/$constructor("$ZodE164",(inst,def)=>{var _def$pattern24;(_def$pattern24=def.pattern)!==null&&_def$pattern24!==void 0?_def$pattern24:def.pattern=e164$1;$ZodStringFormat.init(inst,def);});//////////////////////////////   ZodJWT   //////////////////////////////
function isValidJWT(token){let algorithm=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;try{const tokensParts=token.split(".");if(tokensParts.length!==3)return false;const[header]=tokensParts;if(!header)return false;const parsedHeader=JSON.parse(atob(header));if("typ"in parsedHeader&&(parsedHeader===null||parsedHeader===void 0?void 0:parsedHeader.typ)!=="JWT")return false;if(!parsedHeader.alg)return false;if(algorithm&&(!("alg"in parsedHeader)||parsedHeader.alg!==algorithm))return false;return true;}catch(_unused4){return false;}}const $ZodJWT=/*@__PURE__*/$constructor("$ZodJWT",(inst,def)=>{$ZodStringFormat.init(inst,def);inst._zod.check=payload=>{if(isValidJWT(payload.value,def.alg))return;payload.issues.push({code:"invalid_format",format:"jwt",input:payload.value,inst,continue:!def.abort});};});const $ZodCustomStringFormat=/*@__PURE__*/$constructor("$ZodCustomStringFormat",(inst,def)=>{$ZodStringFormat.init(inst,def);inst._zod.check=payload=>{if(def.fn(payload.value))return;payload.issues.push({code:"invalid_format",format:def.format,input:payload.value,inst,continue:!def.abort});};});const $ZodNumber=/*@__PURE__*/$constructor("$ZodNumber",(inst,def)=>{var _inst$_zod$bag$patter2;$ZodType.init(inst,def);inst._zod.pattern=(_inst$_zod$bag$patter2=inst._zod.bag.pattern)!==null&&_inst$_zod$bag$patter2!==void 0?_inst$_zod$bag$patter2:number$2;inst._zod.parse=(payload,_ctx)=>{if(def.coerce)try{payload.value=Number(payload.value);}catch(_){}const input=payload.value;if(typeof input==="number"&&!Number.isNaN(input)&&Number.isFinite(input)){return payload;}const received=typeof input==="number"?Number.isNaN(input)?"NaN":!Number.isFinite(input)?"Infinity":undefined:undefined;payload.issues.push(_objectSpread2({expected:"number",code:"invalid_type",input,inst},received?{received}:{}));return payload;};});const $ZodNumberFormat=/*@__PURE__*/$constructor("$ZodNumber",(inst,def)=>{$ZodCheckNumberFormat.init(inst,def);$ZodNumber.init(inst,def);// no format checksp
});const $ZodBoolean=/*@__PURE__*/$constructor("$ZodBoolean",(inst,def)=>{$ZodType.init(inst,def);inst._zod.pattern=boolean$2;inst._zod.parse=(payload,_ctx)=>{if(def.coerce)try{payload.value=Boolean(payload.value);}catch(_){}const input=payload.value;if(typeof input==="boolean")return payload;payload.issues.push({expected:"boolean",code:"invalid_type",input,inst});return payload;};});const $ZodBigInt=/*@__PURE__*/$constructor("$ZodBigInt",(inst,def)=>{$ZodType.init(inst,def);inst._zod.pattern=bigint$2;inst._zod.parse=(payload,_ctx)=>{if(def.coerce)try{payload.value=BigInt(payload.value);}catch(_){}if(typeof payload.value==="bigint")return payload;payload.issues.push({expected:"bigint",code:"invalid_type",input:payload.value,inst});return payload;};});const $ZodBigIntFormat=/*@__PURE__*/$constructor("$ZodBigInt",(inst,def)=>{$ZodCheckBigIntFormat.init(inst,def);$ZodBigInt.init(inst,def);// no format checks
});const $ZodSymbol=/*@__PURE__*/$constructor("$ZodSymbol",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,_ctx)=>{const input=payload.value;if(typeof input==="symbol")return payload;payload.issues.push({expected:"symbol",code:"invalid_type",input,inst});return payload;};});const $ZodUndefined=/*@__PURE__*/$constructor("$ZodUndefined",(inst,def)=>{$ZodType.init(inst,def);inst._zod.pattern=_undefined$2;inst._zod.values=new Set([undefined]);inst._zod.optin="optional";inst._zod.optout="optional";inst._zod.parse=(payload,_ctx)=>{const input=payload.value;if(typeof input==="undefined")return payload;payload.issues.push({expected:"undefined",code:"invalid_type",input,inst});return payload;};});const $ZodNull=/*@__PURE__*/$constructor("$ZodNull",(inst,def)=>{$ZodType.init(inst,def);inst._zod.pattern=_null$2;inst._zod.values=new Set([null]);inst._zod.parse=(payload,_ctx)=>{const input=payload.value;if(input===null)return payload;payload.issues.push({expected:"null",code:"invalid_type",input,inst});return payload;};});const $ZodAny=/*@__PURE__*/$constructor("$ZodAny",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=payload=>payload;});const $ZodUnknown=/*@__PURE__*/$constructor("$ZodUnknown",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=payload=>payload;});const $ZodNever=/*@__PURE__*/$constructor("$ZodNever",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,_ctx)=>{payload.issues.push({expected:"never",code:"invalid_type",input:payload.value,inst});return payload;};});const $ZodVoid=/*@__PURE__*/$constructor("$ZodVoid",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,_ctx)=>{const input=payload.value;if(typeof input==="undefined")return payload;payload.issues.push({expected:"void",code:"invalid_type",input,inst});return payload;};});const $ZodDate=/*@__PURE__*/$constructor("$ZodDate",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,_ctx)=>{if(def.coerce){try{payload.value=new Date(payload.value);}catch(_err){}}const input=payload.value;const isDate=input instanceof Date;const isValidDate=isDate&&!Number.isNaN(input.getTime());if(isValidDate)return payload;payload.issues.push(_objectSpread2(_objectSpread2({expected:"date",code:"invalid_type",input},isDate?{received:"Invalid Date"}:{}),{},{inst}));return payload;};});function handleArrayResult(result,final,index){if(result.issues.length){final.issues.push(...prefixIssues(index,result.issues));}final.value[index]=result.value;}const $ZodArray=/*@__PURE__*/$constructor("$ZodArray",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,ctx)=>{const input=payload.value;if(!Array.isArray(input)){payload.issues.push({expected:"array",code:"invalid_type",input,inst});return payload;}payload.value=Array(input.length);const proms=[];for(let i=0;i<input.length;i++){const item=input[i];const result=def.element._zod.run({value:item,issues:[]},ctx);if(result instanceof Promise){proms.push(result.then(result=>handleArrayResult(result,payload,i)));}else{handleArrayResult(result,payload,i);}}if(proms.length){return Promise.all(proms).then(()=>payload);}return payload;//handleArrayResultsAsync(parseResults, final);
};});function handleObjectResult(result,final,key){// if(isOptional)
if(result.issues.length){final.issues.push(...prefixIssues(key,result.issues));}final.value[key]=result.value;}function handleOptionalObjectResult(result,final,key,input){if(result.issues.length){// validation failed against value schema
if(input[key]===undefined){// if input was undefined, ignore the error
if(key in input){final.value[key]=undefined;}else{final.value[key]=result.value;}}else{final.issues.push(...prefixIssues(key,result.issues));}}else if(result.value===undefined){// validation returned `undefined`
if(key in input)final.value[key]=undefined;}else{// non-undefined value
final.value[key]=result.value;}}const $ZodObject=/*@__PURE__*/$constructor("$ZodObject",(inst,def)=>{// requires cast because technically $ZodObject doesn't extend
$ZodType.init(inst,def);const _normalized=cached(()=>{const keys=Object.keys(def.shape);for(const k of keys){if(!(def.shape[k]instanceof $ZodType)){throw new Error("Invalid element at key \"".concat(k,"\": expected a Zod schema"));}}const okeys=optionalKeys(def.shape);return{shape:def.shape,keys,keySet:new Set(keys),numKeys:keys.length,optionalKeys:new Set(okeys)};});defineLazy(inst._zod,"propValues",()=>{const shape=def.shape;const propValues={};for(const key in shape){const field=shape[key]._zod;if(field.values){var _propValues$key;(_propValues$key=propValues[key])!==null&&_propValues$key!==void 0?_propValues$key:propValues[key]=new Set();for(const v of field.values)propValues[key].add(v);}}return propValues;});const generateFastpass=shape=>{const doc=new Doc(["shape","payload","ctx"]);const normalized=_normalized.value;const parseStr=key=>{const k=esc(key);return"shape[".concat(k,"]._zod.run({ value: input[").concat(k,"], issues: [] }, ctx)");};doc.write("const input = payload.value;");const ids=Object.create(null);let counter=0;for(const key of normalized.keys){ids[key]="key_".concat(counter++);}// A: preserve key order {
doc.write("const newResult = {}");for(const key of normalized.keys){if(normalized.optionalKeys.has(key)){const id=ids[key];doc.write("const ".concat(id," = ").concat(parseStr(key),";"));const k=esc(key);doc.write("\n        if (".concat(id,".issues.length) {\n          if (input[").concat(k,"] === undefined) {\n            if (").concat(k," in input) {\n              newResult[").concat(k,"] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ").concat(id,".issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [").concat(k,", ...iss.path] : [").concat(k,"],\n              }))\n            );\n          }\n        } else if (").concat(id,".value === undefined) {\n          if (").concat(k," in input) newResult[").concat(k,"] = undefined;\n        } else {\n          newResult[").concat(k,"] = ").concat(id,".value;\n        }\n        "));}else{const id=ids[key];//  const id = ids[key];
doc.write("const ".concat(id," = ").concat(parseStr(key),";"));doc.write("\n          if (".concat(id,".issues.length) payload.issues = payload.issues.concat(").concat(id,".issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [").concat(esc(key),", ...iss.path] : [").concat(esc(key),"]\n          })));"));doc.write("newResult[".concat(esc(key),"] = ").concat(id,".value"));}}doc.write("payload.value = newResult;");doc.write("return payload;");const fn=doc.compile();return(payload,ctx)=>fn(shape,payload,ctx);};let fastpass;const isObject$1=isObject;const jit=!globalConfig.jitless;const allowsEval$1=allowsEval;const fastEnabled=jit&&allowsEval$1.value;// && !def.catchall;
const catchall=def.catchall;let value;inst._zod.parse=(payload,ctx)=>{value!==null&&value!==void 0?value:value=_normalized.value;const input=payload.value;if(!isObject$1(input)){payload.issues.push({expected:"object",code:"invalid_type",input,inst});return payload;}const proms=[];if(jit&&fastEnabled&&(ctx===null||ctx===void 0?void 0:ctx.async)===false&&ctx.jitless!==true){// always synchronous
if(!fastpass)fastpass=generateFastpass(def.shape);payload=fastpass(payload,ctx);}else{payload.value={};const shape=value.shape;for(const key of value.keys){const el=shape[key];// do not add omitted optional keys
// if (!(key in input)) {
//   if (optionalKeys.has(key)) continue;
//   payload.issues.push({
//     code: "invalid_type",
//     path: [key],
//     expected: "nonoptional",
//     note: `Missing required key: "${key}"`,
//     input,
//     inst,
//   });
// }
const r=el._zod.run({value:input[key],issues:[]},ctx);const isOptional=el._zod.optin==="optional"&&el._zod.optout==="optional";if(r instanceof Promise){proms.push(r.then(r=>isOptional?handleOptionalObjectResult(r,payload,key,input):handleObjectResult(r,payload,key)));}else if(isOptional){handleOptionalObjectResult(r,payload,key,input);}else{handleObjectResult(r,payload,key);}}}if(!catchall){// return payload;
return proms.length?Promise.all(proms).then(()=>payload):payload;}const unrecognized=[];// iterate over input keys
const keySet=value.keySet;const _catchall=catchall._zod;const t=_catchall.def.type;for(const key of Object.keys(input)){if(keySet.has(key))continue;if(t==="never"){unrecognized.push(key);continue;}const r=_catchall.run({value:input[key],issues:[]},ctx);if(r instanceof Promise){proms.push(r.then(r=>handleObjectResult(r,payload,key)));}else{handleObjectResult(r,payload,key);}}if(unrecognized.length){payload.issues.push({code:"unrecognized_keys",keys:unrecognized,input,inst});}if(!proms.length)return payload;return Promise.all(proms).then(()=>{return payload;});};});function handleUnionResults(results,final,inst,ctx){for(const result of results){if(result.issues.length===0){final.value=result.value;return final;}}final.issues.push({code:"invalid_union",input:final.value,inst,errors:results.map(result=>result.issues.map(iss=>finalizeIssue(iss,ctx,config())))});return final;}const $ZodUnion=/*@__PURE__*/$constructor("$ZodUnion",(inst,def)=>{$ZodType.init(inst,def);defineLazy(inst._zod,"optin",()=>def.options.some(o=>o._zod.optin==="optional")?"optional":undefined);defineLazy(inst._zod,"optout",()=>def.options.some(o=>o._zod.optout==="optional")?"optional":undefined);defineLazy(inst._zod,"values",()=>{if(def.options.every(o=>o._zod.values)){return new Set(def.options.flatMap(option=>Array.from(option._zod.values)));}return undefined;});defineLazy(inst._zod,"pattern",()=>{if(def.options.every(o=>o._zod.pattern)){const patterns=def.options.map(o=>o._zod.pattern);return new RegExp("^(".concat(patterns.map(p=>cleanRegex(p.source)).join("|"),")$"));}return undefined;});inst._zod.parse=(payload,ctx)=>{let async=false;const results=[];for(const option of def.options){const result=option._zod.run({value:payload.value,issues:[]},ctx);if(result instanceof Promise){results.push(result);async=true;}else{if(result.issues.length===0)return result;results.push(result);}}if(!async)return handleUnionResults(results,payload,inst,ctx);return Promise.all(results).then(results=>{return handleUnionResults(results,payload,inst,ctx);});};});const $ZodDiscriminatedUnion=/*@__PURE__*/$constructor("$ZodDiscriminatedUnion",(inst,def)=>{$ZodUnion.init(inst,def);const _super=inst._zod.parse;defineLazy(inst._zod,"propValues",()=>{const propValues={};for(const option of def.options){const pv=option._zod.propValues;if(!pv||Object.keys(pv).length===0)throw new Error("Invalid discriminated union option at index \"".concat(def.options.indexOf(option),"\""));for(const[k,v]of Object.entries(pv)){if(!propValues[k])propValues[k]=new Set();for(const val of v){propValues[k].add(val);}}}return propValues;});const disc=cached(()=>{const opts=def.options;const map=new Map();for(const o of opts){const values=o._zod.propValues[def.discriminator];if(!values||values.size===0)throw new Error("Invalid discriminated union option at index \"".concat(def.options.indexOf(o),"\""));for(const v of values){if(map.has(v)){throw new Error("Duplicate discriminator value \"".concat(String(v),"\""));}map.set(v,o);}}return map;});inst._zod.parse=(payload,ctx)=>{const input=payload.value;if(!isObject(input)){payload.issues.push({code:"invalid_type",expected:"object",input,inst});return payload;}const opt=disc.value.get(input===null||input===void 0?void 0:input[def.discriminator]);if(opt){return opt._zod.run(payload,ctx);}if(def.unionFallback){return _super(payload,ctx);}// no matching discriminator
payload.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input,path:[def.discriminator],inst});return payload;};});const $ZodIntersection=/*@__PURE__*/$constructor("$ZodIntersection",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,ctx)=>{const input=payload.value;const left=def.left._zod.run({value:input,issues:[]},ctx);const right=def.right._zod.run({value:input,issues:[]},ctx);const async=left instanceof Promise||right instanceof Promise;if(async){return Promise.all([left,right]).then(_ref27=>{let[left,right]=_ref27;return handleIntersectionResults(payload,left,right);});}return handleIntersectionResults(payload,left,right);};});function mergeValues(a,b){// const aType = parse.t(a);
// const bType = parse.t(b);
if(a===b){return{valid:true,data:a};}if(a instanceof Date&&b instanceof Date&&+a===+b){return{valid:true,data:a};}if(isPlainObject(a)&&isPlainObject(b)){const bKeys=Object.keys(b);const sharedKeys=Object.keys(a).filter(key=>bKeys.indexOf(key)!==-1);const newObj=_objectSpread2(_objectSpread2({},a),b);for(const key of sharedKeys){const sharedValue=mergeValues(a[key],b[key]);if(!sharedValue.valid){return{valid:false,mergeErrorPath:[key,...sharedValue.mergeErrorPath]};}newObj[key]=sharedValue.data;}return{valid:true,data:newObj};}if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length){return{valid:false,mergeErrorPath:[]};}const newArray=[];for(let index=0;index<a.length;index++){const itemA=a[index];const itemB=b[index];const sharedValue=mergeValues(itemA,itemB);if(!sharedValue.valid){return{valid:false,mergeErrorPath:[index,...sharedValue.mergeErrorPath]};}newArray.push(sharedValue.data);}return{valid:true,data:newArray};}return{valid:false,mergeErrorPath:[]};}function handleIntersectionResults(result,left,right){if(left.issues.length){result.issues.push(...left.issues);}if(right.issues.length){result.issues.push(...right.issues);}if(aborted(result))return result;const merged=mergeValues(left.value,right.value);if(!merged.valid){throw new Error("Unmergable intersection. Error path: "+"".concat(JSON.stringify(merged.mergeErrorPath)));}result.value=merged.data;return result;}const $ZodTuple=/*@__PURE__*/$constructor("$ZodTuple",(inst,def)=>{$ZodType.init(inst,def);const items=def.items;const optStart=items.length-[...items].reverse().findIndex(item=>item._zod.optin!=="optional");inst._zod.parse=(payload,ctx)=>{const input=payload.value;if(!Array.isArray(input)){payload.issues.push({input,inst,expected:"tuple",code:"invalid_type"});return payload;}payload.value=[];const proms=[];if(!def.rest){const tooBig=input.length>items.length;const tooSmall=input.length<optStart-1;if(tooBig||tooSmall){payload.issues.push(_objectSpread2({input,inst,origin:"array"},tooBig?{code:"too_big",maximum:items.length}:{code:"too_small",minimum:items.length}));return payload;}}let i=-1;for(const item of items){i++;if(i>=input.length)if(i>=optStart)continue;const result=item._zod.run({value:input[i],issues:[]},ctx);if(result instanceof Promise){proms.push(result.then(result=>handleTupleResult(result,payload,i)));}else{handleTupleResult(result,payload,i);}}if(def.rest){const rest=input.slice(items.length);for(const el of rest){i++;const result=def.rest._zod.run({value:el,issues:[]},ctx);if(result instanceof Promise){proms.push(result.then(result=>handleTupleResult(result,payload,i)));}else{handleTupleResult(result,payload,i);}}}if(proms.length)return Promise.all(proms).then(()=>payload);return payload;};});function handleTupleResult(result,final,index){if(result.issues.length){final.issues.push(...prefixIssues(index,result.issues));}final.value[index]=result.value;}const $ZodRecord=/*@__PURE__*/$constructor("$ZodRecord",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,ctx)=>{const input=payload.value;if(!isPlainObject(input)){payload.issues.push({expected:"record",code:"invalid_type",input,inst});return payload;}const proms=[];if(def.keyType._zod.values){const values=def.keyType._zod.values;payload.value={};for(const key of values){if(typeof key==="string"||typeof key==="number"||typeof key==="symbol"){const result=def.valueType._zod.run({value:input[key],issues:[]},ctx);if(result instanceof Promise){proms.push(result.then(result=>{if(result.issues.length){payload.issues.push(...prefixIssues(key,result.issues));}payload.value[key]=result.value;}));}else{if(result.issues.length){payload.issues.push(...prefixIssues(key,result.issues));}payload.value[key]=result.value;}}}let unrecognized;for(const key in input){if(!values.has(key)){unrecognized=unrecognized!==null&&unrecognized!==void 0?unrecognized:[];unrecognized.push(key);}}if(unrecognized&&unrecognized.length>0){payload.issues.push({code:"unrecognized_keys",input,inst,keys:unrecognized});}}else{payload.value={};for(const key of Reflect.ownKeys(input)){if(key==="__proto__")continue;const keyResult=def.keyType._zod.run({value:key,issues:[]},ctx);if(keyResult instanceof Promise){throw new Error("Async schemas not supported in object keys currently");}if(keyResult.issues.length){payload.issues.push({origin:"record",code:"invalid_key",issues:keyResult.issues.map(iss=>finalizeIssue(iss,ctx,config())),input:key,path:[key],inst});payload.value[keyResult.value]=keyResult.value;continue;}const result=def.valueType._zod.run({value:input[key],issues:[]},ctx);if(result instanceof Promise){proms.push(result.then(result=>{if(result.issues.length){payload.issues.push(...prefixIssues(key,result.issues));}payload.value[keyResult.value]=result.value;}));}else{if(result.issues.length){payload.issues.push(...prefixIssues(key,result.issues));}payload.value[keyResult.value]=result.value;}}}if(proms.length){return Promise.all(proms).then(()=>payload);}return payload;};});const $ZodMap=/*@__PURE__*/$constructor("$ZodMap",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,ctx)=>{const input=payload.value;if(!(input instanceof Map)){payload.issues.push({expected:"map",code:"invalid_type",input,inst});return payload;}const proms=[];payload.value=new Map();for(const[key,value]of input){const keyResult=def.keyType._zod.run({value:key,issues:[]},ctx);const valueResult=def.valueType._zod.run({value:value,issues:[]},ctx);if(keyResult instanceof Promise||valueResult instanceof Promise){proms.push(Promise.all([keyResult,valueResult]).then(_ref28=>{let[keyResult,valueResult]=_ref28;handleMapResult(keyResult,valueResult,payload,key,input,inst,ctx);}));}else{handleMapResult(keyResult,valueResult,payload,key,input,inst,ctx);}}if(proms.length)return Promise.all(proms).then(()=>payload);return payload;};});function handleMapResult(keyResult,valueResult,final,key,input,inst,ctx){if(keyResult.issues.length){if(propertyKeyTypes.has(typeof key)){final.issues.push(...prefixIssues(key,keyResult.issues));}else{final.issues.push({origin:"map",code:"invalid_key",input,inst,issues:keyResult.issues.map(iss=>finalizeIssue(iss,ctx,config()))});}}if(valueResult.issues.length){if(propertyKeyTypes.has(typeof key)){final.issues.push(...prefixIssues(key,valueResult.issues));}else{final.issues.push({origin:"map",code:"invalid_element",input,inst,key:key,issues:valueResult.issues.map(iss=>finalizeIssue(iss,ctx,config()))});}}final.value.set(keyResult.value,valueResult.value);}const $ZodSet=/*@__PURE__*/$constructor("$ZodSet",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,ctx)=>{const input=payload.value;if(!(input instanceof Set)){payload.issues.push({input,inst,expected:"set",code:"invalid_type"});return payload;}const proms=[];payload.value=new Set();for(const item of input){const result=def.valueType._zod.run({value:item,issues:[]},ctx);if(result instanceof Promise){proms.push(result.then(result=>handleSetResult(result,payload)));}else handleSetResult(result,payload);}if(proms.length)return Promise.all(proms).then(()=>payload);return payload;};});function handleSetResult(result,final){if(result.issues.length){final.issues.push(...result.issues);}final.value.add(result.value);}const $ZodEnum=/*@__PURE__*/$constructor("$ZodEnum",(inst,def)=>{$ZodType.init(inst,def);const values=getEnumValues(def.entries);inst._zod.values=new Set(values);inst._zod.pattern=new RegExp("^(".concat(values.filter(k=>propertyKeyTypes.has(typeof k)).map(o=>typeof o==="string"?escapeRegex(o):o.toString()).join("|"),")$"));inst._zod.parse=(payload,_ctx)=>{const input=payload.value;if(inst._zod.values.has(input)){return payload;}payload.issues.push({code:"invalid_value",values,input,inst});return payload;};});const $ZodLiteral=/*@__PURE__*/$constructor("$ZodLiteral",(inst,def)=>{$ZodType.init(inst,def);inst._zod.values=new Set(def.values);inst._zod.pattern=new RegExp("^(".concat(def.values.map(o=>typeof o==="string"?escapeRegex(o):o?o.toString():String(o)).join("|"),")$"));inst._zod.parse=(payload,_ctx)=>{const input=payload.value;if(inst._zod.values.has(input)){return payload;}payload.issues.push({code:"invalid_value",values:def.values,input,inst});return payload;};});const $ZodFile=/*@__PURE__*/$constructor("$ZodFile",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,_ctx)=>{const input=payload.value;if(input instanceof File)return payload;payload.issues.push({expected:"file",code:"invalid_type",input,inst});return payload;};});const $ZodTransform=/*@__PURE__*/$constructor("$ZodTransform",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,_ctx)=>{const _out=def.transform(payload.value,payload);if(_ctx.async){const output=_out instanceof Promise?_out:Promise.resolve(_out);return output.then(output=>{payload.value=output;return payload;});}if(_out instanceof Promise){throw new $ZodAsyncError();}payload.value=_out;return payload;};});const $ZodOptional=/*@__PURE__*/$constructor("$ZodOptional",(inst,def)=>{$ZodType.init(inst,def);inst._zod.optin="optional";inst._zod.optout="optional";defineLazy(inst._zod,"values",()=>{return def.innerType._zod.values?new Set([...def.innerType._zod.values,undefined]):undefined;});defineLazy(inst._zod,"pattern",()=>{const pattern=def.innerType._zod.pattern;return pattern?new RegExp("^(".concat(cleanRegex(pattern.source),")?$")):undefined;});inst._zod.parse=(payload,ctx)=>{if(def.innerType._zod.optin==="optional"){return def.innerType._zod.run(payload,ctx);}if(payload.value===undefined){return payload;}return def.innerType._zod.run(payload,ctx);};});const $ZodNullable=/*@__PURE__*/$constructor("$ZodNullable",(inst,def)=>{$ZodType.init(inst,def);defineLazy(inst._zod,"optin",()=>def.innerType._zod.optin);defineLazy(inst._zod,"optout",()=>def.innerType._zod.optout);defineLazy(inst._zod,"pattern",()=>{const pattern=def.innerType._zod.pattern;return pattern?new RegExp("^(".concat(cleanRegex(pattern.source),"|null)$")):undefined;});defineLazy(inst._zod,"values",()=>{return def.innerType._zod.values?new Set([...def.innerType._zod.values,null]):undefined;});inst._zod.parse=(payload,ctx)=>{if(payload.value===null)return payload;return def.innerType._zod.run(payload,ctx);};});const $ZodDefault=/*@__PURE__*/$constructor("$ZodDefault",(inst,def)=>{$ZodType.init(inst,def);// inst._zod.qin = "true";
inst._zod.optin="optional";defineLazy(inst._zod,"values",()=>def.innerType._zod.values);inst._zod.parse=(payload,ctx)=>{if(payload.value===undefined){payload.value=def.defaultValue;/**
             * $ZodDefault always returns the default value immediately.
             * It doesn't pass the default value into the validator ("prefault"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a "prefault" for the pipe.   */return payload;}const result=def.innerType._zod.run(payload,ctx);if(result instanceof Promise){return result.then(result=>handleDefaultResult(result,def));}return handleDefaultResult(result,def);};});function handleDefaultResult(payload,def){if(payload.value===undefined){payload.value=def.defaultValue;}return payload;}const $ZodPrefault=/*@__PURE__*/$constructor("$ZodPrefault",(inst,def)=>{$ZodType.init(inst,def);inst._zod.optin="optional";defineLazy(inst._zod,"values",()=>def.innerType._zod.values);inst._zod.parse=(payload,ctx)=>{if(payload.value===undefined){payload.value=def.defaultValue;}return def.innerType._zod.run(payload,ctx);};});const $ZodNonOptional=/*@__PURE__*/$constructor("$ZodNonOptional",(inst,def)=>{$ZodType.init(inst,def);defineLazy(inst._zod,"values",()=>{const v=def.innerType._zod.values;return v?new Set([...v].filter(x=>x!==undefined)):undefined;});inst._zod.parse=(payload,ctx)=>{const result=def.innerType._zod.run(payload,ctx);if(result instanceof Promise){return result.then(result=>handleNonOptionalResult(result,inst));}return handleNonOptionalResult(result,inst);};});function handleNonOptionalResult(payload,inst){if(!payload.issues.length&&payload.value===undefined){payload.issues.push({code:"invalid_type",expected:"nonoptional",input:payload.value,inst});}return payload;}const $ZodSuccess=/*@__PURE__*/$constructor("$ZodSuccess",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,ctx)=>{const result=def.innerType._zod.run(payload,ctx);if(result instanceof Promise){return result.then(result=>{payload.value=result.issues.length===0;return payload;});}payload.value=result.issues.length===0;return payload;};});const $ZodCatch=/*@__PURE__*/$constructor("$ZodCatch",(inst,def)=>{$ZodType.init(inst,def);inst._zod.optin="optional";defineLazy(inst._zod,"optout",()=>def.innerType._zod.optout);defineLazy(inst._zod,"values",()=>def.innerType._zod.values);inst._zod.parse=(payload,ctx)=>{const result=def.innerType._zod.run(payload,ctx);if(result instanceof Promise){return result.then(result=>{payload.value=result.value;if(result.issues.length){payload.value=def.catchValue(_objectSpread2(_objectSpread2({},payload),{},{error:{issues:result.issues.map(iss=>finalizeIssue(iss,ctx,config()))},input:payload.value}));payload.issues=[];}return payload;});}payload.value=result.value;if(result.issues.length){payload.value=def.catchValue(_objectSpread2(_objectSpread2({},payload),{},{error:{issues:result.issues.map(iss=>finalizeIssue(iss,ctx,config()))},input:payload.value}));payload.issues=[];}return payload;};});const $ZodNaN=/*@__PURE__*/$constructor("$ZodNaN",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,_ctx)=>{if(typeof payload.value!=="number"||!Number.isNaN(payload.value)){payload.issues.push({input:payload.value,inst,expected:"nan",code:"invalid_type"});return payload;}return payload;};});const $ZodPipe=/*@__PURE__*/$constructor("$ZodPipe",(inst,def)=>{$ZodType.init(inst,def);defineLazy(inst._zod,"values",()=>def.in._zod.values);defineLazy(inst._zod,"optin",()=>def.in._zod.optin);defineLazy(inst._zod,"optout",()=>def.out._zod.optout);inst._zod.parse=(payload,ctx)=>{const left=def.in._zod.run(payload,ctx);if(left instanceof Promise){return left.then(left=>handlePipeResult(left,def,ctx));}return handlePipeResult(left,def,ctx);};});function handlePipeResult(left,def,ctx){if(aborted(left)){return left;}return def.out._zod.run({value:left.value,issues:left.issues},ctx);}const $ZodReadonly=/*@__PURE__*/$constructor("$ZodReadonly",(inst,def)=>{$ZodType.init(inst,def);defineLazy(inst._zod,"propValues",()=>def.innerType._zod.propValues);defineLazy(inst._zod,"values",()=>def.innerType._zod.values);defineLazy(inst._zod,"optin",()=>def.innerType._zod.optin);defineLazy(inst._zod,"optout",()=>def.innerType._zod.optout);inst._zod.parse=(payload,ctx)=>{const result=def.innerType._zod.run(payload,ctx);if(result instanceof Promise){return result.then(handleReadonlyResult);}return handleReadonlyResult(result);};});function handleReadonlyResult(payload){payload.value=Object.freeze(payload.value);return payload;}const $ZodTemplateLiteral=/*@__PURE__*/$constructor("$ZodTemplateLiteral",(inst,def)=>{$ZodType.init(inst,def);const regexParts=[];for(const part of def.parts){if(part instanceof $ZodType){if(!part._zod.pattern){// if (!source)
throw new Error("Invalid template literal part, no pattern found: ".concat([...part._zod.traits].shift()));}const source=part._zod.pattern instanceof RegExp?part._zod.pattern.source:part._zod.pattern;if(!source)throw new Error("Invalid template literal part: ".concat(part._zod.traits));const start=source.startsWith("^")?1:0;const end=source.endsWith("$")?source.length-1:source.length;regexParts.push(source.slice(start,end));}else if(part===null||primitiveTypes.has(typeof part)){regexParts.push(escapeRegex("".concat(part)));}else{throw new Error("Invalid template literal part: ".concat(part));}}inst._zod.pattern=new RegExp("^".concat(regexParts.join(""),"$"));inst._zod.parse=(payload,_ctx)=>{if(typeof payload.value!=="string"){payload.issues.push({input:payload.value,inst,expected:"template_literal",code:"invalid_type"});return payload;}inst._zod.pattern.lastIndex=0;if(!inst._zod.pattern.test(payload.value)){payload.issues.push({input:payload.value,inst,code:"invalid_format",format:"template_literal",pattern:inst._zod.pattern.source});return payload;}return payload;};});const $ZodPromise=/*@__PURE__*/$constructor("$ZodPromise",(inst,def)=>{$ZodType.init(inst,def);inst._zod.parse=(payload,ctx)=>{return Promise.resolve(payload.value).then(inner=>def.innerType._zod.run({value:inner,issues:[]},ctx));};});const $ZodLazy=/*@__PURE__*/$constructor("$ZodLazy",(inst,def)=>{$ZodType.init(inst,def);defineLazy(inst._zod,"innerType",()=>def.getter());defineLazy(inst._zod,"pattern",()=>inst._zod.innerType._zod.pattern);defineLazy(inst._zod,"propValues",()=>inst._zod.innerType._zod.propValues);defineLazy(inst._zod,"optin",()=>inst._zod.innerType._zod.optin);defineLazy(inst._zod,"optout",()=>inst._zod.innerType._zod.optout);inst._zod.parse=(payload,ctx)=>{const inner=inst._zod.innerType;return inner._zod.run(payload,ctx);};});const $ZodCustom=/*@__PURE__*/$constructor("$ZodCustom",(inst,def)=>{$ZodCheck.init(inst,def);$ZodType.init(inst,def);inst._zod.parse=(payload,_)=>{return payload;};inst._zod.check=payload=>{const input=payload.value;const r=def.fn(input);if(r instanceof Promise){return r.then(r=>handleRefineResult(r,payload,input,inst));}handleRefineResult(r,payload,input,inst);return;};});function handleRefineResult(result,payload,input,inst){if(!result){var _inst$_zod$def$path;const _iss={code:"custom",input,inst,// incorporates params.error into issue reporting
path:[...((_inst$_zod$def$path=inst._zod.def.path)!==null&&_inst$_zod$def$path!==void 0?_inst$_zod$def$path:[])],// incorporates params.error into issue reporting
continue:!inst._zod.def.abort// params: inst._zod.def.params,
};if(inst._zod.def.params)_iss.params=inst._zod.def.params;payload.issues.push(issue(_iss));}}const error$C=()=>{const Sizable={string:{unit:"حرف",verb:"أن يحوي"},file:{unit:"بايت",verb:"أن يحوي"},array:{unit:"عنصر",verb:"أن يحوي"},set:{unit:"عنصر",verb:"أن يحوي"}};function getSizing(origin){var _Sizable$origin;return(_Sizable$origin=Sizable[origin])!==null&&_Sizable$origin!==void 0?_Sizable$origin:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"مدخل",email:"بريد إلكتروني",url:"رابط",emoji:"إيموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاريخ ووقت بمعيار ISO",date:"تاريخ بمعيار ISO",time:"وقت بمعيار ISO",duration:"مدة بمعيار ISO",ipv4:"عنوان IPv4",ipv6:"عنوان IPv6",cidrv4:"مدى عناوين بصيغة IPv4",cidrv6:"مدى عناوين بصيغة IPv6",base64:"نَص بترميز base64-encoded",base64url:"نَص بترميز base64url-encoded",json_string:"نَص على هيئة JSON",e164:"رقم هاتف بمعيار E.164",jwt:"JWT",template_literal:"مدخل"};return issue=>{switch(issue.code){case"invalid_type":return"\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ".concat(issue.expected,"\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ".concat(stringifyPrimitive(issue.values[0]));return"\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin,_sizing$unit,_issue$origin2;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return" \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ".concat((_issue$origin=issue.origin)!==null&&_issue$origin!==void 0?_issue$origin:"القيمة"," ").concat(adj," ").concat(issue.maximum.toString()," ").concat((_sizing$unit=sizing.unit)!==null&&_sizing$unit!==void 0?_sizing$unit:"عنصر");return"\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ".concat((_issue$origin2=issue.origin)!==null&&_issue$origin2!==void 0?_issue$origin2:"القيمة"," ").concat(adj," ").concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ".concat(issue.origin," \u0623\u0646 \u064A\u0643\u0648\u0646 ").concat(adj," ").concat(issue.minimum.toString()," ").concat(sizing.unit);}return"\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ".concat(issue.origin," \u0623\u0646 \u064A\u0643\u0648\u0646 ").concat(adj," ").concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format;const _issue=issue;if(_issue.format==="starts_with")return"\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 \"".concat(issue.prefix,"\"");if(_issue.format==="ends_with")return"\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ".concat(_issue.pattern);return"".concat((_Nouns$_issue$format=Nouns[_issue.format])!==null&&_Nouns$_issue$format!==void 0?_Nouns$_issue$format:issue.format," \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644");}case"not_multiple_of":return"\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ".concat(issue.divisor);case"unrecognized_keys":return"\u0645\u0639\u0631\u0641".concat(issue.keys.length>1?"ات":""," \u063A\u0631\u064A\u0628").concat(issue.keys.length>1?"ة":"",": ").concat(joinValues(issue.keys,"، "));case"invalid_key":return"\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ".concat(issue.origin);case"invalid_union":return"مدخل غير مقبول";case"invalid_element":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ".concat(issue.origin);default:return"مدخل غير مقبول";}};};function ar(){return{localeError:error$C()};}const error$B=()=>{const Sizable={string:{unit:"simvol",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"element",verb:"olmalıdır"},set:{unit:"element",verb:"olmalıdır"}};function getSizing(origin){var _Sizable$origin2;return(_Sizable$origin2=Sizable[origin])!==null&&_Sizable$origin2!==void 0?_Sizable$origin2:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return issue=>{switch(issue.code){case"invalid_type":return"Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ".concat(issue.expected,", daxil olan ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ".concat(stringifyPrimitive(issue.values[0]));return"Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin3,_sizing$unit2,_issue$origin4;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ".concat((_issue$origin3=issue.origin)!==null&&_issue$origin3!==void 0?_issue$origin3:"dəyər"," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit2=sizing.unit)!==null&&_sizing$unit2!==void 0?_sizing$unit2:"element");return"\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ".concat((_issue$origin4=issue.origin)!==null&&_issue$origin4!==void 0?_issue$origin4:"dəyər"," ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing)return"\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);return"\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format2;const _issue=issue;if(_issue.format==="starts_with")return"Yanl\u0131\u015F m\u0259tn: \"".concat(_issue.prefix,"\" il\u0259 ba\u015Flamal\u0131d\u0131r");if(_issue.format==="ends_with")return"Yanl\u0131\u015F m\u0259tn: \"".concat(_issue.suffix,"\" il\u0259 bitm\u0259lidir");if(_issue.format==="includes")return"Yanl\u0131\u015F m\u0259tn: \"".concat(_issue.includes,"\" daxil olmal\u0131d\u0131r");if(_issue.format==="regex")return"Yanl\u0131\u015F m\u0259tn: ".concat(_issue.pattern," \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r");return"Yanl\u0131\u015F ".concat((_Nouns$_issue$format2=Nouns[_issue.format])!==null&&_Nouns$_issue$format2!==void 0?_Nouns$_issue$format2:issue.format);}case"not_multiple_of":return"Yanl\u0131\u015F \u0259d\u0259d: ".concat(issue.divisor," il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r");case"unrecognized_keys":return"Tan\u0131nmayan a\xE7ar".concat(issue.keys.length>1?"lar":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"".concat(issue.origin," daxilind\u0259 yanl\u0131\u015F a\xE7ar");case"invalid_union":return"Yanlış dəyər";case"invalid_element":return"".concat(issue.origin," daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r");default:return"Yanl\u0131\u015F d\u0259y\u0259r";}};};function az(){return{localeError:error$B()};}function getBelarusianPlural(count,one,few,many){const absCount=Math.abs(count);const lastDigit=absCount%10;const lastTwoDigits=absCount%100;if(lastTwoDigits>=11&&lastTwoDigits<=19){return many;}if(lastDigit===1){return one;}if(lastDigit>=2&&lastDigit<=4){return few;}return many;}const error$A=()=>{const Sizable={string:{unit:{one:"сімвал",few:"сімвалы",many:"сімвалаў"},verb:"мець"},array:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},set:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},file:{unit:{one:"байт",few:"байты",many:"байтаў"},verb:"мець"}};function getSizing(origin){var _Sizable$origin3;return(_Sizable$origin3=Sizable[origin])!==null&&_Sizable$origin3!==void 0?_Sizable$origin3:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"лік";}case"object":{if(Array.isArray(data)){return"масіў";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"увод",email:"email адрас",url:"URL",emoji:"эмодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата і час",date:"ISO дата",time:"ISO час",duration:"ISO працягласць",ipv4:"IPv4 адрас",ipv6:"IPv6 адрас",cidrv4:"IPv4 дыяпазон",cidrv6:"IPv6 дыяпазон",base64:"радок у фармаце base64",base64url:"радок у фармаце base64url",json_string:"JSON радок",e164:"нумар E.164",jwt:"JWT",template_literal:"увод"};return issue=>{switch(issue.code){case"invalid_type":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ".concat(issue.expected,", \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ".concat(stringifyPrimitive(issue.values[0]));return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin6;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin5;const maxValue=Number(issue.maximum);const unit=getBelarusianPlural(maxValue,sizing.unit.one,sizing.unit.few,sizing.unit.many);return"\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ".concat((_issue$origin5=issue.origin)!==null&&_issue$origin5!==void 0?_issue$origin5:"значэнне"," \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ").concat(sizing.verb," ").concat(adj).concat(issue.maximum.toString()," ").concat(unit);}return"\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ".concat((_issue$origin6=issue.origin)!==null&&_issue$origin6!==void 0?_issue$origin6:"значэнне"," \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){const minValue=Number(issue.minimum);const unit=getBelarusianPlural(minValue,sizing.unit.one,sizing.unit.few,sizing.unit.many);return"\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ".concat(issue.origin," \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ").concat(sizing.verb," ").concat(adj).concat(issue.minimum.toString()," ").concat(unit);}return"\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ".concat(issue.origin," \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format3;const _issue=issue;if(_issue.format==="starts_with")return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ".concat(_issue.pattern);return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ".concat((_Nouns$_issue$format3=Nouns[_issue.format])!==null&&_Nouns$_issue$format3!==void 0?_Nouns$_issue$format3:issue.format);}case"not_multiple_of":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ".concat(issue.divisor);case"unrecognized_keys":return"\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ".concat(issue.keys.length>1?"ключы":"ключ",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ".concat(issue.origin);case"invalid_union":return"Няправільны ўвод";case"invalid_element":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ".concat(issue.origin);default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";}};};function be(){return{localeError:error$A()};}const error$z=()=>{const Sizable={string:{unit:"caràcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function getSizing(origin){var _Sizable$origin4;return(_Sizable$origin4=Sizable[origin])!==null&&_Sizable$origin4!==void 0?_Sizable$origin4:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"entrada",email:"adreça electrònica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adreça IPv4",ipv6:"adreça IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return issue=>{switch(issue.code){case"invalid_type":return"Tipus inv\xE0lid: s'esperava ".concat(issue.expected,", s'ha rebut ").concat(parsedType(issue.input));// return `Tipus invàlid: s'esperava ${issue.expected}, s'ha rebut ${util.getParsedType(issue.input)}`;
case"invalid_value":if(issue.values.length===1)return"Valor inv\xE0lid: s'esperava ".concat(stringifyPrimitive(issue.values[0]));return"Opci\xF3 inv\xE0lida: s'esperava una de ".concat(joinValues(issue.values," o "));case"too_big":{var _issue$origin7,_sizing$unit3,_issue$origin8;const adj=issue.inclusive?"com a màxim":"menys de";const sizing=getSizing(issue.origin);if(sizing)return"Massa gran: s'esperava que ".concat((_issue$origin7=issue.origin)!==null&&_issue$origin7!==void 0?_issue$origin7:"el valor"," contingu\xE9s ").concat(adj," ").concat(issue.maximum.toString()," ").concat((_sizing$unit3=sizing.unit)!==null&&_sizing$unit3!==void 0?_sizing$unit3:"elements");return"Massa gran: s'esperava que ".concat((_issue$origin8=issue.origin)!==null&&_issue$origin8!==void 0?_issue$origin8:"el valor"," fos ").concat(adj," ").concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?"com a mínim":"més de";const sizing=getSizing(issue.origin);if(sizing){return"Massa petit: s'esperava que ".concat(issue.origin," contingu\xE9s ").concat(adj," ").concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Massa petit: s'esperava que ".concat(issue.origin," fos ").concat(adj," ").concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format4;const _issue=issue;if(_issue.format==="starts_with"){return"Format inv\xE0lid: ha de comen\xE7ar amb \"".concat(_issue.prefix,"\"");}if(_issue.format==="ends_with")return"Format inv\xE0lid: ha d'acabar amb \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Format inv\xE0lid: ha d'incloure \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Format inv\xE0lid: ha de coincidir amb el patr\xF3 ".concat(_issue.pattern);return"Format inv\xE0lid per a ".concat((_Nouns$_issue$format4=Nouns[_issue.format])!==null&&_Nouns$_issue$format4!==void 0?_Nouns$_issue$format4:issue.format);}case"not_multiple_of":return"N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ".concat(issue.divisor);case"unrecognized_keys":return"Clau".concat(issue.keys.length>1?"s":""," no reconeguda").concat(issue.keys.length>1?"s":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Clau inv\xE0lida a ".concat(issue.origin);case"invalid_union":return"Entrada invàlida";// Could also be "Tipus d'unió invàlid" but "Entrada invàlida" is more general
case"invalid_element":return"Element inv\xE0lid a ".concat(issue.origin);default:return"Entrada inv\xE0lida";}};};function ca(){return{localeError:error$z()};}const error$y=()=>{const Sizable={string:{unit:"znaků",verb:"mít"},file:{unit:"bajtů",verb:"mít"},array:{unit:"prvků",verb:"mít"},set:{unit:"prvků",verb:"mít"}};function getSizing(origin){var _Sizable$origin5;return(_Sizable$origin5=Sizable[origin])!==null&&_Sizable$origin5!==void 0?_Sizable$origin5:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"číslo";}case"string":{return"řetězec";}case"boolean":{return"boolean";}case"bigint":{return"bigint";}case"function":{return"funkce";}case"symbol":{return"symbol";}case"undefined":{return"undefined";}case"object":{if(Array.isArray(data)){return"pole";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"regulární výraz",email:"e-mailová adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a čas ve formátu ISO",date:"datum ve formátu ISO",time:"čas ve formátu ISO",duration:"doba trvání ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"řetězec zakódovaný ve formátu base64",base64url:"řetězec zakódovaný ve formátu base64url",json_string:"řetězec ve formátu JSON",e164:"číslo E.164",jwt:"JWT",template_literal:"vstup"};return issue=>{switch(issue.code){case"invalid_type":return"Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ".concat(issue.expected,", obdr\u017Eeno ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ".concat(stringifyPrimitive(issue.values[0]));return"Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin0;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin9,_sizing$unit4;return"Hodnota je p\u0159\xEDli\u0161 velk\xE1: ".concat((_issue$origin9=issue.origin)!==null&&_issue$origin9!==void 0?_issue$origin9:"hodnota"," mus\xED m\xEDt ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit4=sizing.unit)!==null&&_sizing$unit4!==void 0?_sizing$unit4:"prvků");}return"Hodnota je p\u0159\xEDli\u0161 velk\xE1: ".concat((_issue$origin0=issue.origin)!==null&&_issue$origin0!==void 0?_issue$origin0:"hodnota"," mus\xED b\xFDt ").concat(adj).concat(issue.maximum.toString());}case"too_small":{var _issue$origin10;const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin1,_sizing$unit5;return"Hodnota je p\u0159\xEDli\u0161 mal\xE1: ".concat((_issue$origin1=issue.origin)!==null&&_issue$origin1!==void 0?_issue$origin1:"hodnota"," mus\xED m\xEDt ").concat(adj).concat(issue.minimum.toString()," ").concat((_sizing$unit5=sizing.unit)!==null&&_sizing$unit5!==void 0?_sizing$unit5:"prvků");}return"Hodnota je p\u0159\xEDli\u0161 mal\xE1: ".concat((_issue$origin10=issue.origin)!==null&&_issue$origin10!==void 0?_issue$origin10:"hodnota"," mus\xED b\xFDt ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format5;const _issue=issue;if(_issue.format==="starts_with")return"Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ".concat(_issue.pattern);return"Neplatn\xFD form\xE1t ".concat((_Nouns$_issue$format5=Nouns[_issue.format])!==null&&_Nouns$_issue$format5!==void 0?_Nouns$_issue$format5:issue.format);}case"not_multiple_of":return"Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ".concat(issue.divisor);case"unrecognized_keys":return"Nezn\xE1m\xE9 kl\xED\u010De: ".concat(joinValues(issue.keys,", "));case"invalid_key":return"Neplatn\xFD kl\xED\u010D v ".concat(issue.origin);case"invalid_union":return"Neplatný vstup";case"invalid_element":return"Neplatn\xE1 hodnota v ".concat(issue.origin);default:return"Neplatn\xFD vstup";}};};function cs(){return{localeError:error$y()};}const error$x=()=>{const Sizable={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function getSizing(origin){var _Sizable$origin6;return(_Sizable$origin6=Sizable[origin])!==null&&_Sizable$origin6!==void 0?_Sizable$origin6:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"Zahl";}case"object":{if(Array.isArray(data)){return"Array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return issue=>{switch(issue.code){case"invalid_type":return"Ung\xFCltige Eingabe: erwartet ".concat(issue.expected,", erhalten ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Ung\xFCltige Eingabe: erwartet ".concat(stringifyPrimitive(issue.values[0]));return"Ung\xFCltige Option: erwartet eine von ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin11,_sizing$unit6,_issue$origin12;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Zu gro\xDF: erwartet, dass ".concat((_issue$origin11=issue.origin)!==null&&_issue$origin11!==void 0?_issue$origin11:"Wert"," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit6=sizing.unit)!==null&&_sizing$unit6!==void 0?_sizing$unit6:"Elemente"," hat");return"Zu gro\xDF: erwartet, dass ".concat((_issue$origin12=issue.origin)!==null&&_issue$origin12!==void 0?_issue$origin12:"Wert"," ").concat(adj).concat(issue.maximum.toString()," ist");}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Zu klein: erwartet, dass ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit," hat");}return"Zu klein: erwartet, dass ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString()," ist");}case"invalid_format":{var _Nouns$_issue$format6;const _issue=issue;if(_issue.format==="starts_with")return"Ung\xFCltiger String: muss mit \"".concat(_issue.prefix,"\" beginnen");if(_issue.format==="ends_with")return"Ung\xFCltiger String: muss mit \"".concat(_issue.suffix,"\" enden");if(_issue.format==="includes")return"Ung\xFCltiger String: muss \"".concat(_issue.includes,"\" enthalten");if(_issue.format==="regex")return"Ung\xFCltiger String: muss dem Muster ".concat(_issue.pattern," entsprechen");return"Ung\xFCltig: ".concat((_Nouns$_issue$format6=Nouns[_issue.format])!==null&&_Nouns$_issue$format6!==void 0?_Nouns$_issue$format6:issue.format);}case"not_multiple_of":return"Ung\xFCltige Zahl: muss ein Vielfaches von ".concat(issue.divisor," sein");case"unrecognized_keys":return"".concat(issue.keys.length>1?"Unbekannte Schlüssel":"Unbekannter Schlüssel",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Ung\xFCltiger Schl\xFCssel in ".concat(issue.origin);case"invalid_union":return"Ungültige Eingabe";case"invalid_element":return"Ung\xFCltiger Wert in ".concat(issue.origin);default:return"Ung\xFCltige Eingabe";}};};function de(){return{localeError:error$x()};}const parsedType$2=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const error$w=()=>{const Sizable={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function getSizing(origin){var _Sizable$origin7;return(_Sizable$origin7=Sizable[origin])!==null&&_Sizable$origin7!==void 0?_Sizable$origin7:null;}const Nouns={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return issue=>{switch(issue.code){case"invalid_type":return"Invalid input: expected ".concat(issue.expected,", received ").concat(parsedType$2(issue.input));case"invalid_value":if(issue.values.length===1)return"Invalid input: expected ".concat(stringifyPrimitive(issue.values[0]));return"Invalid option: expected one of ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin13,_sizing$unit7,_issue$origin14;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Too big: expected ".concat((_issue$origin13=issue.origin)!==null&&_issue$origin13!==void 0?_issue$origin13:"value"," to have ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit7=sizing.unit)!==null&&_sizing$unit7!==void 0?_sizing$unit7:"elements");return"Too big: expected ".concat((_issue$origin14=issue.origin)!==null&&_issue$origin14!==void 0?_issue$origin14:"value"," to be ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Too small: expected ".concat(issue.origin," to have ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Too small: expected ".concat(issue.origin," to be ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format7;const _issue=issue;if(_issue.format==="starts_with"){return"Invalid string: must start with \"".concat(_issue.prefix,"\"");}if(_issue.format==="ends_with")return"Invalid string: must end with \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Invalid string: must include \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Invalid string: must match pattern ".concat(_issue.pattern);return"Invalid ".concat((_Nouns$_issue$format7=Nouns[_issue.format])!==null&&_Nouns$_issue$format7!==void 0?_Nouns$_issue$format7:issue.format);}case"not_multiple_of":return"Invalid number: must be a multiple of ".concat(issue.divisor);case"unrecognized_keys":return"Unrecognized key".concat(issue.keys.length>1?"s":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Invalid key in ".concat(issue.origin);case"invalid_union":return"Invalid input";case"invalid_element":return"Invalid value in ".concat(issue.origin);default:return"Invalid input";}};};function en(){return{localeError:error$w()};}const parsedType$1=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"nombro";}case"object":{if(Array.isArray(data)){return"tabelo";}if(data===null){return"senvalora";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const error$v=()=>{const Sizable={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function getSizing(origin){var _Sizable$origin8;return(_Sizable$origin8=Sizable[origin])!==null&&_Sizable$origin8!==void 0?_Sizable$origin8:null;}const Nouns={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoĝio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daŭro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return issue=>{switch(issue.code){case"invalid_type":return"Nevalida enigo: atendi\u011Dis ".concat(issue.expected,", ricevi\u011Dis ").concat(parsedType$1(issue.input));case"invalid_value":if(issue.values.length===1)return"Nevalida enigo: atendi\u011Dis ".concat(stringifyPrimitive(issue.values[0]));return"Nevalida opcio: atendi\u011Dis unu el ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin15,_sizing$unit8,_issue$origin16;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Tro granda: atendi\u011Dis ke ".concat((_issue$origin15=issue.origin)!==null&&_issue$origin15!==void 0?_issue$origin15:"valoro"," havu ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit8=sizing.unit)!==null&&_sizing$unit8!==void 0?_sizing$unit8:"elementojn");return"Tro granda: atendi\u011Dis ke ".concat((_issue$origin16=issue.origin)!==null&&_issue$origin16!==void 0?_issue$origin16:"valoro"," havu ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Tro malgranda: atendi\u011Dis ke ".concat(issue.origin," havu ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Tro malgranda: atendi\u011Dis ke ".concat(issue.origin," estu ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format8;const _issue=issue;if(_issue.format==="starts_with")return"Nevalida karaktraro: devas komenci\u011Di per \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Nevalida karaktraro: devas fini\u011Di per \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Nevalida karaktraro: devas inkluzivi \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Nevalida karaktraro: devas kongrui kun la modelo ".concat(_issue.pattern);return"Nevalida ".concat((_Nouns$_issue$format8=Nouns[_issue.format])!==null&&_Nouns$_issue$format8!==void 0?_Nouns$_issue$format8:issue.format);}case"not_multiple_of":return"Nevalida nombro: devas esti oblo de ".concat(issue.divisor);case"unrecognized_keys":return"Nekonata".concat(issue.keys.length>1?"j":""," \u015Dlosilo").concat(issue.keys.length>1?"j":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Nevalida \u015Dlosilo en ".concat(issue.origin);case"invalid_union":return"Nevalida enigo";case"invalid_element":return"Nevalida valoro en ".concat(issue.origin);default:return"Nevalida enigo";}};};function eo(){return{localeError:error$v()};}const error$u=()=>{const Sizable={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function getSizing(origin){var _Sizable$origin9;return(_Sizable$origin9=Sizable[origin])!==null&&_Sizable$origin9!==void 0?_Sizable$origin9:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"número";}case"object":{if(Array.isArray(data)){return"arreglo";}if(data===null){return"nulo";}if(Object.getPrototypeOf(data)!==Object.prototype){return data.constructor.name;}}}return t;};const Nouns={regex:"entrada",email:"dirección de correo electrónico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duración ISO",ipv4:"dirección IPv4",ipv6:"dirección IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return issue=>{switch(issue.code){case"invalid_type":return"Entrada inv\xE1lida: se esperaba ".concat(issue.expected,", recibido ").concat(parsedType(issue.input));// return `Entrada inválida: se esperaba ${issue.expected}, recibido ${util.getParsedType(issue.input)}`;
case"invalid_value":if(issue.values.length===1)return"Entrada inv\xE1lida: se esperaba ".concat(stringifyPrimitive(issue.values[0]));return"Opci\xF3n inv\xE1lida: se esperaba una de ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin17,_sizing$unit9,_issue$origin18;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Demasiado grande: se esperaba que ".concat((_issue$origin17=issue.origin)!==null&&_issue$origin17!==void 0?_issue$origin17:"valor"," tuviera ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit9=sizing.unit)!==null&&_sizing$unit9!==void 0?_sizing$unit9:"elementos");return"Demasiado grande: se esperaba que ".concat((_issue$origin18=issue.origin)!==null&&_issue$origin18!==void 0?_issue$origin18:"valor"," fuera ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Demasiado peque\xF1o: se esperaba que ".concat(issue.origin," tuviera ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Demasiado peque\xF1o: se esperaba que ".concat(issue.origin," fuera ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format9;const _issue=issue;if(_issue.format==="starts_with")return"Cadena inv\xE1lida: debe comenzar con \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Cadena inv\xE1lida: debe terminar en \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Cadena inv\xE1lida: debe incluir \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Cadena inv\xE1lida: debe coincidir con el patr\xF3n ".concat(_issue.pattern);return"Inv\xE1lido ".concat((_Nouns$_issue$format9=Nouns[_issue.format])!==null&&_Nouns$_issue$format9!==void 0?_Nouns$_issue$format9:issue.format);}case"not_multiple_of":return"N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ".concat(issue.divisor);case"unrecognized_keys":return"Llave".concat(issue.keys.length>1?"s":""," desconocida").concat(issue.keys.length>1?"s":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Llave inv\xE1lida en ".concat(issue.origin);case"invalid_union":return"Entrada inválida";case"invalid_element":return"Valor inv\xE1lido en ".concat(issue.origin);default:return"Entrada inv\xE1lida";}};};function es(){return{localeError:error$u()};}const error$t=()=>{const Sizable={string:{unit:"کاراکتر",verb:"داشته باشد"},file:{unit:"بایت",verb:"داشته باشد"},array:{unit:"آیتم",verb:"داشته باشد"},set:{unit:"آیتم",verb:"داشته باشد"}};function getSizing(origin){var _Sizable$origin0;return(_Sizable$origin0=Sizable[origin])!==null&&_Sizable$origin0!==void 0?_Sizable$origin0:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"عدد";}case"object":{if(Array.isArray(data)){return"آرایه";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"ورودی",email:"آدرس ایمیل",url:"URL",emoji:"ایموجی",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاریخ و زمان ایزو",date:"تاریخ ایزو",time:"زمان ایزو",duration:"مدت زمان ایزو",ipv4:"IPv4 آدرس",ipv6:"IPv6 آدرس",cidrv4:"IPv4 دامنه",cidrv6:"IPv6 دامنه",base64:"base64-encoded رشته",base64url:"base64url-encoded رشته",json_string:"JSON رشته",e164:"E.164 عدد",jwt:"JWT",template_literal:"ورودی"};return issue=>{switch(issue.code){case"invalid_type":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ".concat(issue.expected," \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ").concat(parsedType(issue.input)," \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F");case"invalid_value":if(issue.values.length===1){return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ".concat(stringifyPrimitive(issue.values[0])," \u0645\u06CC\u200C\u0628\u0648\u062F");}return"\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ".concat(joinValues(issue.values,"|")," \u0645\u06CC\u200C\u0628\u0648\u062F");case"too_big":{var _issue$origin20;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin19,_sizing$unit0;return"\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ".concat((_issue$origin19=issue.origin)!==null&&_issue$origin19!==void 0?_issue$origin19:"مقدار"," \u0628\u0627\u06CC\u062F ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit0=sizing.unit)!==null&&_sizing$unit0!==void 0?_sizing$unit0:"عنصر"," \u0628\u0627\u0634\u062F");}return"\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ".concat((_issue$origin20=issue.origin)!==null&&_issue$origin20!==void 0?_issue$origin20:"مقدار"," \u0628\u0627\u06CC\u062F ").concat(adj).concat(issue.maximum.toString()," \u0628\u0627\u0634\u062F");}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ".concat(issue.origin," \u0628\u0627\u06CC\u062F ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit," \u0628\u0627\u0634\u062F");}return"\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ".concat(issue.origin," \u0628\u0627\u06CC\u062F ").concat(adj).concat(issue.minimum.toString()," \u0628\u0627\u0634\u062F");}case"invalid_format":{var _Nouns$_issue$format0;const _issue=issue;if(_issue.format==="starts_with"){return"\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \"".concat(_issue.prefix,"\" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F");}if(_issue.format==="ends_with"){return"\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \"".concat(_issue.suffix,"\" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F");}if(_issue.format==="includes"){return"\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 \"".concat(_issue.includes,"\" \u0628\u0627\u0634\u062F");}if(_issue.format==="regex"){return"\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ".concat(_issue.pattern," \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F");}return"".concat((_Nouns$_issue$format0=Nouns[_issue.format])!==null&&_Nouns$_issue$format0!==void 0?_Nouns$_issue$format0:issue.format," \u0646\u0627\u0645\u0639\u062A\u0628\u0631");}case"not_multiple_of":return"\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ".concat(issue.divisor," \u0628\u0627\u0634\u062F");case"unrecognized_keys":return"\u06A9\u0644\u06CC\u062F".concat(issue.keys.length>1?"های":""," \u0646\u0627\u0634\u0646\u0627\u0633: ").concat(joinValues(issue.keys,", "));case"invalid_key":return"\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ".concat(issue.origin);case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return"\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ".concat(issue.origin);default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";}};};function fa(){return{localeError:error$t()};}const error$s=()=>{const Sizable={string:{unit:"merkkiä",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"päivämäärän"}};function getSizing(origin){var _Sizable$origin1;return(_Sizable$origin1=Sizable[origin])!==null&&_Sizable$origin1!==void 0?_Sizable$origin1:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"säännöllinen lauseke",email:"sähköpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-päivämäärä",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return issue=>{switch(issue.code){case"invalid_type":return"Virheellinen tyyppi: odotettiin ".concat(issue.expected,", oli ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Virheellinen sy\xF6te: t\xE4ytyy olla ".concat(stringifyPrimitive(issue.values[0]));return"Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ".concat(joinValues(issue.values,"|"));case"too_big":{const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing){return"Liian suuri: ".concat(sizing.subject," t\xE4ytyy olla ").concat(adj).concat(issue.maximum.toString()," ").concat(sizing.unit).trim();}return"Liian suuri: arvon t\xE4ytyy olla ".concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Liian pieni: ".concat(sizing.subject," t\xE4ytyy olla ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit).trim();}return"Liian pieni: arvon t\xE4ytyy olla ".concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format1;const _issue=issue;if(_issue.format==="starts_with")return"Virheellinen sy\xF6te: t\xE4ytyy alkaa \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Virheellinen sy\xF6te: t\xE4ytyy loppua \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 \"".concat(_issue.includes,"\"");if(_issue.format==="regex"){return"Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ".concat(_issue.pattern);}return"Virheellinen ".concat((_Nouns$_issue$format1=Nouns[_issue.format])!==null&&_Nouns$_issue$format1!==void 0?_Nouns$_issue$format1:issue.format);}case"not_multiple_of":return"Virheellinen luku: t\xE4ytyy olla luvun ".concat(issue.divisor," monikerta");case"unrecognized_keys":return"".concat(issue.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te";}};};function fi(){return{localeError:error$s()};}const error$r=()=>{const Sizable={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function getSizing(origin){var _Sizable$origin10;return(_Sizable$origin10=Sizable[origin])!==null&&_Sizable$origin10!==void 0?_Sizable$origin10:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"nombre";}case"object":{if(Array.isArray(data)){return"tableau";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"entrée",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return issue=>{switch(issue.code){case"invalid_type":return"Entr\xE9e invalide : ".concat(issue.expected," attendu, ").concat(parsedType(issue.input)," re\xE7u");case"invalid_value":if(issue.values.length===1)return"Entr\xE9e invalide : ".concat(stringifyPrimitive(issue.values[0])," attendu");return"Option invalide : une valeur parmi ".concat(joinValues(issue.values,"|")," attendue");case"too_big":{var _issue$origin21,_sizing$unit1,_issue$origin22;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Trop grand : ".concat((_issue$origin21=issue.origin)!==null&&_issue$origin21!==void 0?_issue$origin21:"valeur"," doit ").concat(sizing.verb," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit1=sizing.unit)!==null&&_sizing$unit1!==void 0?_sizing$unit1:"élément(s)");return"Trop grand : ".concat((_issue$origin22=issue.origin)!==null&&_issue$origin22!==void 0?_issue$origin22:"valeur"," doit \xEAtre ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Trop petit : ".concat(issue.origin," doit ").concat(sizing.verb," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Trop petit : ".concat(issue.origin," doit \xEAtre ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format10;const _issue=issue;if(_issue.format==="starts_with")return"Cha\xEEne invalide : doit commencer par \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Cha\xEEne invalide : doit se terminer par \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Cha\xEEne invalide : doit inclure \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Cha\xEEne invalide : doit correspondre au mod\xE8le ".concat(_issue.pattern);return"".concat((_Nouns$_issue$format10=Nouns[_issue.format])!==null&&_Nouns$_issue$format10!==void 0?_Nouns$_issue$format10:issue.format," invalide");}case"not_multiple_of":return"Nombre invalide : doit \xEAtre un multiple de ".concat(issue.divisor);case"unrecognized_keys":return"Cl\xE9".concat(issue.keys.length>1?"s":""," non reconnue").concat(issue.keys.length>1?"s":""," : ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Cl\xE9 invalide dans ".concat(issue.origin);case"invalid_union":return"Entrée invalide";case"invalid_element":return"Valeur invalide dans ".concat(issue.origin);default:return"Entr\xE9e invalide";}};};function fr(){return{localeError:error$r()};}const error$q=()=>{const Sizable={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function getSizing(origin){var _Sizable$origin11;return(_Sizable$origin11=Sizable[origin])!==null&&_Sizable$origin11!==void 0?_Sizable$origin11:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"entrée",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return issue=>{switch(issue.code){case"invalid_type":return"Entr\xE9e invalide : attendu ".concat(issue.expected,", re\xE7u ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Entr\xE9e invalide : attendu ".concat(stringifyPrimitive(issue.values[0]));return"Option invalide : attendu l'une des valeurs suivantes ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin23,_issue$origin24;const adj=issue.inclusive?"≤":"<";const sizing=getSizing(issue.origin);if(sizing)return"Trop grand : attendu que ".concat((_issue$origin23=issue.origin)!==null&&_issue$origin23!==void 0?_issue$origin23:"la valeur"," ait ").concat(adj).concat(issue.maximum.toString()," ").concat(sizing.unit);return"Trop grand : attendu que ".concat((_issue$origin24=issue.origin)!==null&&_issue$origin24!==void 0?_issue$origin24:"la valeur"," soit ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?"≥":">";const sizing=getSizing(issue.origin);if(sizing){return"Trop petit : attendu que ".concat(issue.origin," ait ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Trop petit : attendu que ".concat(issue.origin," soit ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format11;const _issue=issue;if(_issue.format==="starts_with"){return"Cha\xEEne invalide : doit commencer par \"".concat(_issue.prefix,"\"");}if(_issue.format==="ends_with")return"Cha\xEEne invalide : doit se terminer par \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Cha\xEEne invalide : doit inclure \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Cha\xEEne invalide : doit correspondre au motif ".concat(_issue.pattern);return"".concat((_Nouns$_issue$format11=Nouns[_issue.format])!==null&&_Nouns$_issue$format11!==void 0?_Nouns$_issue$format11:issue.format," invalide");}case"not_multiple_of":return"Nombre invalide : doit \xEAtre un multiple de ".concat(issue.divisor);case"unrecognized_keys":return"Cl\xE9".concat(issue.keys.length>1?"s":""," non reconnue").concat(issue.keys.length>1?"s":""," : ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Cl\xE9 invalide dans ".concat(issue.origin);case"invalid_union":return"Entrée invalide";case"invalid_element":return"Valeur invalide dans ".concat(issue.origin);default:return"Entr\xE9e invalide";}};};function frCA(){return{localeError:error$q()};}const error$p=()=>{const Sizable={string:{unit:"אותיות",verb:"לכלול"},file:{unit:"בייטים",verb:"לכלול"},array:{unit:"פריטים",verb:"לכלול"},set:{unit:"פריטים",verb:"לכלול"}};function getSizing(origin){var _Sizable$origin12;return(_Sizable$origin12=Sizable[origin])!==null&&_Sizable$origin12!==void 0?_Sizable$origin12:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"קלט",email:"כתובת אימייל",url:"כתובת רשת",emoji:"אימוג'י",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"תאריך וזמן ISO",date:"תאריך ISO",time:"זמן ISO",duration:"משך זמן ISO",ipv4:"כתובת IPv4",ipv6:"כתובת IPv6",cidrv4:"טווח IPv4",cidrv6:"טווח IPv6",base64:"מחרוזת בבסיס 64",base64url:"מחרוזת בבסיס 64 לכתובות רשת",json_string:"מחרוזת JSON",e164:"מספר E.164",jwt:"JWT",template_literal:"קלט"};return issue=>{switch(issue.code){case"invalid_type":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ".concat(issue.expected,", \u05D4\u05EA\u05E7\u05D1\u05DC ").concat(parsedType(issue.input));// return `Invalid input: expected ${issue.expected}, received ${util.getParsedType(issue.input)}`;
case"invalid_value":if(issue.values.length===1)return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ".concat(stringifyPrimitive(issue.values[0]));return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05D0\u05D7\u05EA \u05DE\u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA  ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin25,_sizing$unit10,_issue$origin26;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ".concat((_issue$origin25=issue.origin)!==null&&_issue$origin25!==void 0?_issue$origin25:"value"," \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit10=sizing.unit)!==null&&_sizing$unit10!==void 0?_sizing$unit10:"elements");return"\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ".concat((_issue$origin26=issue.origin)!==null&&_issue$origin26!==void 0?_issue$origin26:"value"," \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ".concat(issue.origin," \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ".concat(issue.origin," \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format12;const _issue=issue;if(_issue.format==="starts_with")return"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1\"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ".concat(_issue.pattern);return"".concat((_Nouns$_issue$format12=Nouns[_issue.format])!==null&&_Nouns$_issue$format12!==void 0?_Nouns$_issue$format12:issue.format," \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF");}case"not_multiple_of":return"\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ".concat(issue.divisor);case"unrecognized_keys":return"\u05DE\u05E4\u05EA\u05D7".concat(issue.keys.length>1?"ות":""," \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4").concat(issue.keys.length>1?"ים":"ה",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"\u05DE\u05E4\u05EA\u05D7 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1".concat(issue.origin);case"invalid_union":return"קלט לא תקין";case"invalid_element":return"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1".concat(issue.origin);default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";}};};function he(){return{localeError:error$p()};}const error$o=()=>{const Sizable={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function getSizing(origin){var _Sizable$origin13;return(_Sizable$origin13=Sizable[origin])!==null&&_Sizable$origin13!==void 0?_Sizable$origin13:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"szám";}case"object":{if(Array.isArray(data)){return"tömb";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"bemenet",email:"email cím",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO időbélyeg",date:"ISO dátum",time:"ISO idő",duration:"ISO időintervallum",ipv4:"IPv4 cím",ipv6:"IPv6 cím",cidrv4:"IPv4 tartomány",cidrv6:"IPv6 tartomány",base64:"base64-kódolt string",base64url:"base64url-kódolt string",json_string:"JSON string",e164:"E.164 szám",jwt:"JWT",template_literal:"bemenet"};return issue=>{switch(issue.code){case"invalid_type":return"\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ".concat(issue.expected,", a kapott \xE9rt\xE9k ").concat(parsedType(issue.input));// return `Invalid input: expected ${issue.expected}, received ${util.getParsedType(issue.input)}`;
case"invalid_value":if(issue.values.length===1)return"\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ".concat(stringifyPrimitive(issue.values[0]));return"\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin27,_sizing$unit11,_issue$origin28;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"T\xFAl nagy: ".concat((_issue$origin27=issue.origin)!==null&&_issue$origin27!==void 0?_issue$origin27:"érték"," m\xE9rete t\xFAl nagy ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit11=sizing.unit)!==null&&_sizing$unit11!==void 0?_sizing$unit11:"elem");return"T\xFAl nagy: a bemeneti \xE9rt\xE9k ".concat((_issue$origin28=issue.origin)!==null&&_issue$origin28!==void 0?_issue$origin28:"érték"," t\xFAl nagy: ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"T\xFAl kicsi: a bemeneti \xE9rt\xE9k ".concat(issue.origin," m\xE9rete t\xFAl kicsi ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"T\xFAl kicsi: a bemeneti \xE9rt\xE9k ".concat(issue.origin," t\xFAl kicsi ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format13;const _issue=issue;if(_issue.format==="starts_with")return"\xC9rv\xE9nytelen string: \"".concat(_issue.prefix,"\" \xE9rt\xE9kkel kell kezd\u0151dnie");if(_issue.format==="ends_with")return"\xC9rv\xE9nytelen string: \"".concat(_issue.suffix,"\" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie");if(_issue.format==="includes")return"\xC9rv\xE9nytelen string: \"".concat(_issue.includes,"\" \xE9rt\xE9ket kell tartalmaznia");if(_issue.format==="regex")return"\xC9rv\xE9nytelen string: ".concat(_issue.pattern," mint\xE1nak kell megfelelnie");return"\xC9rv\xE9nytelen ".concat((_Nouns$_issue$format13=Nouns[_issue.format])!==null&&_Nouns$_issue$format13!==void 0?_Nouns$_issue$format13:issue.format);}case"not_multiple_of":return"\xC9rv\xE9nytelen sz\xE1m: ".concat(issue.divisor," t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie");case"unrecognized_keys":return"Ismeretlen kulcs".concat(issue.keys.length>1?"s":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"\xC9rv\xE9nytelen kulcs ".concat(issue.origin);case"invalid_union":return"Érvénytelen bemenet";case"invalid_element":return"\xC9rv\xE9nytelen \xE9rt\xE9k: ".concat(issue.origin);default:return"\xC9rv\xE9nytelen bemenet";}};};function hu(){return{localeError:error$o()};}const error$n=()=>{const Sizable={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function getSizing(origin){var _Sizable$origin14;return(_Sizable$origin14=Sizable[origin])!==null&&_Sizable$origin14!==void 0?_Sizable$origin14:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return issue=>{switch(issue.code){case"invalid_type":return"Input tidak valid: diharapkan ".concat(issue.expected,", diterima ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Input tidak valid: diharapkan ".concat(stringifyPrimitive(issue.values[0]));return"Pilihan tidak valid: diharapkan salah satu dari ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin29,_sizing$unit12,_issue$origin30;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Terlalu besar: diharapkan ".concat((_issue$origin29=issue.origin)!==null&&_issue$origin29!==void 0?_issue$origin29:"value"," memiliki ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit12=sizing.unit)!==null&&_sizing$unit12!==void 0?_sizing$unit12:"elemen");return"Terlalu besar: diharapkan ".concat((_issue$origin30=issue.origin)!==null&&_issue$origin30!==void 0?_issue$origin30:"value"," menjadi ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Terlalu kecil: diharapkan ".concat(issue.origin," memiliki ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Terlalu kecil: diharapkan ".concat(issue.origin," menjadi ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format14;const _issue=issue;if(_issue.format==="starts_with")return"String tidak valid: harus dimulai dengan \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"String tidak valid: harus berakhir dengan \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"String tidak valid: harus menyertakan \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"String tidak valid: harus sesuai pola ".concat(_issue.pattern);return"".concat((_Nouns$_issue$format14=Nouns[_issue.format])!==null&&_Nouns$_issue$format14!==void 0?_Nouns$_issue$format14:issue.format," tidak valid");}case"not_multiple_of":return"Angka tidak valid: harus kelipatan dari ".concat(issue.divisor);case"unrecognized_keys":return"Kunci tidak dikenali ".concat(issue.keys.length>1?"s":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Kunci tidak valid di ".concat(issue.origin);case"invalid_union":return"Input tidak valid";case"invalid_element":return"Nilai tidak valid di ".concat(issue.origin);default:return"Input tidak valid";}};};function id(){return{localeError:error$n()};}const error$m=()=>{const Sizable={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function getSizing(origin){var _Sizable$origin15;return(_Sizable$origin15=Sizable[origin])!==null&&_Sizable$origin15!==void 0?_Sizable$origin15:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"numero";}case"object":{if(Array.isArray(data)){return"vettore";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return issue=>{switch(issue.code){case"invalid_type":return"Input non valido: atteso ".concat(issue.expected,", ricevuto ").concat(parsedType(issue.input));// return `Input non valido: atteso ${issue.expected}, ricevuto ${util.getParsedType(issue.input)}`;
case"invalid_value":if(issue.values.length===1)return"Input non valido: atteso ".concat(stringifyPrimitive(issue.values[0]));return"Opzione non valida: atteso uno tra ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin31,_sizing$unit13,_issue$origin32;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Troppo grande: ".concat((_issue$origin31=issue.origin)!==null&&_issue$origin31!==void 0?_issue$origin31:"valore"," deve avere ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit13=sizing.unit)!==null&&_sizing$unit13!==void 0?_sizing$unit13:"elementi");return"Troppo grande: ".concat((_issue$origin32=issue.origin)!==null&&_issue$origin32!==void 0?_issue$origin32:"valore"," deve essere ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Troppo piccolo: ".concat(issue.origin," deve avere ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Troppo piccolo: ".concat(issue.origin," deve essere ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format15;const _issue=issue;if(_issue.format==="starts_with")return"Stringa non valida: deve iniziare con \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Stringa non valida: deve terminare con \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Stringa non valida: deve includere \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Stringa non valida: deve corrispondere al pattern ".concat(_issue.pattern);return"Invalid ".concat((_Nouns$_issue$format15=Nouns[_issue.format])!==null&&_Nouns$_issue$format15!==void 0?_Nouns$_issue$format15:issue.format);}case"not_multiple_of":return"Numero non valido: deve essere un multiplo di ".concat(issue.divisor);case"unrecognized_keys":return"Chiav".concat(issue.keys.length>1?"i":"e"," non riconosciut").concat(issue.keys.length>1?"e":"a",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Chiave non valida in ".concat(issue.origin);case"invalid_union":return"Input non valido";case"invalid_element":return"Valore non valido in ".concat(issue.origin);default:return"Input non valido";}};};function it(){return{localeError:error$m()};}const error$l=()=>{const Sizable={string:{unit:"文字",verb:"である"},file:{unit:"バイト",verb:"である"},array:{unit:"要素",verb:"である"},set:{unit:"要素",verb:"である"}};function getSizing(origin){var _Sizable$origin16;return(_Sizable$origin16=Sizable[origin])!==null&&_Sizable$origin16!==void 0?_Sizable$origin16:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"数値";}case"object":{if(Array.isArray(data)){return"配列";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"入力値",email:"メールアドレス",url:"URL",emoji:"絵文字",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日時",date:"ISO日付",time:"ISO時刻",duration:"ISO期間",ipv4:"IPv4アドレス",ipv6:"IPv6アドレス",cidrv4:"IPv4範囲",cidrv6:"IPv6範囲",base64:"base64エンコード文字列",base64url:"base64urlエンコード文字列",json_string:"JSON文字列",e164:"E.164番号",jwt:"JWT",template_literal:"入力値"};return issue=>{switch(issue.code){case"invalid_type":return"\u7121\u52B9\u306A\u5165\u529B: ".concat(issue.expected,"\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001").concat(parsedType(issue.input),"\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F");case"invalid_value":if(issue.values.length===1)return"\u7121\u52B9\u306A\u5165\u529B: ".concat(stringifyPrimitive(issue.values[0]),"\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F");return"\u7121\u52B9\u306A\u9078\u629E: ".concat(joinValues(issue.values,"、"),"\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");case"too_big":{var _issue$origin33,_sizing$unit14,_issue$origin34;const adj=issue.inclusive?"以下である":"より小さい";const sizing=getSizing(issue.origin);if(sizing)return"\u5927\u304D\u3059\u304E\u308B\u5024: ".concat((_issue$origin33=issue.origin)!==null&&_issue$origin33!==void 0?_issue$origin33:"値","\u306F").concat(issue.maximum.toString()).concat((_sizing$unit14=sizing.unit)!==null&&_sizing$unit14!==void 0?_sizing$unit14:"要素").concat(adj,"\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");return"\u5927\u304D\u3059\u304E\u308B\u5024: ".concat((_issue$origin34=issue.origin)!==null&&_issue$origin34!==void 0?_issue$origin34:"値","\u306F").concat(issue.maximum.toString()).concat(adj,"\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");}case"too_small":{const adj=issue.inclusive?"以上である":"より大きい";const sizing=getSizing(issue.origin);if(sizing)return"\u5C0F\u3055\u3059\u304E\u308B\u5024: ".concat(issue.origin,"\u306F").concat(issue.minimum.toString()).concat(sizing.unit).concat(adj,"\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");return"\u5C0F\u3055\u3059\u304E\u308B\u5024: ".concat(issue.origin,"\u306F").concat(issue.minimum.toString()).concat(adj,"\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");}case"invalid_format":{var _Nouns$_issue$format16;const _issue=issue;if(_issue.format==="starts_with")return"\u7121\u52B9\u306A\u6587\u5B57\u5217: \"".concat(_issue.prefix,"\"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");if(_issue.format==="ends_with")return"\u7121\u52B9\u306A\u6587\u5B57\u5217: \"".concat(_issue.suffix,"\"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");if(_issue.format==="includes")return"\u7121\u52B9\u306A\u6587\u5B57\u5217: \"".concat(_issue.includes,"\"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");if(_issue.format==="regex")return"\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3".concat(_issue.pattern,"\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");return"\u7121\u52B9\u306A".concat((_Nouns$_issue$format16=Nouns[_issue.format])!==null&&_Nouns$_issue$format16!==void 0?_Nouns$_issue$format16:issue.format);}case"not_multiple_of":return"\u7121\u52B9\u306A\u6570\u5024: ".concat(issue.divisor,"\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059");case"unrecognized_keys":return"\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC".concat(issue.keys.length>1?"群":"",": ").concat(joinValues(issue.keys,"、"));case"invalid_key":return"".concat(issue.origin,"\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC");case"invalid_union":return"無効な入力";case"invalid_element":return"".concat(issue.origin,"\u5185\u306E\u7121\u52B9\u306A\u5024");default:return"\u7121\u52B9\u306A\u5165\u529B";}};};function ja(){return{localeError:error$l()};}const error$k=()=>{const Sizable={string:{unit:"តួអក្សរ",verb:"គួរមាន"},file:{unit:"បៃ",verb:"គួរមាន"},array:{unit:"ធាតុ",verb:"គួរមាន"},set:{unit:"ធាតុ",verb:"គួរមាន"}};function getSizing(origin){var _Sizable$origin17;return(_Sizable$origin17=Sizable[origin])!==null&&_Sizable$origin17!==void 0?_Sizable$origin17:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"មិនមែនជាលេខ (NaN)":"លេខ";}case"object":{if(Array.isArray(data)){return"អារេ (Array)";}if(data===null){return"គ្មានតម្លៃ (null)";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"ទិន្នន័យបញ្ចូល",email:"អាសយដ្ឋានអ៊ីមែល",url:"URL",emoji:"សញ្ញាអារម្មណ៍",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"កាលបរិច្ឆេទ និងម៉ោង ISO",date:"កាលបរិច្ឆេទ ISO",time:"ម៉ោង ISO",duration:"រយៈពេល ISO",ipv4:"អាសយដ្ឋាន IPv4",ipv6:"អាសយដ្ឋាន IPv6",cidrv4:"ដែនអាសយដ្ឋាន IPv4",cidrv6:"ដែនអាសយដ្ឋាន IPv6",base64:"ខ្សែអក្សរអ៊ិកូដ base64",base64url:"ខ្សែអក្សរអ៊ិកូដ base64url",json_string:"ខ្សែអក្សរ JSON",e164:"លេខ E.164",jwt:"JWT",template_literal:"ទិន្នន័យបញ្ចូល"};return issue=>{switch(issue.code){case"invalid_type":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ".concat(issue.expected," \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ".concat(stringifyPrimitive(issue.values[0]));return"\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin35,_sizing$unit15,_issue$origin36;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ".concat((_issue$origin35=issue.origin)!==null&&_issue$origin35!==void 0?_issue$origin35:"តម្លៃ"," ").concat(adj," ").concat(issue.maximum.toString()," ").concat((_sizing$unit15=sizing.unit)!==null&&_sizing$unit15!==void 0?_sizing$unit15:"ធាតុ");return"\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ".concat((_issue$origin36=issue.origin)!==null&&_issue$origin36!==void 0?_issue$origin36:"តម្លៃ"," ").concat(adj," ").concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ".concat(issue.origin," ").concat(adj," ").concat(issue.minimum.toString()," ").concat(sizing.unit);}return"\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ".concat(issue.origin," ").concat(adj," ").concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format17;const _issue=issue;if(_issue.format==="starts_with"){return"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 \"".concat(_issue.prefix,"\"");}if(_issue.format==="ends_with")return"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ".concat(_issue.pattern);return"\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ".concat((_Nouns$_issue$format17=Nouns[_issue.format])!==null&&_Nouns$_issue$format17!==void 0?_Nouns$_issue$format17:issue.format);}case"not_multiple_of":return"\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ".concat(issue.divisor);case"unrecognized_keys":return"\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ".concat(joinValues(issue.keys,", "));case"invalid_key":return"\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ".concat(issue.origin);case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ".concat(issue.origin);default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";}};};function kh(){return{localeError:error$k()};}const error$j=()=>{const Sizable={string:{unit:"문자",verb:"to have"},file:{unit:"바이트",verb:"to have"},array:{unit:"개",verb:"to have"},set:{unit:"개",verb:"to have"}};function getSizing(origin){var _Sizable$origin18;return(_Sizable$origin18=Sizable[origin])!==null&&_Sizable$origin18!==void 0?_Sizable$origin18:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"입력",email:"이메일 주소",url:"URL",emoji:"이모지",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 날짜시간",date:"ISO 날짜",time:"ISO 시간",duration:"ISO 기간",ipv4:"IPv4 주소",ipv6:"IPv6 주소",cidrv4:"IPv4 범위",cidrv6:"IPv6 범위",base64:"base64 인코딩 문자열",base64url:"base64url 인코딩 문자열",json_string:"JSON 문자열",e164:"E.164 번호",jwt:"JWT",template_literal:"입력"};return issue=>{switch(issue.code){case"invalid_type":return"\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ".concat(issue.expected,", \uBC1B\uC740 \uD0C0\uC785\uC740 ").concat(parsedType(issue.input),"\uC785\uB2C8\uB2E4");case"invalid_value":if(issue.values.length===1)return"\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ".concat(stringifyPrimitive(issue.values[0])," \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4");return"\uC798\uBABB\uB41C \uC635\uC158: ".concat(joinValues(issue.values,"또는 ")," \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4");case"too_big":{var _sizing$unit16,_issue$origin37,_issue$origin38;const adj=issue.inclusive?"이하":"미만";const suffix=adj==="미만"?"이어야 합니다":"여야 합니다";const sizing=getSizing(issue.origin);const unit=(_sizing$unit16=sizing===null||sizing===void 0?void 0:sizing.unit)!==null&&_sizing$unit16!==void 0?_sizing$unit16:"요소";if(sizing)return"".concat((_issue$origin37=issue.origin)!==null&&_issue$origin37!==void 0?_issue$origin37:"값","\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ").concat(issue.maximum.toString()).concat(unit," ").concat(adj).concat(suffix);return"".concat((_issue$origin38=issue.origin)!==null&&_issue$origin38!==void 0?_issue$origin38:"값","\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ").concat(issue.maximum.toString()," ").concat(adj).concat(suffix);}case"too_small":{var _sizing$unit17,_issue$origin40;const adj=issue.inclusive?"이상":"초과";const suffix=adj==="이상"?"이어야 합니다":"여야 합니다";const sizing=getSizing(issue.origin);const unit=(_sizing$unit17=sizing===null||sizing===void 0?void 0:sizing.unit)!==null&&_sizing$unit17!==void 0?_sizing$unit17:"요소";if(sizing){var _issue$origin39;return"".concat((_issue$origin39=issue.origin)!==null&&_issue$origin39!==void 0?_issue$origin39:"값","\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ").concat(issue.minimum.toString()).concat(unit," ").concat(adj).concat(suffix);}return"".concat((_issue$origin40=issue.origin)!==null&&_issue$origin40!==void 0?_issue$origin40:"값","\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ").concat(issue.minimum.toString()," ").concat(adj).concat(suffix);}case"invalid_format":{var _Nouns$_issue$format18;const _issue=issue;if(_issue.format==="starts_with"){return"\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \"".concat(_issue.prefix,"\"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4");}if(_issue.format==="ends_with")return"\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \"".concat(_issue.suffix,"\"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4");if(_issue.format==="includes")return"\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \"".concat(_issue.includes,"\"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4");if(_issue.format==="regex")return"\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ".concat(_issue.pattern," \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4");return"\uC798\uBABB\uB41C ".concat((_Nouns$_issue$format18=Nouns[_issue.format])!==null&&_Nouns$_issue$format18!==void 0?_Nouns$_issue$format18:issue.format);}case"not_multiple_of":return"\uC798\uBABB\uB41C \uC22B\uC790: ".concat(issue.divisor,"\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4");case"unrecognized_keys":return"\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ".concat(joinValues(issue.keys,", "));case"invalid_key":return"\uC798\uBABB\uB41C \uD0A4: ".concat(issue.origin);case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return"\uC798\uBABB\uB41C \uAC12: ".concat(issue.origin);default:return"\uC798\uBABB\uB41C \uC785\uB825";}};};function ko(){return{localeError:error$j()};}const error$i=()=>{const Sizable={string:{unit:"знаци",verb:"да имаат"},file:{unit:"бајти",verb:"да имаат"},array:{unit:"ставки",verb:"да имаат"},set:{unit:"ставки",verb:"да имаат"}};function getSizing(origin){var _Sizable$origin19;return(_Sizable$origin19=Sizable[origin])!==null&&_Sizable$origin19!==void 0?_Sizable$origin19:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"број";}case"object":{if(Array.isArray(data)){return"низа";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"внес",email:"адреса на е-пошта",url:"URL",emoji:"емоџи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO датум и време",date:"ISO датум",time:"ISO време",duration:"ISO времетраење",ipv4:"IPv4 адреса",ipv6:"IPv6 адреса",cidrv4:"IPv4 опсег",cidrv6:"IPv6 опсег",base64:"base64-енкодирана низа",base64url:"base64url-енкодирана низа",json_string:"JSON низа",e164:"E.164 број",jwt:"JWT",template_literal:"внес"};return issue=>{switch(issue.code){case"invalid_type":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ".concat(issue.expected,", \u043F\u0440\u0438\u043C\u0435\u043D\u043E ").concat(parsedType(issue.input));// return `Invalid input: expected ${issue.expected}, received ${util.getParsedType(issue.input)}`;
case"invalid_value":if(issue.values.length===1)return"Invalid input: expected ".concat(stringifyPrimitive(issue.values[0]));return"\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin41,_sizing$unit18,_issue$origin42;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ".concat((_issue$origin41=issue.origin)!==null&&_issue$origin41!==void 0?_issue$origin41:"вредноста"," \u0434\u0430 \u0438\u043C\u0430 ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit18=sizing.unit)!==null&&_sizing$unit18!==void 0?_sizing$unit18:"елементи");return"\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ".concat((_issue$origin42=issue.origin)!==null&&_issue$origin42!==void 0?_issue$origin42:"вредноста"," \u0434\u0430 \u0431\u0438\u0434\u0435 ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ".concat(issue.origin," \u0434\u0430 \u0438\u043C\u0430 ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ".concat(issue.origin," \u0434\u0430 \u0431\u0438\u0434\u0435 ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format19;const _issue=issue;if(_issue.format==="starts_with"){return"\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E \"".concat(_issue.prefix,"\"");}if(_issue.format==="ends_with")return"\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ".concat(_issue.pattern);return"Invalid ".concat((_Nouns$_issue$format19=Nouns[_issue.format])!==null&&_Nouns$_issue$format19!==void 0?_Nouns$_issue$format19:issue.format);}case"not_multiple_of":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ".concat(issue.divisor);case"unrecognized_keys":return"".concat(issue.keys.length>1?"Непрепознаени клучеви":"Непрепознаен клуч",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ".concat(issue.origin);case"invalid_union":return"Грешен внес";case"invalid_element":return"\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ".concat(issue.origin);default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";}};};function mk(){return{localeError:error$i()};}const error$h=()=>{const Sizable={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function getSizing(origin){var _Sizable$origin20;return(_Sizable$origin20=Sizable[origin])!==null&&_Sizable$origin20!==void 0?_Sizable$origin20:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"nombor";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return issue=>{switch(issue.code){case"invalid_type":return"Input tidak sah: dijangka ".concat(issue.expected,", diterima ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Input tidak sah: dijangka ".concat(stringifyPrimitive(issue.values[0]));return"Pilihan tidak sah: dijangka salah satu daripada ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin43,_sizing$unit19,_issue$origin44;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Terlalu besar: dijangka ".concat((_issue$origin43=issue.origin)!==null&&_issue$origin43!==void 0?_issue$origin43:"nilai"," ").concat(sizing.verb," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit19=sizing.unit)!==null&&_sizing$unit19!==void 0?_sizing$unit19:"elemen");return"Terlalu besar: dijangka ".concat((_issue$origin44=issue.origin)!==null&&_issue$origin44!==void 0?_issue$origin44:"nilai"," adalah ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Terlalu kecil: dijangka ".concat(issue.origin," ").concat(sizing.verb," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Terlalu kecil: dijangka ".concat(issue.origin," adalah ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format20;const _issue=issue;if(_issue.format==="starts_with")return"String tidak sah: mesti bermula dengan \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"String tidak sah: mesti berakhir dengan \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"String tidak sah: mesti mengandungi \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"String tidak sah: mesti sepadan dengan corak ".concat(_issue.pattern);return"".concat((_Nouns$_issue$format20=Nouns[_issue.format])!==null&&_Nouns$_issue$format20!==void 0?_Nouns$_issue$format20:issue.format," tidak sah");}case"not_multiple_of":return"Nombor tidak sah: perlu gandaan ".concat(issue.divisor);case"unrecognized_keys":return"Kunci tidak dikenali: ".concat(joinValues(issue.keys,", "));case"invalid_key":return"Kunci tidak sah dalam ".concat(issue.origin);case"invalid_union":return"Input tidak sah";case"invalid_element":return"Nilai tidak sah dalam ".concat(issue.origin);default:return"Input tidak sah";}};};function ms(){return{localeError:error$h()};}const error$g=()=>{const Sizable={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function getSizing(origin){var _Sizable$origin21;return(_Sizable$origin21=Sizable[origin])!==null&&_Sizable$origin21!==void 0?_Sizable$origin21:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"getal";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return issue=>{switch(issue.code){case"invalid_type":return"Ongeldige invoer: verwacht ".concat(issue.expected,", ontving ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Ongeldige invoer: verwacht ".concat(stringifyPrimitive(issue.values[0]));return"Ongeldige optie: verwacht \xE9\xE9n van ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin45,_sizing$unit20,_issue$origin46;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Te lang: verwacht dat ".concat((_issue$origin45=issue.origin)!==null&&_issue$origin45!==void 0?_issue$origin45:"waarde"," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit20=sizing.unit)!==null&&_sizing$unit20!==void 0?_sizing$unit20:"elementen"," bevat");return"Te lang: verwacht dat ".concat((_issue$origin46=issue.origin)!==null&&_issue$origin46!==void 0?_issue$origin46:"waarde"," ").concat(adj).concat(issue.maximum.toString()," is");}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Te kort: verwacht dat ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit," bevat");}return"Te kort: verwacht dat ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString()," is");}case"invalid_format":{var _Nouns$_issue$format21;const _issue=issue;if(_issue.format==="starts_with"){return"Ongeldige tekst: moet met \"".concat(_issue.prefix,"\" beginnen");}if(_issue.format==="ends_with")return"Ongeldige tekst: moet op \"".concat(_issue.suffix,"\" eindigen");if(_issue.format==="includes")return"Ongeldige tekst: moet \"".concat(_issue.includes,"\" bevatten");if(_issue.format==="regex")return"Ongeldige tekst: moet overeenkomen met patroon ".concat(_issue.pattern);return"Ongeldig: ".concat((_Nouns$_issue$format21=Nouns[_issue.format])!==null&&_Nouns$_issue$format21!==void 0?_Nouns$_issue$format21:issue.format);}case"not_multiple_of":return"Ongeldig getal: moet een veelvoud van ".concat(issue.divisor," zijn");case"unrecognized_keys":return"Onbekende key".concat(issue.keys.length>1?"s":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Ongeldige key in ".concat(issue.origin);case"invalid_union":return"Ongeldige invoer";case"invalid_element":return"Ongeldige waarde in ".concat(issue.origin);default:return"Ongeldige invoer";}};};function nl(){return{localeError:error$g()};}const error$f=()=>{const Sizable={string:{unit:"tegn",verb:"å ha"},file:{unit:"bytes",verb:"å ha"},array:{unit:"elementer",verb:"å inneholde"},set:{unit:"elementer",verb:"å inneholde"}};function getSizing(origin){var _Sizable$origin22;return(_Sizable$origin22=Sizable[origin])!==null&&_Sizable$origin22!==void 0?_Sizable$origin22:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"tall";}case"object":{if(Array.isArray(data)){return"liste";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-område",ipv6:"IPv6-område",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return issue=>{switch(issue.code){case"invalid_type":return"Ugyldig input: forventet ".concat(issue.expected,", fikk ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Ugyldig verdi: forventet ".concat(stringifyPrimitive(issue.values[0]));return"Ugyldig valg: forventet en av ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin47,_sizing$unit21,_issue$origin48;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"For stor(t): forventet ".concat((_issue$origin47=issue.origin)!==null&&_issue$origin47!==void 0?_issue$origin47:"value"," til \xE5 ha ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit21=sizing.unit)!==null&&_sizing$unit21!==void 0?_sizing$unit21:"elementer");return"For stor(t): forventet ".concat((_issue$origin48=issue.origin)!==null&&_issue$origin48!==void 0?_issue$origin48:"value"," til \xE5 ha ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"For lite(n): forventet ".concat(issue.origin," til \xE5 ha ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"For lite(n): forventet ".concat(issue.origin," til \xE5 ha ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format22;const _issue=issue;if(_issue.format==="starts_with")return"Ugyldig streng: m\xE5 starte med \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Ugyldig streng: m\xE5 ende med \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Ugyldig streng: m\xE5 inneholde \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Ugyldig streng: m\xE5 matche m\xF8nsteret ".concat(_issue.pattern);return"Ugyldig ".concat((_Nouns$_issue$format22=Nouns[_issue.format])!==null&&_Nouns$_issue$format22!==void 0?_Nouns$_issue$format22:issue.format);}case"not_multiple_of":return"Ugyldig tall: m\xE5 v\xE6re et multiplum av ".concat(issue.divisor);case"unrecognized_keys":return"".concat(issue.keys.length>1?"Ukjente nøkler":"Ukjent nøkkel",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Ugyldig n\xF8kkel i ".concat(issue.origin);case"invalid_union":return"Ugyldig input";case"invalid_element":return"Ugyldig verdi i ".concat(issue.origin);default:return"Ugyldig input";}};};function no(){return{localeError:error$f()};}const error$e=()=>{const Sizable={string:{unit:"harf",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"unsur",verb:"olmalıdır"},set:{unit:"unsur",verb:"olmalıdır"}};function getSizing(origin){var _Sizable$origin23;return(_Sizable$origin23=Sizable[origin])!==null&&_Sizable$origin23!==void 0?_Sizable$origin23:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"numara";}case"object":{if(Array.isArray(data)){return"saf";}if(data===null){return"gayb";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"giren",email:"epostagâh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengâmı",date:"ISO tarihi",time:"ISO zamanı",duration:"ISO müddeti",ipv4:"IPv4 nişânı",ipv6:"IPv6 nişânı",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-şifreli metin",base64url:"base64url-şifreli metin",json_string:"JSON metin",e164:"E.164 sayısı",jwt:"JWT",template_literal:"giren"};return issue=>{switch(issue.code){case"invalid_type":return"F\xE2sit giren: umulan ".concat(issue.expected,", al\u0131nan ").concat(parsedType(issue.input));// return `Fâsit giren: umulan ${issue.expected}, alınan ${util.getParsedType(issue.input)}`;
case"invalid_value":if(issue.values.length===1)return"F\xE2sit giren: umulan ".concat(stringifyPrimitive(issue.values[0]));return"F\xE2sit tercih: m\xFBteberler ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin49,_sizing$unit22,_issue$origin50;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Fazla b\xFCy\xFCk: ".concat((_issue$origin49=issue.origin)!==null&&_issue$origin49!==void 0?_issue$origin49:"value",", ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit22=sizing.unit)!==null&&_sizing$unit22!==void 0?_sizing$unit22:"elements"," sahip olmal\u0131yd\u0131.");return"Fazla b\xFCy\xFCk: ".concat((_issue$origin50=issue.origin)!==null&&_issue$origin50!==void 0?_issue$origin50:"value",", ").concat(adj).concat(issue.maximum.toString()," olmal\u0131yd\u0131.");}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Fazla k\xFC\xE7\xFCk: ".concat(issue.origin,", ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit," sahip olmal\u0131yd\u0131.");}return"Fazla k\xFC\xE7\xFCk: ".concat(issue.origin,", ").concat(adj).concat(issue.minimum.toString()," olmal\u0131yd\u0131.");}case"invalid_format":{var _Nouns$_issue$format23;const _issue=issue;if(_issue.format==="starts_with")return"F\xE2sit metin: \"".concat(_issue.prefix,"\" ile ba\u015Flamal\u0131.");if(_issue.format==="ends_with")return"F\xE2sit metin: \"".concat(_issue.suffix,"\" ile bitmeli.");if(_issue.format==="includes")return"F\xE2sit metin: \"".concat(_issue.includes,"\" ihtiv\xE2 etmeli.");if(_issue.format==="regex")return"F\xE2sit metin: ".concat(_issue.pattern," nak\u015F\u0131na uymal\u0131.");return"F\xE2sit ".concat((_Nouns$_issue$format23=Nouns[_issue.format])!==null&&_Nouns$_issue$format23!==void 0?_Nouns$_issue$format23:issue.format);}case"not_multiple_of":return"F\xE2sit say\u0131: ".concat(issue.divisor," kat\u0131 olmal\u0131yd\u0131.");case"unrecognized_keys":return"Tan\u0131nmayan anahtar ".concat(issue.keys.length>1?"s":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"".concat(issue.origin," i\xE7in tan\u0131nmayan anahtar var.");case"invalid_union":return"Giren tanınamadı.";case"invalid_element":return"".concat(issue.origin," i\xE7in tan\u0131nmayan k\u0131ymet var.");default:return"K\u0131ymet tan\u0131namad\u0131.";}};};function ota(){return{localeError:error$e()};}const error$d=()=>{const Sizable={string:{unit:"توکي",verb:"ولري"},file:{unit:"بایټس",verb:"ولري"},array:{unit:"توکي",verb:"ولري"},set:{unit:"توکي",verb:"ولري"}};function getSizing(origin){var _Sizable$origin24;return(_Sizable$origin24=Sizable[origin])!==null&&_Sizable$origin24!==void 0?_Sizable$origin24:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"عدد";}case"object":{if(Array.isArray(data)){return"ارې";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"ورودي",email:"بریښنالیک",url:"یو آر ال",emoji:"ایموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"نیټه او وخت",date:"نېټه",time:"وخت",duration:"موده",ipv4:"د IPv4 پته",ipv6:"د IPv6 پته",cidrv4:"د IPv4 ساحه",cidrv6:"د IPv6 ساحه",base64:"base64-encoded متن",base64url:"base64url-encoded متن",json_string:"JSON متن",e164:"د E.164 شمېره",jwt:"JWT",template_literal:"ورودي"};return issue=>{switch(issue.code){case"invalid_type":return"\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ".concat(issue.expected," \u0648\u0627\u06CC, \u0645\u06AB\u0631 ").concat(parsedType(issue.input)," \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648");case"invalid_value":if(issue.values.length===1){return"\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ".concat(stringifyPrimitive(issue.values[0])," \u0648\u0627\u06CC");}return"\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ".concat(joinValues(issue.values,"|")," \u0685\u062E\u0647 \u0648\u0627\u06CC");case"too_big":{var _issue$origin52;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin51,_sizing$unit23;return"\u0689\u06CC\u0631 \u0644\u0648\u06CC: ".concat((_issue$origin51=issue.origin)!==null&&_issue$origin51!==void 0?_issue$origin51:"ارزښت"," \u0628\u0627\u06CC\u062F ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit23=sizing.unit)!==null&&_sizing$unit23!==void 0?_sizing$unit23:"عنصرونه"," \u0648\u0644\u0631\u064A");}return"\u0689\u06CC\u0631 \u0644\u0648\u06CC: ".concat((_issue$origin52=issue.origin)!==null&&_issue$origin52!==void 0?_issue$origin52:"ارزښت"," \u0628\u0627\u06CC\u062F ").concat(adj).concat(issue.maximum.toString()," \u0648\u064A");}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ".concat(issue.origin," \u0628\u0627\u06CC\u062F ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit," \u0648\u0644\u0631\u064A");}return"\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ".concat(issue.origin," \u0628\u0627\u06CC\u062F ").concat(adj).concat(issue.minimum.toString()," \u0648\u064A");}case"invalid_format":{var _Nouns$_issue$format24;const _issue=issue;if(_issue.format==="starts_with"){return"\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F \"".concat(_issue.prefix,"\" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A");}if(_issue.format==="ends_with"){return"\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F \"".concat(_issue.suffix,"\" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A");}if(_issue.format==="includes"){return"\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \"".concat(_issue.includes,"\" \u0648\u0644\u0631\u064A");}if(_issue.format==="regex"){return"\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ".concat(_issue.pattern," \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A");}return"".concat((_Nouns$_issue$format24=Nouns[_issue.format])!==null&&_Nouns$_issue$format24!==void 0?_Nouns$_issue$format24:issue.format," \u0646\u0627\u0633\u0645 \u062F\u06CC");}case"not_multiple_of":return"\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ".concat(issue.divisor," \u0645\u0636\u0631\u0628 \u0648\u064A");case"unrecognized_keys":return"\u0646\u0627\u0633\u0645 ".concat(issue.keys.length>1?"کلیډونه":"کلیډ",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ".concat(issue.origin," \u06A9\u06D0");case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return"\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ".concat(issue.origin," \u06A9\u06D0");default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";}};};function ps(){return{localeError:error$d()};}const error$c=()=>{const Sizable={string:{unit:"znaków",verb:"mieć"},file:{unit:"bajtów",verb:"mieć"},array:{unit:"elementów",verb:"mieć"},set:{unit:"elementów",verb:"mieć"}};function getSizing(origin){var _Sizable$origin25;return(_Sizable$origin25=Sizable[origin])!==null&&_Sizable$origin25!==void 0?_Sizable$origin25:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"liczba";}case"object":{if(Array.isArray(data)){return"tablica";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"wyrażenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ciąg znaków zakodowany w formacie base64",base64url:"ciąg znaków zakodowany w formacie base64url",json_string:"ciąg znaków w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejście"};return issue=>{switch(issue.code){case"invalid_type":return"Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ".concat(issue.expected,", otrzymano ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ".concat(stringifyPrimitive(issue.values[0]));return"Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin54;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin53,_sizing$unit24;return"Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ".concat((_issue$origin53=issue.origin)!==null&&_issue$origin53!==void 0?_issue$origin53:"wartość"," b\u0119dzie mie\u0107 ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit24=sizing.unit)!==null&&_sizing$unit24!==void 0?_sizing$unit24:"elementów");}return"Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ".concat((_issue$origin54=issue.origin)!==null&&_issue$origin54!==void 0?_issue$origin54:"wartość"," b\u0119dzie wynosi\u0107 ").concat(adj).concat(issue.maximum.toString());}case"too_small":{var _issue$origin56;const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin55,_sizing$unit25;return"Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ".concat((_issue$origin55=issue.origin)!==null&&_issue$origin55!==void 0?_issue$origin55:"wartość"," b\u0119dzie mie\u0107 ").concat(adj).concat(issue.minimum.toString()," ").concat((_sizing$unit25=sizing.unit)!==null&&_sizing$unit25!==void 0?_sizing$unit25:"elementów");}return"Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ".concat((_issue$origin56=issue.origin)!==null&&_issue$origin56!==void 0?_issue$origin56:"wartość"," b\u0119dzie wynosi\u0107 ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format25;const _issue=issue;if(_issue.format==="starts_with")return"Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ".concat(_issue.pattern);return"Nieprawid\u0142ow(y/a/e) ".concat((_Nouns$_issue$format25=Nouns[_issue.format])!==null&&_Nouns$_issue$format25!==void 0?_Nouns$_issue$format25:issue.format);}case"not_multiple_of":return"Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ".concat(issue.divisor);case"unrecognized_keys":return"Nierozpoznane klucze".concat(issue.keys.length>1?"s":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Nieprawid\u0142owy klucz w ".concat(issue.origin);case"invalid_union":return"Nieprawidłowe dane wejściowe";case"invalid_element":return"Nieprawid\u0142owa warto\u015B\u0107 w ".concat(issue.origin);default:return"Nieprawid\u0142owe dane wej\u015Bciowe";}};};function pl(){return{localeError:error$c()};}const error$b=()=>{const Sizable={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function getSizing(origin){var _Sizable$origin26;return(_Sizable$origin26=Sizable[origin])!==null&&_Sizable$origin26!==void 0?_Sizable$origin26:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"número";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"nulo";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"padrão",email:"endereço de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"duração ISO",ipv4:"endereço IPv4",ipv6:"endereço IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return issue=>{switch(issue.code){case"invalid_type":return"Tipo inv\xE1lido: esperado ".concat(issue.expected,", recebido ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Entrada inv\xE1lida: esperado ".concat(stringifyPrimitive(issue.values[0]));return"Op\xE7\xE3o inv\xE1lida: esperada uma das ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin57,_sizing$unit26,_issue$origin58;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Muito grande: esperado que ".concat((_issue$origin57=issue.origin)!==null&&_issue$origin57!==void 0?_issue$origin57:"valor"," tivesse ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit26=sizing.unit)!==null&&_sizing$unit26!==void 0?_sizing$unit26:"elementos");return"Muito grande: esperado que ".concat((_issue$origin58=issue.origin)!==null&&_issue$origin58!==void 0?_issue$origin58:"valor"," fosse ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Muito pequeno: esperado que ".concat(issue.origin," tivesse ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Muito pequeno: esperado que ".concat(issue.origin," fosse ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format26;const _issue=issue;if(_issue.format==="starts_with")return"Texto inv\xE1lido: deve come\xE7ar com \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Texto inv\xE1lido: deve terminar com \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Texto inv\xE1lido: deve incluir \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Texto inv\xE1lido: deve corresponder ao padr\xE3o ".concat(_issue.pattern);return"".concat((_Nouns$_issue$format26=Nouns[_issue.format])!==null&&_Nouns$_issue$format26!==void 0?_Nouns$_issue$format26:issue.format," inv\xE1lido");}case"not_multiple_of":return"N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ".concat(issue.divisor);case"unrecognized_keys":return"Chave".concat(issue.keys.length>1?"s":""," desconhecida").concat(issue.keys.length>1?"s":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Chave inv\xE1lida em ".concat(issue.origin);case"invalid_union":return"Entrada inválida";case"invalid_element":return"Valor inv\xE1lido em ".concat(issue.origin);default:return"Campo inv\xE1lido";}};};function pt(){return{localeError:error$b()};}function getRussianPlural(count,one,few,many){const absCount=Math.abs(count);const lastDigit=absCount%10;const lastTwoDigits=absCount%100;if(lastTwoDigits>=11&&lastTwoDigits<=19){return many;}if(lastDigit===1){return one;}if(lastDigit>=2&&lastDigit<=4){return few;}return many;}const error$a=()=>{const Sizable={string:{unit:{one:"символ",few:"символа",many:"символов"},verb:"иметь"},file:{unit:{one:"байт",few:"байта",many:"байт"},verb:"иметь"},array:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"},set:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"}};function getSizing(origin){var _Sizable$origin27;return(_Sizable$origin27=Sizable[origin])!==null&&_Sizable$origin27!==void 0?_Sizable$origin27:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"число";}case"object":{if(Array.isArray(data)){return"массив";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"ввод",email:"email адрес",url:"URL",emoji:"эмодзи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата и время",date:"ISO дата",time:"ISO время",duration:"ISO длительность",ipv4:"IPv4 адрес",ipv6:"IPv6 адрес",cidrv4:"IPv4 диапазон",cidrv6:"IPv6 диапазон",base64:"строка в формате base64",base64url:"строка в формате base64url",json_string:"JSON строка",e164:"номер E.164",jwt:"JWT",template_literal:"ввод"};return issue=>{switch(issue.code){case"invalid_type":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ".concat(issue.expected,", \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ".concat(stringifyPrimitive(issue.values[0]));return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin60;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin59;const maxValue=Number(issue.maximum);const unit=getRussianPlural(maxValue,sizing.unit.one,sizing.unit.few,sizing.unit.many);return"\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ".concat((_issue$origin59=issue.origin)!==null&&_issue$origin59!==void 0?_issue$origin59:"значение"," \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ").concat(adj).concat(issue.maximum.toString()," ").concat(unit);}return"\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ".concat((_issue$origin60=issue.origin)!==null&&_issue$origin60!==void 0?_issue$origin60:"значение"," \u0431\u0443\u0434\u0435\u0442 ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){const minValue=Number(issue.minimum);const unit=getRussianPlural(minValue,sizing.unit.one,sizing.unit.few,sizing.unit.many);return"\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ".concat(issue.origin," \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ").concat(adj).concat(issue.minimum.toString()," ").concat(unit);}return"\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ".concat(issue.origin," \u0431\u0443\u0434\u0435\u0442 ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format27;const _issue=issue;if(_issue.format==="starts_with")return"\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ".concat(_issue.pattern);return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ".concat((_Nouns$_issue$format27=Nouns[_issue.format])!==null&&_Nouns$_issue$format27!==void 0?_Nouns$_issue$format27:issue.format);}case"not_multiple_of":return"\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ".concat(issue.divisor);case"unrecognized_keys":return"\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D".concat(issue.keys.length>1?"ые":"ый"," \u043A\u043B\u044E\u0447").concat(issue.keys.length>1?"и":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ".concat(issue.origin);case"invalid_union":return"Неверные входные данные";case"invalid_element":return"\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ".concat(issue.origin);default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";}};};function ru(){return{localeError:error$a()};}const error$9=()=>{const Sizable={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function getSizing(origin){var _Sizable$origin28;return(_Sizable$origin28=Sizable[origin])!==null&&_Sizable$origin28!==void 0?_Sizable$origin28:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"število";}case"object":{if(Array.isArray(data)){return"tabela";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"vnos",email:"e-poštni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in čas",date:"ISO datum",time:"ISO čas",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 številka",jwt:"JWT",template_literal:"vnos"};return issue=>{switch(issue.code){case"invalid_type":return"Neveljaven vnos: pri\u010Dakovano ".concat(issue.expected,", prejeto ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Neveljaven vnos: pri\u010Dakovano ".concat(stringifyPrimitive(issue.values[0]));return"Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin61,_sizing$unit27,_issue$origin62;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Preveliko: pri\u010Dakovano, da bo ".concat((_issue$origin61=issue.origin)!==null&&_issue$origin61!==void 0?_issue$origin61:"vrednost"," imelo ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit27=sizing.unit)!==null&&_sizing$unit27!==void 0?_sizing$unit27:"elementov");return"Preveliko: pri\u010Dakovano, da bo ".concat((_issue$origin62=issue.origin)!==null&&_issue$origin62!==void 0?_issue$origin62:"vrednost"," ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Premajhno: pri\u010Dakovano, da bo ".concat(issue.origin," imelo ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Premajhno: pri\u010Dakovano, da bo ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format28;const _issue=issue;if(_issue.format==="starts_with"){return"Neveljaven niz: mora se za\u010Deti z \"".concat(_issue.prefix,"\"");}if(_issue.format==="ends_with")return"Neveljaven niz: mora se kon\u010Dati z \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Neveljaven niz: mora vsebovati \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Neveljaven niz: mora ustrezati vzorcu ".concat(_issue.pattern);return"Neveljaven ".concat((_Nouns$_issue$format28=Nouns[_issue.format])!==null&&_Nouns$_issue$format28!==void 0?_Nouns$_issue$format28:issue.format);}case"not_multiple_of":return"Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ".concat(issue.divisor);case"unrecognized_keys":return"Neprepoznan".concat(issue.keys.length>1?"i ključi":" ključ",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Neveljaven klju\u010D v ".concat(issue.origin);case"invalid_union":return"Neveljaven vnos";case"invalid_element":return"Neveljavna vrednost v ".concat(issue.origin);default:return"Neveljaven vnos";}};};function sl(){return{localeError:error$9()};}const error$8=()=>{const Sizable={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehålla"},set:{unit:"objekt",verb:"att innehålla"}};function getSizing(origin){var _Sizable$origin29;return(_Sizable$origin29=Sizable[origin])!==null&&_Sizable$origin29!==void 0?_Sizable$origin29:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"antal";}case"object":{if(Array.isArray(data)){return"lista";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"reguljärt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad sträng",base64url:"base64url-kodad sträng",json_string:"JSON-sträng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return issue=>{var _issue$origin67,_issue$origin68;switch(issue.code){case"invalid_type":return"Ogiltig inmatning: f\xF6rv\xE4ntat ".concat(issue.expected,", fick ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Ogiltig inmatning: f\xF6rv\xE4ntat ".concat(stringifyPrimitive(issue.values[0]));return"Ogiltigt val: f\xF6rv\xE4ntade en av ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin64;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin63,_sizing$unit28;return"F\xF6r stor(t): f\xF6rv\xE4ntade ".concat((_issue$origin63=issue.origin)!==null&&_issue$origin63!==void 0?_issue$origin63:"värdet"," att ha ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit28=sizing.unit)!==null&&_sizing$unit28!==void 0?_sizing$unit28:"element");}return"F\xF6r stor(t): f\xF6rv\xE4ntat ".concat((_issue$origin64=issue.origin)!==null&&_issue$origin64!==void 0?_issue$origin64:"värdet"," att ha ").concat(adj).concat(issue.maximum.toString());}case"too_small":{var _issue$origin66;const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin65;return"F\xF6r lite(t): f\xF6rv\xE4ntade ".concat((_issue$origin65=issue.origin)!==null&&_issue$origin65!==void 0?_issue$origin65:"värdet"," att ha ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"F\xF6r lite(t): f\xF6rv\xE4ntade ".concat((_issue$origin66=issue.origin)!==null&&_issue$origin66!==void 0?_issue$origin66:"värdet"," att ha ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format29;const _issue=issue;if(_issue.format==="starts_with"){return"Ogiltig str\xE4ng: m\xE5ste b\xF6rja med \"".concat(_issue.prefix,"\"");}if(_issue.format==="ends_with")return"Ogiltig str\xE4ng: m\xE5ste sluta med \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret \"".concat(_issue.pattern,"\"");return"Ogiltig(t) ".concat((_Nouns$_issue$format29=Nouns[_issue.format])!==null&&_Nouns$_issue$format29!==void 0?_Nouns$_issue$format29:issue.format);}case"not_multiple_of":return"Ogiltigt tal: m\xE5ste vara en multipel av ".concat(issue.divisor);case"unrecognized_keys":return"".concat(issue.keys.length>1?"Okända nycklar":"Okänd nyckel",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"Ogiltig nyckel i ".concat((_issue$origin67=issue.origin)!==null&&_issue$origin67!==void 0?_issue$origin67:"värdet");case"invalid_union":return"Ogiltig input";case"invalid_element":return"Ogiltigt v\xE4rde i ".concat((_issue$origin68=issue.origin)!==null&&_issue$origin68!==void 0?_issue$origin68:"värdet");default:return"Ogiltig input";}};};function sv(){return{localeError:error$8()};}const error$7=()=>{const Sizable={string:{unit:"எழுத்துக்கள்",verb:"கொண்டிருக்க வேண்டும்"},file:{unit:"பைட்டுகள்",verb:"கொண்டிருக்க வேண்டும்"},array:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"},set:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"}};function getSizing(origin){var _Sizable$origin30;return(_Sizable$origin30=Sizable[origin])!==null&&_Sizable$origin30!==void 0?_Sizable$origin30:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"எண் அல்லாதது":"எண்";}case"object":{if(Array.isArray(data)){return"அணி";}if(data===null){return"வெறுமை";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"உள்ளீடு",email:"மின்னஞ்சல் முகவரி",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO தேதி நேரம்",date:"ISO தேதி",time:"ISO நேரம்",duration:"ISO கால அளவு",ipv4:"IPv4 முகவரி",ipv6:"IPv6 முகவரி",cidrv4:"IPv4 வரம்பு",cidrv6:"IPv6 வரம்பு",base64:"base64-encoded சரம்",base64url:"base64url-encoded சரம்",json_string:"JSON சரம்",e164:"E.164 எண்",jwt:"JWT",template_literal:"input"};return issue=>{switch(issue.code){case"invalid_type":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ".concat(issue.expected,", \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ".concat(stringifyPrimitive(issue.values[0]));return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ".concat(joinValues(issue.values,"|")," \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1");case"too_big":{var _issue$origin70;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing){var _issue$origin69,_sizing$unit29;return"\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ".concat((_issue$origin69=issue.origin)!==null&&_issue$origin69!==void 0?_issue$origin69:"மதிப்பு"," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit29=sizing.unit)!==null&&_sizing$unit29!==void 0?_sizing$unit29:"உறுப்புகள்"," \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD");}return"\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ".concat((_issue$origin70=issue.origin)!==null&&_issue$origin70!==void 0?_issue$origin70:"மதிப்பு"," ").concat(adj).concat(issue.maximum.toString()," \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD");}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit," \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD");//
}return"\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString()," \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD");}case"invalid_format":{var _Nouns$_issue$format30;const _issue=issue;if(_issue.format==="starts_with")return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: \"".concat(_issue.prefix,"\" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD");if(_issue.format==="ends_with")return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: \"".concat(_issue.suffix,"\" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD");if(_issue.format==="includes")return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: \"".concat(_issue.includes,"\" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD");if(_issue.format==="regex")return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ".concat(_issue.pattern," \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD");return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ".concat((_Nouns$_issue$format30=Nouns[_issue.format])!==null&&_Nouns$_issue$format30!==void 0?_Nouns$_issue$format30:issue.format);}case"not_multiple_of":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ".concat(issue.divisor," \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD");case"unrecognized_keys":return"\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8".concat(issue.keys.length>1?"கள்":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"".concat(issue.origin," \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8");case"invalid_union":return"தவறான உள்ளீடு";case"invalid_element":return"".concat(issue.origin," \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1");default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";}};};function ta(){return{localeError:error$7()};}const error$6=()=>{const Sizable={string:{unit:"ตัวอักษร",verb:"ควรมี"},file:{unit:"ไบต์",verb:"ควรมี"},array:{unit:"รายการ",verb:"ควรมี"},set:{unit:"รายการ",verb:"ควรมี"}};function getSizing(origin){var _Sizable$origin31;return(_Sizable$origin31=Sizable[origin])!==null&&_Sizable$origin31!==void 0?_Sizable$origin31:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"ไม่ใช่ตัวเลข (NaN)":"ตัวเลข";}case"object":{if(Array.isArray(data)){return"อาร์เรย์ (Array)";}if(data===null){return"ไม่มีค่า (null)";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"ข้อมูลที่ป้อน",email:"ที่อยู่อีเมล",url:"URL",emoji:"อิโมจิ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"วันที่เวลาแบบ ISO",date:"วันที่แบบ ISO",time:"เวลาแบบ ISO",duration:"ช่วงเวลาแบบ ISO",ipv4:"ที่อยู่ IPv4",ipv6:"ที่อยู่ IPv6",cidrv4:"ช่วง IP แบบ IPv4",cidrv6:"ช่วง IP แบบ IPv6",base64:"ข้อความแบบ Base64",base64url:"ข้อความแบบ Base64 สำหรับ URL",json_string:"ข้อความแบบ JSON",e164:"เบอร์โทรศัพท์ระหว่างประเทศ (E.164)",jwt:"โทเคน JWT",template_literal:"ข้อมูลที่ป้อน"};return issue=>{switch(issue.code){case"invalid_type":return"\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ".concat(issue.expected," \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ".concat(stringifyPrimitive(issue.values[0]));return"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin71,_sizing$unit30,_issue$origin72;const adj=issue.inclusive?"ไม่เกิน":"น้อยกว่า";const sizing=getSizing(issue.origin);if(sizing)return"\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ".concat((_issue$origin71=issue.origin)!==null&&_issue$origin71!==void 0?_issue$origin71:"ค่า"," \u0E04\u0E27\u0E23\u0E21\u0E35").concat(adj," ").concat(issue.maximum.toString()," ").concat((_sizing$unit30=sizing.unit)!==null&&_sizing$unit30!==void 0?_sizing$unit30:"รายการ");return"\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ".concat((_issue$origin72=issue.origin)!==null&&_issue$origin72!==void 0?_issue$origin72:"ค่า"," \u0E04\u0E27\u0E23\u0E21\u0E35").concat(adj," ").concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?"อย่างน้อย":"มากกว่า";const sizing=getSizing(issue.origin);if(sizing){return"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ".concat(issue.origin," \u0E04\u0E27\u0E23\u0E21\u0E35").concat(adj," ").concat(issue.minimum.toString()," ").concat(sizing.unit);}return"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ".concat(issue.origin," \u0E04\u0E27\u0E23\u0E21\u0E35").concat(adj," ").concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format31;const _issue=issue;if(_issue.format==="starts_with"){return"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 \"".concat(_issue.prefix,"\"");}if(_issue.format==="ends_with")return"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 \"".concat(_issue.includes,"\" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21");if(_issue.format==="regex")return"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ".concat(_issue.pattern);return"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ".concat((_Nouns$_issue$format31=Nouns[_issue.format])!==null&&_Nouns$_issue$format31!==void 0?_Nouns$_issue$format31:issue.format);}case"not_multiple_of":return"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ".concat(issue.divisor," \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27");case"unrecognized_keys":return"\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ".concat(joinValues(issue.keys,", "));case"invalid_key":return"\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ".concat(issue.origin);case"invalid_union":return"ข้อมูลไม่ถูกต้อง: ไม่ตรงกับรูปแบบยูเนียนที่กำหนดไว้";case"invalid_element":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ".concat(issue.origin);default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07";}};};function th(){return{localeError:error$6()};}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const error$5=()=>{const Sizable={string:{unit:"karakter",verb:"olmalı"},file:{unit:"bayt",verb:"olmalı"},array:{unit:"öğe",verb:"olmalı"},set:{unit:"öğe",verb:"olmalı"}};function getSizing(origin){var _Sizable$origin32;return(_Sizable$origin32=Sizable[origin])!==null&&_Sizable$origin32!==void 0?_Sizable$origin32:null;}const Nouns={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO süre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aralığı",cidrv6:"IPv6 aralığı",base64:"base64 ile şifrelenmiş metin",base64url:"base64url ile şifrelenmiş metin",json_string:"JSON dizesi",e164:"E.164 sayısı",jwt:"JWT",template_literal:"Şablon dizesi"};return issue=>{switch(issue.code){case"invalid_type":return"Ge\xE7ersiz de\u011Fer: beklenen ".concat(issue.expected,", al\u0131nan ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"Ge\xE7ersiz de\u011Fer: beklenen ".concat(stringifyPrimitive(issue.values[0]));return"Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin73,_sizing$unit31,_issue$origin74;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"\xC7ok b\xFCy\xFCk: beklenen ".concat((_issue$origin73=issue.origin)!==null&&_issue$origin73!==void 0?_issue$origin73:"değer"," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit31=sizing.unit)!==null&&_sizing$unit31!==void 0?_sizing$unit31:"öğe");return"\xC7ok b\xFCy\xFCk: beklenen ".concat((_issue$origin74=issue.origin)!==null&&_issue$origin74!==void 0?_issue$origin74:"değer"," ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing)return"\xC7ok k\xFC\xE7\xFCk: beklenen ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);return"\xC7ok k\xFC\xE7\xFCk: beklenen ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format32;const _issue=issue;if(_issue.format==="starts_with")return"Ge\xE7ersiz metin: \"".concat(_issue.prefix,"\" ile ba\u015Flamal\u0131");if(_issue.format==="ends_with")return"Ge\xE7ersiz metin: \"".concat(_issue.suffix,"\" ile bitmeli");if(_issue.format==="includes")return"Ge\xE7ersiz metin: \"".concat(_issue.includes,"\" i\xE7ermeli");if(_issue.format==="regex")return"Ge\xE7ersiz metin: ".concat(_issue.pattern," desenine uymal\u0131");return"Ge\xE7ersiz ".concat((_Nouns$_issue$format32=Nouns[_issue.format])!==null&&_Nouns$_issue$format32!==void 0?_Nouns$_issue$format32:issue.format);}case"not_multiple_of":return"Ge\xE7ersiz say\u0131: ".concat(issue.divisor," ile tam b\xF6l\xFCnebilmeli");case"unrecognized_keys":return"Tan\u0131nmayan anahtar".concat(issue.keys.length>1?"lar":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"".concat(issue.origin," i\xE7inde ge\xE7ersiz anahtar");case"invalid_union":return"Geçersiz değer";case"invalid_element":return"".concat(issue.origin," i\xE7inde ge\xE7ersiz de\u011Fer");default:return"Ge\xE7ersiz de\u011Fer";}};};function tr(){return{localeError:error$5()};}const error$4=()=>{const Sizable={string:{unit:"символів",verb:"матиме"},file:{unit:"байтів",verb:"матиме"},array:{unit:"елементів",verb:"матиме"},set:{unit:"елементів",verb:"матиме"}};function getSizing(origin){var _Sizable$origin33;return(_Sizable$origin33=Sizable[origin])!==null&&_Sizable$origin33!==void 0?_Sizable$origin33:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"число";}case"object":{if(Array.isArray(data)){return"масив";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"вхідні дані",email:"адреса електронної пошти",url:"URL",emoji:"емодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"дата та час ISO",date:"дата ISO",time:"час ISO",duration:"тривалість ISO",ipv4:"адреса IPv4",ipv6:"адреса IPv6",cidrv4:"діапазон IPv4",cidrv6:"діапазон IPv6",base64:"рядок у кодуванні base64",base64url:"рядок у кодуванні base64url",json_string:"рядок JSON",e164:"номер E.164",jwt:"JWT",template_literal:"вхідні дані"};return issue=>{switch(issue.code){case"invalid_type":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ".concat(issue.expected,", \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ").concat(parsedType(issue.input));// return `Неправильні вхідні дані: очікується ${issue.expected}, отримано ${util.getParsedType(issue.input)}`;
case"invalid_value":if(issue.values.length===1)return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ".concat(stringifyPrimitive(issue.values[0]));return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin75,_sizing$unit32,_issue$origin76;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ".concat((_issue$origin75=issue.origin)!==null&&_issue$origin75!==void 0?_issue$origin75:"значення"," ").concat(sizing.verb," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit32=sizing.unit)!==null&&_sizing$unit32!==void 0?_sizing$unit32:"елементів");return"\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ".concat((_issue$origin76=issue.origin)!==null&&_issue$origin76!==void 0?_issue$origin76:"значення"," \u0431\u0443\u0434\u0435 ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ".concat(issue.origin," ").concat(sizing.verb," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ".concat(issue.origin," \u0431\u0443\u0434\u0435 ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format33;const _issue=issue;if(_issue.format==="starts_with")return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ".concat(_issue.pattern);return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ".concat((_Nouns$_issue$format33=Nouns[_issue.format])!==null&&_Nouns$_issue$format33!==void 0?_Nouns$_issue$format33:issue.format);}case"not_multiple_of":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ".concat(issue.divisor);case"unrecognized_keys":return"\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447".concat(issue.keys.length>1?"і":"",": ").concat(joinValues(issue.keys,", "));case"invalid_key":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ".concat(issue.origin);case"invalid_union":return"Неправильні вхідні дані";case"invalid_element":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ".concat(issue.origin);default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";}};};function ua(){return{localeError:error$4()};}const error$3=()=>{const Sizable={string:{unit:"حروف",verb:"ہونا"},file:{unit:"بائٹس",verb:"ہونا"},array:{unit:"آئٹمز",verb:"ہونا"},set:{unit:"آئٹمز",verb:"ہونا"}};function getSizing(origin){var _Sizable$origin34;return(_Sizable$origin34=Sizable[origin])!==null&&_Sizable$origin34!==void 0?_Sizable$origin34:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"نمبر";}case"object":{if(Array.isArray(data)){return"آرے";}if(data===null){return"نل";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"ان پٹ",email:"ای میل ایڈریس",url:"یو آر ایل",emoji:"ایموجی",uuid:"یو یو آئی ڈی",uuidv4:"یو یو آئی ڈی وی 4",uuidv6:"یو یو آئی ڈی وی 6",nanoid:"نینو آئی ڈی",guid:"جی یو آئی ڈی",cuid:"سی یو آئی ڈی",cuid2:"سی یو آئی ڈی 2",ulid:"یو ایل آئی ڈی",xid:"ایکس آئی ڈی",ksuid:"کے ایس یو آئی ڈی",datetime:"آئی ایس او ڈیٹ ٹائم",date:"آئی ایس او تاریخ",time:"آئی ایس او وقت",duration:"آئی ایس او مدت",ipv4:"آئی پی وی 4 ایڈریس",ipv6:"آئی پی وی 6 ایڈریس",cidrv4:"آئی پی وی 4 رینج",cidrv6:"آئی پی وی 6 رینج",base64:"بیس 64 ان کوڈڈ سٹرنگ",base64url:"بیس 64 یو آر ایل ان کوڈڈ سٹرنگ",json_string:"جے ایس او این سٹرنگ",e164:"ای 164 نمبر",jwt:"جے ڈبلیو ٹی",template_literal:"ان پٹ"};return issue=>{switch(issue.code){case"invalid_type":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ".concat(issue.expected," \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ").concat(parsedType(issue.input)," \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627");case"invalid_value":if(issue.values.length===1)return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ".concat(stringifyPrimitive(issue.values[0])," \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627");return"\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ".concat(joinValues(issue.values,"|")," \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627");case"too_big":{var _issue$origin77,_sizing$unit33,_issue$origin78;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"\u0628\u06C1\u062A \u0628\u0691\u0627: ".concat((_issue$origin77=issue.origin)!==null&&_issue$origin77!==void 0?_issue$origin77:"ویلیو"," \u06A9\u06D2 ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit33=sizing.unit)!==null&&_sizing$unit33!==void 0?_sizing$unit33:"عناصر"," \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2");return"\u0628\u06C1\u062A \u0628\u0691\u0627: ".concat((_issue$origin78=issue.origin)!==null&&_issue$origin78!==void 0?_issue$origin78:"ویلیو"," \u06A9\u0627 ").concat(adj).concat(issue.maximum.toString()," \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627");}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ".concat(issue.origin," \u06A9\u06D2 ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit," \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2");}return"\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ".concat(issue.origin," \u06A9\u0627 ").concat(adj).concat(issue.minimum.toString()," \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627");}case"invalid_format":{var _Nouns$_issue$format34;const _issue=issue;if(_issue.format==="starts_with"){return"\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \"".concat(_issue.prefix,"\" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2");}if(_issue.format==="ends_with")return"\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \"".concat(_issue.suffix,"\" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2");if(_issue.format==="includes")return"\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \"".concat(_issue.includes,"\" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2");if(_issue.format==="regex")return"\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ".concat(_issue.pattern," \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2");return"\u063A\u0644\u0637 ".concat((_Nouns$_issue$format34=Nouns[_issue.format])!==null&&_Nouns$_issue$format34!==void 0?_Nouns$_issue$format34:issue.format);}case"not_multiple_of":return"\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ".concat(issue.divisor," \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2");case"unrecognized_keys":return"\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC".concat(issue.keys.length>1?"ز":"",": ").concat(joinValues(issue.keys,"، "));case"invalid_key":return"".concat(issue.origin," \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC");case"invalid_union":return"غلط ان پٹ";case"invalid_element":return"".concat(issue.origin," \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648");default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";}};};function ur(){return{localeError:error$3()};}const error$2=()=>{const Sizable={string:{unit:"ký tự",verb:"có"},file:{unit:"byte",verb:"có"},array:{unit:"phần tử",verb:"có"},set:{unit:"phần tử",verb:"có"}};function getSizing(origin){var _Sizable$origin35;return(_Sizable$origin35=Sizable[origin])!==null&&_Sizable$origin35!==void 0?_Sizable$origin35:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"số";}case"object":{if(Array.isArray(data)){return"mảng";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"đầu vào",email:"địa chỉ email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngày giờ ISO",date:"ngày ISO",time:"giờ ISO",duration:"khoảng thời gian ISO",ipv4:"địa chỉ IPv4",ipv6:"địa chỉ IPv6",cidrv4:"dải IPv4",cidrv6:"dải IPv6",base64:"chuỗi mã hóa base64",base64url:"chuỗi mã hóa base64url",json_string:"chuỗi JSON",e164:"số E.164",jwt:"JWT",template_literal:"đầu vào"};return issue=>{switch(issue.code){case"invalid_type":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ".concat(issue.expected,", nh\u1EADn \u0111\u01B0\u1EE3c ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ".concat(stringifyPrimitive(issue.values[0]));return"T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin79,_sizing$unit34,_issue$origin80;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ".concat((_issue$origin79=issue.origin)!==null&&_issue$origin79!==void 0?_issue$origin79:"giá trị"," ").concat(sizing.verb," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit34=sizing.unit)!==null&&_sizing$unit34!==void 0?_sizing$unit34:"phần tử");return"Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ".concat((_issue$origin80=issue.origin)!==null&&_issue$origin80!==void 0?_issue$origin80:"giá trị"," ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ".concat(issue.origin," ").concat(sizing.verb," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format35;const _issue=issue;if(_issue.format==="starts_with")return"Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng \"".concat(_issue.prefix,"\"");if(_issue.format==="ends_with")return"Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng \"".concat(_issue.suffix,"\"");if(_issue.format==="includes")return"Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ".concat(_issue.pattern);return"".concat((_Nouns$_issue$format35=Nouns[_issue.format])!==null&&_Nouns$_issue$format35!==void 0?_Nouns$_issue$format35:issue.format," kh\xF4ng h\u1EE3p l\u1EC7");}case"not_multiple_of":return"S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ".concat(issue.divisor);case"unrecognized_keys":return"Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ".concat(joinValues(issue.keys,", "));case"invalid_key":return"Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ".concat(issue.origin);case"invalid_union":return"Đầu vào không hợp lệ";case"invalid_element":return"Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ".concat(issue.origin);default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";}};};function vi(){return{localeError:error$2()};}const error$1=()=>{const Sizable={string:{unit:"字符",verb:"包含"},file:{unit:"字节",verb:"包含"},array:{unit:"项",verb:"包含"},set:{unit:"项",verb:"包含"}};function getSizing(origin){var _Sizable$origin36;return(_Sizable$origin36=Sizable[origin])!==null&&_Sizable$origin36!==void 0?_Sizable$origin36:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"非数字(NaN)":"数字";}case"object":{if(Array.isArray(data)){return"数组";}if(data===null){return"空值(null)";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"输入",email:"电子邮件",url:"URL",emoji:"表情符号",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日期时间",date:"ISO日期",time:"ISO时间",duration:"ISO时长",ipv4:"IPv4地址",ipv6:"IPv6地址",cidrv4:"IPv4网段",cidrv6:"IPv6网段",base64:"base64编码字符串",base64url:"base64url编码字符串",json_string:"JSON字符串",e164:"E.164号码",jwt:"JWT",template_literal:"输入"};return issue=>{switch(issue.code){case"invalid_type":return"\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ".concat(issue.expected,"\uFF0C\u5B9E\u9645\u63A5\u6536 ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ".concat(stringifyPrimitive(issue.values[0]));return"\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin81,_sizing$unit35,_issue$origin82;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ".concat((_issue$origin81=issue.origin)!==null&&_issue$origin81!==void 0?_issue$origin81:"值"," ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit35=sizing.unit)!==null&&_sizing$unit35!==void 0?_sizing$unit35:"个元素");return"\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ".concat((_issue$origin82=issue.origin)!==null&&_issue$origin82!==void 0?_issue$origin82:"值"," ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ".concat(issue.origin," ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format36;const _issue=issue;if(_issue.format==="starts_with")return"\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 \"".concat(_issue.prefix,"\" \u5F00\u5934");if(_issue.format==="ends_with")return"\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 \"".concat(_issue.suffix,"\" \u7ED3\u5C3E");if(_issue.format==="includes")return"\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ".concat(_issue.pattern);return"\u65E0\u6548".concat((_Nouns$_issue$format36=Nouns[_issue.format])!==null&&_Nouns$_issue$format36!==void 0?_Nouns$_issue$format36:issue.format);}case"not_multiple_of":return"\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ".concat(issue.divisor," \u7684\u500D\u6570");case"unrecognized_keys":return"\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ".concat(joinValues(issue.keys,", "));case"invalid_key":return"".concat(issue.origin," \u4E2D\u7684\u952E(key)\u65E0\u6548");case"invalid_union":return"无效输入";case"invalid_element":return"".concat(issue.origin," \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)");default:return"\u65E0\u6548\u8F93\u5165";}};};function zhCN(){return{localeError:error$1()};}const error=()=>{const Sizable={string:{unit:"字元",verb:"擁有"},file:{unit:"位元組",verb:"擁有"},array:{unit:"項目",verb:"擁有"},set:{unit:"項目",verb:"擁有"}};function getSizing(origin){var _Sizable$origin37;return(_Sizable$origin37=Sizable[origin])!==null&&_Sizable$origin37!==void 0?_Sizable$origin37:null;}const parsedType=data=>{const t=typeof data;switch(t){case"number":{return Number.isNaN(data)?"NaN":"number";}case"object":{if(Array.isArray(data)){return"array";}if(data===null){return"null";}if(Object.getPrototypeOf(data)!==Object.prototype&&data.constructor){return data.constructor.name;}}}return t;};const Nouns={regex:"輸入",email:"郵件地址",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 日期時間",date:"ISO 日期",time:"ISO 時間",duration:"ISO 期間",ipv4:"IPv4 位址",ipv6:"IPv6 位址",cidrv4:"IPv4 範圍",cidrv6:"IPv6 範圍",base64:"base64 編碼字串",base64url:"base64url 編碼字串",json_string:"JSON 字串",e164:"E.164 數值",jwt:"JWT",template_literal:"輸入"};return issue=>{switch(issue.code){case"invalid_type":return"\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ".concat(issue.expected,"\uFF0C\u4F46\u6536\u5230 ").concat(parsedType(issue.input));case"invalid_value":if(issue.values.length===1)return"\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ".concat(stringifyPrimitive(issue.values[0]));return"\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ".concat(joinValues(issue.values,"|"));case"too_big":{var _issue$origin83,_sizing$unit36,_issue$origin84;const adj=issue.inclusive?"<=":"<";const sizing=getSizing(issue.origin);if(sizing)return"\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ".concat((_issue$origin83=issue.origin)!==null&&_issue$origin83!==void 0?_issue$origin83:"值"," \u61C9\u70BA ").concat(adj).concat(issue.maximum.toString()," ").concat((_sizing$unit36=sizing.unit)!==null&&_sizing$unit36!==void 0?_sizing$unit36:"個元素");return"\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ".concat((_issue$origin84=issue.origin)!==null&&_issue$origin84!==void 0?_issue$origin84:"值"," \u61C9\u70BA ").concat(adj).concat(issue.maximum.toString());}case"too_small":{const adj=issue.inclusive?">=":">";const sizing=getSizing(issue.origin);if(sizing){return"\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ".concat(issue.origin," \u61C9\u70BA ").concat(adj).concat(issue.minimum.toString()," ").concat(sizing.unit);}return"\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ".concat(issue.origin," \u61C9\u70BA ").concat(adj).concat(issue.minimum.toString());}case"invalid_format":{var _Nouns$_issue$format37;const _issue=issue;if(_issue.format==="starts_with"){return"\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 \"".concat(_issue.prefix,"\" \u958B\u982D");}if(_issue.format==="ends_with")return"\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 \"".concat(_issue.suffix,"\" \u7D50\u5C3E");if(_issue.format==="includes")return"\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B \"".concat(_issue.includes,"\"");if(_issue.format==="regex")return"\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ".concat(_issue.pattern);return"\u7121\u6548\u7684 ".concat((_Nouns$_issue$format37=Nouns[_issue.format])!==null&&_Nouns$_issue$format37!==void 0?_Nouns$_issue$format37:issue.format);}case"not_multiple_of":return"\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ".concat(issue.divisor," \u7684\u500D\u6578");case"unrecognized_keys":return"\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C".concat(issue.keys.length>1?"們":"","\uFF1A").concat(joinValues(issue.keys,"、"));case"invalid_key":return"".concat(issue.origin," \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C");case"invalid_union":return"無效的輸入值";case"invalid_element":return"".concat(issue.origin," \u4E2D\u6709\u7121\u6548\u7684\u503C");default:return"\u7121\u6548\u7684\u8F38\u5165\u503C";}};};function zhTW(){return{localeError:error()};}var index$1=/*#__PURE__*/Object.freeze({__proto__:null,ar:ar,az:az,be:be,ca:ca,cs:cs,de:de,en:en,eo:eo,es:es,fa:fa,fi:fi,fr:fr,frCA:frCA,he:he,hu:hu,id:id,it:it,ja:ja,kh:kh,ko:ko,mk:mk,ms:ms,nl:nl,no:no,ota:ota,pl:pl,ps:ps,pt:pt,ru:ru,sl:sl,sv:sv,ta:ta,th:th,tr:tr,ua:ua,ur:ur,vi:vi,zhCN:zhCN,zhTW:zhTW});const $output=Symbol("ZodOutput");const $input=Symbol("ZodInput");class $ZodRegistry{constructor(){this._map=new Map();this._idmap=new Map();}add(schema){const meta=arguments.length<=1?undefined:arguments[1];this._map.set(schema,meta);if(meta&&typeof meta==="object"&&"id"in meta){if(this._idmap.has(meta.id)){throw new Error("ID ".concat(meta.id," already exists in the registry"));}this._idmap.set(meta.id,schema);}return this;}clear(){this._map=new Map();this._idmap=new Map();return this;}remove(schema){const meta=this._map.get(schema);if(meta&&typeof meta==="object"&&"id"in meta){this._idmap.delete(meta.id);}this._map.delete(schema);return this;}get(schema){// return this._map.get(schema) as any;
// inherit metadata
const p=schema._zod.parent;if(p){var _this$get;const pm=_objectSpread2({},(_this$get=this.get(p))!==null&&_this$get!==void 0?_this$get:{});delete pm.id;// do not inherit id
return _objectSpread2(_objectSpread2({},pm),this._map.get(schema));}return this._map.get(schema);}has(schema){return this._map.has(schema);}}// registries
function registry(){return new $ZodRegistry();}const globalRegistry=/*@__PURE__*/registry();function _string(Class,params){return new Class(_objectSpread2({type:"string"},normalizeParams(params)));}function _coercedString(Class,params){return new Class(_objectSpread2({type:"string",coerce:true},normalizeParams(params)));}function _email(Class,params){return new Class(_objectSpread2({type:"string",format:"email",check:"string_format",abort:false},normalizeParams(params)));}function _guid(Class,params){return new Class(_objectSpread2({type:"string",format:"guid",check:"string_format",abort:false},normalizeParams(params)));}function _uuid(Class,params){return new Class(_objectSpread2({type:"string",format:"uuid",check:"string_format",abort:false},normalizeParams(params)));}function _uuidv4(Class,params){return new Class(_objectSpread2({type:"string",format:"uuid",check:"string_format",abort:false,version:"v4"},normalizeParams(params)));}function _uuidv6(Class,params){return new Class(_objectSpread2({type:"string",format:"uuid",check:"string_format",abort:false,version:"v6"},normalizeParams(params)));}function _uuidv7(Class,params){return new Class(_objectSpread2({type:"string",format:"uuid",check:"string_format",abort:false,version:"v7"},normalizeParams(params)));}function _url(Class,params){return new Class(_objectSpread2({type:"string",format:"url",check:"string_format",abort:false},normalizeParams(params)));}function _emoji(Class,params){return new Class(_objectSpread2({type:"string",format:"emoji",check:"string_format",abort:false},normalizeParams(params)));}function _nanoid(Class,params){return new Class(_objectSpread2({type:"string",format:"nanoid",check:"string_format",abort:false},normalizeParams(params)));}function _cuid(Class,params){return new Class(_objectSpread2({type:"string",format:"cuid",check:"string_format",abort:false},normalizeParams(params)));}function _cuid2(Class,params){return new Class(_objectSpread2({type:"string",format:"cuid2",check:"string_format",abort:false},normalizeParams(params)));}function _ulid(Class,params){return new Class(_objectSpread2({type:"string",format:"ulid",check:"string_format",abort:false},normalizeParams(params)));}function _xid(Class,params){return new Class(_objectSpread2({type:"string",format:"xid",check:"string_format",abort:false},normalizeParams(params)));}function _ksuid(Class,params){return new Class(_objectSpread2({type:"string",format:"ksuid",check:"string_format",abort:false},normalizeParams(params)));}function _ipv4(Class,params){return new Class(_objectSpread2({type:"string",format:"ipv4",check:"string_format",abort:false},normalizeParams(params)));}function _ipv6(Class,params){return new Class(_objectSpread2({type:"string",format:"ipv6",check:"string_format",abort:false},normalizeParams(params)));}function _cidrv4(Class,params){return new Class(_objectSpread2({type:"string",format:"cidrv4",check:"string_format",abort:false},normalizeParams(params)));}function _cidrv6(Class,params){return new Class(_objectSpread2({type:"string",format:"cidrv6",check:"string_format",abort:false},normalizeParams(params)));}function _base64(Class,params){return new Class(_objectSpread2({type:"string",format:"base64",check:"string_format",abort:false},normalizeParams(params)));}function _base64url(Class,params){return new Class(_objectSpread2({type:"string",format:"base64url",check:"string_format",abort:false},normalizeParams(params)));}function _e164(Class,params){return new Class(_objectSpread2({type:"string",format:"e164",check:"string_format",abort:false},normalizeParams(params)));}function _jwt(Class,params){return new Class(_objectSpread2({type:"string",format:"jwt",check:"string_format",abort:false},normalizeParams(params)));}const TimePrecision={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function _isoDateTime(Class,params){return new Class(_objectSpread2({type:"string",format:"datetime",check:"string_format",offset:false,local:false,precision:null},normalizeParams(params)));}function _isoDate(Class,params){return new Class(_objectSpread2({type:"string",format:"date",check:"string_format"},normalizeParams(params)));}function _isoTime(Class,params){return new Class(_objectSpread2({type:"string",format:"time",check:"string_format",precision:null},normalizeParams(params)));}function _isoDuration(Class,params){return new Class(_objectSpread2({type:"string",format:"duration",check:"string_format"},normalizeParams(params)));}function _number(Class,params){return new Class(_objectSpread2({type:"number",checks:[]},normalizeParams(params)));}function _coercedNumber(Class,params){return new Class(_objectSpread2({type:"number",coerce:true,checks:[]},normalizeParams(params)));}function _int(Class,params){return new Class(_objectSpread2({type:"number",check:"number_format",abort:false,format:"safeint"},normalizeParams(params)));}function _float32(Class,params){return new Class(_objectSpread2({type:"number",check:"number_format",abort:false,format:"float32"},normalizeParams(params)));}function _float64(Class,params){return new Class(_objectSpread2({type:"number",check:"number_format",abort:false,format:"float64"},normalizeParams(params)));}function _int32(Class,params){return new Class(_objectSpread2({type:"number",check:"number_format",abort:false,format:"int32"},normalizeParams(params)));}function _uint32(Class,params){return new Class(_objectSpread2({type:"number",check:"number_format",abort:false,format:"uint32"},normalizeParams(params)));}function _boolean(Class,params){return new Class(_objectSpread2({type:"boolean"},normalizeParams(params)));}function _coercedBoolean(Class,params){return new Class(_objectSpread2({type:"boolean",coerce:true},normalizeParams(params)));}function _bigint(Class,params){return new Class(_objectSpread2({type:"bigint"},normalizeParams(params)));}function _coercedBigint(Class,params){return new Class(_objectSpread2({type:"bigint",coerce:true},normalizeParams(params)));}function _int64(Class,params){return new Class(_objectSpread2({type:"bigint",check:"bigint_format",abort:false,format:"int64"},normalizeParams(params)));}function _uint64(Class,params){return new Class(_objectSpread2({type:"bigint",check:"bigint_format",abort:false,format:"uint64"},normalizeParams(params)));}function _symbol(Class,params){return new Class(_objectSpread2({type:"symbol"},normalizeParams(params)));}function _undefined$1(Class,params){return new Class(_objectSpread2({type:"undefined"},normalizeParams(params)));}function _null$1(Class,params){return new Class(_objectSpread2({type:"null"},normalizeParams(params)));}function _any(Class){return new Class({type:"any"});}function _unknown(Class){return new Class({type:"unknown"});}function _never(Class,params){return new Class(_objectSpread2({type:"never"},normalizeParams(params)));}function _void$1(Class,params){return new Class(_objectSpread2({type:"void"},normalizeParams(params)));}function _date(Class,params){return new Class(_objectSpread2({type:"date"},normalizeParams(params)));}function _coercedDate(Class,params){return new Class(_objectSpread2({type:"date",coerce:true},normalizeParams(params)));}function _nan(Class,params){return new Class(_objectSpread2({type:"nan"},normalizeParams(params)));}function _lt(value,params){return new $ZodCheckLessThan(_objectSpread2(_objectSpread2({check:"less_than"},normalizeParams(params)),{},{value,inclusive:false}));}function _lte(value,params){return new $ZodCheckLessThan(_objectSpread2(_objectSpread2({check:"less_than"},normalizeParams(params)),{},{value,inclusive:true}));}function _gt(value,params){return new $ZodCheckGreaterThan(_objectSpread2(_objectSpread2({check:"greater_than"},normalizeParams(params)),{},{value,inclusive:false}));}function _gte(value,params){return new $ZodCheckGreaterThan(_objectSpread2(_objectSpread2({check:"greater_than"},normalizeParams(params)),{},{value,inclusive:true}));}function _positive(params){return _gt(0,params);}// negative
function _negative(params){return _lt(0,params);}// nonpositive
function _nonpositive(params){return _lte(0,params);}// nonnegative
function _nonnegative(params){return _gte(0,params);}function _multipleOf(value,params){return new $ZodCheckMultipleOf(_objectSpread2(_objectSpread2({check:"multiple_of"},normalizeParams(params)),{},{value}));}function _maxSize(maximum,params){return new $ZodCheckMaxSize(_objectSpread2(_objectSpread2({check:"max_size"},normalizeParams(params)),{},{maximum}));}function _minSize(minimum,params){return new $ZodCheckMinSize(_objectSpread2(_objectSpread2({check:"min_size"},normalizeParams(params)),{},{minimum}));}function _size(size,params){return new $ZodCheckSizeEquals(_objectSpread2(_objectSpread2({check:"size_equals"},normalizeParams(params)),{},{size}));}function _maxLength(maximum,params){const ch=new $ZodCheckMaxLength(_objectSpread2(_objectSpread2({check:"max_length"},normalizeParams(params)),{},{maximum}));return ch;}function _minLength(minimum,params){return new $ZodCheckMinLength(_objectSpread2(_objectSpread2({check:"min_length"},normalizeParams(params)),{},{minimum}));}function _length(length,params){return new $ZodCheckLengthEquals(_objectSpread2(_objectSpread2({check:"length_equals"},normalizeParams(params)),{},{length}));}function _regex(pattern,params){return new $ZodCheckRegex(_objectSpread2(_objectSpread2({check:"string_format",format:"regex"},normalizeParams(params)),{},{pattern}));}function _lowercase(params){return new $ZodCheckLowerCase(_objectSpread2({check:"string_format",format:"lowercase"},normalizeParams(params)));}function _uppercase(params){return new $ZodCheckUpperCase(_objectSpread2({check:"string_format",format:"uppercase"},normalizeParams(params)));}function _includes(includes,params){return new $ZodCheckIncludes(_objectSpread2(_objectSpread2({check:"string_format",format:"includes"},normalizeParams(params)),{},{includes}));}function _startsWith(prefix,params){return new $ZodCheckStartsWith(_objectSpread2(_objectSpread2({check:"string_format",format:"starts_with"},normalizeParams(params)),{},{prefix}));}function _endsWith(suffix,params){return new $ZodCheckEndsWith(_objectSpread2(_objectSpread2({check:"string_format",format:"ends_with"},normalizeParams(params)),{},{suffix}));}function _property(property,schema,params){return new $ZodCheckProperty(_objectSpread2({check:"property",property,schema},normalizeParams(params)));}function _mime(types,params){return new $ZodCheckMimeType(_objectSpread2({check:"mime_type",mime:types},normalizeParams(params)));}function _overwrite(tx){return new $ZodCheckOverwrite({check:"overwrite",tx});}// normalize
function _normalize(form){return _overwrite(input=>input.normalize(form));}// trim
function _trim(){return _overwrite(input=>input.trim());}// toLowerCase
function _toLowerCase(){return _overwrite(input=>input.toLowerCase());}// toUpperCase
function _toUpperCase(){return _overwrite(input=>input.toUpperCase());}function _array(Class,element,params){return new Class(_objectSpread2({type:"array",element},normalizeParams(params)));}function _union(Class,options,params){return new Class(_objectSpread2({type:"union",options},normalizeParams(params)));}function _discriminatedUnion(Class,discriminator,options,params){return new Class(_objectSpread2({type:"union",options,discriminator},normalizeParams(params)));}function _intersection(Class,left,right){return new Class({type:"intersection",left,right});}// export function _tuple(
//   Class: util.SchemaClass<schemas.$ZodTuple>,
//   items: [],
//   params?: string | $ZodTupleParams
// ): schemas.$ZodTuple<[], null>;
function _tuple(Class,items,_paramsOrRest,_params){const hasRest=_paramsOrRest instanceof $ZodType;const params=hasRest?_params:_paramsOrRest;const rest=hasRest?_paramsOrRest:null;return new Class(_objectSpread2({type:"tuple",items,rest},normalizeParams(params)));}function _record(Class,keyType,valueType,params){return new Class(_objectSpread2({type:"record",keyType,valueType},normalizeParams(params)));}function _map(Class,keyType,valueType,params){return new Class(_objectSpread2({type:"map",keyType,valueType},normalizeParams(params)));}function _set(Class,valueType,params){return new Class(_objectSpread2({type:"set",valueType},normalizeParams(params)));}function _enum$1(Class,values,params){const entries=Array.isArray(values)?Object.fromEntries(values.map(v=>[v,v])):values;// if (Array.isArray(values)) {
//   for (const value of values) {
//     entries[value] = value;
//   }
// } else {
//   Object.assign(entries, values);
// }
// const entries: util.EnumLike = {};
// for (const val of values) {
//   entries[val] = val;
// }
return new Class(_objectSpread2({type:"enum",entries},normalizeParams(params)));}/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.
 *
 * ```ts
 * enum Colors { red, green, blue }
 * z.enum(Colors);
 * ```
 */function _nativeEnum(Class,entries,params){return new Class(_objectSpread2({type:"enum",entries},normalizeParams(params)));}function _literal(Class,value,params){return new Class(_objectSpread2({type:"literal",values:Array.isArray(value)?value:[value]},normalizeParams(params)));}function _file(Class,params){return new Class(_objectSpread2({type:"file"},normalizeParams(params)));}function _transform(Class,fn){return new Class({type:"transform",transform:fn});}function _optional(Class,innerType){return new Class({type:"optional",innerType});}function _nullable(Class,innerType){return new Class({type:"nullable",innerType});}function _default$1(Class,innerType,defaultValue){return new Class({type:"default",innerType,get defaultValue(){return typeof defaultValue==="function"?defaultValue():defaultValue;}});}function _nonoptional(Class,innerType,params){return new Class(_objectSpread2({type:"nonoptional",innerType},normalizeParams(params)));}function _success(Class,innerType){return new Class({type:"success",innerType});}function _catch$1(Class,innerType,catchValue){return new Class({type:"catch",innerType,catchValue:typeof catchValue==="function"?catchValue:()=>catchValue});}function _pipe(Class,in_,out){return new Class({type:"pipe",in:in_,out});}function _readonly(Class,innerType){return new Class({type:"readonly",innerType});}function _templateLiteral(Class,parts,params){return new Class(_objectSpread2({type:"template_literal",parts},normalizeParams(params)));}function _lazy(Class,getter){return new Class({type:"lazy",getter});}function _promise(Class,innerType){return new Class({type:"promise",innerType});}function _custom(Class,fn,_params){var _norm$abort;const norm=normalizeParams(_params);(_norm$abort=norm.abort)!==null&&_norm$abort!==void 0?_norm$abort:norm.abort=true;// default to abort:false
const schema=new Class(_objectSpread2({type:"custom",check:"custom",fn:fn},norm));return schema;}// export function _refine<T>(
//   Class: util.SchemaClass<schemas.$ZodCustom>,
//   fn: (arg: NoInfer<T>) => util.MaybeAsync<unknown>,
//   _params: string | $ZodCustomParams = {}
// ): checks.$ZodCheck<T> {
//   return _custom(Class, fn, _params);
// }
// same as _custom but defaults to abort:false
function _refine(Class,fn,_params){const schema=new Class(_objectSpread2({type:"custom",check:"custom",fn:fn},normalizeParams(_params)));return schema;}function _stringbool(Classes,_params){var _params$truthy,_params$falsy,_Classes$Pipe,_Classes$Boolean,_Classes$String,_Classes$Transform;const params=normalizeParams(_params);let truthyArray=(_params$truthy=params.truthy)!==null&&_params$truthy!==void 0?_params$truthy:["true","1","yes","on","y","enabled"];let falsyArray=(_params$falsy=params.falsy)!==null&&_params$falsy!==void 0?_params$falsy:["false","0","no","off","n","disabled"];if(params.case!=="sensitive"){truthyArray=truthyArray.map(v=>typeof v==="string"?v.toLowerCase():v);falsyArray=falsyArray.map(v=>typeof v==="string"?v.toLowerCase():v);}const truthySet=new Set(truthyArray);const falsySet=new Set(falsyArray);const _Pipe=(_Classes$Pipe=Classes.Pipe)!==null&&_Classes$Pipe!==void 0?_Classes$Pipe:$ZodPipe;const _Boolean=(_Classes$Boolean=Classes.Boolean)!==null&&_Classes$Boolean!==void 0?_Classes$Boolean:$ZodBoolean;const _String=(_Classes$String=Classes.String)!==null&&_Classes$String!==void 0?_Classes$String:$ZodString;const _Transform=(_Classes$Transform=Classes.Transform)!==null&&_Classes$Transform!==void 0?_Classes$Transform:$ZodTransform;const tx=new _Transform({type:"transform",transform:(input,payload)=>{let data=input;if(params.case!=="sensitive")data=data.toLowerCase();if(truthySet.has(data)){return true;}else if(falsySet.has(data)){return false;}else{payload.issues.push({code:"invalid_value",expected:"stringbool",values:[...truthySet,...falsySet],input:payload.value,inst:tx});return{};}},error:params.error});// params.error;
const innerPipe=new _Pipe({type:"pipe",in:new _String({type:"string",error:params.error}),out:tx,error:params.error});const outerPipe=new _Pipe({type:"pipe",in:innerPipe,out:new _Boolean({type:"boolean",error:params.error}),error:params.error});return outerPipe;}function _stringFormat(Class,format,fnOrRegex){let _params=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};const params=normalizeParams(_params);const def=_objectSpread2(_objectSpread2({},normalizeParams(_params)),{},{check:"string_format",type:"string",format,fn:typeof fnOrRegex==="function"?fnOrRegex:val=>fnOrRegex.test(val)},params);if(fnOrRegex instanceof RegExp){def.pattern=fnOrRegex;}const inst=new Class(def);return inst;}class $ZodFunction{constructor(def){this._def=def;this.def=def;}implement(func){var _this8=this;if(typeof func!=="function"){throw new Error("implement() must be called with a function");}const impl=function(){for(var _len2=arguments.length,args=new Array(_len2),_key3=0;_key3<_len2;_key3++){args[_key3]=arguments[_key3];}const parsedArgs=_this8._def.input?parse$1(_this8._def.input,args,undefined,{callee:impl}):args;if(!Array.isArray(parsedArgs)){throw new Error("Invalid arguments schema: not an array or tuple schema.");}const output=func(...parsedArgs);return _this8._def.output?parse$1(_this8._def.output,output,undefined,{callee:impl}):output;};return impl;}implementAsync(func){var _this9=this;if(typeof func!=="function"){throw new Error("implement() must be called with a function");}const _impl=/*#__PURE__*/function(){var _ref29=_asyncToGenerator2(function*(){for(var _len3=arguments.length,args=new Array(_len3),_key4=0;_key4<_len3;_key4++){args[_key4]=arguments[_key4];}const parsedArgs=_this9._def.input?yield parseAsync$1(_this9._def.input,args,undefined,{callee:_impl}):args;if(!Array.isArray(parsedArgs)){throw new Error("Invalid arguments schema: not an array or tuple schema.");}const output=yield func(...parsedArgs);return _this9._def.output?parseAsync$1(_this9._def.output,output,undefined,{callee:_impl}):output;});return function impl(){return _ref29.apply(this,arguments);};}();return _impl;}input(){const F=this.constructor;if(Array.isArray(arguments.length<=0?undefined:arguments[0])){return new F({type:"function",input:new $ZodTuple({type:"tuple",items:arguments.length<=0?undefined:arguments[0],rest:arguments.length<=1?undefined:arguments[1]}),output:this._def.output});}return new F({type:"function",input:arguments.length<=0?undefined:arguments[0],output:this._def.output});}output(output){const F=this.constructor;return new F({type:"function",input:this._def.input,output});}}function _function(params){var _params$input,_params$output;return new $ZodFunction({type:"function",input:Array.isArray(params===null||params===void 0?void 0:params.input)?_tuple($ZodTuple,params===null||params===void 0?void 0:params.input):(_params$input=params===null||params===void 0?void 0:params.input)!==null&&_params$input!==void 0?_params$input:_array($ZodArray,_unknown($ZodUnknown)),output:(_params$output=params===null||params===void 0?void 0:params.output)!==null&&_params$output!==void 0?_params$output:_unknown($ZodUnknown)});}class JSONSchemaGenerator{constructor(params){var _params$metadata,_params$target,_params$unrepresentab,_params$override,_params$io;this.counter=0;this.metadataRegistry=(_params$metadata=params===null||params===void 0?void 0:params.metadata)!==null&&_params$metadata!==void 0?_params$metadata:globalRegistry;this.target=(_params$target=params===null||params===void 0?void 0:params.target)!==null&&_params$target!==void 0?_params$target:"draft-2020-12";this.unrepresentable=(_params$unrepresentab=params===null||params===void 0?void 0:params.unrepresentable)!==null&&_params$unrepresentab!==void 0?_params$unrepresentab:"throw";this.override=(_params$override=params===null||params===void 0?void 0:params.override)!==null&&_params$override!==void 0?_params$override:()=>{};this.io=(_params$io=params===null||params===void 0?void 0:params.io)!==null&&_params$io!==void 0?_params$io:"output";this.seen=new Map();}process(schema){var _schema$_zod$toJSONSc,_schema$_zod,_a$default;let _params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{path:[],schemaPath:[]};var _a;const def=schema._zod.def;const formatMap={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""// do not set
};// check for schema in seens
const seen=this.seen.get(schema);if(seen){seen.count++;// check if cycle
const isCycle=_params.schemaPath.includes(schema);if(isCycle){seen.cycle=_params.path;}return seen.schema;}// initialize
const result={schema:{},count:1,cycle:undefined,path:_params.path};this.seen.set(schema,result);// custom method overrides default behavior
const overrideSchema=(_schema$_zod$toJSONSc=(_schema$_zod=schema._zod).toJSONSchema)===null||_schema$_zod$toJSONSc===void 0?void 0:_schema$_zod$toJSONSc.call(_schema$_zod);if(overrideSchema){result.schema=overrideSchema;}else{const params=_objectSpread2(_objectSpread2({},_params),{},{schemaPath:[..._params.schemaPath,schema],path:_params.path});const parent=schema._zod.parent;if(parent){// schema was cloned from another schema
result.ref=parent;this.process(parent,params);this.seen.get(parent).isParent=true;}else{const _json=result.schema;switch(def.type){case"string":{const json=_json;json.type="string";const{minimum,maximum,format,patterns,contentEncoding}=schema._zod.bag;if(typeof minimum==="number")json.minLength=minimum;if(typeof maximum==="number")json.maxLength=maximum;// custom pattern overrides format
if(format){var _formatMap$format;json.format=(_formatMap$format=formatMap[format])!==null&&_formatMap$format!==void 0?_formatMap$format:format;if(json.format==="")delete json.format;// empty format is not valid
}if(contentEncoding)json.contentEncoding=contentEncoding;if(patterns&&patterns.size>0){const regexes=[...patterns];if(regexes.length===1)json.pattern=regexes[0].source;else if(regexes.length>1){result.schema.allOf=[...regexes.map(regex=>_objectSpread2(_objectSpread2({},this.target==="draft-7"?{type:"string"}:{}),{},{pattern:regex.source}))];}}break;}case"number":{const json=_json;const{minimum,maximum,format,multipleOf,exclusiveMaximum,exclusiveMinimum}=schema._zod.bag;if(typeof format==="string"&&format.includes("int"))json.type="integer";else json.type="number";if(typeof exclusiveMinimum==="number")json.exclusiveMinimum=exclusiveMinimum;if(typeof minimum==="number"){json.minimum=minimum;if(typeof exclusiveMinimum==="number"){if(exclusiveMinimum>=minimum)delete json.minimum;else delete json.exclusiveMinimum;}}if(typeof exclusiveMaximum==="number")json.exclusiveMaximum=exclusiveMaximum;if(typeof maximum==="number"){json.maximum=maximum;if(typeof exclusiveMaximum==="number"){if(exclusiveMaximum<=maximum)delete json.maximum;else delete json.exclusiveMaximum;}}if(typeof multipleOf==="number")json.multipleOf=multipleOf;break;}case"boolean":{const json=_json;json.type="boolean";break;}case"bigint":{if(this.unrepresentable==="throw"){throw new Error("BigInt cannot be represented in JSON Schema");}break;}case"symbol":{if(this.unrepresentable==="throw"){throw new Error("Symbols cannot be represented in JSON Schema");}break;}case"null":{_json.type="null";break;}case"any":{break;}case"unknown":{break;}case"undefined":{if(this.unrepresentable==="throw"){throw new Error("Undefined cannot be represented in JSON Schema");}break;}case"void":{if(this.unrepresentable==="throw"){throw new Error("Void cannot be represented in JSON Schema");}break;}case"never":{_json.not={};break;}case"date":{if(this.unrepresentable==="throw"){throw new Error("Date cannot be represented in JSON Schema");}break;}case"array":{const json=_json;const{minimum,maximum}=schema._zod.bag;if(typeof minimum==="number")json.minItems=minimum;if(typeof maximum==="number")json.maxItems=maximum;json.type="array";json.items=this.process(def.element,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"items"]}));break;}case"object":{var _def$catchall;const json=_json;json.type="object";json.properties={};const shape=def.shape;// params.shapeCache.get(schema)!;
for(const key in shape){json.properties[key]=this.process(shape[key],_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"properties",key]}));}// required keys
const allKeys=new Set(Object.keys(shape));// const optionalKeys = new Set(def.optional);
const requiredKeys=new Set([...allKeys].filter(key=>{const v=def.shape[key]._zod;if(this.io==="input"){return v.optin===undefined;}else{return v.optout===undefined;}}));if(requiredKeys.size>0){json.required=Array.from(requiredKeys);}// catchall
if(((_def$catchall=def.catchall)===null||_def$catchall===void 0?void 0:_def$catchall._zod.def.type)==="never"){// strict
json.additionalProperties=false;}else if(!def.catchall){// regular
if(this.io==="output")json.additionalProperties=false;}else if(def.catchall){json.additionalProperties=this.process(def.catchall,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"additionalProperties"]}));}break;}case"union":{const json=_json;json.anyOf=def.options.map((x,i)=>this.process(x,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"anyOf",i]})));break;}case"intersection":{const json=_json;const a=this.process(def.left,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"allOf",0]}));const b=this.process(def.right,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"allOf",1]}));const isSimpleIntersection=val=>"allOf"in val&&Object.keys(val).length===1;const allOf=[...(isSimpleIntersection(a)?a.allOf:[a]),...(isSimpleIntersection(b)?b.allOf:[b])];json.allOf=allOf;break;}case"tuple":{const json=_json;json.type="array";const prefixItems=def.items.map((x,i)=>this.process(x,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"prefixItems",i]})));if(this.target==="draft-2020-12"){json.prefixItems=prefixItems;}else{json.items=prefixItems;}if(def.rest){const rest=this.process(def.rest,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"items"]}));if(this.target==="draft-2020-12"){json.items=rest;}else{json.additionalItems=rest;}}// additionalItems
if(def.rest){json.items=this.process(def.rest,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"items"]}));}// length
const{minimum,maximum}=schema._zod.bag;if(typeof minimum==="number")json.minItems=minimum;if(typeof maximum==="number")json.maxItems=maximum;break;}case"record":{const json=_json;json.type="object";json.propertyNames=this.process(def.keyType,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"propertyNames"]}));json.additionalProperties=this.process(def.valueType,_objectSpread2(_objectSpread2({},params),{},{path:[...params.path,"additionalProperties"]}));break;}case"map":{if(this.unrepresentable==="throw"){throw new Error("Map cannot be represented in JSON Schema");}break;}case"set":{if(this.unrepresentable==="throw"){throw new Error("Set cannot be represented in JSON Schema");}break;}case"enum":{const json=_json;const values=getEnumValues(def.entries);// Number enums can have both string and number values
if(values.every(v=>typeof v==="number"))json.type="number";if(values.every(v=>typeof v==="string"))json.type="string";json.enum=values;break;}case"literal":{const json=_json;const vals=[];for(const val of def.values){if(val===undefined){if(this.unrepresentable==="throw"){throw new Error("Literal `undefined` cannot be represented in JSON Schema");}}else if(typeof val==="bigint"){if(this.unrepresentable==="throw"){throw new Error("BigInt literals cannot be represented in JSON Schema");}else{vals.push(Number(val));}}else{vals.push(val);}}if(vals.length===0);else if(vals.length===1){const val=vals[0];json.type=val===null?"null":typeof val;json.const=val;}else{if(vals.every(v=>typeof v==="number"))json.type="number";if(vals.every(v=>typeof v==="string"))json.type="string";if(vals.every(v=>typeof v==="boolean"))json.type="string";if(vals.every(v=>v===null))json.type="null";json.enum=vals;}break;}case"file":{const json=_json;const file={type:"string",format:"binary",contentEncoding:"binary"};const{minimum,maximum,mime}=schema._zod.bag;if(minimum!==undefined)file.minLength=minimum;if(maximum!==undefined)file.maxLength=maximum;if(mime){if(mime.length===1){file.contentMediaType=mime[0];Object.assign(json,file);}else{json.anyOf=mime.map(m=>{const mFile=_objectSpread2(_objectSpread2({},file),{},{contentMediaType:m});return mFile;});}}else{Object.assign(json,file);}// if (this.unrepresentable === "throw") {
//   throw new Error("File cannot be represented in JSON Schema");
// }
break;}case"transform":{if(this.unrepresentable==="throw"){throw new Error("Transforms cannot be represented in JSON Schema");}break;}case"nullable":{const inner=this.process(def.innerType,params);_json.anyOf=[inner,{type:"null"}];break;}case"nonoptional":{this.process(def.innerType,params);result.ref=def.innerType;break;}case"success":{const json=_json;json.type="boolean";break;}case"default":{this.process(def.innerType,params);result.ref=def.innerType;_json.default=JSON.parse(JSON.stringify(def.defaultValue));break;}case"prefault":{this.process(def.innerType,params);result.ref=def.innerType;if(this.io==="input")_json._prefault=JSON.parse(JSON.stringify(def.defaultValue));break;}case"catch":{// use conditionals
this.process(def.innerType,params);result.ref=def.innerType;let catchValue;try{catchValue=def.catchValue(undefined);}catch(_unused5){throw new Error("Dynamic catch values are not supported in JSON Schema");}_json.default=catchValue;break;}case"nan":{if(this.unrepresentable==="throw"){throw new Error("NaN cannot be represented in JSON Schema");}break;}case"template_literal":{const json=_json;const pattern=schema._zod.pattern;if(!pattern)throw new Error("Pattern not found in template literal");json.type="string";json.pattern=pattern.source;break;}case"pipe":{const innerType=this.io==="input"?def.in._zod.def.type==="transform"?def.out:def.in:def.out;this.process(innerType,params);result.ref=innerType;break;}case"readonly":{this.process(def.innerType,params);result.ref=def.innerType;_json.readOnly=true;break;}// passthrough types
case"promise":{this.process(def.innerType,params);result.ref=def.innerType;break;}case"optional":{this.process(def.innerType,params);result.ref=def.innerType;break;}case"lazy":{const innerType=schema._zod.innerType;this.process(innerType,params);result.ref=innerType;break;}case"custom":{if(this.unrepresentable==="throw"){throw new Error("Custom types cannot be represented in JSON Schema");}break;}}}}// metadata
const meta=this.metadataRegistry.get(schema);if(meta)Object.assign(result.schema,meta);if(this.io==="input"&&isTransforming(schema)){// examples/defaults only apply to output type of pipe
delete result.schema.examples;delete result.schema.default;}// set prefault as default
if(this.io==="input"&&result.schema._prefault)(_a$default=(_a=result.schema).default)!==null&&_a$default!==void 0?_a$default:_a.default=result.schema._prefault;delete result.schema._prefault;// pulling fresh from this.seen in case it was overwritten
const _result=this.seen.get(schema);return _result.schema;}emit(schema,_params){var _params$cycles,_params$reused,_params$external,_params$external2,_params$external$defs,_params$external3;const params={cycles:(_params$cycles=_params===null||_params===void 0?void 0:_params.cycles)!==null&&_params$cycles!==void 0?_params$cycles:"ref",reused:(_params$reused=_params===null||_params===void 0?void 0:_params.reused)!==null&&_params$reused!==void 0?_params$reused:"inline",// unrepresentable: _params?.unrepresentable ?? "throw",
// uri: _params?.uri ?? ((id) => `${id}`),
external:(_params$external=_params===null||_params===void 0?void 0:_params.external)!==null&&_params$external!==void 0?_params$external:undefined};// iterate over seen map;
const root=this.seen.get(schema);if(!root)throw new Error("Unprocessed schema. This is a bug in Zod.");// initialize result with root schema fields
// Object.assign(result, seen.cached);
// returns a ref to the schema
// defId will be empty if the ref points to an external schema (or #)
const makeURI=entry=>{var _entry$1$schema$id;// comparing the seen objects because sometimes
// multiple schemas map to the same seen object.
// e.g. lazy
// external is configured
const defsSegment=this.target==="draft-2020-12"?"$defs":"definitions";if(params.external){var _params$external$regi,_params$external$uri,_ref30,_entry$1$defId;const externalId=(_params$external$regi=params.external.registry.get(entry[0]))===null||_params$external$regi===void 0?void 0:_params$external$regi.id;// ?? "__shared";// `__schema${this.counter++}`;
// check if schema is in the external registry
const uriGenerator=(_params$external$uri=params.external.uri)!==null&&_params$external$uri!==void 0?_params$external$uri:id=>id;if(externalId){return{ref:uriGenerator(externalId)};}// otherwise, add to __shared
const id=(_ref30=(_entry$1$defId=entry[1].defId)!==null&&_entry$1$defId!==void 0?_entry$1$defId:entry[1].schema.id)!==null&&_ref30!==void 0?_ref30:"schema".concat(this.counter++);entry[1].defId=id;// set defId so it will be reused if needed
return{defId:id,ref:"".concat(uriGenerator("__shared"),"#/").concat(defsSegment,"/").concat(id)};}if(entry[1]===root){return{ref:"#"};}// self-contained schema
const uriPrefix="#";const defUriPrefix="".concat(uriPrefix,"/").concat(defsSegment,"/");const defId=(_entry$1$schema$id=entry[1].schema.id)!==null&&_entry$1$schema$id!==void 0?_entry$1$schema$id:"__schema".concat(this.counter++);return{defId,ref:defUriPrefix+defId};};// stored cached version in `def` property
// remove all properties, set $ref
const extractToDef=entry=>{// if the schema is already a reference, do not extract it
if(entry[1].schema.$ref){return;}const seen=entry[1];const{ref,defId}=makeURI(entry);seen.def=_objectSpread2({},seen.schema);// defId won't be set if the schema is a reference to an external schema
if(defId)seen.defId=defId;// wipe away all properties except $ref
const schema=seen.schema;for(const key in schema){delete schema[key];}schema.$ref=ref;};// throw on cycles
// break cycles
if(params.cycles==="throw"){for(const entry of this.seen.entries()){const seen=entry[1];if(seen.cycle){var _seen$cycle;throw new Error("Cycle detected: "+"#/".concat((_seen$cycle=seen.cycle)===null||_seen$cycle===void 0?void 0:_seen$cycle.join("/"),"/<root>")+'\n\nSet the `cycles` parameter to `"ref"` to resolve cyclical schemas with defs.');}}}// extract schemas into $defs
for(const entry of this.seen.entries()){var _this$metadataRegistr;const seen=entry[1];// convert root schema to # $ref
if(schema===entry[0]){extractToDef(entry);// this has special handling for the root schema
continue;}// extract schemas that are in the external registry
if(params.external){var _params$external$regi2;const ext=(_params$external$regi2=params.external.registry.get(entry[0]))===null||_params$external$regi2===void 0?void 0:_params$external$regi2.id;if(schema!==entry[0]&&ext){extractToDef(entry);continue;}}// extract schemas with `id` meta
const id=(_this$metadataRegistr=this.metadataRegistry.get(entry[0]))===null||_this$metadataRegistr===void 0?void 0:_this$metadataRegistr.id;if(id){extractToDef(entry);continue;}// break cycles
if(seen.cycle){// any
extractToDef(entry);continue;}// extract reused schemas
if(seen.count>1){if(params.reused==="ref"){extractToDef(entry);// biome-ignore lint:
continue;}}}// flatten _refs
const flattenRef=(zodSchema,params)=>{var _seen$def,_seen$path;const seen=this.seen.get(zodSchema);const schema=(_seen$def=seen.def)!==null&&_seen$def!==void 0?_seen$def:seen.schema;const _cached=_objectSpread2({},schema);// already seen
if(seen.ref===null){return;}// flatten ref if defined
const ref=seen.ref;seen.ref=null;// prevent recursion
if(ref){flattenRef(ref,params);// merge referenced schema into current
const refSchema=this.seen.get(ref).schema;if(refSchema.$ref&&params.target==="draft-7"){var _schema$allOf;schema.allOf=(_schema$allOf=schema.allOf)!==null&&_schema$allOf!==void 0?_schema$allOf:[];schema.allOf.push(refSchema);}else{Object.assign(schema,refSchema);Object.assign(schema,_cached);// prevent overwriting any fields in the original schema
}}// execute overrides
if(!seen.isParent)this.override({zodSchema:zodSchema,jsonSchema:schema,path:(_seen$path=seen.path)!==null&&_seen$path!==void 0?_seen$path:[]});};for(const entry of[...this.seen.entries()].reverse()){flattenRef(entry[0],{target:this.target});}const result={};if(this.target==="draft-2020-12"){result.$schema="https://json-schema.org/draft/2020-12/schema";}else if(this.target==="draft-7"){result.$schema="http://json-schema.org/draft-07/schema#";}else{console.warn("Invalid target: ".concat(this.target));}if((_params$external2=params.external)!==null&&_params$external2!==void 0&&_params$external2.uri){var _params$external$regi3;const id=(_params$external$regi3=params.external.registry.get(schema))===null||_params$external$regi3===void 0?void 0:_params$external$regi3.id;if(!id)throw new Error("Schema is missing an `id` property");result.$id=params.external.uri(id);}Object.assign(result,root.def);// build defs object
const defs=(_params$external$defs=(_params$external3=params.external)===null||_params$external3===void 0?void 0:_params$external3.defs)!==null&&_params$external$defs!==void 0?_params$external$defs:{};for(const entry of this.seen.entries()){const seen=entry[1];if(seen.def&&seen.defId){defs[seen.defId]=seen.def;}}// set definitions in result
if(params.external);else{if(Object.keys(defs).length>0){if(this.target==="draft-2020-12"){result.$defs=defs;}else{result.definitions=defs;}}}try{// this "finalizes" this schema and ensures all cycles are removed
// each call to .emit() is functionally independent
// though the seen map is shared
return JSON.parse(JSON.stringify(result));}catch(_err){throw new Error("Error converting schema to JSON.");}}}function toJSONSchema(input,_params){if(input instanceof $ZodRegistry){const gen=new JSONSchemaGenerator(_params);const defs={};for(const entry of input._idmap.entries()){const[_,schema]=entry;gen.process(schema);}const schemas={};const external={registry:input,uri:_params===null||_params===void 0?void 0:_params.uri,defs};for(const entry of input._idmap.entries()){const[key,schema]=entry;schemas[key]=gen.emit(schema,_objectSpread2(_objectSpread2({},_params),{},{external}));}if(Object.keys(defs).length>0){const defsSegment=gen.target==="draft-2020-12"?"$defs":"definitions";schemas.__shared={[defsSegment]:defs};}return{schemas};}const gen=new JSONSchemaGenerator(_params);gen.process(input);return gen.emit(input,_params);}function isTransforming(_schema,_ctx){const ctx=_ctx!==null&&_ctx!==void 0?_ctx:{seen:new Set()};if(ctx.seen.has(_schema))return false;ctx.seen.add(_schema);const schema=_schema;const def=schema._zod.def;switch(def.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return false;case"array":{return isTransforming(def.element,ctx);}case"object":{for(const key in def.shape){if(isTransforming(def.shape[key],ctx))return true;}return false;}case"union":{for(const option of def.options){if(isTransforming(option,ctx))return true;}return false;}case"intersection":{return isTransforming(def.left,ctx)||isTransforming(def.right,ctx);}case"tuple":{for(const item of def.items){if(isTransforming(item,ctx))return true;}if(def.rest&&isTransforming(def.rest,ctx))return true;return false;}case"record":{return isTransforming(def.keyType,ctx)||isTransforming(def.valueType,ctx);}case"map":{return isTransforming(def.keyType,ctx)||isTransforming(def.valueType,ctx);}case"set":{return isTransforming(def.valueType,ctx);}// inner types
case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return isTransforming(def.innerType,ctx);case"lazy":return isTransforming(def.getter(),ctx);case"default":{return isTransforming(def.innerType,ctx);}case"prefault":{return isTransforming(def.innerType,ctx);}case"custom":{return false;}case"transform":{return true;}case"pipe":{return isTransforming(def.in,ctx)||isTransforming(def.out,ctx);}case"success":{return false;}case"catch":{return false;}}throw new Error("Unknown schema type: ".concat(def.type));}var jsonSchema$1=/*#__PURE__*/Object.freeze({__proto__:null});var index=/*#__PURE__*/Object.freeze({__proto__:null,$ZodAny:$ZodAny,$ZodArray:$ZodArray,$ZodAsyncError:$ZodAsyncError,$ZodBase64:$ZodBase64,$ZodBase64URL:$ZodBase64URL,$ZodBigInt:$ZodBigInt,$ZodBigIntFormat:$ZodBigIntFormat,$ZodBoolean:$ZodBoolean,$ZodCIDRv4:$ZodCIDRv4,$ZodCIDRv6:$ZodCIDRv6,$ZodCUID:$ZodCUID,$ZodCUID2:$ZodCUID2,$ZodCatch:$ZodCatch,$ZodCheck:$ZodCheck,$ZodCheckBigIntFormat:$ZodCheckBigIntFormat,$ZodCheckEndsWith:$ZodCheckEndsWith,$ZodCheckGreaterThan:$ZodCheckGreaterThan,$ZodCheckIncludes:$ZodCheckIncludes,$ZodCheckLengthEquals:$ZodCheckLengthEquals,$ZodCheckLessThan:$ZodCheckLessThan,$ZodCheckLowerCase:$ZodCheckLowerCase,$ZodCheckMaxLength:$ZodCheckMaxLength,$ZodCheckMaxSize:$ZodCheckMaxSize,$ZodCheckMimeType:$ZodCheckMimeType,$ZodCheckMinLength:$ZodCheckMinLength,$ZodCheckMinSize:$ZodCheckMinSize,$ZodCheckMultipleOf:$ZodCheckMultipleOf,$ZodCheckNumberFormat:$ZodCheckNumberFormat,$ZodCheckOverwrite:$ZodCheckOverwrite,$ZodCheckProperty:$ZodCheckProperty,$ZodCheckRegex:$ZodCheckRegex,$ZodCheckSizeEquals:$ZodCheckSizeEquals,$ZodCheckStartsWith:$ZodCheckStartsWith,$ZodCheckStringFormat:$ZodCheckStringFormat,$ZodCheckUpperCase:$ZodCheckUpperCase,$ZodCustom:$ZodCustom,$ZodCustomStringFormat:$ZodCustomStringFormat,$ZodDate:$ZodDate,$ZodDefault:$ZodDefault,$ZodDiscriminatedUnion:$ZodDiscriminatedUnion,$ZodE164:$ZodE164,$ZodEmail:$ZodEmail,$ZodEmoji:$ZodEmoji,$ZodEnum:$ZodEnum,$ZodError:$ZodError,$ZodFile:$ZodFile,$ZodFunction:$ZodFunction,$ZodGUID:$ZodGUID,$ZodIPv4:$ZodIPv4,$ZodIPv6:$ZodIPv6,$ZodISODate:$ZodISODate,$ZodISODateTime:$ZodISODateTime,$ZodISODuration:$ZodISODuration,$ZodISOTime:$ZodISOTime,$ZodIntersection:$ZodIntersection,$ZodJWT:$ZodJWT,$ZodKSUID:$ZodKSUID,$ZodLazy:$ZodLazy,$ZodLiteral:$ZodLiteral,$ZodMap:$ZodMap,$ZodNaN:$ZodNaN,$ZodNanoID:$ZodNanoID,$ZodNever:$ZodNever,$ZodNonOptional:$ZodNonOptional,$ZodNull:$ZodNull,$ZodNullable:$ZodNullable,$ZodNumber:$ZodNumber,$ZodNumberFormat:$ZodNumberFormat,$ZodObject:$ZodObject,$ZodOptional:$ZodOptional,$ZodPipe:$ZodPipe,$ZodPrefault:$ZodPrefault,$ZodPromise:$ZodPromise,$ZodReadonly:$ZodReadonly,$ZodRealError:$ZodRealError,$ZodRecord:$ZodRecord,$ZodRegistry:$ZodRegistry,$ZodSet:$ZodSet,$ZodString:$ZodString,$ZodStringFormat:$ZodStringFormat,$ZodSuccess:$ZodSuccess,$ZodSymbol:$ZodSymbol,$ZodTemplateLiteral:$ZodTemplateLiteral,$ZodTransform:$ZodTransform,$ZodTuple:$ZodTuple,$ZodType:$ZodType,$ZodULID:$ZodULID,$ZodURL:$ZodURL,$ZodUUID:$ZodUUID,$ZodUndefined:$ZodUndefined,$ZodUnion:$ZodUnion,$ZodUnknown:$ZodUnknown,$ZodVoid:$ZodVoid,$ZodXID:$ZodXID,$brand:$brand,$constructor:$constructor,$input:$input,$output:$output,Doc:Doc,JSONSchema:jsonSchema$1,JSONSchemaGenerator:JSONSchemaGenerator,NEVER:NEVER,TimePrecision:TimePrecision,_any:_any,_array:_array,_base64:_base64,_base64url:_base64url,_bigint:_bigint,_boolean:_boolean,_catch:_catch$1,_cidrv4:_cidrv4,_cidrv6:_cidrv6,_coercedBigint:_coercedBigint,_coercedBoolean:_coercedBoolean,_coercedDate:_coercedDate,_coercedNumber:_coercedNumber,_coercedString:_coercedString,_cuid:_cuid,_cuid2:_cuid2,_custom:_custom,_date:_date,_default:_default$1,_discriminatedUnion:_discriminatedUnion,_e164:_e164,_email:_email,_emoji:_emoji,_endsWith:_endsWith,_enum:_enum$1,_file:_file,_float32:_float32,_float64:_float64,_gt:_gt,_gte:_gte,_guid:_guid,_includes:_includes,_int:_int,_int32:_int32,_int64:_int64,_intersection:_intersection,_ipv4:_ipv4,_ipv6:_ipv6,_isoDate:_isoDate,_isoDateTime:_isoDateTime,_isoDuration:_isoDuration,_isoTime:_isoTime,_jwt:_jwt,_ksuid:_ksuid,_lazy:_lazy,_length:_length,_literal:_literal,_lowercase:_lowercase,_lt:_lt,_lte:_lte,_map:_map,_max:_lte,_maxLength:_maxLength,_maxSize:_maxSize,_mime:_mime,_min:_gte,_minLength:_minLength,_minSize:_minSize,_multipleOf:_multipleOf,_nan:_nan,_nanoid:_nanoid,_nativeEnum:_nativeEnum,_negative:_negative,_never:_never,_nonnegative:_nonnegative,_nonoptional:_nonoptional,_nonpositive:_nonpositive,_normalize:_normalize,_null:_null$1,_nullable:_nullable,_number:_number,_optional:_optional,_overwrite:_overwrite,_parse:_parse$1,_parseAsync:_parseAsync,_pipe:_pipe,_positive:_positive,_promise:_promise,_property:_property,_readonly:_readonly,_record:_record,_refine:_refine,_regex:_regex,_safeParse:_safeParse,_safeParseAsync:_safeParseAsync,_set:_set,_size:_size,_startsWith:_startsWith,_string:_string,_stringFormat:_stringFormat,_stringbool:_stringbool,_success:_success,_symbol:_symbol,_templateLiteral:_templateLiteral,_toLowerCase:_toLowerCase,_toUpperCase:_toUpperCase,_transform:_transform,_trim:_trim,_tuple:_tuple,_uint32:_uint32,_uint64:_uint64,_ulid:_ulid,_undefined:_undefined$1,_union:_union,_unknown:_unknown,_uppercase:_uppercase,_url:_url,_uuid:_uuid,_uuidv4:_uuidv4,_uuidv6:_uuidv6,_uuidv7:_uuidv7,_void:_void$1,_xid:_xid,clone:clone,config:config,flattenError:flattenError,formatError:formatError,function:_function,globalConfig:globalConfig,globalRegistry:globalRegistry,isValidBase64:isValidBase64,isValidBase64URL:isValidBase64URL,isValidJWT:isValidJWT,locales:index$1,parse:parse$1,parseAsync:parseAsync$1,prettifyError:prettifyError,regexes:regexes,registry:registry,safeParse:safeParse$1,safeParseAsync:safeParseAsync$1,toDotPath:toDotPath,toJSONSchema:toJSONSchema,treeifyError:treeifyError,util:util,version:version});const ZodISODateTime=/*@__PURE__*/$constructor("ZodISODateTime",(inst,def)=>{$ZodISODateTime.init(inst,def);ZodStringFormat.init(inst,def);});function datetime(params){return _isoDateTime(ZodISODateTime,params);}const ZodISODate=/*@__PURE__*/$constructor("ZodISODate",(inst,def)=>{$ZodISODate.init(inst,def);ZodStringFormat.init(inst,def);});function date$2(params){return _isoDate(ZodISODate,params);}const ZodISOTime=/*@__PURE__*/$constructor("ZodISOTime",(inst,def)=>{$ZodISOTime.init(inst,def);ZodStringFormat.init(inst,def);});function time(params){return _isoTime(ZodISOTime,params);}const ZodISODuration=/*@__PURE__*/$constructor("ZodISODuration",(inst,def)=>{$ZodISODuration.init(inst,def);ZodStringFormat.init(inst,def);});function duration(params){return _isoDuration(ZodISODuration,params);}var iso=/*#__PURE__*/Object.freeze({__proto__:null,ZodISODate:ZodISODate,ZodISODateTime:ZodISODateTime,ZodISODuration:ZodISODuration,ZodISOTime:ZodISOTime,date:date$2,datetime:datetime,duration:duration,time:time});const initializer=(inst,issues)=>{$ZodError.init(inst,issues);inst.name="ZodError";Object.defineProperties(inst,{format:{value:mapper=>formatError(inst,mapper)// enumerable: false,
},flatten:{value:mapper=>flattenError(inst,mapper)// enumerable: false,
},addIssue:{value:issue=>inst.issues.push(issue)// enumerable: false,
},addIssues:{value:issues=>inst.issues.push(...issues)// enumerable: false,
},isEmpty:{get(){return inst.issues.length===0;}// enumerable: false,
}});// Object.defineProperty(inst, "isEmpty", {
//   get() {
//     return inst.issues.length === 0;
//   },
// });
};const ZodError=$constructor("ZodError",initializer);const ZodRealError=$constructor("ZodError",initializer,{Parent:Error});// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */
// export type ErrorMapCtx = core.$ZodErrorMapCtx;
const parse=/* @__PURE__ */_parse$1(ZodRealError);const parseAsync=/* @__PURE__ */_parseAsync(ZodRealError);const safeParse=/* @__PURE__ */_safeParse(ZodRealError);const safeParseAsync=/* @__PURE__ */_safeParseAsync(ZodRealError);const ZodType=/*@__PURE__*/$constructor("ZodType",(inst,def)=>{$ZodType.init(inst,def);inst.def=def;Object.defineProperty(inst,"_def",{value:def});// base methods
inst.check=function(){var _def$checks;for(var _len4=arguments.length,checks=new Array(_len4),_key5=0;_key5<_len4;_key5++){checks[_key5]=arguments[_key5];}return inst.clone(_objectSpread2(_objectSpread2({},def),{},{checks:[...((_def$checks=def.checks)!==null&&_def$checks!==void 0?_def$checks:[]),...checks.map(ch=>typeof ch==="function"?{_zod:{check:ch,def:{check:"custom"},onattach:[]}}:ch)]})// { parent: true }
);};inst.clone=(def,params)=>clone(inst,def,params);inst.brand=()=>inst;inst.register=(reg,meta)=>{reg.add(inst,meta);return inst;};// parsing
inst.parse=(data,params)=>parse(inst,data,params,{callee:inst.parse});inst.safeParse=(data,params)=>safeParse(inst,data,params);inst.parseAsync=/*#__PURE__*/function(){var _ref31=_asyncToGenerator2(function*(data,params){return parseAsync(inst,data,params,{callee:inst.parseAsync});});return function(_x15,_x16){return _ref31.apply(this,arguments);};}();inst.safeParseAsync=/*#__PURE__*/function(){var _ref32=_asyncToGenerator2(function*(data,params){return safeParseAsync(inst,data,params);});return function(_x17,_x18){return _ref32.apply(this,arguments);};}();inst.spa=inst.safeParseAsync;// refinements
inst.refine=(check,params)=>inst.check(refine(check,params));inst.superRefine=refinement=>inst.check(superRefine(refinement));inst.overwrite=fn=>inst.check(_overwrite(fn));// wrappers
inst.optional=()=>optional(inst);inst.nullable=()=>nullable(inst);inst.nullish=()=>optional(nullable(inst));inst.nonoptional=params=>nonoptional(inst,params);inst.array=()=>array(inst);inst.or=arg=>union([inst,arg]);inst.and=arg=>intersection(inst,arg);inst.transform=tx=>pipe(inst,transform(tx));inst.default=def=>_default(inst,def);inst.prefault=def=>prefault(inst,def);// inst.coalesce = (def, params) => coalesce(inst, def, params);
inst.catch=params=>_catch(inst,params);inst.pipe=target=>pipe(inst,target);inst.readonly=()=>readonly(inst);// meta
inst.describe=description=>{const cl=inst.clone();globalRegistry.add(cl,{description});return cl;};Object.defineProperty(inst,"description",{get(){var _globalRegistry$get;return(_globalRegistry$get=globalRegistry.get(inst))===null||_globalRegistry$get===void 0?void 0:_globalRegistry$get.description;},configurable:true});inst.meta=function(){if(arguments.length===0){return globalRegistry.get(inst);}const cl=inst.clone();globalRegistry.add(cl,arguments.length<=0?undefined:arguments[0]);return cl;};// helpers
inst.isOptional=()=>inst.safeParse(undefined).success;inst.isNullable=()=>inst.safeParse(null).success;return inst;});/** @internal */const _ZodString=/*@__PURE__*/$constructor("_ZodString",(inst,def)=>{var _bag$format,_bag$minimum,_bag$maximum;$ZodString.init(inst,def);ZodType.init(inst,def);const bag=inst._zod.bag;inst.format=(_bag$format=bag.format)!==null&&_bag$format!==void 0?_bag$format:null;inst.minLength=(_bag$minimum=bag.minimum)!==null&&_bag$minimum!==void 0?_bag$minimum:null;inst.maxLength=(_bag$maximum=bag.maximum)!==null&&_bag$maximum!==void 0?_bag$maximum:null;// validations
inst.regex=function(){return inst.check(_regex(...arguments));};inst.includes=function(){return inst.check(_includes(...arguments));};inst.startsWith=function(){return inst.check(_startsWith(...arguments));};inst.endsWith=function(){return inst.check(_endsWith(...arguments));};inst.min=function(){return inst.check(_minLength(...arguments));};inst.max=function(){return inst.check(_maxLength(...arguments));};inst.length=function(){return inst.check(_length(...arguments));};inst.nonempty=function(){for(var _len5=arguments.length,args=new Array(_len5),_key6=0;_key6<_len5;_key6++){args[_key6]=arguments[_key6];}return inst.check(_minLength(1,...args));};inst.lowercase=params=>inst.check(_lowercase(params));inst.uppercase=params=>inst.check(_uppercase(params));// transforms
inst.trim=()=>inst.check(_trim());inst.normalize=function(){return inst.check(_normalize(...arguments));};inst.toLowerCase=()=>inst.check(_toLowerCase());inst.toUpperCase=()=>inst.check(_toUpperCase());});const ZodString=/*@__PURE__*/$constructor("ZodString",(inst,def)=>{$ZodString.init(inst,def);_ZodString.init(inst,def);inst.email=params=>inst.check(_email(ZodEmail,params));inst.url=params=>inst.check(_url(ZodURL,params));inst.jwt=params=>inst.check(_jwt(ZodJWT,params));inst.emoji=params=>inst.check(_emoji(ZodEmoji,params));inst.guid=params=>inst.check(_guid(ZodGUID,params));inst.uuid=params=>inst.check(_uuid(ZodUUID,params));inst.uuidv4=params=>inst.check(_uuidv4(ZodUUID,params));inst.uuidv6=params=>inst.check(_uuidv6(ZodUUID,params));inst.uuidv7=params=>inst.check(_uuidv7(ZodUUID,params));inst.nanoid=params=>inst.check(_nanoid(ZodNanoID,params));inst.guid=params=>inst.check(_guid(ZodGUID,params));inst.cuid=params=>inst.check(_cuid(ZodCUID,params));inst.cuid2=params=>inst.check(_cuid2(ZodCUID2,params));inst.ulid=params=>inst.check(_ulid(ZodULID,params));inst.base64=params=>inst.check(_base64(ZodBase64,params));inst.base64url=params=>inst.check(_base64url(ZodBase64URL,params));inst.xid=params=>inst.check(_xid(ZodXID,params));inst.ksuid=params=>inst.check(_ksuid(ZodKSUID,params));inst.ipv4=params=>inst.check(_ipv4(ZodIPv4,params));inst.ipv6=params=>inst.check(_ipv6(ZodIPv6,params));inst.cidrv4=params=>inst.check(_cidrv4(ZodCIDRv4,params));inst.cidrv6=params=>inst.check(_cidrv6(ZodCIDRv6,params));inst.e164=params=>inst.check(_e164(ZodE164,params));// iso
inst.datetime=params=>inst.check(datetime(params));inst.date=params=>inst.check(date$2(params));inst.time=params=>inst.check(time(params));inst.duration=params=>inst.check(duration(params));});function string$1(params){return _string(ZodString,params);}const ZodStringFormat=/*@__PURE__*/$constructor("ZodStringFormat",(inst,def)=>{$ZodStringFormat.init(inst,def);_ZodString.init(inst,def);});const ZodEmail=/*@__PURE__*/$constructor("ZodEmail",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodEmail.init(inst,def);ZodStringFormat.init(inst,def);});function email(params){return _email(ZodEmail,params);}const ZodGUID=/*@__PURE__*/$constructor("ZodGUID",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodGUID.init(inst,def);ZodStringFormat.init(inst,def);});function guid(params){return _guid(ZodGUID,params);}const ZodUUID=/*@__PURE__*/$constructor("ZodUUID",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodUUID.init(inst,def);ZodStringFormat.init(inst,def);});function uuid(params){return _uuid(ZodUUID,params);}function uuidv4(params){return _uuidv4(ZodUUID,params);}// ZodUUIDv6
function uuidv6(params){return _uuidv6(ZodUUID,params);}// ZodUUIDv7
function uuidv7(params){return _uuidv7(ZodUUID,params);}const ZodURL=/*@__PURE__*/$constructor("ZodURL",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodURL.init(inst,def);ZodStringFormat.init(inst,def);});function url(params){return _url(ZodURL,params);}const ZodEmoji=/*@__PURE__*/$constructor("ZodEmoji",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodEmoji.init(inst,def);ZodStringFormat.init(inst,def);});function emoji(params){return _emoji(ZodEmoji,params);}const ZodNanoID=/*@__PURE__*/$constructor("ZodNanoID",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodNanoID.init(inst,def);ZodStringFormat.init(inst,def);});function nanoid(params){return _nanoid(ZodNanoID,params);}const ZodCUID=/*@__PURE__*/$constructor("ZodCUID",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodCUID.init(inst,def);ZodStringFormat.init(inst,def);});function cuid(params){return _cuid(ZodCUID,params);}const ZodCUID2=/*@__PURE__*/$constructor("ZodCUID2",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodCUID2.init(inst,def);ZodStringFormat.init(inst,def);});function cuid2(params){return _cuid2(ZodCUID2,params);}const ZodULID=/*@__PURE__*/$constructor("ZodULID",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodULID.init(inst,def);ZodStringFormat.init(inst,def);});function ulid(params){return _ulid(ZodULID,params);}const ZodXID=/*@__PURE__*/$constructor("ZodXID",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodXID.init(inst,def);ZodStringFormat.init(inst,def);});function xid(params){return _xid(ZodXID,params);}const ZodKSUID=/*@__PURE__*/$constructor("ZodKSUID",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodKSUID.init(inst,def);ZodStringFormat.init(inst,def);});function ksuid(params){return _ksuid(ZodKSUID,params);}const ZodIPv4=/*@__PURE__*/$constructor("ZodIPv4",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodIPv4.init(inst,def);ZodStringFormat.init(inst,def);});function ipv4(params){return _ipv4(ZodIPv4,params);}const ZodIPv6=/*@__PURE__*/$constructor("ZodIPv6",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodIPv6.init(inst,def);ZodStringFormat.init(inst,def);});function ipv6(params){return _ipv6(ZodIPv6,params);}const ZodCIDRv4=/*@__PURE__*/$constructor("ZodCIDRv4",(inst,def)=>{$ZodCIDRv4.init(inst,def);ZodStringFormat.init(inst,def);});function cidrv4(params){return _cidrv4(ZodCIDRv4,params);}const ZodCIDRv6=/*@__PURE__*/$constructor("ZodCIDRv6",(inst,def)=>{$ZodCIDRv6.init(inst,def);ZodStringFormat.init(inst,def);});function cidrv6(params){return _cidrv6(ZodCIDRv6,params);}const ZodBase64=/*@__PURE__*/$constructor("ZodBase64",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodBase64.init(inst,def);ZodStringFormat.init(inst,def);});function base64(params){return _base64(ZodBase64,params);}const ZodBase64URL=/*@__PURE__*/$constructor("ZodBase64URL",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodBase64URL.init(inst,def);ZodStringFormat.init(inst,def);});function base64url(params){return _base64url(ZodBase64URL,params);}const ZodE164=/*@__PURE__*/$constructor("ZodE164",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodE164.init(inst,def);ZodStringFormat.init(inst,def);});function e164(params){return _e164(ZodE164,params);}const ZodJWT=/*@__PURE__*/$constructor("ZodJWT",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodJWT.init(inst,def);ZodStringFormat.init(inst,def);});function jwt(params){return _jwt(ZodJWT,params);}const ZodCustomStringFormat=/*@__PURE__*/$constructor("ZodCustomStringFormat",(inst,def)=>{// ZodStringFormat.init(inst, def);
$ZodCustomStringFormat.init(inst,def);ZodStringFormat.init(inst,def);});function stringFormat(format,fnOrRegex){let _params=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return _stringFormat(ZodCustomStringFormat,format,fnOrRegex,_params);}const ZodNumber=/*@__PURE__*/$constructor("ZodNumber",(inst,def)=>{var _Math$max,_bag$minimum2,_bag$exclusiveMinimum,_Math$min,_bag$maximum2,_bag$exclusiveMaximum,_bag$format2,_bag$multipleOf,_bag$format3;$ZodNumber.init(inst,def);ZodType.init(inst,def);inst.gt=(value,params)=>inst.check(_gt(value,params));inst.gte=(value,params)=>inst.check(_gte(value,params));inst.min=(value,params)=>inst.check(_gte(value,params));inst.lt=(value,params)=>inst.check(_lt(value,params));inst.lte=(value,params)=>inst.check(_lte(value,params));inst.max=(value,params)=>inst.check(_lte(value,params));inst.int=params=>inst.check(int(params));inst.safe=params=>inst.check(int(params));inst.positive=params=>inst.check(_gt(0,params));inst.nonnegative=params=>inst.check(_gte(0,params));inst.negative=params=>inst.check(_lt(0,params));inst.nonpositive=params=>inst.check(_lte(0,params));inst.multipleOf=(value,params)=>inst.check(_multipleOf(value,params));inst.step=(value,params)=>inst.check(_multipleOf(value,params));// inst.finite = (params) => inst.check(core.finite(params));
inst.finite=()=>inst;const bag=inst._zod.bag;inst.minValue=(_Math$max=Math.max((_bag$minimum2=bag.minimum)!==null&&_bag$minimum2!==void 0?_bag$minimum2:Number.NEGATIVE_INFINITY,(_bag$exclusiveMinimum=bag.exclusiveMinimum)!==null&&_bag$exclusiveMinimum!==void 0?_bag$exclusiveMinimum:Number.NEGATIVE_INFINITY))!==null&&_Math$max!==void 0?_Math$max:null;inst.maxValue=(_Math$min=Math.min((_bag$maximum2=bag.maximum)!==null&&_bag$maximum2!==void 0?_bag$maximum2:Number.POSITIVE_INFINITY,(_bag$exclusiveMaximum=bag.exclusiveMaximum)!==null&&_bag$exclusiveMaximum!==void 0?_bag$exclusiveMaximum:Number.POSITIVE_INFINITY))!==null&&_Math$min!==void 0?_Math$min:null;inst.isInt=((_bag$format2=bag.format)!==null&&_bag$format2!==void 0?_bag$format2:"").includes("int")||Number.isSafeInteger((_bag$multipleOf=bag.multipleOf)!==null&&_bag$multipleOf!==void 0?_bag$multipleOf:0.5);inst.isFinite=true;inst.format=(_bag$format3=bag.format)!==null&&_bag$format3!==void 0?_bag$format3:null;});function number$1(params){return _number(ZodNumber,params);}const ZodNumberFormat=/*@__PURE__*/$constructor("ZodNumberFormat",(inst,def)=>{$ZodNumberFormat.init(inst,def);ZodNumber.init(inst,def);});function int(params){return _int(ZodNumberFormat,params);}function float32(params){return _float32(ZodNumberFormat,params);}function float64(params){return _float64(ZodNumberFormat,params);}function int32(params){return _int32(ZodNumberFormat,params);}function uint32(params){return _uint32(ZodNumberFormat,params);}const ZodBoolean=/*@__PURE__*/$constructor("ZodBoolean",(inst,def)=>{$ZodBoolean.init(inst,def);ZodType.init(inst,def);});function boolean$1(params){return _boolean(ZodBoolean,params);}const ZodBigInt=/*@__PURE__*/$constructor("ZodBigInt",(inst,def)=>{var _bag$minimum3,_bag$maximum3,_bag$format4;$ZodBigInt.init(inst,def);ZodType.init(inst,def);inst.gte=(value,params)=>inst.check(_gte(value,params));inst.min=(value,params)=>inst.check(_gte(value,params));inst.gt=(value,params)=>inst.check(_gt(value,params));inst.gte=(value,params)=>inst.check(_gte(value,params));inst.min=(value,params)=>inst.check(_gte(value,params));inst.lt=(value,params)=>inst.check(_lt(value,params));inst.lte=(value,params)=>inst.check(_lte(value,params));inst.max=(value,params)=>inst.check(_lte(value,params));inst.positive=params=>inst.check(_gt(BigInt(0),params));inst.negative=params=>inst.check(_lt(BigInt(0),params));inst.nonpositive=params=>inst.check(_lte(BigInt(0),params));inst.nonnegative=params=>inst.check(_gte(BigInt(0),params));inst.multipleOf=(value,params)=>inst.check(_multipleOf(value,params));const bag=inst._zod.bag;inst.minValue=(_bag$minimum3=bag.minimum)!==null&&_bag$minimum3!==void 0?_bag$minimum3:null;inst.maxValue=(_bag$maximum3=bag.maximum)!==null&&_bag$maximum3!==void 0?_bag$maximum3:null;inst.format=(_bag$format4=bag.format)!==null&&_bag$format4!==void 0?_bag$format4:null;});function bigint$1(params){return _bigint(ZodBigInt,params);}const ZodBigIntFormat=/*@__PURE__*/$constructor("ZodBigIntFormat",(inst,def)=>{$ZodBigIntFormat.init(inst,def);ZodBigInt.init(inst,def);});// int64
function int64(params){return _int64(ZodBigIntFormat,params);}// uint64
function uint64(params){return _uint64(ZodBigIntFormat,params);}const ZodSymbol=/*@__PURE__*/$constructor("ZodSymbol",(inst,def)=>{$ZodSymbol.init(inst,def);ZodType.init(inst,def);});function symbol$2(params){return _symbol(ZodSymbol,params);}const ZodUndefined=/*@__PURE__*/$constructor("ZodUndefined",(inst,def)=>{$ZodUndefined.init(inst,def);ZodType.init(inst,def);});function _undefined(params){return _undefined$1(ZodUndefined,params);}const ZodNull=/*@__PURE__*/$constructor("ZodNull",(inst,def)=>{$ZodNull.init(inst,def);ZodType.init(inst,def);});function _null(params){return _null$1(ZodNull,params);}const ZodAny=/*@__PURE__*/$constructor("ZodAny",(inst,def)=>{$ZodAny.init(inst,def);ZodType.init(inst,def);});function any(){return _any(ZodAny);}const ZodUnknown=/*@__PURE__*/$constructor("ZodUnknown",(inst,def)=>{$ZodUnknown.init(inst,def);ZodType.init(inst,def);});function unknown(){return _unknown(ZodUnknown);}const ZodNever=/*@__PURE__*/$constructor("ZodNever",(inst,def)=>{$ZodNever.init(inst,def);ZodType.init(inst,def);});function never(params){return _never(ZodNever,params);}const ZodVoid=/*@__PURE__*/$constructor("ZodVoid",(inst,def)=>{$ZodVoid.init(inst,def);ZodType.init(inst,def);});function _void(params){return _void$1(ZodVoid,params);}const ZodDate=/*@__PURE__*/$constructor("ZodDate",(inst,def)=>{$ZodDate.init(inst,def);ZodType.init(inst,def);inst.min=(value,params)=>inst.check(_gte(value,params));inst.max=(value,params)=>inst.check(_lte(value,params));const c=inst._zod.bag;inst.minDate=c.minimum?new Date(c.minimum):null;inst.maxDate=c.maximum?new Date(c.maximum):null;});function date$1(params){return _date(ZodDate,params);}const ZodArray=/*@__PURE__*/$constructor("ZodArray",(inst,def)=>{$ZodArray.init(inst,def);ZodType.init(inst,def);inst.element=def.element;inst.min=(minLength,params)=>inst.check(_minLength(minLength,params));inst.nonempty=params=>inst.check(_minLength(1,params));inst.max=(maxLength,params)=>inst.check(_maxLength(maxLength,params));inst.length=(len,params)=>inst.check(_length(len,params));inst.unwrap=()=>inst.element;});function array(element,params){return _array(ZodArray,element,params);}// .keyof
function keyof(schema){const shape=schema._zod.def.shape;return literal(Object.keys(shape));}const ZodObject=/*@__PURE__*/$constructor("ZodObject",(inst,def)=>{$ZodObject.init(inst,def);ZodType.init(inst,def);defineLazy(inst,"shape",()=>def.shape);inst.keyof=()=>_enum(Object.keys(inst._zod.def.shape));inst.catchall=catchall=>inst.clone(_objectSpread2(_objectSpread2({},inst._zod.def),{},{catchall:catchall}));inst.passthrough=()=>inst.clone(_objectSpread2(_objectSpread2({},inst._zod.def),{},{catchall:unknown()}));// inst.nonstrict = () => inst.clone({ ...inst._zod.def, catchall: api.unknown() });
inst.loose=()=>inst.clone(_objectSpread2(_objectSpread2({},inst._zod.def),{},{catchall:unknown()}));inst.strict=()=>inst.clone(_objectSpread2(_objectSpread2({},inst._zod.def),{},{catchall:never()}));inst.strip=()=>inst.clone(_objectSpread2(_objectSpread2({},inst._zod.def),{},{catchall:undefined}));inst.extend=incoming=>{return extend(inst,incoming);};inst.merge=other=>merge(inst,other);inst.pick=mask=>pick(inst,mask);inst.omit=mask=>omit(inst,mask);inst.partial=function(){return partial(ZodOptional,inst,arguments.length<=0?undefined:arguments[0]);};inst.required=function(){return required(ZodNonOptional,inst,arguments.length<=0?undefined:arguments[0]);};});function object$1(shape,params){const def=_objectSpread2({type:"object",get shape(){assignProp(this,"shape",_objectSpread2({},shape));return this.shape;}},normalizeParams(params));return new ZodObject(def);}// strictObject
function strictObject(shape,params){return new ZodObject(_objectSpread2({type:"object",get shape(){assignProp(this,"shape",_objectSpread2({},shape));return this.shape;},catchall:never()},normalizeParams(params)));}// looseObject
function looseObject(shape,params){return new ZodObject(_objectSpread2({type:"object",get shape(){assignProp(this,"shape",_objectSpread2({},shape));return this.shape;},catchall:unknown()},normalizeParams(params)));}const ZodUnion=/*@__PURE__*/$constructor("ZodUnion",(inst,def)=>{$ZodUnion.init(inst,def);ZodType.init(inst,def);inst.options=def.options;});function union(options,params){return new ZodUnion(_objectSpread2({type:"union",options:options},normalizeParams(params)));}const ZodDiscriminatedUnion=/*@__PURE__*/$constructor("ZodDiscriminatedUnion",(inst,def)=>{ZodUnion.init(inst,def);$ZodDiscriminatedUnion.init(inst,def);});function discriminatedUnion(discriminator,options,params){// const [options, params] = args;
return new ZodDiscriminatedUnion(_objectSpread2({type:"union",options,discriminator},normalizeParams(params)));}const ZodIntersection=/*@__PURE__*/$constructor("ZodIntersection",(inst,def)=>{$ZodIntersection.init(inst,def);ZodType.init(inst,def);});function intersection(left,right){return new ZodIntersection({type:"intersection",left:left,right:right});}const ZodTuple=/*@__PURE__*/$constructor("ZodTuple",(inst,def)=>{$ZodTuple.init(inst,def);ZodType.init(inst,def);inst.rest=rest=>inst.clone(_objectSpread2(_objectSpread2({},inst._zod.def),{},{rest:rest}));});function tuple(items,_paramsOrRest,_params){const hasRest=_paramsOrRest instanceof $ZodType;const params=hasRest?_params:_paramsOrRest;const rest=hasRest?_paramsOrRest:null;return new ZodTuple(_objectSpread2({type:"tuple",items:items,rest},normalizeParams(params)));}const ZodRecord=/*@__PURE__*/$constructor("ZodRecord",(inst,def)=>{$ZodRecord.init(inst,def);ZodType.init(inst,def);inst.keyType=def.keyType;inst.valueType=def.valueType;});function record(keyType,valueType,params){return new ZodRecord(_objectSpread2({type:"record",keyType,valueType:valueType},normalizeParams(params)));}// type alksjf = core.output<core.$ZodRecordKey>;
function partialRecord(keyType,valueType,params){return new ZodRecord(_objectSpread2({type:"record",keyType:union([keyType,never()]),valueType:valueType},normalizeParams(params)));}const ZodMap=/*@__PURE__*/$constructor("ZodMap",(inst,def)=>{$ZodMap.init(inst,def);ZodType.init(inst,def);inst.keyType=def.keyType;inst.valueType=def.valueType;});function map(keyType,valueType,params){return new ZodMap(_objectSpread2({type:"map",keyType:keyType,valueType:valueType},normalizeParams(params)));}const ZodSet=/*@__PURE__*/$constructor("ZodSet",(inst,def)=>{$ZodSet.init(inst,def);ZodType.init(inst,def);inst.min=function(){return inst.check(_minSize(...arguments));};inst.nonempty=params=>inst.check(_minSize(1,params));inst.max=function(){return inst.check(_maxSize(...arguments));};inst.size=function(){return inst.check(_size(...arguments));};});function set(valueType,params){return new ZodSet(_objectSpread2({type:"set",valueType:valueType},normalizeParams(params)));}const ZodEnum=/*@__PURE__*/$constructor("ZodEnum",(inst,def)=>{$ZodEnum.init(inst,def);ZodType.init(inst,def);inst.enum=def.entries;inst.options=Object.values(def.entries);const keys=new Set(Object.keys(def.entries));inst.extract=(values,params)=>{const newEntries={};for(const value of values){if(keys.has(value)){newEntries[value]=def.entries[value];}else throw new Error("Key ".concat(value," not found in enum"));}return new ZodEnum(_objectSpread2(_objectSpread2(_objectSpread2({},def),{},{checks:[]},normalizeParams(params)),{},{entries:newEntries}));};inst.exclude=(values,params)=>{const newEntries=_objectSpread2({},def.entries);for(const value of values){if(keys.has(value)){delete newEntries[value];}else throw new Error("Key ".concat(value," not found in enum"));}return new ZodEnum(_objectSpread2(_objectSpread2(_objectSpread2({},def),{},{checks:[]},normalizeParams(params)),{},{entries:newEntries}));};});function _enum(values,params){const entries=Array.isArray(values)?Object.fromEntries(values.map(v=>[v,v])):values;return new ZodEnum(_objectSpread2({type:"enum",entries},normalizeParams(params)));}/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.
 *
 * ```ts
 * enum Colors { red, green, blue }
 * z.enum(Colors);
 * ```
 */function nativeEnum(entries,params){return new ZodEnum(_objectSpread2({type:"enum",entries},normalizeParams(params)));}const ZodLiteral=/*@__PURE__*/$constructor("ZodLiteral",(inst,def)=>{$ZodLiteral.init(inst,def);ZodType.init(inst,def);inst.values=new Set(def.values);Object.defineProperty(inst,"value",{get(){if(def.values.length>1){throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");}return def.values[0];}});});function literal(value,params){return new ZodLiteral(_objectSpread2({type:"literal",values:Array.isArray(value)?value:[value]},normalizeParams(params)));}const ZodFile=/*@__PURE__*/$constructor("ZodFile",(inst,def)=>{$ZodFile.init(inst,def);ZodType.init(inst,def);inst.min=(size,params)=>inst.check(_minSize(size,params));inst.max=(size,params)=>inst.check(_maxSize(size,params));inst.mime=(types,params)=>inst.check(_mime(Array.isArray(types)?types:[types],params));});function file(params){return _file(ZodFile,params);}const ZodTransform=/*@__PURE__*/$constructor("ZodTransform",(inst,def)=>{$ZodTransform.init(inst,def);ZodType.init(inst,def);inst._zod.parse=(payload,_ctx)=>{payload.addIssue=issue$1=>{if(typeof issue$1==="string"){payload.issues.push(issue(issue$1,payload.value,def));}else{var _issue$code,_issue$input,_issue$inst,_issue$continue;// for Zod 3 backwards compatibility
const _issue=issue$1;if(_issue.fatal)_issue.continue=false;(_issue$code=_issue.code)!==null&&_issue$code!==void 0?_issue$code:_issue.code="custom";(_issue$input=_issue.input)!==null&&_issue$input!==void 0?_issue$input:_issue.input=payload.value;(_issue$inst=_issue.inst)!==null&&_issue$inst!==void 0?_issue$inst:_issue.inst=inst;(_issue$continue=_issue.continue)!==null&&_issue$continue!==void 0?_issue$continue:_issue.continue=true;payload.issues.push(issue(_issue));}};const output=def.transform(payload.value,payload);if(output instanceof Promise){return output.then(output=>{payload.value=output;return payload;});}payload.value=output;return payload;};});function transform(fn){return new ZodTransform({type:"transform",transform:fn});}const ZodOptional=/*@__PURE__*/$constructor("ZodOptional",(inst,def)=>{$ZodOptional.init(inst,def);ZodType.init(inst,def);inst.unwrap=()=>inst._zod.def.innerType;});function optional(innerType){return new ZodOptional({type:"optional",innerType:innerType});}const ZodNullable=/*@__PURE__*/$constructor("ZodNullable",(inst,def)=>{$ZodNullable.init(inst,def);ZodType.init(inst,def);inst.unwrap=()=>inst._zod.def.innerType;});function nullable(innerType){return new ZodNullable({type:"nullable",innerType:innerType});}// nullish
function nullish(innerType){return optional(nullable(innerType));}const ZodDefault=/*@__PURE__*/$constructor("ZodDefault",(inst,def)=>{$ZodDefault.init(inst,def);ZodType.init(inst,def);inst.unwrap=()=>inst._zod.def.innerType;inst.removeDefault=inst.unwrap;});function _default(innerType,defaultValue){return new ZodDefault({type:"default",innerType:innerType,get defaultValue(){return typeof defaultValue==="function"?defaultValue():defaultValue;}});}const ZodPrefault=/*@__PURE__*/$constructor("ZodPrefault",(inst,def)=>{$ZodPrefault.init(inst,def);ZodType.init(inst,def);inst.unwrap=()=>inst._zod.def.innerType;});function prefault(innerType,defaultValue){return new ZodPrefault({type:"prefault",innerType:innerType,get defaultValue(){return typeof defaultValue==="function"?defaultValue():defaultValue;}});}const ZodNonOptional=/*@__PURE__*/$constructor("ZodNonOptional",(inst,def)=>{$ZodNonOptional.init(inst,def);ZodType.init(inst,def);inst.unwrap=()=>inst._zod.def.innerType;});function nonoptional(innerType,params){return new ZodNonOptional(_objectSpread2({type:"nonoptional",innerType:innerType},normalizeParams(params)));}const ZodSuccess=/*@__PURE__*/$constructor("ZodSuccess",(inst,def)=>{$ZodSuccess.init(inst,def);ZodType.init(inst,def);inst.unwrap=()=>inst._zod.def.innerType;});function success(innerType){return new ZodSuccess({type:"success",innerType:innerType});}const ZodCatch=/*@__PURE__*/$constructor("ZodCatch",(inst,def)=>{$ZodCatch.init(inst,def);ZodType.init(inst,def);inst.unwrap=()=>inst._zod.def.innerType;inst.removeCatch=inst.unwrap;});function _catch(innerType,catchValue){return new ZodCatch({type:"catch",innerType:innerType,catchValue:typeof catchValue==="function"?catchValue:()=>catchValue});}const ZodNaN=/*@__PURE__*/$constructor("ZodNaN",(inst,def)=>{$ZodNaN.init(inst,def);ZodType.init(inst,def);});function nan(params){return _nan(ZodNaN,params);}const ZodPipe=/*@__PURE__*/$constructor("ZodPipe",(inst,def)=>{$ZodPipe.init(inst,def);ZodType.init(inst,def);inst.in=def.in;inst.out=def.out;});function pipe(in_,out){return new ZodPipe({type:"pipe",in:in_,out:out// ...util.normalizeParams(params),
});}const ZodReadonly=/*@__PURE__*/$constructor("ZodReadonly",(inst,def)=>{$ZodReadonly.init(inst,def);ZodType.init(inst,def);});function readonly(innerType){return new ZodReadonly({type:"readonly",innerType:innerType});}const ZodTemplateLiteral=/*@__PURE__*/$constructor("ZodTemplateLiteral",(inst,def)=>{$ZodTemplateLiteral.init(inst,def);ZodType.init(inst,def);});function templateLiteral(parts,params){return new ZodTemplateLiteral(_objectSpread2({type:"template_literal",parts},normalizeParams(params)));}const ZodLazy=/*@__PURE__*/$constructor("ZodLazy",(inst,def)=>{$ZodLazy.init(inst,def);ZodType.init(inst,def);inst.unwrap=()=>inst._zod.def.getter();});function lazy(getter){return new ZodLazy({type:"lazy",getter:getter});}const ZodPromise=/*@__PURE__*/$constructor("ZodPromise",(inst,def)=>{$ZodPromise.init(inst,def);ZodType.init(inst,def);inst.unwrap=()=>inst._zod.def.innerType;});function promise(innerType){return new ZodPromise({type:"promise",innerType:innerType});}const ZodCustom=/*@__PURE__*/$constructor("ZodCustom",(inst,def)=>{$ZodCustom.init(inst,def);ZodType.init(inst,def);});// custom checks
function check(fn){const ch=new $ZodCheck({check:"custom"// ...util.normalizeParams(params),
});ch._zod.check=fn;return ch;}function custom(fn,_params){return _custom(ZodCustom,fn!==null&&fn!==void 0?fn:()=>true,_params);}function refine(fn){let _params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _refine(ZodCustom,fn,_params);}// superRefine
function superRefine(fn){const ch=check(payload=>{payload.addIssue=issue$1=>{if(typeof issue$1==="string"){payload.issues.push(issue(issue$1,payload.value,ch._zod.def));}else{var _issue$code2,_issue$input2,_issue$inst2,_issue$continue2;// for Zod 3 backwards compatibility
const _issue=issue$1;if(_issue.fatal)_issue.continue=false;(_issue$code2=_issue.code)!==null&&_issue$code2!==void 0?_issue$code2:_issue.code="custom";(_issue$input2=_issue.input)!==null&&_issue$input2!==void 0?_issue$input2:_issue.input=payload.value;(_issue$inst2=_issue.inst)!==null&&_issue$inst2!==void 0?_issue$inst2:_issue.inst=ch;(_issue$continue2=_issue.continue)!==null&&_issue$continue2!==void 0?_issue$continue2:_issue.continue=!ch._zod.def.abort;payload.issues.push(issue(_issue));}};return fn(payload.value,payload);});return ch;}function _instanceof(cls){let params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{error:"Input not instance of ".concat(cls.name)};const inst=new ZodCustom(_objectSpread2({type:"custom",check:"custom",fn:data=>data instanceof cls,abort:true},normalizeParams(params)));inst._zod.bag.Class=cls;return inst;}// stringbool
const stringbool=function(){for(var _len6=arguments.length,args=new Array(_len6),_key7=0;_key7<_len6;_key7++){args[_key7]=arguments[_key7];}return _stringbool({Pipe:ZodPipe,Boolean:ZodBoolean,String:ZodString,Transform:ZodTransform},...args);};function json(params){const jsonSchema=lazy(()=>{return union([string$1(params),number$1(),boolean$1(),_null(),array(jsonSchema),record(string$1(),jsonSchema)]);});return jsonSchema;}// preprocess
// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */
function preprocess(fn,schema){return pipe(transform(fn),schema);}// Zod 3 compat layer
/** @deprecated Use the raw string literal codes instead, e.g. "invalid_type". */const ZodIssueCode={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};/** @deprecated Use `z.config(params)` instead. */function setErrorMap(map){config({customError:map});}/** @deprecated Use `z.config()` instead. */function getErrorMap(){return config().customError;}function string(params){return _coercedString(ZodString,params);}function number(params){return _coercedNumber(ZodNumber,params);}function boolean(params){return _coercedBoolean(ZodBoolean,params);}function bigint(params){return _coercedBigint(ZodBigInt,params);}function date(params){return _coercedDate(ZodDate,params);}var coerce=/*#__PURE__*/Object.freeze({__proto__:null,bigint:bigint,boolean:boolean,date:date,number:number,string:string});config(en());var z=/*#__PURE__*/Object.freeze({__proto__:null,$brand:$brand,$input:$input,$output:$output,NEVER:NEVER,TimePrecision:TimePrecision,ZodAny:ZodAny,ZodArray:ZodArray,ZodBase64:ZodBase64,ZodBase64URL:ZodBase64URL,ZodBigInt:ZodBigInt,ZodBigIntFormat:ZodBigIntFormat,ZodBoolean:ZodBoolean,ZodCIDRv4:ZodCIDRv4,ZodCIDRv6:ZodCIDRv6,ZodCUID:ZodCUID,ZodCUID2:ZodCUID2,ZodCatch:ZodCatch,ZodCustom:ZodCustom,ZodCustomStringFormat:ZodCustomStringFormat,ZodDate:ZodDate,ZodDefault:ZodDefault,ZodDiscriminatedUnion:ZodDiscriminatedUnion,ZodE164:ZodE164,ZodEmail:ZodEmail,ZodEmoji:ZodEmoji,ZodEnum:ZodEnum,ZodError:ZodError,ZodFile:ZodFile,ZodGUID:ZodGUID,ZodIPv4:ZodIPv4,ZodIPv6:ZodIPv6,ZodISODate:ZodISODate,ZodISODateTime:ZodISODateTime,ZodISODuration:ZodISODuration,ZodISOTime:ZodISOTime,ZodIntersection:ZodIntersection,ZodIssueCode:ZodIssueCode,ZodJWT:ZodJWT,ZodKSUID:ZodKSUID,ZodLazy:ZodLazy,ZodLiteral:ZodLiteral,ZodMap:ZodMap,ZodNaN:ZodNaN,ZodNanoID:ZodNanoID,ZodNever:ZodNever,ZodNonOptional:ZodNonOptional,ZodNull:ZodNull,ZodNullable:ZodNullable,ZodNumber:ZodNumber,ZodNumberFormat:ZodNumberFormat,ZodObject:ZodObject,ZodOptional:ZodOptional,ZodPipe:ZodPipe,ZodPrefault:ZodPrefault,ZodPromise:ZodPromise,ZodReadonly:ZodReadonly,ZodRealError:ZodRealError,ZodRecord:ZodRecord,ZodSet:ZodSet,ZodString:ZodString,ZodStringFormat:ZodStringFormat,ZodSuccess:ZodSuccess,ZodSymbol:ZodSymbol,ZodTemplateLiteral:ZodTemplateLiteral,ZodTransform:ZodTransform,ZodTuple:ZodTuple,ZodType:ZodType,ZodULID:ZodULID,ZodURL:ZodURL,ZodUUID:ZodUUID,ZodUndefined:ZodUndefined,ZodUnion:ZodUnion,ZodUnknown:ZodUnknown,ZodVoid:ZodVoid,ZodXID:ZodXID,_ZodString:_ZodString,_default:_default,any:any,array:array,base64:base64,base64url:base64url,bigint:bigint$1,boolean:boolean$1,catch:_catch,check:check,cidrv4:cidrv4,cidrv6:cidrv6,clone:clone,coerce:coerce,config:config,core:index,cuid:cuid,cuid2:cuid2,custom:custom,date:date$1,discriminatedUnion:discriminatedUnion,e164:e164,email:email,emoji:emoji,endsWith:_endsWith,enum:_enum,file:file,flattenError:flattenError,float32:float32,float64:float64,formatError:formatError,function:_function,getErrorMap:getErrorMap,globalRegistry:globalRegistry,gt:_gt,gte:_gte,guid:guid,includes:_includes,instanceof:_instanceof,int:int,int32:int32,int64:int64,intersection:intersection,ipv4:ipv4,ipv6:ipv6,iso:iso,json:json,jwt:jwt,keyof:keyof,ksuid:ksuid,lazy:lazy,length:_length,literal:literal,locales:index$1,looseObject:looseObject,lowercase:_lowercase,lt:_lt,lte:_lte,map:map,maxLength:_maxLength,maxSize:_maxSize,mime:_mime,minLength:_minLength,minSize:_minSize,multipleOf:_multipleOf,nan:nan,nanoid:nanoid,nativeEnum:nativeEnum,negative:_negative,never:never,nonnegative:_nonnegative,nonoptional:nonoptional,nonpositive:_nonpositive,normalize:_normalize,null:_null,nullable:nullable,nullish:nullish,number:number$1,object:object$1,optional:optional,overwrite:_overwrite,parse:parse,parseAsync:parseAsync,partialRecord:partialRecord,pipe:pipe,positive:_positive,prefault:prefault,preprocess:preprocess,prettifyError:prettifyError,promise:promise,property:_property,readonly:readonly,record:record,refine:refine,regex:_regex,regexes:regexes,registry:registry,safeParse:safeParse,safeParseAsync:safeParseAsync,set:set,setErrorMap:setErrorMap,size:_size,startsWith:_startsWith,strictObject:strictObject,string:string$1,stringFormat:stringFormat,stringbool:stringbool,success:success,superRefine:superRefine,symbol:symbol$2,templateLiteral:templateLiteral,toJSONSchema:toJSONSchema,toLowerCase:_toLowerCase,toUpperCase:_toUpperCase,transform:transform,treeifyError:treeifyError,trim:_trim,tuple:tuple,uint32:uint32,uint64:uint64,ulid:ulid,undefined:_undefined,union:union,unknown:unknown,uppercase:_uppercase,url:url,uuid:uuid,uuidv4:uuidv4,uuidv6:uuidv6,uuidv7:uuidv7,void:_void,xid:xid});var ZodFirstPartyTypeKind;(function(ZodFirstPartyTypeKind){ZodFirstPartyTypeKind["ZodString"]="ZodString";ZodFirstPartyTypeKind["ZodNumber"]="ZodNumber";ZodFirstPartyTypeKind["ZodNaN"]="ZodNaN";ZodFirstPartyTypeKind["ZodBigInt"]="ZodBigInt";ZodFirstPartyTypeKind["ZodBoolean"]="ZodBoolean";ZodFirstPartyTypeKind["ZodDate"]="ZodDate";ZodFirstPartyTypeKind["ZodSymbol"]="ZodSymbol";ZodFirstPartyTypeKind["ZodUndefined"]="ZodUndefined";ZodFirstPartyTypeKind["ZodNull"]="ZodNull";ZodFirstPartyTypeKind["ZodAny"]="ZodAny";ZodFirstPartyTypeKind["ZodUnknown"]="ZodUnknown";ZodFirstPartyTypeKind["ZodNever"]="ZodNever";ZodFirstPartyTypeKind["ZodVoid"]="ZodVoid";ZodFirstPartyTypeKind["ZodArray"]="ZodArray";ZodFirstPartyTypeKind["ZodObject"]="ZodObject";ZodFirstPartyTypeKind["ZodUnion"]="ZodUnion";ZodFirstPartyTypeKind["ZodDiscriminatedUnion"]="ZodDiscriminatedUnion";ZodFirstPartyTypeKind["ZodIntersection"]="ZodIntersection";ZodFirstPartyTypeKind["ZodTuple"]="ZodTuple";ZodFirstPartyTypeKind["ZodRecord"]="ZodRecord";ZodFirstPartyTypeKind["ZodMap"]="ZodMap";ZodFirstPartyTypeKind["ZodSet"]="ZodSet";ZodFirstPartyTypeKind["ZodFunction"]="ZodFunction";ZodFirstPartyTypeKind["ZodLazy"]="ZodLazy";ZodFirstPartyTypeKind["ZodLiteral"]="ZodLiteral";ZodFirstPartyTypeKind["ZodEnum"]="ZodEnum";ZodFirstPartyTypeKind["ZodEffects"]="ZodEffects";ZodFirstPartyTypeKind["ZodNativeEnum"]="ZodNativeEnum";ZodFirstPartyTypeKind["ZodOptional"]="ZodOptional";ZodFirstPartyTypeKind["ZodNullable"]="ZodNullable";ZodFirstPartyTypeKind["ZodDefault"]="ZodDefault";ZodFirstPartyTypeKind["ZodCatch"]="ZodCatch";ZodFirstPartyTypeKind["ZodPromise"]="ZodPromise";ZodFirstPartyTypeKind["ZodBranded"]="ZodBranded";ZodFirstPartyTypeKind["ZodPipeline"]="ZodPipeline";ZodFirstPartyTypeKind["ZodReadonly"]="ZodReadonly";})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));// src/combine-headers.ts
function combineHeaders(){for(var _len7=arguments.length,headers=new Array(_len7),_key8=0;_key8<_len7;_key8++){headers[_key8]=arguments[_key8];}return headers.reduce((combinedHeaders,currentHeaders)=>_objectSpread2(_objectSpread2({},combinedHeaders),currentHeaders!=null?currentHeaders:{}),{});}// src/delay.ts
function delay(_x19,_x20){return _delay.apply(this,arguments);}function _delay(){_delay=_asyncToGenerator2(function*(delayInMs,options){if(delayInMs==null){return Promise.resolve();}const signal=options==null?void 0:options.abortSignal;return new Promise((resolve2,reject)=>{if(signal==null?void 0:signal.aborted){reject(createAbortError());return;}const timeoutId=setTimeout(()=>{cleanup();resolve2();},delayInMs);const cleanup=()=>{clearTimeout(timeoutId);signal==null?void 0:signal.removeEventListener("abort",onAbort);};const onAbort=()=>{cleanup();reject(createAbortError());};signal==null?void 0:signal.addEventListener("abort",onAbort);});});return _delay.apply(this,arguments);}function createAbortError(){return new DOMException("Delay was aborted","AbortError");}// src/extract-response-headers.ts
function extractResponseHeaders(response){return Object.fromEntries([...response.headers]);}// src/get-runtime-environment-user-agent.ts
function getRuntimeEnvironmentUserAgent(){let globalThisAny=arguments.length>0&&arguments[0]!==undefined?arguments[0]:globalThis;var _a,_b,_c;if(globalThisAny.window){return"runtime/browser";}if((_a=globalThisAny.navigator)==null?void 0:_a.userAgent){return"runtime/".concat(globalThisAny.navigator.userAgent.toLowerCase());}if((_c=(_b=globalThisAny.process)==null?void 0:_b.versions)==null?void 0:_c.node){return"runtime/node.js/".concat(globalThisAny.process.version.substring(0));}if(globalThisAny.EdgeRuntime){return"runtime/vercel-edge";}return"runtime/unknown";}// src/remove-undefined-entries.ts
function removeUndefinedEntries(record){return Object.fromEntries(Object.entries(record).filter(_ref33=>{let[_key,value]=_ref33;return value!=null;}));}// src/with-user-agent-suffix.ts
function withUserAgentSuffix(headers){const cleanedHeaders=removeUndefinedEntries(headers!=null?headers:{});const normalizedHeaders=new Headers(cleanedHeaders);const currentUserAgentHeader=normalizedHeaders.get("user-agent")||"";for(var _len8=arguments.length,userAgentSuffixParts=new Array(_len8>1?_len8-1:0),_key9=1;_key9<_len8;_key9++){userAgentSuffixParts[_key9-1]=arguments[_key9];}normalizedHeaders.set("user-agent",[currentUserAgentHeader,...userAgentSuffixParts].filter(Boolean).join(" "));return Object.fromEntries(normalizedHeaders);}var createIdGenerator=function(){let{prefix,size=16,alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator="-"}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const generator=()=>{const alphabetLength=alphabet.length;const chars=new Array(size);for(let i=0;i<size;i++){chars[i]=alphabet[Math.random()*alphabetLength|0];}return chars.join("");};if(prefix==null){return generator;}if(alphabet.includes(separator)){throw new InvalidArgumentError$1({argument:"separator",message:"The separator \"".concat(separator,"\" must not be part of the alphabet \"").concat(alphabet,"\".")});}return()=>"".concat(prefix).concat(separator).concat(generator());};var generateId=createIdGenerator();// src/get-error-message.ts
function getErrorMessage(error){if(error==null){return"unknown error";}if(typeof error==="string"){return error;}if(error instanceof Error){return error.message;}return JSON.stringify(error);}// src/is-abort-error.ts
function isAbortError(error){return(error instanceof Error||error instanceof DOMException)&&(error.name==="AbortError"||error.name==="ResponseAborted"||// Next.js
error.name==="TimeoutError");}// src/handle-fetch-error.ts
var FETCH_FAILED_ERROR_MESSAGES=["fetch failed","failed to fetch"];function handleFetchError(_ref34){let{error,url,requestBodyValues}=_ref34;if(isAbortError(error)){return error;}if(error instanceof TypeError&&FETCH_FAILED_ERROR_MESSAGES.includes(error.message.toLowerCase())){const cause=error.cause;if(cause!=null){return new APICallError({message:"Cannot connect to API: ".concat(cause.message),cause,url,requestBodyValues,isRetryable:true// retry when network error
});}}return error;}// src/version.ts
var VERSION$3="3.0.9";// src/get-from-api.ts
var getOriginalFetch=()=>globalThis.fetch;var getFromApi=/*#__PURE__*/function(){var _ref35=_asyncToGenerator2(function(_ref36){let{url,headers={},successfulResponseHandler,failedResponseHandler,abortSignal,fetch=getOriginalFetch()}=_ref36;return function*(){try{const response=yield fetch(url,{method:"GET",headers:withUserAgentSuffix(headers,"ai-sdk/provider-utils/".concat(VERSION$3),getRuntimeEnvironmentUserAgent()),signal:abortSignal});const responseHeaders=extractResponseHeaders(response);if(!response.ok){let errorInformation;try{errorInformation=yield failedResponseHandler({response,url,requestBodyValues:{}});}catch(error){if(isAbortError(error)||APICallError.isInstance(error)){throw error;}throw new APICallError({message:"Failed to process error response",cause:error,statusCode:response.status,url,responseHeaders,requestBodyValues:{}});}throw errorInformation.value;}try{return yield successfulResponseHandler({response,url,requestBodyValues:{}});}catch(error){if(error instanceof Error){if(isAbortError(error)||APICallError.isInstance(error)){throw error;}}throw new APICallError({message:"Failed to process successful response",cause:error,statusCode:response.status,url,responseHeaders,requestBodyValues:{}});}}catch(error){throw handleFetchError({error,url,requestBodyValues:{}});}}();});return function getFromApi(_x21){return _ref35.apply(this,arguments);};}();// src/is-url-supported.ts
function isUrlSupported(_ref37){let{mediaType,url,supportedUrls}=_ref37;url=url.toLowerCase();mediaType=mediaType.toLowerCase();return Object.entries(supportedUrls).map(_ref38=>{let[key,value]=_ref38;const mediaType2=key.toLowerCase();return mediaType2==="*"||mediaType2==="*/*"?{mediaTypePrefix:"",regexes:value}:{mediaTypePrefix:mediaType2.replace(/\*/,""),regexes:value};}).filter(_ref39=>{let{mediaTypePrefix}=_ref39;return mediaType.startsWith(mediaTypePrefix);}).flatMap(_ref40=>{let{regexes}=_ref40;return regexes;}).some(pattern=>pattern.test(url));}function loadApiKey(_ref41){let{apiKey,environmentVariableName,apiKeyParameterName="apiKey",description}=_ref41;if(typeof apiKey==="string"){return apiKey;}if(apiKey!=null){throw new LoadAPIKeyError({message:"".concat(description," API key must be a string.")});}if(typeof process==="undefined"){throw new LoadAPIKeyError({message:"".concat(description," API key is missing. Pass it using the '").concat(apiKeyParameterName,"' parameter. Environment variables is not supported in this environment.")});}apiKey=process.env[environmentVariableName];if(apiKey==null){throw new LoadAPIKeyError({message:"".concat(description," API key is missing. Pass it using the '").concat(apiKeyParameterName,"' parameter or the ").concat(environmentVariableName," environment variable.")});}if(typeof apiKey!=="string"){throw new LoadAPIKeyError({message:"".concat(description," API key must be a string. The value of the ").concat(environmentVariableName," environment variable is not a string.")});}return apiKey;}// src/load-optional-setting.ts
function loadOptionalSetting(_ref42){let{settingValue,environmentVariableName}=_ref42;if(typeof settingValue==="string"){return settingValue;}if(settingValue!=null||typeof process==="undefined"){return void 0;}settingValue=process.env[environmentVariableName];if(settingValue==null||typeof settingValue!=="string"){return void 0;}return settingValue;}// src/media-type-to-extension.ts
function mediaTypeToExtension(mediaType){var _a;const[_type,subtype=""]=mediaType.toLowerCase().split("/");return(_a={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[subtype])!=null?_a:subtype;}// src/secure-json-parse.ts
var suspectProtoRx=/"__proto__"\s*:/;var suspectConstructorRx=/"constructor"\s*:/;function _parse(text){const obj=JSON.parse(text);if(obj===null||typeof obj!=="object"){return obj;}if(suspectProtoRx.test(text)===false&&suspectConstructorRx.test(text)===false){return obj;}return filter(obj);}function filter(obj){let next=[obj];while(next.length){const nodes=next;next=[];for(const node of nodes){if(Object.prototype.hasOwnProperty.call(node,"__proto__")){throw new SyntaxError("Object contains forbidden prototype property");}if(Object.prototype.hasOwnProperty.call(node,"constructor")&&Object.prototype.hasOwnProperty.call(node.constructor,"prototype")){throw new SyntaxError("Object contains forbidden prototype property");}for(const key in node){const value=node[key];if(value&&typeof value==="object"){next.push(value);}}}}return obj;}function secureJsonParse(text){const{stackTraceLimit}=Error;Error.stackTraceLimit=0;try{return _parse(text);}finally{Error.stackTraceLimit=stackTraceLimit;}}var validatorSymbol=Symbol.for("vercel.ai.validator");function validator(validate){return{[validatorSymbol]:true,validate};}function isValidator(value){return typeof value==="object"&&value!==null&&validatorSymbol in value&&value[validatorSymbol]===true&&"validate"in value;}function asValidator(value){return isValidator(value)?value:standardSchemaValidator(value);}function standardSchemaValidator(standardSchema){return validator(/*#__PURE__*/function(){var _ref43=_asyncToGenerator2(function*(value){const result=yield standardSchema["~standard"].validate(value);return result.issues==null?{success:true,value:result.value}:{success:false,error:new TypeValidationError({value,cause:result.issues})};});return function(_x22){return _ref43.apply(this,arguments);};}());}// src/validate-types.ts
function validateTypes(_x23){return _validateTypes.apply(this,arguments);}function _validateTypes(){_validateTypes=_asyncToGenerator2(function(_ref192){let{value,schema}=_ref192;return function*(){const result=yield safeValidateTypes({value,schema});if(!result.success){throw TypeValidationError.wrap({value,cause:result.error});}return result.value;}();});return _validateTypes.apply(this,arguments);}function safeValidateTypes(_x24){return _safeValidateTypes.apply(this,arguments);}// src/parse-json.ts
function _safeValidateTypes(){_safeValidateTypes=_asyncToGenerator2(function(_ref193){let{value,schema}=_ref193;return function*(){const validator2=asValidator(schema);try{if(validator2.validate==null){return{success:true,value,rawValue:value};}const result=yield validator2.validate(value);if(result.success){return{success:true,value:result.value,rawValue:value};}return{success:false,error:TypeValidationError.wrap({value,cause:result.error}),rawValue:value};}catch(error){return{success:false,error:TypeValidationError.wrap({value,cause:error}),rawValue:value};}}();});return _safeValidateTypes.apply(this,arguments);}function parseJSON(_x25){return _parseJSON.apply(this,arguments);}function _parseJSON(){_parseJSON=_asyncToGenerator2(function(_ref194){let{text,schema}=_ref194;return function*(){try{const value=secureJsonParse(text);if(schema==null){return value;}return validateTypes({value,schema});}catch(error){if(JSONParseError.isInstance(error)||TypeValidationError.isInstance(error)){throw error;}throw new JSONParseError({text,cause:error});}}();});return _parseJSON.apply(this,arguments);}function safeParseJSON(_x26){return _safeParseJSON.apply(this,arguments);}function _safeParseJSON(){_safeParseJSON=_asyncToGenerator2(function(_ref195){let{text,schema}=_ref195;return function*(){try{const value=secureJsonParse(text);if(schema==null){return{success:true,value,rawValue:value};}return yield safeValidateTypes({value,schema});}catch(error){return{success:false,error:JSONParseError.isInstance(error)?error:new JSONParseError({text,cause:error}),rawValue:void 0};}}();});return _safeParseJSON.apply(this,arguments);}function isParsableJson(input){try{secureJsonParse(input);return true;}catch(e){return false;}}function parseJsonEventStream(_ref44){let{stream,schema}=_ref44;return stream.pipeThrough(new TextDecoderStream()).pipeThrough(new EventSourceParserStream()).pipeThrough(new TransformStream({transform(_x27,_x28){return _asyncToGenerator2(function(_ref45,controller){let{data}=_ref45;return function*(){if(data==="[DONE]"){return;}controller.enqueue(yield safeParseJSON({text:data,schema}));}();}).apply(this,arguments);}}));}function parseProviderOptions(_x29){return _parseProviderOptions.apply(this,arguments);}function _parseProviderOptions(){_parseProviderOptions=_asyncToGenerator2(function(_ref196){let{provider,providerOptions,schema}=_ref196;return function*(){if((providerOptions==null?void 0:providerOptions[provider])==null){return void 0;}const parsedProviderOptions=yield safeValidateTypes({value:providerOptions[provider],schema});if(!parsedProviderOptions.success){throw new InvalidArgumentError$1({argument:"providerOptions",message:"invalid ".concat(provider," provider options"),cause:parsedProviderOptions.error});}return parsedProviderOptions.value;}();});return _parseProviderOptions.apply(this,arguments);}var getOriginalFetch2=()=>globalThis.fetch;var postJsonToApi=/*#__PURE__*/function(){var _ref46=_asyncToGenerator2(function(_ref47){let{url,headers,body,failedResponseHandler,successfulResponseHandler,abortSignal,fetch}=_ref47;return function*(){return postToApi({url,headers:_objectSpread2({"Content-Type":"application/json"},headers),body:{content:JSON.stringify(body),values:body},failedResponseHandler,successfulResponseHandler,abortSignal,fetch});}();});return function postJsonToApi(_x30){return _ref46.apply(this,arguments);};}();var postFormDataToApi=/*#__PURE__*/function(){var _ref48=_asyncToGenerator2(function(_ref49){let{url,headers,formData,failedResponseHandler,successfulResponseHandler,abortSignal,fetch}=_ref49;return function*(){return postToApi({url,headers,body:{content:formData,values:Object.fromEntries(formData.entries())},failedResponseHandler,successfulResponseHandler,abortSignal,fetch});}();});return function postFormDataToApi(_x31){return _ref48.apply(this,arguments);};}();var postToApi=/*#__PURE__*/function(){var _ref50=_asyncToGenerator2(function(_ref51){let{url,headers={},body,successfulResponseHandler,failedResponseHandler,abortSignal,fetch=getOriginalFetch2()}=_ref51;return function*(){try{const response=yield fetch(url,{method:"POST",headers:withUserAgentSuffix(headers,"ai-sdk/provider-utils/".concat(VERSION$3),getRuntimeEnvironmentUserAgent()),body:body.content,signal:abortSignal});const responseHeaders=extractResponseHeaders(response);if(!response.ok){let errorInformation;try{errorInformation=yield failedResponseHandler({response,url,requestBodyValues:body.values});}catch(error){if(isAbortError(error)||APICallError.isInstance(error)){throw error;}throw new APICallError({message:"Failed to process error response",cause:error,statusCode:response.status,url,responseHeaders,requestBodyValues:body.values});}throw errorInformation.value;}try{return yield successfulResponseHandler({response,url,requestBodyValues:body.values});}catch(error){if(error instanceof Error){if(isAbortError(error)||APICallError.isInstance(error)){throw error;}}throw new APICallError({message:"Failed to process successful response",cause:error,statusCode:response.status,url,responseHeaders,requestBodyValues:body.values});}}catch(error){throw handleFetchError({error,url,requestBodyValues:body.values});}}();});return function postToApi(_x32){return _ref50.apply(this,arguments);};}();// src/types/tool.ts
function tool(tool2){return tool2;}// src/provider-defined-tool-factory.ts
function createProviderDefinedToolFactory(_ref52){let{id,name,inputSchema}=_ref52;return _ref53=>{let{execute,outputSchema,toModelOutput,onInputStart,onInputDelta,onInputAvailable}=_ref53,args=_objectWithoutProperties(_ref53,_excluded);return tool({type:"provider-defined",id,name,args,inputSchema,outputSchema,execute,toModelOutput,onInputStart,onInputDelta,onInputAvailable});};}function createProviderDefinedToolFactoryWithOutputSchema(_ref54){let{id,name,inputSchema,outputSchema}=_ref54;return _ref55=>{let{execute,toModelOutput,onInputStart,onInputDelta,onInputAvailable}=_ref55,args=_objectWithoutProperties(_ref55,_excluded2);return tool({type:"provider-defined",id,name,args,inputSchema,outputSchema,execute,toModelOutput,onInputStart,onInputDelta,onInputAvailable});};}// src/resolve.ts
function resolve(_x33){return _resolve.apply(this,arguments);}function _resolve(){_resolve=_asyncToGenerator2(function*(value){if(typeof value==="function"){value=value();}return Promise.resolve(value);});return _resolve.apply(this,arguments);}var createJsonErrorResponseHandler=_ref56=>{let{errorSchema,errorToMessage,isRetryable}=_ref56;return/*#__PURE__*/function(){var _ref57=_asyncToGenerator2(function(_ref58){let{response,url,requestBodyValues}=_ref58;return function*(){const responseBody=yield response.text();const responseHeaders=extractResponseHeaders(response);if(responseBody.trim()===""){return{responseHeaders,value:new APICallError({message:response.statusText,url,requestBodyValues,statusCode:response.status,responseHeaders,responseBody,isRetryable:isRetryable==null?void 0:isRetryable(response)})};}try{const parsedError=yield parseJSON({text:responseBody,schema:errorSchema});return{responseHeaders,value:new APICallError({message:errorToMessage(parsedError),url,requestBodyValues,statusCode:response.status,responseHeaders,responseBody,data:parsedError,isRetryable:isRetryable==null?void 0:isRetryable(response,parsedError)})};}catch(parseError){return{responseHeaders,value:new APICallError({message:response.statusText,url,requestBodyValues,statusCode:response.status,responseHeaders,responseBody,isRetryable:isRetryable==null?void 0:isRetryable(response)})};}}();});return function(_x34){return _ref57.apply(this,arguments);};}();};var createEventSourceResponseHandler=chunkSchema=>(/*#__PURE__*/function(){var _ref59=_asyncToGenerator2(function(_ref60){let{response}=_ref60;return function*(){const responseHeaders=extractResponseHeaders(response);if(response.body==null){throw new EmptyResponseBodyError({});}return{responseHeaders,value:parseJsonEventStream({stream:response.body,schema:chunkSchema})};}();});return function(_x35){return _ref59.apply(this,arguments);};}());var createJsonResponseHandler=responseSchema=>(/*#__PURE__*/function(){var _ref61=_asyncToGenerator2(function(_ref62){let{response,url,requestBodyValues}=_ref62;return function*(){const responseBody=yield response.text();const parsedResult=yield safeParseJSON({text:responseBody,schema:responseSchema});const responseHeaders=extractResponseHeaders(response);if(!parsedResult.success){throw new APICallError({message:"Invalid JSON response",cause:parsedResult.error,statusCode:response.status,responseHeaders,responseBody,url,requestBodyValues});}return{responseHeaders,value:parsedResult.value,rawValue:parsedResult.rawValue};}();});return function(_x36){return _ref61.apply(this,arguments);};}());var createBinaryResponseHandler=()=>(/*#__PURE__*/function(){var _ref63=_asyncToGenerator2(function(_ref64){let{response,url,requestBodyValues}=_ref64;return function*(){const responseHeaders=extractResponseHeaders(response);if(!response.body){throw new APICallError({message:"Response body is empty",url,requestBodyValues,statusCode:response.status,responseHeaders,responseBody:void 0});}try{const buffer=yield response.arrayBuffer();return{responseHeaders,value:new Uint8Array(buffer)};}catch(error){throw new APICallError({message:"Failed to read response as array buffer",url,requestBodyValues,statusCode:response.status,responseHeaders,responseBody:void 0,cause:error});}}();});return function(_x37){return _ref63.apply(this,arguments);};}());// src/zod-to-json-schema/get-relative-path.ts
var getRelativePath=(pathA,pathB)=>{let i=0;for(;i<pathA.length&&i<pathB.length;i++){if(pathA[i]!==pathB[i])break;}return[(pathA.length-i).toString(),...pathB.slice(i)].join("/");};// src/zod-to-json-schema/options.ts
var ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use");var defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:true,rejectedAdditionalProperties:false,definitionPath:"definitions",strictUnions:false,definitions:{},errorMessages:false,patternStrategy:"escape",applyRegexFlags:false,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};var getDefaultOptions=options=>typeof options==="string"?_objectSpread2(_objectSpread2({},defaultOptions),{},{name:options}):_objectSpread2(_objectSpread2({},defaultOptions),options);// src/zod-to-json-schema/parsers/any.ts
function parseAnyDef(){return{};}function parseArrayDef(def,refs){var _a,_b,_c;const res={type:"array"};if(((_a=def.type)==null?void 0:_a._def)&&((_c=(_b=def.type)==null?void 0:_b._def)==null?void 0:_c.typeName)!==ZodFirstPartyTypeKind.ZodAny){res.items=parseDef(def.type._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"items"]}));}if(def.minLength){res.minItems=def.minLength.value;}if(def.maxLength){res.maxItems=def.maxLength.value;}if(def.exactLength){res.minItems=def.exactLength.value;res.maxItems=def.exactLength.value;}return res;}// src/zod-to-json-schema/parsers/bigint.ts
function parseBigintDef(def){const res={type:"integer",format:"int64"};if(!def.checks)return res;for(const check of def.checks){switch(check.kind){case"min":if(check.inclusive){res.minimum=check.value;}else{res.exclusiveMinimum=check.value;}break;case"max":if(check.inclusive){res.maximum=check.value;}else{res.exclusiveMaximum=check.value;}break;case"multipleOf":res.multipleOf=check.value;break;}}return res;}// src/zod-to-json-schema/parsers/boolean.ts
function parseBooleanDef(){return{type:"boolean"};}// src/zod-to-json-schema/parsers/branded.ts
function parseBrandedDef(_def,refs){return parseDef(_def.type._def,refs);}// src/zod-to-json-schema/parsers/catch.ts
var parseCatchDef=(def,refs)=>{return parseDef(def.innerType._def,refs);};// src/zod-to-json-schema/parsers/date.ts
function parseDateDef(def,refs,overrideDateStrategy){const strategy=overrideDateStrategy!=null?overrideDateStrategy:refs.dateStrategy;if(Array.isArray(strategy)){return{anyOf:strategy.map((item,i)=>parseDateDef(def,refs,item))};}switch(strategy){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(def);}}var integerDateParser=def=>{const res={type:"integer",format:"unix-time"};for(const check of def.checks){switch(check.kind){case"min":res.minimum=check.value;break;case"max":res.maximum=check.value;break;}}return res;};// src/zod-to-json-schema/parsers/default.ts
function parseDefaultDef(_def,refs){return _objectSpread2(_objectSpread2({},parseDef(_def.innerType._def,refs)),{},{default:_def.defaultValue()});}// src/zod-to-json-schema/parsers/effects.ts
function parseEffectsDef(_def,refs){return refs.effectStrategy==="input"?parseDef(_def.schema._def,refs):parseAnyDef();}// src/zod-to-json-schema/parsers/enum.ts
function parseEnumDef(def){return{type:"string",enum:Array.from(def.values)};}// src/zod-to-json-schema/parsers/intersection.ts
var isJsonSchema7AllOfType=type=>{if("type"in type&&type.type==="string")return false;return"allOf"in type;};function parseIntersectionDef(def,refs){const allOf=[parseDef(def.left._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"allOf","0"]})),parseDef(def.right._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"allOf","1"]}))].filter(x=>!!x);const mergedAllOf=[];allOf.forEach(schema=>{if(isJsonSchema7AllOfType(schema)){mergedAllOf.push(...schema.allOf);}else{let nestedSchema=schema;if("additionalProperties"in schema&&schema.additionalProperties===false){const{additionalProperties}=schema,rest=_objectWithoutProperties(schema,_excluded3);nestedSchema=rest;}mergedAllOf.push(nestedSchema);}});return mergedAllOf.length?{allOf:mergedAllOf}:void 0;}// src/zod-to-json-schema/parsers/literal.ts
function parseLiteralDef(def){const parsedType=typeof def.value;if(parsedType!=="bigint"&&parsedType!=="number"&&parsedType!=="boolean"&&parsedType!=="string"){return{type:Array.isArray(def.value)?"array":"object"};}return{type:parsedType==="bigint"?"integer":parsedType,const:def.value};}// src/zod-to-json-schema/parsers/string.ts
var emojiRegex=void 0;var zodPatterns={/**
   * `c` was changed to `[cC]` to replicate /i flag
   */cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,/**
   * `a-z` was added to replicate /i flag
   */email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,/**
   * Constructed a valid Unicode RegExp
   *
   * Lazily instantiate since this type of regex isn't supported
   * in all envs (e.g. React Native).
   *
   * See:
   * https://github.com/colinhacks/zod/issues/2433
   * Fix in Zod:
   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b
   */emoji:()=>{if(emojiRegex===void 0){emojiRegex=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");}return emojiRegex;},/**
   * Unused
   */uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,/**
   * Unused
   */ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,/**
   * Unused
   */ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function parseStringDef(def,refs){const res={type:"string"};if(def.checks){for(const check of def.checks){switch(check.kind){case"min":res.minLength=typeof res.minLength==="number"?Math.max(res.minLength,check.value):check.value;break;case"max":res.maxLength=typeof res.maxLength==="number"?Math.min(res.maxLength,check.value):check.value;break;case"email":switch(refs.emailStrategy){case"format:email":addFormat(res,"email",check.message,refs);break;case"format:idn-email":addFormat(res,"idn-email",check.message,refs);break;case"pattern:zod":addPattern(res,zodPatterns.email,check.message,refs);break;}break;case"url":addFormat(res,"uri",check.message,refs);break;case"uuid":addFormat(res,"uuid",check.message,refs);break;case"regex":addPattern(res,check.regex,check.message,refs);break;case"cuid":addPattern(res,zodPatterns.cuid,check.message,refs);break;case"cuid2":addPattern(res,zodPatterns.cuid2,check.message,refs);break;case"startsWith":addPattern(res,RegExp("^".concat(escapeLiteralCheckValue(check.value,refs))),check.message,refs);break;case"endsWith":addPattern(res,RegExp("".concat(escapeLiteralCheckValue(check.value,refs),"$")),check.message,refs);break;case"datetime":addFormat(res,"date-time",check.message,refs);break;case"date":addFormat(res,"date",check.message,refs);break;case"time":addFormat(res,"time",check.message,refs);break;case"duration":addFormat(res,"duration",check.message,refs);break;case"length":res.minLength=typeof res.minLength==="number"?Math.max(res.minLength,check.value):check.value;res.maxLength=typeof res.maxLength==="number"?Math.min(res.maxLength,check.value):check.value;break;case"includes":{addPattern(res,RegExp(escapeLiteralCheckValue(check.value,refs)),check.message,refs);break;}case"ip":{if(check.version!=="v6"){addFormat(res,"ipv4",check.message,refs);}if(check.version!=="v4"){addFormat(res,"ipv6",check.message,refs);}break;}case"base64url":addPattern(res,zodPatterns.base64url,check.message,refs);break;case"jwt":addPattern(res,zodPatterns.jwt,check.message,refs);break;case"cidr":{if(check.version!=="v6"){addPattern(res,zodPatterns.ipv4Cidr,check.message,refs);}if(check.version!=="v4"){addPattern(res,zodPatterns.ipv6Cidr,check.message,refs);}break;}case"emoji":addPattern(res,zodPatterns.emoji(),check.message,refs);break;case"ulid":{addPattern(res,zodPatterns.ulid,check.message,refs);break;}case"base64":{switch(refs.base64Strategy){case"format:binary":{addFormat(res,"binary",check.message,refs);break;}case"contentEncoding:base64":{res.contentEncoding="base64";break;}case"pattern:zod":{addPattern(res,zodPatterns.base64,check.message,refs);break;}}break;}case"nanoid":{addPattern(res,zodPatterns.nanoid,check.message,refs);}}}}return res;}function escapeLiteralCheckValue(literal,refs){return refs.patternStrategy==="escape"?escapeNonAlphaNumeric(literal):literal;}var ALPHA_NUMERIC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function escapeNonAlphaNumeric(source){let result="";for(let i=0;i<source.length;i++){if(!ALPHA_NUMERIC.has(source[i])){result+="\\";}result+=source[i];}return result;}function addFormat(schema,value,message,refs){var _a;if(schema.format||((_a=schema.anyOf)==null?void 0:_a.some(x=>x.format))){if(!schema.anyOf){schema.anyOf=[];}if(schema.format){schema.anyOf.push({format:schema.format});delete schema.format;}schema.anyOf.push(_objectSpread2({format:value},message&&refs.errorMessages&&{errorMessage:{format:message}}));}else{schema.format=value;}}function addPattern(schema,regex,message,refs){var _a;if(schema.pattern||((_a=schema.allOf)==null?void 0:_a.some(x=>x.pattern))){if(!schema.allOf){schema.allOf=[];}if(schema.pattern){schema.allOf.push({pattern:schema.pattern});delete schema.pattern;}schema.allOf.push(_objectSpread2({pattern:stringifyRegExpWithFlags(regex,refs)},message&&refs.errorMessages&&{errorMessage:{pattern:message}}));}else{schema.pattern=stringifyRegExpWithFlags(regex,refs);}}function stringifyRegExpWithFlags(regex,refs){var _a;if(!refs.applyRegexFlags||!regex.flags){return regex.source;}const flags={i:regex.flags.includes("i"),// Case-insensitive
m:regex.flags.includes("m"),// `^` and `$` matches adjacent to newline characters
s:regex.flags.includes("s")// `.` matches newlines
};const source=flags.i?regex.source.toLowerCase():regex.source;let pattern="";let isEscaped=false;let inCharGroup=false;let inCharRange=false;for(let i=0;i<source.length;i++){if(isEscaped){pattern+=source[i];isEscaped=false;continue;}if(flags.i){if(inCharGroup){if(source[i].match(/[a-z]/)){if(inCharRange){pattern+=source[i];pattern+="".concat(source[i-2],"-").concat(source[i]).toUpperCase();inCharRange=false;}else if(source[i+1]==="-"&&((_a=source[i+2])==null?void 0:_a.match(/[a-z]/))){pattern+=source[i];inCharRange=true;}else{pattern+="".concat(source[i]).concat(source[i].toUpperCase());}continue;}}else if(source[i].match(/[a-z]/)){pattern+="[".concat(source[i]).concat(source[i].toUpperCase(),"]");continue;}}if(flags.m){if(source[i]==="^"){pattern+="(^|(?<=[\r\n]))";continue;}else if(source[i]==="$"){pattern+="($|(?=[\r\n]))";continue;}}if(flags.s&&source[i]==="."){pattern+=inCharGroup?"".concat(source[i],"\r\n"):"[".concat(source[i],"\r\n]");continue;}pattern+=source[i];if(source[i]==="\\"){isEscaped=true;}else if(inCharGroup&&source[i]==="]"){inCharGroup=false;}else if(!inCharGroup&&source[i]==="["){inCharGroup=true;}}try{new RegExp(pattern);}catch(e){console.warn("Could not convert regex pattern at ".concat(refs.currentPath.join("/")," to a flag-independent form! Falling back to the flag-ignorant source"));return regex.source;}return pattern;}// src/zod-to-json-schema/parsers/record.ts
function parseRecordDef(def,refs){var _a,_b,_c,_d,_e,_f;const schema={type:"object",additionalProperties:(_a=parseDef(def.valueType._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"additionalProperties"]})))!=null?_a:refs.allowedAdditionalProperties};if(((_b=def.keyType)==null?void 0:_b._def.typeName)===ZodFirstPartyTypeKind.ZodString&&((_c=def.keyType._def.checks)==null?void 0:_c.length)){const _parseStringDef=parseStringDef(def.keyType._def,refs),{type}=_parseStringDef,keyType=_objectWithoutProperties(_parseStringDef,_excluded4);return _objectSpread2(_objectSpread2({},schema),{},{propertyNames:keyType});}else if(((_d=def.keyType)==null?void 0:_d._def.typeName)===ZodFirstPartyTypeKind.ZodEnum){return _objectSpread2(_objectSpread2({},schema),{},{propertyNames:{enum:def.keyType._def.values}});}else if(((_e=def.keyType)==null?void 0:_e._def.typeName)===ZodFirstPartyTypeKind.ZodBranded&&def.keyType._def.type._def.typeName===ZodFirstPartyTypeKind.ZodString&&((_f=def.keyType._def.type._def.checks)==null?void 0:_f.length)){const _parseBrandedDef=parseBrandedDef(def.keyType._def,refs),{type}=_parseBrandedDef,keyType=_objectWithoutProperties(_parseBrandedDef,_excluded5);return _objectSpread2(_objectSpread2({},schema),{},{propertyNames:keyType});}return schema;}// src/zod-to-json-schema/parsers/map.ts
function parseMapDef(def,refs){if(refs.mapStrategy==="record"){return parseRecordDef(def,refs);}const keys=parseDef(def.keyType._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"items","items","0"]}))||parseAnyDef();const values=parseDef(def.valueType._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"items","items","1"]}))||parseAnyDef();return{type:"array",maxItems:125,items:{type:"array",items:[keys,values],minItems:2,maxItems:2}};}// src/zod-to-json-schema/parsers/native-enum.ts
function parseNativeEnumDef(def){const object=def.values;const actualKeys=Object.keys(def.values).filter(key=>{return typeof object[object[key]]!=="number";});const actualValues=actualKeys.map(key=>object[key]);const parsedTypes=Array.from(new Set(actualValues.map(values=>typeof values)));return{type:parsedTypes.length===1?parsedTypes[0]==="string"?"string":"number":["string","number"],enum:actualValues};}// src/zod-to-json-schema/parsers/never.ts
function parseNeverDef(){return{not:parseAnyDef()};}// src/zod-to-json-schema/parsers/null.ts
function parseNullDef(){return{type:"null"};}// src/zod-to-json-schema/parsers/union.ts
var primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef(def,refs){const options=def.options instanceof Map?Array.from(def.options.values()):def.options;if(options.every(x=>x._def.typeName in primitiveMappings&&(!x._def.checks||!x._def.checks.length))){const types=options.reduce((types2,x)=>{const type=primitiveMappings[x._def.typeName];return type&&!types2.includes(type)?[...types2,type]:types2;},[]);return{type:types.length>1?types:types[0]};}else if(options.every(x=>x._def.typeName==="ZodLiteral"&&!x.description)){const types=options.reduce((acc,x)=>{const type=typeof x._def.value;switch(type){case"string":case"number":case"boolean":return[...acc,type];case"bigint":return[...acc,"integer"];case"object":if(x._def.value===null)return[...acc,"null"];case"symbol":case"undefined":case"function":default:return acc;}},[]);if(types.length===options.length){const uniqueTypes=types.filter((x,i,a)=>a.indexOf(x)===i);return{type:uniqueTypes.length>1?uniqueTypes:uniqueTypes[0],enum:options.reduce((acc,x)=>{return acc.includes(x._def.value)?acc:[...acc,x._def.value];},[])};}}else if(options.every(x=>x._def.typeName==="ZodEnum")){return{type:"string",enum:options.reduce((acc,x)=>[...acc,...x._def.values.filter(x2=>!acc.includes(x2))],[])};}return asAnyOf(def,refs);}var asAnyOf=(def,refs)=>{const anyOf=(def.options instanceof Map?Array.from(def.options.values()):def.options).map((x,i)=>parseDef(x._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"anyOf","".concat(i)]}))).filter(x=>!!x&&(!refs.strictUnions||typeof x==="object"&&Object.keys(x).length>0));return anyOf.length?{anyOf}:void 0;};// src/zod-to-json-schema/parsers/nullable.ts
function parseNullableDef(def,refs){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(def.innerType._def.typeName)&&(!def.innerType._def.checks||!def.innerType._def.checks.length)){return{type:[primitiveMappings[def.innerType._def.typeName],"null"]};}const base=parseDef(def.innerType._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"anyOf","0"]}));return base&&{anyOf:[base,{type:"null"}]};}// src/zod-to-json-schema/parsers/number.ts
function parseNumberDef(def){const res={type:"number"};if(!def.checks)return res;for(const check of def.checks){switch(check.kind){case"int":res.type="integer";break;case"min":if(check.inclusive){res.minimum=check.value;}else{res.exclusiveMinimum=check.value;}break;case"max":if(check.inclusive){res.maximum=check.value;}else{res.exclusiveMaximum=check.value;}break;case"multipleOf":res.multipleOf=check.value;break;}}return res;}// src/zod-to-json-schema/parsers/object.ts
function parseObjectDef(def,refs){const result={type:"object",properties:{}};const required=[];const shape=def.shape();for(const propName in shape){let propDef=shape[propName];if(propDef===void 0||propDef._def===void 0){continue;}const propOptional=safeIsOptional(propDef);const parsedDef=parseDef(propDef._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"properties",propName],propertyPath:[...refs.currentPath,"properties",propName]}));if(parsedDef===void 0){continue;}result.properties[propName]=parsedDef;if(!propOptional){required.push(propName);}}if(required.length){result.required=required;}const additionalProperties=decideAdditionalProperties(def,refs);if(additionalProperties!==void 0){result.additionalProperties=additionalProperties;}return result;}function decideAdditionalProperties(def,refs){if(def.catchall._def.typeName!=="ZodNever"){return parseDef(def.catchall._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"additionalProperties"]}));}switch(def.unknownKeys){case"passthrough":return refs.allowedAdditionalProperties;case"strict":return refs.rejectedAdditionalProperties;case"strip":return refs.removeAdditionalStrategy==="strict"?refs.allowedAdditionalProperties:refs.rejectedAdditionalProperties;}}function safeIsOptional(schema){try{return schema.isOptional();}catch(e){return true;}}// src/zod-to-json-schema/parsers/optional.ts
var parseOptionalDef=(def,refs)=>{var _a;if(refs.currentPath.toString()===((_a=refs.propertyPath)==null?void 0:_a.toString())){return parseDef(def.innerType._def,refs);}const innerSchema=parseDef(def.innerType._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"anyOf","1"]}));return innerSchema?{anyOf:[{not:parseAnyDef()},innerSchema]}:parseAnyDef();};// src/zod-to-json-schema/parsers/pipeline.ts
var parsePipelineDef=(def,refs)=>{if(refs.pipeStrategy==="input"){return parseDef(def.in._def,refs);}else if(refs.pipeStrategy==="output"){return parseDef(def.out._def,refs);}const a=parseDef(def.in._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"allOf","0"]}));const b=parseDef(def.out._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"allOf",a?"1":"0"]}));return{allOf:[a,b].filter(x=>x!==void 0)};};// src/zod-to-json-schema/parsers/promise.ts
function parsePromiseDef(def,refs){return parseDef(def.type._def,refs);}// src/zod-to-json-schema/parsers/set.ts
function parseSetDef(def,refs){const items=parseDef(def.valueType._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"items"]}));const schema={type:"array",uniqueItems:true,items};if(def.minSize){schema.minItems=def.minSize.value;}if(def.maxSize){schema.maxItems=def.maxSize.value;}return schema;}// src/zod-to-json-schema/parsers/tuple.ts
function parseTupleDef(def,refs){if(def.rest){return{type:"array",minItems:def.items.length,items:def.items.map((x,i)=>parseDef(x._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"items","".concat(i)]}))).reduce((acc,x)=>x===void 0?acc:[...acc,x],[]),additionalItems:parseDef(def.rest._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"additionalItems"]}))};}else{return{type:"array",minItems:def.items.length,maxItems:def.items.length,items:def.items.map((x,i)=>parseDef(x._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.currentPath,"items","".concat(i)]}))).reduce((acc,x)=>x===void 0?acc:[...acc,x],[])};}}// src/zod-to-json-schema/parsers/undefined.ts
function parseUndefinedDef(){return{not:parseAnyDef()};}// src/zod-to-json-schema/parsers/unknown.ts
function parseUnknownDef(){return parseAnyDef();}// src/zod-to-json-schema/parsers/readonly.ts
var parseReadonlyDef=(def,refs)=>{return parseDef(def.innerType._def,refs);};// src/zod-to-json-schema/select-parser.ts
var selectParser=(def,typeName,refs)=>{switch(typeName){case ZodFirstPartyTypeKind.ZodString:return parseStringDef(def,refs);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef(def);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef(def,refs);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef(def);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef(def,refs);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef();case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef(def,refs);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef(def,refs);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef(def,refs);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef(def,refs);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef(def,refs);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef(def);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef(def);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef(def);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef(def,refs);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef(def,refs);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef(def,refs);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef(def,refs);case ZodFirstPartyTypeKind.ZodLazy:return()=>def.getter()._def;case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef(def,refs);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef(def,refs);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef(def,refs);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef(def,refs);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef(def,refs);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef(def,refs);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef(def,refs);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:return void 0;default:return/* @__PURE__ */(_=>void 0)();}};// src/zod-to-json-schema/parse-def.ts
function parseDef(def,refs){let forceResolution=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var _a;const seenItem=refs.seen.get(def);if(refs.override){const overrideResult=(_a=refs.override)==null?void 0:_a.call(refs,def,refs,seenItem,forceResolution);if(overrideResult!==ignoreOverride){return overrideResult;}}if(seenItem&&!forceResolution){const seenSchema=get$ref(seenItem,refs);if(seenSchema!==void 0){return seenSchema;}}const newItem={def,path:refs.currentPath,jsonSchema:void 0};refs.seen.set(def,newItem);const jsonSchemaOrGetter=selectParser(def,def.typeName,refs);const jsonSchema2=typeof jsonSchemaOrGetter==="function"?parseDef(jsonSchemaOrGetter(),refs):jsonSchemaOrGetter;if(jsonSchema2){addMeta(def,refs,jsonSchema2);}if(refs.postProcess){const postProcessResult=refs.postProcess(jsonSchema2,def,refs);newItem.jsonSchema=jsonSchema2;return postProcessResult;}newItem.jsonSchema=jsonSchema2;return jsonSchema2;}var get$ref=(item,refs)=>{switch(refs.$refStrategy){case"root":return{$ref:item.path.join("/")};case"relative":return{$ref:getRelativePath(refs.currentPath,item.path)};case"none":case"seen":{if(item.path.length<refs.currentPath.length&&item.path.every((value,index)=>refs.currentPath[index]===value)){console.warn("Recursive reference detected at ".concat(refs.currentPath.join("/"),"! Defaulting to any"));return parseAnyDef();}return refs.$refStrategy==="seen"?parseAnyDef():void 0;}}};var addMeta=(def,refs,jsonSchema2)=>{if(def.description){jsonSchema2.description=def.description;}return jsonSchema2;};// src/zod-to-json-schema/refs.ts
var getRefs=options=>{const _options=getDefaultOptions(options);const currentPath=_options.name!==void 0?[..._options.basePath,_options.definitionPath,_options.name]:_options.basePath;return _objectSpread2(_objectSpread2({},_options),{},{currentPath,propertyPath:void 0,seen:new Map(Object.entries(_options.definitions).map(_ref65=>{let[name,def]=_ref65;return[def._def,{def:def._def,path:[..._options.basePath,_options.definitionPath,name],// Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.
jsonSchema:void 0}];}))});};// src/zod-to-json-schema/zod-to-json-schema.ts
var zodToJsonSchema=(schema,options)=>{var _a;const refs=getRefs(options);let definitions=typeof options==="object"&&options.definitions?Object.entries(options.definitions).reduce((acc,_ref66)=>{let[name2,schema2]=_ref66;var _a2;return _objectSpread2(_objectSpread2({},acc),{},{[name2]:(_a2=parseDef(schema2._def,_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.basePath,refs.definitionPath,name2]}),true))!=null?_a2:parseAnyDef()});},{}):void 0;const name=typeof options==="string"?options:(options==null?void 0:options.nameStrategy)==="title"?void 0:options==null?void 0:options.name;const main=(_a=parseDef(schema._def,name===void 0?refs:_objectSpread2(_objectSpread2({},refs),{},{currentPath:[...refs.basePath,refs.definitionPath,name]}),false))!=null?_a:parseAnyDef();const title=typeof options==="object"&&options.name!==void 0&&options.nameStrategy==="title"?options.name:void 0;if(title!==void 0){main.title=title;}const combined=name===void 0?definitions?_objectSpread2(_objectSpread2({},main),{},{[refs.definitionPath]:definitions}):main:{$ref:[...(refs.$refStrategy==="relative"?[]:refs.basePath),refs.definitionPath,name].join("/"),[refs.definitionPath]:_objectSpread2(_objectSpread2({},definitions),{},{[name]:main})};combined.$schema="http://json-schema.org/draft-07/schema#";return combined;};// src/zod-to-json-schema/index.ts
var zod_to_json_schema_default=zodToJsonSchema;// src/zod-schema.ts
function zod3Schema(zodSchema2,options){var _a;const useReferences=(_a=void 0)!=null?_a:false;return jsonSchema(zod_to_json_schema_default(zodSchema2,{$refStrategy:useReferences?"root":"none"}),{validate:function(){var _ref67=_asyncToGenerator2(function*(value){const result=yield zodSchema2.safeParseAsync(value);return result.success?{success:true,value:result.data}:{success:false,error:result.error};});return function validate(_x38){return _ref67.apply(this,arguments);};}()});}function zod4Schema(zodSchema2,options){var _a;const useReferences=(_a=void 0)!=null?_a:false;const z4JSONSchema=toJSONSchema(zodSchema2,{target:"draft-7",io:"output",reused:useReferences?"ref":"inline"});return jsonSchema(z4JSONSchema,{validate:function(){var _ref68=_asyncToGenerator2(function*(value){const result=yield safeParseAsync(zodSchema2,value);return result.success?{success:true,value:result.data}:{success:false,error:result.error};});return function validate(_x39){return _ref68.apply(this,arguments);};}()});}function isZod4Schema(zodSchema2){return"_zod"in zodSchema2;}function zodSchema(zodSchema2,options){if(isZod4Schema(zodSchema2)){return zod4Schema(zodSchema2);}else{return zod3Schema(zodSchema2);}}// src/schema.ts
var schemaSymbol=Symbol.for("vercel.ai.schema");function jsonSchema(jsonSchema2){let{validate}=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return{[schemaSymbol]:true,_type:void 0,// should never be used directly
[validatorSymbol]:true,jsonSchema:jsonSchema2,validate};}function isSchema(value){return typeof value==="object"&&value!==null&&schemaSymbol in value&&value[schemaSymbol]===true&&"jsonSchema"in value&&"validate"in value;}function asSchema(schema){return schema==null?jsonSchema({properties:{},additionalProperties:false}):isSchema(schema)?schema:zodSchema(schema);}// src/uint8-utils.ts
var{btoa,atob:atob$1}=globalThis;function convertBase64ToUint8Array(base64String){const base64Url=base64String.replace(/-/g,"+").replace(/_/g,"/");const latin1string=atob$1(base64Url);return Uint8Array.from(latin1string,byte=>byte.codePointAt(0));}function convertUint8ArrayToBase64(array){let latin1string="";for(let i=0;i<array.length;i++){latin1string+=String.fromCodePoint(array[i]);}return btoa(latin1string);}function convertToBase64(value){return value instanceof Uint8Array?convertUint8ArrayToBase64(value):value;}// src/without-trailing-slash.ts
function withoutTrailingSlash(url){return url==null?void 0:url.replace(/\/$/,"");}// src/is-async-iterable.ts
function isAsyncIterable(obj){return obj!=null&&typeof obj[Symbol.asyncIterator]==="function";}// src/types/execute-tool.ts
function executeTool(_x9){return _executeTool.apply(this,arguments);}// src/google-provider.ts
function _executeTool(){_executeTool=_wrapAsyncGenerator(function(_ref69){let{execute,input,options}=_ref69;return function*(){const result=execute(input,options);if(isAsyncIterable(result)){let lastOutput;var _iteratorAbruptCompletion2=false;var _didIteratorError2=false;var _iteratorError2;try{for(var _iterator2=_asyncIterator2(result),_step2;_iteratorAbruptCompletion2=!(_step2=yield _awaitAsyncGenerator(_iterator2.next())).done;_iteratorAbruptCompletion2=false){const output=_step2.value;{lastOutput=output;yield{type:"preliminary",output};}}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(_iteratorAbruptCompletion2&&_iterator2.return!=null){yield _awaitAsyncGenerator(_iterator2.return());}}finally{if(_didIteratorError2){throw _iteratorError2;}}}yield{type:"final",output:lastOutput};}else{yield{type:"final",output:yield _awaitAsyncGenerator(result)};}}();});return _executeTool.apply(this,arguments);}var googleErrorDataSchema=object$1({error:object$1({code:number$1().nullable(),message:string$1(),status:string$1()})});var googleFailedResponseHandler=createJsonErrorResponseHandler({errorSchema:googleErrorDataSchema,errorToMessage:data=>data.error.message});var googleGenerativeAIEmbeddingProviderOptions=object$1({/**
   * Optional. Optional reduced dimension for the output embedding.
   * If set, excessive values in the output embedding are truncated from the end.
   */outputDimensionality:number$1().optional(),/**
   * Optional. Specifies the task type for generating embeddings.
   * Supported task types:
   * - SEMANTIC_SIMILARITY: Optimized for text similarity.
   * - CLASSIFICATION: Optimized for text classification.
   * - CLUSTERING: Optimized for clustering texts based on similarity.
   * - RETRIEVAL_DOCUMENT: Optimized for document retrieval.
   * - RETRIEVAL_QUERY: Optimized for query-based retrieval.
   * - QUESTION_ANSWERING: Optimized for answering questions.
   * - FACT_VERIFICATION: Optimized for verifying factual information.
   * - CODE_RETRIEVAL_QUERY: Optimized for retrieving code blocks based on natural language queries.
   */taskType:_enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()});// src/google-generative-ai-embedding-model.ts
var GoogleGenerativeAIEmbeddingModel=class{constructor(modelId,config){this.specificationVersion="v2";this.maxEmbeddingsPerCall=2048;this.supportsParallelCalls=true;this.modelId=modelId;this.config=config;}get provider(){return this.config.provider;}doEmbed(_x40){var _this0=this;return _asyncToGenerator2(function(_ref70){let{values,headers,abortSignal,providerOptions}=_ref70;return function*(){const googleOptions=yield parseProviderOptions({provider:"google",providerOptions,schema:googleGenerativeAIEmbeddingProviderOptions});if(values.length>_this0.maxEmbeddingsPerCall){throw new TooManyEmbeddingValuesForCallError({provider:_this0.provider,modelId:_this0.modelId,maxEmbeddingsPerCall:_this0.maxEmbeddingsPerCall,values});}const mergedHeaders=combineHeaders(yield resolve(_this0.config.headers),headers);if(values.length===1){const{responseHeaders:responseHeaders2,value:response2,rawValue:rawValue2}=yield postJsonToApi({url:"".concat(_this0.config.baseURL,"/models/").concat(_this0.modelId,":embedContent"),headers:mergedHeaders,body:{model:"models/".concat(_this0.modelId),content:{parts:[{text:values[0]}]},outputDimensionality:googleOptions==null?void 0:googleOptions.outputDimensionality,taskType:googleOptions==null?void 0:googleOptions.taskType},failedResponseHandler:googleFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(googleGenerativeAISingleEmbeddingResponseSchema),abortSignal,fetch:_this0.config.fetch});return{embeddings:[response2.embedding.values],usage:void 0,response:{headers:responseHeaders2,body:rawValue2}};}const{responseHeaders,value:response,rawValue}=yield postJsonToApi({url:"".concat(_this0.config.baseURL,"/models/").concat(_this0.modelId,":batchEmbedContents"),headers:mergedHeaders,body:{requests:values.map(value=>({model:"models/".concat(_this0.modelId),content:{role:"user",parts:[{text:value}]},outputDimensionality:googleOptions==null?void 0:googleOptions.outputDimensionality,taskType:googleOptions==null?void 0:googleOptions.taskType}))},failedResponseHandler:googleFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(googleGenerativeAITextEmbeddingResponseSchema),abortSignal,fetch:_this0.config.fetch});return{embeddings:response.embeddings.map(item=>item.values),usage:void 0,response:{headers:responseHeaders,body:rawValue}};}();}).apply(this,arguments);}};var googleGenerativeAITextEmbeddingResponseSchema=object$1({embeddings:array(object$1({values:array(number$1())}))});var googleGenerativeAISingleEmbeddingResponseSchema=object$1({embedding:object$1({values:array(number$1())})});// src/convert-json-schema-to-openapi-schema.ts
function convertJSONSchemaToOpenAPISchema(jsonSchema){if(jsonSchema==null||isEmptyObjectSchema(jsonSchema)){return void 0;}if(typeof jsonSchema==="boolean"){return{type:"boolean",properties:{}};}const{type,description,required,properties,items,allOf,anyOf,oneOf,format,const:constValue,minLength,enum:enumValues}=jsonSchema;const result={};if(description)result.description=description;if(required)result.required=required;if(format)result.format=format;if(constValue!==void 0){result.enum=[constValue];}if(type){if(Array.isArray(type)){if(type.includes("null")){result.type=type.filter(t=>t!=="null")[0];result.nullable=true;}else{result.type=type;}}else if(type==="null"){result.type="null";}else{result.type=type;}}if(enumValues!==void 0){result.enum=enumValues;}if(properties!=null){result.properties=Object.entries(properties).reduce((acc,_ref71)=>{let[key,value]=_ref71;acc[key]=convertJSONSchemaToOpenAPISchema(value);return acc;},{});}if(items){result.items=Array.isArray(items)?items.map(convertJSONSchemaToOpenAPISchema):convertJSONSchemaToOpenAPISchema(items);}if(allOf){result.allOf=allOf.map(convertJSONSchemaToOpenAPISchema);}if(anyOf){if(anyOf.some(schema=>typeof schema==="object"&&(schema==null?void 0:schema.type)==="null")){const nonNullSchemas=anyOf.filter(schema=>!(typeof schema==="object"&&(schema==null?void 0:schema.type)==="null"));if(nonNullSchemas.length===1){const converted=convertJSONSchemaToOpenAPISchema(nonNullSchemas[0]);if(typeof converted==="object"){result.nullable=true;Object.assign(result,converted);}}else{result.anyOf=nonNullSchemas.map(convertJSONSchemaToOpenAPISchema);result.nullable=true;}}else{result.anyOf=anyOf.map(convertJSONSchemaToOpenAPISchema);}}if(oneOf){result.oneOf=oneOf.map(convertJSONSchemaToOpenAPISchema);}if(minLength!==void 0){result.minLength=minLength;}return result;}function isEmptyObjectSchema(jsonSchema){return jsonSchema!=null&&typeof jsonSchema==="object"&&jsonSchema.type==="object"&&(jsonSchema.properties==null||Object.keys(jsonSchema.properties).length===0)&&!jsonSchema.additionalProperties;}function convertToGoogleGenerativeAIMessages(prompt,options){var _a;const systemInstructionParts=[];const contents=[];let systemMessagesAllowed=true;const isGemmaModel=(_a=options==null?void 0:options.isGemmaModel)!=null?_a:false;for(const{role,content}of prompt){switch(role){case"system":{if(!systemMessagesAllowed){throw new UnsupportedFunctionalityError({functionality:"system messages are only supported at the beginning of the conversation"});}systemInstructionParts.push({text:content});break;}case"user":{systemMessagesAllowed=false;const parts=[];for(const part of content){switch(part.type){case"text":{parts.push({text:part.text});break;}case"file":{const mediaType=part.mediaType==="image/*"?"image/jpeg":part.mediaType;parts.push(part.data instanceof URL?{fileData:{mimeType:mediaType,fileUri:part.data.toString()}}:{inlineData:{mimeType:mediaType,data:convertToBase64(part.data)}});break;}}}contents.push({role:"user",parts});break;}case"assistant":{systemMessagesAllowed=false;contents.push({role:"model",parts:content.map(part=>{var _a2,_b,_c,_d,_e,_f;switch(part.type){case"text":{return part.text.length===0?void 0:{text:part.text,thoughtSignature:(_b=(_a2=part.providerOptions)==null?void 0:_a2.google)==null?void 0:_b.thoughtSignature};}case"reasoning":{return part.text.length===0?void 0:{text:part.text,thought:true,thoughtSignature:(_d=(_c=part.providerOptions)==null?void 0:_c.google)==null?void 0:_d.thoughtSignature};}case"file":{if(part.mediaType!=="image/png"){throw new UnsupportedFunctionalityError({functionality:"Only PNG images are supported in assistant messages"});}if(part.data instanceof URL){throw new UnsupportedFunctionalityError({functionality:"File data URLs in assistant messages are not supported"});}return{inlineData:{mimeType:part.mediaType,data:convertToBase64(part.data)}};}case"tool-call":{return{functionCall:{name:part.toolName,args:part.input},thoughtSignature:(_f=(_e=part.providerOptions)==null?void 0:_e.google)==null?void 0:_f.thoughtSignature};}}}).filter(part=>part!==void 0)});break;}case"tool":{systemMessagesAllowed=false;const parts=[];for(const part of content){const output=part.output;if(output.type==="content"){for(const contentPart of output.value){switch(contentPart.type){case"text":parts.push({functionResponse:{name:part.toolName,response:{name:part.toolName,content:contentPart.text}}});break;case"media":parts.push({inlineData:{mimeType:contentPart.mediaType,data:contentPart.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:parts.push({text:JSON.stringify(contentPart)});break;}}}else{parts.push({functionResponse:{name:part.toolName,response:{name:part.toolName,content:output.value}}});}}contents.push({role:"user",parts});break;}}}if(isGemmaModel&&systemInstructionParts.length>0&&contents.length>0&&contents[0].role==="user"){const systemText=systemInstructionParts.map(part=>part.text).join("\n\n");contents[0].parts.unshift({text:systemText+"\n\n"});}return{systemInstruction:systemInstructionParts.length>0&&!isGemmaModel?{parts:systemInstructionParts}:void 0,contents};}// src/get-model-path.ts
function getModelPath(modelId){return modelId.includes("/")?modelId:"models/".concat(modelId);}var googleGenerativeAIProviderOptions=object$1({responseModalities:array(_enum(["TEXT","IMAGE"])).optional(),thinkingConfig:object$1({thinkingBudget:number$1().optional(),includeThoughts:boolean$1().optional()}).optional(),/**
  Optional.
  The name of the cached content used as context to serve the prediction.
  Format: cachedContents/{cachedContent}
     */cachedContent:string$1().optional(),/**
   * Optional. Enable structured output. Default is true.
   *
   * This is useful when the JSON Schema contains elements that are
   * not supported by the OpenAPI schema version that
   * Google Generative AI uses. You can use this to disable
   * structured outputs if you need to.
   */structuredOutputs:boolean$1().optional(),/**
  Optional. A list of unique safety settings for blocking unsafe content.
   */safetySettings:array(object$1({category:_enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:_enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:_enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),/**
   * Optional. Enables timestamp understanding for audio-only files.
   *
   * https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/audio-understanding
   */audioTimestamp:boolean$1().optional(),/**
   * Optional. Defines labels used in billing reports. Available on Vertex AI only.
   *
   * https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/add-labels-to-api-calls
   */labels:record(string$1(),string$1()).optional()});function prepareTools$2(_ref72){let{tools,toolChoice,modelId}=_ref72;var _a;tools=(tools==null?void 0:tools.length)?tools:void 0;const toolWarnings=[];const isGemini2=modelId.includes("gemini-2");const supportsDynamicRetrieval=modelId.includes("gemini-1.5-flash")&&!modelId.includes("-8b");if(tools==null){return{tools:void 0,toolConfig:void 0,toolWarnings};}const hasFunctionTools=tools.some(tool=>tool.type==="function");const hasProviderDefinedTools=tools.some(tool=>tool.type==="provider-defined");if(hasFunctionTools&&hasProviderDefinedTools){toolWarnings.push({type:"unsupported-tool",tool:tools.find(tool=>tool.type==="function"),details:"Cannot mix function tools with provider-defined tools in the same request. Please use either function tools or provider-defined tools, but not both."});}if(hasProviderDefinedTools){const googleTools2={};const providerDefinedTools=tools.filter(tool=>tool.type==="provider-defined");providerDefinedTools.forEach(tool=>{switch(tool.id){case"google.google_search":if(isGemini2){googleTools2.googleSearch={};}else if(supportsDynamicRetrieval){googleTools2.googleSearchRetrieval={dynamicRetrievalConfig:{mode:tool.args.mode,dynamicThreshold:tool.args.dynamicThreshold}};}else{googleTools2.googleSearchRetrieval={};}break;case"google.url_context":if(isGemini2){googleTools2.urlContext={};}else{toolWarnings.push({type:"unsupported-tool",tool,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});}break;case"google.code_execution":if(isGemini2){googleTools2.codeExecution={};}else{toolWarnings.push({type:"unsupported-tool",tool,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});}break;default:toolWarnings.push({type:"unsupported-tool",tool});break;}});return{tools:Object.keys(googleTools2).length>0?googleTools2:void 0,toolConfig:void 0,toolWarnings};}const functionDeclarations=[];for(const tool of tools){switch(tool.type){case"function":functionDeclarations.push({name:tool.name,description:(_a=tool.description)!=null?_a:"",parameters:convertJSONSchemaToOpenAPISchema(tool.inputSchema)});break;default:toolWarnings.push({type:"unsupported-tool",tool});break;}}if(toolChoice==null){return{tools:{functionDeclarations},toolConfig:void 0,toolWarnings};}const type=toolChoice.type;switch(type){case"auto":return{tools:{functionDeclarations},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings};case"none":return{tools:{functionDeclarations},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings};case"required":return{tools:{functionDeclarations},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings};case"tool":return{tools:{functionDeclarations},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[toolChoice.toolName]}},toolWarnings};default:{const _exhaustiveCheck=type;throw new UnsupportedFunctionalityError({functionality:"tool choice type: ".concat(_exhaustiveCheck)});}}}// src/map-google-generative-ai-finish-reason.ts
function mapGoogleGenerativeAIFinishReason(_ref73){let{finishReason,hasToolCalls}=_ref73;switch(finishReason){case"STOP":return hasToolCalls?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown";}}var groundingChunkSchema=object$1({web:object$1({uri:string$1(),title:string$1()}).nullish(),retrievedContext:object$1({uri:string$1(),title:string$1()}).nullish()});var groundingMetadataSchema=object$1({webSearchQueries:array(string$1()).nullish(),retrievalQueries:array(string$1()).nullish(),searchEntryPoint:object$1({renderedContent:string$1()}).nullish(),groundingChunks:array(groundingChunkSchema).nullish(),groundingSupports:array(object$1({segment:object$1({startIndex:number$1().nullish(),endIndex:number$1().nullish(),text:string$1().nullish()}),segment_text:string$1().nullish(),groundingChunkIndices:array(number$1()).nullish(),supportChunkIndices:array(number$1()).nullish(),confidenceScores:array(number$1()).nullish(),confidenceScore:array(number$1()).nullish()})).nullish(),retrievalMetadata:union([object$1({webDynamicRetrievalScore:number$1()}),object$1({})]).nullish()});var googleSearch=createProviderDefinedToolFactory({id:"google.google_search",name:"google_search",inputSchema:object$1({mode:_enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:number$1().default(1)})});var urlMetadataSchema=object$1({retrievedUrl:string$1(),urlRetrievalStatus:string$1()});var urlContextMetadataSchema=object$1({urlMetadata:array(urlMetadataSchema)});var urlContext=createProviderDefinedToolFactory({id:"google.url_context",name:"url_context",inputSchema:object$1({})});// src/google-generative-ai-language-model.ts
var GoogleGenerativeAILanguageModel=class{constructor(modelId,config){this.specificationVersion="v2";var _a;this.modelId=modelId;this.config=config;this.generateId=(_a=config.generateId)!=null?_a:generateId;}get provider(){return this.config.provider;}get supportedUrls(){var _a,_b,_c;return(_c=(_b=(_a=this.config).supportedUrls)==null?void 0:_b.call(_a))!=null?_c:{};}getArgs(_x41){var _this1=this;return _asyncToGenerator2(function(_ref74){let{prompt,maxOutputTokens,temperature,topP,topK,frequencyPenalty,presencePenalty,stopSequences,responseFormat,seed,tools,toolChoice,providerOptions}=_ref74;return function*(){var _a,_b;const warnings=[];const googleOptions=yield parseProviderOptions({provider:"google",providerOptions,schema:googleGenerativeAIProviderOptions});if(((_a=googleOptions==null?void 0:googleOptions.thinkingConfig)==null?void 0:_a.includeThoughts)===true&&!_this1.config.provider.startsWith("google.vertex.")){warnings.push({type:"other",message:"The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (".concat(_this1.config.provider,").")});}const isGemmaModel=_this1.modelId.toLowerCase().startsWith("gemma-");const{contents,systemInstruction}=convertToGoogleGenerativeAIMessages(prompt,{isGemmaModel});const{tools:googleTools2,toolConfig:googleToolConfig,toolWarnings}=prepareTools$2({tools,toolChoice,modelId:_this1.modelId});return{args:{generationConfig:_objectSpread2(_objectSpread2({// standardized settings:
maxOutputTokens,temperature,topK,topP,frequencyPenalty,presencePenalty,stopSequences,seed,// response format:
responseMimeType:(responseFormat==null?void 0:responseFormat.type)==="json"?"application/json":void 0,responseSchema:(responseFormat==null?void 0:responseFormat.type)==="json"&&responseFormat.schema!=null&&(// Google GenAI does not support all OpenAPI Schema features,
// so this is needed as an escape hatch:
// TODO convert into provider option
(_b=googleOptions==null?void 0:googleOptions.structuredOutputs)!=null?_b:true)?convertJSONSchemaToOpenAPISchema(responseFormat.schema):void 0},(googleOptions==null?void 0:googleOptions.audioTimestamp)&&{audioTimestamp:googleOptions.audioTimestamp}),{},{// provider options:
responseModalities:googleOptions==null?void 0:googleOptions.responseModalities,thinkingConfig:googleOptions==null?void 0:googleOptions.thinkingConfig}),contents,systemInstruction:isGemmaModel?void 0:systemInstruction,safetySettings:googleOptions==null?void 0:googleOptions.safetySettings,tools:googleTools2,toolConfig:googleToolConfig,cachedContent:googleOptions==null?void 0:googleOptions.cachedContent,labels:googleOptions==null?void 0:googleOptions.labels},warnings:[...warnings,...toolWarnings]};}();}).apply(this,arguments);}doGenerate(options){var _this10=this;return _asyncToGenerator2(function*(){var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l;const{args,warnings}=yield _this10.getArgs(options);const body=JSON.stringify(args);const mergedHeaders=combineHeaders(yield resolve(_this10.config.headers),options.headers);const{responseHeaders,value:response,rawValue:rawResponse}=yield postJsonToApi({url:"".concat(_this10.config.baseURL,"/").concat(getModelPath(_this10.modelId),":generateContent"),headers:mergedHeaders,body:args,failedResponseHandler:googleFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(responseSchema),abortSignal:options.abortSignal,fetch:_this10.config.fetch});const candidate=response.candidates[0];const content=[];const parts=(_b=(_a=candidate.content)==null?void 0:_a.parts)!=null?_b:[];const usageMetadata=response.usageMetadata;let lastCodeExecutionToolCallId;for(const part of parts){if("executableCode"in part&&((_c=part.executableCode)==null?void 0:_c.code)){const toolCallId=_this10.config.generateId();lastCodeExecutionToolCallId=toolCallId;content.push({type:"tool-call",toolCallId,toolName:"code_execution",input:JSON.stringify(part.executableCode),providerExecuted:true});}else if("codeExecutionResult"in part&&part.codeExecutionResult){content.push({type:"tool-result",// Assumes a result directly follows its corresponding call part.
toolCallId:lastCodeExecutionToolCallId,toolName:"code_execution",result:{outcome:part.codeExecutionResult.outcome,output:part.codeExecutionResult.output},providerExecuted:true});lastCodeExecutionToolCallId=void 0;}else if("text"in part&&part.text!=null&&part.text.length>0){content.push({type:part.thought===true?"reasoning":"text",text:part.text,providerMetadata:part.thoughtSignature?{google:{thoughtSignature:part.thoughtSignature}}:void 0});}else if("functionCall"in part){content.push({type:"tool-call",toolCallId:_this10.config.generateId(),toolName:part.functionCall.name,input:JSON.stringify(part.functionCall.args),providerMetadata:part.thoughtSignature?{google:{thoughtSignature:part.thoughtSignature}}:void 0});}else if("inlineData"in part){content.push({type:"file",data:part.inlineData.data,mediaType:part.inlineData.mimeType});}}const sources=(_d=extractSources({groundingMetadata:candidate.groundingMetadata,generateId:_this10.config.generateId}))!=null?_d:[];for(const source of sources){content.push(source);}return{content,finishReason:mapGoogleGenerativeAIFinishReason({finishReason:candidate.finishReason,hasToolCalls:content.some(part=>part.type==="tool-call")}),usage:{inputTokens:(_e=usageMetadata==null?void 0:usageMetadata.promptTokenCount)!=null?_e:void 0,outputTokens:(_f=usageMetadata==null?void 0:usageMetadata.candidatesTokenCount)!=null?_f:void 0,totalTokens:(_g=usageMetadata==null?void 0:usageMetadata.totalTokenCount)!=null?_g:void 0,reasoningTokens:(_h=usageMetadata==null?void 0:usageMetadata.thoughtsTokenCount)!=null?_h:void 0,cachedInputTokens:(_i=usageMetadata==null?void 0:usageMetadata.cachedContentTokenCount)!=null?_i:void 0},warnings,providerMetadata:{google:{groundingMetadata:(_j=candidate.groundingMetadata)!=null?_j:null,urlContextMetadata:(_k=candidate.urlContextMetadata)!=null?_k:null,safetyRatings:(_l=candidate.safetyRatings)!=null?_l:null,usageMetadata:usageMetadata!=null?usageMetadata:null}},request:{body},response:{// TODO timestamp, model id, id
headers:responseHeaders,body:rawResponse}};})();}doStream(options){var _this11=this;return _asyncToGenerator2(function*(){const{args,warnings}=yield _this11.getArgs(options);const body=JSON.stringify(args);const headers=combineHeaders(yield resolve(_this11.config.headers),options.headers);const{responseHeaders,value:response}=yield postJsonToApi({url:"".concat(_this11.config.baseURL,"/").concat(getModelPath(_this11.modelId),":streamGenerateContent?alt=sse"),headers,body:args,failedResponseHandler:googleFailedResponseHandler,successfulResponseHandler:createEventSourceResponseHandler(chunkSchema),abortSignal:options.abortSignal,fetch:_this11.config.fetch});let finishReason="unknown";const usage={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let providerMetadata=void 0;const generateId3=_this11.config.generateId;let hasToolCalls=false;let currentTextBlockId=null;let currentReasoningBlockId=null;let blockCounter=0;const emittedSourceUrls=/* @__PURE__ */new Set();let lastCodeExecutionToolCallId;return{stream:response.pipeThrough(new TransformStream({start(controller){controller.enqueue({type:"stream-start",warnings});},transform(chunk,controller){var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k;if(options.includeRawChunks){controller.enqueue({type:"raw",rawValue:chunk.rawValue});}if(!chunk.success){controller.enqueue({type:"error",error:chunk.error});return;}const value=chunk.value;const usageMetadata=value.usageMetadata;if(usageMetadata!=null){usage.inputTokens=(_a=usageMetadata.promptTokenCount)!=null?_a:void 0;usage.outputTokens=(_b=usageMetadata.candidatesTokenCount)!=null?_b:void 0;usage.totalTokens=(_c=usageMetadata.totalTokenCount)!=null?_c:void 0;usage.reasoningTokens=(_d=usageMetadata.thoughtsTokenCount)!=null?_d:void 0;usage.cachedInputTokens=(_e=usageMetadata.cachedContentTokenCount)!=null?_e:void 0;}const candidate=(_f=value.candidates)==null?void 0:_f[0];if(candidate==null){return;}const content=candidate.content;const sources=extractSources({groundingMetadata:candidate.groundingMetadata,generateId:generateId3});if(sources!=null){for(const source of sources){if(source.sourceType==="url"&&!emittedSourceUrls.has(source.url)){emittedSourceUrls.add(source.url);controller.enqueue(source);}}}if(content!=null){const parts=(_g=content.parts)!=null?_g:[];for(const part of parts){if("executableCode"in part&&((_h=part.executableCode)==null?void 0:_h.code)){const toolCallId=generateId3();lastCodeExecutionToolCallId=toolCallId;controller.enqueue({type:"tool-call",toolCallId,toolName:"code_execution",input:JSON.stringify(part.executableCode),providerExecuted:true});hasToolCalls=true;}else if("codeExecutionResult"in part&&part.codeExecutionResult){const toolCallId=lastCodeExecutionToolCallId;if(toolCallId){controller.enqueue({type:"tool-result",toolCallId,toolName:"code_execution",result:{outcome:part.codeExecutionResult.outcome,output:part.codeExecutionResult.output},providerExecuted:true});lastCodeExecutionToolCallId=void 0;}}else if("text"in part&&part.text!=null&&part.text.length>0){if(part.thought===true){if(currentTextBlockId!==null){controller.enqueue({type:"text-end",id:currentTextBlockId});currentTextBlockId=null;}if(currentReasoningBlockId===null){currentReasoningBlockId=String(blockCounter++);controller.enqueue({type:"reasoning-start",id:currentReasoningBlockId,providerMetadata:part.thoughtSignature?{google:{thoughtSignature:part.thoughtSignature}}:void 0});}controller.enqueue({type:"reasoning-delta",id:currentReasoningBlockId,delta:part.text,providerMetadata:part.thoughtSignature?{google:{thoughtSignature:part.thoughtSignature}}:void 0});}else{if(currentReasoningBlockId!==null){controller.enqueue({type:"reasoning-end",id:currentReasoningBlockId});currentReasoningBlockId=null;}if(currentTextBlockId===null){currentTextBlockId=String(blockCounter++);controller.enqueue({type:"text-start",id:currentTextBlockId,providerMetadata:part.thoughtSignature?{google:{thoughtSignature:part.thoughtSignature}}:void 0});}controller.enqueue({type:"text-delta",id:currentTextBlockId,delta:part.text,providerMetadata:part.thoughtSignature?{google:{thoughtSignature:part.thoughtSignature}}:void 0});}}}const inlineDataParts=getInlineDataParts(content.parts);if(inlineDataParts!=null){for(const part of inlineDataParts){controller.enqueue({type:"file",mediaType:part.inlineData.mimeType,data:part.inlineData.data});}}const toolCallDeltas=getToolCallsFromParts({parts:content.parts,generateId:generateId3});if(toolCallDeltas!=null){for(const toolCall of toolCallDeltas){controller.enqueue({type:"tool-input-start",id:toolCall.toolCallId,toolName:toolCall.toolName,providerMetadata:toolCall.providerMetadata});controller.enqueue({type:"tool-input-delta",id:toolCall.toolCallId,delta:toolCall.args,providerMetadata:toolCall.providerMetadata});controller.enqueue({type:"tool-input-end",id:toolCall.toolCallId,providerMetadata:toolCall.providerMetadata});controller.enqueue({type:"tool-call",toolCallId:toolCall.toolCallId,toolName:toolCall.toolName,input:toolCall.args,providerMetadata:toolCall.providerMetadata});hasToolCalls=true;}}}if(candidate.finishReason!=null){finishReason=mapGoogleGenerativeAIFinishReason({finishReason:candidate.finishReason,hasToolCalls});providerMetadata={google:{groundingMetadata:(_i=candidate.groundingMetadata)!=null?_i:null,urlContextMetadata:(_j=candidate.urlContextMetadata)!=null?_j:null,safetyRatings:(_k=candidate.safetyRatings)!=null?_k:null}};if(usageMetadata!=null){providerMetadata.google.usageMetadata=usageMetadata;}}},flush(controller){if(currentTextBlockId!==null){controller.enqueue({type:"text-end",id:currentTextBlockId});}if(currentReasoningBlockId!==null){controller.enqueue({type:"reasoning-end",id:currentReasoningBlockId});}controller.enqueue({type:"finish",finishReason,usage,providerMetadata});}})),response:{headers:responseHeaders},request:{body}};})();}};function getToolCallsFromParts(_ref75){let{parts,generateId:generateId3}=_ref75;const functionCallParts=parts==null?void 0:parts.filter(part=>"functionCall"in part);return functionCallParts==null||functionCallParts.length===0?void 0:functionCallParts.map(part=>({type:"tool-call",toolCallId:generateId3(),toolName:part.functionCall.name,args:JSON.stringify(part.functionCall.args),providerMetadata:part.thoughtSignature?{google:{thoughtSignature:part.thoughtSignature}}:void 0}));}function getInlineDataParts(parts){return parts==null?void 0:parts.filter(part=>"inlineData"in part);}function extractSources(_ref76){let{groundingMetadata,generateId:generateId3}=_ref76;var _a;return(_a=groundingMetadata==null?void 0:groundingMetadata.groundingChunks)==null?void 0:_a.filter(chunk=>chunk.web!=null).map(chunk=>({type:"source",sourceType:"url",id:generateId3(),url:chunk.web.uri,title:chunk.web.title}));}var contentSchema=object$1({parts:array(union([// note: order matters since text can be fully empty
object$1({functionCall:object$1({name:string$1(),args:unknown()}),thoughtSignature:string$1().nullish()}),object$1({inlineData:object$1({mimeType:string$1(),data:string$1()})}),object$1({executableCode:object$1({language:string$1(),code:string$1()}).nullish(),codeExecutionResult:object$1({outcome:string$1(),output:string$1()}).nullish(),text:string$1().nullish(),thought:boolean$1().nullish(),thoughtSignature:string$1().nullish()})])).nullish()});var safetyRatingSchema=object$1({category:string$1().nullish(),probability:string$1().nullish(),probabilityScore:number$1().nullish(),severity:string$1().nullish(),severityScore:number$1().nullish(),blocked:boolean$1().nullish()});var usageSchema$2=object$1({cachedContentTokenCount:number$1().nullish(),thoughtsTokenCount:number$1().nullish(),promptTokenCount:number$1().nullish(),candidatesTokenCount:number$1().nullish(),totalTokenCount:number$1().nullish()});var responseSchema=object$1({candidates:array(object$1({content:contentSchema.nullish().or(object$1({}).strict()),finishReason:string$1().nullish(),safetyRatings:array(safetyRatingSchema).nullish(),groundingMetadata:groundingMetadataSchema.nullish(),urlContextMetadata:urlContextMetadataSchema.nullish()})),usageMetadata:usageSchema$2.nullish()});var chunkSchema=object$1({candidates:array(object$1({content:contentSchema.nullish(),finishReason:string$1().nullish(),safetyRatings:array(safetyRatingSchema).nullish(),groundingMetadata:groundingMetadataSchema.nullish(),urlContextMetadata:urlContextMetadataSchema.nullish()})).nullish(),usageMetadata:usageSchema$2.nullish()});var codeExecution=createProviderDefinedToolFactoryWithOutputSchema({id:"google.code_execution",name:"code_execution",inputSchema:object$1({language:string$1().describe("The programming language of the code."),code:string$1().describe("The code to be executed.")}),outputSchema:object$1({outcome:string$1().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:string$1().describe("The output from the code execution.")})});// src/google-tools.ts
var googleTools={/**
   * Creates a Google search tool that gives Google direct access to real-time web content.
   * Must have name "google_search".
   */googleSearch,/**
   * Creates a URL context tool that gives Google direct access to real-time web content.
   * Must have name "url_context".
   */urlContext,/**
   * A tool that enables the model to generate and run Python code.
   * Must have name "code_execution".
   *
   * @note Ensure the selected model supports Code Execution.
   * Multi-tool usage with the code execution tool is typically compatible with Gemini >=2 models.
   *
   * @see https://ai.google.dev/gemini-api/docs/code-execution (Google AI)
   * @see https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/code-execution-api (Vertex AI)
   */codeExecution};var GoogleGenerativeAIImageModel=class{constructor(modelId,settings,config){this.modelId=modelId;this.settings=settings;this.config=config;this.specificationVersion="v2";}get maxImagesPerCall(){var _a;return(_a=this.settings.maxImagesPerCall)!=null?_a:4;}get provider(){return this.config.provider;}doGenerate(options){var _this12=this;return _asyncToGenerator2(function*(){var _a,_b,_c;const{prompt,n=1,size="1024x1024",aspectRatio="1:1",seed,providerOptions,headers,abortSignal}=options;const warnings=[];if(size!=null){warnings.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."});}if(seed!=null){warnings.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});}const googleOptions=yield parseProviderOptions({provider:"google",providerOptions,schema:googleImageProviderOptionsSchema});const currentDate=(_c=(_b=(_a=_this12.config._internal)==null?void 0:_a.currentDate)==null?void 0:_b.call(_a))!=null?_c:/* @__PURE__ */new Date();const parameters={sampleCount:n};if(aspectRatio!=null){parameters.aspectRatio=aspectRatio;}if(googleOptions){Object.assign(parameters,googleOptions);}const body={instances:[{prompt}],parameters};const{responseHeaders,value:response}=yield postJsonToApi({url:"".concat(_this12.config.baseURL,"/models/").concat(_this12.modelId,":predict"),headers:combineHeaders(yield resolve(_this12.config.headers),headers),body,failedResponseHandler:googleFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(googleImageResponseSchema),abortSignal,fetch:_this12.config.fetch});return{images:response.predictions.map(p=>p.bytesBase64Encoded),warnings:warnings!=null?warnings:[],providerMetadata:{google:{images:response.predictions.map(prediction=>({// Add any prediction-specific metadata here
}))}},response:{timestamp:currentDate,modelId:_this12.modelId,headers:responseHeaders}};})();}};var googleImageResponseSchema=object$1({predictions:array(object$1({bytesBase64Encoded:string$1()})).default([])});var googleImageProviderOptionsSchema=object$1({personGeneration:_enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:_enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()});// src/google-provider.ts
function createGoogleGenerativeAI(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _a;const baseURL=(_a=withoutTrailingSlash(options.baseURL))!=null?_a:"https://generativelanguage.googleapis.com/v1beta";const getHeaders=()=>_objectSpread2({"x-goog-api-key":loadApiKey({apiKey:options.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"})},options.headers);const createChatModel=modelId=>{var _a2;return new GoogleGenerativeAILanguageModel(modelId,{provider:"google.generative-ai",baseURL,headers:getHeaders,generateId:(_a2=options.generateId)!=null?_a2:generateId,supportedUrls:()=>({"*":[// Google Generative Language "files" endpoint
// e.g. https://generativelanguage.googleapis.com/v1beta/files/...
new RegExp("^".concat(baseURL,"/files/.*$")),// YouTube URLs (public or unlisted videos)
new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:options.fetch});};const createEmbeddingModel=modelId=>new GoogleGenerativeAIEmbeddingModel(modelId,{provider:"google.generative-ai",baseURL,headers:getHeaders,fetch:options.fetch});const createImageModel=function(modelId){let settings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new GoogleGenerativeAIImageModel(modelId,settings,{provider:"google.generative-ai",baseURL,headers:getHeaders,fetch:options.fetch});};const provider=function(modelId){if(new.target){throw new Error("The Google Generative AI model function cannot be called with the new keyword.");}return createChatModel(modelId);};provider.languageModel=createChatModel;provider.chat=createChatModel;provider.generativeAI=createChatModel;provider.embedding=createEmbeddingModel;provider.textEmbedding=createEmbeddingModel;provider.textEmbeddingModel=createEmbeddingModel;provider.image=createImageModel;provider.imageModel=createImageModel;provider.tools=googleTools;return provider;}createGoogleGenerativeAI();// src/openai-provider.ts
var openaiErrorDataSchema=object$1({error:object$1({message:string$1(),// The additional information below is handled loosely to support
// OpenAI-compatible providers that have slightly different error
// responses:
type:string$1().nullish(),param:any().nullish(),code:union([string$1(),number$1()]).nullish()})});var openaiFailedResponseHandler=createJsonErrorResponseHandler({errorSchema:openaiErrorDataSchema,errorToMessage:data=>data.error.message});function convertToOpenAIChatMessages(_ref77){let{prompt,systemMessageMode="system"}=_ref77;const messages=[];const warnings=[];for(const{role,content}of prompt){switch(role){case"system":{switch(systemMessageMode){case"system":{messages.push({role:"system",content});break;}case"developer":{messages.push({role:"developer",content});break;}case"remove":{warnings.push({type:"other",message:"system messages are removed for this model"});break;}default:{const _exhaustiveCheck=systemMessageMode;throw new Error("Unsupported system message mode: ".concat(_exhaustiveCheck));}}break;}case"user":{if(content.length===1&&content[0].type==="text"){messages.push({role:"user",content:content[0].text});break;}messages.push({role:"user",content:content.map((part,index)=>{var _a,_b,_c;switch(part.type){case"text":{return{type:"text",text:part.text};}case"file":{if(part.mediaType.startsWith("image/")){const mediaType=part.mediaType==="image/*"?"image/jpeg":part.mediaType;return{type:"image_url",image_url:{url:part.data instanceof URL?part.data.toString():"data:".concat(mediaType,";base64,").concat(convertToBase64(part.data)),// OpenAI specific extension: image detail
detail:(_b=(_a=part.providerOptions)==null?void 0:_a.openai)==null?void 0:_b.imageDetail}};}else if(part.mediaType.startsWith("audio/")){if(part.data instanceof URL){throw new UnsupportedFunctionalityError({functionality:"audio file parts with URLs"});}switch(part.mediaType){case"audio/wav":{return{type:"input_audio",input_audio:{data:convertToBase64(part.data),format:"wav"}};}case"audio/mp3":case"audio/mpeg":{return{type:"input_audio",input_audio:{data:convertToBase64(part.data),format:"mp3"}};}default:{throw new UnsupportedFunctionalityError({functionality:"audio content parts with media type ".concat(part.mediaType)});}}}else if(part.mediaType==="application/pdf"){if(part.data instanceof URL){throw new UnsupportedFunctionalityError({functionality:"PDF file parts with URLs"});}return{type:"file",file:typeof part.data==="string"&&part.data.startsWith("file-")?{file_id:part.data}:{filename:(_c=part.filename)!=null?_c:"part-".concat(index,".pdf"),file_data:"data:application/pdf;base64,".concat(convertToBase64(part.data))}};}else{throw new UnsupportedFunctionalityError({functionality:"file part media type ".concat(part.mediaType)});}}}})});break;}case"assistant":{let text="";const toolCalls=[];for(const part of content){switch(part.type){case"text":{text+=part.text;break;}case"tool-call":{toolCalls.push({id:part.toolCallId,type:"function",function:{name:part.toolName,arguments:JSON.stringify(part.input)}});break;}}}messages.push({role:"assistant",content:text,tool_calls:toolCalls.length>0?toolCalls:void 0});break;}case"tool":{for(const toolResponse of content){const output=toolResponse.output;let contentValue;switch(output.type){case"text":case"error-text":contentValue=output.value;break;case"content":case"json":case"error-json":contentValue=JSON.stringify(output.value);break;}messages.push({role:"tool",tool_call_id:toolResponse.toolCallId,content:contentValue});}break;}default:{const _exhaustiveCheck=role;throw new Error("Unsupported role: ".concat(_exhaustiveCheck));}}}return{messages,warnings};}// src/chat/get-response-metadata.ts
function getResponseMetadata$1(_ref78){let{id,model,created}=_ref78;return{id:id!=null?id:void 0,modelId:model!=null?model:void 0,timestamp:created!=null?new Date(created*1e3):void 0};}// src/chat/map-openai-finish-reason.ts
function mapOpenAIFinishReason(finishReason){switch(finishReason){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown";}}var openaiProviderOptions=object$1({/**
   * Modify the likelihood of specified tokens appearing in the completion.
   *
   * Accepts a JSON object that maps tokens (specified by their token ID in
   * the GPT tokenizer) to an associated bias value from -100 to 100.
   */logitBias:record(number(),number$1()).optional(),/**
   * Return the log probabilities of the tokens.
   *
   * Setting to true will return the log probabilities of the tokens that
   * were generated.
   *
   * Setting to a number will return the log probabilities of the top n
   * tokens that were generated.
   */logprobs:union([boolean$1(),number$1()]).optional(),/**
   * Whether to enable parallel function calling during tool use. Default to true.
   */parallelToolCalls:boolean$1().optional(),/**
   * A unique identifier representing your end-user, which can help OpenAI to
   * monitor and detect abuse.
   */user:string$1().optional(),/**
   * Reasoning effort for reasoning models. Defaults to `medium`.
   */reasoningEffort:_enum(["minimal","low","medium","high"]).optional(),/**
   * Maximum number of completion tokens to generate. Useful for reasoning models.
   */maxCompletionTokens:number$1().optional(),/**
   * Whether to enable persistence in responses API.
   */store:boolean$1().optional(),/**
   * Metadata to associate with the request.
   */metadata:record(string$1().max(64),string$1().max(512)).optional(),/**
   * Parameters for prediction mode.
   */prediction:record(string$1(),any()).optional(),/**
   * Whether to use structured outputs.
   *
   * @default true
   */structuredOutputs:boolean$1().optional(),/**
   * Service tier for the request.
   * - 'auto': Default service tier
   * - 'flex': 50% cheaper processing at the cost of increased latency. Only available for o3 and o4-mini models.
   * - 'priority': Higher-speed processing with predictably low latency at premium cost. Available for Enterprise customers.
   *
   * @default 'auto'
   */serviceTier:_enum(["auto","flex","priority"]).optional(),/**
   * Whether to use strict JSON schema validation.
   *
   * @default false
   */strictJsonSchema:boolean$1().optional(),/**
   * Controls the verbosity of the model's responses.
   * Lower values will result in more concise responses, while higher values will result in more verbose responses.
   */textVerbosity:_enum(["low","medium","high"]).optional(),/**
   * A cache key for prompt caching. Allows manual control over prompt caching behavior.
   * Useful for improving cache hit rates and working around automatic caching issues.
   */promptCacheKey:string$1().optional(),/**
   * A stable identifier used to help detect users of your application
   * that may be violating OpenAI's usage policies. The IDs should be a
   * string that uniquely identifies each user. We recommend hashing their
   * username or email address, in order to avoid sending us any identifying
   * information.
   */safetyIdentifier:string$1().optional()});var comparisonFilterSchema=object$1({key:string$1(),type:_enum(["eq","ne","gt","gte","lt","lte"]),value:union([string$1(),number$1(),boolean$1()])});var compoundFilterSchema=object$1({type:_enum(["and","or"]),filters:array(union([comparisonFilterSchema,lazy(()=>compoundFilterSchema)]))});var filtersSchema=union([comparisonFilterSchema,compoundFilterSchema]);var fileSearchArgsSchema=object$1({vectorStoreIds:array(string$1()).optional(),maxNumResults:number$1().optional(),ranking:object$1({ranker:_enum(["auto","default-2024-08-21"]).optional()}).optional(),filters:filtersSchema.optional()});var fileSearch=createProviderDefinedToolFactory({id:"openai.file_search",name:"file_search",inputSchema:object$1({query:string$1()})});var webSearchPreviewArgsSchema=object$1({/**
   * Search context size to use for the web search.
   * - high: Most comprehensive context, highest cost, slower response
   * - medium: Balanced context, cost, and latency (default)
   * - low: Least context, lowest cost, fastest response
   */searchContextSize:_enum(["low","medium","high"]).optional(),/**
   * User location information to provide geographically relevant search results.
   */userLocation:object$1({/**
     * Type of location (always 'approximate')
     */type:literal("approximate"),/**
     * Two-letter ISO country code (e.g., 'US', 'GB')
     */country:string$1().optional(),/**
     * City name (free text, e.g., 'Minneapolis')
     */city:string$1().optional(),/**
     * Region name (free text, e.g., 'Minnesota')
     */region:string$1().optional(),/**
     * IANA timezone (e.g., 'America/Chicago')
     */timezone:string$1().optional()}).optional()});var webSearchPreview=createProviderDefinedToolFactory({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:object$1({action:discriminatedUnion("type",[object$1({type:literal("search"),query:string$1().nullish()}),object$1({type:literal("open_page"),url:string$1()}),object$1({type:literal("find"),url:string$1(),pattern:string$1()})]).nullish()})});// src/chat/openai-chat-prepare-tools.ts
function prepareChatTools(_ref79){let{tools,toolChoice,structuredOutputs,strictJsonSchema}=_ref79;tools=(tools==null?void 0:tools.length)?tools:void 0;const toolWarnings=[];if(tools==null){return{tools:void 0,toolChoice:void 0,toolWarnings};}const openaiTools2=[];for(const tool of tools){switch(tool.type){case"function":openaiTools2.push({type:"function",function:{name:tool.name,description:tool.description,parameters:tool.inputSchema,strict:structuredOutputs?strictJsonSchema:void 0}});break;case"provider-defined":switch(tool.id){case"openai.file_search":{const args=fileSearchArgsSchema.parse(tool.args);openaiTools2.push({type:"file_search",vector_store_ids:args.vectorStoreIds,max_num_results:args.maxNumResults,ranking_options:args.ranking?{ranker:args.ranking.ranker}:void 0,filters:args.filters});break;}case"openai.web_search_preview":{const args=webSearchPreviewArgsSchema.parse(tool.args);openaiTools2.push({type:"web_search_preview",search_context_size:args.searchContextSize,user_location:args.userLocation});break;}default:toolWarnings.push({type:"unsupported-tool",tool});break;}break;default:toolWarnings.push({type:"unsupported-tool",tool});break;}}if(toolChoice==null){return{tools:openaiTools2,toolChoice:void 0,toolWarnings};}const type=toolChoice.type;switch(type){case"auto":case"none":case"required":return{tools:openaiTools2,toolChoice:type,toolWarnings};case"tool":return{tools:openaiTools2,toolChoice:{type:"function",function:{name:toolChoice.toolName}},toolWarnings};default:{const _exhaustiveCheck=type;throw new UnsupportedFunctionalityError({functionality:"tool choice type: ".concat(_exhaustiveCheck)});}}}// src/chat/openai-chat-language-model.ts
var OpenAIChatLanguageModel=class{constructor(modelId,config){this.specificationVersion="v2";this.supportedUrls={"image/*":[/^https?:\/\/.*$/]};this.modelId=modelId;this.config=config;}get provider(){return this.config.provider;}getArgs(_x42){var _this13=this;return _asyncToGenerator2(function(_ref80){let{prompt,maxOutputTokens,temperature,topP,topK,frequencyPenalty,presencePenalty,stopSequences,responseFormat,seed,tools,toolChoice,providerOptions}=_ref80;return function*(){var _a,_b,_c,_d;const warnings=[];const openaiOptions=(_a=yield parseProviderOptions({provider:"openai",providerOptions,schema:openaiProviderOptions}))!=null?_a:{};const structuredOutputs=(_b=openaiOptions.structuredOutputs)!=null?_b:true;if(topK!=null){warnings.push({type:"unsupported-setting",setting:"topK"});}if((responseFormat==null?void 0:responseFormat.type)==="json"&&responseFormat.schema!=null&&!structuredOutputs){warnings.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});}const{messages,warnings:messageWarnings}=convertToOpenAIChatMessages({prompt,systemMessageMode:getSystemMessageMode(_this13.modelId)});warnings.push(...messageWarnings);const strictJsonSchema=(_c=openaiOptions.strictJsonSchema)!=null?_c:false;const baseArgs={// model id:
model:_this13.modelId,// model specific settings:
logit_bias:openaiOptions.logitBias,logprobs:openaiOptions.logprobs===true||typeof openaiOptions.logprobs==="number"?true:void 0,top_logprobs:typeof openaiOptions.logprobs==="number"?openaiOptions.logprobs:typeof openaiOptions.logprobs==="boolean"?openaiOptions.logprobs?0:void 0:void 0,user:openaiOptions.user,parallel_tool_calls:openaiOptions.parallelToolCalls,// standardized settings:
max_tokens:maxOutputTokens,temperature,top_p:topP,frequency_penalty:frequencyPenalty,presence_penalty:presencePenalty,response_format:(responseFormat==null?void 0:responseFormat.type)==="json"?structuredOutputs&&responseFormat.schema!=null?{type:"json_schema",json_schema:{schema:responseFormat.schema,strict:strictJsonSchema,name:(_d=responseFormat.name)!=null?_d:"response",description:responseFormat.description}}:{type:"json_object"}:void 0,stop:stopSequences,seed,verbosity:openaiOptions.textVerbosity,// openai specific settings:
// TODO AI SDK 6: remove, we auto-map maxOutputTokens now
max_completion_tokens:openaiOptions.maxCompletionTokens,store:openaiOptions.store,metadata:openaiOptions.metadata,prediction:openaiOptions.prediction,reasoning_effort:openaiOptions.reasoningEffort,service_tier:openaiOptions.serviceTier,prompt_cache_key:openaiOptions.promptCacheKey,safety_identifier:openaiOptions.safetyIdentifier,// messages:
messages};if(isReasoningModel(_this13.modelId)){if(baseArgs.temperature!=null){baseArgs.temperature=void 0;warnings.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"});}if(baseArgs.top_p!=null){baseArgs.top_p=void 0;warnings.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"});}if(baseArgs.frequency_penalty!=null){baseArgs.frequency_penalty=void 0;warnings.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"});}if(baseArgs.presence_penalty!=null){baseArgs.presence_penalty=void 0;warnings.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"});}if(baseArgs.logit_bias!=null){baseArgs.logit_bias=void 0;warnings.push({type:"other",message:"logitBias is not supported for reasoning models"});}if(baseArgs.logprobs!=null){baseArgs.logprobs=void 0;warnings.push({type:"other",message:"logprobs is not supported for reasoning models"});}if(baseArgs.top_logprobs!=null){baseArgs.top_logprobs=void 0;warnings.push({type:"other",message:"topLogprobs is not supported for reasoning models"});}if(baseArgs.max_tokens!=null){if(baseArgs.max_completion_tokens==null){baseArgs.max_completion_tokens=baseArgs.max_tokens;}baseArgs.max_tokens=void 0;}}else if(_this13.modelId.startsWith("gpt-4o-search-preview")||_this13.modelId.startsWith("gpt-4o-mini-search-preview")){if(baseArgs.temperature!=null){baseArgs.temperature=void 0;warnings.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."});}}if(openaiOptions.serviceTier==="flex"&&!supportsFlexProcessing(_this13.modelId)){warnings.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"});baseArgs.service_tier=void 0;}if(openaiOptions.serviceTier==="priority"&&!supportsPriorityProcessing(_this13.modelId)){warnings.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"});baseArgs.service_tier=void 0;}const{tools:openaiTools2,toolChoice:openaiToolChoice,toolWarnings}=prepareChatTools({tools,toolChoice,structuredOutputs,strictJsonSchema});return{args:_objectSpread2(_objectSpread2({},baseArgs),{},{tools:openaiTools2,tool_choice:openaiToolChoice}),warnings:[...warnings,...toolWarnings]};}();}).apply(this,arguments);}doGenerate(options){var _this14=this;return _asyncToGenerator2(function*(){var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n;const{args:body,warnings}=yield _this14.getArgs(options);const{responseHeaders,value:response,rawValue:rawResponse}=yield postJsonToApi({url:_this14.config.url({path:"/chat/completions",modelId:_this14.modelId}),headers:combineHeaders(_this14.config.headers(),options.headers),body,failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(openaiChatResponseSchema),abortSignal:options.abortSignal,fetch:_this14.config.fetch});const choice=response.choices[0];const content=[];const text=choice.message.content;if(text!=null&&text.length>0){content.push({type:"text",text});}for(const toolCall of(_a=choice.message.tool_calls)!=null?_a:[]){content.push({type:"tool-call",toolCallId:(_b=toolCall.id)!=null?_b:generateId(),toolName:toolCall.function.name,input:toolCall.function.arguments});}for(const annotation of(_c=choice.message.annotations)!=null?_c:[]){content.push({type:"source",sourceType:"url",id:generateId(),url:annotation.url,title:annotation.title});}const completionTokenDetails=(_d=response.usage)==null?void 0:_d.completion_tokens_details;const promptTokenDetails=(_e=response.usage)==null?void 0:_e.prompt_tokens_details;const providerMetadata={openai:{}};if((completionTokenDetails==null?void 0:completionTokenDetails.accepted_prediction_tokens)!=null){providerMetadata.openai.acceptedPredictionTokens=completionTokenDetails==null?void 0:completionTokenDetails.accepted_prediction_tokens;}if((completionTokenDetails==null?void 0:completionTokenDetails.rejected_prediction_tokens)!=null){providerMetadata.openai.rejectedPredictionTokens=completionTokenDetails==null?void 0:completionTokenDetails.rejected_prediction_tokens;}if(((_f=choice.logprobs)==null?void 0:_f.content)!=null){providerMetadata.openai.logprobs=choice.logprobs.content;}return{content,finishReason:mapOpenAIFinishReason(choice.finish_reason),usage:{inputTokens:(_h=(_g=response.usage)==null?void 0:_g.prompt_tokens)!=null?_h:void 0,outputTokens:(_j=(_i=response.usage)==null?void 0:_i.completion_tokens)!=null?_j:void 0,totalTokens:(_l=(_k=response.usage)==null?void 0:_k.total_tokens)!=null?_l:void 0,reasoningTokens:(_m=completionTokenDetails==null?void 0:completionTokenDetails.reasoning_tokens)!=null?_m:void 0,cachedInputTokens:(_n=promptTokenDetails==null?void 0:promptTokenDetails.cached_tokens)!=null?_n:void 0},request:{body},response:_objectSpread2(_objectSpread2({},getResponseMetadata$1(response)),{},{headers:responseHeaders,body:rawResponse}),warnings,providerMetadata};})();}doStream(options){var _this15=this;return _asyncToGenerator2(function*(){const{args,warnings}=yield _this15.getArgs(options);const body=_objectSpread2(_objectSpread2({},args),{},{stream:true,stream_options:{include_usage:true}});const{responseHeaders,value:response}=yield postJsonToApi({url:_this15.config.url({path:"/chat/completions",modelId:_this15.modelId}),headers:combineHeaders(_this15.config.headers(),options.headers),body,failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createEventSourceResponseHandler(openaiChatChunkSchema),abortSignal:options.abortSignal,fetch:_this15.config.fetch});const toolCalls=[];let finishReason="unknown";const usage={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let isFirstChunk=true;let isActiveText=false;const providerMetadata={openai:{}};return{stream:response.pipeThrough(new TransformStream({start(controller){controller.enqueue({type:"stream-start",warnings});},transform(chunk,controller){var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x;if(options.includeRawChunks){controller.enqueue({type:"raw",rawValue:chunk.rawValue});}if(!chunk.success){finishReason="error";controller.enqueue({type:"error",error:chunk.error});return;}const value=chunk.value;if("error"in value){finishReason="error";controller.enqueue({type:"error",error:value.error});return;}if(isFirstChunk){isFirstChunk=false;controller.enqueue(_objectSpread2({type:"response-metadata"},getResponseMetadata$1(value)));}if(value.usage!=null){usage.inputTokens=(_a=value.usage.prompt_tokens)!=null?_a:void 0;usage.outputTokens=(_b=value.usage.completion_tokens)!=null?_b:void 0;usage.totalTokens=(_c=value.usage.total_tokens)!=null?_c:void 0;usage.reasoningTokens=(_e=(_d=value.usage.completion_tokens_details)==null?void 0:_d.reasoning_tokens)!=null?_e:void 0;usage.cachedInputTokens=(_g=(_f=value.usage.prompt_tokens_details)==null?void 0:_f.cached_tokens)!=null?_g:void 0;if(((_h=value.usage.completion_tokens_details)==null?void 0:_h.accepted_prediction_tokens)!=null){providerMetadata.openai.acceptedPredictionTokens=(_i=value.usage.completion_tokens_details)==null?void 0:_i.accepted_prediction_tokens;}if(((_j=value.usage.completion_tokens_details)==null?void 0:_j.rejected_prediction_tokens)!=null){providerMetadata.openai.rejectedPredictionTokens=(_k=value.usage.completion_tokens_details)==null?void 0:_k.rejected_prediction_tokens;}}const choice=value.choices[0];if((choice==null?void 0:choice.finish_reason)!=null){finishReason=mapOpenAIFinishReason(choice.finish_reason);}if(((_l=choice==null?void 0:choice.logprobs)==null?void 0:_l.content)!=null){providerMetadata.openai.logprobs=choice.logprobs.content;}if((choice==null?void 0:choice.delta)==null){return;}const delta=choice.delta;if(delta.content!=null){if(!isActiveText){controller.enqueue({type:"text-start",id:"0"});isActiveText=true;}controller.enqueue({type:"text-delta",id:"0",delta:delta.content});}if(delta.tool_calls!=null){for(const toolCallDelta of delta.tool_calls){const index=toolCallDelta.index;if(toolCalls[index]==null){if(toolCallDelta.type!=="function"){throw new InvalidResponseDataError({data:toolCallDelta,message:"Expected 'function' type."});}if(toolCallDelta.id==null){throw new InvalidResponseDataError({data:toolCallDelta,message:"Expected 'id' to be a string."});}if(((_m=toolCallDelta.function)==null?void 0:_m.name)==null){throw new InvalidResponseDataError({data:toolCallDelta,message:"Expected 'function.name' to be a string."});}controller.enqueue({type:"tool-input-start",id:toolCallDelta.id,toolName:toolCallDelta.function.name});toolCalls[index]={id:toolCallDelta.id,type:"function",function:{name:toolCallDelta.function.name,arguments:(_n=toolCallDelta.function.arguments)!=null?_n:""},hasFinished:false};const toolCall2=toolCalls[index];if(((_o=toolCall2.function)==null?void 0:_o.name)!=null&&((_p=toolCall2.function)==null?void 0:_p.arguments)!=null){if(toolCall2.function.arguments.length>0){controller.enqueue({type:"tool-input-delta",id:toolCall2.id,delta:toolCall2.function.arguments});}if(isParsableJson(toolCall2.function.arguments)){controller.enqueue({type:"tool-input-end",id:toolCall2.id});controller.enqueue({type:"tool-call",toolCallId:(_q=toolCall2.id)!=null?_q:generateId(),toolName:toolCall2.function.name,input:toolCall2.function.arguments});toolCall2.hasFinished=true;}}continue;}const toolCall=toolCalls[index];if(toolCall.hasFinished){continue;}if(((_r=toolCallDelta.function)==null?void 0:_r.arguments)!=null){toolCall.function.arguments+=(_t=(_s=toolCallDelta.function)==null?void 0:_s.arguments)!=null?_t:"";}controller.enqueue({type:"tool-input-delta",id:toolCall.id,delta:(_u=toolCallDelta.function.arguments)!=null?_u:""});if(((_v=toolCall.function)==null?void 0:_v.name)!=null&&((_w=toolCall.function)==null?void 0:_w.arguments)!=null&&isParsableJson(toolCall.function.arguments)){controller.enqueue({type:"tool-input-end",id:toolCall.id});controller.enqueue({type:"tool-call",toolCallId:(_x=toolCall.id)!=null?_x:generateId(),toolName:toolCall.function.name,input:toolCall.function.arguments});toolCall.hasFinished=true;}}}if(delta.annotations!=null){for(const annotation of delta.annotations){controller.enqueue({type:"source",sourceType:"url",id:generateId(),url:annotation.url,title:annotation.title});}}},flush(controller){if(isActiveText){controller.enqueue({type:"text-end",id:"0"});}controller.enqueue(_objectSpread2({type:"finish",finishReason,usage},providerMetadata!=null?{providerMetadata}:{}));}})),request:{body},response:{headers:responseHeaders}};})();}};var openaiTokenUsageSchema=object$1({prompt_tokens:number$1().nullish(),completion_tokens:number$1().nullish(),total_tokens:number$1().nullish(),prompt_tokens_details:object$1({cached_tokens:number$1().nullish()}).nullish(),completion_tokens_details:object$1({reasoning_tokens:number$1().nullish(),accepted_prediction_tokens:number$1().nullish(),rejected_prediction_tokens:number$1().nullish()}).nullish()}).nullish();var openaiChatResponseSchema=object$1({id:string$1().nullish(),created:number$1().nullish(),model:string$1().nullish(),choices:array(object$1({message:object$1({role:literal("assistant").nullish(),content:string$1().nullish(),tool_calls:array(object$1({id:string$1().nullish(),type:literal("function"),function:object$1({name:string$1(),arguments:string$1()})})).nullish(),annotations:array(object$1({type:literal("url_citation"),start_index:number$1(),end_index:number$1(),url:string$1(),title:string$1()})).nullish()}),index:number$1(),logprobs:object$1({content:array(object$1({token:string$1(),logprob:number$1(),top_logprobs:array(object$1({token:string$1(),logprob:number$1()}))})).nullish()}).nullish(),finish_reason:string$1().nullish()})),usage:openaiTokenUsageSchema});var openaiChatChunkSchema=union([object$1({id:string$1().nullish(),created:number$1().nullish(),model:string$1().nullish(),choices:array(object$1({delta:object$1({role:_enum(["assistant"]).nullish(),content:string$1().nullish(),tool_calls:array(object$1({index:number$1(),id:string$1().nullish(),type:literal("function").nullish(),function:object$1({name:string$1().nullish(),arguments:string$1().nullish()})})).nullish(),annotations:array(object$1({type:literal("url_citation"),start_index:number$1(),end_index:number$1(),url:string$1(),title:string$1()})).nullish()}).nullish(),logprobs:object$1({content:array(object$1({token:string$1(),logprob:number$1(),top_logprobs:array(object$1({token:string$1(),logprob:number$1()}))})).nullish()}).nullish(),finish_reason:string$1().nullish(),index:number$1()})),usage:openaiTokenUsageSchema}),openaiErrorDataSchema]);function isReasoningModel(modelId){return(modelId.startsWith("o")||modelId.startsWith("gpt-5"))&&!modelId.startsWith("gpt-5-chat");}function supportsFlexProcessing(modelId){return modelId.startsWith("o3")||modelId.startsWith("o4-mini")||modelId.startsWith("gpt-5")&&!modelId.startsWith("gpt-5-chat");}function supportsPriorityProcessing(modelId){return modelId.startsWith("gpt-4")||modelId.startsWith("gpt-5-mini")||modelId.startsWith("gpt-5")&&!modelId.startsWith("gpt-5-nano")&&!modelId.startsWith("gpt-5-chat")||modelId.startsWith("o3")||modelId.startsWith("o4-mini");}function getSystemMessageMode(modelId){var _a,_b;if(!isReasoningModel(modelId)){return"system";}return(_b=(_a=reasoningModels[modelId])==null?void 0:_a.systemMessageMode)!=null?_b:"developer";}var reasoningModels={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function convertToOpenAICompletionPrompt(_ref81){let{prompt,user="user",assistant="assistant"}=_ref81;let text="";if(prompt[0].role==="system"){text+="".concat(prompt[0].content,"\n\n");prompt=prompt.slice(1);}for(const{role,content}of prompt){switch(role){case"system":{throw new InvalidPromptError({message:"Unexpected system message in prompt: ${content}",prompt});}case"user":{const userMessage=content.map(part=>{switch(part.type){case"text":{return part.text;}}}).filter(Boolean).join("");text+="".concat(user,":\n").concat(userMessage,"\n\n");break;}case"assistant":{const assistantMessage=content.map(part=>{switch(part.type){case"text":{return part.text;}case"tool-call":{throw new UnsupportedFunctionalityError({functionality:"tool-call messages"});}}}).join("");text+="".concat(assistant,":\n").concat(assistantMessage,"\n\n");break;}case"tool":{throw new UnsupportedFunctionalityError({functionality:"tool messages"});}default:{const _exhaustiveCheck=role;throw new Error("Unsupported role: ".concat(_exhaustiveCheck));}}}text+="".concat(assistant,":\n");return{prompt:text,stopSequences:["\n".concat(user,":")]};}// src/completion/get-response-metadata.ts
function getResponseMetadata2$1(_ref82){let{id,model,created}=_ref82;return{id:id!=null?id:void 0,modelId:model!=null?model:void 0,timestamp:created!=null?new Date(created*1e3):void 0};}// src/completion/map-openai-finish-reason.ts
function mapOpenAIFinishReason2(finishReason){switch(finishReason){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown";}}var openaiCompletionProviderOptions=object$1({/**
  Echo back the prompt in addition to the completion.
     */echo:boolean$1().optional(),/**
  Modify the likelihood of specified tokens appearing in the completion.
  
  Accepts a JSON object that maps tokens (specified by their token ID in
  the GPT tokenizer) to an associated bias value from -100 to 100. You
  can use this tokenizer tool to convert text to token IDs. Mathematically,
  the bias is added to the logits generated by the model prior to sampling.
  The exact effect will vary per model, but values between -1 and 1 should
  decrease or increase likelihood of selection; values like -100 or 100
  should result in a ban or exclusive selection of the relevant token.
  
  As an example, you can pass {"50256": -100} to prevent the <|endoftext|>
  token from being generated.
   */logitBias:record(string$1(),number$1()).optional(),/**
  The suffix that comes after a completion of inserted text.
   */suffix:string$1().optional(),/**
  A unique identifier representing your end-user, which can help OpenAI to
  monitor and detect abuse. Learn more.
   */user:string$1().optional(),/**
  Return the log probabilities of the tokens. Including logprobs will increase
  the response size and can slow down response times. However, it can
  be useful to better understand how the model is behaving.
  Setting to true will return the log probabilities of the tokens that
  were generated.
  Setting to a number will return the log probabilities of the top n
  tokens that were generated.
     */logprobs:union([boolean$1(),number$1()]).optional()});// src/completion/openai-completion-language-model.ts
var OpenAICompletionLanguageModel=class{constructor(modelId,config){this.specificationVersion="v2";this.supportedUrls={// No URLs are supported for completion models.
};this.modelId=modelId;this.config=config;}get providerOptionsName(){return this.config.provider.split(".")[0].trim();}get provider(){return this.config.provider;}getArgs(_x43){var _this16=this;return _asyncToGenerator2(function(_ref83){let{prompt,maxOutputTokens,temperature,topP,topK,frequencyPenalty,presencePenalty,stopSequences:userStopSequences,responseFormat,tools,toolChoice,seed,providerOptions}=_ref83;return function*(){const warnings=[];const openaiOptions=_objectSpread2(_objectSpread2({},yield parseProviderOptions({provider:"openai",providerOptions,schema:openaiCompletionProviderOptions})),yield parseProviderOptions({provider:_this16.providerOptionsName,providerOptions,schema:openaiCompletionProviderOptions}));if(topK!=null){warnings.push({type:"unsupported-setting",setting:"topK"});}if(tools==null?void 0:tools.length){warnings.push({type:"unsupported-setting",setting:"tools"});}if(toolChoice!=null){warnings.push({type:"unsupported-setting",setting:"toolChoice"});}if(responseFormat!=null&&responseFormat.type!=="text"){warnings.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});}const{prompt:completionPrompt,stopSequences}=convertToOpenAICompletionPrompt({prompt});const stop=[...(stopSequences!=null?stopSequences:[]),...(userStopSequences!=null?userStopSequences:[])];return{args:{// model id:
model:_this16.modelId,// model specific settings:
echo:openaiOptions.echo,logit_bias:openaiOptions.logitBias,logprobs:(openaiOptions==null?void 0:openaiOptions.logprobs)===true?0:(openaiOptions==null?void 0:openaiOptions.logprobs)===false?void 0:openaiOptions==null?void 0:openaiOptions.logprobs,suffix:openaiOptions.suffix,user:openaiOptions.user,// standardized settings:
max_tokens:maxOutputTokens,temperature,top_p:topP,frequency_penalty:frequencyPenalty,presence_penalty:presencePenalty,seed,// prompt:
prompt:completionPrompt,// stop sequences:
stop:stop.length>0?stop:void 0},warnings};}();}).apply(this,arguments);}doGenerate(options){var _this17=this;return _asyncToGenerator2(function*(){var _a,_b,_c;const{args,warnings}=yield _this17.getArgs(options);const{responseHeaders,value:response,rawValue:rawResponse}=yield postJsonToApi({url:_this17.config.url({path:"/completions",modelId:_this17.modelId}),headers:combineHeaders(_this17.config.headers(),options.headers),body:args,failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(openaiCompletionResponseSchema),abortSignal:options.abortSignal,fetch:_this17.config.fetch});const choice=response.choices[0];const providerMetadata={openai:{}};if(choice.logprobs!=null){providerMetadata.openai.logprobs=choice.logprobs;}return{content:[{type:"text",text:choice.text}],usage:{inputTokens:(_a=response.usage)==null?void 0:_a.prompt_tokens,outputTokens:(_b=response.usage)==null?void 0:_b.completion_tokens,totalTokens:(_c=response.usage)==null?void 0:_c.total_tokens},finishReason:mapOpenAIFinishReason2(choice.finish_reason),request:{body:args},response:_objectSpread2(_objectSpread2({},getResponseMetadata2$1(response)),{},{headers:responseHeaders,body:rawResponse}),providerMetadata,warnings};})();}doStream(options){var _this18=this;return _asyncToGenerator2(function*(){const{args,warnings}=yield _this18.getArgs(options);const body=_objectSpread2(_objectSpread2({},args),{},{stream:true,stream_options:{include_usage:true}});const{responseHeaders,value:response}=yield postJsonToApi({url:_this18.config.url({path:"/completions",modelId:_this18.modelId}),headers:combineHeaders(_this18.config.headers(),options.headers),body,failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createEventSourceResponseHandler(openaiCompletionChunkSchema),abortSignal:options.abortSignal,fetch:_this18.config.fetch});let finishReason="unknown";const providerMetadata={openai:{}};const usage={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let isFirstChunk=true;return{stream:response.pipeThrough(new TransformStream({start(controller){controller.enqueue({type:"stream-start",warnings});},transform(chunk,controller){if(options.includeRawChunks){controller.enqueue({type:"raw",rawValue:chunk.rawValue});}if(!chunk.success){finishReason="error";controller.enqueue({type:"error",error:chunk.error});return;}const value=chunk.value;if("error"in value){finishReason="error";controller.enqueue({type:"error",error:value.error});return;}if(isFirstChunk){isFirstChunk=false;controller.enqueue(_objectSpread2({type:"response-metadata"},getResponseMetadata2$1(value)));controller.enqueue({type:"text-start",id:"0"});}if(value.usage!=null){usage.inputTokens=value.usage.prompt_tokens;usage.outputTokens=value.usage.completion_tokens;usage.totalTokens=value.usage.total_tokens;}const choice=value.choices[0];if((choice==null?void 0:choice.finish_reason)!=null){finishReason=mapOpenAIFinishReason2(choice.finish_reason);}if((choice==null?void 0:choice.logprobs)!=null){providerMetadata.openai.logprobs=choice.logprobs;}if((choice==null?void 0:choice.text)!=null&&choice.text.length>0){controller.enqueue({type:"text-delta",id:"0",delta:choice.text});}},flush(controller){if(!isFirstChunk){controller.enqueue({type:"text-end",id:"0"});}controller.enqueue({type:"finish",finishReason,providerMetadata,usage});}})),request:{body},response:{headers:responseHeaders}};})();}};var usageSchema$1=object$1({prompt_tokens:number$1(),completion_tokens:number$1(),total_tokens:number$1()});var openaiCompletionResponseSchema=object$1({id:string$1().nullish(),created:number$1().nullish(),model:string$1().nullish(),choices:array(object$1({text:string$1(),finish_reason:string$1(),logprobs:object$1({tokens:array(string$1()),token_logprobs:array(number$1()),top_logprobs:array(record(string$1(),number$1())).nullish()}).nullish()})),usage:usageSchema$1.nullish()});var openaiCompletionChunkSchema=union([object$1({id:string$1().nullish(),created:number$1().nullish(),model:string$1().nullish(),choices:array(object$1({text:string$1(),finish_reason:string$1().nullish(),index:number$1(),logprobs:object$1({tokens:array(string$1()),token_logprobs:array(number$1()),top_logprobs:array(record(string$1(),number$1())).nullish()}).nullish()})),usage:usageSchema$1.nullish()}),openaiErrorDataSchema]);var openaiEmbeddingProviderOptions=object$1({/**
  The number of dimensions the resulting output embeddings should have.
  Only supported in text-embedding-3 and later models.
     */dimensions:number$1().optional(),/**
  A unique identifier representing your end-user, which can help OpenAI to
  monitor and detect abuse. Learn more.
  */user:string$1().optional()});// src/embedding/openai-embedding-model.ts
var OpenAIEmbeddingModel=class{constructor(modelId,config){this.specificationVersion="v2";this.maxEmbeddingsPerCall=2048;this.supportsParallelCalls=true;this.modelId=modelId;this.config=config;}get provider(){return this.config.provider;}doEmbed(_x44){var _this19=this;return _asyncToGenerator2(function(_ref84){let{values,headers,abortSignal,providerOptions}=_ref84;return function*(){var _a;if(values.length>_this19.maxEmbeddingsPerCall){throw new TooManyEmbeddingValuesForCallError({provider:_this19.provider,modelId:_this19.modelId,maxEmbeddingsPerCall:_this19.maxEmbeddingsPerCall,values});}const openaiOptions=(_a=yield parseProviderOptions({provider:"openai",providerOptions,schema:openaiEmbeddingProviderOptions}))!=null?_a:{};const{responseHeaders,value:response,rawValue}=yield postJsonToApi({url:_this19.config.url({path:"/embeddings",modelId:_this19.modelId}),headers:combineHeaders(_this19.config.headers(),headers),body:{model:_this19.modelId,input:values,encoding_format:"float",dimensions:openaiOptions.dimensions,user:openaiOptions.user},failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(openaiTextEmbeddingResponseSchema$1),abortSignal,fetch:_this19.config.fetch});return{embeddings:response.data.map(item=>item.embedding),usage:response.usage?{tokens:response.usage.prompt_tokens}:void 0,response:{headers:responseHeaders,body:rawValue}};}();}).apply(this,arguments);}};var openaiTextEmbeddingResponseSchema$1=object$1({data:array(object$1({embedding:array(number$1())})),usage:object$1({prompt_tokens:number$1()}).nullish()});// src/image/openai-image-options.ts
var modelMaxImagesPerCall={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10};var hasDefaultResponseFormat=/* @__PURE__ */new Set(["gpt-image-1"]);// src/image/openai-image-model.ts
var OpenAIImageModel=class{constructor(modelId,config){this.modelId=modelId;this.config=config;this.specificationVersion="v2";}get maxImagesPerCall(){var _a;return(_a=modelMaxImagesPerCall[this.modelId])!=null?_a:1;}get provider(){return this.config.provider;}doGenerate(_x45){var _this20=this;return _asyncToGenerator2(function(_ref85){let{prompt,n,size,aspectRatio,seed,providerOptions,headers,abortSignal}=_ref85;return function*(){var _a,_b,_c,_d;const warnings=[];if(aspectRatio!=null){warnings.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."});}if(seed!=null){warnings.push({type:"unsupported-setting",setting:"seed"});}const currentDate=(_c=(_b=(_a=_this20.config._internal)==null?void 0:_a.currentDate)==null?void 0:_b.call(_a))!=null?_c:/* @__PURE__ */new Date();const{value:response,responseHeaders}=yield postJsonToApi({url:_this20.config.url({path:"/images/generations",modelId:_this20.modelId}),headers:combineHeaders(_this20.config.headers(),headers),body:_objectSpread2(_objectSpread2({model:_this20.modelId,prompt,n,size},(_d=providerOptions.openai)!=null?_d:{}),!hasDefaultResponseFormat.has(_this20.modelId)?{response_format:"b64_json"}:{}),failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(openaiImageResponseSchema),abortSignal,fetch:_this20.config.fetch});return{images:response.data.map(item=>item.b64_json),warnings,response:{timestamp:currentDate,modelId:_this20.modelId,headers:responseHeaders},providerMetadata:{openai:{images:response.data.map(item=>item.revised_prompt?{revisedPrompt:item.revised_prompt}:null)}}};}();}).apply(this,arguments);}};var openaiImageResponseSchema=object$1({data:array(object$1({b64_json:string$1(),revised_prompt:string$1().optional()}))});var codeInterpreterInputSchema=object$1({code:string$1().nullish(),containerId:string$1()});var codeInterpreterOutputSchema=object$1({outputs:array(discriminatedUnion("type",[object$1({type:literal("logs"),logs:string$1()}),object$1({type:literal("image"),url:string$1()})])).nullish()});var codeInterpreterArgsSchema=object$1({container:union([string$1(),object$1({fileIds:array(string$1()).optional()})]).optional()});var codeInterpreterToolFactory=createProviderDefinedToolFactoryWithOutputSchema({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:codeInterpreterInputSchema,outputSchema:codeInterpreterOutputSchema});var codeInterpreter=function(){let args=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return codeInterpreterToolFactory(args);};var webSearchArgsSchema=object$1({filters:object$1({allowedDomains:array(string$1()).optional()}).optional(),searchContextSize:_enum(["low","medium","high"]).optional(),userLocation:object$1({type:literal("approximate"),country:string$1().optional(),city:string$1().optional(),region:string$1().optional(),timezone:string$1().optional()}).optional()});var webSearchToolFactory=createProviderDefinedToolFactory({id:"openai.web_search",name:"web_search",inputSchema:object$1({action:discriminatedUnion("type",[object$1({type:literal("search"),query:string$1().nullish()}),object$1({type:literal("open_page"),url:string$1()}),object$1({type:literal("find"),url:string$1(),pattern:string$1()})]).nullish()})});var webSearch=function(){let args=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return webSearchToolFactory(args);};// src/openai-tools.ts
var openaiTools={/**
   * The Code Interpreter tool allows models to write and run Python code in a
   * sandboxed environment to solve complex problems in domains like data analysis,
   * coding, and math.
   *
   * @param container - The container to use for the code interpreter.
   *
   * Must have name `code_interpreter`.
   */codeInterpreter,/**
   * File search is a tool available in the Responses API. It enables models to
   * retrieve information in a knowledge base of previously uploaded files through
   * semantic and keyword search.
   *
   * Must have name `file_search`.
   *
   * @param vectorStoreIds - The vector store IDs to use for the file search.
   * @param maxNumResults - The maximum number of results to return.
   * @param ranking - The ranking options to use for the file search.
   * @param filters - The filters to use for the file search.
   */fileSearch,/**
   * Web search allows models to access up-to-date information from the internet
   * and provide answers with sourced citations.
   *
   * Must have name `web_search_preview`.
   *
   * @param searchContextSize - The search context size to use for the web search.
   * @param userLocation - The user location to use for the web search.
   *
   * @deprecated Use `webSearch` instead.
   */webSearchPreview,/**
   * Web search allows models to access up-to-date information from the internet
   * and provide answers with sourced citations.
   *
   * Must have name `web_search`.
   *
   * @param filters - The filters to use for the web search.
   * @param searchContextSize - The search context size to use for the web search.
   * @param userLocation - The user location to use for the web search.
   */webSearch};function isFileId(data,prefixes){if(!prefixes)return false;return prefixes.some(prefix=>data.startsWith(prefix));}function convertToOpenAIResponsesInput(_x46){return _convertToOpenAIResponsesInput.apply(this,arguments);}function _convertToOpenAIResponsesInput(){_convertToOpenAIResponsesInput=_asyncToGenerator2(function(_ref197){let{prompt,systemMessageMode,fileIdPrefixes}=_ref197;return function*(){var _a,_b,_c,_d,_e,_f;const input=[];const warnings=[];for(const{role,content}of prompt){switch(role){case"system":{switch(systemMessageMode){case"system":{input.push({role:"system",content});break;}case"developer":{input.push({role:"developer",content});break;}case"remove":{warnings.push({type:"other",message:"system messages are removed for this model"});break;}default:{const _exhaustiveCheck=systemMessageMode;throw new Error("Unsupported system message mode: ".concat(_exhaustiveCheck));}}break;}case"user":{input.push({role:"user",content:content.map((part,index)=>{var _a2,_b2,_c2;switch(part.type){case"text":{return{type:"input_text",text:part.text};}case"file":{if(part.mediaType.startsWith("image/")){const mediaType=part.mediaType==="image/*"?"image/jpeg":part.mediaType;return _objectSpread2(_objectSpread2({type:"input_image"},part.data instanceof URL?{image_url:part.data.toString()}:typeof part.data==="string"&&isFileId(part.data,fileIdPrefixes)?{file_id:part.data}:{image_url:"data:".concat(mediaType,";base64,").concat(convertToBase64(part.data))}),{},{detail:(_b2=(_a2=part.providerOptions)==null?void 0:_a2.openai)==null?void 0:_b2.imageDetail});}else if(part.mediaType==="application/pdf"){if(part.data instanceof URL){return{type:"input_file",file_url:part.data.toString()};}return _objectSpread2({type:"input_file"},typeof part.data==="string"&&isFileId(part.data,fileIdPrefixes)?{file_id:part.data}:{filename:(_c2=part.filename)!=null?_c2:"part-".concat(index,".pdf"),file_data:"data:application/pdf;base64,".concat(convertToBase64(part.data))});}else{throw new UnsupportedFunctionalityError({functionality:"file part media type ".concat(part.mediaType)});}}}})});break;}case"assistant":{const reasoningMessages={};const toolCallParts={};for(const part of content){switch(part.type){case"text":{input.push({role:"assistant",content:[{type:"output_text",text:part.text}],id:(_c=(_b=(_a=part.providerOptions)==null?void 0:_a.openai)==null?void 0:_b.itemId)!=null?_c:void 0});break;}case"tool-call":{toolCallParts[part.toolCallId]=part;if(part.providerExecuted){break;}input.push({type:"function_call",call_id:part.toolCallId,name:part.toolName,arguments:JSON.stringify(part.input),id:(_f=(_e=(_d=part.providerOptions)==null?void 0:_d.openai)==null?void 0:_e.itemId)!=null?_f:void 0});break;}case"tool-result":{warnings.push({type:"other",message:"tool result parts in assistant messages are not supported for OpenAI responses"});break;}case"reasoning":{const providerOptions=yield parseProviderOptions({provider:"openai",providerOptions:part.providerOptions,schema:openaiResponsesReasoningProviderOptionsSchema});const reasoningId=providerOptions==null?void 0:providerOptions.itemId;if(reasoningId!=null){const existingReasoningMessage=reasoningMessages[reasoningId];const summaryParts=[];if(part.text.length>0){summaryParts.push({type:"summary_text",text:part.text});}else if(existingReasoningMessage!==void 0){warnings.push({type:"other",message:"Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ".concat(JSON.stringify(part),".")});}if(existingReasoningMessage===void 0){reasoningMessages[reasoningId]={type:"reasoning",id:reasoningId,encrypted_content:providerOptions==null?void 0:providerOptions.reasoningEncryptedContent,summary:summaryParts};input.push(reasoningMessages[reasoningId]);}else{existingReasoningMessage.summary.push(...summaryParts);}}else{warnings.push({type:"other",message:"Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ".concat(JSON.stringify(part),".")});}break;}}}break;}case"tool":{for(const part of content){const output=part.output;let contentValue;switch(output.type){case"text":case"error-text":contentValue=output.value;break;case"content":case"json":case"error-json":contentValue=JSON.stringify(output.value);break;}input.push({type:"function_call_output",call_id:part.toolCallId,output:contentValue});}break;}default:{const _exhaustiveCheck=role;throw new Error("Unsupported role: ".concat(_exhaustiveCheck));}}}return{input,warnings};}();});return _convertToOpenAIResponsesInput.apply(this,arguments);}var openaiResponsesReasoningProviderOptionsSchema=object$1({itemId:string$1().nullish(),reasoningEncryptedContent:string$1().nullish()});// src/responses/map-openai-responses-finish-reason.ts
function mapOpenAIResponseFinishReason(_ref86){let{finishReason,hasFunctionCall}=_ref86;switch(finishReason){case void 0:case null:return hasFunctionCall?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return hasFunctionCall?"tool-calls":"unknown";}}function prepareResponsesTools(_ref87){let{tools,toolChoice,strictJsonSchema}=_ref87;tools=(tools==null?void 0:tools.length)?tools:void 0;const toolWarnings=[];if(tools==null){return{tools:void 0,toolChoice:void 0,toolWarnings};}const openaiTools2=[];for(const tool of tools){switch(tool.type){case"function":openaiTools2.push({type:"function",name:tool.name,description:tool.description,parameters:tool.inputSchema,strict:strictJsonSchema});break;case"provider-defined":{switch(tool.id){case"openai.file_search":{const args=fileSearchArgsSchema.parse(tool.args);openaiTools2.push({type:"file_search",vector_store_ids:args.vectorStoreIds,max_num_results:args.maxNumResults,ranking_options:args.ranking?{ranker:args.ranking.ranker}:void 0,filters:args.filters});break;}case"openai.web_search_preview":{const args=webSearchPreviewArgsSchema.parse(tool.args);openaiTools2.push({type:"web_search_preview",search_context_size:args.searchContextSize,user_location:args.userLocation});break;}case"openai.web_search":{const args=webSearchArgsSchema.parse(tool.args);openaiTools2.push({type:"web_search",filters:args.filters!=null?{allowed_domains:args.filters.allowedDomains}:void 0,search_context_size:args.searchContextSize,user_location:args.userLocation});break;}case"openai.code_interpreter":{const args=codeInterpreterArgsSchema.parse(tool.args);openaiTools2.push({type:"code_interpreter",container:args.container==null?{type:"auto",file_ids:void 0}:typeof args.container==="string"?args.container:{type:"auto",file_ids:args.container.fileIds}});break;}default:{toolWarnings.push({type:"unsupported-tool",tool});break;}}break;}default:toolWarnings.push({type:"unsupported-tool",tool});break;}}if(toolChoice==null){return{tools:openaiTools2,toolChoice:void 0,toolWarnings};}const type=toolChoice.type;switch(type){case"auto":case"none":case"required":return{tools:openaiTools2,toolChoice:type,toolWarnings};case"tool":return{tools:openaiTools2,toolChoice:toolChoice.toolName==="code_interpreter"||toolChoice.toolName==="file_search"||toolChoice.toolName==="web_search_preview"||toolChoice.toolName==="web_search"?{type:toolChoice.toolName}:{type:"function",name:toolChoice.toolName},toolWarnings};default:{const _exhaustiveCheck=type;throw new UnsupportedFunctionalityError({functionality:"tool choice type: ".concat(_exhaustiveCheck)});}}}// src/responses/openai-responses-language-model.ts
var webSearchCallItem=object$1({type:literal("web_search_call"),id:string$1(),status:string$1(),action:discriminatedUnion("type",[object$1({type:literal("search"),query:string$1().nullish()}),object$1({type:literal("open_page"),url:string$1()}),object$1({type:literal("find"),url:string$1(),pattern:string$1()})]).nullish()});var codeInterpreterCallItem=object$1({type:literal("code_interpreter_call"),id:string$1(),code:string$1().nullable(),container_id:string$1(),outputs:array(discriminatedUnion("type",[object$1({type:literal("logs"),logs:string$1()}),object$1({type:literal("image"),url:string$1()})])).nullable()});var TOP_LOGPROBS_MAX=20;var LOGPROBS_SCHEMA=array(object$1({token:string$1(),logprob:number$1(),top_logprobs:array(object$1({token:string$1(),logprob:number$1()}))}));var OpenAIResponsesLanguageModel=class{constructor(modelId,config){this.specificationVersion="v2";this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]};this.modelId=modelId;this.config=config;}get provider(){return this.config.provider;}getArgs(_x47){var _this21=this;return _asyncToGenerator2(function(_ref88){let{maxOutputTokens,temperature,stopSequences,topP,topK,presencePenalty,frequencyPenalty,seed,prompt,providerOptions,tools,toolChoice,responseFormat}=_ref88;return function*(){var _a,_b,_c,_d;const warnings=[];const modelConfig=getResponsesModelConfig(_this21.modelId);if(topK!=null){warnings.push({type:"unsupported-setting",setting:"topK"});}if(seed!=null){warnings.push({type:"unsupported-setting",setting:"seed"});}if(presencePenalty!=null){warnings.push({type:"unsupported-setting",setting:"presencePenalty"});}if(frequencyPenalty!=null){warnings.push({type:"unsupported-setting",setting:"frequencyPenalty"});}if(stopSequences!=null){warnings.push({type:"unsupported-setting",setting:"stopSequences"});}const{input,warnings:inputWarnings}=yield convertToOpenAIResponsesInput({prompt,systemMessageMode:modelConfig.systemMessageMode,fileIdPrefixes:_this21.config.fileIdPrefixes});warnings.push(...inputWarnings);const openaiOptions=yield parseProviderOptions({provider:"openai",providerOptions,schema:openaiResponsesProviderOptionsSchema});const strictJsonSchema=(_a=openaiOptions==null?void 0:openaiOptions.strictJsonSchema)!=null?_a:false;let include=openaiOptions==null?void 0:openaiOptions.include;const topLogprobs=typeof(openaiOptions==null?void 0:openaiOptions.logprobs)==="number"?openaiOptions==null?void 0:openaiOptions.logprobs:(openaiOptions==null?void 0:openaiOptions.logprobs)===true?TOP_LOGPROBS_MAX:void 0;include=topLogprobs?Array.isArray(include)?[...include,"message.output_text.logprobs"]:["message.output_text.logprobs"]:include;const webSearchToolName=(_b=tools==null?void 0:tools.find(tool=>tool.type==="provider-defined"&&(tool.id==="openai.web_search"||tool.id==="openai.web_search_preview")))==null?void 0:_b.name;include=webSearchToolName?Array.isArray(include)?[...include,"web_search_call.action.sources"]:["web_search_call.action.sources"]:include;const codeInterpreterToolName=(_c=tools==null?void 0:tools.find(tool=>tool.type==="provider-defined"&&tool.id==="openai.code_interpreter"))==null?void 0:_c.name;include=codeInterpreterToolName?Array.isArray(include)?[...include,"code_interpreter_call.outputs"]:["code_interpreter_call.outputs"]:include;const baseArgs=_objectSpread2(_objectSpread2(_objectSpread2({model:_this21.modelId,input,temperature,top_p:topP,max_output_tokens:maxOutputTokens},((responseFormat==null?void 0:responseFormat.type)==="json"||(openaiOptions==null?void 0:openaiOptions.textVerbosity))&&{text:_objectSpread2(_objectSpread2({},(responseFormat==null?void 0:responseFormat.type)==="json"&&{format:responseFormat.schema!=null?{type:"json_schema",strict:strictJsonSchema,name:(_d=responseFormat.name)!=null?_d:"response",description:responseFormat.description,schema:responseFormat.schema}:{type:"json_object"}}),(openaiOptions==null?void 0:openaiOptions.textVerbosity)&&{verbosity:openaiOptions.textVerbosity})}),{},{// provider options:
metadata:openaiOptions==null?void 0:openaiOptions.metadata,parallel_tool_calls:openaiOptions==null?void 0:openaiOptions.parallelToolCalls,previous_response_id:openaiOptions==null?void 0:openaiOptions.previousResponseId,store:openaiOptions==null?void 0:openaiOptions.store,user:openaiOptions==null?void 0:openaiOptions.user,instructions:openaiOptions==null?void 0:openaiOptions.instructions,service_tier:openaiOptions==null?void 0:openaiOptions.serviceTier,include,prompt_cache_key:openaiOptions==null?void 0:openaiOptions.promptCacheKey,safety_identifier:openaiOptions==null?void 0:openaiOptions.safetyIdentifier,top_logprobs:topLogprobs},modelConfig.isReasoningModel&&((openaiOptions==null?void 0:openaiOptions.reasoningEffort)!=null||(openaiOptions==null?void 0:openaiOptions.reasoningSummary)!=null)&&{reasoning:_objectSpread2(_objectSpread2({},(openaiOptions==null?void 0:openaiOptions.reasoningEffort)!=null&&{effort:openaiOptions.reasoningEffort}),(openaiOptions==null?void 0:openaiOptions.reasoningSummary)!=null&&{summary:openaiOptions.reasoningSummary})}),modelConfig.requiredAutoTruncation&&{truncation:"auto"});if(modelConfig.isReasoningModel){if(baseArgs.temperature!=null){baseArgs.temperature=void 0;warnings.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"});}if(baseArgs.top_p!=null){baseArgs.top_p=void 0;warnings.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"});}}else{if((openaiOptions==null?void 0:openaiOptions.reasoningEffort)!=null){warnings.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"});}if((openaiOptions==null?void 0:openaiOptions.reasoningSummary)!=null){warnings.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"});}}if((openaiOptions==null?void 0:openaiOptions.serviceTier)==="flex"&&!modelConfig.supportsFlexProcessing){warnings.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"});delete baseArgs.service_tier;}if((openaiOptions==null?void 0:openaiOptions.serviceTier)==="priority"&&!modelConfig.supportsPriorityProcessing){warnings.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"});delete baseArgs.service_tier;}const{tools:openaiTools2,toolChoice:openaiToolChoice,toolWarnings}=prepareResponsesTools({tools,toolChoice,strictJsonSchema});return{webSearchToolName,args:_objectSpread2(_objectSpread2({},baseArgs),{},{tools:openaiTools2,tool_choice:openaiToolChoice}),warnings:[...warnings,...toolWarnings]};}();}).apply(this,arguments);}doGenerate(options){var _this22=this;return _asyncToGenerator2(function*(){var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q;const{args:body,warnings,webSearchToolName}=yield _this22.getArgs(options);const url=_this22.config.url({path:"/responses",modelId:_this22.modelId});const{responseHeaders,value:response,rawValue:rawResponse}=yield postJsonToApi({url,headers:combineHeaders(_this22.config.headers(),options.headers),body,failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(object$1({id:string$1(),created_at:number$1(),error:object$1({code:string$1(),message:string$1()}).nullish(),model:string$1(),output:array(discriminatedUnion("type",[object$1({type:literal("message"),role:literal("assistant"),id:string$1(),content:array(object$1({type:literal("output_text"),text:string$1(),logprobs:LOGPROBS_SCHEMA.nullish(),annotations:array(discriminatedUnion("type",[object$1({type:literal("url_citation"),start_index:number$1(),end_index:number$1(),url:string$1(),title:string$1()}),object$1({type:literal("file_citation"),file_id:string$1(),filename:string$1().nullish(),index:number$1().nullish(),start_index:number$1().nullish(),end_index:number$1().nullish(),quote:string$1().nullish()}),object$1({type:literal("container_file_citation")})]))}))}),codeInterpreterCallItem,object$1({type:literal("function_call"),call_id:string$1(),name:string$1(),arguments:string$1(),id:string$1()}),webSearchCallItem,object$1({type:literal("computer_call"),id:string$1(),status:string$1().optional()}),object$1({type:literal("file_search_call"),id:string$1(),status:string$1().optional(),queries:array(string$1()).nullish(),results:array(object$1({attributes:object$1({file_id:string$1(),filename:string$1(),score:number$1(),text:string$1()})})).nullish()}),object$1({type:literal("reasoning"),id:string$1(),encrypted_content:string$1().nullish(),summary:array(object$1({type:literal("summary_text"),text:string$1()}))})])),service_tier:string$1().nullish(),incomplete_details:object$1({reason:string$1()}).nullable(),usage:usageSchema2})),abortSignal:options.abortSignal,fetch:_this22.config.fetch});if(response.error){throw new APICallError({message:response.error.message,url,requestBodyValues:body,statusCode:400,responseHeaders,responseBody:rawResponse,isRetryable:false});}const content=[];const logprobs=[];let hasFunctionCall=false;for(const part of response.output){switch(part.type){case"reasoning":{if(part.summary.length===0){part.summary.push({type:"summary_text",text:""});}for(const summary of part.summary){content.push({type:"reasoning",text:summary.text,providerMetadata:{openai:{itemId:part.id,reasoningEncryptedContent:(_a=part.encrypted_content)!=null?_a:null}}});}break;}case"message":{for(const contentPart of part.content){if(((_c=(_b=options.providerOptions)==null?void 0:_b.openai)==null?void 0:_c.logprobs)&&contentPart.logprobs){logprobs.push(contentPart.logprobs);}content.push({type:"text",text:contentPart.text,providerMetadata:{openai:{itemId:part.id}}});for(const annotation of contentPart.annotations){if(annotation.type==="url_citation"){content.push({type:"source",sourceType:"url",id:(_f=(_e=(_d=_this22.config).generateId)==null?void 0:_e.call(_d))!=null?_f:generateId(),url:annotation.url,title:annotation.title});}else if(annotation.type==="file_citation"){content.push({type:"source",sourceType:"document",id:(_i=(_h=(_g=_this22.config).generateId)==null?void 0:_h.call(_g))!=null?_i:generateId(),mediaType:"text/plain",title:(_k=(_j=annotation.quote)!=null?_j:annotation.filename)!=null?_k:"Document",filename:(_l=annotation.filename)!=null?_l:annotation.file_id});}}}break;}case"function_call":{hasFunctionCall=true;content.push({type:"tool-call",toolCallId:part.call_id,toolName:part.name,input:part.arguments,providerMetadata:{openai:{itemId:part.id}}});break;}case"web_search_call":{content.push({type:"tool-call",toolCallId:part.id,toolName:webSearchToolName!=null?webSearchToolName:"web_search",input:JSON.stringify({action:part.action}),providerExecuted:true});content.push({type:"tool-result",toolCallId:part.id,toolName:webSearchToolName!=null?webSearchToolName:"web_search",result:{status:part.status},providerExecuted:true});break;}case"computer_call":{content.push({type:"tool-call",toolCallId:part.id,toolName:"computer_use",input:"",providerExecuted:true});content.push({type:"tool-result",toolCallId:part.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:part.status||"completed"},providerExecuted:true});break;}case"file_search_call":{content.push({type:"tool-call",toolCallId:part.id,toolName:"file_search",input:"",providerExecuted:true});content.push({type:"tool-result",toolCallId:part.id,toolName:"file_search",result:_objectSpread2(_objectSpread2({type:"file_search_tool_result",status:part.status||"completed"},part.queries&&{queries:part.queries}),part.results&&{results:part.results}),providerExecuted:true});break;}case"code_interpreter_call":{content.push({type:"tool-call",toolCallId:part.id,toolName:"code_interpreter",input:JSON.stringify({code:part.code,containerId:part.container_id}),providerExecuted:true});content.push({type:"tool-result",toolCallId:part.id,toolName:"code_interpreter",result:{outputs:part.outputs},providerExecuted:true});break;}}}const providerMetadata={openai:{responseId:response.id}};if(logprobs.length>0){providerMetadata.openai.logprobs=logprobs;}if(typeof response.service_tier==="string"){providerMetadata.openai.serviceTier=response.service_tier;}return{content,finishReason:mapOpenAIResponseFinishReason({finishReason:(_m=response.incomplete_details)==null?void 0:_m.reason,hasFunctionCall}),usage:{inputTokens:response.usage.input_tokens,outputTokens:response.usage.output_tokens,totalTokens:response.usage.input_tokens+response.usage.output_tokens,reasoningTokens:(_o=(_n=response.usage.output_tokens_details)==null?void 0:_n.reasoning_tokens)!=null?_o:void 0,cachedInputTokens:(_q=(_p=response.usage.input_tokens_details)==null?void 0:_p.cached_tokens)!=null?_q:void 0},request:{body},response:{id:response.id,timestamp:new Date(response.created_at*1e3),modelId:response.model,headers:responseHeaders,body:rawResponse},providerMetadata,warnings};})();}doStream(options){var _this23=this;return _asyncToGenerator2(function*(){const{args:body,warnings,webSearchToolName}=yield _this23.getArgs(options);const{responseHeaders,value:response}=yield postJsonToApi({url:_this23.config.url({path:"/responses",modelId:_this23.modelId}),headers:combineHeaders(_this23.config.headers(),options.headers),body:_objectSpread2(_objectSpread2({},body),{},{stream:true}),failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createEventSourceResponseHandler(openaiResponsesChunkSchema),abortSignal:options.abortSignal,fetch:_this23.config.fetch});const self=_this23;let finishReason="unknown";const usage={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};const logprobs=[];let responseId=null;const ongoingToolCalls={};let hasFunctionCall=false;const activeReasoning={};let serviceTier;return{stream:response.pipeThrough(new TransformStream({start(controller){controller.enqueue({type:"stream-start",warnings});},transform(chunk,controller){var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u;if(options.includeRawChunks){controller.enqueue({type:"raw",rawValue:chunk.rawValue});}if(!chunk.success){finishReason="error";controller.enqueue({type:"error",error:chunk.error});return;}const value=chunk.value;if(isResponseOutputItemAddedChunk(value)){if(value.item.type==="function_call"){ongoingToolCalls[value.output_index]={toolName:value.item.name,toolCallId:value.item.call_id};controller.enqueue({type:"tool-input-start",id:value.item.call_id,toolName:value.item.name});}else if(value.item.type==="web_search_call"){ongoingToolCalls[value.output_index]={toolName:webSearchToolName!=null?webSearchToolName:"web_search",toolCallId:value.item.id};controller.enqueue({type:"tool-input-start",id:value.item.id,toolName:webSearchToolName!=null?webSearchToolName:"web_search"});}else if(value.item.type==="computer_call"){ongoingToolCalls[value.output_index]={toolName:"computer_use",toolCallId:value.item.id};controller.enqueue({type:"tool-input-start",id:value.item.id,toolName:"computer_use"});}else if(value.item.type==="file_search_call"){ongoingToolCalls[value.output_index]={toolName:"file_search",toolCallId:value.item.id};controller.enqueue({type:"tool-input-start",id:value.item.id,toolName:"file_search"});}else if(value.item.type==="message"){controller.enqueue({type:"text-start",id:value.item.id,providerMetadata:{openai:{itemId:value.item.id}}});}else if(isResponseOutputItemAddedReasoningChunk(value)){activeReasoning[value.item.id]={encryptedContent:value.item.encrypted_content,summaryParts:[0]};controller.enqueue({type:"reasoning-start",id:"".concat(value.item.id,":0"),providerMetadata:{openai:{itemId:value.item.id,reasoningEncryptedContent:(_a=value.item.encrypted_content)!=null?_a:null}}});}}else if(isResponseOutputItemDoneChunk(value)){if(value.item.type==="function_call"){ongoingToolCalls[value.output_index]=void 0;hasFunctionCall=true;controller.enqueue({type:"tool-input-end",id:value.item.call_id});controller.enqueue({type:"tool-call",toolCallId:value.item.call_id,toolName:value.item.name,input:value.item.arguments,providerMetadata:{openai:{itemId:value.item.id}}});}else if(value.item.type==="web_search_call"){ongoingToolCalls[value.output_index]=void 0;controller.enqueue({type:"tool-input-end",id:value.item.id});controller.enqueue({type:"tool-call",toolCallId:value.item.id,toolName:"web_search",input:JSON.stringify({action:value.item.action}),providerExecuted:true});controller.enqueue({type:"tool-result",toolCallId:value.item.id,toolName:"web_search",result:{status:value.item.status},providerExecuted:true});}else if(value.item.type==="computer_call"){ongoingToolCalls[value.output_index]=void 0;controller.enqueue({type:"tool-input-end",id:value.item.id});controller.enqueue({type:"tool-call",toolCallId:value.item.id,toolName:"computer_use",input:"",providerExecuted:true});controller.enqueue({type:"tool-result",toolCallId:value.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:value.item.status||"completed"},providerExecuted:true});}else if(value.item.type==="file_search_call"){ongoingToolCalls[value.output_index]=void 0;controller.enqueue({type:"tool-input-end",id:value.item.id});controller.enqueue({type:"tool-call",toolCallId:value.item.id,toolName:"file_search",input:"",providerExecuted:true});controller.enqueue({type:"tool-result",toolCallId:value.item.id,toolName:"file_search",result:_objectSpread2(_objectSpread2({type:"file_search_tool_result",status:value.item.status||"completed"},value.item.queries&&{queries:value.item.queries}),value.item.results&&{results:value.item.results}),providerExecuted:true});}else if(value.item.type==="code_interpreter_call"){controller.enqueue({type:"tool-call",toolCallId:value.item.id,toolName:"code_interpreter",input:JSON.stringify({code:value.item.code,containerId:value.item.container_id}),providerExecuted:true});controller.enqueue({type:"tool-result",toolCallId:value.item.id,toolName:"code_interpreter",result:{outputs:value.item.outputs},providerExecuted:true});}else if(value.item.type==="message"){controller.enqueue({type:"text-end",id:value.item.id});}else if(isResponseOutputItemDoneReasoningChunk(value)){const activeReasoningPart=activeReasoning[value.item.id];for(const summaryIndex of activeReasoningPart.summaryParts){controller.enqueue({type:"reasoning-end",id:"".concat(value.item.id,":").concat(summaryIndex),providerMetadata:{openai:{itemId:value.item.id,reasoningEncryptedContent:(_b=value.item.encrypted_content)!=null?_b:null}}});}delete activeReasoning[value.item.id];}}else if(isResponseFunctionCallArgumentsDeltaChunk(value)){const toolCall=ongoingToolCalls[value.output_index];if(toolCall!=null){controller.enqueue({type:"tool-input-delta",id:toolCall.toolCallId,delta:value.delta});}}else if(isResponseCreatedChunk(value)){responseId=value.response.id;controller.enqueue({type:"response-metadata",id:value.response.id,timestamp:new Date(value.response.created_at*1e3),modelId:value.response.model});}else if(isTextDeltaChunk(value)){controller.enqueue({type:"text-delta",id:value.item_id,delta:value.delta});if(((_d=(_c=options.providerOptions)==null?void 0:_c.openai)==null?void 0:_d.logprobs)&&value.logprobs){logprobs.push(value.logprobs);}}else if(isResponseReasoningSummaryPartAddedChunk(value)){if(value.summary_index>0){(_e=activeReasoning[value.item_id])==null?void 0:_e.summaryParts.push(value.summary_index);controller.enqueue({type:"reasoning-start",id:"".concat(value.item_id,":").concat(value.summary_index),providerMetadata:{openai:{itemId:value.item_id,reasoningEncryptedContent:(_g=(_f=activeReasoning[value.item_id])==null?void 0:_f.encryptedContent)!=null?_g:null}}});}}else if(isResponseReasoningSummaryTextDeltaChunk(value)){controller.enqueue({type:"reasoning-delta",id:"".concat(value.item_id,":").concat(value.summary_index),delta:value.delta,providerMetadata:{openai:{itemId:value.item_id}}});}else if(isResponseFinishedChunk(value)){finishReason=mapOpenAIResponseFinishReason({finishReason:(_h=value.response.incomplete_details)==null?void 0:_h.reason,hasFunctionCall});usage.inputTokens=value.response.usage.input_tokens;usage.outputTokens=value.response.usage.output_tokens;usage.totalTokens=value.response.usage.input_tokens+value.response.usage.output_tokens;usage.reasoningTokens=(_j=(_i=value.response.usage.output_tokens_details)==null?void 0:_i.reasoning_tokens)!=null?_j:void 0;usage.cachedInputTokens=(_l=(_k=value.response.usage.input_tokens_details)==null?void 0:_k.cached_tokens)!=null?_l:void 0;if(typeof value.response.service_tier==="string"){serviceTier=value.response.service_tier;}}else if(isResponseAnnotationAddedChunk(value)){if(value.annotation.type==="url_citation"){controller.enqueue({type:"source",sourceType:"url",id:(_o=(_n=(_m=self.config).generateId)==null?void 0:_n.call(_m))!=null?_o:generateId(),url:value.annotation.url,title:value.annotation.title});}else if(value.annotation.type==="file_citation"){controller.enqueue({type:"source",sourceType:"document",id:(_r=(_q=(_p=self.config).generateId)==null?void 0:_q.call(_p))!=null?_r:generateId(),mediaType:"text/plain",title:(_t=(_s=value.annotation.quote)!=null?_s:value.annotation.filename)!=null?_t:"Document",filename:(_u=value.annotation.filename)!=null?_u:value.annotation.file_id});}}else if(isErrorChunk(value)){controller.enqueue({type:"error",error:value});}},flush(controller){const providerMetadata={openai:{responseId}};if(logprobs.length>0){providerMetadata.openai.logprobs=logprobs;}if(serviceTier!==void 0){providerMetadata.openai.serviceTier=serviceTier;}controller.enqueue({type:"finish",finishReason,usage,providerMetadata});}})),request:{body},response:{headers:responseHeaders}};})();}};var usageSchema2=object$1({input_tokens:number$1(),input_tokens_details:object$1({cached_tokens:number$1().nullish()}).nullish(),output_tokens:number$1(),output_tokens_details:object$1({reasoning_tokens:number$1().nullish()}).nullish()});var textDeltaChunkSchema=object$1({type:literal("response.output_text.delta"),item_id:string$1(),delta:string$1(),logprobs:LOGPROBS_SCHEMA.nullish()});var errorChunkSchema=object$1({type:literal("error"),code:string$1(),message:string$1(),param:string$1().nullish(),sequence_number:number$1()});var responseFinishedChunkSchema=object$1({type:_enum(["response.completed","response.incomplete"]),response:object$1({incomplete_details:object$1({reason:string$1()}).nullish(),usage:usageSchema2,service_tier:string$1().nullish()})});var responseCreatedChunkSchema=object$1({type:literal("response.created"),response:object$1({id:string$1(),created_at:number$1(),model:string$1(),service_tier:string$1().nullish()})});var responseOutputItemAddedSchema=object$1({type:literal("response.output_item.added"),output_index:number$1(),item:discriminatedUnion("type",[object$1({type:literal("message"),id:string$1()}),object$1({type:literal("reasoning"),id:string$1(),encrypted_content:string$1().nullish()}),object$1({type:literal("function_call"),id:string$1(),call_id:string$1(),name:string$1(),arguments:string$1()}),object$1({type:literal("web_search_call"),id:string$1(),status:string$1(),action:object$1({type:literal("search"),query:string$1().optional()}).nullish()}),object$1({type:literal("computer_call"),id:string$1(),status:string$1()}),object$1({type:literal("file_search_call"),id:string$1(),status:string$1(),queries:array(string$1()).nullish(),results:array(object$1({attributes:object$1({file_id:string$1(),filename:string$1(),score:number$1(),text:string$1()})})).optional()})])});var responseOutputItemDoneSchema=object$1({type:literal("response.output_item.done"),output_index:number$1(),item:discriminatedUnion("type",[object$1({type:literal("message"),id:string$1()}),object$1({type:literal("reasoning"),id:string$1(),encrypted_content:string$1().nullish()}),object$1({type:literal("function_call"),id:string$1(),call_id:string$1(),name:string$1(),arguments:string$1(),status:literal("completed")}),codeInterpreterCallItem,webSearchCallItem,object$1({type:literal("computer_call"),id:string$1(),status:literal("completed")}),object$1({type:literal("file_search_call"),id:string$1(),status:literal("completed"),queries:array(string$1()).nullish(),results:array(object$1({attributes:object$1({file_id:string$1(),filename:string$1(),score:number$1(),text:string$1()})})).nullish()})])});var responseFunctionCallArgumentsDeltaSchema=object$1({type:literal("response.function_call_arguments.delta"),item_id:string$1(),output_index:number$1(),delta:string$1()});var responseAnnotationAddedSchema=object$1({type:literal("response.output_text.annotation.added"),annotation:discriminatedUnion("type",[object$1({type:literal("url_citation"),url:string$1(),title:string$1()}),object$1({type:literal("file_citation"),file_id:string$1(),filename:string$1().nullish(),index:number$1().nullish(),start_index:number$1().nullish(),end_index:number$1().nullish(),quote:string$1().nullish()})])});var responseReasoningSummaryPartAddedSchema=object$1({type:literal("response.reasoning_summary_part.added"),item_id:string$1(),summary_index:number$1()});var responseReasoningSummaryTextDeltaSchema=object$1({type:literal("response.reasoning_summary_text.delta"),item_id:string$1(),summary_index:number$1(),delta:string$1()});var openaiResponsesChunkSchema=union([textDeltaChunkSchema,responseFinishedChunkSchema,responseCreatedChunkSchema,responseOutputItemAddedSchema,responseOutputItemDoneSchema,responseFunctionCallArgumentsDeltaSchema,responseAnnotationAddedSchema,responseReasoningSummaryPartAddedSchema,responseReasoningSummaryTextDeltaSchema,errorChunkSchema,object$1({type:string$1()}).loose()// fallback for unknown chunks
]);function isTextDeltaChunk(chunk){return chunk.type==="response.output_text.delta";}function isResponseOutputItemDoneChunk(chunk){return chunk.type==="response.output_item.done";}function isResponseOutputItemDoneReasoningChunk(chunk){return isResponseOutputItemDoneChunk(chunk)&&chunk.item.type==="reasoning";}function isResponseFinishedChunk(chunk){return chunk.type==="response.completed"||chunk.type==="response.incomplete";}function isResponseCreatedChunk(chunk){return chunk.type==="response.created";}function isResponseFunctionCallArgumentsDeltaChunk(chunk){return chunk.type==="response.function_call_arguments.delta";}function isResponseOutputItemAddedChunk(chunk){return chunk.type==="response.output_item.added";}function isResponseOutputItemAddedReasoningChunk(chunk){return isResponseOutputItemAddedChunk(chunk)&&chunk.item.type==="reasoning";}function isResponseAnnotationAddedChunk(chunk){return chunk.type==="response.output_text.annotation.added";}function isResponseReasoningSummaryPartAddedChunk(chunk){return chunk.type==="response.reasoning_summary_part.added";}function isResponseReasoningSummaryTextDeltaChunk(chunk){return chunk.type==="response.reasoning_summary_text.delta";}function isErrorChunk(chunk){return chunk.type==="error";}function getResponsesModelConfig(modelId){const supportsFlexProcessing2=modelId.startsWith("o3")||modelId.startsWith("o4-mini")||modelId.startsWith("gpt-5")&&!modelId.startsWith("gpt-5-chat");const supportsPriorityProcessing2=modelId.startsWith("gpt-4")||modelId.startsWith("gpt-5-mini")||modelId.startsWith("gpt-5")&&!modelId.startsWith("gpt-5-nano")&&!modelId.startsWith("gpt-5-chat")||modelId.startsWith("o3")||modelId.startsWith("o4-mini");const defaults={requiredAutoTruncation:false,systemMessageMode:"system",supportsFlexProcessing:supportsFlexProcessing2,supportsPriorityProcessing:supportsPriorityProcessing2};if(modelId.startsWith("gpt-5-chat")){return _objectSpread2(_objectSpread2({},defaults),{},{isReasoningModel:false});}if(modelId.startsWith("o")||modelId.startsWith("gpt-5")||modelId.startsWith("codex-")||modelId.startsWith("computer-use")){if(modelId.startsWith("o1-mini")||modelId.startsWith("o1-preview")){return _objectSpread2(_objectSpread2({},defaults),{},{isReasoningModel:true,systemMessageMode:"remove"});}return _objectSpread2(_objectSpread2({},defaults),{},{isReasoningModel:true,systemMessageMode:"developer"});}return _objectSpread2(_objectSpread2({},defaults),{},{isReasoningModel:false});}var openaiResponsesProviderOptionsSchema=object$1({metadata:any().nullish(),parallelToolCalls:boolean$1().nullish(),previousResponseId:string$1().nullish(),store:boolean$1().nullish(),user:string$1().nullish(),reasoningEffort:string$1().nullish(),strictJsonSchema:boolean$1().nullish(),instructions:string$1().nullish(),reasoningSummary:string$1().nullish(),serviceTier:_enum(["auto","flex","priority"]).nullish(),include:array(_enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),textVerbosity:_enum(["low","medium","high"]).nullish(),promptCacheKey:string$1().nullish(),safetyIdentifier:string$1().nullish(),/**
   * Return the log probabilities of the tokens.
   *
   * Setting to true will return the log probabilities of the tokens that
   * were generated.
   *
   * Setting to a number will return the log probabilities of the top n
   * tokens that were generated.
   *
   * @see https://platform.openai.com/docs/api-reference/responses/create
   * @see https://cookbook.openai.com/examples/using_logprobs
   */logprobs:union([boolean$1(),number$1().min(1).max(TOP_LOGPROBS_MAX)]).optional()});var OpenAIProviderOptionsSchema=object$1({instructions:string$1().nullish(),speed:number$1().min(0.25).max(4).default(1).nullish()});var OpenAISpeechModel=class{constructor(modelId,config){this.modelId=modelId;this.config=config;this.specificationVersion="v2";}get provider(){return this.config.provider;}getArgs(_x48){var _this24=this;return _asyncToGenerator2(function(_ref89){let{text,voice="alloy",outputFormat="mp3",speed,instructions,language,providerOptions}=_ref89;return function*(){const warnings=[];const openAIOptions=yield parseProviderOptions({provider:"openai",providerOptions,schema:OpenAIProviderOptionsSchema});const requestBody={model:_this24.modelId,input:text,voice,response_format:"mp3",speed,instructions};if(outputFormat){if(["mp3","opus","aac","flac","wav","pcm"].includes(outputFormat)){requestBody.response_format=outputFormat;}else{warnings.push({type:"unsupported-setting",setting:"outputFormat",details:"Unsupported output format: ".concat(outputFormat,". Using mp3 instead.")});}}if(openAIOptions){const speechModelOptions={};for(const key in speechModelOptions){const value=speechModelOptions[key];if(value!==void 0){requestBody[key]=value;}}}if(language){warnings.push({type:"unsupported-setting",setting:"language",details:"OpenAI speech models do not support language selection. Language parameter \"".concat(language,"\" was ignored.")});}return{requestBody,warnings};}();}).apply(this,arguments);}doGenerate(options){var _this25=this;return _asyncToGenerator2(function*(){var _a,_b,_c;const currentDate=(_c=(_b=(_a=_this25.config._internal)==null?void 0:_a.currentDate)==null?void 0:_b.call(_a))!=null?_c:/* @__PURE__ */new Date();const{requestBody,warnings}=yield _this25.getArgs(options);const{value:audio,responseHeaders,rawValue:rawResponse}=yield postJsonToApi({url:_this25.config.url({path:"/audio/speech",modelId:_this25.modelId}),headers:combineHeaders(_this25.config.headers(),options.headers),body:requestBody,failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createBinaryResponseHandler(),abortSignal:options.abortSignal,fetch:_this25.config.fetch});return{audio,warnings,request:{body:JSON.stringify(requestBody)},response:{timestamp:currentDate,modelId:_this25.modelId,headers:responseHeaders,body:rawResponse}};})();}};var openAITranscriptionProviderOptions=object$1({/**
   * Additional information to include in the transcription response.
   */include:array(string$1()).optional(),/**
   * The language of the input audio in ISO-639-1 format.
   */language:string$1().optional(),/**
   * An optional text to guide the model's style or continue a previous audio segment.
   */prompt:string$1().optional(),/**
   * The sampling temperature, between 0 and 1.
   * @default 0
   */temperature:number$1().min(0).max(1).default(0).optional(),/**
   * The timestamp granularities to populate for this transcription.
   * @default ['segment']
   */timestampGranularities:array(_enum(["word","segment"])).default(["segment"]).optional()});// src/transcription/openai-transcription-model.ts
var languageMap={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"};var OpenAITranscriptionModel=class{constructor(modelId,config){this.modelId=modelId;this.config=config;this.specificationVersion="v2";}get provider(){return this.config.provider;}getArgs(_x49){var _this26=this;return _asyncToGenerator2(function(_ref90){let{audio,mediaType,providerOptions}=_ref90;return function*(){const warnings=[];const openAIOptions=yield parseProviderOptions({provider:"openai",providerOptions,schema:openAITranscriptionProviderOptions});const formData=new FormData();const blob=audio instanceof Uint8Array?new Blob([audio]):new Blob([convertBase64ToUint8Array(audio)]);formData.append("model",_this26.modelId);const fileExtension=mediaTypeToExtension(mediaType);formData.append("file",new File([blob],"audio",{type:mediaType}),"audio.".concat(fileExtension));if(openAIOptions){const transcriptionModelOptions={include:openAIOptions.include,language:openAIOptions.language,prompt:openAIOptions.prompt,// https://platform.openai.com/docs/api-reference/audio/createTranscription#audio_createtranscription-response_format
// prefer verbose_json to get segments for models that support it
response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(_this26.modelId)?"json":"verbose_json",temperature:openAIOptions.temperature,timestamp_granularities:openAIOptions.timestampGranularities};for(const[key,value]of Object.entries(transcriptionModelOptions)){if(value!=null){if(Array.isArray(value)){for(const item of value){formData.append("".concat(key,"[]"),String(item));}}else{formData.append(key,String(value));}}}}return{formData,warnings};}();}).apply(this,arguments);}doGenerate(options){var _this27=this;return _asyncToGenerator2(function*(){var _a,_b,_c,_d,_e,_f,_g,_h;const currentDate=(_c=(_b=(_a=_this27.config._internal)==null?void 0:_a.currentDate)==null?void 0:_b.call(_a))!=null?_c:/* @__PURE__ */new Date();const{formData,warnings}=yield _this27.getArgs(options);const{value:response,responseHeaders,rawValue:rawResponse}=yield postFormDataToApi({url:_this27.config.url({path:"/audio/transcriptions",modelId:_this27.modelId}),headers:combineHeaders(_this27.config.headers(),options.headers),formData,failedResponseHandler:openaiFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(openaiTranscriptionResponseSchema),abortSignal:options.abortSignal,fetch:_this27.config.fetch});const language=response.language!=null&&response.language in languageMap?languageMap[response.language]:void 0;return{text:response.text,segments:(_g=(_f=(_d=response.segments)==null?void 0:_d.map(segment=>({text:segment.text,startSecond:segment.start,endSecond:segment.end})))!=null?_f:(_e=response.words)==null?void 0:_e.map(word=>({text:word.word,startSecond:word.start,endSecond:word.end})))!=null?_g:[],language,durationInSeconds:(_h=response.duration)!=null?_h:void 0,warnings,response:{timestamp:currentDate,modelId:_this27.modelId,headers:responseHeaders,body:rawResponse}};})();}};var openaiTranscriptionResponseSchema=object$1({text:string$1(),language:string$1().nullish(),duration:number$1().nullish(),words:array(object$1({word:string$1(),start:number$1(),end:number$1()})).nullish(),segments:array(object$1({id:number$1(),seek:number$1(),start:number$1(),end:number$1(),text:string$1(),tokens:array(number$1()),temperature:number$1(),avg_logprob:number$1(),compression_ratio:number$1(),no_speech_prob:number$1()})).nullish()});// src/openai-provider.ts
function createOpenAI(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _a,_b;const baseURL=(_a=withoutTrailingSlash(options.baseURL))!=null?_a:"https://api.openai.com/v1";const providerName=(_b=options.name)!=null?_b:"openai";const getHeaders=()=>_objectSpread2({Authorization:"Bearer ".concat(loadApiKey({apiKey:options.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})),"OpenAI-Organization":options.organization,"OpenAI-Project":options.project},options.headers);const createChatModel=modelId=>new OpenAIChatLanguageModel(modelId,{provider:"".concat(providerName,".chat"),url:_ref91=>{let{path}=_ref91;return"".concat(baseURL).concat(path);},headers:getHeaders,fetch:options.fetch});const createCompletionModel=modelId=>new OpenAICompletionLanguageModel(modelId,{provider:"".concat(providerName,".completion"),url:_ref92=>{let{path}=_ref92;return"".concat(baseURL).concat(path);},headers:getHeaders,fetch:options.fetch});const createEmbeddingModel=modelId=>new OpenAIEmbeddingModel(modelId,{provider:"".concat(providerName,".embedding"),url:_ref93=>{let{path}=_ref93;return"".concat(baseURL).concat(path);},headers:getHeaders,fetch:options.fetch});const createImageModel=modelId=>new OpenAIImageModel(modelId,{provider:"".concat(providerName,".image"),url:_ref94=>{let{path}=_ref94;return"".concat(baseURL).concat(path);},headers:getHeaders,fetch:options.fetch});const createTranscriptionModel=modelId=>new OpenAITranscriptionModel(modelId,{provider:"".concat(providerName,".transcription"),url:_ref95=>{let{path}=_ref95;return"".concat(baseURL).concat(path);},headers:getHeaders,fetch:options.fetch});const createSpeechModel=modelId=>new OpenAISpeechModel(modelId,{provider:"".concat(providerName,".speech"),url:_ref96=>{let{path}=_ref96;return"".concat(baseURL).concat(path);},headers:getHeaders,fetch:options.fetch});const createLanguageModel=modelId=>{if(new.target){throw new Error("The OpenAI model function cannot be called with the new keyword.");}return createResponsesModel(modelId);};const createResponsesModel=modelId=>{return new OpenAIResponsesLanguageModel(modelId,{provider:"".concat(providerName,".responses"),url:_ref97=>{let{path}=_ref97;return"".concat(baseURL).concat(path);},headers:getHeaders,fetch:options.fetch,fileIdPrefixes:["file-"]});};const provider=function(modelId){return createLanguageModel(modelId);};provider.languageModel=createLanguageModel;provider.chat=createChatModel;provider.completion=createCompletionModel;provider.responses=createResponsesModel;provider.embedding=createEmbeddingModel;provider.textEmbedding=createEmbeddingModel;provider.textEmbeddingModel=createEmbeddingModel;provider.image=createImageModel;provider.imageModel=createImageModel;provider.transcription=createTranscriptionModel;provider.transcriptionModel=createTranscriptionModel;provider.speech=createSpeechModel;provider.speechModel=createSpeechModel;provider.tools=openaiTools;return provider;}createOpenAI();// src/chat/openai-compatible-chat-language-model.ts
function getOpenAIMetadata(message){var _a,_b;return(_b=(_a=message==null?void 0:message.providerOptions)==null?void 0:_a.openaiCompatible)!=null?_b:{};}function convertToOpenAICompatibleChatMessages(prompt){const messages=[];for(const _ref98 of prompt){const{role,content}=_ref98,message=_objectWithoutProperties(_ref98,_excluded6);const metadata=getOpenAIMetadata(_objectSpread2({},message));switch(role){case"system":{messages.push(_objectSpread2({role:"system",content},metadata));break;}case"user":{if(content.length===1&&content[0].type==="text"){messages.push(_objectSpread2({role:"user",content:content[0].text},getOpenAIMetadata(content[0])));break;}messages.push(_objectSpread2({role:"user",content:content.map(part=>{const partMetadata=getOpenAIMetadata(part);switch(part.type){case"text":{return _objectSpread2({type:"text",text:part.text},partMetadata);}case"file":{if(part.mediaType.startsWith("image/")){const mediaType=part.mediaType==="image/*"?"image/jpeg":part.mediaType;return _objectSpread2({type:"image_url",image_url:{url:part.data instanceof URL?part.data.toString():"data:".concat(mediaType,";base64,").concat(convertToBase64(part.data))}},partMetadata);}else{throw new UnsupportedFunctionalityError({functionality:"file part media type ".concat(part.mediaType)});}}}})},metadata));break;}case"assistant":{let text="";const toolCalls=[];for(const part of content){const partMetadata=getOpenAIMetadata(part);switch(part.type){case"text":{text+=part.text;break;}case"tool-call":{toolCalls.push(_objectSpread2({id:part.toolCallId,type:"function",function:{name:part.toolName,arguments:JSON.stringify(part.input)}},partMetadata));break;}}}messages.push(_objectSpread2({role:"assistant",content:text,tool_calls:toolCalls.length>0?toolCalls:void 0},metadata));break;}case"tool":{for(const toolResponse of content){const output=toolResponse.output;let contentValue;switch(output.type){case"text":case"error-text":contentValue=output.value;break;case"content":case"json":case"error-json":contentValue=JSON.stringify(output.value);break;}const toolResponseMetadata=getOpenAIMetadata(toolResponse);messages.push(_objectSpread2({role:"tool",tool_call_id:toolResponse.toolCallId,content:contentValue},toolResponseMetadata));}break;}default:{const _exhaustiveCheck=role;throw new Error("Unsupported role: ".concat(_exhaustiveCheck));}}}return messages;}// src/chat/get-response-metadata.ts
function getResponseMetadata(_ref99){let{id,model,created}=_ref99;return{id:id!=null?id:void 0,modelId:model!=null?model:void 0,timestamp:created!=null?new Date(created*1e3):void 0};}// src/chat/map-openai-compatible-finish-reason.ts
function mapOpenAICompatibleFinishReason(finishReason){switch(finishReason){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown";}}var openaiCompatibleProviderOptions=object$1({/**
   * A unique identifier representing your end-user, which can help the provider to
   * monitor and detect abuse.
   */user:string$1().optional(),/**
   * Reasoning effort for reasoning models. Defaults to `medium`.
   */reasoningEffort:string$1().optional()});var openaiCompatibleErrorDataSchema=object$1({error:object$1({message:string$1(),// The additional information below is handled loosely to support
// OpenAI-compatible providers that have slightly different error
// responses:
type:string$1().nullish(),param:any().nullish(),code:union([string$1(),number$1()]).nullish()})});var defaultOpenAICompatibleErrorStructure={errorSchema:openaiCompatibleErrorDataSchema,errorToMessage:data=>data.error.message};function prepareTools$1(_ref100){let{tools,toolChoice}=_ref100;tools=(tools==null?void 0:tools.length)?tools:void 0;const toolWarnings=[];if(tools==null){return{tools:void 0,toolChoice:void 0,toolWarnings};}const openaiCompatTools=[];for(const tool of tools){if(tool.type==="provider-defined"){toolWarnings.push({type:"unsupported-tool",tool});}else{openaiCompatTools.push({type:"function",function:{name:tool.name,description:tool.description,parameters:tool.inputSchema}});}}if(toolChoice==null){return{tools:openaiCompatTools,toolChoice:void 0,toolWarnings};}const type=toolChoice.type;switch(type){case"auto":case"none":case"required":return{tools:openaiCompatTools,toolChoice:type,toolWarnings};case"tool":return{tools:openaiCompatTools,toolChoice:{type:"function",function:{name:toolChoice.toolName}},toolWarnings};default:{const _exhaustiveCheck=type;throw new UnsupportedFunctionalityError({functionality:"tool choice type: ".concat(_exhaustiveCheck)});}}}// src/chat/openai-compatible-chat-language-model.ts
var OpenAICompatibleChatLanguageModel=class{// type inferred via constructor
constructor(modelId,config){this.specificationVersion="v2";var _a,_b;this.modelId=modelId;this.config=config;const errorStructure=(_a=config.errorStructure)!=null?_a:defaultOpenAICompatibleErrorStructure;this.chunkSchema=createOpenAICompatibleChatChunkSchema(errorStructure.errorSchema);this.failedResponseHandler=createJsonErrorResponseHandler(errorStructure);this.supportsStructuredOutputs=(_b=config.supportsStructuredOutputs)!=null?_b:false;}get provider(){return this.config.provider;}get providerOptionsName(){return this.config.provider.split(".")[0].trim();}get supportedUrls(){var _a,_b,_c;return(_c=(_b=(_a=this.config).supportedUrls)==null?void 0:_b.call(_a))!=null?_c:{};}getArgs(_x50){var _this28=this;return _asyncToGenerator2(function(_ref101){let{prompt,maxOutputTokens,temperature,topP,topK,frequencyPenalty,presencePenalty,providerOptions,stopSequences,responseFormat,seed,toolChoice,tools}=_ref101;return function*(){var _a,_b,_c,_d;const warnings=[];const compatibleOptions=Object.assign((_a=yield parseProviderOptions({provider:"openai-compatible",providerOptions,schema:openaiCompatibleProviderOptions}))!=null?_a:{},(_b=yield parseProviderOptions({provider:_this28.providerOptionsName,providerOptions,schema:openaiCompatibleProviderOptions}))!=null?_b:{});if(topK!=null){warnings.push({type:"unsupported-setting",setting:"topK"});}if((responseFormat==null?void 0:responseFormat.type)==="json"&&responseFormat.schema!=null&&!_this28.supportsStructuredOutputs){warnings.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});}const{tools:openaiTools,toolChoice:openaiToolChoice,toolWarnings}=prepareTools$1({tools,toolChoice});return{args:_objectSpread2(_objectSpread2({// model id:
model:_this28.modelId,// model specific settings:
user:compatibleOptions.user,// standardized settings:
max_tokens:maxOutputTokens,temperature,top_p:topP,frequency_penalty:frequencyPenalty,presence_penalty:presencePenalty,response_format:(responseFormat==null?void 0:responseFormat.type)==="json"?_this28.supportsStructuredOutputs===true&&responseFormat.schema!=null?{type:"json_schema",json_schema:{schema:responseFormat.schema,name:(_c=responseFormat.name)!=null?_c:"response",description:responseFormat.description}}:{type:"json_object"}:void 0,stop:stopSequences,seed},Object.fromEntries(Object.entries((_d=providerOptions==null?void 0:providerOptions[_this28.providerOptionsName])!=null?_d:{}).filter(_ref102=>{let[key]=_ref102;return!Object.keys(openaiCompatibleProviderOptions.shape).includes(key);}))),{},{reasoning_effort:compatibleOptions.reasoningEffort,// messages:
messages:convertToOpenAICompatibleChatMessages(prompt),// tools:
tools:openaiTools,tool_choice:openaiToolChoice}),warnings:[...warnings,...toolWarnings]};}();}).apply(this,arguments);}doGenerate(options){var _this29=this;return _asyncToGenerator2(function*(){var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q;const{args,warnings}=yield _this29.getArgs(_objectSpread2({},options));const body=JSON.stringify(args);const{responseHeaders,value:responseBody,rawValue:rawResponse}=yield postJsonToApi({url:_this29.config.url({path:"/chat/completions",modelId:_this29.modelId}),headers:combineHeaders(_this29.config.headers(),options.headers),body:args,failedResponseHandler:_this29.failedResponseHandler,successfulResponseHandler:createJsonResponseHandler(OpenAICompatibleChatResponseSchema),abortSignal:options.abortSignal,fetch:_this29.config.fetch});const choice=responseBody.choices[0];const content=[];const text=choice.message.content;if(text!=null&&text.length>0){content.push({type:"text",text});}const reasoning=(_a=choice.message.reasoning_content)!=null?_a:choice.message.reasoning;if(reasoning!=null&&reasoning.length>0){content.push({type:"reasoning",text:reasoning});}if(choice.message.tool_calls!=null){for(const toolCall of choice.message.tool_calls){content.push({type:"tool-call",toolCallId:(_b=toolCall.id)!=null?_b:generateId(),toolName:toolCall.function.name,input:toolCall.function.arguments});}}const providerMetadata=_objectSpread2({[_this29.providerOptionsName]:{}},yield(_d=(_c=_this29.config.metadataExtractor)==null?void 0:_c.extractMetadata)==null?void 0:_d.call(_c,{parsedBody:rawResponse}));const completionTokenDetails=(_e=responseBody.usage)==null?void 0:_e.completion_tokens_details;if((completionTokenDetails==null?void 0:completionTokenDetails.accepted_prediction_tokens)!=null){providerMetadata[_this29.providerOptionsName].acceptedPredictionTokens=completionTokenDetails==null?void 0:completionTokenDetails.accepted_prediction_tokens;}if((completionTokenDetails==null?void 0:completionTokenDetails.rejected_prediction_tokens)!=null){providerMetadata[_this29.providerOptionsName].rejectedPredictionTokens=completionTokenDetails==null?void 0:completionTokenDetails.rejected_prediction_tokens;}return{content,finishReason:mapOpenAICompatibleFinishReason(choice.finish_reason),usage:{inputTokens:(_g=(_f=responseBody.usage)==null?void 0:_f.prompt_tokens)!=null?_g:void 0,outputTokens:(_i=(_h=responseBody.usage)==null?void 0:_h.completion_tokens)!=null?_i:void 0,totalTokens:(_k=(_j=responseBody.usage)==null?void 0:_j.total_tokens)!=null?_k:void 0,reasoningTokens:(_n=(_m=(_l=responseBody.usage)==null?void 0:_l.completion_tokens_details)==null?void 0:_m.reasoning_tokens)!=null?_n:void 0,cachedInputTokens:(_q=(_p=(_o=responseBody.usage)==null?void 0:_o.prompt_tokens_details)==null?void 0:_p.cached_tokens)!=null?_q:void 0},providerMetadata,request:{body},response:_objectSpread2(_objectSpread2({},getResponseMetadata(responseBody)),{},{headers:responseHeaders,body:rawResponse}),warnings};})();}doStream(options){var _this30=this;return _asyncToGenerator2(function*(){var _a;const{args,warnings}=yield _this30.getArgs(_objectSpread2({},options));const body=_objectSpread2(_objectSpread2({},args),{},{stream:true,// only include stream_options when in strict compatibility mode:
stream_options:_this30.config.includeUsage?{include_usage:true}:void 0});const metadataExtractor=(_a=_this30.config.metadataExtractor)==null?void 0:_a.createStreamExtractor();const{responseHeaders,value:response}=yield postJsonToApi({url:_this30.config.url({path:"/chat/completions",modelId:_this30.modelId}),headers:combineHeaders(_this30.config.headers(),options.headers),body,failedResponseHandler:_this30.failedResponseHandler,successfulResponseHandler:createEventSourceResponseHandler(_this30.chunkSchema),abortSignal:options.abortSignal,fetch:_this30.config.fetch});const toolCalls=[];let finishReason="unknown";const usage={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0},totalTokens:void 0};let isFirstChunk=true;const providerOptionsName=_this30.providerOptionsName;let isActiveReasoning=false;let isActiveText=false;return{stream:response.pipeThrough(new TransformStream({start(controller){controller.enqueue({type:"stream-start",warnings});},// TODO we lost type safety on Chunk, most likely due to the error schema. MUST FIX
transform(chunk,controller){var _a2,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m;if(options.includeRawChunks){controller.enqueue({type:"raw",rawValue:chunk.rawValue});}if(!chunk.success){finishReason="error";controller.enqueue({type:"error",error:chunk.error});return;}const value=chunk.value;metadataExtractor==null?void 0:metadataExtractor.processChunk(chunk.rawValue);if("error"in value){finishReason="error";controller.enqueue({type:"error",error:value.error.message});return;}if(isFirstChunk){isFirstChunk=false;controller.enqueue(_objectSpread2({type:"response-metadata"},getResponseMetadata(value)));}if(value.usage!=null){const{prompt_tokens,completion_tokens,total_tokens,prompt_tokens_details,completion_tokens_details}=value.usage;usage.promptTokens=prompt_tokens!=null?prompt_tokens:void 0;usage.completionTokens=completion_tokens!=null?completion_tokens:void 0;usage.totalTokens=total_tokens!=null?total_tokens:void 0;if((completion_tokens_details==null?void 0:completion_tokens_details.reasoning_tokens)!=null){usage.completionTokensDetails.reasoningTokens=completion_tokens_details==null?void 0:completion_tokens_details.reasoning_tokens;}if((completion_tokens_details==null?void 0:completion_tokens_details.accepted_prediction_tokens)!=null){usage.completionTokensDetails.acceptedPredictionTokens=completion_tokens_details==null?void 0:completion_tokens_details.accepted_prediction_tokens;}if((completion_tokens_details==null?void 0:completion_tokens_details.rejected_prediction_tokens)!=null){usage.completionTokensDetails.rejectedPredictionTokens=completion_tokens_details==null?void 0:completion_tokens_details.rejected_prediction_tokens;}if((prompt_tokens_details==null?void 0:prompt_tokens_details.cached_tokens)!=null){usage.promptTokensDetails.cachedTokens=prompt_tokens_details==null?void 0:prompt_tokens_details.cached_tokens;}}const choice=value.choices[0];if((choice==null?void 0:choice.finish_reason)!=null){finishReason=mapOpenAICompatibleFinishReason(choice.finish_reason);}if((choice==null?void 0:choice.delta)==null){return;}const delta=choice.delta;const reasoningContent=(_a2=delta.reasoning_content)!=null?_a2:delta.reasoning;if(reasoningContent){if(!isActiveReasoning){controller.enqueue({type:"reasoning-start",id:"reasoning-0"});isActiveReasoning=true;}controller.enqueue({type:"reasoning-delta",id:"reasoning-0",delta:reasoningContent});}if(delta.content){if(!isActiveText){controller.enqueue({type:"text-start",id:"txt-0"});isActiveText=true;}controller.enqueue({type:"text-delta",id:"txt-0",delta:delta.content});}if(delta.tool_calls!=null){for(const toolCallDelta of delta.tool_calls){const index=toolCallDelta.index;if(toolCalls[index]==null){if(toolCallDelta.id==null){throw new InvalidResponseDataError({data:toolCallDelta,message:"Expected 'id' to be a string."});}if(((_b=toolCallDelta.function)==null?void 0:_b.name)==null){throw new InvalidResponseDataError({data:toolCallDelta,message:"Expected 'function.name' to be a string."});}controller.enqueue({type:"tool-input-start",id:toolCallDelta.id,toolName:toolCallDelta.function.name});toolCalls[index]={id:toolCallDelta.id,type:"function",function:{name:toolCallDelta.function.name,arguments:(_c=toolCallDelta.function.arguments)!=null?_c:""},hasFinished:false};const toolCall2=toolCalls[index];if(((_d=toolCall2.function)==null?void 0:_d.name)!=null&&((_e=toolCall2.function)==null?void 0:_e.arguments)!=null){if(toolCall2.function.arguments.length>0){controller.enqueue({type:"tool-input-delta",id:toolCall2.id,delta:toolCall2.function.arguments});}if(isParsableJson(toolCall2.function.arguments)){controller.enqueue({type:"tool-input-end",id:toolCall2.id});controller.enqueue({type:"tool-call",toolCallId:(_f=toolCall2.id)!=null?_f:generateId(),toolName:toolCall2.function.name,input:toolCall2.function.arguments});toolCall2.hasFinished=true;}}continue;}const toolCall=toolCalls[index];if(toolCall.hasFinished){continue;}if(((_g=toolCallDelta.function)==null?void 0:_g.arguments)!=null){toolCall.function.arguments+=(_i=(_h=toolCallDelta.function)==null?void 0:_h.arguments)!=null?_i:"";}controller.enqueue({type:"tool-input-delta",id:toolCall.id,delta:(_j=toolCallDelta.function.arguments)!=null?_j:""});if(((_k=toolCall.function)==null?void 0:_k.name)!=null&&((_l=toolCall.function)==null?void 0:_l.arguments)!=null&&isParsableJson(toolCall.function.arguments)){controller.enqueue({type:"tool-input-end",id:toolCall.id});controller.enqueue({type:"tool-call",toolCallId:(_m=toolCall.id)!=null?_m:generateId(),toolName:toolCall.function.name,input:toolCall.function.arguments});toolCall.hasFinished=true;}}}},flush(controller){var _a2,_b,_c,_d,_e,_f;if(isActiveReasoning){controller.enqueue({type:"reasoning-end",id:"reasoning-0"});}if(isActiveText){controller.enqueue({type:"text-end",id:"txt-0"});}for(const toolCall of toolCalls.filter(toolCall2=>!toolCall2.hasFinished)){controller.enqueue({type:"tool-input-end",id:toolCall.id});controller.enqueue({type:"tool-call",toolCallId:(_a2=toolCall.id)!=null?_a2:generateId(),toolName:toolCall.function.name,input:toolCall.function.arguments});}const providerMetadata=_objectSpread2({[providerOptionsName]:{}},metadataExtractor==null?void 0:metadataExtractor.buildMetadata());if(usage.completionTokensDetails.acceptedPredictionTokens!=null){providerMetadata[providerOptionsName].acceptedPredictionTokens=usage.completionTokensDetails.acceptedPredictionTokens;}if(usage.completionTokensDetails.rejectedPredictionTokens!=null){providerMetadata[providerOptionsName].rejectedPredictionTokens=usage.completionTokensDetails.rejectedPredictionTokens;}controller.enqueue({type:"finish",finishReason,usage:{inputTokens:(_b=usage.promptTokens)!=null?_b:void 0,outputTokens:(_c=usage.completionTokens)!=null?_c:void 0,totalTokens:(_d=usage.totalTokens)!=null?_d:void 0,reasoningTokens:(_e=usage.completionTokensDetails.reasoningTokens)!=null?_e:void 0,cachedInputTokens:(_f=usage.promptTokensDetails.cachedTokens)!=null?_f:void 0},providerMetadata});}})),request:{body},response:{headers:responseHeaders}};})();}};var openaiCompatibleTokenUsageSchema=object$1({prompt_tokens:number$1().nullish(),completion_tokens:number$1().nullish(),total_tokens:number$1().nullish(),prompt_tokens_details:object$1({cached_tokens:number$1().nullish()}).nullish(),completion_tokens_details:object$1({reasoning_tokens:number$1().nullish(),accepted_prediction_tokens:number$1().nullish(),rejected_prediction_tokens:number$1().nullish()}).nullish()}).nullish();var OpenAICompatibleChatResponseSchema=object$1({id:string$1().nullish(),created:number$1().nullish(),model:string$1().nullish(),choices:array(object$1({message:object$1({role:literal("assistant").nullish(),content:string$1().nullish(),reasoning_content:string$1().nullish(),reasoning:string$1().nullish(),tool_calls:array(object$1({id:string$1().nullish(),function:object$1({name:string$1(),arguments:string$1()})})).nullish()}),finish_reason:string$1().nullish()})),usage:openaiCompatibleTokenUsageSchema});var createOpenAICompatibleChatChunkSchema=errorSchema=>union([object$1({id:string$1().nullish(),created:number$1().nullish(),model:string$1().nullish(),choices:array(object$1({delta:object$1({role:_enum(["assistant"]).nullish(),content:string$1().nullish(),// Most openai-compatible models set `reasoning_content`, but some
// providers serving `gpt-oss` set `reasoning`. See #7866
reasoning_content:string$1().nullish(),reasoning:string$1().nullish(),tool_calls:array(object$1({index:number$1(),id:string$1().nullish(),function:object$1({name:string$1().nullish(),arguments:string$1().nullish()})})).nullish()}).nullish(),finish_reason:string$1().nullish()})),usage:openaiCompatibleTokenUsageSchema}),errorSchema]);function convertToOpenAICompatibleCompletionPrompt(_ref103){let{prompt,user="user",assistant="assistant"}=_ref103;let text="";if(prompt[0].role==="system"){text+="".concat(prompt[0].content,"\n\n");prompt=prompt.slice(1);}for(const{role,content}of prompt){switch(role){case"system":{throw new InvalidPromptError({message:"Unexpected system message in prompt: ${content}",prompt});}case"user":{const userMessage=content.map(part=>{switch(part.type){case"text":{return part.text;}}}).filter(Boolean).join("");text+="".concat(user,":\n").concat(userMessage,"\n\n");break;}case"assistant":{const assistantMessage=content.map(part=>{switch(part.type){case"text":{return part.text;}case"tool-call":{throw new UnsupportedFunctionalityError({functionality:"tool-call messages"});}}}).join("");text+="".concat(assistant,":\n").concat(assistantMessage,"\n\n");break;}case"tool":{throw new UnsupportedFunctionalityError({functionality:"tool messages"});}default:{const _exhaustiveCheck=role;throw new Error("Unsupported role: ".concat(_exhaustiveCheck));}}}text+="".concat(assistant,":\n");return{prompt:text,stopSequences:["\n".concat(user,":")]};}// src/completion/get-response-metadata.ts
function getResponseMetadata2(_ref104){let{id,model,created}=_ref104;return{id:id!=null?id:void 0,modelId:model!=null?model:void 0,timestamp:created!=null?new Date(created*1e3):void 0};}// src/completion/map-openai-compatible-finish-reason.ts
function mapOpenAICompatibleFinishReason2(finishReason){switch(finishReason){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown";}}var openaiCompatibleCompletionProviderOptions=object$1({/**
   * Echo back the prompt in addition to the completion.
   */echo:boolean$1().optional(),/**
   * Modify the likelihood of specified tokens appearing in the completion.
   *
   * Accepts a JSON object that maps tokens (specified by their token ID in
   * the GPT tokenizer) to an associated bias value from -100 to 100.
   */logitBias:record(string$1(),number$1()).optional(),/**
   * The suffix that comes after a completion of inserted text.
   */suffix:string$1().optional(),/**
   * A unique identifier representing your end-user, which can help providers to
   * monitor and detect abuse.
   */user:string$1().optional()});// src/completion/openai-compatible-completion-language-model.ts
var OpenAICompatibleCompletionLanguageModel=class{// type inferred via constructor
constructor(modelId,config){this.specificationVersion="v2";var _a;this.modelId=modelId;this.config=config;const errorStructure=(_a=config.errorStructure)!=null?_a:defaultOpenAICompatibleErrorStructure;this.chunkSchema=createOpenAICompatibleCompletionChunkSchema(errorStructure.errorSchema);this.failedResponseHandler=createJsonErrorResponseHandler(errorStructure);}get provider(){return this.config.provider;}get providerOptionsName(){return this.config.provider.split(".")[0].trim();}get supportedUrls(){var _a,_b,_c;return(_c=(_b=(_a=this.config).supportedUrls)==null?void 0:_b.call(_a))!=null?_c:{};}getArgs(_x51){var _this31=this;return _asyncToGenerator2(function(_ref105){let{prompt,maxOutputTokens,temperature,topP,topK,frequencyPenalty,presencePenalty,stopSequences:userStopSequences,responseFormat,seed,providerOptions,tools,toolChoice}=_ref105;return function*(){var _a;const warnings=[];const completionOptions=(_a=yield parseProviderOptions({provider:_this31.providerOptionsName,providerOptions,schema:openaiCompatibleCompletionProviderOptions}))!=null?_a:{};if(topK!=null){warnings.push({type:"unsupported-setting",setting:"topK"});}if(tools==null?void 0:tools.length){warnings.push({type:"unsupported-setting",setting:"tools"});}if(toolChoice!=null){warnings.push({type:"unsupported-setting",setting:"toolChoice"});}if(responseFormat!=null&&responseFormat.type!=="text"){warnings.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});}const{prompt:completionPrompt,stopSequences}=convertToOpenAICompatibleCompletionPrompt({prompt});const stop=[...(stopSequences!=null?stopSequences:[]),...(userStopSequences!=null?userStopSequences:[])];return{args:_objectSpread2(_objectSpread2({// model id:
model:_this31.modelId,// model specific settings:
echo:completionOptions.echo,logit_bias:completionOptions.logitBias,suffix:completionOptions.suffix,user:completionOptions.user,// standardized settings:
max_tokens:maxOutputTokens,temperature,top_p:topP,frequency_penalty:frequencyPenalty,presence_penalty:presencePenalty,seed},providerOptions==null?void 0:providerOptions[_this31.providerOptionsName]),{},{// prompt:
prompt:completionPrompt,// stop sequences:
stop:stop.length>0?stop:void 0}),warnings};}();}).apply(this,arguments);}doGenerate(options){var _this32=this;return _asyncToGenerator2(function*(){var _a,_b,_c,_d,_e,_f;const{args,warnings}=yield _this32.getArgs(options);const{responseHeaders,value:response,rawValue:rawResponse}=yield postJsonToApi({url:_this32.config.url({path:"/completions",modelId:_this32.modelId}),headers:combineHeaders(_this32.config.headers(),options.headers),body:args,failedResponseHandler:_this32.failedResponseHandler,successfulResponseHandler:createJsonResponseHandler(openaiCompatibleCompletionResponseSchema),abortSignal:options.abortSignal,fetch:_this32.config.fetch});const choice=response.choices[0];const content=[];if(choice.text!=null&&choice.text.length>0){content.push({type:"text",text:choice.text});}return{content,usage:{inputTokens:(_b=(_a=response.usage)==null?void 0:_a.prompt_tokens)!=null?_b:void 0,outputTokens:(_d=(_c=response.usage)==null?void 0:_c.completion_tokens)!=null?_d:void 0,totalTokens:(_f=(_e=response.usage)==null?void 0:_e.total_tokens)!=null?_f:void 0},finishReason:mapOpenAICompatibleFinishReason2(choice.finish_reason),request:{body:args},response:_objectSpread2(_objectSpread2({},getResponseMetadata2(response)),{},{headers:responseHeaders,body:rawResponse}),warnings};})();}doStream(options){var _this33=this;return _asyncToGenerator2(function*(){const{args,warnings}=yield _this33.getArgs(options);const body=_objectSpread2(_objectSpread2({},args),{},{stream:true,// only include stream_options when in strict compatibility mode:
stream_options:_this33.config.includeUsage?{include_usage:true}:void 0});const{responseHeaders,value:response}=yield postJsonToApi({url:_this33.config.url({path:"/completions",modelId:_this33.modelId}),headers:combineHeaders(_this33.config.headers(),options.headers),body,failedResponseHandler:_this33.failedResponseHandler,successfulResponseHandler:createEventSourceResponseHandler(_this33.chunkSchema),abortSignal:options.abortSignal,fetch:_this33.config.fetch});let finishReason="unknown";const usage={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let isFirstChunk=true;return{stream:response.pipeThrough(new TransformStream({start(controller){controller.enqueue({type:"stream-start",warnings});},transform(chunk,controller){var _a,_b,_c;if(options.includeRawChunks){controller.enqueue({type:"raw",rawValue:chunk.rawValue});}if(!chunk.success){finishReason="error";controller.enqueue({type:"error",error:chunk.error});return;}const value=chunk.value;if("error"in value){finishReason="error";controller.enqueue({type:"error",error:value.error});return;}if(isFirstChunk){isFirstChunk=false;controller.enqueue(_objectSpread2({type:"response-metadata"},getResponseMetadata2(value)));controller.enqueue({type:"text-start",id:"0"});}if(value.usage!=null){usage.inputTokens=(_a=value.usage.prompt_tokens)!=null?_a:void 0;usage.outputTokens=(_b=value.usage.completion_tokens)!=null?_b:void 0;usage.totalTokens=(_c=value.usage.total_tokens)!=null?_c:void 0;}const choice=value.choices[0];if((choice==null?void 0:choice.finish_reason)!=null){finishReason=mapOpenAICompatibleFinishReason2(choice.finish_reason);}if((choice==null?void 0:choice.text)!=null){controller.enqueue({type:"text-delta",id:"0",delta:choice.text});}},flush(controller){if(!isFirstChunk){controller.enqueue({type:"text-end",id:"0"});}controller.enqueue({type:"finish",finishReason,usage});}})),request:{body},response:{headers:responseHeaders}};})();}};var usageSchema=object$1({prompt_tokens:number$1(),completion_tokens:number$1(),total_tokens:number$1()});var openaiCompatibleCompletionResponseSchema=object$1({id:string$1().nullish(),created:number$1().nullish(),model:string$1().nullish(),choices:array(object$1({text:string$1(),finish_reason:string$1()})),usage:usageSchema.nullish()});var createOpenAICompatibleCompletionChunkSchema=errorSchema=>union([object$1({id:string$1().nullish(),created:number$1().nullish(),model:string$1().nullish(),choices:array(object$1({text:string$1(),finish_reason:string$1().nullish(),index:number$1()})),usage:usageSchema.nullish()}),errorSchema]);var openaiCompatibleEmbeddingProviderOptions=object$1({/**
   * The number of dimensions the resulting output embeddings should have.
   * Only supported in text-embedding-3 and later models.
   */dimensions:number$1().optional(),/**
   * A unique identifier representing your end-user, which can help providers to
   * monitor and detect abuse.
   */user:string$1().optional()});// src/embedding/openai-compatible-embedding-model.ts
var OpenAICompatibleEmbeddingModel=class{constructor(modelId,config){this.specificationVersion="v2";this.modelId=modelId;this.config=config;}get provider(){return this.config.provider;}get maxEmbeddingsPerCall(){var _a;return(_a=this.config.maxEmbeddingsPerCall)!=null?_a:2048;}get supportsParallelCalls(){var _a;return(_a=this.config.supportsParallelCalls)!=null?_a:true;}get providerOptionsName(){return this.config.provider.split(".")[0].trim();}doEmbed(_x52){var _this34=this;return _asyncToGenerator2(function(_ref106){let{values,headers,abortSignal,providerOptions}=_ref106;return function*(){var _a,_b,_c;const compatibleOptions=Object.assign((_a=yield parseProviderOptions({provider:"openai-compatible",providerOptions,schema:openaiCompatibleEmbeddingProviderOptions}))!=null?_a:{},(_b=yield parseProviderOptions({provider:_this34.providerOptionsName,providerOptions,schema:openaiCompatibleEmbeddingProviderOptions}))!=null?_b:{});if(values.length>_this34.maxEmbeddingsPerCall){throw new TooManyEmbeddingValuesForCallError({provider:_this34.provider,modelId:_this34.modelId,maxEmbeddingsPerCall:_this34.maxEmbeddingsPerCall,values});}const{responseHeaders,value:response,rawValue}=yield postJsonToApi({url:_this34.config.url({path:"/embeddings",modelId:_this34.modelId}),headers:combineHeaders(_this34.config.headers(),headers),body:{model:_this34.modelId,input:values,encoding_format:"float",dimensions:compatibleOptions.dimensions,user:compatibleOptions.user},failedResponseHandler:createJsonErrorResponseHandler((_c=_this34.config.errorStructure)!=null?_c:defaultOpenAICompatibleErrorStructure),successfulResponseHandler:createJsonResponseHandler(openaiTextEmbeddingResponseSchema),abortSignal,fetch:_this34.config.fetch});return{embeddings:response.data.map(item=>item.embedding),usage:response.usage?{tokens:response.usage.prompt_tokens}:void 0,providerMetadata:response.providerMetadata,response:{headers:responseHeaders,body:rawValue}};}();}).apply(this,arguments);}};var openaiTextEmbeddingResponseSchema=object$1({data:array(object$1({embedding:array(number$1())})),usage:object$1({prompt_tokens:number$1()}).nullish(),providerMetadata:record(string$1(),record(string$1(),any())).optional()});var OpenAICompatibleImageModel=class{constructor(modelId,config){this.modelId=modelId;this.config=config;this.specificationVersion="v2";this.maxImagesPerCall=10;}get provider(){return this.config.provider;}doGenerate(_x53){var _this35=this;return _asyncToGenerator2(function(_ref107){let{prompt,n,size,aspectRatio,seed,providerOptions,headers,abortSignal}=_ref107;return function*(){var _a,_b,_c,_d,_e;const warnings=[];if(aspectRatio!=null){warnings.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."});}if(seed!=null){warnings.push({type:"unsupported-setting",setting:"seed"});}const currentDate=(_c=(_b=(_a=_this35.config._internal)==null?void 0:_a.currentDate)==null?void 0:_b.call(_a))!=null?_c:/* @__PURE__ */new Date();const{value:response,responseHeaders}=yield postJsonToApi({url:_this35.config.url({path:"/images/generations",modelId:_this35.modelId}),headers:combineHeaders(_this35.config.headers(),headers),body:_objectSpread2(_objectSpread2({model:_this35.modelId,prompt,n,size},(_d=providerOptions.openai)!=null?_d:{}),{},{response_format:"b64_json"}),failedResponseHandler:createJsonErrorResponseHandler((_e=_this35.config.errorStructure)!=null?_e:defaultOpenAICompatibleErrorStructure),successfulResponseHandler:createJsonResponseHandler(openaiCompatibleImageResponseSchema),abortSignal,fetch:_this35.config.fetch});return{images:response.data.map(item=>item.b64_json),warnings,response:{timestamp:currentDate,modelId:_this35.modelId,headers:responseHeaders}};}();}).apply(this,arguments);}};var openaiCompatibleImageResponseSchema=object$1({data:array(object$1({b64_json:string$1()}))});// src/version.ts
var VERSION$2="1.0.18";// src/openai-compatible-provider.ts
function createOpenAICompatible(options){const baseURL=withoutTrailingSlash(options.baseURL);const providerName=options.name;const headers=_objectSpread2(_objectSpread2({},options.apiKey&&{Authorization:"Bearer ".concat(options.apiKey)}),options.headers);const getHeaders=()=>withUserAgentSuffix(headers,"ai-sdk/openai-compatible/".concat(VERSION$2));const getCommonModelConfig=modelType=>({provider:"".concat(providerName,".").concat(modelType),url:_ref108=>{let{path}=_ref108;const url=new URL("".concat(baseURL).concat(path));if(options.queryParams){url.search=new URLSearchParams(options.queryParams).toString();}return url.toString();},headers:getHeaders,fetch:options.fetch});const createLanguageModel=modelId=>createChatModel(modelId);const createChatModel=modelId=>new OpenAICompatibleChatLanguageModel(modelId,_objectSpread2(_objectSpread2({},getCommonModelConfig("chat")),{},{includeUsage:options.includeUsage,supportsStructuredOutputs:options.supportsStructuredOutputs}));const createCompletionModel=modelId=>new OpenAICompatibleCompletionLanguageModel(modelId,_objectSpread2(_objectSpread2({},getCommonModelConfig("completion")),{},{includeUsage:options.includeUsage}));const createEmbeddingModel=modelId=>new OpenAICompatibleEmbeddingModel(modelId,_objectSpread2({},getCommonModelConfig("embedding")));const createImageModel=modelId=>new OpenAICompatibleImageModel(modelId,getCommonModelConfig("image"));const provider=modelId=>createLanguageModel(modelId);provider.languageModel=createLanguageModel;provider.chatModel=createChatModel;provider.completionModel=createCompletionModel;provider.textEmbeddingModel=createEmbeddingModel;provider.imageModel=createImageModel;return provider;}// src/anthropic-provider.ts
var anthropicErrorDataSchema=object$1({type:literal("error"),error:object$1({type:string$1(),message:string$1()})});var anthropicFailedResponseHandler=createJsonErrorResponseHandler({errorSchema:anthropicErrorDataSchema,errorToMessage:data=>data.error.message});var anthropicFilePartProviderOptions=object$1({/**
   * Citation configuration for this document.
   * When enabled, this document will generate citations in the response.
   */citations:object$1({/**
     * Enable citations for this document
     */enabled:boolean$1()}).optional(),/**
   * Custom title for the document.
   * If not provided, the filename will be used.
   */title:string$1().optional(),/**
   * Context about the document that will be passed to the model
   * but not used towards cited content.
   * Useful for storing document metadata as text or stringified JSON.
   */context:string$1().optional()});var anthropicProviderOptions=object$1({sendReasoning:boolean$1().optional(),thinking:object$1({type:union([literal("enabled"),literal("disabled")]),budgetTokens:number$1().optional()}).optional(),/**
   * Whether to disable parallel function calling during tool use. Default is false.
   * When set to true, Claude will use at most one tool per response.
   */disableParallelToolUse:boolean$1().optional(),/**
   * Cache control settings for this message.
   * See https://docs.anthropic.com/en/docs/build-with-claude/prompt-caching
   */cacheControl:object$1({type:literal("ephemeral"),ttl:union([literal("5m"),literal("1h")]).optional()}).optional()});// src/get-cache-control.ts
function getCacheControl(providerMetadata){var _a;const anthropic2=providerMetadata==null?void 0:providerMetadata.anthropic;const cacheControlValue=(_a=anthropic2==null?void 0:anthropic2.cacheControl)!=null?_a:anthropic2==null?void 0:anthropic2.cache_control;return cacheControlValue;}var webSearch_20250305ArgsSchema=object$1({/**
   * Maximum number of web searches Claude can perform during the conversation.
   */maxUses:number$1().optional(),/**
   * Optional list of domains that Claude is allowed to search.
   */allowedDomains:array(string$1()).optional(),/**
   * Optional list of domains that Claude should avoid when searching.
   */blockedDomains:array(string$1()).optional(),/**
   * Optional user location information to provide geographically relevant search results.
   */userLocation:object$1({type:literal("approximate"),city:string$1().optional(),region:string$1().optional(),country:string$1().optional(),timezone:string$1().optional()}).optional()});var webSearch_20250305OutputSchema=array(object$1({url:string$1(),title:string$1(),pageAge:string$1().nullable(),encryptedContent:string$1(),type:string$1()}));var factory=createProviderDefinedToolFactoryWithOutputSchema({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:object$1({query:string$1()}),outputSchema:webSearch_20250305OutputSchema});var webSearch_20250305=function(){let args=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return factory(args);};// src/anthropic-prepare-tools.ts
function isWebSearchTool(tool){return typeof tool==="object"&&tool!==null&&"type"in tool&&tool.type==="web_search_20250305";}function prepareTools(_ref109){let{tools,toolChoice,disableParallelToolUse}=_ref109;tools=(tools==null?void 0:tools.length)?tools:void 0;const toolWarnings=[];const betas=/* @__PURE__ */new Set();if(tools==null){return{tools:void 0,toolChoice:void 0,toolWarnings,betas};}const anthropicTools2=[];for(const tool of tools){if(isWebSearchTool(tool)){anthropicTools2.push(tool);continue;}switch(tool.type){case"function":const cacheControl=getCacheControl(tool.providerOptions);anthropicTools2.push({name:tool.name,description:tool.description,input_schema:tool.inputSchema,cache_control:cacheControl});break;case"provider-defined":switch(tool.id){case"anthropic.computer_20250124":betas.add("computer-use-2025-01-24");anthropicTools2.push({name:"computer",type:"computer_20250124",display_width_px:tool.args.displayWidthPx,display_height_px:tool.args.displayHeightPx,display_number:tool.args.displayNumber});break;case"anthropic.computer_20241022":betas.add("computer-use-2024-10-22");anthropicTools2.push({name:"computer",type:"computer_20241022",display_width_px:tool.args.displayWidthPx,display_height_px:tool.args.displayHeightPx,display_number:tool.args.displayNumber});break;case"anthropic.text_editor_20250124":betas.add("computer-use-2025-01-24");anthropicTools2.push({name:"str_replace_editor",type:"text_editor_20250124"});break;case"anthropic.text_editor_20241022":betas.add("computer-use-2024-10-22");anthropicTools2.push({name:"str_replace_editor",type:"text_editor_20241022"});break;case"anthropic.text_editor_20250429":betas.add("computer-use-2025-01-24");anthropicTools2.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429"});break;case"anthropic.bash_20250124":betas.add("computer-use-2025-01-24");anthropicTools2.push({name:"bash",type:"bash_20250124"});break;case"anthropic.bash_20241022":betas.add("computer-use-2024-10-22");anthropicTools2.push({name:"bash",type:"bash_20241022"});break;case"anthropic.web_search_20250305":{const args=webSearch_20250305ArgsSchema.parse(tool.args);anthropicTools2.push({type:"web_search_20250305",name:"web_search",max_uses:args.maxUses,allowed_domains:args.allowedDomains,blocked_domains:args.blockedDomains,user_location:args.userLocation});break;}case"anthropic.code_execution_20250522":{betas.add("code-execution-2025-05-22");anthropicTools2.push({type:"code_execution_20250522",name:"code_execution"});break;}default:toolWarnings.push({type:"unsupported-tool",tool});break;}break;default:toolWarnings.push({type:"unsupported-tool",tool});break;}}if(toolChoice==null){return{tools:anthropicTools2,toolChoice:disableParallelToolUse?{type:"auto",disable_parallel_tool_use:disableParallelToolUse}:void 0,toolWarnings,betas};}const type=toolChoice.type;switch(type){case"auto":return{tools:anthropicTools2,toolChoice:{type:"auto",disable_parallel_tool_use:disableParallelToolUse},toolWarnings,betas};case"required":return{tools:anthropicTools2,toolChoice:{type:"any",disable_parallel_tool_use:disableParallelToolUse},toolWarnings,betas};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings,betas};case"tool":return{tools:anthropicTools2,toolChoice:{type:"tool",name:toolChoice.toolName,disable_parallel_tool_use:disableParallelToolUse},toolWarnings,betas};default:{const _exhaustiveCheck=type;throw new UnsupportedFunctionalityError({functionality:"tool choice type: ".concat(_exhaustiveCheck)});}}}var codeExecution_20250522OutputSchema=object$1({type:literal("code_execution_result"),stdout:string$1(),stderr:string$1(),return_code:number$1()});var factory2=createProviderDefinedToolFactoryWithOutputSchema({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:object$1({code:string$1()}),outputSchema:codeExecution_20250522OutputSchema});var codeExecution_20250522=function(){let args=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return factory2(args);};// src/convert-to-anthropic-messages-prompt.ts
function convertToString(data){if(typeof data==="string"){return Buffer.from(data,"base64").toString("utf-8");}if(data instanceof Uint8Array){return new TextDecoder().decode(data);}if(data instanceof URL){throw new UnsupportedFunctionalityError({functionality:"URL-based text documents are not supported for citations"});}throw new UnsupportedFunctionalityError({functionality:"unsupported data type for text documents: ".concat(typeof data)});}function convertToAnthropicMessagesPrompt(_x54){return _convertToAnthropicMessagesPrompt.apply(this,arguments);}function _convertToAnthropicMessagesPrompt(){_convertToAnthropicMessagesPrompt=_asyncToGenerator2(function(_ref198){let{prompt,sendReasoning,warnings}=_ref198;return function*(){var _a,_b,_c,_d,_e;const betas=/* @__PURE__ */new Set();const blocks=groupIntoBlocks(prompt);let system=void 0;const messages=[];function shouldEnableCitations(_x94){return _shouldEnableCitations.apply(this,arguments);}function _shouldEnableCitations(){_shouldEnableCitations=_asyncToGenerator2(function*(providerMetadata){var _a2,_b2;const anthropicOptions=yield parseProviderOptions({provider:"anthropic",providerOptions:providerMetadata,schema:anthropicFilePartProviderOptions});return(_b2=(_a2=anthropicOptions==null?void 0:anthropicOptions.citations)==null?void 0:_a2.enabled)!=null?_b2:false;});return _shouldEnableCitations.apply(this,arguments);}function getDocumentMetadata(_x95){return _getDocumentMetadata.apply(this,arguments);}function _getDocumentMetadata(){_getDocumentMetadata=_asyncToGenerator2(function*(providerMetadata){const anthropicOptions=yield parseProviderOptions({provider:"anthropic",providerOptions:providerMetadata,schema:anthropicFilePartProviderOptions});return{title:anthropicOptions==null?void 0:anthropicOptions.title,context:anthropicOptions==null?void 0:anthropicOptions.context};});return _getDocumentMetadata.apply(this,arguments);}for(let i=0;i<blocks.length;i++){const block=blocks[i];const isLastBlock=i===blocks.length-1;const type=block.type;switch(type){case"system":{if(system!=null){throw new UnsupportedFunctionalityError({functionality:"Multiple system messages that are separated by user/assistant messages"});}system=block.messages.map(_ref199=>{let{content,providerOptions}=_ref199;return{type:"text",text:content,cache_control:getCacheControl(providerOptions)};});break;}case"user":{const anthropicContent=[];for(const message of block.messages){const{role,content}=message;switch(role){case"user":{for(let j=0;j<content.length;j++){const part=content[j];const isLastPart=j===content.length-1;const cacheControl=(_a=getCacheControl(part.providerOptions))!=null?_a:isLastPart?getCacheControl(message.providerOptions):void 0;switch(part.type){case"text":{anthropicContent.push({type:"text",text:part.text,cache_control:cacheControl});break;}case"file":{if(part.mediaType.startsWith("image/")){anthropicContent.push({type:"image",source:part.data instanceof URL?{type:"url",url:part.data.toString()}:{type:"base64",media_type:part.mediaType==="image/*"?"image/jpeg":part.mediaType,data:convertToBase64(part.data)},cache_control:cacheControl});}else if(part.mediaType==="application/pdf"){betas.add("pdfs-2024-09-25");const enableCitations=yield shouldEnableCitations(part.providerOptions);const metadata=yield getDocumentMetadata(part.providerOptions);anthropicContent.push(_objectSpread2(_objectSpread2(_objectSpread2({type:"document",source:part.data instanceof URL?{type:"url",url:part.data.toString()}:{type:"base64",media_type:"application/pdf",data:convertToBase64(part.data)},title:(_b=metadata.title)!=null?_b:part.filename},metadata.context&&{context:metadata.context}),enableCitations&&{citations:{enabled:true}}),{},{cache_control:cacheControl}));}else if(part.mediaType==="text/plain"){const enableCitations=yield shouldEnableCitations(part.providerOptions);const metadata=yield getDocumentMetadata(part.providerOptions);anthropicContent.push(_objectSpread2(_objectSpread2(_objectSpread2({type:"document",source:part.data instanceof URL?{type:"url",url:part.data.toString()}:{type:"text",media_type:"text/plain",data:convertToString(part.data)},title:(_c=metadata.title)!=null?_c:part.filename},metadata.context&&{context:metadata.context}),enableCitations&&{citations:{enabled:true}}),{},{cache_control:cacheControl}));}else{throw new UnsupportedFunctionalityError({functionality:"media type: ".concat(part.mediaType)});}break;}}}break;}case"tool":{for(let i2=0;i2<content.length;i2++){const part=content[i2];const isLastPart=i2===content.length-1;const cacheControl=(_d=getCacheControl(part.providerOptions))!=null?_d:isLastPart?getCacheControl(message.providerOptions):void 0;const output=part.output;let contentValue;switch(output.type){case"content":contentValue=output.value.map(contentPart=>{switch(contentPart.type){case"text":return{type:"text",text:contentPart.text,cache_control:void 0};case"media":{if(contentPart.mediaType.startsWith("image/")){return{type:"image",source:{type:"base64",media_type:contentPart.mediaType,data:contentPart.data},cache_control:void 0};}throw new UnsupportedFunctionalityError({functionality:"media type: ".concat(contentPart.mediaType)});}}});break;case"text":case"error-text":contentValue=output.value;break;case"json":case"error-json":default:contentValue=JSON.stringify(output.value);break;}anthropicContent.push({type:"tool_result",tool_use_id:part.toolCallId,content:contentValue,is_error:output.type==="error-text"||output.type==="error-json"?true:void 0,cache_control:cacheControl});}break;}default:{const _exhaustiveCheck=role;throw new Error("Unsupported role: ".concat(_exhaustiveCheck));}}}messages.push({role:"user",content:anthropicContent});break;}case"assistant":{const anthropicContent=[];for(let j=0;j<block.messages.length;j++){const message=block.messages[j];const isLastMessage=j===block.messages.length-1;const{content}=message;for(let k=0;k<content.length;k++){const part=content[k];const isLastContentPart=k===content.length-1;const cacheControl=(_e=getCacheControl(part.providerOptions))!=null?_e:isLastContentPart?getCacheControl(message.providerOptions):void 0;switch(part.type){case"text":{anthropicContent.push({type:"text",text:// trim the last text part if it's the last message in the block
// because Anthropic does not allow trailing whitespace
// in pre-filled assistant responses
isLastBlock&&isLastMessage&&isLastContentPart?part.text.trim():part.text,cache_control:cacheControl});break;}case"reasoning":{if(sendReasoning){const reasoningMetadata=yield parseProviderOptions({provider:"anthropic",providerOptions:part.providerOptions,schema:anthropicReasoningMetadataSchema});if(reasoningMetadata!=null){if(reasoningMetadata.signature!=null){anthropicContent.push({type:"thinking",thinking:part.text,signature:reasoningMetadata.signature,cache_control:cacheControl});}else if(reasoningMetadata.redactedData!=null){anthropicContent.push({type:"redacted_thinking",data:reasoningMetadata.redactedData,cache_control:cacheControl});}else{warnings.push({type:"other",message:"unsupported reasoning metadata"});}}else{warnings.push({type:"other",message:"unsupported reasoning metadata"});}}else{warnings.push({type:"other",message:"sending reasoning content is disabled for this model"});}break;}case"tool-call":{if(part.providerExecuted){if(part.toolName==="web_search"){anthropicContent.push({type:"server_tool_use",id:part.toolCallId,name:"web_search",input:part.input,cache_control:cacheControl});break;}if(part.toolName==="code_execution"){anthropicContent.push({type:"server_tool_use",id:part.toolCallId,name:"code_execution",input:part.input,cache_control:cacheControl});break;}warnings.push({type:"other",message:"provider executed tool call for tool ".concat(part.toolName," is not supported")});break;}anthropicContent.push({type:"tool_use",id:part.toolCallId,name:part.toolName,input:part.input,cache_control:cacheControl});break;}case"tool-result":{if(part.toolName==="web_search"){const output=part.output;if(output.type!=="json"){warnings.push({type:"other",message:"provider executed tool result output type ".concat(output.type," for tool ").concat(part.toolName," is not supported")});break;}const webSearchOutput=webSearch_20250305OutputSchema.parse(output.value);anthropicContent.push({type:"web_search_tool_result",tool_use_id:part.toolCallId,content:webSearchOutput.map(result=>({url:result.url,title:result.title,page_age:result.pageAge,encrypted_content:result.encryptedContent,type:result.type})),cache_control:cacheControl});break;}if(part.toolName==="code_execution"){const output=part.output;if(output.type!=="json"){warnings.push({type:"other",message:"provider executed tool result output type ".concat(output.type," for tool ").concat(part.toolName," is not supported")});break;}const codeExecutionOutput=codeExecution_20250522OutputSchema.parse(output.value);anthropicContent.push({type:"code_execution_tool_result",tool_use_id:part.toolCallId,content:{type:codeExecutionOutput.type,stdout:codeExecutionOutput.stdout,stderr:codeExecutionOutput.stderr,return_code:codeExecutionOutput.return_code},cache_control:cacheControl});break;}warnings.push({type:"other",message:"provider executed tool result for tool ".concat(part.toolName," is not supported")});break;}}}}messages.push({role:"assistant",content:anthropicContent});break;}default:{const _exhaustiveCheck=type;throw new Error("content type: ".concat(_exhaustiveCheck));}}}return{prompt:{system,messages},betas};}();});return _convertToAnthropicMessagesPrompt.apply(this,arguments);}function groupIntoBlocks(prompt){const blocks=[];let currentBlock=void 0;for(const message of prompt){const{role}=message;switch(role){case"system":{if((currentBlock==null?void 0:currentBlock.type)!=="system"){currentBlock={type:"system",messages:[]};blocks.push(currentBlock);}currentBlock.messages.push(message);break;}case"assistant":{if((currentBlock==null?void 0:currentBlock.type)!=="assistant"){currentBlock={type:"assistant",messages:[]};blocks.push(currentBlock);}currentBlock.messages.push(message);break;}case"user":{if((currentBlock==null?void 0:currentBlock.type)!=="user"){currentBlock={type:"user",messages:[]};blocks.push(currentBlock);}currentBlock.messages.push(message);break;}case"tool":{if((currentBlock==null?void 0:currentBlock.type)!=="user"){currentBlock={type:"user",messages:[]};blocks.push(currentBlock);}currentBlock.messages.push(message);break;}default:{const _exhaustiveCheck=role;throw new Error("Unsupported role: ".concat(_exhaustiveCheck));}}}return blocks;}// src/map-anthropic-stop-reason.ts
function mapAnthropicStopReason(_ref110){let{finishReason,isJsonResponseFromTool}=_ref110;switch(finishReason){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return isJsonResponseFromTool?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown";}}// src/anthropic-messages-language-model.ts
var citationSchemas={webSearchResult:object$1({type:literal("web_search_result_location"),cited_text:string$1(),url:string$1(),title:string$1(),encrypted_index:string$1()}),pageLocation:object$1({type:literal("page_location"),cited_text:string$1(),document_index:number$1(),document_title:string$1().nullable(),start_page_number:number$1(),end_page_number:number$1()}),charLocation:object$1({type:literal("char_location"),cited_text:string$1(),document_index:number$1(),document_title:string$1().nullable(),start_char_index:number$1(),end_char_index:number$1()})};var citationSchema=discriminatedUnion("type",[citationSchemas.webSearchResult,citationSchemas.pageLocation,citationSchemas.charLocation]);discriminatedUnion("type",[citationSchemas.pageLocation,citationSchemas.charLocation]);function processCitation(citation,citationDocuments,generateId3,onSource){if(citation.type==="page_location"||citation.type==="char_location"){const source=createCitationSource(citation,citationDocuments,generateId3);if(source){onSource(source);}}}function createCitationSource(citation,citationDocuments,generateId3){var _a;const documentInfo=citationDocuments[citation.document_index];if(!documentInfo){return null;}const providerMetadata=citation.type==="page_location"?{citedText:citation.cited_text,startPageNumber:citation.start_page_number,endPageNumber:citation.end_page_number}:{citedText:citation.cited_text,startCharIndex:citation.start_char_index,endCharIndex:citation.end_char_index};return{type:"source",sourceType:"document",id:generateId3(),mediaType:documentInfo.mediaType,title:(_a=citation.document_title)!=null?_a:documentInfo.title,filename:documentInfo.filename,providerMetadata:{anthropic:providerMetadata}};}var AnthropicMessagesLanguageModel=class{constructor(modelId,config){this.specificationVersion="v2";var _a;this.modelId=modelId;this.config=config;this.generateId=(_a=config.generateId)!=null?_a:generateId;}supportsUrl(url){return url.protocol==="https:";}get provider(){return this.config.provider;}get supportedUrls(){var _a,_b,_c;return(_c=(_b=(_a=this.config).supportedUrls)==null?void 0:_b.call(_a))!=null?_c:{};}getArgs(_x55){var _this36=this;return _asyncToGenerator2(function(_ref111){let{prompt,maxOutputTokens=4096,// 4096: max model output tokens TODO update default in v5
temperature,topP,topK,frequencyPenalty,presencePenalty,stopSequences,responseFormat,seed,tools,toolChoice,providerOptions}=_ref111;return function*(){var _a,_b,_c;const warnings=[];if(frequencyPenalty!=null){warnings.push({type:"unsupported-setting",setting:"frequencyPenalty"});}if(presencePenalty!=null){warnings.push({type:"unsupported-setting",setting:"presencePenalty"});}if(seed!=null){warnings.push({type:"unsupported-setting",setting:"seed"});}if((responseFormat==null?void 0:responseFormat.type)==="json"){if(responseFormat.schema==null){warnings.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."});}else if(tools!=null){warnings.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."});}}const jsonResponseTool=(responseFormat==null?void 0:responseFormat.type)==="json"&&responseFormat.schema!=null?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:responseFormat.schema}:void 0;const anthropicOptions=yield parseProviderOptions({provider:"anthropic",providerOptions,schema:anthropicProviderOptions});const{prompt:messagesPrompt,betas:messagesBetas}=yield convertToAnthropicMessagesPrompt({prompt,sendReasoning:(_a=anthropicOptions==null?void 0:anthropicOptions.sendReasoning)!=null?_a:true,warnings});const isThinking=((_b=anthropicOptions==null?void 0:anthropicOptions.thinking)==null?void 0:_b.type)==="enabled";const thinkingBudget=(_c=anthropicOptions==null?void 0:anthropicOptions.thinking)==null?void 0:_c.budgetTokens;const baseArgs=_objectSpread2(_objectSpread2({// model id:
model:_this36.modelId,// standardized settings:
max_tokens:maxOutputTokens,temperature,top_k:topK,top_p:topP,stop_sequences:stopSequences},isThinking&&{thinking:{type:"enabled",budget_tokens:thinkingBudget}}),{},{// prompt:
system:messagesPrompt.system,messages:messagesPrompt.messages});if(isThinking){if(thinkingBudget==null){throw new UnsupportedFunctionalityError({functionality:"thinking requires a budget"});}if(baseArgs.temperature!=null){baseArgs.temperature=void 0;warnings.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"});}if(topK!=null){baseArgs.top_k=void 0;warnings.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"});}if(topP!=null){baseArgs.top_p=void 0;warnings.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"});}baseArgs.max_tokens=maxOutputTokens+thinkingBudget;}const{tools:anthropicTools2,toolChoice:anthropicToolChoice,toolWarnings,betas:toolsBetas}=prepareTools(jsonResponseTool!=null?{tools:[jsonResponseTool],toolChoice:{type:"tool",toolName:jsonResponseTool.name},disableParallelToolUse:true}:{tools:tools!=null?tools:[],toolChoice,disableParallelToolUse:anthropicOptions==null?void 0:anthropicOptions.disableParallelToolUse});return{args:_objectSpread2(_objectSpread2({},baseArgs),{},{tools:anthropicTools2,tool_choice:anthropicToolChoice}),warnings:[...warnings,...toolWarnings],betas:/* @__PURE__ */new Set([...messagesBetas,...toolsBetas]),usesJsonResponseTool:jsonResponseTool!=null};}();}).apply(this,arguments);}getHeaders(_x56){var _this37=this;return _asyncToGenerator2(function(_ref112){let{betas,headers}=_ref112;return function*(){return combineHeaders(yield resolve(_this37.config.headers),betas.size>0?{"anthropic-beta":Array.from(betas).join(",")}:{},headers);}();}).apply(this,arguments);}buildRequestUrl(isStreaming){var _a,_b,_c;return(_c=(_b=(_a=this.config).buildRequestUrl)==null?void 0:_b.call(_a,this.config.baseURL,isStreaming))!=null?_c:"".concat(this.config.baseURL,"/messages");}transformRequestBody(args){var _a,_b,_c;return(_c=(_b=(_a=this.config).transformRequestBody)==null?void 0:_b.call(_a,args))!=null?_c:args;}extractCitationDocuments(prompt){const isCitationPart=part=>{var _a,_b;if(part.type!=="file"){return false;}if(part.mediaType!=="application/pdf"&&part.mediaType!=="text/plain"){return false;}const anthropic2=(_a=part.providerOptions)==null?void 0:_a.anthropic;const citationsConfig=anthropic2==null?void 0:anthropic2.citations;return(_b=citationsConfig==null?void 0:citationsConfig.enabled)!=null?_b:false;};return prompt.filter(message=>message.role==="user").flatMap(message=>message.content).filter(isCitationPart).map(part=>{var _a;const filePart=part;return{title:(_a=filePart.filename)!=null?_a:"Untitled Document",filename:filePart.filename,mediaType:filePart.mediaType};});}doGenerate(options){var _this38=this;return _asyncToGenerator2(function*(){var _a,_b,_c,_d,_e;const{args,warnings,betas,usesJsonResponseTool}=yield _this38.getArgs(options);const citationDocuments=_this38.extractCitationDocuments(options.prompt);const{responseHeaders,value:response,rawValue:rawResponse}=yield postJsonToApi({url:_this38.buildRequestUrl(false),headers:yield _this38.getHeaders({betas,headers:options.headers}),body:_this38.transformRequestBody(args),failedResponseHandler:anthropicFailedResponseHandler,successfulResponseHandler:createJsonResponseHandler(anthropicMessagesResponseSchema),abortSignal:options.abortSignal,fetch:_this38.config.fetch});const content=[];for(const part of response.content){switch(part.type){case"text":{if(!usesJsonResponseTool){content.push({type:"text",text:part.text});if(part.citations){for(const citation of part.citations){processCitation(citation,citationDocuments,_this38.generateId,source=>content.push(source));}}}break;}case"thinking":{content.push({type:"reasoning",text:part.thinking,providerMetadata:{anthropic:{signature:part.signature}}});break;}case"redacted_thinking":{content.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:part.data}}});break;}case"tool_use":{content.push(// when a json response tool is used, the tool call becomes the text:
usesJsonResponseTool?{type:"text",text:JSON.stringify(part.input)}:{type:"tool-call",toolCallId:part.id,toolName:part.name,input:JSON.stringify(part.input)});break;}case"server_tool_use":{if(part.name==="web_search"||part.name==="code_execution"){content.push({type:"tool-call",toolCallId:part.id,toolName:part.name,input:JSON.stringify(part.input),providerExecuted:true});}break;}case"web_search_tool_result":{if(Array.isArray(part.content)){content.push({type:"tool-result",toolCallId:part.tool_use_id,toolName:"web_search",result:part.content.map(result=>{var _a2;return{url:result.url,title:result.title,pageAge:(_a2=result.page_age)!=null?_a2:null,encryptedContent:result.encrypted_content,type:result.type};}),providerExecuted:true});for(const result of part.content){content.push({type:"source",sourceType:"url",id:_this38.generateId(),url:result.url,title:result.title,providerMetadata:{anthropic:{pageAge:(_a=result.page_age)!=null?_a:null}}});}}else{content.push({type:"tool-result",toolCallId:part.tool_use_id,toolName:"web_search",isError:true,result:{type:"web_search_tool_result_error",errorCode:part.content.error_code},providerExecuted:true});}break;}case"code_execution_tool_result":{if(part.content.type==="code_execution_result"){content.push({type:"tool-result",toolCallId:part.tool_use_id,toolName:"code_execution",result:{type:part.content.type,stdout:part.content.stdout,stderr:part.content.stderr,return_code:part.content.return_code},providerExecuted:true});}else if(part.content.type==="code_execution_tool_result_error"){content.push({type:"tool-result",toolCallId:part.tool_use_id,toolName:"code_execution",isError:true,result:{type:"code_execution_tool_result_error",errorCode:part.content.error_code},providerExecuted:true});}break;}}}return{content,finishReason:mapAnthropicStopReason({finishReason:response.stop_reason,isJsonResponseFromTool:usesJsonResponseTool}),usage:{inputTokens:response.usage.input_tokens,outputTokens:response.usage.output_tokens,totalTokens:response.usage.input_tokens+response.usage.output_tokens,cachedInputTokens:(_b=response.usage.cache_read_input_tokens)!=null?_b:void 0},request:{body:args},response:{id:(_c=response.id)!=null?_c:void 0,modelId:(_d=response.model)!=null?_d:void 0,headers:responseHeaders,body:rawResponse},warnings,providerMetadata:{anthropic:{usage:response.usage,cacheCreationInputTokens:(_e=response.usage.cache_creation_input_tokens)!=null?_e:null}}};})();}doStream(options){var _this39=this;return _asyncToGenerator2(function*(){const{args,warnings,betas,usesJsonResponseTool}=yield _this39.getArgs(options);const citationDocuments=_this39.extractCitationDocuments(options.prompt);const body=_objectSpread2(_objectSpread2({},args),{},{stream:true});const{responseHeaders,value:response}=yield postJsonToApi({url:_this39.buildRequestUrl(true),headers:yield _this39.getHeaders({betas,headers:options.headers}),body:_this39.transformRequestBody(body),failedResponseHandler:anthropicFailedResponseHandler,successfulResponseHandler:createEventSourceResponseHandler(anthropicMessagesChunkSchema),abortSignal:options.abortSignal,fetch:_this39.config.fetch});let finishReason="unknown";const usage={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};const contentBlocks={};let providerMetadata=void 0;let blockType=void 0;const generateId3=_this39.generateId;return{stream:response.pipeThrough(new TransformStream({start(controller){controller.enqueue({type:"stream-start",warnings});},transform(chunk,controller){var _a,_b,_c,_d,_e,_f,_g;if(options.includeRawChunks){controller.enqueue({type:"raw",rawValue:chunk.rawValue});}if(!chunk.success){controller.enqueue({type:"error",error:chunk.error});return;}const value=chunk.value;switch(value.type){case"ping":{return;}case"content_block_start":{const contentBlockType=value.content_block.type;blockType=contentBlockType;switch(contentBlockType){case"text":{contentBlocks[value.index]={type:"text"};controller.enqueue({type:"text-start",id:String(value.index)});return;}case"thinking":{contentBlocks[value.index]={type:"reasoning"};controller.enqueue({type:"reasoning-start",id:String(value.index)});return;}case"redacted_thinking":{contentBlocks[value.index]={type:"reasoning"};controller.enqueue({type:"reasoning-start",id:String(value.index),providerMetadata:{anthropic:{redactedData:value.content_block.data}}});return;}case"tool_use":{contentBlocks[value.index]=usesJsonResponseTool?{type:"text"}:{type:"tool-call",toolCallId:value.content_block.id,toolName:value.content_block.name,input:""};controller.enqueue(usesJsonResponseTool?{type:"text-start",id:String(value.index)}:{type:"tool-input-start",id:value.content_block.id,toolName:value.content_block.name});return;}case"server_tool_use":{if(value.content_block.name==="web_search"||value.content_block.name==="code_execution"){contentBlocks[value.index]={type:"tool-call",toolCallId:value.content_block.id,toolName:value.content_block.name,input:"",providerExecuted:true};controller.enqueue({type:"tool-input-start",id:value.content_block.id,toolName:value.content_block.name,providerExecuted:true});}return;}case"web_search_tool_result":{const part=value.content_block;if(Array.isArray(part.content)){controller.enqueue({type:"tool-result",toolCallId:part.tool_use_id,toolName:"web_search",result:part.content.map(result=>{var _a2;return{url:result.url,title:result.title,pageAge:(_a2=result.page_age)!=null?_a2:null,encryptedContent:result.encrypted_content,type:result.type};}),providerExecuted:true});for(const result of part.content){controller.enqueue({type:"source",sourceType:"url",id:generateId3(),url:result.url,title:result.title,providerMetadata:{anthropic:{pageAge:(_a=result.page_age)!=null?_a:null}}});}}else{controller.enqueue({type:"tool-result",toolCallId:part.tool_use_id,toolName:"web_search",isError:true,result:{type:"web_search_tool_result_error",errorCode:part.content.error_code},providerExecuted:true});}return;}case"code_execution_tool_result":{const part=value.content_block;if(part.content.type==="code_execution_result"){controller.enqueue({type:"tool-result",toolCallId:part.tool_use_id,toolName:"code_execution",result:{type:part.content.type,stdout:part.content.stdout,stderr:part.content.stderr,return_code:part.content.return_code},providerExecuted:true});}else if(part.content.type==="code_execution_tool_result_error"){controller.enqueue({type:"tool-result",toolCallId:part.tool_use_id,toolName:"code_execution",isError:true,result:{type:"code_execution_tool_result_error",errorCode:part.content.error_code},providerExecuted:true});}return;}default:{const _exhaustiveCheck=contentBlockType;throw new Error("Unsupported content block type: ".concat(_exhaustiveCheck));}}}case"content_block_stop":{if(contentBlocks[value.index]!=null){const contentBlock=contentBlocks[value.index];switch(contentBlock.type){case"text":{controller.enqueue({type:"text-end",id:String(value.index)});break;}case"reasoning":{controller.enqueue({type:"reasoning-end",id:String(value.index)});break;}case"tool-call":if(!usesJsonResponseTool){controller.enqueue({type:"tool-input-end",id:contentBlock.toolCallId});controller.enqueue(contentBlock);}break;}delete contentBlocks[value.index];}blockType=void 0;return;}case"content_block_delta":{const deltaType=value.delta.type;switch(deltaType){case"text_delta":{if(usesJsonResponseTool){return;}controller.enqueue({type:"text-delta",id:String(value.index),delta:value.delta.text});return;}case"thinking_delta":{controller.enqueue({type:"reasoning-delta",id:String(value.index),delta:value.delta.thinking});return;}case"signature_delta":{if(blockType==="thinking"){controller.enqueue({type:"reasoning-delta",id:String(value.index),delta:"",providerMetadata:{anthropic:{signature:value.delta.signature}}});}return;}case"input_json_delta":{const contentBlock=contentBlocks[value.index];const delta=value.delta.partial_json;if(usesJsonResponseTool){if((contentBlock==null?void 0:contentBlock.type)!=="text"){return;}controller.enqueue({type:"text-delta",id:String(value.index),delta});}else{if((contentBlock==null?void 0:contentBlock.type)!=="tool-call"){return;}controller.enqueue({type:"tool-input-delta",id:contentBlock.toolCallId,delta});contentBlock.input+=delta;}return;}case"citations_delta":{const citation=value.delta.citation;processCitation(citation,citationDocuments,generateId3,source=>controller.enqueue(source));return;}default:{const _exhaustiveCheck=deltaType;throw new Error("Unsupported delta type: ".concat(_exhaustiveCheck));}}}case"message_start":{usage.inputTokens=value.message.usage.input_tokens;usage.cachedInputTokens=(_b=value.message.usage.cache_read_input_tokens)!=null?_b:void 0;providerMetadata={anthropic:{usage:value.message.usage,cacheCreationInputTokens:(_c=value.message.usage.cache_creation_input_tokens)!=null?_c:null}};controller.enqueue({type:"response-metadata",id:(_d=value.message.id)!=null?_d:void 0,modelId:(_e=value.message.model)!=null?_e:void 0});return;}case"message_delta":{usage.outputTokens=value.usage.output_tokens;usage.totalTokens=((_f=usage.inputTokens)!=null?_f:0)+((_g=value.usage.output_tokens)!=null?_g:0);finishReason=mapAnthropicStopReason({finishReason:value.delta.stop_reason,isJsonResponseFromTool:usesJsonResponseTool});return;}case"message_stop":{controller.enqueue({type:"finish",finishReason,usage,providerMetadata});return;}case"error":{controller.enqueue({type:"error",error:value.error});return;}default:{const _exhaustiveCheck=value;throw new Error("Unsupported chunk type: ".concat(_exhaustiveCheck));}}}})),request:{body},response:{headers:responseHeaders}};})();}};var anthropicMessagesResponseSchema=object$1({type:literal("message"),id:string$1().nullish(),model:string$1().nullish(),content:array(discriminatedUnion("type",[object$1({type:literal("text"),text:string$1(),citations:array(citationSchema).optional()}),object$1({type:literal("thinking"),thinking:string$1(),signature:string$1()}),object$1({type:literal("redacted_thinking"),data:string$1()}),object$1({type:literal("tool_use"),id:string$1(),name:string$1(),input:unknown()}),object$1({type:literal("server_tool_use"),id:string$1(),name:string$1(),input:record(string$1(),unknown()).nullish()}),object$1({type:literal("web_search_tool_result"),tool_use_id:string$1(),content:union([array(object$1({type:literal("web_search_result"),url:string$1(),title:string$1(),encrypted_content:string$1(),page_age:string$1().nullish()})),object$1({type:literal("web_search_tool_result_error"),error_code:string$1()})])}),object$1({type:literal("code_execution_tool_result"),tool_use_id:string$1(),content:union([object$1({type:literal("code_execution_result"),stdout:string$1(),stderr:string$1(),return_code:number$1()}),object$1({type:literal("code_execution_tool_result_error"),error_code:string$1()})])})])),stop_reason:string$1().nullish(),usage:looseObject({input_tokens:number$1(),output_tokens:number$1(),cache_creation_input_tokens:number$1().nullish(),cache_read_input_tokens:number$1().nullish()})});var anthropicMessagesChunkSchema=discriminatedUnion("type",[object$1({type:literal("message_start"),message:object$1({id:string$1().nullish(),model:string$1().nullish(),usage:looseObject({input_tokens:number$1(),output_tokens:number$1(),cache_creation_input_tokens:number$1().nullish(),cache_read_input_tokens:number$1().nullish()})})}),object$1({type:literal("content_block_start"),index:number$1(),content_block:discriminatedUnion("type",[object$1({type:literal("text"),text:string$1()}),object$1({type:literal("thinking"),thinking:string$1()}),object$1({type:literal("tool_use"),id:string$1(),name:string$1()}),object$1({type:literal("redacted_thinking"),data:string$1()}),object$1({type:literal("server_tool_use"),id:string$1(),name:string$1(),input:record(string$1(),unknown()).nullish()}),object$1({type:literal("web_search_tool_result"),tool_use_id:string$1(),content:union([array(object$1({type:literal("web_search_result"),url:string$1(),title:string$1(),encrypted_content:string$1(),page_age:string$1().nullish()})),object$1({type:literal("web_search_tool_result_error"),error_code:string$1()})])}),object$1({type:literal("code_execution_tool_result"),tool_use_id:string$1(),content:union([object$1({type:literal("code_execution_result"),stdout:string$1(),stderr:string$1(),return_code:number$1()}),object$1({type:literal("code_execution_tool_result_error"),error_code:string$1()})])})])}),object$1({type:literal("content_block_delta"),index:number$1(),delta:discriminatedUnion("type",[object$1({type:literal("input_json_delta"),partial_json:string$1()}),object$1({type:literal("text_delta"),text:string$1()}),object$1({type:literal("thinking_delta"),thinking:string$1()}),object$1({type:literal("signature_delta"),signature:string$1()}),object$1({type:literal("citations_delta"),citation:citationSchema})])}),object$1({type:literal("content_block_stop"),index:number$1()}),object$1({type:literal("error"),error:object$1({type:string$1(),message:string$1()})}),object$1({type:literal("message_delta"),delta:object$1({stop_reason:string$1().nullish()}),usage:object$1({output_tokens:number$1()})}),object$1({type:literal("message_stop")}),object$1({type:literal("ping")})]);var anthropicReasoningMetadataSchema=object$1({signature:string$1().optional(),redactedData:string$1().optional()});var bash_20241022=createProviderDefinedToolFactory({id:"anthropic.bash_20241022",name:"bash",inputSchema:z.object({command:z.string(),restart:z.boolean().optional()})});var bash_20250124=createProviderDefinedToolFactory({id:"anthropic.bash_20250124",name:"bash",inputSchema:z.object({command:z.string(),restart:z.boolean().optional()})});var computer_20241022=createProviderDefinedToolFactory({id:"anthropic.computer_20241022",name:"computer",inputSchema:object$1({action:_enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:array(number$1().int()).optional(),text:string$1().optional()})});var computer_20250124=createProviderDefinedToolFactory({id:"anthropic.computer_20250124",name:"computer",inputSchema:object$1({action:_enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:tuple([number$1().int(),number$1().int()]).optional(),duration:number$1().optional(),scroll_amount:number$1().optional(),scroll_direction:_enum(["up","down","left","right"]).optional(),start_coordinate:tuple([number$1().int(),number$1().int()]).optional(),text:string$1().optional()})});var textEditor_20241022=createProviderDefinedToolFactory({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:object$1({command:_enum(["view","create","str_replace","insert","undo_edit"]),path:string$1(),file_text:string$1().optional(),insert_line:number$1().int().optional(),new_str:string$1().optional(),old_str:string$1().optional(),view_range:array(number$1().int()).optional()})});var textEditor_20250124=createProviderDefinedToolFactory({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:object$1({command:_enum(["view","create","str_replace","insert","undo_edit"]),path:string$1(),file_text:string$1().optional(),insert_line:number$1().int().optional(),new_str:string$1().optional(),old_str:string$1().optional(),view_range:array(number$1().int()).optional()})});var textEditor_20250429=createProviderDefinedToolFactory({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:object$1({command:_enum(["view","create","str_replace","insert"]),path:string$1(),file_text:string$1().optional(),insert_line:number$1().int().optional(),new_str:string$1().optional(),old_str:string$1().optional(),view_range:array(number$1().int()).optional()})});// src/anthropic-tools.ts
var anthropicTools={/**
   * The bash tool enables Claude to execute shell commands in a persistent bash session,
   * allowing system operations, script execution, and command-line automation.
   *
   * Image results are supported.
   *
   * Tool name must be `bash`.
   */bash_20241022,/**
   * The bash tool enables Claude to execute shell commands in a persistent bash session,
   * allowing system operations, script execution, and command-line automation.
   *
   * Image results are supported.
   *
   * Tool name must be `bash`.
   */bash_20250124,/**
   * Claude can analyze data, create visualizations, perform complex calculations,
   * run system commands, create and edit files, and process uploaded files directly within
   * the API conversation.
   *
   * The code execution tool allows Claude to run Bash commands and manipulate files,
   * including writing code, in a secure, sandboxed environment.
   *
   * Tool name must be `code_execution`.
   */codeExecution_20250522,/**
   * Claude can interact with computer environments through the computer use tool, which
   * provides screenshot capabilities and mouse/keyboard control for autonomous desktop interaction.
   *
   * Image results are supported.
   *
   * Tool name must be `computer`.
   *
   * @param displayWidthPx - The width of the display being controlled by the model in pixels.
   * @param displayHeightPx - The height of the display being controlled by the model in pixels.
   * @param displayNumber - The display number to control (only relevant for X11 environments). If specified, the tool will be provided a display number in the tool definition.
   */computer_20241022,/**
   * Claude can interact with computer environments through the computer use tool, which
   * provides screenshot capabilities and mouse/keyboard control for autonomous desktop interaction.
   *
   * Image results are supported.
   *
   * Tool name must be `computer`.
   *
   * @param displayWidthPx - The width of the display being controlled by the model in pixels.
   * @param displayHeightPx - The height of the display being controlled by the model in pixels.
   * @param displayNumber - The display number to control (only relevant for X11 environments). If specified, the tool will be provided a display number in the tool definition.
   */computer_20250124,/**
   * Claude can use an Anthropic-defined text editor tool to view and modify text files,
   * helping you debug, fix, and improve your code or other text documents. This allows Claude
   * to directly interact with your files, providing hands-on assistance rather than just suggesting changes.
   *
   * Tool name must be `str_replace_editor`.
   */textEditor_20241022,/**
   * Claude can use an Anthropic-defined text editor tool to view and modify text files,
   * helping you debug, fix, and improve your code or other text documents. This allows Claude
   * to directly interact with your files, providing hands-on assistance rather than just suggesting changes.
   *
   * Tool name must be `str_replace_editor`.
   */textEditor_20250124,/**
   * Claude can use an Anthropic-defined text editor tool to view and modify text files,
   * helping you debug, fix, and improve your code or other text documents. This allows Claude
   * to directly interact with your files, providing hands-on assistance rather than just suggesting changes.
   *
   * Note: This version does not support the "undo_edit" command.
   *
   * Tool name must be `str_replace_based_edit_tool`.
   */textEditor_20250429,/**
   * Creates a web search tool that gives Claude direct access to real-time web content.
   *
   * Tool name must be `web_search`.
   *
   * @param maxUses - Maximum number of web searches Claude can perform during the conversation.
   * @param allowedDomains - Optional list of domains that Claude is allowed to search.
   * @param blockedDomains - Optional list of domains that Claude should avoid when searching.
   * @param userLocation - Optional user location information to provide geographically relevant search results.
   */webSearch_20250305};// src/anthropic-provider.ts
function createAnthropic(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _a;const baseURL=(_a=withoutTrailingSlash(options.baseURL))!=null?_a:"https://api.anthropic.com/v1";const getHeaders=()=>_objectSpread2({"anthropic-version":"2023-06-01","x-api-key":loadApiKey({apiKey:options.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"})},options.headers);const createChatModel=modelId=>{var _a2;return new AnthropicMessagesLanguageModel(modelId,{provider:"anthropic.messages",baseURL,headers:getHeaders,fetch:options.fetch,generateId:(_a2=options.generateId)!=null?_a2:generateId,supportedUrls:()=>({"image/*":[/^https?:\/\/.*$/]})});};const provider=function(modelId){if(new.target){throw new Error("The Anthropic model function cannot be called with the new keyword.");}return createChatModel(modelId);};provider.languageModel=createChatModel;provider.chat=createChatModel;provider.messages=createChatModel;provider.textEmbeddingModel=modelId=>{throw new NoSuchModelError({modelId,modelType:"textEmbeddingModel"});};provider.imageModel=modelId=>{throw new NoSuchModelError({modelId,modelType:"imageModel"});};provider.tools=anthropicTools;return provider;}createAnthropic();// src/gateway-provider.ts
// src/errors/gateway-error.ts
var marker$1="vercel.ai.gateway.error";var symbol$1=Symbol.for(marker$1);var _a$1,_b;var GatewayError=class _GatewayError extends(_b=Error,_a$1=symbol$1,_b){constructor(_ref113){let{message,statusCode=500,cause}=_ref113;super(message);this[_a$1]=true;this.statusCode=statusCode;this.cause=cause;}/**
   * Checks if the given error is a Gateway Error.
   * @param {unknown} error - The error to check.
   * @returns {boolean} True if the error is a Gateway Error, false otherwise.
   */static isInstance(error){return _GatewayError.hasMarker(error);}static hasMarker(error){return typeof error==="object"&&error!==null&&symbol$1 in error&&error[symbol$1]===true;}};// src/errors/gateway-authentication-error.ts
var name$1="GatewayAuthenticationError";var marker2$1="vercel.ai.gateway.error.".concat(name$1);var symbol2$1=Symbol.for(marker2$1);var _a2$1,_b2;var GatewayAuthenticationError=class _GatewayAuthenticationError extends(_b2=GatewayError,_a2$1=symbol2$1,_b2){constructor(){let{message="Authentication failed",statusCode=401,cause}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({message,statusCode,cause});this[_a2$1]=true;// used in isInstance
this.name=name$1;this.type="authentication_error";}static isInstance(error){return GatewayError.hasMarker(error)&&symbol2$1 in error;}/**
   * Creates a contextual error message when authentication fails
   */static createContextualError(_ref114){let{apiKeyProvided,oidcTokenProvided,message="Authentication failed",statusCode=401,cause}=_ref114;let contextualMessage;if(apiKeyProvided){contextualMessage="AI Gateway authentication failed: Invalid API key provided.\n\nThe token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.";}else if(oidcTokenProvided){contextualMessage="AI Gateway authentication failed: Invalid OIDC token provided.\n\nThe token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.\n- make sure your Vercel project settings have OIDC enabled\n- if running locally with 'vercel dev', the token is automatically obtained and refreshed\n- if running locally with your own dev server, run 'vercel env pull' to fetch the token\n- in production/preview, the token is automatically obtained and refreshed\n\nAlternative: Provide an API key via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.";}else{contextualMessage="AI Gateway authentication failed: No authentication provided.\n\nProvide either an API key or OIDC token.\n\nAPI key instructions:\n\nThe token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.\n\nOIDC token instructions:\n\nThe token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.\n- make sure your Vercel project settings have OIDC enabled\n- if running locally with 'vercel dev', the token is automatically obtained and refreshed\n- if running locally with your own dev server, run 'vercel env pull' to fetch the token\n- in production/preview, the token is automatically obtained and refreshed";}return new _GatewayAuthenticationError({message:contextualMessage,statusCode,cause});}};// src/errors/gateway-invalid-request-error.ts
var name2$1="GatewayInvalidRequestError";var marker3="vercel.ai.gateway.error.".concat(name2$1);var symbol3=Symbol.for(marker3);var _a3,_b3;var GatewayInvalidRequestError=class extends(_b3=GatewayError,_a3=symbol3,_b3){constructor(){let{message="Invalid request",statusCode=400,cause}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({message,statusCode,cause});this[_a3]=true;// used in isInstance
this.name=name2$1;this.type="invalid_request_error";}static isInstance(error){return GatewayError.hasMarker(error)&&symbol3 in error;}};// src/errors/gateway-rate-limit-error.ts
var name3="GatewayRateLimitError";var marker4$1="vercel.ai.gateway.error.".concat(name3);var symbol4$1=Symbol.for(marker4$1);var _a4$1,_b4;var GatewayRateLimitError=class extends(_b4=GatewayError,_a4$1=symbol4$1,_b4){constructor(){let{message="Rate limit exceeded",statusCode=429,cause}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({message,statusCode,cause});this[_a4$1]=true;// used in isInstance
this.name=name3;this.type="rate_limit_exceeded";}static isInstance(error){return GatewayError.hasMarker(error)&&symbol4$1 in error;}};var name4$1="GatewayModelNotFoundError";var marker5="vercel.ai.gateway.error.".concat(name4$1);var symbol5=Symbol.for(marker5);var modelNotFoundParamSchema=object$1({modelId:string$1()});var _a5,_b5;var GatewayModelNotFoundError=class extends(_b5=GatewayError,_a5=symbol5,_b5){constructor(){let{message="Model not found",statusCode=404,modelId,cause}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({message,statusCode,cause});this[_a5]=true;// used in isInstance
this.name=name4$1;this.type="model_not_found";this.modelId=modelId;}static isInstance(error){return GatewayError.hasMarker(error)&&symbol5 in error;}};// src/errors/gateway-internal-server-error.ts
var name5="GatewayInternalServerError";var marker6="vercel.ai.gateway.error.".concat(name5);var symbol6=Symbol.for(marker6);var _a6,_b6;var GatewayInternalServerError=class extends(_b6=GatewayError,_a6=symbol6,_b6){constructor(){let{message="Internal server error",statusCode=500,cause}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({message,statusCode,cause});this[_a6]=true;// used in isInstance
this.name=name5;this.type="internal_server_error";}static isInstance(error){return GatewayError.hasMarker(error)&&symbol6 in error;}};// src/errors/gateway-response-error.ts
var name6="GatewayResponseError";var marker7$1="vercel.ai.gateway.error.".concat(name6);var symbol7$1=Symbol.for(marker7$1);var _a7$1,_b7;var GatewayResponseError=class extends(_b7=GatewayError,_a7$1=symbol7$1,_b7){constructor(){let{message="Invalid response from Gateway",statusCode=502,response,validationError,cause}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({message,statusCode,cause});this[_a7$1]=true;// used in isInstance
this.name=name6;this.type="response_error";this.response=response;this.validationError=validationError;}static isInstance(error){return GatewayError.hasMarker(error)&&symbol7$1 in error;}};// src/errors/create-gateway-error.ts
function createGatewayErrorFromResponse(_ref115){let{response,statusCode,defaultMessage="Gateway request failed",cause,authMethod}=_ref115;const parseResult=gatewayErrorResponseSchema.safeParse(response);if(!parseResult.success){return new GatewayResponseError({message:"Invalid error response format: ".concat(defaultMessage),statusCode,response,validationError:parseResult.error,cause});}const validatedResponse=parseResult.data;const errorType=validatedResponse.error.type;const message=validatedResponse.error.message;switch(errorType){case"authentication_error":return GatewayAuthenticationError.createContextualError({apiKeyProvided:authMethod==="api-key",oidcTokenProvided:authMethod==="oidc",statusCode,cause});case"invalid_request_error":return new GatewayInvalidRequestError({message,statusCode,cause});case"rate_limit_exceeded":return new GatewayRateLimitError({message,statusCode,cause});case"model_not_found":{const modelResult=modelNotFoundParamSchema.safeParse(validatedResponse.error.param);return new GatewayModelNotFoundError({message,statusCode,modelId:modelResult.success?modelResult.data.modelId:void 0,cause});}case"internal_server_error":return new GatewayInternalServerError({message,statusCode,cause});default:return new GatewayInternalServerError({message,statusCode,cause});}}var gatewayErrorResponseSchema=object$1({error:object$1({message:string$1(),type:string$1().nullish(),param:unknown().nullish(),code:union([string$1(),number$1()]).nullish()})});// src/errors/as-gateway-error.ts
function asGatewayError(error,authMethod){var _a8;if(GatewayError.isInstance(error)){return error;}if(APICallError.isInstance(error)){return createGatewayErrorFromResponse({response:extractApiCallResponse(error),statusCode:(_a8=error.statusCode)!=null?_a8:500,defaultMessage:"Gateway request failed",cause:error,authMethod});}return createGatewayErrorFromResponse({response:{},statusCode:500,defaultMessage:error instanceof Error?"Gateway request failed: ".concat(error.message):"Unknown Gateway error",cause:error,authMethod});}// src/errors/extract-api-call-response.ts
function extractApiCallResponse(error){if(error.data!==void 0){return error.data;}if(error.responseBody!=null){try{return JSON.parse(error.responseBody);}catch(e){return error.responseBody;}}return{};}var GATEWAY_AUTH_METHOD_HEADER="ai-gateway-auth-method";function parseAuthMethod(headers){const result=gatewayAuthMethodSchema.safeParse(headers[GATEWAY_AUTH_METHOD_HEADER]);return result.success?result.data:void 0;}var gatewayAuthMethodSchema=union([literal("api-key"),literal("oidc")]);var GatewayFetchMetadata=class{constructor(config){this.config=config;}getAvailableModels(){var _this40=this;return _asyncToGenerator2(function*(){try{const{value}=yield getFromApi({url:"".concat(_this40.config.baseURL,"/config"),headers:yield resolve(_this40.config.headers()),successfulResponseHandler:createJsonResponseHandler(gatewayFetchMetadataSchema),failedResponseHandler:createJsonErrorResponseHandler({errorSchema:any(),errorToMessage:data=>data}),fetch:_this40.config.fetch});return value;}catch(error){throw asGatewayError(error);}})();}};var gatewayLanguageModelSpecificationSchema=object$1({specificationVersion:literal("v2"),provider:string$1(),modelId:string$1()});var gatewayLanguageModelPricingSchema=object$1({input:string$1(),output:string$1(),input_cache_read:string$1().nullish(),input_cache_write:string$1().nullish()}).transform(_ref116=>{let{input,output,input_cache_read,input_cache_write}=_ref116;return _objectSpread2(_objectSpread2({input,output},input_cache_read?{cachedInputTokens:input_cache_read}:{}),input_cache_write?{cacheCreationInputTokens:input_cache_write}:{});});var gatewayLanguageModelEntrySchema=object$1({id:string$1(),name:string$1(),description:string$1().nullish(),pricing:gatewayLanguageModelPricingSchema.nullish(),specification:gatewayLanguageModelSpecificationSchema,modelType:_enum(["language","embedding","image"]).nullish()});var gatewayFetchMetadataSchema=object$1({models:array(gatewayLanguageModelEntrySchema)});var GatewayLanguageModel=class{constructor(modelId,config){this.modelId=modelId;this.config=config;this.specificationVersion="v2";this.supportedUrls={"*/*":[/.*/]};}get provider(){return this.config.provider;}getArgs(options){var _this41=this;return _asyncToGenerator2(function*(){const{abortSignal:_abortSignal}=options,optionsWithoutSignal=_objectWithoutProperties(options,_excluded7);return{args:_this41.maybeEncodeFileParts(optionsWithoutSignal),warnings:[]};})();}doGenerate(options){var _this42=this;return _asyncToGenerator2(function*(){const{args,warnings}=yield _this42.getArgs(options);const{abortSignal}=options;const resolvedHeaders=yield resolve(_this42.config.headers());try{const{responseHeaders,value:responseBody,rawValue:rawResponse}=yield postJsonToApi(_objectSpread2(_objectSpread2({url:_this42.getUrl(),headers:combineHeaders(resolvedHeaders,options.headers,_this42.getModelConfigHeaders(_this42.modelId,false),yield resolve(_this42.config.o11yHeaders)),body:args,successfulResponseHandler:createJsonResponseHandler(any()),failedResponseHandler:createJsonErrorResponseHandler({errorSchema:any(),errorToMessage:data=>data})},abortSignal&&{abortSignal}),{},{fetch:_this42.config.fetch}));return _objectSpread2(_objectSpread2({},responseBody),{},{request:{body:args},response:{headers:responseHeaders,body:rawResponse},warnings});}catch(error){throw asGatewayError(error,parseAuthMethod(resolvedHeaders));}})();}doStream(options){var _this43=this;return _asyncToGenerator2(function*(){const{args,warnings}=yield _this43.getArgs(options);const{abortSignal}=options;const resolvedHeaders=yield resolve(_this43.config.headers());try{const{value:response,responseHeaders}=yield postJsonToApi(_objectSpread2(_objectSpread2({url:_this43.getUrl(),headers:combineHeaders(resolvedHeaders,options.headers,_this43.getModelConfigHeaders(_this43.modelId,true),yield resolve(_this43.config.o11yHeaders)),body:args,successfulResponseHandler:createEventSourceResponseHandler(any()),failedResponseHandler:createJsonErrorResponseHandler({errorSchema:any(),errorToMessage:data=>data})},abortSignal&&{abortSignal}),{},{fetch:_this43.config.fetch}));return{stream:response.pipeThrough(new TransformStream({start(controller){if(warnings.length>0){controller.enqueue({type:"stream-start",warnings});}},transform(chunk,controller){if(chunk.success){const streamPart=chunk.value;if(streamPart.type==="raw"&&!options.includeRawChunks){return;}if(streamPart.type==="response-metadata"&&streamPart.timestamp&&typeof streamPart.timestamp==="string"){streamPart.timestamp=new Date(streamPart.timestamp);}controller.enqueue(streamPart);}else{controller.error(chunk.error);}}})),request:{body:args},response:{headers:responseHeaders}};}catch(error){throw asGatewayError(error,parseAuthMethod(resolvedHeaders));}})();}isFilePart(part){return part&&typeof part==="object"&&"type"in part&&part.type==="file";}/**
   * Encodes file parts in the prompt to base64. Mutates the passed options
   * instance directly to avoid copying the file data.
   * @param options - The options to encode.
   * @returns The options with the file parts encoded.
   */maybeEncodeFileParts(options){for(const message of options.prompt){for(const part of message.content){if(this.isFilePart(part)){const filePart=part;if(filePart.data instanceof Uint8Array){const buffer=Uint8Array.from(filePart.data);const base64Data=Buffer.from(buffer).toString("base64");filePart.data=new URL("data:".concat(filePart.mediaType||"application/octet-stream",";base64,").concat(base64Data));}}}}return options;}getUrl(){return"".concat(this.config.baseURL,"/language-model");}getModelConfigHeaders(modelId,streaming){return{"ai-language-model-specification-version":"2","ai-language-model-id":modelId,"ai-language-model-streaming":String(streaming)};}};var GatewayEmbeddingModel=class{constructor(modelId,config){this.modelId=modelId;this.config=config;this.specificationVersion="v2";this.maxEmbeddingsPerCall=2048;this.supportsParallelCalls=true;}get provider(){return this.config.provider;}doEmbed(_x57){var _this44=this;return _asyncToGenerator2(function(_ref117){let{values,headers,abortSignal,providerOptions}=_ref117;return function*(){var _a8;const resolvedHeaders=yield resolve(_this44.config.headers());try{const{responseHeaders,value:responseBody,rawValue}=yield postJsonToApi(_objectSpread2(_objectSpread2({url:_this44.getUrl(),headers:combineHeaders(resolvedHeaders,headers!=null?headers:{},_this44.getModelConfigHeaders(),yield resolve(_this44.config.o11yHeaders)),body:_objectSpread2({input:values.length===1?values[0]:values},providerOptions?{providerOptions}:{}),successfulResponseHandler:createJsonResponseHandler(gatewayEmbeddingResponseSchema),failedResponseHandler:createJsonErrorResponseHandler({errorSchema:any(),errorToMessage:data=>data})},abortSignal&&{abortSignal}),{},{fetch:_this44.config.fetch}));return{embeddings:responseBody.embeddings,usage:(_a8=responseBody.usage)!=null?_a8:void 0,providerMetadata:responseBody.providerMetadata,response:{headers:responseHeaders,body:rawValue}};}catch(error){throw asGatewayError(error,parseAuthMethod(resolvedHeaders));}}();}).apply(this,arguments);}getUrl(){return"".concat(this.config.baseURL,"/embedding-model");}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId};}};var gatewayEmbeddingResponseSchema=object$1({embeddings:array(array(number$1())),usage:object$1({tokens:number$1()}).nullish(),providerMetadata:record(string$1(),record(string$1(),unknown())).optional()});// src/vercel-environment.ts
function getVercelOidcToken(){return _getVercelOidcToken.apply(this,arguments);}function _getVercelOidcToken(){_getVercelOidcToken=_asyncToGenerator2(function*(){var _a8,_b8;const token=(_b8=(_a8=getContext().headers)==null?void 0:_a8["x-vercel-oidc-token"])!=null?_b8:process.env.VERCEL_OIDC_TOKEN;if(!token){throw new GatewayAuthenticationError({message:"OIDC token not available",statusCode:401});}return token;});return _getVercelOidcToken.apply(this,arguments);}function getVercelRequestId(){return _getVercelRequestId.apply(this,arguments);}function _getVercelRequestId(){_getVercelRequestId=_asyncToGenerator2(function*(){var _a8;return(_a8=getContext().headers)==null?void 0:_a8["x-vercel-id"];});return _getVercelRequestId.apply(this,arguments);}var SYMBOL_FOR_REQ_CONTEXT=Symbol.for("@vercel/request-context");function getContext(){var _a8,_b8,_c;const fromSymbol=globalThis;return(_c=(_b8=(_a8=fromSymbol[SYMBOL_FOR_REQ_CONTEXT])==null?void 0:_a8.get)==null?void 0:_b8.call(_a8))!=null?_c:{};}// src/gateway-provider.ts
var AI_GATEWAY_PROTOCOL_VERSION="0.0.1";function createGatewayProvider(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _a8,_b8;let pendingMetadata=null;let metadataCache=null;const cacheRefreshMillis=(_a8=options.metadataCacheRefreshMillis)!=null?_a8:1e3*60*5;let lastFetchTime=0;const baseURL=(_b8=withoutTrailingSlash(options.baseURL))!=null?_b8:"https://ai-gateway.vercel.sh/v1/ai";const getHeaders=/*#__PURE__*/function(){var _ref118=_asyncToGenerator2(function*(){const auth=yield getGatewayAuthToken(options);if(auth){return _objectSpread2({Authorization:"Bearer ".concat(auth.token),"ai-gateway-protocol-version":AI_GATEWAY_PROTOCOL_VERSION,[GATEWAY_AUTH_METHOD_HEADER]:auth.authMethod},options.headers);}throw GatewayAuthenticationError.createContextualError({apiKeyProvided:false,oidcTokenProvided:false,statusCode:401});});return function getHeaders(){return _ref118.apply(this,arguments);};}();const createO11yHeaders=()=>{const deploymentId=loadOptionalSetting({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"});const environment=loadOptionalSetting({settingValue:void 0,environmentVariableName:"VERCEL_ENV"});const region=loadOptionalSetting({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return/*#__PURE__*/_asyncToGenerator2(function*(){const requestId=yield getVercelRequestId();return _objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},deploymentId&&{"ai-o11y-deployment-id":deploymentId}),environment&&{"ai-o11y-environment":environment}),region&&{"ai-o11y-region":region}),requestId&&{"ai-o11y-request-id":requestId});});};const createLanguageModel=modelId=>{return new GatewayLanguageModel(modelId,{provider:"gateway",baseURL,headers:getHeaders,fetch:options.fetch,o11yHeaders:createO11yHeaders()});};const getAvailableModels=/*#__PURE__*/function(){var _ref120=_asyncToGenerator2(function*(){var _a9,_b9,_c;const now=(_c=(_b9=(_a9=options._internal)==null?void 0:_a9.currentDate)==null?void 0:_b9.call(_a9).getTime())!=null?_c:Date.now();if(!pendingMetadata||now-lastFetchTime>cacheRefreshMillis){lastFetchTime=now;pendingMetadata=new GatewayFetchMetadata({baseURL,headers:getHeaders,fetch:options.fetch}).getAvailableModels().then(metadata=>{metadataCache=metadata;return metadata;}).catch(/*#__PURE__*/function(){var _ref121=_asyncToGenerator2(function*(error){throw asGatewayError(error,parseAuthMethod(yield getHeaders()));});return function(_x58){return _ref121.apply(this,arguments);};}());}return metadataCache?Promise.resolve(metadataCache):pendingMetadata;});return function getAvailableModels(){return _ref120.apply(this,arguments);};}();const provider=function(modelId){if(new.target){throw new Error("The Gateway Provider model function cannot be called with the new keyword.");}return createLanguageModel(modelId);};provider.getAvailableModels=getAvailableModels;provider.imageModel=modelId=>{throw new NoSuchModelError({modelId,modelType:"imageModel"});};provider.languageModel=createLanguageModel;provider.textEmbeddingModel=modelId=>{return new GatewayEmbeddingModel(modelId,{provider:"gateway",baseURL,headers:getHeaders,fetch:options.fetch,o11yHeaders:createO11yHeaders()});};return provider;}var gateway=createGatewayProvider();function getGatewayAuthToken(_x59){return _getGatewayAuthToken.apply(this,arguments);}function _getGatewayAuthToken(){_getGatewayAuthToken=_asyncToGenerator2(function*(options){const apiKey=loadOptionalSetting({settingValue:options.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(apiKey){return{token:apiKey,authMethod:"api-key"};}try{const oidcToken=yield getVercelOidcToken();return{token:oidcToken,authMethod:"oidc"};}catch(e){return null;}});return _getGatewayAuthToken.apply(this,arguments);}var global$1=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */// Updates to this file should also be replicated to @opentelemetry/core too.
/**
 * - globalThis (New standard)
 * - self (Will return the current window instance for supported browsers)
 * - window (fallback for older browser implementations)
 * - global (NodeJS implementation)
 * - <object> (When all else fails)
 *//** only globals that common to node and browsers are allowed */// eslint-disable-next-line node/no-unsupported-features/es-builtins, no-undef
var _globalThis=typeof globalThis==='object'?globalThis:typeof self==='object'?self:typeof window==='object'?window:typeof global$1==='object'?global$1:{};/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */// this is autogenerated file, see scripts/version-update.js
var VERSION$1='1.9.0';/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;/**
 * Create a function to test an API version to see if it is compatible with the provided ownVersion.
 *
 * The returned function has the following semantics:
 * - Exact match is always compatible
 * - Major versions must match exactly
 *    - 1.x package cannot use global 2.x package
 *    - 2.x package cannot use global 1.x package
 * - The minor version of the API module requesting access to the global API must be less than or equal to the minor version of this API
 *    - 1.3 package may use 1.4 global because the later global contains all functions 1.3 expects
 *    - 1.4 package may NOT use 1.3 global because it may try to call functions which don't exist on 1.3
 * - If the major version is 0, the minor version is treated as the major and the patch is treated as the minor
 * - Patch and build tag differences are not considered at this time
 *
 * @param ownVersion version which should be checked against
 */function _makeCompatibilityCheck(ownVersion){var acceptedVersions=new Set([ownVersion]);var rejectedVersions=new Set();var myVersionMatch=ownVersion.match(re);if(!myVersionMatch){// we cannot guarantee compatibility so we always return noop
return function(){return false;};}var ownVersionParsed={major:+myVersionMatch[1],minor:+myVersionMatch[2],patch:+myVersionMatch[3],prerelease:myVersionMatch[4]};// if ownVersion has a prerelease tag, versions must match exactly
if(ownVersionParsed.prerelease!=null){return function isExactmatch(globalVersion){return globalVersion===ownVersion;};}function _reject(v){rejectedVersions.add(v);return false;}function _accept(v){acceptedVersions.add(v);return true;}return function isCompatible(globalVersion){if(acceptedVersions.has(globalVersion)){return true;}if(rejectedVersions.has(globalVersion)){return false;}var globalVersionMatch=globalVersion.match(re);if(!globalVersionMatch){// cannot parse other version
// we cannot guarantee compatibility so we always noop
return _reject(globalVersion);}var globalVersionParsed={major:+globalVersionMatch[1],minor:+globalVersionMatch[2],patch:+globalVersionMatch[3],prerelease:globalVersionMatch[4]};// if globalVersion has a prerelease tag, versions must match exactly
if(globalVersionParsed.prerelease!=null){return _reject(globalVersion);}// major versions must match
if(ownVersionParsed.major!==globalVersionParsed.major){return _reject(globalVersion);}if(ownVersionParsed.major===0){if(ownVersionParsed.minor===globalVersionParsed.minor&&ownVersionParsed.patch<=globalVersionParsed.patch){return _accept(globalVersion);}return _reject(globalVersion);}if(ownVersionParsed.minor<=globalVersionParsed.minor){return _accept(globalVersion);}return _reject(globalVersion);};}/**
 * Test an API version to see if it is compatible with this API.
 *
 * - Exact match is always compatible
 * - Major versions must match exactly
 *    - 1.x package cannot use global 2.x package
 *    - 2.x package cannot use global 1.x package
 * - The minor version of the API module requesting access to the global API must be less than or equal to the minor version of this API
 *    - 1.3 package may use 1.4 global because the later global contains all functions 1.3 expects
 *    - 1.4 package may NOT use 1.3 global because it may try to call functions which don't exist on 1.3
 * - If the major version is 0, the minor version is treated as the major and the patch is treated as the minor
 * - Patch and build tag differences are not considered at this time
 *
 * @param version version of the API requesting an instance of the global API
 */var isCompatible=_makeCompatibilityCheck(VERSION$1);/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var major=VERSION$1.split('.')[0];var GLOBAL_OPENTELEMETRY_API_KEY=Symbol.for("opentelemetry.js.api."+major);var _global=_globalThis;function registerGlobal(type,instance,diag,allowOverride){var _a;if(allowOverride===void 0){allowOverride=false;}var api=_global[GLOBAL_OPENTELEMETRY_API_KEY]=(_a=_global[GLOBAL_OPENTELEMETRY_API_KEY])!==null&&_a!==void 0?_a:{version:VERSION$1};if(!allowOverride&&api[type]){// already registered an API of this type
var err=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+type);diag.error(err.stack||err.message);return false;}if(api.version!==VERSION$1){// All registered APIs must be of the same version exactly
var err=new Error("@opentelemetry/api: Registration of version v"+api.version+" for "+type+" does not match previously registered API v"+VERSION$1);diag.error(err.stack||err.message);return false;}api[type]=instance;diag.debug("@opentelemetry/api: Registered a global for "+type+" v"+VERSION$1+".");return true;}function getGlobal(type){var _a,_b;var globalVersion=(_a=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||_a===void 0?void 0:_a.version;if(!globalVersion||!isCompatible(globalVersion)){return;}return(_b=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||_b===void 0?void 0:_b[type];}function unregisterGlobal(type,diag){diag.debug("@opentelemetry/api: Unregistering a global for "+type+" v"+VERSION$1+".");var api=_global[GLOBAL_OPENTELEMETRY_API_KEY];if(api){delete api[type];}}/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __read$3=window&&window.__read||function(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-->0)&&!(r=i.next()).done)ar.push(r.value);}catch(error){e={error:error};}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i);}finally{if(e)throw e.error;}}return ar;};var __spreadArray$3=window&&window.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i];}}return to.concat(ar||Array.prototype.slice.call(from));};/**
 * Component Logger which is meant to be used as part of any component which
 * will add automatically additional namespace in front of the log message.
 * It will then forward all message to global diag logger
 * @example
 * const cLogger = diag.createComponentLogger({ namespace: '@opentelemetry/instrumentation-http' });
 * cLogger.debug('test');
 * // @opentelemetry/instrumentation-http test
 */var DiagComponentLogger=/** @class */function(){function DiagComponentLogger(props){this._namespace=props.namespace||'DiagComponentLogger';}DiagComponentLogger.prototype.debug=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return logProxy('debug',this._namespace,args);};DiagComponentLogger.prototype.error=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return logProxy('error',this._namespace,args);};DiagComponentLogger.prototype.info=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return logProxy('info',this._namespace,args);};DiagComponentLogger.prototype.warn=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return logProxy('warn',this._namespace,args);};DiagComponentLogger.prototype.verbose=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return logProxy('verbose',this._namespace,args);};return DiagComponentLogger;}();function logProxy(funcName,namespace,args){var logger=getGlobal('diag');// shortcut if logger not set
if(!logger){return;}args.unshift(namespace);return logger[funcName].apply(logger,__spreadArray$3([],__read$3(args),false));}/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * Defines the available internal logging levels for the diagnostic logger, the numeric values
 * of the levels are defined to match the original values from the initial LogLevel to avoid
 * compatibility/migration issues for any implementation that assume the numeric ordering.
 */var DiagLogLevel;(function(DiagLogLevel){/** Diagnostic Logging level setting to disable all logging (except and forced logs) */DiagLogLevel[DiagLogLevel["NONE"]=0]="NONE";/** Identifies an error scenario */DiagLogLevel[DiagLogLevel["ERROR"]=30]="ERROR";/** Identifies a warning scenario */DiagLogLevel[DiagLogLevel["WARN"]=50]="WARN";/** General informational log message */DiagLogLevel[DiagLogLevel["INFO"]=60]="INFO";/** General debug log message */DiagLogLevel[DiagLogLevel["DEBUG"]=70]="DEBUG";/**
     * Detailed trace level logging should only be used for development, should only be set
     * in a development environment.
     */DiagLogLevel[DiagLogLevel["VERBOSE"]=80]="VERBOSE";/** Used to set the logging level to include all logging */DiagLogLevel[DiagLogLevel["ALL"]=9999]="ALL";})(DiagLogLevel||(DiagLogLevel={}));/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createLogLevelDiagLogger(maxLevel,logger){if(maxLevel<DiagLogLevel.NONE){maxLevel=DiagLogLevel.NONE;}else if(maxLevel>DiagLogLevel.ALL){maxLevel=DiagLogLevel.ALL;}// In case the logger is null or undefined
logger=logger||{};function _filterFunc(funcName,theLevel){var theFunc=logger[funcName];if(typeof theFunc==='function'&&maxLevel>=theLevel){return theFunc.bind(logger);}return function(){};}return{error:_filterFunc('error',DiagLogLevel.ERROR),warn:_filterFunc('warn',DiagLogLevel.WARN),info:_filterFunc('info',DiagLogLevel.INFO),debug:_filterFunc('debug',DiagLogLevel.DEBUG),verbose:_filterFunc('verbose',DiagLogLevel.VERBOSE)};}/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __read$2=window&&window.__read||function(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-->0)&&!(r=i.next()).done)ar.push(r.value);}catch(error){e={error:error};}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i);}finally{if(e)throw e.error;}}return ar;};var __spreadArray$2=window&&window.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i];}}return to.concat(ar||Array.prototype.slice.call(from));};var API_NAME$2='diag';/**
 * Singleton object which represents the entry point to the OpenTelemetry internal
 * diagnostic API
 */var DiagAPI=/** @class */function(){/**
     * Private internal constructor
     * @private
     */function DiagAPI(){function _logProxy(funcName){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var logger=getGlobal('diag');// shortcut if logger not set
if(!logger)return;return logger[funcName].apply(logger,__spreadArray$2([],__read$2(args),false));};}// Using self local variable for minification purposes as 'this' cannot be minified
var self=this;// DiagAPI specific functions
var setLogger=function(logger,optionsOrLogLevel){var _a,_b,_c;if(optionsOrLogLevel===void 0){optionsOrLogLevel={logLevel:DiagLogLevel.INFO};}if(logger===self){// There isn't much we can do here.
// Logging to the console might break the user application.
// Try to log to self. If a logger was previously registered it will receive the log.
var err=new Error('Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation');self.error((_a=err.stack)!==null&&_a!==void 0?_a:err.message);return false;}if(typeof optionsOrLogLevel==='number'){optionsOrLogLevel={logLevel:optionsOrLogLevel};}var oldLogger=getGlobal('diag');var newLogger=createLogLevelDiagLogger((_b=optionsOrLogLevel.logLevel)!==null&&_b!==void 0?_b:DiagLogLevel.INFO,logger);// There already is an logger registered. We'll let it know before overwriting it.
if(oldLogger&&!optionsOrLogLevel.suppressOverrideMessage){var stack=(_c=new Error().stack)!==null&&_c!==void 0?_c:'<failed to generate stacktrace>';oldLogger.warn("Current logger will be overwritten from "+stack);newLogger.warn("Current logger will overwrite one already registered from "+stack);}return registerGlobal('diag',newLogger,self,true);};self.setLogger=setLogger;self.disable=function(){unregisterGlobal(API_NAME$2,self);};self.createComponentLogger=function(options){return new DiagComponentLogger(options);};self.verbose=_logProxy('verbose');self.debug=_logProxy('debug');self.info=_logProxy('info');self.warn=_logProxy('warn');self.error=_logProxy('error');}/** Get the singleton instance of the DiagAPI API */DiagAPI.instance=function(){if(!this._instance){this._instance=new DiagAPI();}return this._instance;};return DiagAPI;}();/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//** Get a key to uniquely identify a context value */function createContextKey(description){// The specification states that for the same input, multiple calls should
// return different keys. Due to the nature of the JS dependency management
// system, this creates problems where multiple versions of some package
// could hold different keys for the same property.
//
// Therefore, we use Symbol.for which returns the same key for the same input.
return Symbol.for(description);}var BaseContext=/** @class */function(){/**
     * Construct a new context which inherits values from an optional parent context.
     *
     * @param parentContext a context from which to inherit values
     */function BaseContext(parentContext){// for minification
var self=this;self._currentContext=parentContext?new Map(parentContext):new Map();self.getValue=function(key){return self._currentContext.get(key);};self.setValue=function(key,value){var context=new BaseContext(self._currentContext);context._currentContext.set(key,value);return context;};self.deleteValue=function(key){var context=new BaseContext(self._currentContext);context._currentContext.delete(key);return context;};}return BaseContext;}();/** The root context is used as the default parent context when there is no active context */var ROOT_CONTEXT=new BaseContext();/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __read$1=window&&window.__read||function(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-->0)&&!(r=i.next()).done)ar.push(r.value);}catch(error){e={error:error};}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i);}finally{if(e)throw e.error;}}return ar;};var __spreadArray$1=window&&window.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i];}}return to.concat(ar||Array.prototype.slice.call(from));};var NoopContextManager=/** @class */function(){function NoopContextManager(){}NoopContextManager.prototype.active=function(){return ROOT_CONTEXT;};NoopContextManager.prototype.with=function(_context,fn,thisArg){var args=[];for(var _i=3;_i<arguments.length;_i++){args[_i-3]=arguments[_i];}return fn.call.apply(fn,__spreadArray$1([thisArg],__read$1(args),false));};NoopContextManager.prototype.bind=function(_context,target){return target;};NoopContextManager.prototype.enable=function(){return this;};NoopContextManager.prototype.disable=function(){return this;};return NoopContextManager;}();/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __read=window&&window.__read||function(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-->0)&&!(r=i.next()).done)ar.push(r.value);}catch(error){e={error:error};}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i);}finally{if(e)throw e.error;}}return ar;};var __spreadArray=window&&window.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i];}}return to.concat(ar||Array.prototype.slice.call(from));};var API_NAME$1='context';var NOOP_CONTEXT_MANAGER=new NoopContextManager();/**
 * Singleton object which represents the entry point to the OpenTelemetry Context API
 */var ContextAPI=/** @class */function(){/** Empty private constructor prevents end users from constructing a new instance of the API */function ContextAPI(){}/** Get the singleton instance of the Context API */ContextAPI.getInstance=function(){if(!this._instance){this._instance=new ContextAPI();}return this._instance;};/**
     * Set the current context manager.
     *
     * @returns true if the context manager was successfully registered, else false
     */ContextAPI.prototype.setGlobalContextManager=function(contextManager){return registerGlobal(API_NAME$1,contextManager,DiagAPI.instance());};/**
     * Get the currently active context
     */ContextAPI.prototype.active=function(){return this._getContextManager().active();};/**
     * Execute a function with an active context
     *
     * @param context context to be active during function execution
     * @param fn function to execute in a context
     * @param thisArg optional receiver to be used for calling fn
     * @param args optional arguments forwarded to fn
     */ContextAPI.prototype.with=function(context,fn,thisArg){var _a;var args=[];for(var _i=3;_i<arguments.length;_i++){args[_i-3]=arguments[_i];}return(_a=this._getContextManager()).with.apply(_a,__spreadArray([context,fn,thisArg],__read(args),false));};/**
     * Bind a context to a target function or event emitter
     *
     * @param context context to bind to the event emitter or function. Defaults to the currently active context
     * @param target function or event emitter to bind
     */ContextAPI.prototype.bind=function(context,target){return this._getContextManager().bind(context,target);};ContextAPI.prototype._getContextManager=function(){return getGlobal(API_NAME$1)||NOOP_CONTEXT_MANAGER;};/** Disable and remove the global context manager */ContextAPI.prototype.disable=function(){this._getContextManager().disable();unregisterGlobal(API_NAME$1,DiagAPI.instance());};return ContextAPI;}();/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TraceFlags;(function(TraceFlags){/** Represents no flag set. */TraceFlags[TraceFlags["NONE"]=0]="NONE";/** Bit to represent whether trace is sampled in trace flags. */TraceFlags[TraceFlags["SAMPLED"]=1]="SAMPLED";})(TraceFlags||(TraceFlags={}));/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var INVALID_SPANID='0000000000000000';var INVALID_TRACEID='00000000000000000000000000000000';var INVALID_SPAN_CONTEXT={traceId:INVALID_TRACEID,spanId:INVALID_SPANID,traceFlags:TraceFlags.NONE};/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * The NonRecordingSpan is the default {@link Span} that is used when no Span
 * implementation is available. All operations are no-op including context
 * propagation.
 */var NonRecordingSpan=/** @class */function(){function NonRecordingSpan(_spanContext){if(_spanContext===void 0){_spanContext=INVALID_SPAN_CONTEXT;}this._spanContext=_spanContext;}// Returns a SpanContext.
NonRecordingSpan.prototype.spanContext=function(){return this._spanContext;};// By default does nothing
NonRecordingSpan.prototype.setAttribute=function(_key,_value){return this;};// By default does nothing
NonRecordingSpan.prototype.setAttributes=function(_attributes){return this;};// By default does nothing
NonRecordingSpan.prototype.addEvent=function(_name,_attributes){return this;};NonRecordingSpan.prototype.addLink=function(_link){return this;};NonRecordingSpan.prototype.addLinks=function(_links){return this;};// By default does nothing
NonRecordingSpan.prototype.setStatus=function(_status){return this;};// By default does nothing
NonRecordingSpan.prototype.updateName=function(_name){return this;};// By default does nothing
NonRecordingSpan.prototype.end=function(_endTime){};// isRecording always returns false for NonRecordingSpan.
NonRecordingSpan.prototype.isRecording=function(){return false;};// By default does nothing
NonRecordingSpan.prototype.recordException=function(_exception,_time){};return NonRecordingSpan;}();/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * span key
 */var SPAN_KEY=createContextKey('OpenTelemetry Context Key SPAN');/**
 * Return the span if one exists
 *
 * @param context context to get span from
 */function getSpan(context){return context.getValue(SPAN_KEY)||undefined;}/**
 * Gets the span from the current context, if one exists.
 */function getActiveSpan(){return getSpan(ContextAPI.getInstance().active());}/**
 * Set the span on a context
 *
 * @param context context to use as parent
 * @param span span to set active
 */function setSpan(context,span){return context.setValue(SPAN_KEY,span);}/**
 * Remove current span stored in the context
 *
 * @param context context to delete span from
 */function deleteSpan(context){return context.deleteValue(SPAN_KEY);}/**
 * Wrap span context in a NoopSpan and set as span in a new
 * context
 *
 * @param context context to set active span on
 * @param spanContext span context to be wrapped
 */function setSpanContext(context,spanContext){return setSpan(context,new NonRecordingSpan(spanContext));}/**
 * Get the span context of the span if it exists.
 *
 * @param context context to get values from
 */function getSpanContext(context){var _a;return(_a=getSpan(context))===null||_a===void 0?void 0:_a.spanContext();}/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VALID_TRACEID_REGEX=/^([0-9a-f]{32})$/i;var VALID_SPANID_REGEX=/^[0-9a-f]{16}$/i;function isValidTraceId(traceId){return VALID_TRACEID_REGEX.test(traceId)&&traceId!==INVALID_TRACEID;}function isValidSpanId(spanId){return VALID_SPANID_REGEX.test(spanId)&&spanId!==INVALID_SPANID;}/**
 * Returns true if this {@link SpanContext} is valid.
 * @return true if this {@link SpanContext} is valid.
 */function isSpanContextValid(spanContext){return isValidTraceId(spanContext.traceId)&&isValidSpanId(spanContext.spanId);}/**
 * Wrap the given {@link SpanContext} in a new non-recording {@link Span}
 *
 * @param spanContext span context to be wrapped
 * @returns a new non-recording {@link Span} with the provided context
 */function wrapSpanContext(spanContext){return new NonRecordingSpan(spanContext);}/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var contextApi=ContextAPI.getInstance();/**
 * No-op implementations of {@link Tracer}.
 */var NoopTracer=/** @class */function(){function NoopTracer(){}// startSpan starts a noop span.
NoopTracer.prototype.startSpan=function(name,options,context){if(context===void 0){context=contextApi.active();}var root=Boolean(options===null||options===void 0?void 0:options.root);if(root){return new NonRecordingSpan();}var parentFromContext=context&&getSpanContext(context);if(isSpanContext(parentFromContext)&&isSpanContextValid(parentFromContext)){return new NonRecordingSpan(parentFromContext);}else{return new NonRecordingSpan();}};NoopTracer.prototype.startActiveSpan=function(name,arg2,arg3,arg4){var opts;var ctx;var fn;if(arguments.length<2){return;}else if(arguments.length===2){fn=arg2;}else if(arguments.length===3){opts=arg2;fn=arg3;}else{opts=arg2;ctx=arg3;fn=arg4;}var parentContext=ctx!==null&&ctx!==void 0?ctx:contextApi.active();var span=this.startSpan(name,opts,parentContext);var contextWithSpanSet=setSpan(parentContext,span);return contextApi.with(contextWithSpanSet,fn,undefined,span);};return NoopTracer;}();function isSpanContext(spanContext){return typeof spanContext==='object'&&typeof spanContext['spanId']==='string'&&typeof spanContext['traceId']==='string'&&typeof spanContext['traceFlags']==='number';}/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NOOP_TRACER=new NoopTracer();/**
 * Proxy tracer provided by the proxy tracer provider
 */var ProxyTracer=/** @class */function(){function ProxyTracer(_provider,name,version,options){this._provider=_provider;this.name=name;this.version=version;this.options=options;}ProxyTracer.prototype.startSpan=function(name,options,context){return this._getTracer().startSpan(name,options,context);};ProxyTracer.prototype.startActiveSpan=function(_name,_options,_context,_fn){var tracer=this._getTracer();return Reflect.apply(tracer.startActiveSpan,tracer,arguments);};/**
     * Try to get a tracer from the proxy tracer provider.
     * If the proxy tracer provider has no delegate, return a noop tracer.
     */ProxyTracer.prototype._getTracer=function(){if(this._delegate){return this._delegate;}var tracer=this._provider.getDelegateTracer(this.name,this.version,this.options);if(!tracer){return NOOP_TRACER;}this._delegate=tracer;return this._delegate;};return ProxyTracer;}();/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * An implementation of the {@link TracerProvider} which returns an impotent
 * Tracer for all calls to `getTracer`.
 *
 * All operations are no-op.
 */var NoopTracerProvider=/** @class */function(){function NoopTracerProvider(){}NoopTracerProvider.prototype.getTracer=function(_name,_version,_options){return new NoopTracer();};return NoopTracerProvider;}();/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NOOP_TRACER_PROVIDER=new NoopTracerProvider();/**
 * Tracer provider which provides {@link ProxyTracer}s.
 *
 * Before a delegate is set, tracers provided are NoOp.
 *   When a delegate is set, traces are provided from the delegate.
 *   When a delegate is set after tracers have already been provided,
 *   all tracers already provided will use the provided delegate implementation.
 */var ProxyTracerProvider=/** @class */function(){function ProxyTracerProvider(){}/**
     * Get a {@link ProxyTracer}
     */ProxyTracerProvider.prototype.getTracer=function(name,version,options){var _a;return(_a=this.getDelegateTracer(name,version,options))!==null&&_a!==void 0?_a:new ProxyTracer(this,name,version,options);};ProxyTracerProvider.prototype.getDelegate=function(){var _a;return(_a=this._delegate)!==null&&_a!==void 0?_a:NOOP_TRACER_PROVIDER;};/**
     * Set the delegate tracer provider
     */ProxyTracerProvider.prototype.setDelegate=function(delegate){this._delegate=delegate;};ProxyTracerProvider.prototype.getDelegateTracer=function(name,version,options){var _a;return(_a=this._delegate)===null||_a===void 0?void 0:_a.getTracer(name,version,options);};return ProxyTracerProvider;}();/**
 * An enumeration of status codes.
 */var SpanStatusCode;(function(SpanStatusCode){/**
     * The default status.
     */SpanStatusCode[SpanStatusCode["UNSET"]=0]="UNSET";/**
     * The operation has been validated by an Application developer or
     * Operator to have completed successfully.
     */SpanStatusCode[SpanStatusCode["OK"]=1]="OK";/**
     * The operation contains an error.
     */SpanStatusCode[SpanStatusCode["ERROR"]=2]="ERROR";})(SpanStatusCode||(SpanStatusCode={}));/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var API_NAME='trace';/**
 * Singleton object which represents the entry point to the OpenTelemetry Tracing API
 */var TraceAPI=/** @class */function(){/** Empty private constructor prevents end users from constructing a new instance of the API */function TraceAPI(){this._proxyTracerProvider=new ProxyTracerProvider();this.wrapSpanContext=wrapSpanContext;this.isSpanContextValid=isSpanContextValid;this.deleteSpan=deleteSpan;this.getSpan=getSpan;this.getActiveSpan=getActiveSpan;this.getSpanContext=getSpanContext;this.setSpan=setSpan;this.setSpanContext=setSpanContext;}/** Get the singleton instance of the Trace API */TraceAPI.getInstance=function(){if(!this._instance){this._instance=new TraceAPI();}return this._instance;};/**
     * Set the current global tracer.
     *
     * @returns true if the tracer provider was successfully registered, else false
     */TraceAPI.prototype.setGlobalTracerProvider=function(provider){var success=registerGlobal(API_NAME,this._proxyTracerProvider,DiagAPI.instance());if(success){this._proxyTracerProvider.setDelegate(provider);}return success;};/**
     * Returns the global tracer provider.
     */TraceAPI.prototype.getTracerProvider=function(){return getGlobal(API_NAME)||this._proxyTracerProvider;};/**
     * Returns a tracer from the global tracer provider.
     */TraceAPI.prototype.getTracer=function(name,version){return this.getTracerProvider().getTracer(name,version);};/** Remove the global tracer provider */TraceAPI.prototype.disable=function(){unregisterGlobal(API_NAME,DiagAPI.instance());this._proxyTracerProvider=new ProxyTracerProvider();};return TraceAPI;}();/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */// Split module-level variable definition into separate files to allow
// tree-shaking on each api instance.
/** Entrypoint for trace API */var trace=TraceAPI.getInstance();var __defProp=Object.defineProperty;var __export=(target,all)=>{for(var name17 in all)__defProp(target,name17,{get:all[name17],enumerable:true});};var name="AI_NoOutputSpecifiedError";var marker="vercel.ai.error.".concat(name);var symbol=Symbol.for(marker);var _a;var NoOutputSpecifiedError=class extends AISDKError{// used in isInstance
constructor(){let{message="No output specified."}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({name,message});this[_a]=true;}static isInstance(error){return AISDKError.hasMarker(error,marker);}};_a=symbol;// src/logger/log-warnings.ts
function formatWarning(warning){const prefix="AI SDK Warning:";switch(warning.type){case"unsupported-setting":{let message="".concat(prefix," The \"").concat(warning.setting,"\" setting is not supported by this model");if(warning.details){message+=" - ".concat(warning.details);}return message;}case"unsupported-tool":{const toolName="name"in warning.tool?warning.tool.name:"unknown tool";let message="".concat(prefix," The tool \"").concat(toolName,"\" is not supported by this model");if(warning.details){message+=" - ".concat(warning.details);}return message;}case"other":{return"".concat(prefix," ").concat(warning.message);}default:{return"".concat(prefix," ").concat(JSON.stringify(warning,null,2));}}}var FIRST_WARNING_INFO_MESSAGE="AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.";var hasLoggedBefore=false;var logWarnings=warnings=>{if(warnings.length===0){return;}const logger=globalThis.AI_SDK_LOG_WARNINGS;if(logger===false){return;}if(typeof logger==="function"){logger(warnings);return;}if(!hasLoggedBefore){hasLoggedBefore=true;console.info(FIRST_WARNING_INFO_MESSAGE);}for(const warning of warnings){console.warn(formatWarning(warning));}};var name2="AI_InvalidArgumentError";var marker2="vercel.ai.error.".concat(name2);var symbol2=Symbol.for(marker2);var _a2;var InvalidArgumentError=class extends AISDKError{constructor(_ref122){let{parameter,value,message}=_ref122;super({name:name2,message:"Invalid argument for parameter ".concat(parameter,": ").concat(message)});this[_a2]=true;this.parameter=parameter;this.value=value;}static isInstance(error){return AISDKError.hasMarker(error,marker2);}};_a2=symbol2;var name4="AI_InvalidToolInputError";var marker4="vercel.ai.error.".concat(name4);var symbol4=Symbol.for(marker4);var _a4;var InvalidToolInputError=class extends AISDKError{constructor(_ref123){let{toolInput,toolName,cause,message="Invalid input for tool ".concat(toolName,": ").concat(getErrorMessage$1(cause))}=_ref123;super({name:name4,message,cause});this[_a4]=true;this.toolInput=toolInput;this.toolName=toolName;}static isInstance(error){return AISDKError.hasMarker(error,marker4);}};_a4=symbol4;var name7="AI_NoObjectGeneratedError";var marker7="vercel.ai.error.".concat(name7);var symbol7=Symbol.for(marker7);var _a7;var NoObjectGeneratedError=class extends AISDKError{constructor(_ref124){let{message="No object generated.",cause,text:text2,response,usage,finishReason}=_ref124;super({name:name7,message,cause});this[_a7]=true;this.text=text2;this.response=response;this.usage=usage;this.finishReason=finishReason;}static isInstance(error){return AISDKError.hasMarker(error,marker7);}};_a7=symbol7;var name8="AI_NoOutputGeneratedError";var marker8="vercel.ai.error.".concat(name8);var symbol8=Symbol.for(marker8);var _a8;var NoOutputGeneratedError=class extends AISDKError{// used in isInstance
constructor(){let{message="No output generated.",cause}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({name:name8,message,cause});this[_a8]=true;}static isInstance(error){return AISDKError.hasMarker(error,marker8);}};_a8=symbol8;var name9="AI_NoSuchToolError";var marker9="vercel.ai.error.".concat(name9);var symbol9=Symbol.for(marker9);var _a9;var NoSuchToolError=class extends AISDKError{constructor(_ref125){let{toolName,availableTools=void 0,message="Model tried to call unavailable tool '".concat(toolName,"'. ").concat(availableTools===void 0?"No tools are available.":"Available tools: ".concat(availableTools.join(", "),"."))}=_ref125;super({name:name9,message});this[_a9]=true;this.toolName=toolName;this.availableTools=availableTools;}static isInstance(error){return AISDKError.hasMarker(error,marker9);}};_a9=symbol9;var name10="AI_ToolCallRepairError";var marker10="vercel.ai.error.".concat(name10);var symbol10=Symbol.for(marker10);var _a10;var ToolCallRepairError=class extends AISDKError{constructor(_ref126){let{cause,originalError,message="Error repairing tool call: ".concat(getErrorMessage$1(cause))}=_ref126;super({name:name10,message,cause});this[_a10]=true;this.originalError=originalError;}static isInstance(error){return AISDKError.hasMarker(error,marker10);}};_a10=symbol10;var UnsupportedModelVersionError=class extends AISDKError{constructor(options){super({name:"AI_UnsupportedModelVersionError",message:"Unsupported model version ".concat(options.version," for provider \"").concat(options.provider,"\" and model \"").concat(options.modelId,"\". AI SDK 5 only supports models that implement specification version \"v2\".")});this.version=options.version;this.provider=options.provider;this.modelId=options.modelId;}};var name12="AI_InvalidMessageRoleError";var marker12="vercel.ai.error.".concat(name12);var symbol12=Symbol.for(marker12);var _a12;var InvalidMessageRoleError=class extends AISDKError{constructor(_ref127){let{role,message="Invalid message role: '".concat(role,"'. Must be one of: \"system\", \"user\", \"assistant\", \"tool\".")}=_ref127;super({name:name12,message});this[_a12]=true;this.role=role;}static isInstance(error){return AISDKError.hasMarker(error,marker12);}};_a12=symbol12;var name14="AI_DownloadError";var marker14="vercel.ai.error.".concat(name14);var symbol14=Symbol.for(marker14);var _a14;var DownloadError=class extends AISDKError{constructor(_ref128){let{url,statusCode,statusText,cause,message=cause==null?"Failed to download ".concat(url,": ").concat(statusCode," ").concat(statusText):"Failed to download ".concat(url,": ").concat(cause)}=_ref128;super({name:name14,message,cause});this[_a14]=true;this.url=url;this.statusCode=statusCode;this.statusText=statusText;}static isInstance(error){return AISDKError.hasMarker(error,marker14);}};_a14=symbol14;var name15="AI_RetryError";var marker15="vercel.ai.error.".concat(name15);var symbol15=Symbol.for(marker15);var _a15;var RetryError=class extends AISDKError{constructor(_ref129){let{message,reason,errors}=_ref129;super({name:name15,message});this[_a15]=true;this.reason=reason;this.errors=errors;this.lastError=errors[errors.length-1];}static isInstance(error){return AISDKError.hasMarker(error,marker15);}};_a15=symbol15;// src/model/resolve-model.ts
function resolveLanguageModel(model){if(typeof model!=="string"){if(model.specificationVersion!=="v2"){throw new UnsupportedModelVersionError({version:model.specificationVersion,provider:model.provider,modelId:model.modelId});}return model;}return getGlobalProvider().languageModel(model);}function resolveEmbeddingModel(model){if(typeof model!=="string"){if(model.specificationVersion!=="v2"){throw new UnsupportedModelVersionError({version:model.specificationVersion,provider:model.provider,modelId:model.modelId});}return model;}return getGlobalProvider().textEmbeddingModel(model);}function getGlobalProvider(){var _a17;return(_a17=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?_a17:gateway;}var imageMediaTypeSignatures=[{mediaType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mediaType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mediaType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mediaType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mediaType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];var stripID3=data=>{const bytes=typeof data==="string"?convertBase64ToUint8Array(data):data;const id3Size=(bytes[6]&127)<<21|(bytes[7]&127)<<14|(bytes[8]&127)<<7|bytes[9]&127;return bytes.slice(id3Size+10);};function stripID3TagsIfPresent(data){const hasId3=typeof data==="string"&&data.startsWith("SUQz")||typeof data!=="string"&&data.length>10&&data[0]===73&&// 'I'
data[1]===68&&// 'D'
data[2]===51;return hasId3?stripID3(data):data;}function detectMediaType(_ref130){let{data,signatures}=_ref130;const processedData=stripID3TagsIfPresent(data);for(const signature of signatures){if(typeof processedData==="string"?processedData.startsWith(signature.base64Prefix):processedData.length>=signature.bytesPrefix.length&&signature.bytesPrefix.every((byte,index)=>processedData[index]===byte)){return signature.mediaType;}}return void 0;}// src/util/download/download.ts
var download=/*#__PURE__*/function(){var _ref131=_asyncToGenerator2(function(_ref132){let{url}=_ref132;return function*(){var _a17;const urlText=url.toString();try{const response=yield fetch(urlText);if(!response.ok){throw new DownloadError({url:urlText,statusCode:response.status,statusText:response.statusText});}return{data:new Uint8Array(yield response.arrayBuffer()),mediaType:(_a17=response.headers.get("content-type"))!=null?_a17:void 0};}catch(error){if(DownloadError.isInstance(error)){throw error;}throw new DownloadError({url:urlText,cause:error});}}();});return function download(_x60){return _ref131.apply(this,arguments);};}();// src/util/download/download-function.ts
var createDefaultDownloadFunction=function(){let download2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:download;return requestedDownloads=>Promise.all(requestedDownloads.map(/*#__PURE__*/function(){var _ref133=_asyncToGenerator2(function*(requestedDownload){return requestedDownload.isUrlSupportedByModel?null:download2(requestedDownload);});return function(_x61){return _ref133.apply(this,arguments);};}()));};// src/prompt/split-data-url.ts
function splitDataUrl(dataUrl){try{const[header,base64Content]=dataUrl.split(",");return{mediaType:header.split(";")[0].split(":")[1],base64Content};}catch(error){return{mediaType:void 0,base64Content:void 0};}}// src/prompt/data-content.ts
var dataContentSchema=union([string$1(),_instanceof(Uint8Array),_instanceof(ArrayBuffer),custom(// Buffer might not be available in some environments such as CloudFlare:
value=>{var _a17,_b;return(_b=(_a17=globalThis.Buffer)==null?void 0:_a17.isBuffer(value))!=null?_b:false;},{message:"Must be a Buffer"})]);function convertToLanguageModelV2DataContent(content){if(content instanceof Uint8Array){return{data:content,mediaType:void 0};}if(content instanceof ArrayBuffer){return{data:new Uint8Array(content),mediaType:void 0};}if(typeof content==="string"){try{content=new URL(content);}catch(error){}}if(content instanceof URL&&content.protocol==="data:"){const{mediaType:dataUrlMediaType,base64Content}=splitDataUrl(content.toString());if(dataUrlMediaType==null||base64Content==null){throw new AISDKError({name:"InvalidDataContentError",message:"Invalid data URL format in content ".concat(content.toString())});}return{data:base64Content,mediaType:dataUrlMediaType};}return{data:content,mediaType:void 0};}function convertDataContentToBase64String(content){if(typeof content==="string"){return content;}if(content instanceof ArrayBuffer){return convertUint8ArrayToBase64(new Uint8Array(content));}return convertUint8ArrayToBase64(content);}// src/prompt/convert-to-language-model-prompt.ts
function convertToLanguageModelPrompt(_x62){return _convertToLanguageModelPrompt.apply(this,arguments);}function _convertToLanguageModelPrompt(){_convertToLanguageModelPrompt=_asyncToGenerator2(function(_ref200){let{prompt,supportedUrls,download:download2=createDefaultDownloadFunction()}=_ref200;return function*(){const downloadedAssets=yield downloadAssets(prompt.messages,download2,supportedUrls);return[...(prompt.system!=null?[{role:"system",content:prompt.system}]:[]),...prompt.messages.map(message=>convertToLanguageModelMessage({message,downloadedAssets}))];}();});return _convertToLanguageModelPrompt.apply(this,arguments);}function convertToLanguageModelMessage(_ref134){let{message,downloadedAssets}=_ref134;const role=message.role;switch(role){case"system":{return{role:"system",content:message.content,providerOptions:message.providerOptions};}case"user":{if(typeof message.content==="string"){return{role:"user",content:[{type:"text",text:message.content}],providerOptions:message.providerOptions};}return{role:"user",content:message.content.map(part=>convertPartToLanguageModelPart(part,downloadedAssets)).filter(part=>part.type!=="text"||part.text!==""),providerOptions:message.providerOptions};}case"assistant":{if(typeof message.content==="string"){return{role:"assistant",content:[{type:"text",text:message.content}],providerOptions:message.providerOptions};}return{role:"assistant",content:message.content.filter(// remove empty text parts:
part=>part.type!=="text"||part.text!=="").map(part=>{const providerOptions=part.providerOptions;switch(part.type){case"file":{const{data,mediaType}=convertToLanguageModelV2DataContent(part.data);return{type:"file",data,filename:part.filename,mediaType:mediaType!=null?mediaType:part.mediaType,providerOptions};}case"reasoning":{return{type:"reasoning",text:part.text,providerOptions};}case"text":{return{type:"text",text:part.text,providerOptions};}case"tool-call":{return{type:"tool-call",toolCallId:part.toolCallId,toolName:part.toolName,input:part.input,providerExecuted:part.providerExecuted,providerOptions};}case"tool-result":{return{type:"tool-result",toolCallId:part.toolCallId,toolName:part.toolName,output:part.output,providerOptions};}}}),providerOptions:message.providerOptions};}case"tool":{return{role:"tool",content:message.content.map(part=>({type:"tool-result",toolCallId:part.toolCallId,toolName:part.toolName,output:part.output,providerOptions:part.providerOptions})),providerOptions:message.providerOptions};}default:{const _exhaustiveCheck=role;throw new InvalidMessageRoleError({role:_exhaustiveCheck});}}}function downloadAssets(_x63,_x64,_x65){return _downloadAssets.apply(this,arguments);}function _downloadAssets(){_downloadAssets=_asyncToGenerator2(function*(messages,download2,supportedUrls){const plannedDownloads=messages.filter(message=>message.role==="user").map(message=>message.content).filter(content=>Array.isArray(content)).flat().filter(part=>part.type==="image"||part.type==="file").map(part=>{var _a17;const mediaType=(_a17=part.mediaType)!=null?_a17:part.type==="image"?"image/*":void 0;let data=part.type==="image"?part.image:part.data;if(typeof data==="string"){try{data=new URL(data);}catch(ignored){}}return{mediaType,data};}).filter(part=>part.data instanceof URL).map(part=>({url:part.data,isUrlSupportedByModel:part.mediaType!=null&&isUrlSupported({url:part.data.toString(),mediaType:part.mediaType,supportedUrls})}));const downloadedFiles=yield download2(plannedDownloads);return Object.fromEntries(downloadedFiles.filter(downloadedFile=>(downloadedFile==null?void 0:downloadedFile.data)!=null).map((_ref201,index)=>{let{data,mediaType}=_ref201;return[plannedDownloads[index].url.toString(),{data,mediaType}];}));});return _downloadAssets.apply(this,arguments);}function convertPartToLanguageModelPart(part,downloadedAssets){var _a17;if(part.type==="text"){return{type:"text",text:part.text,providerOptions:part.providerOptions};}let originalData;const type=part.type;switch(type){case"image":originalData=part.image;break;case"file":originalData=part.data;break;default:throw new Error("Unsupported part type: ".concat(type));}const{data:convertedData,mediaType:convertedMediaType}=convertToLanguageModelV2DataContent(originalData);let mediaType=convertedMediaType!=null?convertedMediaType:part.mediaType;let data=convertedData;if(data instanceof URL){const downloadedFile=downloadedAssets[data.toString()];if(downloadedFile){data=downloadedFile.data;mediaType!=null?mediaType:mediaType=downloadedFile.mediaType;}}switch(type){case"image":{if(data instanceof Uint8Array||typeof data==="string"){mediaType=(_a17=detectMediaType({data,signatures:imageMediaTypeSignatures}))!=null?_a17:mediaType;}return{type:"file",mediaType:mediaType!=null?mediaType:"image/*",// any image
filename:void 0,data,providerOptions:part.providerOptions};}case"file":{if(mediaType==null){throw new Error("Media type is missing for file part");}return{type:"file",mediaType,filename:part.filename,data,providerOptions:part.providerOptions};}}}// src/prompt/prepare-call-settings.ts
function prepareCallSettings(_ref135){let{maxOutputTokens,temperature,topP,topK,presencePenalty,frequencyPenalty,seed,stopSequences}=_ref135;if(maxOutputTokens!=null){if(!Number.isInteger(maxOutputTokens)){throw new InvalidArgumentError({parameter:"maxOutputTokens",value:maxOutputTokens,message:"maxOutputTokens must be an integer"});}if(maxOutputTokens<1){throw new InvalidArgumentError({parameter:"maxOutputTokens",value:maxOutputTokens,message:"maxOutputTokens must be >= 1"});}}if(temperature!=null){if(typeof temperature!=="number"){throw new InvalidArgumentError({parameter:"temperature",value:temperature,message:"temperature must be a number"});}}if(topP!=null){if(typeof topP!=="number"){throw new InvalidArgumentError({parameter:"topP",value:topP,message:"topP must be a number"});}}if(topK!=null){if(typeof topK!=="number"){throw new InvalidArgumentError({parameter:"topK",value:topK,message:"topK must be a number"});}}if(presencePenalty!=null){if(typeof presencePenalty!=="number"){throw new InvalidArgumentError({parameter:"presencePenalty",value:presencePenalty,message:"presencePenalty must be a number"});}}if(frequencyPenalty!=null){if(typeof frequencyPenalty!=="number"){throw new InvalidArgumentError({parameter:"frequencyPenalty",value:frequencyPenalty,message:"frequencyPenalty must be a number"});}}if(seed!=null){if(!Number.isInteger(seed)){throw new InvalidArgumentError({parameter:"seed",value:seed,message:"seed must be an integer"});}}return{maxOutputTokens,temperature,topP,topK,presencePenalty,frequencyPenalty,stopSequences,seed};}// src/util/is-non-empty-object.ts
function isNonEmptyObject(object2){return object2!=null&&Object.keys(object2).length>0;}// src/prompt/prepare-tools-and-tool-choice.ts
function prepareToolsAndToolChoice(_ref136){let{tools,toolChoice,activeTools}=_ref136;if(!isNonEmptyObject(tools)){return{tools:void 0,toolChoice:void 0};}const filteredTools=activeTools!=null?Object.entries(tools).filter(_ref137=>{let[name17]=_ref137;return activeTools.includes(name17);}):Object.entries(tools);return{tools:filteredTools.map(_ref138=>{let[name17,tool3]=_ref138;const toolType=tool3.type;switch(toolType){case void 0:case"dynamic":case"function":return{type:"function",name:name17,description:tool3.description,inputSchema:asSchema(tool3.inputSchema).jsonSchema,providerOptions:tool3.providerOptions};case"provider-defined":return{type:"provider-defined",name:name17,id:tool3.id,args:tool3.args};default:{const exhaustiveCheck=toolType;throw new Error("Unsupported tool type: ".concat(exhaustiveCheck));}}}),toolChoice:toolChoice==null?{type:"auto"}:typeof toolChoice==="string"?{type:toolChoice}:{type:"tool",toolName:toolChoice.toolName}};}var jsonValueSchema=lazy(()=>union([_null(),string$1(),number$1(),boolean$1(),record(string$1(),jsonValueSchema),array(jsonValueSchema)]));// src/types/provider-metadata.ts
var providerMetadataSchema=record(string$1(),record(string$1(),jsonValueSchema));var textPartSchema=object$1({type:literal("text"),text:string$1(),providerOptions:providerMetadataSchema.optional()});var imagePartSchema=object$1({type:literal("image"),image:union([dataContentSchema,_instanceof(URL)]),mediaType:string$1().optional(),providerOptions:providerMetadataSchema.optional()});var filePartSchema=object$1({type:literal("file"),data:union([dataContentSchema,_instanceof(URL)]),filename:string$1().optional(),mediaType:string$1(),providerOptions:providerMetadataSchema.optional()});var reasoningPartSchema=object$1({type:literal("reasoning"),text:string$1(),providerOptions:providerMetadataSchema.optional()});var toolCallPartSchema=object$1({type:literal("tool-call"),toolCallId:string$1(),toolName:string$1(),input:unknown(),providerOptions:providerMetadataSchema.optional(),providerExecuted:boolean$1().optional()});var outputSchema=discriminatedUnion("type",[object$1({type:literal("text"),value:string$1()}),object$1({type:literal("json"),value:jsonValueSchema}),object$1({type:literal("error-text"),value:string$1()}),object$1({type:literal("error-json"),value:jsonValueSchema}),object$1({type:literal("content"),value:array(union([object$1({type:literal("text"),text:string$1()}),object$1({type:literal("media"),data:string$1(),mediaType:string$1()})]))})]);var toolResultPartSchema=object$1({type:literal("tool-result"),toolCallId:string$1(),toolName:string$1(),output:outputSchema,providerOptions:providerMetadataSchema.optional()});// src/prompt/message.ts
var systemModelMessageSchema=object$1({role:literal("system"),content:string$1(),providerOptions:providerMetadataSchema.optional()});var userModelMessageSchema=object$1({role:literal("user"),content:union([string$1(),array(union([textPartSchema,imagePartSchema,filePartSchema]))]),providerOptions:providerMetadataSchema.optional()});var assistantModelMessageSchema=object$1({role:literal("assistant"),content:union([string$1(),array(union([textPartSchema,filePartSchema,reasoningPartSchema,toolCallPartSchema,toolResultPartSchema]))]),providerOptions:providerMetadataSchema.optional()});var toolModelMessageSchema=object$1({role:literal("tool"),content:array(toolResultPartSchema),providerOptions:providerMetadataSchema.optional()});var modelMessageSchema=union([systemModelMessageSchema,userModelMessageSchema,assistantModelMessageSchema,toolModelMessageSchema]);// src/prompt/standardize-prompt.ts
function standardizePrompt(_x66){return _standardizePrompt.apply(this,arguments);}function _standardizePrompt(){_standardizePrompt=_asyncToGenerator2(function*(prompt){if(prompt.prompt==null&&prompt.messages==null){throw new InvalidPromptError({prompt,message:"prompt or messages must be defined"});}if(prompt.prompt!=null&&prompt.messages!=null){throw new InvalidPromptError({prompt,message:"prompt and messages cannot be defined at the same time"});}if(prompt.system!=null&&typeof prompt.system!=="string"){throw new InvalidPromptError({prompt,message:"system must be a string"});}let messages;if(prompt.prompt!=null&&typeof prompt.prompt==="string"){messages=[{role:"user",content:prompt.prompt}];}else if(prompt.prompt!=null&&Array.isArray(prompt.prompt)){messages=prompt.prompt;}else if(prompt.messages!=null){messages=prompt.messages;}else{throw new InvalidPromptError({prompt,message:"prompt or messages must be defined"});}if(messages.length===0){throw new InvalidPromptError({prompt,message:"messages must not be empty"});}const validationResult=yield safeValidateTypes({value:messages,schema:array(modelMessageSchema)});if(!validationResult.success){throw new InvalidPromptError({prompt,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:validationResult.error});}return{messages,system:prompt.system};});return _standardizePrompt.apply(this,arguments);}function wrapGatewayError(error){if(GatewayAuthenticationError.isInstance(error)||GatewayModelNotFoundError.isInstance(error)){return new AISDKError({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:error});}return error;}// src/telemetry/assemble-operation-name.ts
function assembleOperationName(_ref139){let{operationId,telemetry}=_ref139;return{// standardized operation and resource name:
"operation.name":"".concat(operationId).concat((telemetry==null?void 0:telemetry.functionId)!=null?" ".concat(telemetry.functionId):""),"resource.name":telemetry==null?void 0:telemetry.functionId,// detailed, AI SDK specific data:
"ai.operationId":operationId,"ai.telemetry.functionId":telemetry==null?void 0:telemetry.functionId};}// src/telemetry/get-base-telemetry-attributes.ts
function getBaseTelemetryAttributes(_ref140){let{model,settings,telemetry,headers}=_ref140;var _a17;return _objectSpread2(_objectSpread2(_objectSpread2({"ai.model.provider":model.provider,"ai.model.id":model.modelId},Object.entries(settings).reduce((attributes,_ref141)=>{let[key,value]=_ref141;attributes["ai.settings.".concat(key)]=value;return attributes;},{})),Object.entries((_a17=telemetry==null?void 0:telemetry.metadata)!=null?_a17:{}).reduce((attributes,_ref142)=>{let[key,value]=_ref142;attributes["ai.telemetry.metadata.".concat(key)]=value;return attributes;},{})),Object.entries(headers!=null?headers:{}).reduce((attributes,_ref143)=>{let[key,value]=_ref143;if(value!==void 0){attributes["ai.request.headers.".concat(key)]=value;}return attributes;},{}));}// src/telemetry/noop-tracer.ts
var noopTracer={startSpan(){return noopSpan;},startActiveSpan(name17,arg1,arg2,arg3){if(typeof arg1==="function"){return arg1(noopSpan);}if(typeof arg2==="function"){return arg2(noopSpan);}if(typeof arg3==="function"){return arg3(noopSpan);}}};var noopSpan={spanContext(){return noopSpanContext;},setAttribute(){return this;},setAttributes(){return this;},addEvent(){return this;},addLink(){return this;},addLinks(){return this;},setStatus(){return this;},updateName(){return this;},end(){return this;},isRecording(){return false;},recordException(){return this;}};var noopSpanContext={traceId:"",spanId:"",traceFlags:0};// src/telemetry/get-tracer.ts
function getTracer(){let{isEnabled=false,tracer}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!isEnabled){return noopTracer;}if(tracer){return tracer;}return trace.getTracer("ai");}function recordSpan(_ref144){let{name:name17,tracer,attributes,fn,endWhenDone=true}=_ref144;return tracer.startActiveSpan(name17,{attributes},/*#__PURE__*/function(){var _ref145=_asyncToGenerator2(function*(span){try{const result=yield fn(span);if(endWhenDone){span.end();}return result;}catch(error){try{recordErrorOnSpan(span,error);}finally{span.end();}throw error;}});return function(_x67){return _ref145.apply(this,arguments);};}());}function recordErrorOnSpan(span,error){if(error instanceof Error){span.recordException({name:error.name,message:error.message,stack:error.stack});span.setStatus({code:SpanStatusCode.ERROR,message:error.message});}else{span.setStatus({code:SpanStatusCode.ERROR});}}// src/telemetry/select-telemetry-attributes.ts
function selectTelemetryAttributes(_ref146){let{telemetry,attributes}=_ref146;if((telemetry==null?void 0:telemetry.isEnabled)!==true){return{};}return Object.entries(attributes).reduce((attributes2,_ref147)=>{let[key,value]=_ref147;if(value==null){return attributes2;}if(typeof value==="object"&&"input"in value&&typeof value.input==="function"){if((telemetry==null?void 0:telemetry.recordInputs)===false){return attributes2;}const result=value.input();return result==null?attributes2:_objectSpread2(_objectSpread2({},attributes2),{},{[key]:result});}if(typeof value==="object"&&"output"in value&&typeof value.output==="function"){if((telemetry==null?void 0:telemetry.recordOutputs)===false){return attributes2;}const result=value.output();return result==null?attributes2:_objectSpread2(_objectSpread2({},attributes2),{},{[key]:result});}return _objectSpread2(_objectSpread2({},attributes2),{},{[key]:value});},{});}// src/telemetry/stringify-for-telemetry.ts
function stringifyForTelemetry(prompt){return JSON.stringify(prompt.map(message=>_objectSpread2(_objectSpread2({},message),{},{content:typeof message.content==="string"?message.content:message.content.map(part=>part.type==="file"?_objectSpread2(_objectSpread2({},part),{},{data:part.data instanceof Uint8Array?convertDataContentToBase64String(part.data):part.data}):part)})));}// src/types/usage.ts
function addLanguageModelUsage(usage1,usage2){return{inputTokens:addTokenCounts(usage1.inputTokens,usage2.inputTokens),outputTokens:addTokenCounts(usage1.outputTokens,usage2.outputTokens),totalTokens:addTokenCounts(usage1.totalTokens,usage2.totalTokens),reasoningTokens:addTokenCounts(usage1.reasoningTokens,usage2.reasoningTokens),cachedInputTokens:addTokenCounts(usage1.cachedInputTokens,usage2.cachedInputTokens)};}function addTokenCounts(tokenCount1,tokenCount2){return tokenCount1==null&&tokenCount2==null?void 0:(tokenCount1!=null?tokenCount1:0)+(tokenCount2!=null?tokenCount2:0);}// src/util/as-array.ts
function asArray(value){return value===void 0?[]:Array.isArray(value)?value:[value];}function getRetryDelayInMs(_ref148){let{error,exponentialBackoffDelay}=_ref148;const headers=error.responseHeaders;if(!headers)return exponentialBackoffDelay;let ms;const retryAfterMs=headers["retry-after-ms"];if(retryAfterMs){const timeoutMs=parseFloat(retryAfterMs);if(!Number.isNaN(timeoutMs)){ms=timeoutMs;}}const retryAfter=headers["retry-after"];if(retryAfter&&ms===void 0){const timeoutSeconds=parseFloat(retryAfter);if(!Number.isNaN(timeoutSeconds)){ms=timeoutSeconds*1e3;}else{ms=Date.parse(retryAfter)-Date.now();}}if(ms!=null&&!Number.isNaN(ms)&&0<=ms&&(ms<60*1e3||ms<exponentialBackoffDelay)){return ms;}return exponentialBackoffDelay;}var retryWithExponentialBackoffRespectingRetryHeaders=function(){let{maxRetries=2,initialDelayInMs=2e3,backoffFactor=2,abortSignal}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return/*#__PURE__*/function(){var _ref149=_asyncToGenerator2(function*(f){return _retryWithExponentialBackoff(f,{maxRetries,delayInMs:initialDelayInMs,backoffFactor,abortSignal});});return function(_x68){return _ref149.apply(this,arguments);};}();};function _retryWithExponentialBackoff(_x69,_x70){return _retryWithExponentialBackoff2.apply(this,arguments);}// src/util/prepare-retries.ts
function _retryWithExponentialBackoff2(){_retryWithExponentialBackoff2=_asyncToGenerator2(function(f,_ref202){let{maxRetries,delayInMs,backoffFactor,abortSignal}=_ref202;let errors=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];return function*(){try{return yield f();}catch(error){if(isAbortError(error)){throw error;}if(maxRetries===0){throw error;}const errorMessage=getErrorMessage(error);const newErrors=[...errors,error];const tryNumber=newErrors.length;if(tryNumber>maxRetries){throw new RetryError({message:"Failed after ".concat(tryNumber," attempts. Last error: ").concat(errorMessage),reason:"maxRetriesExceeded",errors:newErrors});}if(error instanceof Error&&APICallError.isInstance(error)&&error.isRetryable===true&&tryNumber<=maxRetries){yield delay(getRetryDelayInMs({error,exponentialBackoffDelay:delayInMs}),{abortSignal});return _retryWithExponentialBackoff(f,{maxRetries,delayInMs:backoffFactor*delayInMs,backoffFactor,abortSignal},newErrors);}if(tryNumber===1){throw error;}throw new RetryError({message:"Failed after ".concat(tryNumber," attempts with non-retryable error: '").concat(errorMessage,"'"),reason:"errorNotRetryable",errors:newErrors});}}();});return _retryWithExponentialBackoff2.apply(this,arguments);}function prepareRetries(_ref150){let{maxRetries,abortSignal}=_ref150;if(maxRetries!=null){if(!Number.isInteger(maxRetries)){throw new InvalidArgumentError({parameter:"maxRetries",value:maxRetries,message:"maxRetries must be an integer"});}if(maxRetries<0){throw new InvalidArgumentError({parameter:"maxRetries",value:maxRetries,message:"maxRetries must be >= 0"});}}const maxRetriesResult=maxRetries!=null?maxRetries:2;return{maxRetries:maxRetriesResult,retry:retryWithExponentialBackoffRespectingRetryHeaders({maxRetries:maxRetriesResult,abortSignal})};}// src/generate-text/extract-text-content.ts
function extractTextContent(content){const parts=content.filter(content2=>content2.type==="text");if(parts.length===0){return void 0;}return parts.map(content2=>content2.text).join("");}var DefaultGeneratedFile=class{constructor(_ref151){let{data,mediaType}=_ref151;const isUint8Array=data instanceof Uint8Array;this.base64Data=isUint8Array?void 0:data;this.uint8ArrayData=isUint8Array?data:void 0;this.mediaType=mediaType;}// lazy conversion with caching to avoid unnecessary conversion overhead:
get base64(){if(this.base64Data==null){this.base64Data=convertUint8ArrayToBase64(this.uint8ArrayData);}return this.base64Data;}// lazy conversion with caching to avoid unnecessary conversion overhead:
get uint8Array(){if(this.uint8ArrayData==null){this.uint8ArrayData=convertBase64ToUint8Array(this.base64Data);}return this.uint8ArrayData;}};var DefaultGeneratedFileWithType=class extends DefaultGeneratedFile{constructor(options){super(options);this.type="file";}};function parseToolCall(_x71){return _parseToolCall.apply(this,arguments);}function _parseToolCall(){_parseToolCall=_asyncToGenerator2(function(_ref203){let{toolCall,tools,repairToolCall,system,messages}=_ref203;return function*(){try{if(tools==null){throw new NoSuchToolError({toolName:toolCall.toolName});}try{return yield doParseToolCall({toolCall,tools});}catch(error){if(repairToolCall==null||!(NoSuchToolError.isInstance(error)||InvalidToolInputError.isInstance(error))){throw error;}let repairedToolCall=null;try{repairedToolCall=yield repairToolCall({toolCall,tools,inputSchema:_ref204=>{let{toolName}=_ref204;const{inputSchema}=tools[toolName];return asSchema(inputSchema).jsonSchema;},system,messages,error});}catch(repairError){throw new ToolCallRepairError({cause:repairError,originalError:error});}if(repairedToolCall==null){throw error;}return yield doParseToolCall({toolCall:repairedToolCall,tools});}}catch(error){const parsedInput=yield safeParseJSON({text:toolCall.input});const input=parsedInput.success?parsedInput.value:toolCall.input;return{type:"tool-call",toolCallId:toolCall.toolCallId,toolName:toolCall.toolName,input,dynamic:true,invalid:true,error};}}();});return _parseToolCall.apply(this,arguments);}function doParseToolCall(_x72){return _doParseToolCall.apply(this,arguments);}// src/generate-text/step-result.ts
function _doParseToolCall(){_doParseToolCall=_asyncToGenerator2(function(_ref205){let{toolCall,tools}=_ref205;return function*(){const toolName=toolCall.toolName;const tool3=tools[toolName];if(tool3==null){throw new NoSuchToolError({toolName:toolCall.toolName,availableTools:Object.keys(tools)});}const schema=asSchema(tool3.inputSchema);const parseResult=toolCall.input.trim()===""?yield safeValidateTypes({value:{},schema}):yield safeParseJSON({text:toolCall.input,schema});if(parseResult.success===false){throw new InvalidToolInputError({toolName,toolInput:toolCall.input,cause:parseResult.error});}return tool3.type==="dynamic"?{type:"tool-call",toolCallId:toolCall.toolCallId,toolName:toolCall.toolName,input:parseResult.value,providerExecuted:toolCall.providerExecuted,providerMetadata:toolCall.providerMetadata,dynamic:true}:{type:"tool-call",toolCallId:toolCall.toolCallId,toolName,input:parseResult.value,providerExecuted:toolCall.providerExecuted,providerMetadata:toolCall.providerMetadata};}();});return _doParseToolCall.apply(this,arguments);}var DefaultStepResult=class{constructor(_ref152){let{content,finishReason,usage,warnings,request,response,providerMetadata}=_ref152;this.content=content;this.finishReason=finishReason;this.usage=usage;this.warnings=warnings;this.request=request;this.response=response;this.providerMetadata=providerMetadata;}get text(){return this.content.filter(part=>part.type==="text").map(part=>part.text).join("");}get reasoning(){return this.content.filter(part=>part.type==="reasoning");}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(part=>part.text).join("");}get files(){return this.content.filter(part=>part.type==="file").map(part=>part.file);}get sources(){return this.content.filter(part=>part.type==="source");}get toolCalls(){return this.content.filter(part=>part.type==="tool-call");}get staticToolCalls(){return this.toolCalls.filter(toolCall=>toolCall.dynamic===false);}get dynamicToolCalls(){return this.toolCalls.filter(toolCall=>toolCall.dynamic===true);}get toolResults(){return this.content.filter(part=>part.type==="tool-result");}get staticToolResults(){return this.toolResults.filter(toolResult=>toolResult.dynamic===false);}get dynamicToolResults(){return this.toolResults.filter(toolResult=>toolResult.dynamic===true);}};// src/generate-text/stop-condition.ts
function stepCountIs(stepCount){return _ref153=>{let{steps}=_ref153;return steps.length===stepCount;};}function isStopConditionMet(_x73){return _isStopConditionMet.apply(this,arguments);}function _isStopConditionMet(){_isStopConditionMet=_asyncToGenerator2(function(_ref206){let{stopConditions,steps}=_ref206;return function*(){return(yield Promise.all(stopConditions.map(condition=>condition({steps})))).some(result=>result);}();});return _isStopConditionMet.apply(this,arguments);}function createToolModelOutput(_ref154){let{output,tool:tool3,errorMode}=_ref154;if(errorMode==="text"){return{type:"error-text",value:getErrorMessage$1(output)};}else if(errorMode==="json"){return{type:"error-json",value:toJSONValue(output)};}if(tool3==null?void 0:tool3.toModelOutput){return tool3.toModelOutput(output);}return typeof output==="string"?{type:"text",value:output}:{type:"json",value:toJSONValue(output)};}function toJSONValue(value){return value===void 0?null:value;}// src/generate-text/to-response-messages.ts
function toResponseMessages(_ref155){let{content:inputContent,tools}=_ref155;const responseMessages=[];const content=inputContent.filter(part=>part.type!=="source").filter(part=>(part.type!=="tool-result"||part.providerExecuted)&&(part.type!=="tool-error"||part.providerExecuted)).filter(part=>part.type!=="text"||part.text.length>0).map(part=>{switch(part.type){case"text":return{type:"text",text:part.text,providerOptions:part.providerMetadata};case"reasoning":return{type:"reasoning",text:part.text,providerOptions:part.providerMetadata};case"file":return{type:"file",data:part.file.base64,mediaType:part.file.mediaType,providerOptions:part.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:part.toolCallId,toolName:part.toolName,input:part.input,providerExecuted:part.providerExecuted,providerOptions:part.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:part.toolCallId,toolName:part.toolName,output:createToolModelOutput({tool:tools==null?void 0:tools[part.toolName],output:part.output,errorMode:"none"}),providerExecuted:true,providerOptions:part.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:part.toolCallId,toolName:part.toolName,output:createToolModelOutput({tool:tools==null?void 0:tools[part.toolName],output:part.error,errorMode:"json"}),providerOptions:part.providerMetadata};}});if(content.length>0){responseMessages.push({role:"assistant",content});}const toolResultContent=inputContent.filter(part=>part.type==="tool-result"||part.type==="tool-error").filter(part=>!part.providerExecuted).map(toolResult=>({type:"tool-result",toolCallId:toolResult.toolCallId,toolName:toolResult.toolName,output:createToolModelOutput({tool:tools==null?void 0:tools[toolResult.toolName],output:toolResult.type==="tool-result"?toolResult.output:toolResult.error,errorMode:toolResult.type==="tool-error"?"text":"none"})}));if(toolResultContent.length>0){responseMessages.push({role:"tool",content:toolResultContent});}return responseMessages;}// src/version.ts
var VERSION="5.0.44";// src/generate-text/generate-text.ts
var originalGenerateId=createIdGenerator({prefix:"aitxt",size:24});function generateText(_x74){return _generateText.apply(this,arguments);}function _generateText(){_generateText=_asyncToGenerator2(function*(_ref207){let{model:modelArg,tools,toolChoice,system,prompt,messages,maxRetries:maxRetriesArg,abortSignal,headers,stopWhen=stepCountIs(1),experimental_output:output,experimental_telemetry:telemetry,providerOptions,experimental_activeTools,activeTools=experimental_activeTools,experimental_prepareStep,prepareStep=experimental_prepareStep,experimental_repairToolCall:repairToolCall,experimental_download:download2,experimental_context,_internal:{generateId:generateId3=originalGenerateId,currentDate=()=>/* @__PURE__ */new Date()}={},onStepFinish}=_ref207,settings=_objectWithoutProperties(_ref207,_excluded1);const model=resolveLanguageModel(modelArg);const stopConditions=asArray(stopWhen);const{maxRetries,retry}=prepareRetries({maxRetries:maxRetriesArg,abortSignal});const callSettings=prepareCallSettings(settings);const headersWithUserAgent=withUserAgentSuffix(headers!=null?headers:{},"ai/".concat(VERSION));const baseTelemetryAttributes=getBaseTelemetryAttributes({model,telemetry,headers:headersWithUserAgent,settings:_objectSpread2(_objectSpread2({},callSettings),{},{maxRetries})});const initialPrompt=yield standardizePrompt({system,prompt,messages});const tracer=getTracer(telemetry);try{return yield recordSpan({name:"ai.generateText",attributes:selectTelemetryAttributes({telemetry,attributes:_objectSpread2(_objectSpread2(_objectSpread2({},assembleOperationName({operationId:"ai.generateText",telemetry})),baseTelemetryAttributes),{},{// model:
"ai.model.provider":model.provider,"ai.model.id":model.modelId,// specific settings that only make sense on the outer level:
"ai.prompt":{input:()=>JSON.stringify({system,prompt,messages})}})}),tracer,fn:function(){var _ref208=_asyncToGenerator2(function*(span){var _a17,_b,_c,_d,_e,_f,_g;const callSettings2=prepareCallSettings(settings);let currentModelResponse;let clientToolCalls=[];let clientToolOutputs=[];const responseMessages=[];const steps=[];do{const stepInputMessages=[...initialPrompt.messages,...responseMessages];const prepareStepResult=yield prepareStep==null?void 0:prepareStep({model,steps,stepNumber:steps.length,messages:stepInputMessages});const promptMessages=yield convertToLanguageModelPrompt({prompt:{system:(_a17=prepareStepResult==null?void 0:prepareStepResult.system)!=null?_a17:initialPrompt.system,messages:(_b=prepareStepResult==null?void 0:prepareStepResult.messages)!=null?_b:stepInputMessages},supportedUrls:yield model.supportedUrls,download:download2});const stepModel=resolveLanguageModel((_c=prepareStepResult==null?void 0:prepareStepResult.model)!=null?_c:model);const{toolChoice:stepToolChoice,tools:stepTools}=prepareToolsAndToolChoice({tools,toolChoice:(_d=prepareStepResult==null?void 0:prepareStepResult.toolChoice)!=null?_d:toolChoice,activeTools:(_e=prepareStepResult==null?void 0:prepareStepResult.activeTools)!=null?_e:activeTools});currentModelResponse=yield retry(()=>{var _a18;return recordSpan({name:"ai.generateText.doGenerate",attributes:selectTelemetryAttributes({telemetry,attributes:_objectSpread2(_objectSpread2(_objectSpread2({},assembleOperationName({operationId:"ai.generateText.doGenerate",telemetry})),baseTelemetryAttributes),{},{// model:
"ai.model.provider":stepModel.provider,"ai.model.id":stepModel.modelId,// prompt:
"ai.prompt.messages":{input:()=>stringifyForTelemetry(promptMessages)},"ai.prompt.tools":{// convert the language model level tools:
input:()=>stepTools==null?void 0:stepTools.map(tool3=>JSON.stringify(tool3))},"ai.prompt.toolChoice":{input:()=>stepToolChoice!=null?JSON.stringify(stepToolChoice):void 0},// standardized gen-ai llm span attributes:
"gen_ai.system":stepModel.provider,"gen_ai.request.model":stepModel.modelId,"gen_ai.request.frequency_penalty":settings.frequencyPenalty,"gen_ai.request.max_tokens":settings.maxOutputTokens,"gen_ai.request.presence_penalty":settings.presencePenalty,"gen_ai.request.stop_sequences":settings.stopSequences,"gen_ai.request.temperature":(_a18=settings.temperature)!=null?_a18:void 0,"gen_ai.request.top_k":settings.topK,"gen_ai.request.top_p":settings.topP})}),tracer,fn:function(){var _ref209=_asyncToGenerator2(function*(span2){var _a19,_b2,_c2,_d2,_e2,_f2,_g2,_h;const result=yield stepModel.doGenerate(_objectSpread2(_objectSpread2({},callSettings2),{},{tools:stepTools,toolChoice:stepToolChoice,responseFormat:output==null?void 0:output.responseFormat,prompt:promptMessages,providerOptions,abortSignal,headers:headersWithUserAgent}));const responseData={id:(_b2=(_a19=result.response)==null?void 0:_a19.id)!=null?_b2:generateId3(),timestamp:(_d2=(_c2=result.response)==null?void 0:_c2.timestamp)!=null?_d2:currentDate(),modelId:(_f2=(_e2=result.response)==null?void 0:_e2.modelId)!=null?_f2:stepModel.modelId,headers:(_g2=result.response)==null?void 0:_g2.headers,body:(_h=result.response)==null?void 0:_h.body};span2.setAttributes(selectTelemetryAttributes({telemetry,attributes:{"ai.response.finishReason":result.finishReason,"ai.response.text":{output:()=>extractTextContent(result.content)},"ai.response.toolCalls":{output:()=>{const toolCalls=asToolCalls(result.content);return toolCalls==null?void 0:JSON.stringify(toolCalls);}},"ai.response.id":responseData.id,"ai.response.model":responseData.modelId,"ai.response.timestamp":responseData.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(result.providerMetadata),// TODO rename telemetry attributes to inputTokens and outputTokens
"ai.usage.promptTokens":result.usage.inputTokens,"ai.usage.completionTokens":result.usage.outputTokens,// standardized gen-ai llm span attributes:
"gen_ai.response.finish_reasons":[result.finishReason],"gen_ai.response.id":responseData.id,"gen_ai.response.model":responseData.modelId,"gen_ai.usage.input_tokens":result.usage.inputTokens,"gen_ai.usage.output_tokens":result.usage.outputTokens}}));return _objectSpread2(_objectSpread2({},result),{},{response:responseData});});return function fn(_x97){return _ref209.apply(this,arguments);};}()});});const stepToolCalls=yield Promise.all(currentModelResponse.content.filter(part=>part.type==="tool-call").map(toolCall=>parseToolCall({toolCall,tools,repairToolCall,system,messages:stepInputMessages})));for(const toolCall of stepToolCalls){if(toolCall.invalid){continue;}const tool3=tools[toolCall.toolName];if((tool3==null?void 0:tool3.onInputAvailable)!=null){yield tool3.onInputAvailable({input:toolCall.input,toolCallId:toolCall.toolCallId,messages:stepInputMessages,abortSignal,experimental_context});}}const invalidToolCalls=stepToolCalls.filter(toolCall=>toolCall.invalid&&toolCall.dynamic);clientToolOutputs=[];for(const toolCall of invalidToolCalls){clientToolOutputs.push({type:"tool-error",toolCallId:toolCall.toolCallId,toolName:toolCall.toolName,input:toolCall.input,error:getErrorMessage(toolCall.error),dynamic:true});}clientToolCalls=stepToolCalls.filter(toolCall=>!toolCall.providerExecuted);if(tools!=null){clientToolOutputs.push(...(yield executeTools({toolCalls:clientToolCalls.filter(toolCall=>!toolCall.invalid),tools,tracer,telemetry,messages:stepInputMessages,abortSignal,experimental_context})));}const stepContent=asContent({content:currentModelResponse.content,toolCalls:stepToolCalls,toolOutputs:clientToolOutputs});responseMessages.push(...toResponseMessages({content:stepContent,tools}));const currentStepResult=new DefaultStepResult({content:stepContent,finishReason:currentModelResponse.finishReason,usage:currentModelResponse.usage,warnings:currentModelResponse.warnings,providerMetadata:currentModelResponse.providerMetadata,request:(_f=currentModelResponse.request)!=null?_f:{},response:_objectSpread2(_objectSpread2({},currentModelResponse.response),{},{// deep clone msgs to avoid mutating past messages in multi-step:
messages:structuredClone(responseMessages)})});logWarnings((_g=currentModelResponse.warnings)!=null?_g:[]);steps.push(currentStepResult);yield onStepFinish==null?void 0:onStepFinish(currentStepResult);}while(// there are tool calls:
clientToolCalls.length>0&&// all current tool calls have outputs (incl. execution errors):
clientToolOutputs.length===clientToolCalls.length&&// continue until a stop condition is met:
!(yield isStopConditionMet({stopConditions,steps})));span.setAttributes(selectTelemetryAttributes({telemetry,attributes:{"ai.response.finishReason":currentModelResponse.finishReason,"ai.response.text":{output:()=>extractTextContent(currentModelResponse.content)},"ai.response.toolCalls":{output:()=>{const toolCalls=asToolCalls(currentModelResponse.content);return toolCalls==null?void 0:JSON.stringify(toolCalls);}},"ai.response.providerMetadata":JSON.stringify(currentModelResponse.providerMetadata),// TODO rename telemetry attributes to inputTokens and outputTokens
"ai.usage.promptTokens":currentModelResponse.usage.inputTokens,"ai.usage.completionTokens":currentModelResponse.usage.outputTokens}}));const lastStep=steps[steps.length-1];return new DefaultGenerateTextResult({steps,resolvedOutput:yield output==null?void 0:output.parseOutput({text:lastStep.text},{response:lastStep.response,usage:lastStep.usage,finishReason:lastStep.finishReason})});});return function fn(_x96){return _ref208.apply(this,arguments);};}()});}catch(error){throw wrapGatewayError(error);}});return _generateText.apply(this,arguments);}function executeTools(_x75){return _executeTools.apply(this,arguments);}function _executeTools(){_executeTools=_asyncToGenerator2(function(_ref210){let{toolCalls,tools,tracer,telemetry,messages,abortSignal,experimental_context}=_ref210;return function*(){const toolOutputs=yield Promise.all(toolCalls.map(/*#__PURE__*/function(){var _ref211=_asyncToGenerator2(function(_ref212){let{toolCallId,toolName,input}=_ref212;return function*(){const tool3=tools[toolName];if((tool3==null?void 0:tool3.execute)==null){return void 0;}return recordSpan({name:"ai.toolCall",attributes:selectTelemetryAttributes({telemetry,attributes:_objectSpread2(_objectSpread2({},assembleOperationName({operationId:"ai.toolCall",telemetry})),{},{"ai.toolCall.name":toolName,"ai.toolCall.id":toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(input)}})}),tracer,fn:function(){var _ref213=_asyncToGenerator2(function*(span){try{const stream=executeTool({execute:tool3.execute.bind(tool3),input,options:{toolCallId,messages,abortSignal,experimental_context}});let output;var _iteratorAbruptCompletion3=false;var _didIteratorError3=false;var _iteratorError3;try{for(var _iterator3=_asyncIterator2(stream),_step3;_iteratorAbruptCompletion3=!(_step3=yield _iterator3.next()).done;_iteratorAbruptCompletion3=false){const part=_step3.value;{if(part.type==="final"){output=part.output;}}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(_iteratorAbruptCompletion3&&_iterator3.return!=null){yield _iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}try{span.setAttributes(selectTelemetryAttributes({telemetry,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(output)}}}));}catch(ignored){}return{type:"tool-result",toolCallId,toolName,input,output,dynamic:tool3.type==="dynamic"};}catch(error){recordErrorOnSpan(span,error);return{type:"tool-error",toolCallId,toolName,input,error,dynamic:tool3.type==="dynamic"};}});return function fn(_x99){return _ref213.apply(this,arguments);};}()});}();});return function(_x98){return _ref211.apply(this,arguments);};}()));return toolOutputs.filter(output=>output!=null);}();});return _executeTools.apply(this,arguments);}var DefaultGenerateTextResult=class{constructor(options){this.steps=options.steps;this.resolvedOutput=options.resolvedOutput;}get finalStep(){return this.steps[this.steps.length-1];}get content(){return this.finalStep.content;}get text(){return this.finalStep.text;}get files(){return this.finalStep.files;}get reasoningText(){return this.finalStep.reasoningText;}get reasoning(){return this.finalStep.reasoning;}get toolCalls(){return this.finalStep.toolCalls;}get staticToolCalls(){return this.finalStep.staticToolCalls;}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls;}get toolResults(){return this.finalStep.toolResults;}get staticToolResults(){return this.finalStep.staticToolResults;}get dynamicToolResults(){return this.finalStep.dynamicToolResults;}get sources(){return this.finalStep.sources;}get finishReason(){return this.finalStep.finishReason;}get warnings(){return this.finalStep.warnings;}get providerMetadata(){return this.finalStep.providerMetadata;}get response(){return this.finalStep.response;}get request(){return this.finalStep.request;}get usage(){return this.finalStep.usage;}get totalUsage(){return this.steps.reduce((totalUsage,step)=>{return addLanguageModelUsage(totalUsage,step.usage);},{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0});}get experimental_output(){if(this.resolvedOutput==null){throw new NoOutputSpecifiedError();}return this.resolvedOutput;}};function asToolCalls(content){const parts=content.filter(part=>part.type==="tool-call");if(parts.length===0){return void 0;}return parts.map(toolCall=>({toolCallId:toolCall.toolCallId,toolName:toolCall.toolName,input:toolCall.input}));}function asContent(_ref156){let{content,toolCalls,toolOutputs}=_ref156;return[...content.map(part=>{switch(part.type){case"text":case"reasoning":case"source":return part;case"file":{return{type:"file",file:new DefaultGeneratedFile(part)};}case"tool-call":{return toolCalls.find(toolCall=>toolCall.toolCallId===part.toolCallId);}case"tool-result":{const toolCall=toolCalls.find(toolCall2=>toolCall2.toolCallId===part.toolCallId);if(toolCall==null){throw new Error("Tool call ".concat(part.toolCallId," not found."));}if(part.isError){return{type:"tool-error",toolCallId:part.toolCallId,toolName:part.toolName,input:toolCall.input,error:part.result,providerExecuted:true,dynamic:toolCall.dynamic};}return{type:"tool-result",toolCallId:part.toolCallId,toolName:part.toolName,input:toolCall.input,output:part.result,providerExecuted:true,dynamic:toolCall.dynamic};}}}),...toolOutputs];}// src/util/prepare-headers.ts
function prepareHeaders(headers,defaultHeaders){const responseHeaders=new Headers(headers!=null?headers:{});for(const[key,value]of Object.entries(defaultHeaders)){if(!responseHeaders.has(key)){responseHeaders.set(key,value);}}return responseHeaders;}// src/text-stream/create-text-stream-response.ts
function createTextStreamResponse(_ref157){let{status,statusText,headers,textStream}=_ref157;return new Response(textStream.pipeThrough(new TextEncoderStream()),{status:status!=null?status:200,statusText,headers:prepareHeaders(headers,{"content-type":"text/plain; charset=utf-8"})});}// src/util/write-to-server-response.ts
function writeToServerResponse(_ref158){let{response,status,statusText,headers,stream}=_ref158;response.writeHead(status!=null?status:200,statusText,headers);const reader=stream.getReader();const read=/*#__PURE__*/function(){var _ref159=_asyncToGenerator2(function*(){try{while(true){const{done,value}=yield reader.read();if(done)break;response.write(value);}}catch(error){throw error;}finally{response.end();}});return function read(){return _ref159.apply(this,arguments);};}();read();}// src/text-stream/pipe-text-stream-to-response.ts
function pipeTextStreamToResponse(_ref160){let{response,status,statusText,headers,textStream}=_ref160;writeToServerResponse({response,status,statusText,headers:Object.fromEntries(prepareHeaders(headers,{"content-type":"text/plain; charset=utf-8"}).entries()),stream:textStream.pipeThrough(new TextEncoderStream())});}// src/ui-message-stream/json-to-sse-transform-stream.ts
var JsonToSseTransformStream=class extends TransformStream{constructor(){super({transform(part,controller){controller.enqueue("data: ".concat(JSON.stringify(part),"\n\n"));},flush(controller){controller.enqueue("data: [DONE]\n\n");}});}};// src/ui-message-stream/ui-message-stream-headers.ts
var UI_MESSAGE_STREAM_HEADERS={"content-type":"text/event-stream","cache-control":"no-cache",connection:"keep-alive","x-vercel-ai-ui-message-stream":"v1","x-accel-buffering":"no"// disable nginx buffering
};// src/ui-message-stream/create-ui-message-stream-response.ts
function createUIMessageStreamResponse(_ref161){let{status,statusText,headers,stream,consumeSseStream}=_ref161;let sseStream=stream.pipeThrough(new JsonToSseTransformStream());if(consumeSseStream){const[stream1,stream2]=sseStream.tee();sseStream=stream1;consumeSseStream({stream:stream2});}return new Response(sseStream.pipeThrough(new TextEncoderStream()),{status,statusText,headers:prepareHeaders(headers,UI_MESSAGE_STREAM_HEADERS)});}// src/ui-message-stream/get-response-ui-message-id.ts
function getResponseUIMessageId(_ref162){let{originalMessages,responseMessageId}=_ref162;if(originalMessages==null){return void 0;}const lastMessage=originalMessages[originalMessages.length-1];return(lastMessage==null?void 0:lastMessage.role)==="assistant"?lastMessage.id:typeof responseMessageId==="function"?responseMessageId():responseMessageId;}union([strictObject({type:literal("text-start"),id:string$1(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:literal("text-delta"),id:string$1(),delta:string$1(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:literal("text-end"),id:string$1(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:literal("error"),errorText:string$1()}),strictObject({type:literal("tool-input-start"),toolCallId:string$1(),toolName:string$1(),providerExecuted:boolean$1().optional(),dynamic:boolean$1().optional()}),strictObject({type:literal("tool-input-delta"),toolCallId:string$1(),inputTextDelta:string$1()}),strictObject({type:literal("tool-input-available"),toolCallId:string$1(),toolName:string$1(),input:unknown(),providerExecuted:boolean$1().optional(),providerMetadata:providerMetadataSchema.optional(),dynamic:boolean$1().optional()}),strictObject({type:literal("tool-input-error"),toolCallId:string$1(),toolName:string$1(),input:unknown(),providerExecuted:boolean$1().optional(),providerMetadata:providerMetadataSchema.optional(),dynamic:boolean$1().optional(),errorText:string$1()}),strictObject({type:literal("tool-output-available"),toolCallId:string$1(),output:unknown(),providerExecuted:boolean$1().optional(),dynamic:boolean$1().optional(),preliminary:boolean$1().optional()}),strictObject({type:literal("tool-output-error"),toolCallId:string$1(),errorText:string$1(),providerExecuted:boolean$1().optional(),dynamic:boolean$1().optional()}),strictObject({type:literal("reasoning"),text:string$1(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:literal("reasoning-start"),id:string$1(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:literal("reasoning-delta"),id:string$1(),delta:string$1(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:literal("reasoning-end"),id:string$1(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:literal("reasoning-part-finish")}),strictObject({type:literal("source-url"),sourceId:string$1(),url:string$1(),title:string$1().optional(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:literal("source-document"),sourceId:string$1(),mediaType:string$1(),title:string$1(),filename:string$1().optional(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:literal("file"),url:string$1(),mediaType:string$1(),providerMetadata:providerMetadataSchema.optional()}),strictObject({type:string$1().startsWith("data-"),id:string$1().optional(),data:unknown(),transient:boolean$1().optional()}),strictObject({type:literal("start-step")}),strictObject({type:literal("finish-step")}),strictObject({type:literal("start"),messageId:string$1().optional(),messageMetadata:unknown().optional()}),strictObject({type:literal("finish"),messageMetadata:unknown().optional()}),strictObject({type:literal("abort")}),strictObject({type:literal("message-metadata"),messageMetadata:unknown()})]);function isDataUIMessageChunk(chunk){return chunk.type.startsWith("data-");}// src/util/merge-objects.ts
function mergeObjects(base,overrides){if(base===void 0&&overrides===void 0){return void 0;}if(base===void 0){return overrides;}if(overrides===void 0){return base;}const result=_objectSpread2({},base);for(const key in overrides){if(Object.prototype.hasOwnProperty.call(overrides,key)){const overridesValue=overrides[key];if(overridesValue===void 0)continue;const baseValue=key in base?base[key]:void 0;const isSourceObject=overridesValue!==null&&typeof overridesValue==="object"&&!Array.isArray(overridesValue)&&!(overridesValue instanceof Date)&&!(overridesValue instanceof RegExp);const isTargetObject=baseValue!==null&&baseValue!==void 0&&typeof baseValue==="object"&&!Array.isArray(baseValue)&&!(baseValue instanceof Date)&&!(baseValue instanceof RegExp);if(isSourceObject&&isTargetObject){result[key]=mergeObjects(baseValue,overridesValue);}else{result[key]=overridesValue;}}}return result;}// src/util/fix-json.ts
function fixJson(input){const stack=["ROOT"];let lastValidIndex=-1;let literalStart=null;function processValueStart(char,i,swapState){{switch(char){case'"':{lastValidIndex=i;stack.pop();stack.push(swapState);stack.push("INSIDE_STRING");break;}case"f":case"t":case"n":{lastValidIndex=i;literalStart=i;stack.pop();stack.push(swapState);stack.push("INSIDE_LITERAL");break;}case"-":{stack.pop();stack.push(swapState);stack.push("INSIDE_NUMBER");break;}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{lastValidIndex=i;stack.pop();stack.push(swapState);stack.push("INSIDE_NUMBER");break;}case"{":{lastValidIndex=i;stack.pop();stack.push(swapState);stack.push("INSIDE_OBJECT_START");break;}case"[":{lastValidIndex=i;stack.pop();stack.push(swapState);stack.push("INSIDE_ARRAY_START");break;}}}}function processAfterObjectValue(char,i){switch(char){case",":{stack.pop();stack.push("INSIDE_OBJECT_AFTER_COMMA");break;}case"}":{lastValidIndex=i;stack.pop();break;}}}function processAfterArrayValue(char,i){switch(char){case",":{stack.pop();stack.push("INSIDE_ARRAY_AFTER_COMMA");break;}case"]":{lastValidIndex=i;stack.pop();break;}}}for(let i=0;i<input.length;i++){const char=input[i];const currentState=stack[stack.length-1];switch(currentState){case"ROOT":processValueStart(char,i,"FINISH");break;case"INSIDE_OBJECT_START":{switch(char){case'"':{stack.pop();stack.push("INSIDE_OBJECT_KEY");break;}case"}":{lastValidIndex=i;stack.pop();break;}}break;}case"INSIDE_OBJECT_AFTER_COMMA":{switch(char){case'"':{stack.pop();stack.push("INSIDE_OBJECT_KEY");break;}}break;}case"INSIDE_OBJECT_KEY":{switch(char){case'"':{stack.pop();stack.push("INSIDE_OBJECT_AFTER_KEY");break;}}break;}case"INSIDE_OBJECT_AFTER_KEY":{switch(char){case":":{stack.pop();stack.push("INSIDE_OBJECT_BEFORE_VALUE");break;}}break;}case"INSIDE_OBJECT_BEFORE_VALUE":{processValueStart(char,i,"INSIDE_OBJECT_AFTER_VALUE");break;}case"INSIDE_OBJECT_AFTER_VALUE":{processAfterObjectValue(char,i);break;}case"INSIDE_STRING":{switch(char){case'"':{stack.pop();lastValidIndex=i;break;}case"\\":{stack.push("INSIDE_STRING_ESCAPE");break;}default:{lastValidIndex=i;}}break;}case"INSIDE_ARRAY_START":{switch(char){case"]":{lastValidIndex=i;stack.pop();break;}default:{lastValidIndex=i;processValueStart(char,i,"INSIDE_ARRAY_AFTER_VALUE");break;}}break;}case"INSIDE_ARRAY_AFTER_VALUE":{switch(char){case",":{stack.pop();stack.push("INSIDE_ARRAY_AFTER_COMMA");break;}case"]":{lastValidIndex=i;stack.pop();break;}default:{lastValidIndex=i;break;}}break;}case"INSIDE_ARRAY_AFTER_COMMA":{processValueStart(char,i,"INSIDE_ARRAY_AFTER_VALUE");break;}case"INSIDE_STRING_ESCAPE":{stack.pop();lastValidIndex=i;break;}case"INSIDE_NUMBER":{switch(char){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{lastValidIndex=i;break;}case"e":case"E":case"-":case".":{break;}case",":{stack.pop();if(stack[stack.length-1]==="INSIDE_ARRAY_AFTER_VALUE"){processAfterArrayValue(char,i);}if(stack[stack.length-1]==="INSIDE_OBJECT_AFTER_VALUE"){processAfterObjectValue(char,i);}break;}case"}":{stack.pop();if(stack[stack.length-1]==="INSIDE_OBJECT_AFTER_VALUE"){processAfterObjectValue(char,i);}break;}case"]":{stack.pop();if(stack[stack.length-1]==="INSIDE_ARRAY_AFTER_VALUE"){processAfterArrayValue(char,i);}break;}default:{stack.pop();break;}}break;}case"INSIDE_LITERAL":{const partialLiteral=input.substring(literalStart,i+1);if(!"false".startsWith(partialLiteral)&&!"true".startsWith(partialLiteral)&&!"null".startsWith(partialLiteral)){stack.pop();if(stack[stack.length-1]==="INSIDE_OBJECT_AFTER_VALUE"){processAfterObjectValue(char,i);}else if(stack[stack.length-1]==="INSIDE_ARRAY_AFTER_VALUE"){processAfterArrayValue(char,i);}}else{lastValidIndex=i;}break;}}}let result=input.slice(0,lastValidIndex+1);for(let i=stack.length-1;i>=0;i--){const state=stack[i];switch(state){case"INSIDE_STRING":{result+='"';break;}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{result+="}";break;}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{result+="]";break;}case"INSIDE_LITERAL":{const partialLiteral=input.substring(literalStart,input.length);if("true".startsWith(partialLiteral)){result+="true".slice(partialLiteral.length);}else if("false".startsWith(partialLiteral)){result+="false".slice(partialLiteral.length);}else if("null".startsWith(partialLiteral)){result+="null".slice(partialLiteral.length);}}}}return result;}// src/util/parse-partial-json.ts
function parsePartialJson(_x76){return _parsePartialJson.apply(this,arguments);}// src/ui/ui-messages.ts
function _parsePartialJson(){_parsePartialJson=_asyncToGenerator2(function*(jsonText){if(jsonText===void 0){return{value:void 0,state:"undefined-input"};}let result=yield safeParseJSON({text:jsonText});if(result.success){return{value:result.value,state:"successful-parse"};}result=yield safeParseJSON({text:fixJson(jsonText)});if(result.success){return{value:result.value,state:"repaired-parse"};}return{value:void 0,state:"failed-parse"};});return _parsePartialJson.apply(this,arguments);}function isToolUIPart(part){return part.type.startsWith("tool-");}function getToolName(part){return part.type.split("-").slice(1).join("-");}// src/ui/process-ui-message-stream.ts
function createStreamingUIMessageState(_ref163){let{lastMessage,messageId}=_ref163;return{message:(lastMessage==null?void 0:lastMessage.role)==="assistant"?lastMessage:{id:messageId,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}};}function processUIMessageStream(_ref164){let{stream,messageMetadataSchema,dataPartSchemas,runUpdateMessageJob,onError,onToolCall,onData}=_ref164;return stream.pipeThrough(new TransformStream({transform(chunk,controller){return _asyncToGenerator2(function*(){yield runUpdateMessageJob(/*#__PURE__*/function(){var _ref165=_asyncToGenerator2(function(_ref166){let{state,write}=_ref166;return function*(){var _a17,_b,_c,_d;function getToolInvocation(toolCallId){const toolInvocations=state.message.parts.filter(isToolUIPart);const toolInvocation=toolInvocations.find(invocation=>invocation.toolCallId===toolCallId);if(toolInvocation==null){throw new Error("tool-output-error must be preceded by a tool-input-available");}return toolInvocation;}function getDynamicToolInvocation(toolCallId){const toolInvocations=state.message.parts.filter(part=>part.type==="dynamic-tool");const toolInvocation=toolInvocations.find(invocation=>invocation.toolCallId===toolCallId);if(toolInvocation==null){throw new Error("tool-output-error must be preceded by a tool-input-available");}return toolInvocation;}function updateToolPart(options){var _a18;const part=state.message.parts.find(part2=>isToolUIPart(part2)&&part2.toolCallId===options.toolCallId);const anyOptions=options;const anyPart=part;if(part!=null){part.state=options.state;anyPart.input=anyOptions.input;anyPart.output=anyOptions.output;anyPart.errorText=anyOptions.errorText;anyPart.rawInput=anyOptions.rawInput;anyPart.preliminary=anyOptions.preliminary;anyPart.providerExecuted=(_a18=anyOptions.providerExecuted)!=null?_a18:part.providerExecuted;if(anyOptions.providerMetadata!=null&&part.state==="input-available"){part.callProviderMetadata=anyOptions.providerMetadata;}}else{state.message.parts.push(_objectSpread2({type:"tool-".concat(options.toolName),toolCallId:options.toolCallId,state:options.state,input:anyOptions.input,output:anyOptions.output,rawInput:anyOptions.rawInput,errorText:anyOptions.errorText,providerExecuted:anyOptions.providerExecuted,preliminary:anyOptions.preliminary},anyOptions.providerMetadata!=null?{callProviderMetadata:anyOptions.providerMetadata}:{}));}}function updateDynamicToolPart(options){var _a18;const part=state.message.parts.find(part2=>part2.type==="dynamic-tool"&&part2.toolCallId===options.toolCallId);const anyOptions=options;const anyPart=part;if(part!=null){part.state=options.state;anyPart.toolName=options.toolName;anyPart.input=anyOptions.input;anyPart.output=anyOptions.output;anyPart.errorText=anyOptions.errorText;anyPart.rawInput=(_a18=anyOptions.rawInput)!=null?_a18:anyPart.rawInput;anyPart.preliminary=anyOptions.preliminary;if(anyOptions.providerMetadata!=null&&part.state==="input-available"){part.callProviderMetadata=anyOptions.providerMetadata;}}else{state.message.parts.push(_objectSpread2({type:"dynamic-tool",toolName:options.toolName,toolCallId:options.toolCallId,state:options.state,input:anyOptions.input,output:anyOptions.output,errorText:anyOptions.errorText,preliminary:anyOptions.preliminary},anyOptions.providerMetadata!=null?{callProviderMetadata:anyOptions.providerMetadata}:{}));}}function updateMessageMetadata(_x78){return _updateMessageMetadata.apply(this,arguments);}function _updateMessageMetadata(){_updateMessageMetadata=_asyncToGenerator2(function*(metadata){if(metadata!=null){const mergedMetadata=state.message.metadata!=null?mergeObjects(state.message.metadata,metadata):metadata;if(messageMetadataSchema!=null){yield validateTypes({value:mergedMetadata,schema:messageMetadataSchema});}state.message.metadata=mergedMetadata;}});return _updateMessageMetadata.apply(this,arguments);}switch(chunk.type){case"text-start":{const textPart={type:"text",text:"",providerMetadata:chunk.providerMetadata,state:"streaming"};state.activeTextParts[chunk.id]=textPart;state.message.parts.push(textPart);write();break;}case"text-delta":{const textPart=state.activeTextParts[chunk.id];textPart.text+=chunk.delta;textPart.providerMetadata=(_a17=chunk.providerMetadata)!=null?_a17:textPart.providerMetadata;write();break;}case"text-end":{const textPart=state.activeTextParts[chunk.id];textPart.state="done";textPart.providerMetadata=(_b=chunk.providerMetadata)!=null?_b:textPart.providerMetadata;delete state.activeTextParts[chunk.id];write();break;}case"reasoning-start":{const reasoningPart={type:"reasoning",text:"",providerMetadata:chunk.providerMetadata,state:"streaming"};state.activeReasoningParts[chunk.id]=reasoningPart;state.message.parts.push(reasoningPart);write();break;}case"reasoning-delta":{const reasoningPart=state.activeReasoningParts[chunk.id];reasoningPart.text+=chunk.delta;reasoningPart.providerMetadata=(_c=chunk.providerMetadata)!=null?_c:reasoningPart.providerMetadata;write();break;}case"reasoning-end":{const reasoningPart=state.activeReasoningParts[chunk.id];reasoningPart.providerMetadata=(_d=chunk.providerMetadata)!=null?_d:reasoningPart.providerMetadata;reasoningPart.state="done";delete state.activeReasoningParts[chunk.id];write();break;}case"file":{state.message.parts.push({type:"file",mediaType:chunk.mediaType,url:chunk.url});write();break;}case"source-url":{state.message.parts.push({type:"source-url",sourceId:chunk.sourceId,url:chunk.url,title:chunk.title,providerMetadata:chunk.providerMetadata});write();break;}case"source-document":{state.message.parts.push({type:"source-document",sourceId:chunk.sourceId,mediaType:chunk.mediaType,title:chunk.title,filename:chunk.filename,providerMetadata:chunk.providerMetadata});write();break;}case"tool-input-start":{const toolInvocations=state.message.parts.filter(isToolUIPart);state.partialToolCalls[chunk.toolCallId]={text:"",toolName:chunk.toolName,index:toolInvocations.length,dynamic:chunk.dynamic};if(chunk.dynamic){updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"input-streaming",input:void 0});}else{updateToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"input-streaming",input:void 0,providerExecuted:chunk.providerExecuted});}write();break;}case"tool-input-delta":{const partialToolCall=state.partialToolCalls[chunk.toolCallId];partialToolCall.text+=chunk.inputTextDelta;const{value:partialArgs}=yield parsePartialJson(partialToolCall.text);if(partialToolCall.dynamic){updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:partialToolCall.toolName,state:"input-streaming",input:partialArgs});}else{updateToolPart({toolCallId:chunk.toolCallId,toolName:partialToolCall.toolName,state:"input-streaming",input:partialArgs});}write();break;}case"tool-input-available":{if(chunk.dynamic){updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"input-available",input:chunk.input,providerMetadata:chunk.providerMetadata});}else{updateToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"input-available",input:chunk.input,providerExecuted:chunk.providerExecuted,providerMetadata:chunk.providerMetadata});}write();if(onToolCall&&!chunk.providerExecuted){yield onToolCall({toolCall:chunk});}break;}case"tool-input-error":{if(chunk.dynamic){updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"output-error",input:chunk.input,errorText:chunk.errorText,providerMetadata:chunk.providerMetadata});}else{updateToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"output-error",input:void 0,rawInput:chunk.input,errorText:chunk.errorText,providerExecuted:chunk.providerExecuted,providerMetadata:chunk.providerMetadata});}write();break;}case"tool-output-available":{if(chunk.dynamic){const toolInvocation=getDynamicToolInvocation(chunk.toolCallId);updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:toolInvocation.toolName,state:"output-available",input:toolInvocation.input,output:chunk.output,preliminary:chunk.preliminary});}else{const toolInvocation=getToolInvocation(chunk.toolCallId);updateToolPart({toolCallId:chunk.toolCallId,toolName:getToolName(toolInvocation),state:"output-available",input:toolInvocation.input,output:chunk.output,providerExecuted:chunk.providerExecuted,preliminary:chunk.preliminary});}write();break;}case"tool-output-error":{if(chunk.dynamic){const toolInvocation=getDynamicToolInvocation(chunk.toolCallId);updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:toolInvocation.toolName,state:"output-error",input:toolInvocation.input,errorText:chunk.errorText});}else{const toolInvocation=getToolInvocation(chunk.toolCallId);updateToolPart({toolCallId:chunk.toolCallId,toolName:getToolName(toolInvocation),state:"output-error",input:toolInvocation.input,rawInput:toolInvocation.rawInput,errorText:chunk.errorText});}write();break;}case"start-step":{state.message.parts.push({type:"step-start"});break;}case"finish-step":{state.activeTextParts={};state.activeReasoningParts={};break;}case"start":{if(chunk.messageId!=null){state.message.id=chunk.messageId;}yield updateMessageMetadata(chunk.messageMetadata);if(chunk.messageId!=null||chunk.messageMetadata!=null){write();}break;}case"finish":{yield updateMessageMetadata(chunk.messageMetadata);if(chunk.messageMetadata!=null){write();}break;}case"message-metadata":{yield updateMessageMetadata(chunk.messageMetadata);if(chunk.messageMetadata!=null){write();}break;}case"error":{onError==null?void 0:onError(new Error(chunk.errorText));break;}default:{if(isDataUIMessageChunk(chunk)){if((dataPartSchemas==null?void 0:dataPartSchemas[chunk.type])!=null){yield validateTypes({value:chunk.data,schema:dataPartSchemas[chunk.type]});}const dataChunk=chunk;if(dataChunk.transient){onData==null?void 0:onData(dataChunk);break;}const existingUIPart=dataChunk.id!=null?state.message.parts.find(chunkArg=>dataChunk.type===chunkArg.type&&dataChunk.id===chunkArg.id):void 0;if(existingUIPart!=null){existingUIPart.data=dataChunk.data;}else{state.message.parts.push(dataChunk);}onData==null?void 0:onData(dataChunk);write();}}}controller.enqueue(chunk);}();});return function(_x77){return _ref165.apply(this,arguments);};}());})();}}));}// src/ui-message-stream/handle-ui-message-stream-finish.ts
function handleUIMessageStreamFinish(_ref167){let{messageId,originalMessages=[],onFinish,onError,stream}=_ref167;let lastMessage=originalMessages==null?void 0:originalMessages[originalMessages.length-1];if((lastMessage==null?void 0:lastMessage.role)!=="assistant"){lastMessage=void 0;}else{messageId=lastMessage.id;}let isAborted=false;const idInjectedStream=stream.pipeThrough(new TransformStream({transform(chunk,controller){if(chunk.type==="start"){const startChunk=chunk;if(startChunk.messageId==null&&messageId!=null){startChunk.messageId=messageId;}}if(chunk.type==="abort"){isAborted=true;}controller.enqueue(chunk);}}));if(onFinish==null){return idInjectedStream;}const state=createStreamingUIMessageState({lastMessage:lastMessage?structuredClone(lastMessage):void 0,messageId:messageId!=null?messageId:""// will be overridden by the stream
});const runUpdateMessageJob=/*#__PURE__*/function(){var _ref168=_asyncToGenerator2(function*(job){yield job({state,write:()=>{}});});return function runUpdateMessageJob(_x79){return _ref168.apply(this,arguments);};}();let finishCalled=false;const callOnFinish=/*#__PURE__*/function(){var _ref169=_asyncToGenerator2(function*(){if(finishCalled||!onFinish){return;}finishCalled=true;const isContinuation=state.message.id===(lastMessage==null?void 0:lastMessage.id);yield onFinish({isAborted,isContinuation,responseMessage:state.message,messages:[...(isContinuation?originalMessages.slice(0,-1):originalMessages),state.message]});});return function callOnFinish(){return _ref169.apply(this,arguments);};}();return processUIMessageStream({stream:idInjectedStream,runUpdateMessageJob,onError}).pipeThrough(new TransformStream({transform(chunk,controller){controller.enqueue(chunk);},// @ts-expect-error cancel is still new and missing from types https://developer.mozilla.org/en-US/docs/Web/API/TransformStream#browser_compatibility
cancel(){return _asyncToGenerator2(function*(){yield callOnFinish();})();},flush(){return _asyncToGenerator2(function*(){yield callOnFinish();})();}}));}// src/ui-message-stream/pipe-ui-message-stream-to-response.ts
function pipeUIMessageStreamToResponse(_ref170){let{response,status,statusText,headers,stream,consumeSseStream}=_ref170;let sseStream=stream.pipeThrough(new JsonToSseTransformStream());if(consumeSseStream){const[stream1,stream2]=sseStream.tee();sseStream=stream1;consumeSseStream({stream:stream2});}writeToServerResponse({response,status,statusText,headers:Object.fromEntries(prepareHeaders(headers,UI_MESSAGE_STREAM_HEADERS).entries()),stream:sseStream.pipeThrough(new TextEncoderStream())});}// src/util/async-iterable-stream.ts
function createAsyncIterableStream(source){const stream=source.pipeThrough(new TransformStream());stream[Symbol.asyncIterator]=function(){const reader=this.getReader();let finished=false;function cleanup(_x80){return _cleanup.apply(this,arguments);}function _cleanup(){_cleanup=_asyncToGenerator2(function*(cancelStream){var _a17;finished=true;try{if(cancelStream){yield(_a17=reader.cancel)==null?void 0:_a17.call(reader);}}finally{try{reader.releaseLock();}catch(e){}}});return _cleanup.apply(this,arguments);}return{/**
       * Reads the next chunk from the stream.
       * @returns A promise resolving to the next IteratorResult.
       */next(){return _asyncToGenerator2(function*(){if(finished){return{done:true,value:void 0};}const{done,value}=yield reader.read();if(done){yield cleanup(true);return{done:true,value:void 0};}return{done:false,value};})();},/**
       * Called on early exit (e.g., break from for-await).
       * Ensures the stream is cancelled and resources are released.
       * @returns A promise resolving to a completed IteratorResult.
       */return(){return _asyncToGenerator2(function*(){yield cleanup(true);return{done:true,value:void 0};})();},/**
       * Called on early exit with error.
       * Ensures the stream is cancelled and resources are released, then rethrows the error.
       * @param err The error to throw.
       * @returns A promise that rejects with the provided error.
       */throw(err){return _asyncToGenerator2(function*(){yield cleanup(true);throw err;})();}};};return stream;}// src/util/consume-stream.ts
function consumeStream(_x81){return _consumeStream.apply(this,arguments);}// src/util/create-resolvable-promise.ts
function _consumeStream(){_consumeStream=_asyncToGenerator2(function(_ref214){let{stream,onError}=_ref214;return function*(){const reader=stream.getReader();try{while(true){const{done}=yield reader.read();if(done)break;}}catch(error){onError==null?void 0:onError(error);}finally{reader.releaseLock();}}();});return _consumeStream.apply(this,arguments);}function createResolvablePromise(){let resolve2;let reject;const promise=new Promise((res,rej)=>{resolve2=res;reject=rej;});return{promise,resolve:resolve2,reject};}// src/util/create-stitchable-stream.ts
function createStitchableStream(){let innerStreamReaders=[];let controller=null;let isClosed=false;let waitForNewStream=createResolvablePromise();const terminate=()=>{isClosed=true;waitForNewStream.resolve();innerStreamReaders.forEach(reader=>reader.cancel());innerStreamReaders=[];controller==null?void 0:controller.close();};const _processPull=/*#__PURE__*/function(){var _ref171=_asyncToGenerator2(function*(){if(isClosed&&innerStreamReaders.length===0){controller==null?void 0:controller.close();return;}if(innerStreamReaders.length===0){waitForNewStream=createResolvablePromise();yield waitForNewStream.promise;return _processPull();}try{const{value,done}=yield innerStreamReaders[0].read();if(done){innerStreamReaders.shift();if(innerStreamReaders.length>0){yield _processPull();}else if(isClosed){controller==null?void 0:controller.close();}}else{controller==null?void 0:controller.enqueue(value);}}catch(error){controller==null?void 0:controller.error(error);innerStreamReaders.shift();terminate();}});return function processPull(){return _ref171.apply(this,arguments);};}();return{stream:new ReadableStream({start(controllerParam){controller=controllerParam;},pull:_processPull,cancel(){return _asyncToGenerator2(function*(){for(const reader of innerStreamReaders){yield reader.cancel();}innerStreamReaders=[];isClosed=true;})();}}),addStream:innerStream=>{if(isClosed){throw new Error("Cannot add inner stream: outer stream is closed");}innerStreamReaders.push(innerStream.getReader());waitForNewStream.resolve();},/**
     * Gracefully close the outer stream. This will let the inner streams
     * finish processing and then close the outer stream.
     */close:()=>{isClosed=true;waitForNewStream.resolve();if(innerStreamReaders.length===0){controller==null?void 0:controller.close();}},/**
     * Immediately close the outer stream. This will cancel all inner streams
     * and close the outer stream.
     */terminate};}// src/util/delayed-promise.ts
var DelayedPromise=class{constructor(){this.status={type:"pending"};this._resolve=void 0;this._reject=void 0;}get promise(){if(this._promise){return this._promise;}this._promise=new Promise((resolve2,reject)=>{if(this.status.type==="resolved"){resolve2(this.status.value);}else if(this.status.type==="rejected"){reject(this.status.error);}this._resolve=resolve2;this._reject=reject;});return this._promise;}resolve(value){var _a17;this.status={type:"resolved",value};if(this._promise){(_a17=this._resolve)==null?void 0:_a17.call(this,value);}}reject(error){var _a17;this.status={type:"rejected",error};if(this._promise){(_a17=this._reject)==null?void 0:_a17.call(this,error);}}};// src/util/now.ts
function now(){var _a17,_b;return(_b=(_a17=globalThis==null?void 0:globalThis.performance)==null?void 0:_a17.now())!=null?_b:Date.now();}function runToolsTransformation(_ref172){let{tools,generatorStream,tracer,telemetry,system,messages,abortSignal,repairToolCall,experimental_context}=_ref172;let toolResultsStreamController=null;const toolResultsStream=new ReadableStream({start(controller){toolResultsStreamController=controller;}});const outstandingToolResults=/* @__PURE__ */new Set();const toolInputs=/* @__PURE__ */new Map();let canClose=false;let finishChunk=void 0;function attemptClose(){if(canClose&&outstandingToolResults.size===0){if(finishChunk!=null){toolResultsStreamController.enqueue(finishChunk);}toolResultsStreamController.close();}}const forwardStream=new TransformStream({transform(chunk,controller){return _asyncToGenerator2(function*(){const chunkType=chunk.type;switch(chunkType){case"stream-start":case"text-start":case"text-delta":case"text-end":case"reasoning-start":case"reasoning-delta":case"reasoning-end":case"tool-input-start":case"tool-input-delta":case"tool-input-end":case"source":case"response-metadata":case"error":case"raw":{controller.enqueue(chunk);break;}case"file":{controller.enqueue({type:"file",file:new DefaultGeneratedFileWithType({data:chunk.data,mediaType:chunk.mediaType})});break;}case"finish":{finishChunk={type:"finish",finishReason:chunk.finishReason,usage:chunk.usage,providerMetadata:chunk.providerMetadata};break;}case"tool-call":{try{const toolCall=yield parseToolCall({toolCall:chunk,tools,repairToolCall,system,messages});controller.enqueue(toolCall);if(toolCall.invalid){toolResultsStreamController.enqueue({type:"tool-error",toolCallId:toolCall.toolCallId,toolName:toolCall.toolName,input:toolCall.input,error:getErrorMessage(toolCall.error),dynamic:true});break;}const tool3=tools[toolCall.toolName];toolInputs.set(toolCall.toolCallId,toolCall.input);if(tool3.onInputAvailable!=null){yield tool3.onInputAvailable({input:toolCall.input,toolCallId:toolCall.toolCallId,messages,abortSignal,experimental_context});}if(tool3.execute!=null&&toolCall.providerExecuted!==true){const toolExecutionId=generateId();outstandingToolResults.add(toolExecutionId);recordSpan({name:"ai.toolCall",attributes:selectTelemetryAttributes({telemetry,attributes:_objectSpread2(_objectSpread2({},assembleOperationName({operationId:"ai.toolCall",telemetry})),{},{"ai.toolCall.name":toolCall.toolName,"ai.toolCall.id":toolCall.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(toolCall.input)}})}),tracer,fn:function(){var _ref173=_asyncToGenerator2(function*(span){let output;try{const stream=executeTool({execute:tool3.execute.bind(tool3),input:toolCall.input,options:{toolCallId:toolCall.toolCallId,messages,abortSignal,experimental_context}});var _iteratorAbruptCompletion4=false;var _didIteratorError4=false;var _iteratorError4;try{for(var _iterator4=_asyncIterator2(stream),_step4;_iteratorAbruptCompletion4=!(_step4=yield _iterator4.next()).done;_iteratorAbruptCompletion4=false){const part=_step4.value;{toolResultsStreamController.enqueue(_objectSpread2(_objectSpread2({},toolCall),{},{type:"tool-result",output:part.output},part.type==="preliminary"&&{preliminary:true}));if(part.type==="final"){output=part.output;}}}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(_iteratorAbruptCompletion4&&_iterator4.return!=null){yield _iterator4.return();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}}catch(error){recordErrorOnSpan(span,error);toolResultsStreamController.enqueue(_objectSpread2(_objectSpread2({},toolCall),{},{type:"tool-error",error}));outstandingToolResults.delete(toolExecutionId);attemptClose();return;}outstandingToolResults.delete(toolExecutionId);attemptClose();try{span.setAttributes(selectTelemetryAttributes({telemetry,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(output)}}}));}catch(ignored){}});return function fn(_x82){return _ref173.apply(this,arguments);};}()});}}catch(error){toolResultsStreamController.enqueue({type:"error",error});}break;}case"tool-result":{const toolName=chunk.toolName;if(chunk.isError){toolResultsStreamController.enqueue({type:"tool-error",toolCallId:chunk.toolCallId,toolName,input:toolInputs.get(chunk.toolCallId),providerExecuted:chunk.providerExecuted,error:chunk.result});}else{controller.enqueue({type:"tool-result",toolCallId:chunk.toolCallId,toolName,input:toolInputs.get(chunk.toolCallId),output:chunk.result,providerExecuted:chunk.providerExecuted});}break;}default:{const _exhaustiveCheck=chunkType;throw new Error("Unhandled chunk type: ".concat(_exhaustiveCheck));}}})();},flush(){canClose=true;attemptClose();}});return new ReadableStream({start(controller){return _asyncToGenerator2(function*(){return Promise.all([generatorStream.pipeThrough(forwardStream).pipeTo(new WritableStream({write(chunk){controller.enqueue(chunk);},close(){}})),toolResultsStream.pipeTo(new WritableStream({write(chunk){controller.enqueue(chunk);},close(){controller.close();}}))]);})();}});}// src/generate-text/stream-text.ts
var originalGenerateId2=createIdGenerator({prefix:"aitxt",size:24});function streamText(_ref174){let{model,tools,toolChoice,system,prompt,messages,maxRetries,abortSignal,headers,stopWhen=stepCountIs(1),experimental_output:output,experimental_telemetry:telemetry,prepareStep,providerOptions,experimental_activeTools,activeTools=experimental_activeTools,experimental_repairToolCall:repairToolCall,experimental_transform:transform,experimental_download:download2,includeRawChunks=false,onChunk,onError=_ref175=>{let{error}=_ref175;console.error(error);},onFinish,onAbort,onStepFinish,experimental_context,_internal:{now:now2=now,generateId:generateId3=originalGenerateId2,currentDate=()=>/* @__PURE__ */new Date()}={}}=_ref174,settings=_objectWithoutProperties(_ref174,_excluded8);return new DefaultStreamTextResult({model:resolveLanguageModel(model),telemetry,headers,settings,maxRetries,abortSignal,system,prompt,messages,tools,toolChoice,transforms:asArray(transform),activeTools,repairToolCall,stopConditions:asArray(stopWhen),output,providerOptions,prepareStep,includeRawChunks,onChunk,onError,onFinish,onAbort,onStepFinish,now:now2,currentDate,generateId:generateId3,experimental_context,download:download2});}function createOutputTransformStream(output){if(!output){return new TransformStream({transform(chunk,controller){controller.enqueue({part:chunk,partialOutput:void 0});}});}let firstTextChunkId=void 0;let text2="";let textChunk="";let lastPublishedJson="";function publishTextChunk(_ref176){let{controller,partialOutput=void 0}=_ref176;controller.enqueue({part:{type:"text-delta",id:firstTextChunkId,text:textChunk},partialOutput});textChunk="";}return new TransformStream({transform(chunk,controller){return _asyncToGenerator2(function*(){if(chunk.type==="finish-step"&&textChunk.length>0){publishTextChunk({controller});}if(chunk.type!=="text-delta"&&chunk.type!=="text-start"&&chunk.type!=="text-end"){controller.enqueue({part:chunk,partialOutput:void 0});return;}if(firstTextChunkId==null){firstTextChunkId=chunk.id;}else if(chunk.id!==firstTextChunkId){controller.enqueue({part:chunk,partialOutput:void 0});return;}if(chunk.type==="text-start"){controller.enqueue({part:chunk,partialOutput:void 0});return;}if(chunk.type==="text-end"){if(textChunk.length>0){publishTextChunk({controller});}controller.enqueue({part:chunk,partialOutput:void 0});return;}text2+=chunk.text;textChunk+=chunk.text;const result=yield output.parsePartial({text:text2});if(result!=null){const currentJson=JSON.stringify(result.partial);if(currentJson!==lastPublishedJson){publishTextChunk({controller,partialOutput:result.partial});lastPublishedJson=currentJson;}}})();}});}var DefaultStreamTextResult=class{constructor(_ref177){let{model,telemetry,headers,settings,maxRetries:maxRetriesArg,abortSignal,system,prompt,messages,tools,toolChoice,transforms,activeTools,repairToolCall,stopConditions,output,providerOptions,prepareStep,includeRawChunks,now:now2,currentDate,generateId:generateId3,onChunk,onError,onFinish,onAbort,onStepFinish,experimental_context,download:download2}=_ref177;this._totalUsage=new DelayedPromise();this._finishReason=new DelayedPromise();this._steps=new DelayedPromise();this.output=output;this.includeRawChunks=includeRawChunks;this.tools=tools;let stepFinish;let recordedContent=[];const recordedResponseMessages=[];let recordedFinishReason=void 0;let recordedTotalUsage=void 0;let recordedRequest={};let recordedWarnings=[];const recordedSteps=[];let rootSpan;let activeTextContent={};let activeReasoningContent={};const eventProcessor=new TransformStream({transform(chunk,controller){return _asyncToGenerator2(function*(){var _a17,_b,_c;controller.enqueue(chunk);const{part}=chunk;if(part.type==="text-delta"||part.type==="reasoning-delta"||part.type==="source"||part.type==="tool-call"||part.type==="tool-result"||part.type==="tool-input-start"||part.type==="tool-input-delta"||part.type==="raw"){yield onChunk==null?void 0:onChunk({chunk:part});}if(part.type==="error"){yield onError({error:wrapGatewayError(part.error)});}if(part.type==="text-start"){activeTextContent[part.id]={type:"text",text:"",providerMetadata:part.providerMetadata};recordedContent.push(activeTextContent[part.id]);}if(part.type==="text-delta"){const activeText=activeTextContent[part.id];if(activeText==null){controller.enqueue({part:{type:"error",error:"text part ".concat(part.id," not found")},partialOutput:void 0});return;}activeText.text+=part.text;activeText.providerMetadata=(_a17=part.providerMetadata)!=null?_a17:activeText.providerMetadata;}if(part.type==="text-end"){delete activeTextContent[part.id];}if(part.type==="reasoning-start"){activeReasoningContent[part.id]={type:"reasoning",text:"",providerMetadata:part.providerMetadata};recordedContent.push(activeReasoningContent[part.id]);}if(part.type==="reasoning-delta"){const activeReasoning=activeReasoningContent[part.id];if(activeReasoning==null){controller.enqueue({part:{type:"error",error:"reasoning part ".concat(part.id," not found")},partialOutput:void 0});return;}activeReasoning.text+=part.text;activeReasoning.providerMetadata=(_b=part.providerMetadata)!=null?_b:activeReasoning.providerMetadata;}if(part.type==="reasoning-end"){const activeReasoning=activeReasoningContent[part.id];if(activeReasoning==null){controller.enqueue({part:{type:"error",error:"reasoning part ".concat(part.id," not found")},partialOutput:void 0});return;}activeReasoning.providerMetadata=(_c=part.providerMetadata)!=null?_c:activeReasoning.providerMetadata;delete activeReasoningContent[part.id];}if(part.type==="file"){recordedContent.push({type:"file",file:part.file});}if(part.type==="source"){recordedContent.push(part);}if(part.type==="tool-call"){recordedContent.push(part);}if(part.type==="tool-result"&&!part.preliminary){recordedContent.push(part);}if(part.type==="tool-error"){recordedContent.push(part);}if(part.type==="start-step"){recordedRequest=part.request;recordedWarnings=part.warnings;}if(part.type==="finish-step"){const stepMessages=toResponseMessages({content:recordedContent,tools});const currentStepResult=new DefaultStepResult({content:recordedContent,finishReason:part.finishReason,usage:part.usage,warnings:recordedWarnings,request:recordedRequest,response:_objectSpread2(_objectSpread2({},part.response),{},{messages:[...recordedResponseMessages,...stepMessages]}),providerMetadata:part.providerMetadata});yield onStepFinish==null?void 0:onStepFinish(currentStepResult);logWarnings(recordedWarnings);recordedSteps.push(currentStepResult);recordedContent=[];activeReasoningContent={};activeTextContent={};recordedResponseMessages.push(...stepMessages);stepFinish.resolve();}if(part.type==="finish"){recordedTotalUsage=part.totalUsage;recordedFinishReason=part.finishReason;}})();},flush(controller){return _asyncToGenerator2(function*(){try{if(recordedSteps.length===0){const error=new NoOutputGeneratedError({message:"No output generated. Check the stream for errors."});self._finishReason.reject(error);self._totalUsage.reject(error);self._steps.reject(error);return;}const finishReason=recordedFinishReason!=null?recordedFinishReason:"unknown";const totalUsage=recordedTotalUsage!=null?recordedTotalUsage:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};self._finishReason.resolve(finishReason);self._totalUsage.resolve(totalUsage);self._steps.resolve(recordedSteps);const finalStep=recordedSteps[recordedSteps.length-1];yield onFinish==null?void 0:onFinish({finishReason,totalUsage,usage:finalStep.usage,content:finalStep.content,text:finalStep.text,reasoningText:finalStep.reasoningText,reasoning:finalStep.reasoning,files:finalStep.files,sources:finalStep.sources,toolCalls:finalStep.toolCalls,staticToolCalls:finalStep.staticToolCalls,dynamicToolCalls:finalStep.dynamicToolCalls,toolResults:finalStep.toolResults,staticToolResults:finalStep.staticToolResults,dynamicToolResults:finalStep.dynamicToolResults,request:finalStep.request,response:finalStep.response,warnings:finalStep.warnings,providerMetadata:finalStep.providerMetadata,steps:recordedSteps});rootSpan.setAttributes(selectTelemetryAttributes({telemetry,attributes:{"ai.response.finishReason":finishReason,"ai.response.text":{output:()=>finalStep.text},"ai.response.toolCalls":{output:()=>{var _a17;return((_a17=finalStep.toolCalls)==null?void 0:_a17.length)?JSON.stringify(finalStep.toolCalls):void 0;}},"ai.response.providerMetadata":JSON.stringify(finalStep.providerMetadata),"ai.usage.inputTokens":totalUsage.inputTokens,"ai.usage.outputTokens":totalUsage.outputTokens,"ai.usage.totalTokens":totalUsage.totalTokens,"ai.usage.reasoningTokens":totalUsage.reasoningTokens,"ai.usage.cachedInputTokens":totalUsage.cachedInputTokens}}));}catch(error){controller.error(error);}finally{rootSpan.end();}})();}});const stitchableStream=createStitchableStream();this.addStream=stitchableStream.addStream;this.closeStream=stitchableStream.close;const reader=stitchableStream.stream.getReader();let stream=new ReadableStream({start(controller){return _asyncToGenerator2(function*(){controller.enqueue({type:"start"});})();},pull(controller){return _asyncToGenerator2(function*(){function abort(){onAbort==null?void 0:onAbort({steps:recordedSteps});controller.enqueue({type:"abort"});controller.close();}try{const{done,value}=yield reader.read();if(done){controller.close();return;}if(abortSignal==null?void 0:abortSignal.aborted){abort();return;}controller.enqueue(value);}catch(error){if(isAbortError(error)&&(abortSignal==null?void 0:abortSignal.aborted)){abort();}else{controller.error(error);}}})();},cancel(reason){return stitchableStream.stream.cancel(reason);}});for(const transform of transforms){stream=stream.pipeThrough(transform({tools,stopStream(){stitchableStream.terminate();}}));}this.baseStream=stream.pipeThrough(createOutputTransformStream(output)).pipeThrough(eventProcessor);const{maxRetries,retry}=prepareRetries({maxRetries:maxRetriesArg,abortSignal});const tracer=getTracer(telemetry);const callSettings=prepareCallSettings(settings);const baseTelemetryAttributes=getBaseTelemetryAttributes({model,telemetry,headers,settings:_objectSpread2(_objectSpread2({},callSettings),{},{maxRetries})});const self=this;recordSpan({name:"ai.streamText",attributes:selectTelemetryAttributes({telemetry,attributes:_objectSpread2(_objectSpread2(_objectSpread2({},assembleOperationName({operationId:"ai.streamText",telemetry})),baseTelemetryAttributes),{},{// specific settings that only make sense on the outer level:
"ai.prompt":{input:()=>JSON.stringify({system,prompt,messages})}})}),tracer,endWhenDone:false,fn:function(){var _ref178=_asyncToGenerator2(function*(rootSpanArg){rootSpan=rootSpanArg;function streamStep(_x84){return _streamStep.apply(this,arguments);}function _streamStep(){_streamStep=_asyncToGenerator2(function(_ref179){let{currentStep,responseMessages,usage}=_ref179;return function*(){var _a17,_b,_c,_d,_e;const includeRawChunks2=self.includeRawChunks;stepFinish=new DelayedPromise();const initialPrompt=yield standardizePrompt({system,prompt,messages});const stepInputMessages=[...initialPrompt.messages,...responseMessages];const prepareStepResult=yield prepareStep==null?void 0:prepareStep({model,steps:recordedSteps,stepNumber:recordedSteps.length,messages:stepInputMessages});const promptMessages=yield convertToLanguageModelPrompt({prompt:{system:(_a17=prepareStepResult==null?void 0:prepareStepResult.system)!=null?_a17:initialPrompt.system,messages:(_b=prepareStepResult==null?void 0:prepareStepResult.messages)!=null?_b:stepInputMessages},supportedUrls:yield model.supportedUrls,download:download2});const stepModel=resolveLanguageModel((_c=prepareStepResult==null?void 0:prepareStepResult.model)!=null?_c:model);const{toolChoice:stepToolChoice,tools:stepTools}=prepareToolsAndToolChoice({tools,toolChoice:(_d=prepareStepResult==null?void 0:prepareStepResult.toolChoice)!=null?_d:toolChoice,activeTools:(_e=prepareStepResult==null?void 0:prepareStepResult.activeTools)!=null?_e:activeTools});const{result:{stream:stream2,response,request},doStreamSpan,startTimestampMs}=yield retry(()=>recordSpan({name:"ai.streamText.doStream",attributes:selectTelemetryAttributes({telemetry,attributes:_objectSpread2(_objectSpread2(_objectSpread2({},assembleOperationName({operationId:"ai.streamText.doStream",telemetry})),baseTelemetryAttributes),{},{// model:
"ai.model.provider":stepModel.provider,"ai.model.id":stepModel.modelId,// prompt:
"ai.prompt.messages":{input:()=>stringifyForTelemetry(promptMessages)},"ai.prompt.tools":{// convert the language model level tools:
input:()=>stepTools==null?void 0:stepTools.map(tool3=>JSON.stringify(tool3))},"ai.prompt.toolChoice":{input:()=>stepToolChoice!=null?JSON.stringify(stepToolChoice):void 0},// standardized gen-ai llm span attributes:
"gen_ai.system":stepModel.provider,"gen_ai.request.model":stepModel.modelId,"gen_ai.request.frequency_penalty":callSettings.frequencyPenalty,"gen_ai.request.max_tokens":callSettings.maxOutputTokens,"gen_ai.request.presence_penalty":callSettings.presencePenalty,"gen_ai.request.stop_sequences":callSettings.stopSequences,"gen_ai.request.temperature":callSettings.temperature,"gen_ai.request.top_k":callSettings.topK,"gen_ai.request.top_p":callSettings.topP})}),tracer,endWhenDone:false,fn:function(){var _ref180=_asyncToGenerator2(function*(doStreamSpan2){return{startTimestampMs:now2(),// get before the call
doStreamSpan:doStreamSpan2,result:yield stepModel.doStream(_objectSpread2(_objectSpread2({},callSettings),{},{tools:stepTools,toolChoice:stepToolChoice,responseFormat:output==null?void 0:output.responseFormat,prompt:promptMessages,providerOptions,abortSignal,headers,includeRawChunks:includeRawChunks2}))};});return function fn(_x85){return _ref180.apply(this,arguments);};}()}));const streamWithToolResults=runToolsTransformation({tools,generatorStream:stream2,tracer,telemetry,system,messages:stepInputMessages,repairToolCall,abortSignal,experimental_context});const stepRequest=request!=null?request:{};const stepToolCalls=[];const stepToolOutputs=[];let warnings;const activeToolCallToolNames={};let stepFinishReason="unknown";let stepUsage={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let stepProviderMetadata;let stepFirstChunk=true;let stepResponse={id:generateId3(),timestamp:currentDate(),modelId:model.modelId};let activeText="";self.addStream(streamWithToolResults.pipeThrough(new TransformStream({transform(chunk,controller){return _asyncToGenerator2(function*(){var _a18,_b2,_c2,_d2;if(chunk.type==="stream-start"){warnings=chunk.warnings;return;}if(stepFirstChunk){const msToFirstChunk=now2()-startTimestampMs;stepFirstChunk=false;doStreamSpan.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":msToFirstChunk});doStreamSpan.setAttributes({"ai.response.msToFirstChunk":msToFirstChunk});controller.enqueue({type:"start-step",request:stepRequest,warnings:warnings!=null?warnings:[]});}const chunkType=chunk.type;switch(chunkType){case"text-start":case"text-end":{controller.enqueue(chunk);break;}case"text-delta":{if(chunk.delta.length>0){controller.enqueue({type:"text-delta",id:chunk.id,text:chunk.delta,providerMetadata:chunk.providerMetadata});activeText+=chunk.delta;}break;}case"reasoning-start":case"reasoning-end":{controller.enqueue(chunk);break;}case"reasoning-delta":{controller.enqueue({type:"reasoning-delta",id:chunk.id,text:chunk.delta,providerMetadata:chunk.providerMetadata});break;}case"tool-call":{controller.enqueue(chunk);stepToolCalls.push(chunk);break;}case"tool-result":{controller.enqueue(chunk);if(!chunk.preliminary){stepToolOutputs.push(chunk);}break;}case"tool-error":{controller.enqueue(chunk);stepToolOutputs.push(chunk);break;}case"response-metadata":{stepResponse={id:(_a18=chunk.id)!=null?_a18:stepResponse.id,timestamp:(_b2=chunk.timestamp)!=null?_b2:stepResponse.timestamp,modelId:(_c2=chunk.modelId)!=null?_c2:stepResponse.modelId};break;}case"finish":{stepUsage=chunk.usage;stepFinishReason=chunk.finishReason;stepProviderMetadata=chunk.providerMetadata;const msToFinish=now2()-startTimestampMs;doStreamSpan.addEvent("ai.stream.finish");doStreamSpan.setAttributes({"ai.response.msToFinish":msToFinish,"ai.response.avgOutputTokensPerSecond":1e3*((_d2=stepUsage.outputTokens)!=null?_d2:0)/msToFinish});break;}case"file":{controller.enqueue(chunk);break;}case"source":{controller.enqueue(chunk);break;}case"tool-input-start":{activeToolCallToolNames[chunk.id]=chunk.toolName;const tool3=tools==null?void 0:tools[chunk.toolName];if((tool3==null?void 0:tool3.onInputStart)!=null){yield tool3.onInputStart({toolCallId:chunk.id,messages:stepInputMessages,abortSignal,experimental_context});}controller.enqueue(_objectSpread2(_objectSpread2({},chunk),{},{dynamic:(tool3==null?void 0:tool3.type)==="dynamic"}));break;}case"tool-input-end":{delete activeToolCallToolNames[chunk.id];controller.enqueue(chunk);break;}case"tool-input-delta":{const toolName=activeToolCallToolNames[chunk.id];const tool3=tools==null?void 0:tools[toolName];if((tool3==null?void 0:tool3.onInputDelta)!=null){yield tool3.onInputDelta({inputTextDelta:chunk.delta,toolCallId:chunk.id,messages:stepInputMessages,abortSignal,experimental_context});}controller.enqueue(chunk);break;}case"error":{controller.enqueue(chunk);stepFinishReason="error";break;}case"raw":{if(includeRawChunks2){controller.enqueue(chunk);}break;}default:{const exhaustiveCheck=chunkType;throw new Error("Unknown chunk type: ".concat(exhaustiveCheck));}}})();},// invoke onFinish callback and resolve toolResults promise when the stream is about to close:
flush(controller){return _asyncToGenerator2(function*(){const stepToolCallsJson=stepToolCalls.length>0?JSON.stringify(stepToolCalls):void 0;try{doStreamSpan.setAttributes(selectTelemetryAttributes({telemetry,attributes:{"ai.response.finishReason":stepFinishReason,"ai.response.text":{output:()=>activeText},"ai.response.toolCalls":{output:()=>stepToolCallsJson},"ai.response.id":stepResponse.id,"ai.response.model":stepResponse.modelId,"ai.response.timestamp":stepResponse.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(stepProviderMetadata),"ai.usage.inputTokens":stepUsage.inputTokens,"ai.usage.outputTokens":stepUsage.outputTokens,"ai.usage.totalTokens":stepUsage.totalTokens,"ai.usage.reasoningTokens":stepUsage.reasoningTokens,"ai.usage.cachedInputTokens":stepUsage.cachedInputTokens,// standardized gen-ai llm span attributes:
"gen_ai.response.finish_reasons":[stepFinishReason],"gen_ai.response.id":stepResponse.id,"gen_ai.response.model":stepResponse.modelId,"gen_ai.usage.input_tokens":stepUsage.inputTokens,"gen_ai.usage.output_tokens":stepUsage.outputTokens}}));}catch(error){}finally{doStreamSpan.end();}controller.enqueue({type:"finish-step",finishReason:stepFinishReason,usage:stepUsage,providerMetadata:stepProviderMetadata,response:_objectSpread2(_objectSpread2({},stepResponse),{},{headers:response==null?void 0:response.headers})});const combinedUsage=addLanguageModelUsage(usage,stepUsage);yield stepFinish.promise;const clientToolCalls=stepToolCalls.filter(toolCall=>toolCall.providerExecuted!==true);const clientToolOutputs=stepToolOutputs.filter(toolOutput=>toolOutput.providerExecuted!==true);if(clientToolCalls.length>0&&// all current tool calls have outputs (incl. execution errors):
clientToolOutputs.length===clientToolCalls.length&&// continue until a stop condition is met:
!(yield isStopConditionMet({stopConditions,steps:recordedSteps}))){responseMessages.push(...toResponseMessages({content:// use transformed content to create the messages for the next step:
recordedSteps[recordedSteps.length-1].content,tools}));try{yield streamStep({currentStep:currentStep+1,responseMessages,usage:combinedUsage});}catch(error){controller.enqueue({type:"error",error});self.closeStream();}}else{controller.enqueue({type:"finish",finishReason:stepFinishReason,totalUsage:combinedUsage});self.closeStream();}})();}})));}();});return _streamStep.apply(this,arguments);}yield streamStep({currentStep:0,responseMessages:[],usage:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0}});});return function fn(_x83){return _ref178.apply(this,arguments);};}()}).catch(error=>{self.addStream(new ReadableStream({start(controller){controller.enqueue({type:"error",error});controller.close();}}));self.closeStream();});}get steps(){this.consumeStream();return this._steps.promise;}get finalStep(){return this.steps.then(steps=>steps[steps.length-1]);}get content(){return this.finalStep.then(step=>step.content);}get warnings(){return this.finalStep.then(step=>step.warnings);}get providerMetadata(){return this.finalStep.then(step=>step.providerMetadata);}get text(){return this.finalStep.then(step=>step.text);}get reasoningText(){return this.finalStep.then(step=>step.reasoningText);}get reasoning(){return this.finalStep.then(step=>step.reasoning);}get sources(){return this.finalStep.then(step=>step.sources);}get files(){return this.finalStep.then(step=>step.files);}get toolCalls(){return this.finalStep.then(step=>step.toolCalls);}get staticToolCalls(){return this.finalStep.then(step=>step.staticToolCalls);}get dynamicToolCalls(){return this.finalStep.then(step=>step.dynamicToolCalls);}get toolResults(){return this.finalStep.then(step=>step.toolResults);}get staticToolResults(){return this.finalStep.then(step=>step.staticToolResults);}get dynamicToolResults(){return this.finalStep.then(step=>step.dynamicToolResults);}get usage(){return this.finalStep.then(step=>step.usage);}get request(){return this.finalStep.then(step=>step.request);}get response(){return this.finalStep.then(step=>step.response);}get totalUsage(){this.consumeStream();return this._totalUsage.promise;}get finishReason(){this.consumeStream();return this._finishReason.promise;}/**
  Split out a new stream from the original stream.
  The original stream is replaced to allow for further splitting,
  since we do not know how many times the stream will be split.
  
  Note: this leads to buffering the stream content on the server.
  However, the LLM results are expected to be small enough to not cause issues.
     */teeStream(){const[stream1,stream2]=this.baseStream.tee();this.baseStream=stream2;return stream1;}get textStream(){return createAsyncIterableStream(this.teeStream().pipeThrough(new TransformStream({transform(_ref181,controller){let{part}=_ref181;if(part.type==="text-delta"){controller.enqueue(part.text);}}})));}get fullStream(){return createAsyncIterableStream(this.teeStream().pipeThrough(new TransformStream({transform(_ref182,controller){let{part}=_ref182;controller.enqueue(part);}})));}consumeStream(options){var _this45=this;return _asyncToGenerator2(function*(){var _a17;try{yield consumeStream({stream:_this45.fullStream,onError:options==null?void 0:options.onError});}catch(error){(_a17=options==null?void 0:options.onError)==null?void 0:_a17.call(options,error);}})();}get experimental_partialOutputStream(){if(this.output==null){throw new NoOutputSpecifiedError();}return createAsyncIterableStream(this.teeStream().pipeThrough(new TransformStream({transform(_ref183,controller){let{partialOutput}=_ref183;if(partialOutput!=null){controller.enqueue(partialOutput);}}})));}toUIMessageStream(){let{originalMessages,generateMessageId,onFinish,messageMetadata,sendReasoning=true,sendSources=false,sendStart=true,sendFinish=true,onError=getErrorMessage$1}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const responseMessageId=generateMessageId!=null?getResponseUIMessageId({originalMessages,responseMessageId:generateMessageId}):void 0;const toolNamesByCallId={};const isDynamic=toolCallId=>{var _a17,_b;const toolName=toolNamesByCallId[toolCallId];const dynamic=((_b=(_a17=this.tools)==null?void 0:_a17[toolName])==null?void 0:_b.type)==="dynamic";return dynamic?true:void 0;};const baseStream=this.fullStream.pipeThrough(new TransformStream({transform:function(){var _ref184=_asyncToGenerator2(function*(part,controller){const messageMetadataValue=messageMetadata==null?void 0:messageMetadata({part});const partType=part.type;switch(partType){case"text-start":{controller.enqueue(_objectSpread2({type:"text-start",id:part.id},part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}));break;}case"text-delta":{controller.enqueue(_objectSpread2({type:"text-delta",id:part.id,delta:part.text},part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}));break;}case"text-end":{controller.enqueue(_objectSpread2({type:"text-end",id:part.id},part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}));break;}case"reasoning-start":{controller.enqueue(_objectSpread2({type:"reasoning-start",id:part.id},part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}));break;}case"reasoning-delta":{if(sendReasoning){controller.enqueue(_objectSpread2({type:"reasoning-delta",id:part.id,delta:part.text},part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}));}break;}case"reasoning-end":{controller.enqueue(_objectSpread2({type:"reasoning-end",id:part.id},part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}));break;}case"file":{controller.enqueue({type:"file",mediaType:part.file.mediaType,url:"data:".concat(part.file.mediaType,";base64,").concat(part.file.base64)});break;}case"source":{if(sendSources&&part.sourceType==="url"){controller.enqueue(_objectSpread2({type:"source-url",sourceId:part.id,url:part.url,title:part.title},part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}));}if(sendSources&&part.sourceType==="document"){controller.enqueue(_objectSpread2({type:"source-document",sourceId:part.id,mediaType:part.mediaType,title:part.title,filename:part.filename},part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}));}break;}case"tool-input-start":{toolNamesByCallId[part.id]=part.toolName;const dynamic=isDynamic(part.id);controller.enqueue(_objectSpread2(_objectSpread2({type:"tool-input-start",toolCallId:part.id,toolName:part.toolName},part.providerExecuted!=null?{providerExecuted:part.providerExecuted}:{}),dynamic!=null?{dynamic}:{}));break;}case"tool-input-delta":{controller.enqueue({type:"tool-input-delta",toolCallId:part.id,inputTextDelta:part.delta});break;}case"tool-call":{toolNamesByCallId[part.toolCallId]=part.toolName;const dynamic=isDynamic(part.toolCallId);if(part.invalid){controller.enqueue(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({type:"tool-input-error",toolCallId:part.toolCallId,toolName:part.toolName,input:part.input},part.providerExecuted!=null?{providerExecuted:part.providerExecuted}:{}),part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}),dynamic!=null?{dynamic}:{}),{},{errorText:onError(part.error)}));}else{controller.enqueue(_objectSpread2(_objectSpread2(_objectSpread2({type:"tool-input-available",toolCallId:part.toolCallId,toolName:part.toolName,input:part.input},part.providerExecuted!=null?{providerExecuted:part.providerExecuted}:{}),part.providerMetadata!=null?{providerMetadata:part.providerMetadata}:{}),dynamic!=null?{dynamic}:{}));}break;}case"tool-result":{const dynamic=isDynamic(part.toolCallId);controller.enqueue(_objectSpread2(_objectSpread2(_objectSpread2({type:"tool-output-available",toolCallId:part.toolCallId,output:part.output},part.providerExecuted!=null?{providerExecuted:part.providerExecuted}:{}),part.preliminary!=null?{preliminary:part.preliminary}:{}),dynamic!=null?{dynamic}:{}));break;}case"tool-error":{const dynamic=isDynamic(part.toolCallId);controller.enqueue(_objectSpread2(_objectSpread2({type:"tool-output-error",toolCallId:part.toolCallId,errorText:onError(part.error)},part.providerExecuted!=null?{providerExecuted:part.providerExecuted}:{}),dynamic!=null?{dynamic}:{}));break;}case"error":{controller.enqueue({type:"error",errorText:onError(part.error)});break;}case"start-step":{controller.enqueue({type:"start-step"});break;}case"finish-step":{controller.enqueue({type:"finish-step"});break;}case"start":{if(sendStart){controller.enqueue(_objectSpread2(_objectSpread2({type:"start"},messageMetadataValue!=null?{messageMetadata:messageMetadataValue}:{}),responseMessageId!=null?{messageId:responseMessageId}:{}));}break;}case"finish":{if(sendFinish){controller.enqueue(_objectSpread2({type:"finish"},messageMetadataValue!=null?{messageMetadata:messageMetadataValue}:{}));}break;}case"abort":{controller.enqueue(part);break;}case"tool-input-end":{break;}case"raw":{break;}default:{const exhaustiveCheck=partType;throw new Error("Unknown chunk type: ".concat(exhaustiveCheck));}}if(messageMetadataValue!=null&&partType!=="start"&&partType!=="finish"){controller.enqueue({type:"message-metadata",messageMetadata:messageMetadataValue});}});return function transform(_x86,_x87){return _ref184.apply(this,arguments);};}()}));return createAsyncIterableStream(handleUIMessageStreamFinish({stream:baseStream,messageId:responseMessageId!=null?responseMessageId:generateMessageId==null?void 0:generateMessageId(),originalMessages,onFinish,onError}));}pipeUIMessageStreamToResponse(response){let _ref185=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let{originalMessages,generateMessageId,onFinish,messageMetadata,sendReasoning,sendSources,sendFinish,sendStart,onError}=_ref185,init=_objectWithoutProperties(_ref185,_excluded9);pipeUIMessageStreamToResponse(_objectSpread2({response,stream:this.toUIMessageStream({originalMessages,generateMessageId,onFinish,messageMetadata,sendReasoning,sendSources,sendFinish,sendStart,onError})},init));}pipeTextStreamToResponse(response,init){pipeTextStreamToResponse(_objectSpread2({response,textStream:this.textStream},init));}toUIMessageStreamResponse(){let _ref186=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};let{originalMessages,generateMessageId,onFinish,messageMetadata,sendReasoning,sendSources,sendFinish,sendStart,onError}=_ref186,init=_objectWithoutProperties(_ref186,_excluded0);return createUIMessageStreamResponse(_objectSpread2({stream:this.toUIMessageStream({originalMessages,generateMessageId,onFinish,messageMetadata,sendReasoning,sendSources,sendFinish,sendStart,onError})},init));}toTextStreamResponse(init){return createTextStreamResponse(_objectSpread2({textStream:this.textStream},init));}};function embed(_x88){return _embed.apply(this,arguments);}function _embed(){_embed=_asyncToGenerator2(function(_ref215){let{model:modelArg,value,providerOptions,maxRetries:maxRetriesArg,abortSignal,headers,experimental_telemetry:telemetry}=_ref215;return function*(){const model=resolveEmbeddingModel(modelArg);const{maxRetries,retry}=prepareRetries({maxRetries:maxRetriesArg,abortSignal});const headersWithUserAgent=withUserAgentSuffix(headers!=null?headers:{},"ai/".concat(VERSION));const baseTelemetryAttributes=getBaseTelemetryAttributes({model,telemetry,headers:headersWithUserAgent,settings:{maxRetries}});const tracer=getTracer(telemetry);return recordSpan({name:"ai.embed",attributes:selectTelemetryAttributes({telemetry,attributes:_objectSpread2(_objectSpread2(_objectSpread2({},assembleOperationName({operationId:"ai.embed",telemetry})),baseTelemetryAttributes),{},{"ai.value":{input:()=>JSON.stringify(value)}})}),tracer,fn:function(){var _ref216=_asyncToGenerator2(function*(span){const{embedding,usage,response,providerMetadata}=yield retry(()=>// nested spans to align with the embedMany telemetry data:
recordSpan({name:"ai.embed.doEmbed",attributes:selectTelemetryAttributes({telemetry,attributes:_objectSpread2(_objectSpread2(_objectSpread2({},assembleOperationName({operationId:"ai.embed.doEmbed",telemetry})),baseTelemetryAttributes),{},{// specific settings that only make sense on the outer level:
"ai.values":{input:()=>[JSON.stringify(value)]}})}),tracer,fn:function(){var _ref217=_asyncToGenerator2(function*(doEmbedSpan){var _a17;const modelResponse=yield model.doEmbed({values:[value],abortSignal,headers:headersWithUserAgent,providerOptions});const embedding2=modelResponse.embeddings[0];const usage2=(_a17=modelResponse.usage)!=null?_a17:{tokens:NaN};doEmbedSpan.setAttributes(selectTelemetryAttributes({telemetry,attributes:{"ai.embeddings":{output:()=>modelResponse.embeddings.map(embedding3=>JSON.stringify(embedding3))},"ai.usage.tokens":usage2.tokens}}));return{embedding:embedding2,usage:usage2,providerMetadata:modelResponse.providerMetadata,response:modelResponse.response};});return function fn(_x101){return _ref217.apply(this,arguments);};}()}));span.setAttributes(selectTelemetryAttributes({telemetry,attributes:{"ai.embedding":{output:()=>JSON.stringify(embedding)},"ai.usage.tokens":usage.tokens}}));return new DefaultEmbedResult({value,embedding,usage,providerMetadata,response});});return function fn(_x100){return _ref216.apply(this,arguments);};}()});}();});return _embed.apply(this,arguments);}var DefaultEmbedResult=class{constructor(options){this.value=options.value;this.embedding=options.embedding;this.usage=options.usage;this.providerMetadata=options.providerMetadata;this.response=options.response;}};// src/generate-object/generate-object.ts
createIdGenerator({prefix:"aiobj",size:24});// src/generate-object/stream-object.ts
createIdGenerator({prefix:"aiobj",size:24});// src/generate-text/output.ts
var output_exports={};__export(output_exports,{object:()=>object,text:()=>text});var text=()=>({type:"text",responseFormat:{type:"text"},parsePartial(_x89){return _asyncToGenerator2(function(_ref187){let{text:text2}=_ref187;return function*(){return{partial:text2};}();}).apply(this,arguments);},parseOutput(_x90){return _asyncToGenerator2(function(_ref188){let{text:text2}=_ref188;return function*(){return text2;}();}).apply(this,arguments);}});var object=_ref189=>{let{schema:inputSchema}=_ref189;const schema=asSchema(inputSchema);return{type:"object",responseFormat:{type:"json",schema:schema.jsonSchema},parsePartial(_x91){return _asyncToGenerator2(function(_ref190){let{text:text2}=_ref190;return function*(){const result=yield parsePartialJson(text2);switch(result.state){case"failed-parse":case"undefined-input":return void 0;case"repaired-parse":case"successful-parse":return{// Note: currently no validation of partial results:
partial:result.value};default:{const _exhaustiveCheck=result.state;throw new Error("Unsupported parse state: ".concat(_exhaustiveCheck));}}}();}).apply(this,arguments);},parseOutput(_x92,_x93){return _asyncToGenerator2(function(_ref191,context){let{text:text2}=_ref191;return function*(){const parseResult=yield safeParseJSON({text:text2});if(!parseResult.success){throw new NoObjectGeneratedError({message:"No object generated: could not parse the response.",cause:parseResult.error,text:text2,response:context.response,usage:context.usage,finishReason:context.finishReason});}const validationResult=yield safeValidateTypes({value:parseResult.value,schema});if(!validationResult.success){throw new NoObjectGeneratedError({message:"No object generated: response did not match schema.",cause:validationResult.error,text:text2,response:context.response,usage:context.usage,finishReason:context.finishReason});}return validationResult.value;}();}).apply(this,arguments);}};};var ClientOrServerImplementationSchema=looseObject({name:string$1(),version:string$1()});var BaseParamsSchema=looseObject({_meta:optional(object$1({}).loose())});var ResultSchema=BaseParamsSchema;var RequestSchema=object$1({method:string$1(),params:optional(BaseParamsSchema)});var ServerCapabilitiesSchema=looseObject({experimental:optional(object$1({}).loose()),logging:optional(object$1({}).loose()),prompts:optional(looseObject({listChanged:optional(boolean$1())})),resources:optional(looseObject({subscribe:optional(boolean$1()),listChanged:optional(boolean$1())})),tools:optional(looseObject({listChanged:optional(boolean$1())}))});ResultSchema.extend({protocolVersion:string$1(),capabilities:ServerCapabilitiesSchema,serverInfo:ClientOrServerImplementationSchema,instructions:optional(string$1())});var PaginatedResultSchema=ResultSchema.extend({nextCursor:optional(string$1())});var ToolSchema=object$1({name:string$1(),description:optional(string$1()),inputSchema:object$1({type:literal("object"),properties:optional(object$1({}).loose())}).loose()}).loose();PaginatedResultSchema.extend({tools:array(ToolSchema)});var TextContentSchema=object$1({type:literal("text"),text:string$1()}).loose();var ImageContentSchema=object$1({type:literal("image"),data:base64(),mimeType:string$1()}).loose();var ResourceContentsSchema=object$1({/**
   * The URI of this resource.
   */uri:string$1(),/**
   * The MIME type of this resource, if known.
   */mimeType:optional(string$1())}).loose();var TextResourceContentsSchema=ResourceContentsSchema.extend({text:string$1()});var BlobResourceContentsSchema=ResourceContentsSchema.extend({blob:base64()});var EmbeddedResourceSchema=object$1({type:literal("resource"),resource:union([TextResourceContentsSchema,BlobResourceContentsSchema])}).loose();ResultSchema.extend({content:array(union([TextContentSchema,ImageContentSchema,EmbeddedResourceSchema])),isError:boolean$1().default(false).optional()}).or(ResultSchema.extend({toolResult:unknown()}));// src/tool/mcp/json-rpc-message.ts
var JSONRPC_VERSION="2.0";var JSONRPCRequestSchema=object$1({jsonrpc:literal(JSONRPC_VERSION),id:union([string$1(),number$1().int()])}).merge(RequestSchema).strict();var JSONRPCResponseSchema=object$1({jsonrpc:literal(JSONRPC_VERSION),id:union([string$1(),number$1().int()]),result:ResultSchema}).strict();var JSONRPCErrorSchema=object$1({jsonrpc:literal(JSONRPC_VERSION),id:union([string$1(),number$1().int()]),error:object$1({code:number$1().int(),message:string$1(),data:optional(unknown())})}).strict();var JSONRPCNotificationSchema=object$1({jsonrpc:literal(JSONRPC_VERSION)}).merge(object$1({method:string$1(),params:optional(BaseParamsSchema)})).strict();union([JSONRPCRequestSchema,JSONRPCNotificationSchema,JSONRPCResponseSchema,JSONRPCErrorSchema]);var textUIPartSchema=object$1({type:literal("text"),text:string$1(),state:_enum(["streaming","done"]).optional(),providerMetadata:providerMetadataSchema.optional()});var reasoningUIPartSchema=object$1({type:literal("reasoning"),text:string$1(),state:_enum(["streaming","done"]).optional(),providerMetadata:providerMetadataSchema.optional()});var sourceUrlUIPartSchema=object$1({type:literal("source-url"),sourceId:string$1(),url:string$1(),title:string$1().optional(),providerMetadata:providerMetadataSchema.optional()});var sourceDocumentUIPartSchema=object$1({type:literal("source-document"),sourceId:string$1(),mediaType:string$1(),title:string$1(),filename:string$1().optional(),providerMetadata:providerMetadataSchema.optional()});var fileUIPartSchema=object$1({type:literal("file"),mediaType:string$1(),filename:string$1().optional(),url:string$1(),providerMetadata:providerMetadataSchema.optional()});var stepStartUIPartSchema=object$1({type:literal("step-start")});var dataUIPartSchema=object$1({type:string$1().startsWith("data-"),id:string$1().optional(),data:unknown()});var dynamicToolUIPartSchemas=[object$1({type:literal("dynamic-tool"),toolName:string$1(),toolCallId:string$1(),state:literal("input-streaming"),input:unknown().optional(),output:never().optional(),errorText:never().optional()}),object$1({type:literal("dynamic-tool"),toolName:string$1(),toolCallId:string$1(),state:literal("input-available"),input:unknown(),output:never().optional(),errorText:never().optional(),callProviderMetadata:providerMetadataSchema.optional()}),object$1({type:literal("dynamic-tool"),toolName:string$1(),toolCallId:string$1(),state:literal("output-available"),input:unknown(),output:unknown(),errorText:never().optional(),callProviderMetadata:providerMetadataSchema.optional(),preliminary:boolean$1().optional()}),object$1({type:literal("dynamic-tool"),toolName:string$1(),toolCallId:string$1(),state:literal("output-error"),input:unknown(),output:never().optional(),errorText:string$1(),callProviderMetadata:providerMetadataSchema.optional()})];var toolUIPartSchemas=[object$1({type:string$1().startsWith("tool-"),toolCallId:string$1(),state:literal("input-streaming"),providerExecuted:boolean$1().optional(),input:unknown().optional(),output:never().optional(),errorText:never().optional()}),object$1({type:string$1().startsWith("tool-"),toolCallId:string$1(),state:literal("input-available"),providerExecuted:boolean$1().optional(),input:unknown(),output:never().optional(),errorText:never().optional(),callProviderMetadata:providerMetadataSchema.optional()}),object$1({type:string$1().startsWith("tool-"),toolCallId:string$1(),state:literal("output-available"),providerExecuted:boolean$1().optional(),input:unknown(),output:unknown(),errorText:never().optional(),callProviderMetadata:providerMetadataSchema.optional(),preliminary:boolean$1().optional()}),object$1({type:string$1().startsWith("tool-"),toolCallId:string$1(),state:literal("output-error"),providerExecuted:boolean$1().optional(),input:unknown(),output:never().optional(),errorText:string$1(),callProviderMetadata:providerMetadataSchema.optional()})];object$1({id:string$1(),role:_enum(["system","user","assistant"]),metadata:unknown().optional(),parts:array(union([textUIPartSchema,reasoningUIPartSchema,sourceUrlUIPartSchema,sourceDocumentUIPartSchema,fileUIPartSchema,stepStartUIPartSchema,dataUIPartSchema,...dynamicToolUIPartSchemas,...toolUIPartSchemas]))});function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),true).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _asyncIterator(r){var n,t,o,e=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,o=Symbol.iterator);e--;){if(t&&null!=(n=r[t]))return n.call(r);if(o&&null!=(n=r[o]))return new AsyncFromSyncIterator(n.call(r));t="@@asyncIterator",o="@@iterator";}throw new TypeError("Object is not async iterable");}function AsyncFromSyncIterator(r){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var n=r.done;return Promise.resolve(r.value).then(function(r){return{value:r,done:n};});}return AsyncFromSyncIterator=function AsyncFromSyncIterator(r){this.s=r,this.n=r.next;},AsyncFromSyncIterator.prototype={s:null,n:null,next:function next(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments));},return:function _return(r){var n=this.s.return;return void 0===n?Promise.resolve({value:r,done:true}):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));},throw:function _throw(r){var n=this.s.return;return void 0===n?Promise.reject(r):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));}},new AsyncFromSyncIterator(r);}/**
 * Function Call class for AI adapter function calling.
 */var FunctionCall=/*#__PURE__*/function(){/**
   * @param {object} spec - The specification of the function being called.
   * @param {object} call - The call object containing arguments and options.
   */function FunctionCall(spec,call){_classCallCheck$1(this,FunctionCall);this.spec=spec;this.call=call;this.status='PENDING';this.thread=null;// thread to run function
this.result=null;// result of function call
this.error=null;// error message if failed
this.onStop=null;// callback when function call stops
}/**
   * Get function call name.
   * @returns {string} - function call name
   */return _createClass$1(FunctionCall,[{key:"name",get:function get(){return this.spec.name;}/**
     * Get function call arguments.
     * @returns {Array} - function call arguments
     */},{key:"args",get:function get(){return this.call.args;}/**
     * Get function call messages.
     * @returns {Array} - function call messages
     */},{key:"messages",get:function get(){return this.call.options.messages;}/**
     * Whether function call is pending.
     * @returns {boolean} - true if function call is pending, false otherwise
     */},{key:"isPending",value:function isPending(){return this.status==='PENDING';}/**
     * Whether function call is finished.
     * @returns {boolean} - true if function call is finished, false otherwise
     */},{key:"isStopped",value:function isStopped(){return this.status==='DONE'||this.status==='FAILED'||this.status==='KILLED';}/**
     * Mark function call as failed.
     */},{key:"failed",value:function failed(){this.status='FAILED';if(this.onStop){this.onStop(this);}}/**
     * Update status of function call based on runtime.
     * @param {Runtime} runtime - the Scratch 3.0 runtime.
     */},{key:"updateStatusOn",value:function updateStatusOn(runtime){if(this.status==='PROCESSING'){if(this.thread&&!runtime.isActiveThread(this.thread)){// Thread has finished
if(this.thread.isKilled){this.status='KILLED';}else{this.status='DONE';}this.thread=null;if(this.onStop){this.onStop(this);}}}}}]);}();// Provider configurations with static imports
var PROVIDER_FACTORIES={Gemini:createGoogleGenerativeAI,OpenAI:createOpenAI,OpenAICompatible:createOpenAICompatible,Anthropic:createAnthropic};var PROVIDERS={Gemini:{id:'gemini',factory:PROVIDER_FACTORIES.Gemini,baseUrl:'https://generativelanguage.googleapis.com/v1beta',defaultModels:{generative:'gemini-flash-latest',embedding:'gemini-embedding-001'},supports:{functionCalling:true,embeddings:true,streaming:true}},OpenAI:{id:'openai',factory:PROVIDER_FACTORIES.OpenAI,baseUrl:'https://api.openai.com/v1',defaultModels:{generative:'gpt-5-mini',embedding:'text-embedding-3-small'},supports:{functionCalling:true,embeddings:true,streaming:true}},OpenAICompatible:{id:'openai-compatible',factory:PROVIDER_FACTORIES.OpenAICompatible,baseUrl:'https://router.huggingface.co/v1',defaultModels:{generative:'HuggingFaceTB/SmolLM3-3B:hf-inference',embedding:'google/embeddinggemma-300m:hf-inference'},supports:{functionCalling:true,embeddings:true,streaming:true}},Anthropic:{id:'anthropic',factory:PROVIDER_FACTORIES.Anthropic,baseUrl:'https://api.anthropic.com/v1',defaultModels:{generative:'claude-3-7-sonnet-latest',embedding:null},supports:{functionCalling:true,embeddings:false,streaming:true}}};// Map of target.id to AIAdapter instances
var AI_ADAPTERS={};/**
 * Multi-provider AI Adapter class using Vercel AI SDK.
 * Provides unified interface for Gemini and OpenAI APIs.
 */var AIAdapter=/*#__PURE__*/function(){/**
   * Constructor for AIAdapter.
   * @param {Target} target - target for the adapter
   */function AIAdapter(target){_classCallCheck$1(this,AIAdapter);AIAdapter.ADAPTERS[target.id]=this;this.apiType=null;this.apiKey=null;this.baseUrl=null;this.modelID=null;this.generationConfig={};this.client=null;this.models=[];this.messages=[];this.lastResult=null;this.lastPartialText=null;// Function calling setup
this.functionRegistry={};this.functionIndex=0;this.functionArgPrefix='arg_';this.functionNamePrefix='func_';this.functionCallingMode=AIAdapter.FUNCTION_CALLING_AUTO;// Abort controllers for cancelling requests
this.abortControllers=[];}/**
   * Set API key.
   * @param {string} apiKey - API key
   */return _createClass$1(AIAdapter,[{key:"setApiKey",value:function setApiKey(apiKey){this.apiKey=apiKey;this.client=null;// Reset client to reinitialize with new API key
this.models=[];// Clear models to reload for new API key
AIAdapter.apiKey=apiKey;// Set default API key for later use
}/**
     * Set base URL.
     * @param {string} baseUrl - base URL
     */},{key:"setBaseUrl",value:function setBaseUrl(baseUrl){this.baseUrl=baseUrl;this.client=null;// Reset client to reinitialize with new base URL
this.models=[];// Clear models to reload for new base URL
AIAdapter.baseUrl=baseUrl;// Set default base URL for later use
}/**
     * Set API type.
     * @param {string} apiType - API type
     */},{key:"setApiType",value:function setApiType(apiType){this.apiType=apiType;this.client=null;// Reset client to reinitialize with new API type
this.models=[];// Clear models to reload for new API type
AIAdapter.apiType=apiType;// Set default API type for later use
}/**
     * Get API type.
     * Returns the explicitly set API type, or infers it from the base URL if not set.
     * @returns {string} - API type
     */},{key:"getApiType",value:function getApiType(){if(this.apiType){return this.apiType;}if(this.baseUrl){// Infer API type from base URL
if(this.baseUrl.startsWith('https://generativelanguage.googleapis.com/v1beta/openai')){return'OpenAICompatible';}else if(this.baseUrl.startsWith('https://generativelanguage.googleapis.com')){return'Gemini';}else if(this.baseUrl.startsWith('https://api.openai.com')){return'OpenAI';}else if(this.baseUrl.startsWith('https://api.anthropic.com')){return'Anthropic';}return'OpenAICompatible';// Default to OpenAICompatible if unable to determine
}return AIAdapter.defaultApiType;}/**
     * Get client. Initialize if not exists.
     * @returns {object} - AI SDK client
     */},{key:"getClient",value:function getClient(){if(!this.client){var providerType=this.getApiType();var provider=PROVIDERS[providerType];if(!provider){throw new Error("Unsupported API type: ".concat(providerType));}if(!this.baseUrl){// Use provider default base URL if not set
this.baseUrl=provider.baseUrl;}var config=_objectSpread(_objectSpread({baseURL:this.baseUrl},this.apiKey&&{apiKey:this.apiKey}),providerType==='OpenAICompatible'&&{supportsStructuredOutputs:true});this.client=provider.factory(config);}return this.client;}/**
     * Get models list.
     * @returns {Promise<Array.<object>>} - a Promise that resolves when the models are loaded
     */},{key:"getModels",value:function(){var _getModels=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var baseUrl,apiType,apiUrl,response,data,_apiUrl,_response,_data,_t,_t2;return _regeneratorRuntime.wrap(function(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(this.models&&this.models.length>0)){_context.next=1;break;}return _context.abrupt("return",this.models);case 1:baseUrl=this.baseUrl||AIAdapter.baseUrl;// If no baseURL is configured, return empty models list
if(baseUrl){_context.next=2;break;}this.models=[];return _context.abrupt("return",this.models);case 2:apiType=this.getApiType();if(!(apiType==='Gemini')){_context.next=9;break;}_context.prev=3;// Use baseURL to fetch models
apiUrl="".concat(baseUrl.replace(/\/$/,''),"/models");_context.next=4;return fetch(apiUrl,{headers:{'x-goog-api-key':this.apiKey}});case 4:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error("Gemini API error: ".concat(response.status));case 5:_context.next=6;return response.json();case 6:data=_context.sent;if(data.models&&Array.isArray(data.models)){this.models=data.models.map(function(model){return{id:model.name.replace('models/','')};});}else{console.warn('Unexpected Gemini API response structure:',data);this.models=[];}_context.next=8;break;case 7:_context.prev=7;_t=_context["catch"](3);console.warn("Failed to fetch models for Gemini:",_t);this.models=[];case 8:_context.next=15;break;case 9:if(!(apiType==='OpenAI'||apiType==='OpenAICompatible')){_context.next=15;break;}_context.prev=10;// Use baseURL to fetch models
_apiUrl="".concat(baseUrl.replace(/\/$/,''),"/models");_context.next=11;return fetch(_apiUrl,{headers:{Authorization:"Bearer ".concat(this.apiKey)}});case 11:_response=_context.sent;if(_response.ok){_context.next=12;break;}throw new Error("OpenAI API error: ".concat(_response.status));case 12:_context.next=13;return _response.json();case 13:_data=_context.sent;this.models=_data.data.map(function(model){return{id:model.id};});_context.next=15;break;case 14:_context.prev=14;_t2=_context["catch"](10);console.warn("Failed to fetch models for OpenAI:",_t2);this.models=[];case 15:return _context.abrupt("return",this.models);case 16:case"end":return _context.stop();}},_callee,this,[[3,7],[10,14]]);}));function getModels(){return _getModels.apply(this,arguments);}return getModels;}()/**
     * Get list of model IDs.
     * @returns {Promise<Array.<string>>} - array of model IDs
     */},{key:"getModelIDs",value:function(){var _getModelIDs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var models;return _regeneratorRuntime.wrap(function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=1;return this.getModels();case 1:models=_context2.sent;return _context2.abrupt("return",models.map(function(model){return model.id;}));case 2:case"end":return _context2.stop();}},_callee2,this);}));function getModelIDs(){return _getModelIDs.apply(this,arguments);}return getModelIDs;}()/**
     * Get list of generative model IDs.
     * @returns {Promise<Array.<string>>} - array of generative model names
     */},{key:"getGenerativeModelList",value:function(){var _getGenerativeModelList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var models;return _regeneratorRuntime.wrap(function(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=1;return this.getModels();case 1:models=_context3.sent;return _context3.abrupt("return",models.map(function(model){return model.id;}));case 2:case"end":return _context3.stop();}},_callee3,this);}));function getGenerativeModelList(){return _getGenerativeModelList.apply(this,arguments);}return getGenerativeModelList;}()/**
     * Convert content parts to a message in Vercel AI SDK format.
     * @param {Array.<string | object>} contentParts - content to convert
     * @returns {object} - message in Vercel AI SDK format
     * @private
     */},{key:"_convertToMessage",value:function _convertToMessage(contentParts){if(!Array.isArray(contentParts)){contentParts=[contentParts];}var textContent='';var parts=[];contentParts.forEach(function(part){if(typeof part==='string'){textContent+=part;}else if(part.type==='text'){textContent+=part.data;}else if(part.type==='dataURL'){var mimeType=part.data.substring(part.data.indexOf(':')+1,part.data.indexOf(';'));parts.push({type:'file',data:part.data,mediaType:mimeType});}});if(textContent){parts.push({type:'text',text:textContent});}return{role:'user',content:parts.length===1&&parts[0].type==='text'?parts[0].text:parts};}/**
     * Execute function call and handle errors properly.
     * @param {FunctionCall} functionCall - function call to execute
     * @param {Function} functionDispatcher - function to dispatch the call
     * @returns {Promise} - result or error
     * @private
     */},{key:"_executeFunctionCall",value:function _executeFunctionCall(functionCall,functionDispatcher){return new Promise(function(resolve,reject){functionCall.onStop=function(call){if(call.status==='FAILED'){// Create a structured error object
var error=new Error(call.error||'Function execution failed');error.name='FunctionExecutionError';error.functionName=call.name;error.functionArgs=call.args;reject(error);}else if(call.status==='KILLED'){var _error=new Error('Function execution was killed');_error.name='FunctionKilledError';_error.functionName=call.name;reject(_error);}else{resolve(call.result);}};functionDispatcher(functionCall);});}/**
     * Build generation parameters from generationConfig for Vercel AI SDK.
     * @returns {object} - generation parameters for generateText/streamText
     * @private
     */},{key:"_buildGenerationParams",value:function _buildGenerationParams(){var params={};// Map generationConfig properties to Vercel AI SDK parameters
if(Object.prototype.hasOwnProperty.call(this.generationConfig,'temperature')){params.temperature=this.generationConfig.temperature;}if(Object.prototype.hasOwnProperty.call(this.generationConfig,'topP')){params.topP=this.generationConfig.topP;}if(Object.prototype.hasOwnProperty.call(this.generationConfig,'topK')){params.topK=this.generationConfig.topK;}if(Object.prototype.hasOwnProperty.call(this.generationConfig,'maxOutputTokens')){params.maxOutputTokens=this.generationConfig.maxOutputTokens;}if(Object.prototype.hasOwnProperty.call(this.generationConfig,'stopSequences')&&Array.isArray(this.generationConfig.stopSequences)&&this.generationConfig.stopSequences.length>0){params.stopSequences=this.generationConfig.stopSequences;}// Handle system instruction - add to system parameter if present
if(Object.prototype.hasOwnProperty.call(this.generationConfig,'systemInstruction')){params.system=this.generationConfig.systemInstruction;}// Handle response schema - experimental structured output
if(Object.prototype.hasOwnProperty.call(this.generationConfig,'responseSchema')){params.output=output_exports.object({schema:jsonSchema(this.generationConfig.responseSchema)});}return params;}/**
     * Build tools array from registered functions.
     * @param {Function} functionDispatcher - function to dispatch the call
     * @returns {Array.<object>} - tools array for Vercel AI SDK
     * @private
     */},{key:"_buildTools",value:function _buildTools(functionDispatcher){var _this=this;var tools={};Object.values(this.functionRegistry).forEach(function(funcSpec){tools[funcSpec.name]=tool({description:funcSpec.description,inputSchema:jsonSchema(funcSpec.parameters),execute:function(){var _execute=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(input,options){var functionCall,result,_t3;return _regeneratorRuntime.wrap(function(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;functionCall=new FunctionCall(funcSpec,{args:input,options:options});// Function execution logic here
_context4.next=1;return _this._executeFunctionCall(functionCall,functionDispatcher);case 1:result=_context4.sent;if(!result){_context4.next=2;break;}return _context4.abrupt("return",{success:true,result:result});case 2:return _context4.abrupt("return");case 3:_context4.prev=3;_t3=_context4["catch"](0);return _context4.abrupt("return",{success:false,error:_t3.message,type:_t3.name||'FunctionExecutionError'});case 4:case"end":return _context4.stop();}},_callee4,null,[[0,3]]);}));function execute(_x,_x2){return _execute.apply(this,arguments);}return execute;}()});});return tools;}/**
     * Get text from response.
     * @param {object} responses - response from AI
     * @return {string} response text
     */},{key:"getTextFromResponse",value:function getTextFromResponse(responses){var _this2=this;if(!responses){return'';}if(typeof responses==='string'){return responses;}if(Array.isArray(responses)){return responses.map(function(r){return _this2._extractTextFromSingleResponse(r);}).join('');}return this._extractTextFromSingleResponse(responses);}/**
     * Extract text from a single response object.
     * @param {object} response - single response object
     * @returns {string} - extracted text
     * @private
     */},{key:"_extractTextFromSingleResponse",value:function _extractTextFromSingleResponse(response){var _response$name;if(typeof response==='string'){return response;}if(response.text){return response.text;}if(response.content){return response.content;}// Handle AI SDK response format with messages array
if(response.messages&&Array.isArray(response.messages)){return response.messages.map(function(msg){if(typeof msg.content==='string'){return msg.content;}if(Array.isArray(msg.content)){return msg.content.filter(function(c){return c.type==='text';}).map(function(c){return c.text;}).join('');}return'';}).join('');}if(response.message&&response.message.content){return response.message.content;}if((_response$name=response.name)!==null&&_response$name!==void 0&&_response$name.includes('Error')){return response.message||response.name;}return'';}/**
     * Get last result object from AI.
     * @returns {object} - last result
     */},{key:"getLastResult",value:function getLastResult(){return this.lastResult;}/**
     * Set last result from AI.
     * @param {object} result - last result
     * @returns {void}
     */},{key:"setLastResult",value:function setLastResult(result){this.lastResult=result;}/**
     * Get result files from last result.
     * @returns {Array.<{base64: string, mediaType: string}>} - array of result files
     */},{key:"getResultFiles",value:function getResultFiles(){if(!this.lastResult){return[];}return this.lastResult.files||[];}/**
     * Get last response text from AI.
     * @returns {string} - last response text
     */},{key:"getLastResponseText",value:function getLastResponseText(){return this.lastResponseText;}/**
     * Set last response text from AI.
     * @param {string} text - last response text
     * @returns {void}
     */},{key:"setLastResponseText",value:function setLastResponseText(text){this.lastResponseText=text;}/**
     * Set last partial text from AI.
     * @param {string} text - last partial text
     * @returns {void}
     */},{key:"setLastPartialText",value:function setLastPartialText(text){this.lastPartialText=text;}/**
     * Get last partial text from AI.
     * @returns {string} - last partial text
     */},{key:"getLastPartialText",value:function getLastPartialText(){return this.lastPartialText;}/**
     * Register a function for generation.
     * @param {string} procedureCode - code of the procedure to register
     * @param {string} functionDescription - description of the function
     * @param {Array.<{type: string, description: string, code: string}>} procedureArguments
     *  - arguments of the procedure
     * @returns {void}
     */},{key:"registerFunction",value:function registerFunction(procedureCode,functionDescription,procedureArguments){var _this3=this;var functionName;var existingSpec=this.getFunctionSpec(procedureCode);if(existingSpec){// If function already exists, update it
functionName=existingSpec.name;}else{this.functionIndex=this.functionIndex+1;functionName="".concat(this.functionNamePrefix).concat(this.functionIndex);}var parameters={type:'object',properties:{},required:[]};var argumentDict={};if(procedureArguments&&procedureArguments.length>0){procedureArguments.forEach(function(argSpec,index){var paramName="".concat(_this3.functionArgPrefix).concat(index);parameters.properties[paramName]={type:argSpec.type,description:argSpec.description};parameters.required.push(paramName);argumentDict[paramName]=argSpec.code;});}this.functionRegistry[functionName]={name:functionName,procedureCode:procedureCode,description:functionDescription,parameters:parameters,argumentDict:argumentDict};}/**
     * Get function specification by procedure code.
     * @param {string} procedureCode - code of the procedure to get specification for
     * @returns {object|null} - function specification or null if not found
     */},{key:"getFunctionSpec",value:function getFunctionSpec(procedureCode){return Object.values(this.functionRegistry).find(function(func){return func.procedureCode===procedureCode;});}/**
     * Erase a function from registered functions.
     * @param {string} procedureCode - code of the procedure to erase
     * @returns {void}
     */},{key:"unregisterFunction",value:function unregisterFunction(procedureCode){var functionSpec=this.getFunctionSpec(procedureCode);if(functionSpec){delete this.functionRegistry[functionSpec.name];}}/**
     * Unregister all functions.
     * @returns {void}
     */},{key:"clearRegisteredFunctions",value:function clearRegisteredFunctions(){var _this4=this;Object.keys(this.functionRegistry).forEach(function(key){delete _this4.functionRegistry[key];});this.functionIndex=0;}/**
     * Set function calling mode for AI generation.
     * @param {string} mode - function calling mode ('none', 'auto', 'required')
     * @returns {void}
     */},{key:"setFunctionCallingMode",value:function setFunctionCallingMode(mode){this.functionCallingMode=mode;}/**
     * Send generator type prompt to AI.
     * @param {Array.<string | object>} prompt - the original prompt to AI
     * @param {function} responseTextHandler - A function to handle response text.
     * @param {function} functionDispatcher - A function to dispatch tool calls.
     * @param {function} partialTextHandler - A function to handle partial text responses.
     * @param {boolean} isChat - A flag indicating if the request is for chat.
     * @returns {Promise<[object, Array.<object>]>} - a Promise that resolves
     *  to an array with response and function calls
     */},{key:"requestGenerate",value:function(){var _requestGenerate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(prompt,responseTextHandler,functionDispatcher,partialTextHandler,isChat){var _this5=this;var promptMessage,messages,abortController,client,tools,functionCallingEnabled,toolExists,generator,modelId,generationParams,result,_iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,textPart,_this$messages,response,_t4,_t5;return _regeneratorRuntime.wrap(function(_context5){while(1)switch(_context5.prev=_context5.next){case 0:promptMessage=this._convertToMessage(prompt);messages=isChat?this.messages:[];messages.push(promptMessage);// Create abort controller for this request
abortController=this._createAbortController();_context5.prev=1;client=this.getClient();tools=this._buildTools(functionDispatcher);functionCallingEnabled=this.functionCallingMode!==AIAdapter.FUNCTION_CALLING_NONE;toolExists=Object.keys(tools).length>0&&functionCallingEnabled;generator=partialTextHandler?streamText:generateText;modelId=this.getModel('generative');// Apply generation config to Vercel AI SDK parameters
generationParams=this._buildGenerationParams();_context5.next=2;return generator(_objectSpread(_objectSpread(_objectSpread(_objectSpread({model:client.languageModel(modelId),messages:messages},toolExists&&{tools:tools,toolChoice:this.functionCallingMode}),generationParams),{},{abortSignal:abortController.signal,onAbort:function onAbort(abortEvent){console.debug(abortEvent);},stopWhen:stepCountIs(5),onStepFinish:function onStepFinish(step){_this5.setLastResponseText(step.text);if(typeof responseTextHandler==='function'){responseTextHandler(step.text);}}},'responseSchema'in this.generationConfig&&{experimental_output:output_exports.object({schema:jsonSchema(this.generationConfig.responseSchema)})}),{},{headers:_objectSpread({},this.getApiType()==='Anthropic'&&{'anthropic-dangerous-direct-browser-access':'true'})}));case 2:result=_context5.sent;if(!partialTextHandler){_context5.next=14;break;}_iteratorAbruptCompletion=false;_didIteratorError=false;_context5.prev=3;_iterator=_asyncIterator(result.textStream);case 4:_context5.next=5;return _iterator.next();case 5:if(!(_iteratorAbruptCompletion=!(_step=_context5.sent).done)){_context5.next=7;break;}textPart=_step.value;this.setLastPartialText(textPart);partialTextHandler(textPart);case 6:_iteratorAbruptCompletion=false;_context5.next=4;break;case 7:_context5.next=9;break;case 8:_context5.prev=8;_t4=_context5["catch"](3);_didIteratorError=true;_iteratorError=_t4;case 9:_context5.prev=9;_context5.prev=10;if(!(_iteratorAbruptCompletion&&_iterator.return!=null)){_context5.next=11;break;}_context5.next=11;return _iterator.return();case 11:_context5.prev=11;if(!_didIteratorError){_context5.next=12;break;}throw _iteratorError;case 12:return _context5.finish(11);case 13:return _context5.finish(9);case 14:this.setLastResult(result);if(!isChat){_context5.next=16;break;}_context5.next=15;return result.response;case 15:response=_context5.sent;(_this$messages=this.messages).push.apply(_this$messages,_toConsumableArray(response.messages));case 16:return _context5.abrupt("return",result);case 17:_context5.prev=17;_t5=_context5["catch"](1);this.setLastResult(_t5);throw _t5;case 18:_context5.prev=18;// Remove the abort controller from the array when request is finished
this._removeAbortController(abortController);return _context5.finish(18);case 19:case"end":return _context5.stop();}},_callee5,this,[[1,17,18,19],[3,8,9,14],[10,,11,13]]);}));function requestGenerate(_x3,_x4,_x5,_x6,_x7){return _requestGenerate.apply(this,arguments);}return requestGenerate;}()/**
     * Get chat history.
     * @returns {Array.<string>} - chat history
     */},{key:"getChatHistory",value:function getChatHistory(){return this.messages;}/**
     * Set chat history.
     * @param {Array.<string>} history - history of chat
     * @returns {void}
     */},{key:"startChat",value:function startChat(history){this.messages=history||[];}/**
     * Request embedding of content.
     * @param {Array.<string> | string} contentParts - content to AI
     * @returns {Promise<number[]>} - a Promise that resolves to embedding vector
     */},{key:"requestEmbedding",value:function(){var _requestEmbedding=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(contentParts){var text,modelId,abortController,client,_yield$embed,embedding,_t6;return _regeneratorRuntime.wrap(function(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(!(!contentParts||!contentParts.length)){_context6.next=1;break;}return _context6.abrupt("return",[]);case 1:if(typeof contentParts==='string'){contentParts=[contentParts];}text=contentParts.reduce(function(acc,p){if(typeof p==='string'){return acc+p;}if(p.type==='text'){return acc+p.data;}return acc;},'');modelId=this.getModel('embedding');// Create abort controller for this request
abortController=this._createAbortController();_context6.prev=2;client=this.getClient();_context6.next=3;return embed({model:client.textEmbeddingModel(modelId),value:text,abortSignal:abortController.signal});case 3:_yield$embed=_context6.sent;embedding=_yield$embed.embedding;return _context6.abrupt("return",embedding);case 4:_context6.prev=4;_t6=_context6["catch"](2);if(!(_t6.name==='AI_APICallError')){_context6.next=5;break;}throw new Error("API call error: ".concat(_t6.responseBody," URL: ").concat(_t6.url));case 5:throw _t6;case 6:_context6.prev=6;// Remove the abort controller from the array when request is finished
this._removeAbortController(abortController);return _context6.finish(6);case 7:case"end":return _context6.stop();}},_callee6,this,[[2,4,6,7]]);}));function requestEmbedding(_x8){return _requestEmbedding.apply(this,arguments);}return requestEmbedding;}()/**
     * Get model code for specific model type.
     * @param {string} supportedType - type of model ('generative' | 'embedding')
     * @returns {string} - model code
     */},{key:"getModel",value:function getModel(){var supportedType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'generative';if(this.modelID){return this.modelID;}return PROVIDERS[this.getApiType()].defaultModels[supportedType];}/**
     * Set and validate model code for specific model type.
     * @param {string} modelID - model code to set
     * @param {string} modelType - type of model ('generative' | 'embedding')
     * @returns {Promise<string>} A promise that resolves to success message or error message
     */},{key:"setModel",value:function setModel(modelID){if(!modelID||!modelID.trim()){return Promise.resolve('Model ID is empty');}this.modelID=modelID;return Promise.resolve("Model \"".concat(modelID,"\" set successfully"));}/**
     * Abort all ongoing requests for this adapter.
     * This will cancel all in-flight requests.
     * @param {string} reason - reason for aborting requests
     * @returns {void}
     */},{key:"abortRequests",value:function abortRequests(reason){this.abortControllers.forEach(function(controller){if(controller){controller.abort(reason);}});this.abortControllers=[];}/**
     * Create a new abort controller for requests.
     * @returns {AbortController} - new abort controller
     * @private
     */},{key:"_createAbortController",value:function _createAbortController(){// Create new abort controller without aborting existing requests
var abortController=new AbortController();// Add to the list of controllers
this.abortControllers.push(abortController);// Clean up completed controllers (optional optimization)
this.abortControllers=this.abortControllers.filter(function(controller){return controller&&!controller.signal.aborted;});return abortController;}/**
     * Remove a specific abort controller from the array.
     * @param {AbortController} abortController - controller to remove
     * @returns {void}
     * @private
     */},{key:"_removeAbortController",value:function _removeAbortController(abortController){var index=this.abortControllers.indexOf(abortController);if(index!==-1){this.abortControllers.splice(index,1);}}}],[{key:"ADAPTERS",get:/**
     * Get adapters map.
     * @returns {object.<string, AIAdapter>} - adapters with target.id as key
     * @static
     */function get(){return AI_ADAPTERS;}/**
     * Default model code for each provider and data type.
     * @returns {object} model code for provider and data type
     */},{key:"existsForTarget",value:/**
     * Check if AI Adapter exists for target.
     * @param {Target} target - target to check
     * @returns {boolean} - whether AI Adapter exists for target
     * @static
     * @public
     */function existsForTarget(target){return!!AIAdapter.ADAPTERS[target.id];}/**
     * Get AI Adapter for target. Initialize if not exists.
     * @param {Target} target - target to get AI Adapter
     * @returns {AIAdapter} - AI Adapter
     */},{key:"getForTarget",value:function getForTarget(target){var ai=AIAdapter.ADAPTERS[target.id];if(ai){return ai;}return new AIAdapter(target);}/**
     * Remove AI Adapter for target.
     * @param {Target} target - target to remove AI Adapter
     * @returns {void}
     */},{key:"removeForTarget",value:function removeForTarget(target){delete AIAdapter.ADAPTERS[target.id];}/**
     * Remove all AI Adapters.
     */},{key:"removeAllAdapter",value:function removeAllAdapter(){Object.keys(AIAdapter.ADAPTERS).forEach(function(key){delete AIAdapter.ADAPTERS[key];});}/**
     * Get API key.
     * @returns {string} - API key
     */},{key:"getApiKey",value:function getApiKey(){return AIAdapter.apiKey;}/**
     * Set API key.
     * @param {string} key - API key
     * @returns {void}
     */},{key:"setApiKey",value:function setApiKey(key){AIAdapter.apiKey=key;}/**
     * Abort all requests for all adapters.
     * @param {string} reason - reason for aborting requests
     */},{key:"abortAllRequests",value:function abortAllRequests(reason){Object.values(AIAdapter.ADAPTERS).forEach(function(adapter){adapter.abortRequests(reason);});}}]);}();_defineProperty(AIAdapter,"DEFAULT_MODEL_ID",{generative:PROVIDERS.Gemini.defaultModels.generative,embedding:PROVIDERS.Gemini.defaultModels.embedding});/**
 * API key for AI services.
 * @type {string}
 */_defineProperty(AIAdapter,"apiKey",null);/**
 * Base URL for AI services.
 * @type {string}
 */_defineProperty(AIAdapter,"baseUrl",null);/**
 * Default API type for AI services.
 * @type {string}
 */_defineProperty(AIAdapter,"defaultApiType",'Gemini');/**
 * Function calling modes for AI operations.
 * @returns {object} function calling modes
 */_defineProperty(AIAdapter,"FUNCTION_CALLING_NONE",'none');_defineProperty(AIAdapter,"FUNCTION_CALLING_AUTO",'auto');_defineProperty(AIAdapter,"FUNCTION_CALLING_REQUIRED",'required');/**
 * Convert full-width characters to half-width characters.
 * @param {string} str - string to convert
 * @returns {string} - converted string
 */var convertToHalfWidthInt=function convertToHalfWidthInt(str){return str.replace(/[０-９]/g,function(s){return String.fromCharCode(s.charCodeAt(0)-0xFEE0);}).replace(/[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]/g,'-');};/**
 * Convert array index from one-base to zero-base.
 * If index is negative, it is converted from the end of the array.
 * Returns most close index if index is out of range.
 * @param {number} index - one-base array index
 * @param {number} length - array length
 * @returns {number | undefined} - converted array index
 */var convertToZeroBaseIndex=function convertToZeroBaseIndex(index,length){if(length===0){return;}if(index>length){return length-1;}if(index<0){index=length+index;if(index<0){return 0;}}else{index--;}return index;};/**
 * Convert costume to dataURL.
 * @param {!object} costume - costume
 * @param {string?} format - format of the dataURL default is 'png'
 * @returns {Promise<string>} - a Promise that resolves when the image is converted
 */var costumeToDataURL=function costumeToDataURL(costume){var format=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'png';if(costume.asset.dataFormat===format){return Promise.resolve(costume.asset.encodeDataURI());}var blob=new Blob([costume.asset.data],{type:costume.asset.assetType.contentType});var imageElement=new Image();imageElement.src=URL.createObjectURL(blob);return new Promise(function(resolve){imageElement.onload=function(e){URL.revokeObjectURL(imageElement.src);var img=e.target;var canvas=document.createElement('canvas');canvas.width=img.width;canvas.height=img.height;var ctx=canvas.getContext('2d');ctx.drawImage(img,0,0);var imageData=canvas.toDataURL("image/".concat(format));resolve(imageData);};});};/**
 * Get costume index by name or number.
 * If costumeName was not found and it is a number, it is treated as a one-base index.
 * Then that index was a negative number, it is treated as an index from the end of the costume list.
 * @param {Target!} target - target to get costume
 * @param {string} costumeName - name or number of the costume
 * @returns {number?} - costume index
 */var getCostumeIndexByNameOrNumber=function getCostumeIndexByNameOrNumber(target,costumeName){var costumeArray=target.getCostumes();var costumeIndex=costumeArray.findIndex(function(c){return c.name===costumeName;});if(costumeIndex===-1){var costumeNumber=parseInt(convertToHalfWidthInt(costumeName),10);if(isNaN(costumeNumber)||costumeNumber===0){return null;}costumeIndex=convertToZeroBaseIndex(costumeNumber,costumeArray.length);}return costumeIndex;};/**
 * Get costume by name or number.
 * If costumeName was not found and it is a number, it is treated as a one-base index.
 * Then that index was a negative number, it is treated as an index from the end of the costume list.
 * @param {Target!} target - target to get costume
 * @param {string} costumeName - name or number of the costume
 * @returns {Costume?} - costume
 */var getCostumeByNameOrNumber=function getCostumeByNameOrNumber(target,costumeName){var costumeIndex=getCostumeIndexByNameOrNumber(target,costumeName);if(costumeIndex===null){return;}return target.getCostumes()[costumeIndex];};/**
 * Create SVG costume to target.
 * @param {string} svgData - SVG data string
 * @param {Runtime} runtime - runtime
 * @param {string} imageName - name of the costume
 * @returns {void}
 */var createAndAddSvgCostume=function createAndAddSvgCostume(svgData,runtime,imageName){var svgBytes=new TextEncoder().encode(svgData);var asset=runtime.storage.createAsset(runtime.storage.AssetType.ImageVector,runtime.storage.DataFormat.SVG,svgBytes,null,true// generate md5
);var newCostume={name:imageName,dataFormat:runtime.storage.DataFormat.SVG,asset:asset,md5:"".concat(asset.assetId,".svg"),assetId:asset.assetId};// Create SVG skin
newCostume.skinId=runtime.renderer.createSVGSkin(svgData);newCostume.size=runtime.renderer.getSkinSize(newCostume.skinId);var rotationCenter=runtime.renderer.getSkinRotationCenter(newCostume.skinId);newCostume.rotationCenterX=rotationCenter[0];newCostume.rotationCenterY=rotationCenter[1];newCostume.bitmapResolution=1;return newCostume;};/**
 * Insert image as an SVG costume at the specified index.
 * @param {Runtime} runtime - runtime
 * @param {Target} target - target to add costume
 * @param {string} dataURL - image data
 * @param {number} width - desired width for the costume (optional, defaults to stage size)
 * @param {number} height - desired height for the costume (optional, defaults to stage size)
 * @param {string} imageName - name of the costume
 * @param {number} insertIndex - index to insert the costume (optional, 0-based, defaults to end of the list)
 * @returns {Promise} - a Promise that resolves when the image is added
*/var insertImageAsSvgCostume=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(runtime,target,dataURL,width,height){var imageName,insertIndex,mimeString,svgData,byteString,image,originalWidth,originalHeight,defaultStageWidth,defaultStageHeight,hasCustomWidth,hasCustomHeight,useCustomSize,svgViewportWidth,svgViewportHeight,stageScale,scale,scaledWidth,scaledHeight,translateX,translateY,formatNumber,svgAttributes,imageTransform,newCostume,currentCostumeIndex,finalCostumeIndex,_args2=arguments;return _regeneratorRuntime.wrap(function(_context2){while(1)switch(_context2.prev=_context2.next){case 0:imageName=_args2.length>5&&_args2[5]!==undefined?_args2[5]:'costume';insertIndex=_args2.length>6?_args2[6]:undefined;mimeString=dataURL.split(',')[0].split(':')[1].split(';')[0];if(!(mimeString==='image/svg+xml')){_context2.next=1;break;}// Convert base64 to raw binary data for SVG
if(dataURL.split(',')[0].indexOf('base64')>=0){byteString=atob(dataURL.split(',')[1]);}else{byteString=decodeURI(dataURL.split(',')[1]);}svgData=byteString;_context2.next=4;break;case 1:if(!(mimeString==='image/jpeg'||mimeString==='image/png')){_context2.next=3;break;}// Create an SVG wrapper for bitmap images
image=new Image();_context2.next=2;return new Promise(function(resolve,reject){image.onload=resolve;image.onerror=function(){return reject(new Error('Costume load failed. Asset could not be read.'));};image.src=dataURL;});case 2:originalWidth=image.naturalWidth||image.width;originalHeight=image.naturalHeight||image.height;defaultStageWidth=480;defaultStageHeight=360;hasCustomWidth=typeof width==='number'&&!Number.isNaN(width)&&width>0;hasCustomHeight=typeof height==='number'&&!Number.isNaN(height)&&height>0;useCustomSize=hasCustomWidth&&hasCustomHeight;if(useCustomSize){svgViewportWidth=width;svgViewportHeight=height;}else{stageScale=Math.min(1,defaultStageWidth/originalWidth,defaultStageHeight/originalHeight);svgViewportWidth=Math.max(1,Math.round(originalWidth*stageScale));svgViewportHeight=Math.max(1,Math.round(originalHeight*stageScale));}scale=Math.min(svgViewportWidth/originalWidth,svgViewportHeight/originalHeight);scaledWidth=originalWidth*scale;scaledHeight=originalHeight*scale;translateX=(svgViewportWidth-scaledWidth)/2;translateY=(svgViewportHeight-scaledHeight)/2;formatNumber=function formatNumber(value){return Number.isInteger(value)?value:Number(value.toFixed(2));};svgAttributes=['version="1.1"','xmlns="http://www.w3.org/2000/svg"','xmlns:xlink="http://www.w3.org/1999/xlink"',"width=\"".concat(formatNumber(svgViewportWidth),"\""),"height=\"".concat(formatNumber(svgViewportHeight),"\""),"viewBox=\"0 0 ".concat(formatNumber(svgViewportWidth)," ").concat(formatNumber(svgViewportHeight),"\"")].join(' ');imageTransform=["translate(".concat(formatNumber(translateX),",").concat(formatNumber(translateY),")"),"scale(".concat(formatNumber(scale),")")].join(' ');svgData="<svg ".concat(svgAttributes,">\n  <image width=\"").concat(formatNumber(originalWidth),"\" height=\"").concat(formatNumber(originalHeight),"\" ")+"transform=\"".concat(imageTransform,"\" xlink:href=\"").concat(dataURL,"\"/>\n</svg>");_context2.next=4;break;case 3:throw new Error("Unsupported image type: ".concat(mimeString));case 4:newCostume=createAndAddSvgCostume(svgData,runtime,imageName);currentCostumeIndex=target.currentCostume;finalCostumeIndex=typeof insertIndex==='number'?insertIndex:target.getCostumes().length;target.addCostume(newCostume,finalCostumeIndex);target.setCostume(currentCostumeIndex);runtime.emitProjectChanged();return _context2.abrupt("return",newCostume);case 5:case"end":return _context2.stop();}},_callee2);}));return function insertImageAsSvgCostume(_x4,_x5,_x6,_x7,_x8){return _ref2.apply(this,arguments);};}();function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:true}:{done:false,value:r[_n++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=true,u=false;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=true,o=r;},f:function f(){try{a||null==t.return||t.return();}finally{if(u)throw o;}}};}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0;}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}/**
 * Parse content parts text.
 * @param {string} contentPartsText - content parts text
 * @returns {string[]} - content part directives
 */var parseContentPartsText=function parseContentPartsText(contentPartsText){var parser=/(.*?)[\s\u3000"'`[{(,.]*(data:\w+\/[\w+-]+;base64,[a-zA-Z0-9+/=]+)[\s\u3000"'`\]}),.]*|(.*)/gi;var contentPartDirectives=[];var matches=contentPartsText.matchAll(parser);var _iterator=_createForOfIteratorHelper(matches),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var match=_step.value;if(match[1])contentPartDirectives.push(match[1]);if(match[2])contentPartDirectives.push(match[2]);if(match[3])contentPartDirectives.push(match[3]);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return contentPartDirectives;};/**
 * Interpret content part directives.
 * @param {string[]} contentPartDirectives - content part directives
 * @param {Target} requester - target which is requesting to AI
 * @param {Runtime} runtime - runtime
 * @returns {object[]} - content parts
 */var interpretContentPartDirectives=function interpretContentPartDirectives(contentPartDirectives){return contentPartDirectives.map(function(directive){if(directive.trim().match(/data:\w+\/[\w+-]+;base64,[a-zA-Z0-9+/=]+/)){return{type:'dataURL',data:directive};}return{type:'text',data:directive};});};/**
 * Interpret content parts text.
 * @param {string} contentPartsText - content parts text
 * @returns {object[]} - content parts
 */var interpretContentPartsText=function interpretContentPartsText(contentPartsText){var contentPartDirectives=parseContentPartsText(contentPartsText);var contentParts=interpretContentPartDirectives(contentPartDirectives);return contentParts;};/**
 * Applies a function to each element of an array and returns the results in a new array.
 * @param {function} func - function to apply
 * @param {Array} arg1 - array to map over
 * @param {Array} arg2 - array to map over
 * @returns {Array} - mapped array
 */var zipWith=function zipWith(func,arg1,arg2){var arg2Length=arg2.length;return(arg1.length<=arg2Length?arg1:arg1.slice(0,arg2Length)).map(function(x,i){return func(x,arg2[i]);});};/**
 * Computes the euclidean distance between two vectors.
 * @param {number[]} vectorA - vector A
 * @param {number[]} vectorB - vector B
 * @returns {number} - euclidean distance
 * @see {@link https://en.wikipedia.org/wiki/Euclidean_distance}
 */var euclideanDistance=function euclideanDistance(vectorA,vectorB){return Math.hypot.apply(Math,_toConsumableArray(zipWith(function(a,b){return a-b;},vectorA,vectorB)));};/**
 * Computes the dot product of two vectors.
 * @param {number[]} vectorA - vector A
 * @param {number[]} vectorB - vector B
 * @returns {number} - dot product
 */var dotProduct=function dotProduct(vectorA,vectorB){return zipWith(function(a,b){return a*b;},vectorA,vectorB).reduce(function(a,b){return a+b;},0);};/**
 * Computes the cosine distance between two vectors.
 * @param {number[]} vectorA - vector A
 * @param {number[]} vectorB - vector B
 * @returns {number} - cosine distance
 * @see {@link https://en.wikipedia.org/wiki/Cosine_similarity}
 */var cosineDistance=function cosineDistance(vectorA,vectorB){var dotProd=dotProduct(vectorA,vectorB);var normA=Math.hypot.apply(Math,_toConsumableArray(vectorA));var normB=Math.hypot.apply(Math,_toConsumableArray(vectorB));return 1-dotProd/(normA*normB);};/**
 * Get all user-defined procedures from the target
 * @param {Target} target - the target to get procedures from
 * @returns {Array} - array of procedure information
 */var getUserProcedures=function getUserProcedures(target){var procedures=[];var blocks=target.blocks._blocks;var _loop=function _loop(){var block=blocks[blockId];if(block.opcode==='procedures_definition'){// Get the procedure prototype
var prototypeId=block.inputs.custom_block.block;var prototype=blocks[prototypeId];if(prototype&&prototype.mutation){var inputTypes=Object.values(prototype.inputs).filter(function(input){return blocks[input.shadow].parent===prototypeId;}).map(function(input){var inputBlock=blocks[input.shadow];var inputType;switch(inputBlock.opcode){case'argument_reporter_string_number':inputType='string';break;case'argument_reporter_boolean':inputType='boolean';break;default:inputType='string';}return inputType;});procedures.push({id:blockId,comment:block.comment,code:prototype.mutation.proccode,argumentNames:JSON.parse(prototype.mutation.argumentnames||'[]'),argumentIds:JSON.parse(prototype.mutation.argumentids||'[]'),argumentTypes:inputTypes,argumentDefaults:JSON.parse(prototype.mutation.argumentdefaults||'[]'),warp:prototype.mutation.warp==='true'});}}};for(var blockId in blocks){_loop();}return procedures;};/**
 * Formatter which is used for translation.
 * This will be replaced which is used in the runtime.
 * @param {object} messageData - format-message object
 * @returns {string} - message for the locale
 */var formatMessage=function formatMessage(messageData){return messageData.default;};/**
 * Setup format-message for this extension.
 */var setupTranslations=function setupTranslations(){var localeSetup=formatMessage.setup();if(localeSetup&&localeSetup.translations[localeSetup.locale]){Object.assign(localeSetup.translations[localeSetup.locale],translations[localeSetup.locale]);}};var EXTENSION_ID='gai';/**
 * URL to get this extension as a module.
 * When it was loaded as a module, 'extensionURL' will be replaced a URL which is retrieved from.
 * @type {string}
 */var extensionURL='https://yokobond.github.io/xcx-gai/dist/gai.mjs';/**
 * Xcratch blocks for Generative AI (GAI).
 * This class provides blocks to interact with Generative AI APIs.
 */var GAIBlocks=/*#__PURE__*/function(){/**
   * Construct a set of blocks for Generative AI.
   * @param {Runtime} runtime - the Scratch 3.0 runtime.
   */function GAIBlocks(runtime){var _this=this;_classCallCheck$1(this,GAIBlocks);/**
     * The Scratch 3.0 runtime.
     * @type {Runtime}
     */this.runtime=runtime;if(runtime.formatMessage){// Replace 'formatMessage' to a formatter which is used in the runtime.
formatMessage=runtime.formatMessage;}runtime.on('EXTENSION_ADDED',this.onExtensionAdded.bind(this));runtime.on('PROJECT_STOP_ALL',function(){_this.stopListening();AIAdapter.abortAllRequests("Project stopped");});runtime.on('STOP_FOR_TARGET',function(target){_this.abortRequestsForTarget(target,"Request stopped for ".concat(target.sprite.name));});this.functionNamePrefix='func_';this.functionArgPrefix='arg_';// Default to Gemini adapter
this.AIAdapter=AIAdapter;}return _createClass$1(GAIBlocks,[{key:"onExtensionAdded",value:function onExtensionAdded(extensionInfo){if(extensionInfo.id==='gai'){checkDebugMode();}}/**
     * @returns {object} metadata for this extension and its blocks.
     */},{key:"getInfo",value:function getInfo(){setupTranslations();return{id:GAIBlocks.EXTENSION_ID,name:GAIBlocks.EXTENSION_NAME,extensionURL:GAIBlocks.extensionURL,blockIconURI:img,showStatusButton:false,blocks:[{opcode:'chat',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.chat',default:'chat [PROMPT]',description:'chat block text of GAI'}),func:'chat',arguments:{PROMPT:{type:ArgumentType.STRING,defaultValue:formatMessage({id:'gai.chatDefault',default:'Hello AI!',description:'default chat prompt for GAI'})}}},{opcode:'chatHistory',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.chatHistory',default:'chat history',description:'chat history block text for GAI'}),disableMonitor:true,func:'chatHistory',arguments:{}},{opcode:'startChat',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.startChat',default:'start chat with history [HISTORY]',description:'start chat for GAI'}),func:'startChat',arguments:{HISTORY:{type:ArgumentType.STRING,defaultValue:"{\"role\":\"user\",\"content\":\"".concat(formatMessage({id:'gai.startChatDefault',default:'Hello AI!',description:'default start chat history for GAI'}),"\"}")}}},{opcode:'generate',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.generate',default:'generate [PROMPT]',description:'generate block text of GAI'}),func:'generate',arguments:{PROMPT:{type:ArgumentType.STRING,defaultValue:formatMessage({id:'gai.generateDefault',default:'What is AI?',description:'default generate prompt for GAI'})}}},'---',{opcode:'whenResponseReceived',blockType:BlockType.EVENT,text:formatMessage({id:'gai.whenResponseReceived',default:'when response received',description:'when response received for GAI'}),isEdgeActivated:false,shouldRestartExistingThreads:true},{opcode:'responseText',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.responseText',default:'response text'}),disableMonitor:true,func:'responseText'},{opcode:'responseSafetyRating',hideFromPalette:true,// deprecated cause it's only available in Gemini
blockType:BlockType.REPORTER,text:formatMessage({id:'gai.responseSafetyRating',default:'response #[CANDIDATE_INDEX] safety rating [HARM_CATEGORY]',description:'last result text for GAI'}),disableMonitor:true,func:'responseSafetyRating',arguments:{CANDIDATE_INDEX:{type:ArgumentType.NUMBER,menu:'responseCandidateIndexMenu'},HARM_CATEGORY:{type:ArgumentType.STRING,menu:'harmCategoryMenu'}}},{opcode:'whenPartialResponseReceived',blockType:BlockType.EVENT,text:formatMessage({id:'gai.whenPartialResponseReceived',default:'when partial response received',description:'when partial response received for GAI'}),isEdgeActivated:false,shouldRestartExistingThreads:true},{opcode:'partialResponseText',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.partialResponseText',default:'partial response text',description:'partial response text of GAI'}),disableMonitor:true,func:'partialResponseText',arguments:{}},{opcode:"getFileDataAtIndex",blockType:BlockType.REPORTER,text:formatMessage({id:'gai.getFileDataAtIndex',default:'generated file data at [INDEX]',description:'file data at index block text for GAI'}),disableMonitor:true,func:'getFileDataAtIndex',arguments:{INDEX:{type:ArgumentType.NUMBER,defaultValue:1}}},{opcode:'getFileMediaTypeAtIndex',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.getFileMediaTypeAtIndex',default:'generated file media type at [INDEX]',description:'file media type at index block text for GAI'}),disableMonitor:true,func:'getFileMediaTypeAtIndex',arguments:{INDEX:{type:ArgumentType.NUMBER,defaultValue:1}}},{opcode:'getMaxFileNumber',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.getMaxFileNumber',default:'max generated file count',description:'max generated file count block text for GAI'}),disableMonitor:true,func:'getMaxFileNumber',arguments:{}},'---',{opcode:'costumeData',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.costumeData',default:'costume data [COSTUME]'}),func:'costumeData',arguments:{COSTUME:{type:ArgumentType.STRING,menu:'costumeMenu'}}},{opcode:'backdropData',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.backdropData',default:'backdrop data [BACKDROP]'}),func:'backdropData',arguments:{BACKDROP:{type:ArgumentType.STRING,menu:'backdropMenu'}}},{opcode:'snapshotData',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.snapshotData',default:'snapshot data',description:'snapshotData block text for GAI'}),func:'snapshotData',arguments:{}},{opcode:'soundData',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.soundData',default:'sound data [SOUND]',description:'soundData block text for GAI'}),func:'soundData',arguments:{SOUND:{type:ArgumentType.STRING,menu:'soundMenu'}}},{opcode:'startListening',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.startListening',default:'start listening',description:'startListening block text for GAI'}),func:'startListening',arguments:{}},{opcode:'stopListening',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.stopListening',default:'stop listening',description:'stopListening block text for GAI'}),func:'stopListening',arguments:{}},{opcode:'listenedData',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.listenedData',default:'listened data',description:'listenedData block text for GAI'}),func:'listenedData',arguments:{}},'---',{opcode:'setSafetyRating',hideFromPalette:true,// deprecated cause it's only available in Gemini
blockType:BlockType.COMMAND,text:formatMessage({id:'gai.setSafetyRating',default:'set [HARM_CATEGORY] to [BLOCK_THRESHOLD]',description:'set safety rating for GAI'}),disableMonitor:true,func:'setSafetyRating',arguments:{HARM_CATEGORY:{type:ArgumentType.STRING,menu:'harmCategorySettingMenu'},BLOCK_THRESHOLD:{type:ArgumentType.STRING,menu:'harmBlockThresholdMenu'}}},{opcode:'setGenerationConfig',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.setGenerationConfig',default:'set generation [CONFIG] to [VALUE]',description:'set generation config block text for GAI'}),func:'setGenerationConfig',arguments:{CONFIG:{type:ArgumentType.STRING,menu:'generationConfigMenu'},VALUE:{type:ArgumentType.STRING,defaultValue:'1'}}},{opcode:'generationConfig',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.generationConfig',default:'generation [CONFIG]',description:'generation config block text for GAI'}),func:'generationConfig',arguments:{CONFIG:{type:ArgumentType.STRING,menu:'generationConfigMenu'}}},'---',{opcode:'setFunctionCallingMode',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.setFunctionCallingMode',default:'set function calling mode [MODE]',description:'set function calling mode block text for GAI'}),func:'setFunctionCallingMode',arguments:{MODE:{type:ArgumentType.STRING,menu:'functionCallingModeMenu'}}},{opcode:'returnResultToAI',blockType:BlockType.COMMAND,isTerminal:true,text:formatMessage({id:'gai.returnResultToAI',default:'return [RESULT] to AI',description:'return result to AI block text for GAI'}),arguments:{RESULT:{type:ArgumentType.STRING,defaultValue:' '}}},'---',{opcode:'setModel',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.setModel',default:'use model [MODEL_ID]',description:'model code setting block for GAI'}),func:'setModel',arguments:{MODEL_ID:{type:ArgumentType.STRING,defaultValue:AIAdapter.DEFAULT_MODEL_ID.generative}}},{opcode:'getModel',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getModel',default:'model',description:'model block text for GAI'}),func:'getModel',arguments:{}},{opcode:'getModelIDAtIndex',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getModelIDAtIndex',default:'model ID at [MODEL_INDEX]',description:'model ID block text for GAI'}),func:'getModelIDAtIndex',arguments:{MODEL_INDEX:{type:ArgumentType.NUMBER,defaultValue:1}}},{opcode:'getMaxModelNumber',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getMaxModelNumber',default:'max model number',description:'max model number block text for GAI'}),func:'getMaxModelNumber',arguments:{}},{opcode:'setGenerativeModel',hideFromPalette:true,// deprecated cause generative and embedding are unified
blockType:BlockType.COMMAND,text:formatMessage({id:'gai.setGenerativeModel',default:'use model [MODEL_ID] for generative',description:'generative model code setting block for GAI'}),func:'setGenerativeModel',arguments:{MODEL_ID:{type:ArgumentType.STRING,defaultValue:AIAdapter.DEFAULT_MODEL_ID.generative}}},{opcode:'getGenerativeModel',hideFromPalette:true,// deprecated cause generative and embedding are unified
blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getGenerativeModel',default:'generative model',description:'generative model block text for GAI'}),func:'getGenerativeModel',arguments:{}},{opcode:'getGenerativeModelID',hideFromPalette:true,// deprecated cause generative and embedding are unified
blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getGenerativeModelID',default:'generative model ID at [MODEL_INDEX]',description:'generative model ID block text for GAI'}),func:'getGenerativeModelID',arguments:{MODEL_INDEX:{type:ArgumentType.NUMBER,defaultValue:1}}},{opcode:'getMaxGenerativeModelNumber',hideFromPalette:true,// deprecated cause generative and embedding are unified
blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getMaxGenerativeModelNumber',default:'max generative model number',description:'max generative model number block text for GAI'}),func:'getMaxGenerativeModelNumber',arguments:{}},'---',{opcode:'getValueFromJson',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.getValueFromJson',default:'get [PATH] from JSON [JSON]',description:'get value from JSON block text for GAI'}),func:'getValueFromJson',arguments:{PATH:{type:ArgumentType.STRING,defaultValue:'key1.key2'},JSON:{type:ArgumentType.STRING,defaultValue:'{"key1":{"key2":"value"}}'}}},{opcode:'getItemOfJsonArray',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.getItemOfJsonArray',default:'item [INDEX] of JSON array [JSON]',description:'get value from JSON array block text for GAI'}),func:'getItemOfJsonArray',arguments:{INDEX:{type:ArgumentType.NUMBER,defaultValue:1},JSON:{type:ArgumentType.STRING,defaultValue:'[1,2,3]'}}},{opcode:'lengthOfJsonArray',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.lengthOfJsonArray',default:'length of JSON array [JSON]',description:'length of JSON array block text for GAI'}),func:'lengthOfJsonArray',arguments:{JSON:{type:ArgumentType.STRING,defaultValue:'[1,2,3]'}}},'---',{opcode:'embeddingFor',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.embeddingFor',default:'embedding for [CONTENT]',description:'embed block text for GAI'}),func:'embeddingFor',arguments:{CONTENT:{type:ArgumentType.STRING,defaultValue:formatMessage({id:'gai.embeddingForDefault',default:'cat',description:'default embedding content for GAI'})}}},{opcode:'embeddingDistanceOf',blockType:BlockType.REPORTER,text:formatMessage({id:'gai.embeddingDistanceOf',default:'[METRIC] of [VECTOR_A] and [VECTOR_B]',description:'vector distance block text for GAI'}),func:'embeddingDistanceOf',arguments:{METRIC:{type:ArgumentType.STRING,menu:'distanceMetricMenu'},VECTOR_A:{type:ArgumentType.STRING,defaultValue:'1,1,1'},VECTOR_B:{type:ArgumentType.STRING,defaultValue:'1,2,3'}}},'---',{opcode:'setEmbeddingModel',hideFromPalette:true,// deprecated cause generative and embedding are unified
blockType:BlockType.COMMAND,text:formatMessage({id:'gai.setEmbeddingModel',default:'use model [MODEL_ID] for embedding',description:'embedding model code setting block for GAI'}),func:'setEmbeddingModel',arguments:{MODEL_ID:{type:ArgumentType.STRING,defaultValue:AIAdapter.DEFAULT_MODEL_ID.embedding}}},{opcode:'getEmbeddingModel',hideFromPalette:true,// deprecated cause generative and embedding are unified
blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getEmbeddingModel',default:'embedding model',description:'embedding model block text for GAI'}),func:'getEmbeddingModel',arguments:{}},{opcode:'getEmbeddingModelID',hideFromPalette:true,// deprecated cause generative and embedding are unified
blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getEmbeddingModelID',default:'embedding model ID at [MODEL_INDEX]',description:'embedding model ID block text for GAI'}),func:'getEmbeddingModelID',arguments:{MODEL_INDEX:{type:ArgumentType.NUMBER,defaultValue:1}}},{opcode:'getMaxEmbeddingModelNumber',hideFromPalette:true,// deprecated cause generative and embedding are unified
blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getMaxEmbeddingModelNumber',default:'max embedding model number',description:'max embedding model number block text for GAI'}),func:'getMaxEmbeddingModelNumber',arguments:{}},'---',{opcode:'askApiKey',blockType:BlockType.COMMAND,blockAllThreads:true,text:formatMessage({id:'gai.askApiKey',default:'ask API key with message [MESSAGE]',description:'ask API key for GAI'}),func:'askApiKey',arguments:{MESSAGE:{type:ArgumentType.STRING,defaultValue:formatMessage({id:'gai.askApiKeyDefault',default:'Please enter API key',description:'default message for ask API key dialog'})}}},{opcode:'apiKey',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.apiKey',default:'API key',description:'API key for GAI'}),func:'apiKey',arguments:{}},{opcode:'setApiKey',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.setApiKey',default:'set API key to [KEY]',description:'set API key for GAI'}),func:'setApiKey',arguments:{KEY:{type:ArgumentType.STRING,defaultValue:' ',description:'API key for GAI'}}},{opcode:'setBaseUrl',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.setBaseUrl',default:'set base URL to [URL]',description:'set base URL for AI service'}),func:'setBaseUrl',arguments:{URL:{type:ArgumentType.STRING,defaultValue:'https://generativelanguage.googleapis.com/v1beta',description:'base URL for AI service'}}},{opcode:'baseUrl',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.baseUrl',default:'base URL',description:'base URL for GAI'}),func:'baseUrl',arguments:{}},{opcode:'setApiType',blockType:BlockType.COMMAND,text:formatMessage({id:'gai.setApiType',default:'set API type to [API]',description:'set API type for GAI'}),func:'setApiType',arguments:{API:{type:ArgumentType.STRING,menu:'adapterMenu'}}},{opcode:'getApiType',blockType:BlockType.REPORTER,disableMonitor:true,text:formatMessage({id:'gai.getApiType',default:'API type',description:'API type for GAI'}),func:'getApiType',arguments:{}}],menus:{costumeMenu:{acceptReporters:true,items:'getCostumeMenu'},backdropMenu:{acceptReporters:true,items:'getBackdropMenu'},soundMenu:{acceptReporters:true,items:'getSoundMenu'},responseCandidateIndexMenu:{acceptReporters:true,items:[{text:'1',value:'1'}]},harmCategorySettingMenu:{acceptReporters:false,items:[{text:'DEPRECATED',value:'DEPRECATED'}]},harmCategoryMenu:{acceptReporters:false,items:[{text:'DEPRECATED',value:'DEPRECATED'}]},harmBlockThresholdMenu:{acceptReporters:false,items:[{text:'DEPRECATED',value:'DEPRECATED'}]},generationConfigMenu:{acceptReporters:false,items:this.getGenerationConfigMenu()},functionCallingModeMenu:{acceptReporters:false,items:this.getFunctionCallingModeMenu()},distanceMetricMenu:{acceptReporters:false,items:this.getEmbeddingDistanceMetricMenu()},adapterMenu:{acceptReporters:false,items:this.getAdapterMenu()}}};}},{key:"getCostumeMenu",value:function getCostumeMenu(){var menu=[];var target=this.runtime.getEditingTarget();if(!target){return menu;}var costumes=target.sprite.costumes;for(var i=0;i<costumes.length;i++){menu.push({text:costumes[i].name,value:costumes[i].name});}return menu;}},{key:"getBackdropMenu",value:function getBackdropMenu(){var menu=[];var target=this.runtime.getTargetForStage();var backdrops=target.sprite.costumes;for(var i=0;i<backdrops.length;i++){menu.push({text:backdrops[i].name,value:backdrops[i].name});}return menu;}},{key:"getSoundMenu",value:function getSoundMenu(){var menu=[];var target=this.runtime.getEditingTarget();if(!target){return[''];}var sounds=target.sprite.sounds;for(var i=0;i<sounds.length;i++){menu.push({text:sounds[i].name,value:sounds[i].name});}if(sounds.length===0){return[''];}return menu;}},{key:"getGenerationConfigMenu",value:function getGenerationConfigMenu(){var menu=[{text:formatMessage({id:'gai.generationConfigMenu.temperature',default:'Temperature',description:'generation config menu item for temperature in GAI'}),value:'temperature'},{text:formatMessage({id:'gai.generationConfigMenu.topP',default:'Top P',description:'generation config menu item for top P in GAI'}),value:'topP'},{text:formatMessage({id:'gai.generationConfigMenu.topK',default:'Top K',description:'generation config menu item for top K in GAI'}),value:'topK'},{text:formatMessage({id:'gai.generationConfigMenu.maxOutputTokens',default:'Max Output Tokens',description:'generation config menu item for max output tokens in GAI'}),value:'maxOutputTokens'},{text:formatMessage({id:'gai.generationConfigMenu.stopSequences',default:'Stop Sequences',description:'generation config menu item for stop sequences in GAI'}),value:'stopSequences'},{text:formatMessage({id:'gai.generationConfigMenu.systemInstruction',default:'System Instruction',description:'generation config menu item for system instruction in GAI'}),value:'systemInstruction'},{text:formatMessage({id:'gai.generationConfigMenu.responseSchema',default:'Response Schema',description:'generation config menu item for response schema in GAI'}),value:'responseSchema'}];return menu;}},{key:"getFunctionCallingModeMenu",value:function getFunctionCallingModeMenu(){var menu=[{text:formatMessage({id:'gai.functionCallingModeMenu.auto',default:'Auto',description:'function calling mode menu item for auto in GAI'}),value:'AUTO'},{text:formatMessage({id:'gai.functionCallingModeMenu.required',default:'Required',description:'function calling mode menu item for function calling mode in GAI'}),value:'REQUIRED'},{text:formatMessage({id:'gai.functionCallingModeMenu.none',default:'None',description:'function calling mode menu item for none in GAI'}),value:'NONE'}];return menu;}},{key:"getEmbeddingDistanceMetricMenu",value:function getEmbeddingDistanceMetricMenu(){var menu=[{text:formatMessage({id:'gai.distanceMetricMenu.dotProduct',default:'Dot Product',description:'distance metric menu item for dot product in GAI'}),value:'dotProduct'},{text:formatMessage({id:'gai.distanceMetricMenu.cosine',default:'Cosine Distance',description:'distance metric menu item for cosine in GAI'}),value:'cosine'},{text:formatMessage({id:'gai.distanceMetricMenu.euclidean',default:'Euclidean Distance',description:'distance metric menu item for euclidean in GAI'}),value:'euclidean'}];return menu;}},{key:"getAdapterMenu",value:function getAdapterMenu(){var menu=[{text:formatMessage({id:'gai.adapterMenu.gemini',default:'Gemini',description:'Gemini AI adapter'}),value:'Gemini'},{text:formatMessage({id:'gai.adapterMenu.openai',default:'OpenAI',description:'OpenAI adapter'}),value:'OpenAI'},{text:formatMessage({id:'gai.adapterMenu.openaiCompatible',default:'OpenAI Compatible',description:'OpenAI Compatible adapter'}),value:'OpenAICompatible'},{text:formatMessage({id:'gai.adapterMenu.anthropic',default:'Anthropic',description:'Anthropic adapter'}),value:'Anthropic'}];return menu;}/**
     * Get the AI adapter for the target, with initialization if needed.
     * @param {Target} target - the target to get the AI
     * @return {AIAdapter} - the AI adapter for the target
     */},{key:"getAI",value:function getAI(target){return this.aiForTarget(target)||new AIAdapter(target);}/**
     * Retrieve AI adapter for target if exists.
     * @param {Target} target - the target to get the AI adapter
     * @returns {?AIAdapter} - the AI adapter for the target
     */},{key:"aiForTarget",value:function aiForTarget(target){return AIAdapter.ADAPTERS[target.id];}/**
     * Get partial response text from last result.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - partial response text
     */},{key:"partialResponseText",value:function partialResponseText(args,util){var target=util.target;var ai=this.aiForTarget(target);if(!ai){return'';}var textPart=ai.getLastPartialText();if(!textPart){return'';}return textPart;}/**
     * Whether the block is using in the target.
     * @param {string} blockOpcode - block opcode
     * @param {Target} target - the target to check
     * @returns {boolean} - whether the block is using in the target
     */},{key:"blockIsUsingInTarget",value:function blockIsUsingInTarget(blockOpcode,target){var executableBlocks=target.blocks._blocks;for(var block in executableBlocks){if(executableBlocks[block].opcode===blockOpcode){return true;}}return false;}/**
     * Dispatch a function call to the target's procedure definition.
     * @param {FunctionCall} call - the function call to dispatch
     * @param {Target} target - the target to dispatch the call to
     * @param {Runtime} runtime - the runtime instance
     */},{key:"_dispatchFunctionCall",value:function _dispatchFunctionCall(call,target,runtime){// Find the procedure definition
var functionSpec=call.spec;if(!functionSpec){console.error("Procedure not found: ".concat(call.name));call.failed();return;}var procedureCode=functionSpec.procedureCode;// Get the procedure definition block ID
var procedureDefinition=target.blocks.getProcedureDefinition(procedureCode);if(!procedureDefinition){console.error("Procedure definition not found: ".concat(procedureCode));call.failed();return;}try{var argumentMap={};Object.entries(call.args).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];var paramName=functionSpec.argumentDict[key];if(paramName){// Type conversion
switch(functionSpec.parameters.properties[key].type){case'string':value=String(value);break;case'number':value=Number(value);break;case'boolean':value=Boolean(value);break;}argumentMap[paramName]=value;}});// Create a new thread for the procedure call
var procThread=runtime._pushThread(procedureDefinition,target);procThread.persistentParams=argumentMap;// Hook into the thread's getParam and pushStack methods to handle persistent parameters
var originalGetParam=procThread.getParam.bind(procThread);procThread.getParam=function(paramName){var value=originalGetParam(paramName);if(value===null&&procThread.persistentParams&&Object.prototype.hasOwnProperty.call(procThread.persistentParams,paramName)){value=procThread.persistentParams[paramName];}return value;};var originalPushStack=procThread.pushStack.bind(procThread);procThread.pushStack=function(blockId){var result=originalPushStack(blockId);if(procThread.persistentParams){if(procThread.initParams){procThread.initParams();Object.entries(procThread.persistentParams).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2),paramName=_ref4[0],value=_ref4[1];if(procThread.pushParam){procThread.pushParam(paramName,value);}});}}return result;};// Use STATUS_YIELD_TICK to ensure parameter setup happens before actual execution
procThread.status=3;// Thread.STATUS_YIELD_TICK
procThread.functionCall=call;call.thread=procThread;call.status='PROCESSING';}catch(e){console.error(e);call.failed();}}/**
     * Check if all function calls have completed
     * @param {Array<FunctionCall>} funcCalls - array of function calls
     * @returns {boolean} - true if all completed
     */},{key:"allFunctionCallsFinished",value:function allFunctionCallsFinished(funcCalls){return funcCalls.every(function(funcCall){return funcCall.isStopped();});}/**
     * Stop all ongoing requests for the specific target.
     * @param {Target} target - the target to abort requests for
     * @param {string} reason - reason for aborting
     */},{key:"abortRequestsForTarget",value:function abortRequestsForTarget(target,reason){var ai=this.aiForTarget(target);if(ai){ai.abortRequests(reason);}}/**
     * Request AI to generate content or chat.
     * @param {string} prompt - the prompt to send to the AI.
     * @param {boolean} isChat - whether this is a chat request.
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - a Promise that resolves response text
     * @private
     */},{key:"_requestAI",value:function _requestAI(prompt,isChat,util){var _requestState$functio,_this2=this;var target=util.target;var ai=this.aiForTarget(target);var stackFrame=util.stackFrame;var requestState=stackFrame.generatingState;if(!requestState){requestState=stackFrame.generatingState={};}(_requestState$functio=requestState.functionCalls)===null||_requestState$functio===void 0||_requestState$functio.forEach(function(funcCall){funcCall.updateStatusOn(util.runtime);});if(requestState.finished){if(!requestState.functionCalls||requestState.functionCalls.every(function(funcCall){return funcCall.isStopped();})){// Request and all function calls finished
return ai.getLastResponseText();}}if(requestState.error){// Retrieve error message and finish the request
return requestState.error.message||requestState.error.name;}if(!requestState.requested){// Start a new request
requestState.requested=true;this.updateFunctionRegistry(target);var responseTextHandler=function responseTextHandler(responseText){if(responseText!==''){_this2.runtime.startHats('gai_whenResponseReceived',null,target);}};var functionDispatcher=function functionDispatcher(call){requestState.functionCalls=requestState.functionCalls||[];requestState.functionCalls.push(call);return _this2._dispatchFunctionCall(call,target,util.runtime);};var partialTextHandler;if(this.blockIsUsingInTarget('gai_whenPartialResponseReceived',target)){partialTextHandler=function partialTextHandler(partialText){if(partialText!==''){_this2.runtime.startHats('gai_whenPartialResponseReceived',null,target);}};}ai.requestGenerate(prompt,responseTextHandler,functionDispatcher,partialTextHandler,isChat).then(function(){requestState.finished=true;}).catch(function(error){console.error(error);requestState.error=error;});}util.yield();return;// Wait for the next step
}/**
     * Request AI to generate content.
     * @param {object} args - the block's arguments.
     * @param {string} args.PROMPT - prompt to AI
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - a Promise that resolves response text
     */},{key:"generate",value:function generate(args,util){if(!this.aiForTarget(util.target)){return Promise.resolve("AI is not available");}var promptText=Cast.toString(args.PROMPT);var prompt=interpretContentPartsText(promptText);return this._requestAI(prompt,false,util);}/**
     * Chat to AI. Start chat if not started.
     * @param {object} args - the block's arguments.
     * @param {string} args.PROMPT - message to AI
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - a Promise that resolves response text
     */},{key:"chat",value:function chat(args,util){if(!this.aiForTarget(util.target)){return Promise.resolve("AI is not available");}var promptText=Cast.toString(args.PROMPT);var prompt=interpretContentPartsText(promptText);return this._requestAI(prompt,true,util);}/**
     * Return costume data URL.
     * @param {object} args - the block's arguments.
     * @param {string} args.COSTUME - costume name
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - data URL of the costume
     */},{key:"costumeData",value:function costumeData(args,util){var costumeName=Cast.toString(args.COSTUME);var target=util.target;var costume=getCostumeByNameOrNumber(target,costumeName);if(!costume){return'';}return costumeToDataURL(costume).then(function(dataURL){return" ".concat(dataURL," ");});}/**
     * Return backdrop data directive.
     * @param {object} args - the block's arguments.
     * @param {string} args.BACKDROP - backdrop name
     * @returns {string} - backdrop data directive
     */},{key:"backdropData",value:function backdropData(args){var backdropName=Cast.toString(args.BACKDROP);var stage=this.runtime.getTargetForStage();var backdrop=getCostumeByNameOrNumber(stage,backdropName);if(!backdrop){return'';}return costumeToDataURL(backdrop).then(function(dataURL){return" ".concat(dataURL," ");});}/**
     * Return snapshot data directive.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - a Promise that resolves snapshot data URL
     */},{key:"snapshotData",value:function snapshotData(args,util){var _this3=this;var runtime=this.runtime;var requester=util.target;return new Promise(function(resolve){_this3.runtime.renderer.requestSnapshot(function(imageDataURL){if(DEBUG){insertImageAsSvgCostume(runtime,requester,imageDataURL,null,null,'snapshot',requester.currentCostume+1).catch(function(e){console.error(e);});}resolve(" ".concat(imageDataURL," "));});});}/**
     * Return sound data directive.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - sound data URL
     */},{key:"soundData",value:function soundData(args,util){var soundName=Cast.toString(args.SOUND);var target=util.target;var sounds=target.sprite.sounds;var sound;for(var i=0;i<sounds.length;i++){if(sounds[i].name===soundName){sound=sounds[i];break;}}if(!sound){return'';}return" ".concat(sound.asset.encodeDataURI()," ");}/**
     * Start sound recorder.
     * @returns {Promise} - a Promise that resolves when recorder is started
     * or rejects if user denies access to microphone.
     */},{key:"startSoundRecorder",value:function startSoundRecorder(){var _this4=this;return navigator.mediaDevices.getUserMedia({audio:true}).then(function(stream){_this4.runtime.emitMicListening(true);var mediaRecorder=new MediaRecorder(stream);_this4.soundRecorder=mediaRecorder;_this4.soundRecorderChunks=[];mediaRecorder.ondataavailable=function(event){_this4.soundRecorderChunks.push(event.data);};mediaRecorder.start();_this4.listeningTimeout=setTimeout(function(){_this4.stopSoundRecorder();},60*1000);});}/**
     * Stop sound recorder.
     * @returns {?Promise<string>} - a Promise that resolves when recorder is stopped
     * and recorded sound data URL is returned
     */},{key:"stopSoundRecorder",value:function stopSoundRecorder(){var _this5=this;if(this.listeningTimeout){clearTimeout(this.listeningTimeout);this.listeningTimeout=null;}if(this.soundRecorder){return new Promise(function(resolve){_this5.soundRecorder.onstop=function(){_this5.runtime.emitMicListening(false);var audioBlob=new Blob(_this5.soundRecorderChunks,{type:'audio/wav'});var reader=new FileReader();reader.readAsDataURL(audioBlob);reader.onloadend=function(){var dataURL=reader.result;_this5.recordedSoundData=dataURL;_this5.isListening=false;_this5.soundRecorder=null;resolve(dataURL);};};_this5.soundRecorder.stop();});}return null;}/**
     * Start listening from microphone.
     * @returns {Promise} - a Promise that resolves when recorder is started
     */},{key:"startListening",value:function startListening(){var _this6=this;if(this.isListening){return;}this.isListening=true;return this.startSoundRecorder().catch(function(e){console.warn('Failed to start listening',e);_this6.isListening=false;});}/**
     * Stop listening from microphone.
     * @returns {?Promise<string>} - a Promise that resolves when recorder is stopped
     */},{key:"stopListening",value:function stopListening(){if(!this.isListening){return;}if(this.soundRecorder){return this.stopSoundRecorder();}}/**
     * Listened data.
     * @returns {string} - recorded sound data URL
     */},{key:"listenedData",value:function listenedData(){if(this.recordedSoundData){return" ".concat(this.recordedSoundData," ");}return'';}/**
     * Chat history.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - a Promise that resolves chat history
     */},{key:"chatHistory",value:function chatHistory(args,util){var target=util.target;var ai=this.aiForTarget(target);if(!ai){return'';}var history=ai.getChatHistory();return JSON.stringify(history).slice(1,-1);}/**
     * Start chat with history.
     * @param {object} args - the block's arguments.
     * @param {string} args.HISTORY - contents of the history of chat
     * @param {object} util - utility object provided by the runtime.
     * @returns {void}
     */},{key:"startChat",value:function startChat(args,util){var target=util.target;var ai=this.getAI(target);var historyText=String(args.HISTORY).trim();try{var history=JSON.parse("[".concat(historyText,"]"));ai.startChat(history);}catch(error){console.error("startChat: ".concat(error.message));return error.message;}}/**
     * Get response text from last result.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - response text
     */},{key:"responseText",value:function responseText(args,util){var target=util.target;var ai=this.aiForTarget(target);if(!ai){return'';}var responseText=ai.getLastResponseText();// Replace function names with procedureCode and argument names with their codes
if(responseText&&ai.functionRegistry){Object.values(ai.functionRegistry).forEach(function(functionSpec){if(functionSpec.procedureCode){var funcName=functionSpec.name;var procedureCode=functionSpec.procedureCode;// Replace function name with procedure code in the response text
responseText=responseText.replace(new RegExp(funcName,'g'),procedureCode);// Replace argument names with their codes
if(functionSpec.argumentDict){Object.entries(functionSpec.argumentDict).forEach(function(_ref5){var _ref6=_slicedToArray(_ref5,2),argName=_ref6[0],argCode=_ref6[1];// Replace argument name with argument code in the response text
responseText=responseText.replace(new RegExp(argName,'g'),argCode);});}}});}return responseText;}/**
     * Get response safety rating from last result.
     * @returns {string} - error message
     * @deprecated
     */},{key:"responseSafetyRating",value:function responseSafetyRating(){return'DEPRECATED';}/**
     * Set safety rating.
     * @returns {string} - error message
     * @deprecated
     */},{key:"setSafetyRating",value:function setSafetyRating(){return'DEPRECATED';}/**
     * Set generation config.
     * @param {object} args - the block's arguments.
     * @param {string} args.CONFIG - config key
     * @param {string} args.VALUE - config value
     * @param {object} util - utility object provided by the runtime.
     * @returns {void}
     */},{key:"setGenerationConfig",value:function setGenerationConfig(args,util){var target=util.target;var ai=this.getAI(target);var configKey=args.CONFIG;var configValue=args.VALUE;switch(configKey){case'maxOutputTokens':configValue=Math.max(1,parseInt(Cast.toString(configValue),10));break;case'stopSequences':configValue=Cast.toString(configValue).split(',').map(function(s){return s.trim();});break;case'temperature':configValue=Math.max(0.0,Math.min(1.0,Cast.toNumber(configValue)));break;case'topP':configValue=Math.max(0.0,Math.min(1.0,Cast.toNumber(configValue)));break;case'topK':configValue=Math.max(1,parseInt(Cast.toNumber(configValue),10));break;case'systemInstruction':configValue=Cast.toString(configValue);break;case'responseSchema':try{configValue=JSON.parse(configValue);}catch(error){console.error("responseSchema: ".concat(error.message));}break;default:return"unknown config key: ".concat(configKey);}if(configValue===''){delete ai.generationConfig[configKey];if(configKey==='responseSchema'){// Also remove responseMimeType when removing schema
delete ai.generationConfig.responseMimeType;}return"delete ".concat(configKey);}ai.generationConfig[configKey]=configValue;if(configKey==='responseSchema'&&_typeof$2(configValue)==='object'){// Also set responseMimeType when setting schema
ai.generationConfig.responseMimeType='application/json';}return;}/**
     * Get generation config.
     * @param {object} args - the block's arguments.
     * @param {string} args.CONFIG - config key
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - config value
     */},{key:"generationConfig",value:function generationConfig(args,util){var target=util.target;var ai=this.getAI(target);var configKey=args.CONFIG;var configValue=ai.generationConfig[configKey];if(configValue===null||typeof configValue==='undefined'){return'';}if(Array.isArray(configValue)){// Convert array to comma-separated string
return configValue.join(', ');}if(_typeof$2(configValue)==='object'){// Convert object to JSON string
return JSON.stringify(configValue);}if(typeof configValue==='number'){// Convert number to string
return String(configValue);}if(typeof configValue==='boolean'){// Convert boolean to string
return configValue?'true':'false';}return configValue;}},{key:"getValueFromJson",value:function getValueFromJson(args){var jsonText=args.JSON.trim();if(!jsonText){return'';}var jsonObject;try{jsonObject=JSON.parse(jsonText);}catch(error){return"error: ".concat(error.message);}var path=Cast.toString(args.PATH).trim();if(!path){return'';}try{var func=new Function('jsonObj',"return jsonObj.".concat(path));var value=func.call(this,jsonObject);if(typeof value==='undefined'||value===null){return'';}if(Array.isArray(value)){// Convert array to JSON string
return JSON.stringify(value);}if(_typeof$2(value)==='object'){// Convert object to JSON string
return JSON.stringify(value);}if(typeof value==='number'){// Convert number to string
return String(value);}if(typeof value==='boolean'){// Convert boolean to string
return value?'true':'false';}return String(value);}catch(error){return"error: ".concat(error.message);}}},{key:"getItemOfJsonArray",value:function getItemOfJsonArray(args){var jsonText=args.JSON.trim();if(!jsonText){return'';}if(!jsonText.startsWith('[')&&!jsonText.endsWith(']')){jsonText="[".concat(jsonText,"]");// Wrap in array brackets if not already an array
}try{var jsonArray=JSON.parse(jsonText);if(!Array.isArray(jsonArray)){return'error: not an array';}if(jsonArray.length===0){return'';}var index=parseInt(Cast.toString(args.INDEX),10);if(isNaN(index)||index<1||index>jsonArray.length){return'';}var value=jsonArray[index-1];if(typeof value==='undefined'||value===null){return'';}if(Array.isArray(value)){// Convert array to JSON string
return JSON.stringify(value);}if(_typeof$2(value)==='object'){// Convert object to JSON string
return JSON.stringify(value);}if(typeof value==='number'){// Convert number to string
return String(value);}if(typeof value==='boolean'){// Convert boolean to string
return value?'true':'false';}return String(value);}catch(error){return"error: ".concat(error.message);}}},{key:"lengthOfJsonArray",value:function lengthOfJsonArray(args){var jsonText=args.JSON.trim();if(!jsonText){return 0;// Return 0 for empty JSON
}if(!jsonText.startsWith('[')&&!jsonText.endsWith(']')){jsonText="[".concat(jsonText,"]");// Wrap in array brackets if not already an array
}try{var jsonArray=JSON.parse(jsonText);if(!Array.isArray(jsonArray)){return 0;// Return 0 if not an array
}return jsonArray.length;}catch(error){return 0;// Return 0 if parsing fails
}}/**
     * Set the function calling mode for the target
     * @param {object} args - the arguments for the block
     * @param {object} util - the utility object
     */},{key:"setFunctionCallingMode",value:function setFunctionCallingMode(args,util){var mode=args.MODE;var target=util.target;var ai=this.getAI(target);if(mode==='NONE'){ai.setFunctionCallingMode(AIAdapter.FUNCTION_CALLING_NONE);}else if(mode==='AUTO'){ai.setFunctionCallingMode(AIAdapter.FUNCTION_CALLING_AUTO);}else if(mode==='REQUIRED'){ai.setFunctionCallingMode(AIAdapter.FUNCTION_CALLING_REQUIRED);}}/**
     * Update function call registry for AI.
     * This will re-register all user-defined functions.
     * @param {Target} target - the target to update the function registry
     * @returns {void}
     */},{key:"updateFunctionRegistry",value:function updateFunctionRegistry(target){var ai=this.getAI(target);ai.clearRegisteredFunctions();var procedures=getUserProcedures(target);procedures.forEach(function(proc){var _target$comments$proc;var functionDescription="".concat(proc.code,": ").concat(((_target$comments$proc=target.comments[proc.comment])===null||_target$comments$proc===void 0?void 0:_target$comments$proc.text)||'');var functionArguments=proc.argumentNames.map(function(name,index){var reporterBlocks=Object.values(target.blocks._blocks).filter(function(aBlock){var _aBlock$fields$VALUE;return!aBlock.shadow&&((_aBlock$fields$VALUE=aBlock.fields.VALUE)===null||_aBlock$fields$VALUE===void 0?void 0:_aBlock$fields$VALUE.value)===name;});var comments=reporterBlocks.reduce(function(prev,aBlock){var comment=target.comments[aBlock.comment];return comment?"".concat(prev," ").concat(comment.text,";"):prev;},"".concat(name,": "));return{code:name,type:proc.argumentTypes[index],description:comments};});ai.registerFunction(proc.code,functionDescription,functionArguments);});}/**
     * Return result to AI for function calling of the last response.
     * @param {object} args - the block's arguments.
     * @param {string} args.RESULT - result to return
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - message indicating result is returned
     */},{key:"returnResultToAI",value:function returnResultToAI(args,util){var target=util.target;var ai=this.getAI(target);var result=args.RESULT;// Get the top-level block
var blockId=util.thread.peekStack();var topBlockId=target.blocks.getTopLevelScript(blockId);var topBlock=target.blocks.getBlock(topBlockId);// Check if the top block is a procedure definition
if(!topBlock||topBlock.opcode!=='procedures_definition'){console.info('returnResultToAI: Not in a procedure definition block.');return;}var prototypeId=topBlock.inputs.custom_block.block;var prototype=target.blocks.getBlock(prototypeId);var procedureCode=prototype.mutation.proccode;var functionSpec=ai.getFunctionSpec(procedureCode);if(!functionSpec){console.error("returnResultToAI: \"".concat(procedureCode,"\" is not registered."));return"\"".concat(procedureCode,"\" is not registered.");}var currentCall=util.thread.functionCall;if(!currentCall){console.info('returnResultToAI: No function call in progress.');return'No function call in progress.';}if(currentCall.name!==functionSpec.name){console.info("returnResultToAI: \"".concat(functionSpec.name,"\" is not the current function call."));return;}util.thread.functionCall.result=result;console.debug("\"function: ".concat(functionSpec.name,", block: ").concat(procedureCode,"\", result: ").concat(result,","));return;}/**
     * Get embedding of content.
     * @param {object} args - the block's arguments.
     * @param {string} args.CONTENT - content
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - a Promise that resolves embedding
     */},{key:"embeddingFor",value:function embeddingFor(args,util){var ai=this.aiForTarget(util.target);var stackFrame=util.stackFrame;if(!ai){return"AI is not available";}// Create a unique key for this content to avoid state conflicts
var contentText=Cast.toString(args.CONTENT).trim();// Use a simple hash function to handle multi-byte characters properly
var contentHash=0;for(var i=0;i<contentText.length;i++){var char=contentText.charCodeAt(i);contentHash=(contentHash<<5)-contentHash+char;contentHash=contentHash&contentHash;// Convert to 32bit integer
}var contentKey="embedding_".concat(contentText.length,"_").concat(Math.abs(contentHash));// Initialize embedding requests storage if not exists
if(!stackFrame.embeddingRequests){stackFrame.embeddingRequests={};}// Get or create state for this specific content
var requestState=stackFrame.embeddingRequests[contentKey];if(!requestState){requestState=stackFrame.embeddingRequests[contentKey]={};}if(requestState.requestError){var error=requestState.error;return error.message||error.name;}if(requestState.requestResult){var jsonText=JSON.stringify(requestState.requestResult);var result=jsonText.substring(1,jsonText.length-1);// remove brackets
return result;}if(!requestState.requested){// Start a new request
var content=interpretContentPartsText(contentText);requestState.requested=true;ai.requestEmbedding(content).then(function(embedding){requestState.requestResult=embedding;}).catch(function(error){console.error(error);requestState.error=error;});}util.yield();return;}/**
     * Calculate similarity of two vectors.
     * @param {object} args - the block's arguments.
     * @param {string} args.METRIC - metric {'dotProduct' | 'euclidean'}
     * @param {string} args.VECTOR_A - vector A
     * @param {string} args.VECTOR_B - vector B
     * @returns {number} - dot product
     */},{key:"embeddingDistanceOf",value:function embeddingDistanceOf(args){var metric=args.METRIC;var vectorA=String(args.VECTOR_A).split(',').map(function(s){return parseFloat(s);});var vectorB=String(args.VECTOR_B).split(',').map(function(s){return parseFloat(s);});if(vectorA.length!==vectorB.length)return'error: not same length';if(vectorA.every(function(x){return x===0;})||vectorB.every(function(x){return x===0;}))return'error: zero vector';var result='';switch(metric){case'dotProduct':result=dotProduct(vectorA,vectorB);break;case'cosine':result=cosineDistance(vectorA,vectorB);break;case'euclidean':result=euclideanDistance(vectorA,vectorB);break;default:console.error("embeddingDistanceOf: unknown metric ".concat(metric));}return result;}/**
     * Set API key and reset AI.
     * @param {object} args - the block's arguments.
     * @param {string} args.KEY - API key
     * @param {object} util - utility object provided by the runtime.
     * @returns {void}
     */},{key:"setApiKey",value:function setApiKey(args,util){var apiKey=Cast.toString(args.KEY).trim();var ai=this.getAI(util.target);ai.setApiKey(apiKey);}/**
     * Get API key.
     * @param {object} _args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - API key
     */},{key:"apiKey",value:function apiKey(_args,util){var ai=this.aiForTarget(util.target);if(!ai){return'';}var apiKey=ai.apiKey;if(!apiKey){return'';}if(apiKey.length<=8){return'*'.repeat(apiKey.length);}// Show only first 4 and last 4 characters
// e.g., abcd********wxyz
var firstFourChars=apiKey.slice(0,4);var lastFourChars=apiKey.slice(-4);var maskedPortion='*'.repeat(apiKey.length-8);return firstFourChars+maskedPortion+lastFourChars;}/**
     * Set base URL and optionally switch AI adapter.
     * @param {object} args - the block's arguments.
     * @param {string} args.URL - base URL
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - message
     */},{key:"setBaseUrl",value:function setBaseUrl(args,util){var baseUrl=Cast.toString(args.URL).trim();if(!baseUrl.startsWith('http://')&&!baseUrl.startsWith('https://')){return'error: invalid URL';}var ai=this.getAI(util.target);ai.setBaseUrl(baseUrl);return"set base URL to ".concat(baseUrl);}/**
     * Get base URL.
     * @param {object} _args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - base URL
     */},{key:"baseUrl",value:function baseUrl(_args,util){var ai=this.aiForTarget(util.target);if(!ai){return'';}return ai.baseUrl||'';}/**
     * Set API type.
     * @param {object} args - the block's arguments.
     * @param {string} args.API - API type
     * @param {object} util - utility object provided by the runtime.
     * @returns {void}
     */},{key:"setApiType",value:function setApiType(args,util){var apiType=Cast.toString(args.API).trim();var ai=this.getAI(util.target);ai.setApiType(apiType);}/**
     * Get API type.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - API type
     */},{key:"getApiType",value:function getApiType(args,util){var ai=this.aiForTarget(util.target);if(!ai){return'';}return ai.getApiType();}/**
     * Set model code.
     * @param {object} args - the block's arguments.
     * @param {string} args.MODEL_ID - model code
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - validation result message
     */},{key:"setModel",value:function setModel(args,util){var target=util.target;var ai=this.getAI(target);var modelCode=Cast.toString(args.MODEL_ID).trim();return ai.setModel(modelCode).catch(function(error){return"Error setting model: ".concat(error.message);});}/**
     * Get model code.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - model code
     */},{key:"getModel",value:function getModel(args,util){var target=util.target;var ai=this.aiForTarget(target);if(!ai){return'';}return ai.getModel();}/**
     * Get model ID at index.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - model ID
     */},{key:"getModelIDAtIndex",value:function getModelIDAtIndex(args,util){var modelIndex=parseInt(args.MODEL_INDEX,10);if(isNaN(modelIndex)){return'';}if(modelIndex<1){return'';}var ai=this.aiForTarget(util.target);if(!ai){return'';}return ai.getModelIDs().then(function(modelIDs){if(!modelIDs||modelIndex>modelIDs.length){return'';}return modelIDs[modelIndex-1];});}/**
     * Get max model number.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {number} - max model number
     */},{key:"getMaxModelNumber",value:function getMaxModelNumber(args,util){var ai=this.aiForTarget(util.target);if(!ai){return 0;}return ai.getModelIDs().then(function(modelIDs){return modelIDs?modelIDs.length:0;});}/**
     * Get file data at index from last result.
     * @param {object} args - the block's arguments.
     * @param {number} args.INDEX - file index (1-based)
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - file data URL in format "data:mediaType;base64,base64Data"
     */},{key:"getFileDataAtIndex",value:function getFileDataAtIndex(args,util){var ai=this.aiForTarget(util.target);if(!ai){return'';}var files=ai.getResultFiles();if(!files||files.length===0){return'';}var inputIndex=Math.floor(Number(args.INDEX));if(inputIndex<1){return'';// Invalid index (less than 1)
}var index=inputIndex-1;// Convert to 0-based index
if(index<files.length){var file=files[index];var base64=file.base64||'';var mediaType=file.mediaType||'application/octet-stream';if(base64){return"data:".concat(mediaType,";base64,").concat(base64);}}return'';}/**
     * Get file media type at index from last result.
     * @param {object} args - the block's arguments.
     * @param {number} args.INDEX - file index (1-based)
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - file media type
     */},{key:"getFileMediaTypeAtIndex",value:function getFileMediaTypeAtIndex(args,util){var ai=this.aiForTarget(util.target);if(!ai){return'';}var files=ai.getResultFiles();if(!files||files.length===0){return'';}var inputIndex=Math.floor(Number(args.INDEX));if(inputIndex<1){return'';// Invalid index (less than 1)
}var index=inputIndex-1;// Convert to 0-based index
if(index<files.length){return files[index].mediaType||'';}return'';}/**
     * Get max file number from last result.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {number} - max file number
     */},{key:"getMaxFileNumber",value:function getMaxFileNumber(args,util){var ai=this.aiForTarget(util.target);if(!ai){return 0;}var files=ai.getResultFiles();return files?files.length:0;}/**
     * Set generative model code.
     * @param {object} args - the block's arguments.
     * @param {string} args.MODEL_ID - model code
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - validation result message
     * @deprecated Use setModel instead.
     */},{key:"setGenerativeModel",value:function setGenerativeModel(args,util){return this.setModel(args,util);}/**
     * Get generative model code.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - model code
     * @deprecated Use getModel instead.
     */},{key:"getGenerativeModel",value:function getGenerativeModel(args,util){return this.getModel(args,util);}/**
     * Get generative model ID.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - model ID
     * @deprecated Use getModelIDAtIndex instead.
     */},{key:"getGenerativeModelID",value:function getGenerativeModelID(args,util){return this.getModelIDAtIndex(args,util);}/**
     * Get max generative model number.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {number} - max generative model number
     * @deprecated Use getMaxModelNumber instead.
     */},{key:"getMaxGenerativeModelNumber",value:function getMaxGenerativeModelNumber(args,util){return this.getMaxModelNumber(args,util);}/**
     * Set embedding model code.
     * @param {object} args - the block's arguments.
     * @param {string} args.MODEL_ID - model code
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - validation result message
     * @deprecated Use setModel instead.
     */},{key:"setEmbeddingModel",value:function setEmbeddingModel(args,util){return this.setModel(args,util);}/**
     * Get embedding model code.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - model code
     * @deprecated Use getModel instead.
     */},{key:"getEmbeddingModel",value:function getEmbeddingModel(args,util){return this.getModel(args,util);}/**
     * Get embedding model ID.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {string} - model ID
     * @deprecated Use getModelIDAtIndex instead.
     */},{key:"getEmbeddingModelID",value:function getEmbeddingModelID(args,util){return this.getModelIDAtIndex(args,util);}/**
     * Get max embedding model number.
     * @param {object} args - the block's arguments.
     * @param {object} util - utility object provided by the runtime.
     * @returns {number} - max embedding model number
     * @deprecated Use getMaxModelNumber instead.
     */},{key:"getMaxEmbeddingModelNumber",value:function getMaxEmbeddingModelNumber(args,util){return this.getMaxModelNumber(args,util);}/**
     * Open dialog to input API key by user.
     * @param {string} [targetName] - target name to show in the dialog
     * @param {string} [defaultApiKey] - default API key
     * @param {string} [customMessage] - custom message to show in the dialog
     * @returns {Promise<string>?} - a Promise that resolves API key or null if canceled
     */},{key:"openApiKeyDialog",value:function openApiKeyDialog(){var _this7=this;var targetName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var defaultApiKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var customMessage=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';if(this.apiKeyDialogOpened){// prevent to open multiple dialogs
return null;}this.apiKeyDialogOpened=true;var inputDialog=document.createElement('dialog');inputDialog.style.padding='0px';var dialogFace=document.createElement('div');dialogFace.style.padding='16px';inputDialog.appendChild(dialogFace);var message=customMessage||formatMessage({id:'gai.apiKeyDialog.message',default:'set API key for AI of [targetName]',description:'label of API key input dialog for GAI'}).replace('[targetName]',targetName);var label=document.createTextNode(message);dialogFace.appendChild(label);// Dialog form
var apiKeyForm=document.createElement('form');apiKeyForm.setAttribute('method','dialog');apiKeyForm.style.margin='8px';apiKeyForm.addEventListener('submit',function(e){e.preventDefault();});dialogFace.appendChild(apiKeyForm);// API key input
var apiKeyInput=document.createElement('input');apiKeyInput.setAttribute('type','text');apiKeyInput.setAttribute('id','apiKeyInput');apiKeyInput.setAttribute('size','50');apiKeyInput.setAttribute('value',defaultApiKey?defaultApiKey:'');apiKeyForm.appendChild(apiKeyInput);// Cancel button
var cancelButton=document.createElement('button');cancelButton.textContent=formatMessage({id:'gai.apiKeyDialog.cancel',default:'cancel',description:'cancel button on groupID input dialog for GAI'});cancelButton.style.margin='8px';dialogFace.appendChild(cancelButton);// OK button
var confirmButton=document.createElement('button');confirmButton.textContent=formatMessage({id:'gai.apiKeyDialog.set',default:'set',description:'set button on API key input dialog for GAI'});confirmButton.style.margin='8px';dialogFace.appendChild(confirmButton);return new Promise(function(resolve){// Add onClick action
var confirmed=function confirmed(){var inputValue=apiKeyInput.value.trim();resolve(inputValue);};confirmButton.onclick=confirmed;var canceled=function canceled(){resolve(null);};cancelButton.onclick=canceled;inputDialog.addEventListener('keydown',function(e){if(e.code==='Enter'){confirmed();}if(e.code==='Escape'){canceled();}});document.body.appendChild(inputDialog);inputDialog.showModal();}).finally(function(){document.body.removeChild(inputDialog);_this7.apiKeyDialogOpened=false;});}/**
     * Ask user to input API key.
     * @param {object} args - the block's arguments.
     * @param {string} args.MESSAGE - message to show in the dialog
     * @param {object} util - utility object provided by the runtime.
     * @returns {Promise<string>} - a Promise that resolves status message
     * 'canceled by user' if canceled, 'API key is empty' if empty key,
     * or 'API key is set' if API key is set.
     */},{key:"askApiKey",value:function askApiKey(args,util){if(this.apiKeyDialogOpened){util.yield();return;}var target=util.target;var ai=this.getAI(target);var message=args.MESSAGE||'Please enter API key';return this.openApiKeyDialog('','',message).then(function(apiKey){if(apiKey===null){// canceled
return'canceled by user';}if(apiKey===''){// empty key
return'API key is empty';}ai.setApiKey(apiKey);return'API key is set';});}}],[{key:"formatMessage",set:/**
     * A translation object which is used in this class.
     * @param {FormatObject} formatter - translation object
     */function set(formatter){formatMessage=formatter;if(formatMessage)setupTranslations();}/**
     * @return {string} - the name of this extension.
     */},{key:"EXTENSION_NAME",get:function get(){return formatMessage({id:'gai.name',default:'GAI',description:'name of google generative AI extension'});}/**
     * @return {string} - the ID of this extension.
     */},{key:"EXTENSION_ID",get:function get(){return EXTENSION_ID;}/**
     * URL to get this extension.
     * @type {string}
     */},{key:"extensionURL",get:function get(){return extensionURL;}/**
     * Set URL to get this extension.
     * The extensionURL will be changed to the URL of the loading server.
     * @param {string} url - URL
     */,set:function set(url){extensionURL=url;}}]);}();

/***/ })

}]);
//# sourceMappingURL=preload_https_3A_2F_2Fyokobond_2Egithub_2Eio_2Fxcx-gai_2Fdist_2Fgai_2Emjs_extension_mjs.a81335bfe646a035a5ed.js.map